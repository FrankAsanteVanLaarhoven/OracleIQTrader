/*! For license information please see main.969db050.js.LICENSE.txt */
(()=>{var e={356(e,t,n){e.exports=n(9645).last},418(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return"0"===n&&Object.is(Number(t),-0)?"-0":n}},551(){},579(e,t,n){"use strict";e.exports=n(2799)},870(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},896(e,t,n){var a=n(8498).default,r=n(8429);e.exports=function(e){var t=r(e,"string");return"symbol"==a(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},1203(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&a.isLength(e.length)}},1234(){},1293(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:r=!1,trailing:s=!0,maxWait:i}=n,o=Array(2);let l;r&&(o[0]="leading"),s&&(o[1]="trailing");let c=null;const u=a.debounce(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];l=e.apply(this,n),c=null},t,{edges:o}),d=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return null!=i&&(null===c&&(c=Date.now()),Date.now()-c>=i)?(l=e.apply(this,n),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,n),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}},1444(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(418),r=n(3272);t.toPath=function(e){if(Array.isArray(e))return e.map(r.toKey);if("symbol"===typeof e)return[e];const t=[],n=(e=a.toString(e)).length;if(0===n)return t;let s=0,i="",o="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),s++);s<n;){const a=e[s];o?"\\"===a&&s+1<n?(s++,i+=e[s]):a===o?o="":i+=a:l?'"'===a||"'"===a?o=a:"]"===a?(l=!1,t.push(i),i=""):i+=a:"["===a?(l=!0,i&&(t.push(i),i="")):"."===a?i&&(t.push(i),i=""):i+=a,s++}return i&&t.push(i),t}},1844(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},2086(e,t,n){"use strict";e.exports=n(5082)},2104(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(1203),r=n(9921);t.isArrayLikeObject=function(e){return r.isObjectLike(e)&&a.isArrayLike(e)}},2132(e,t,n){"use strict";var a=n(5225).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(870),s=n(4803),i=n(9972);function o(e,t,n,u){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,a){if(null==t)return!0;if(Array.isArray(t))return l(e,t,n,a);if(t instanceof Map)return function(e,t,n,a){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[r,s]of t.entries()){if(!1===n(e.get(r),s,r,e,t,a))return!1}return!0}(e,t,n,a);if(t instanceof Set)return c(e,t,n,a);const r=Object.keys(t);if(null==e||s.isPrimitive(e))return 0===r.length;if(0===r.length)return!0;if(null!==a&&void 0!==a&&a.has(t))return a.get(t)===e;null===a||void 0===a||a.set(t,e);try{for(let i=0;i<r.length;i++){const o=r[i];if(!s.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!n(e[o],t[o],o,e,t,a))return!1}return!0}finally{null===a||void 0===a||a.delete(t)}}(e,t,n,u);case"function":return Object.keys(t).length>0?o(e,a({},t),n,u):i.eq(e,t);default:return r.isObject(e)?"string"!==typeof t||""===t:i.eq(e,t)}}function l(e,t,n,a){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const r=new Set;for(let s=0;s<t.length;s++){const i=t[s];let o=!1;for(let l=0;l<e.length;l++){if(r.has(l))continue;let c=!1;if(n(e[l],i,s,e,t,a)&&(c=!0),c){r.add(l),o=!0;break}}if(!o)return!1}return!0}function c(e,t,n,a){return 0===t.size||e instanceof Set&&l([...e],[...t],n,a)}t.isMatchWith=function e(t,n,a){return"function"!==typeof a?e(t,n,()=>{}):o(t,n,function e(t,n,r,s,i,l){const c=a(t,n,r,s,i,l);return void 0!==c?Boolean(c):o(t,n,e,l)},new Map)},t.isSetMatch=c},2204(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(5316),r=n(7312),s=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const o=n.length;return o>1&&s.isIterateeCall(e,n[0],n[1])?n=[]:o>2&&s.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),a.orderBy(e,r.flatten(n),["asc"])}},2330(e,t,n){"use strict";var a=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=a.useState,i=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(a){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=s({inst:{value:n,getSnapshot:t}}),r=a[0].inst,u=a[1];return o(function(){r.value=n,r.getSnapshot=t,c(r)&&u({inst:r})},[e,n,t]),i(function(){return c(r)&&u({inst:r}),e(function(){c(r)&&u({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},2430(e,t,n){var a;!function(r,s,i){var o,l=256,c=i.pow(l,6),u=i.pow(2,52),d=2*u,h=255;function p(e,t,n){var a=[],h=x(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(s)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(r.crypto||r.msCrypto).getRandomValues(e)),v(e)}catch(a){var t=r.navigator,n=t&&t.plugins;return[+new Date,r,n,r.screen,v(s)]}}():e,3),a),p=new f(a),y=function(){for(var e=p.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,x(v(p.S),s),(t.pass||n||function(e,t,n,a){return a&&(a.S&&m(a,p),e.state=function(){return m(p,{})}),n?(i.random=e,t):e})(y,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,a=this,r=0,s=a.i=a.j=0,i=a.S=[];for(n||(e=[n++]);r<l;)i[r]=r++;for(r=0;r<l;r++)i[r]=i[s=h&s+e[r%n]+(t=i[r])],i[s]=t;(a.g=function(e){for(var t,n=0,r=a.i,s=a.j,i=a.S;e--;)t=i[r=h&r+1],n=n*l+i[h&(i[r]=i[s=h&s+t])+(i[s]=t)];return a.i=r,a.j=s,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(g(e[n],t-1))}catch(s){}return a.length?a:"string"==r?e:e+"\0"}function x(e,t){for(var n,a=e+"",r=0;r<a.length;)t[h&r]=h&(n^=19*t[h&r])+a.charCodeAt(r++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(x(i.random(),s),e.exports){e.exports=p;try{o=n(1234)}catch(y){}}else void 0===(a=function(){return p}.call(t,n,t,e))||(e.exports=a)}("undefined"!==typeof self?self:this,[],Math)},2489(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const n=e[Symbol.toStringTag];if(null==n)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(n,"]")}let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}},2715(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(9599),r=n(7330),s=n(3808),i=n(8845);t.iteratee=function(e){if(null==e)return a.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):s.matches(e);case"string":case"symbol":case"number":return r.property(e)}}},2777(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(e,t,a){var r=null;if(void 0!==a&&(r=""+a),void 0!==t.key&&(r=""+t.key),"key"in t)for(var s in a={},t)"key"!==s&&(a[s]=t[s]);else a=t;return t=a.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:a}}t.Fragment=a,t.jsx=r,t.jsxs=r},3272(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3615(e,t,n){var a=n(896);e.exports=function(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3757(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(4704),r=n(1203),s=n(870),i=n(9972);t.isIterateeCall=function(e,t,n){return!!s.isObject(n)&&(!!("number"===typeof t&&r.isArrayLike(n)&&a.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&i.eq(n[t],e))}},3808(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(8268),r=n(5261);t.matches=function(e){return e=r.cloneDeep(e),t=>a.isMatch(t,e)}},3821(e,t,n){e.exports=n(2204).sortBy},4208(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let a=0;a<e.length;a++){const r=e[a],s=t(r);n.has(s)||n.set(s,r)}return Array.from(n.values())}},4288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var k=Array.isArray;function N(){}var j={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(e,t,a){var r=a.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,r,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case a:u=!0;break;case h:return A((u=e._init)(e._payload),t,r,s,i)}}if(u)return i=i(e),u=""===s?"."+I(e,0):s,k(i)?(r="",null!=u&&(r=u.replace(T,"$&/")+"/"),A(i,t,r,"",function(e){return e})):null!=i&&(E(i)&&(l=i,c=r+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+u,i=C(l.type,c,l.props)),t.push(i)),1;u=0;var d,p=""===s?".":s+":";if(k(e))for(var m=0;m<e.length;m++)u+=A(s=e[m],t,r,o=p+I(s,m),i);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=A(s=s.value,t,r,o=p+I(s,m++),i);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,s,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function _(e,t,n){if(null==e)return e;var a=[],r=0;return A(e,a,"","",function(e){return t.call(n,e,r++)}),a}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},P={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=P,t.Component=v,t.Fragment=r,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return j.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var a=g({},e.props),r=e.key;if(null!=t)for(s in void 0!==t.key&&(r=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(a[s]=t[s]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];a.children=i}return C(e.type,r,a)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var a,r={},s=null;if(null!=t)for(a in void 0!==t.key&&(s=""+t.key),t)S.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(r[a]=t[a]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];r.children=o}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===r[a]&&(r[a]=i[a]);return C(e,s,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.T,n={};j.T=n;try{var a=e(),r=j.S;null!==r&&r(n,a),"object"===typeof a&&null!==a&&"function"===typeof a.then&&a.then(N,R)}catch(s){R(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),j.T=t}},t.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},t.use=function(e){return j.H.use(e)},t.useActionState=function(e,t,n){return j.H.useActionState(e,t,n)},t.useCallback=function(e,t){return j.H.useCallback(e,t)},t.useContext=function(e){return j.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return j.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return j.H.useEffect(e,t)},t.useEffectEvent=function(e){return j.H.useEffectEvent(e)},t.useId=function(){return j.H.useId()},t.useImperativeHandle=function(e,t,n){return j.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.H.useMemo(e,t)},t.useOptimistic=function(e,t){return j.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return j.H.useReducer(e,t,n)},t.useRef=function(e){return j.H.useRef(e)},t.useState=function(e){return j.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.H.useTransition()},t.version="19.2.3"},4332(e,t,n){e.exports=n(5053).uniqBy},4334(e,t,n){var a=n(7359),r=n(7066),s=n(9016),i=n(9538),o=n(6288),l=n(5262),c=n(2430);c.alea=a,c.xor128=r,c.xorwow=s,c.xorshift7=i,c.xor4096=o,c.tychei=l,e.exports=c},4391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4530(){},4704(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4803(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:a,edges:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null;const i=null!=r&&r.includes("leading"),o=null==r||r.includes("trailing"),l=()=>{null!==s&&(e.apply(n,s),n=void 0,s=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),d()},t)},d=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,s=null},h=function(){if(null!==a&&void 0!==a&&a.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s=t;const o=null==c;u(),i&&o&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},null===a||void 0===a||a.addEventListener("abort",d,{once:!0}),h}},4879(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=a.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043(e,t,n){"use strict";e.exports=n(4288)},5053(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(4208),r=n(9599),s=n(2104),i=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.identity;return s.isArrayLikeObject(e)?a.uniqBy(Array.from(e),i.iteratee(t)):[]}},5082(e,t){"use strict";var n=60103,a=60106,r=60107,s=60108,i=60114,o=60109,l=60110,c=60112,u=60113,d=60120,h=60115,p=60116,f=60121,m=60122,g=60117,x=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var y=Symbol.for;n=y("react.element"),a=y("react.portal"),r=y("react.fragment"),s=y("react.strict_mode"),i=y("react.profiler"),o=y("react.provider"),l=y("react.context"),c=y("react.forward_ref"),u=y("react.suspense"),d=y("react.suspense_list"),h=y("react.memo"),p=y("react.lazy"),f=y("react.block"),m=y("react.server.block"),g=y("react.fundamental"),x=y("react.debug_trace_mode"),v=y("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case i:case s:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case o:return e;default:return t}}case a:return t}}}t.isFragment=function(e){return b(e)===r}},5225(e,t,n){var a=n(3615);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},5261(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(6433);t.cloneDeep=function(e){return a.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5262(e,t,n){var a;!function(e,r){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=o:n.amdD&&n.amdO?void 0===(a=function(){return o}.call(t,n,t,r))||(r.exports=a):this.tychei=o}(0,e=n.nmd(e),n.amdD)},5303(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(2489),r=n(4704),s=n(6321),i=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&a.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?i.toPath(t):[t],0===n.length)return!1;let o=e;for(let a=0;a<n.length;a++){const e=n[a];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||s.isArguments(o))&&r.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},5316(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(9709),r=n(7043),s=n(1444);t.orderBy=function(e,t,n,i){if(null==e)return[];n=i?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const o=(e,t)=>{let n=e;for(let a=0;a<t.length&&null!=n;++a)n=n[t[a]];return n},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||r.isKey(e)?e:{key:e,path:s.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let r=0;r<l.length;r++){const s=a.compareValues(e.criteria[r],t.criteria[r],n[r]);if(0!==s)return s}return 0}).map(e=>e.original)}},5414(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:r=!0,trailing:s=!0}=n;return a.debounce(e,t,{leading:r,maxWait:t,trailing:s})}},5508(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(6433),r=n(7599);t.cloneDeepWith=function(e,t){return a.cloneDeepWith(e,(n,s,i,o)=>{const l=null===t||void 0===t?void 0:t(n,s,i,o);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case r.numberTag:case r.stringTag:case r.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return a.copyProperties(t,e),t}case r.argumentsTag:{const t={};return a.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5817(){},5896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[a]=u,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,x=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=a(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function k(e){if(g=!1,w(e),!m)if(null!==a(c))m=!0,j||(j=!0,N());else{var t=a(u);null!==t&&O(k,t.startTime-e)}}var N,j=!1,S=-1,C=5,E=-1;function T(){return!!x||!(t.unstable_now()-E<C)}function I(){if(x=!1,j){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(S),S=-1),f=!0;var s=p;try{t:{for(w(e),h=a(c);null!==h&&!(h.expirationTime>e&&T());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===a(c)&&r(c),w(e)}else r(c);h=a(c)}if(null!==h)n=!0;else{var l=a(u);null!==l&&O(k,l.startTime-e),n=!1}}break e}finally{h=null,p=s,f=!1}n=void 0}}finally{n?N():j=!1}}}if("function"===typeof b)N=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,_=A.port2;A.port1.onmessage=I,N=function(){_.postMessage(null)}}else N=function(){v(I,0)};function O(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===a(c)&&e===a(u)&&(g?(y(S),S=-1):g=!0,O(k,s-i))):(e.sortIndex=o,n(c,e),m||f||(m=!0,j||(j=!0,N()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5990(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6288(e,t,n){var a;!function(e,r){function s(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,s=t.i;return t.w=a=a+1640531527|0,n=r[s+34&127],e=r[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[s]=n^e,t.i=s,n+(a^a>>>16)|0},function(e,t){var n,a,r,s,i,o=[],l=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,l=Math.max(l,t.length)),r=0,s=-32;s<l;++s)t&&(a^=t.charCodeAt((s+32)%t.length)),0===s&&(i=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,s>=0&&(i=i+1640531527|0,r=0==(n=o[127&s]^=a+i)?r+1:0);for(r>=128&&(o[127&(t&&t.length||0)]=-1),r=127,s=512;s>0;--s)a=o[r+34&127],n=o[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,o[r]=a^n;e.w=i,e.X=o,e.i=r}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=o:n.amdD&&n.amdO?void 0===(a=function(){return o}.call(t,n,t,r))||(r.exports=a):this.xor4096=o}(0,e=n.nmd(e),n.amdD)},6321(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===a.getTag(e)}},6392(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(6443),r=n(5990),s=n(7599),i=n(4803),o=n(3757);function l(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d=null===u||void 0===u?void 0:u(e,t,n,a);if(void 0!==d)return d;if(i.isPrimitive(e))return e;if(a.has(e))return a.get(e);if(Array.isArray(e)){const t=new Array(e.length);a.set(e,t);for(let r=0;r<e.length;r++)t[r]=l(e[r],r,n,a,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;a.set(e,t);for(const[r,s]of e)t.set(r,l(s,r,n,a,u));return t}if(e instanceof Set){const t=new Set;a.set(e,t);for(const r of e)t.add(l(r,void 0,n,a,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);a.set(e,t);for(let r=0;r<e.length;r++)t[r]=l(e[r],r,n,a,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return a.set(e,t),c(t,e,n,a,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return a.set(e,t),c(t,e,n,a,u),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return a.set(e,t),c(t,e,n,a,u),t}if(e instanceof Error){const t=new e.constructor;return a.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,n,a,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return a.set(e,t),c(t,e,n,a,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return a.set(e,t),c(t,e,n,a,u),t}if(e instanceof String){const t=new String(e.valueOf());return a.set(e,t),c(t,e,n,a,u),t}if("object"===typeof e&&function(e){switch(r.getTag(e)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return a.set(e,t),c(t,e,n,a,u),t}return e}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const i=[...Object.keys(t),...a.getSymbols(t)];for(let a=0;a<i.length;a++){const o=i[a],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,n,r,s))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6672(e,t,n){"use strict";var a=n(5043);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:r,fetchPriority:s}):"script"===n&&i.d.X(e,{crossOrigin:a,integrity:r,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},6770(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(2777);t.toNumber=function(e){return a.isSymbol(e)?NaN:Number(e)}},7004(e,t,n){"use strict";var a=n(8853),r=n(5043),s=n(7950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(i(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}var R=Array.isArray,P=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},F=[],L=-1;function z(e){return{current:e}}function B(e){0>L||(e.current=F[L],F[L]=null,L--)}function U(e,t){L++,F[L]=e.current,e.current=t}var W,V,H=z(null),G=z(null),q=z(null),K=z(null);function X(e,t){switch(U(q,t),U(G,e),U(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=xd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(H),U(H,e)}function Y(){B(H),B(G),B(q)}function $(e){null!==e.memoizedState&&U(K,e);var t=H.current,n=vd(t,e.type);t!==n&&(U(G,e),U(H,n))}function Q(e){G.current===e&&(B(H),B(G)),K.current===e&&(B(K),uh._currentValue=D)}function J(e){if(void 0===W)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+W+e+V}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var a=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){a=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){a=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&a&&"string"===typeof o.stack)return[o.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=a.DetermineComponentFrameRoot(),i=s[0],o=s[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(r=a=0;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(a===l.length||r===c.length)for(a=l.length-1,r=c.length-1;1<=a&&0<=r&&l[a]!==c[r];)r--;for(;1<=a&&0<=r;a--,r--)if(l[a]!==c[r]){if(1!==a||1!==r)do{if(a--,0>--r||l[a]!==c[r]){var u="\n"+l[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=r);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}var ae=Object.prototype.hasOwnProperty,re=a.unstable_scheduleCallback,se=a.unstable_cancelCallback,ie=a.unstable_shouldYield,oe=a.unstable_requestPaint,le=a.unstable_now,ce=a.unstable_getCurrentPriorityLevel,ue=a.unstable_ImmediatePriority,de=a.unstable_UserBlockingPriority,he=a.unstable_NormalPriority,pe=a.unstable_LowPriority,fe=a.unstable_IdlePriority,me=a.log,ge=a.unstable_setDisableYieldValue,xe=null,ve=null;function ye(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(xe,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/ke|0)|0},we=Math.log,ke=Math.LN2;var Ne=256,je=262144,Se=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&a;return 0!==o?0!==(a=o&~s)?r=Ce(a):0!==(i&=o)?r=Ce(i):n||0!==(n=o&~e)&&(r=Ce(n)):0!==(o=a&~s)?r=Ce(o):0!==i?r=Ce(i):n||0!==(n=a&~e)&&(r=Ce(n)),0===r?0:0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:r}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=Se;return 0===(62914560&(Se<<=1))&&(Se=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-be(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|261930&n}function Pe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-be(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function ze(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,We="__reactProps$"+Be,Ve="__reactContainer$"+Be,He="__reactEvents$"+Be,Ge="__reactListeners$"+Be,qe="__reactHandles$"+Be,Ke="__reactResources$"+Be,Xe="__reactMarker$"+Be;function Ye(e){delete e[Ue],delete e[We],delete e[He],delete e[Ge],delete e[qe]}function $e(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Dd(e);null!==e;){if(n=e[Ue])return n;e=Dd(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[Ue]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ze(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Xe]=!0}var tt=new Set,nt={};function at(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},ot={};function lt(e,t,n){if(r=t,ae.call(ot,r)||!ae.call(it,r)&&(st.test(r)?ot[r]=!0:(it[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var r=a.get,s=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ht(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function xt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,a,r,s,i,o){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?bt(e,i,dt(t)):null!=n?bt(e,i,dt(n)):null!=a&&e.removeAttribute("value"),null==r&&null!=s&&(e.defaultChecked=!!s),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function yt(e,t,n,a,r,s,i,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}a="function"!==typeof(a=null!=a?a:r)&&"symbol"!==typeof a&&!!a,e.checked=o?e.checked:!!a,e.defaultChecked=!!a,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),pt(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(i(92));if(R(a)){if(1<a.length)throw Error(i(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a),pt(e)}function jt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var r in t)a=t[r],t.hasOwnProperty(r)&&n[r]!==a&&Ct(e,r,a)}else for(var s in t)t.hasOwnProperty(s)&&Ct(e,s,t[s])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ot(){}var Rt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Dt=null;function Ft(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[We]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=a[We]||null;if(!r)throw Error(i(90));vt(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&ft(a)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Lt=!1;function zt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Mt||null!==Dt)&&(Zc(),Mt&&(t=Mt,e=Dt,Dt=Mt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[We]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(Ut)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Qh){Wt=!1}var Ht=null,Gt=null,qt=null;function Kt(){if(qt)return qt;var e,t,n=Gt,a=n.length,r="value"in Ht?Ht.value:Ht.textContent,s=r.length;for(e=0;e<a&&n[e]===r[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===r[s-t];t++);return qt=r.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function $t(){return!1}function Qt(e){function t(t,n,a,r,s){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Yt:$t,this.isPropagationStopped=$t,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Qt(tn),an=p({},tn,{view:0,detail:0}),rn=Qt(an),sn=p({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Qt(sn),ln=Qt(p({},sn,{dataTransfer:0})),cn=Qt(p({},an,{relatedTarget:0})),un=Qt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Qt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Qt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function xn(){return gn}var vn=Qt(p({},an,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Qt(p({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Qt(p({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),wn=Qt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Qt(p({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nn=Qt(p({},tn,{newState:0,oldState:0})),jn=[9,13,27,32],Sn=Ut&&"CompositionEvent"in window,Cn=null;Ut&&"documentMode"in document&&(Cn=document.documentMode);var En=Ut&&"TextEvent"in window&&!Cn,Tn=Ut&&(!Sn||Cn&&8<Cn&&11>=Cn),In=String.fromCharCode(32),An=!1;function _n(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Dn(e,t,n,a){Mt?Dt?Dt.push(a):Dt=[a]:Mt=a,0<(t=ad(t,"onChange")).length&&(n=new nn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Fn=null,Ln=null;function zn(e){Yu(e,0)}function Bn(e){if(ft(Je(e)))return e}function Un(e,t){if("change"===e)return t}var Wn=!1;if(Ut){var Vn;if(Ut){var Hn="oninput"in document;if(!Hn){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),Hn="function"===typeof Gn.oninput}Vn=Hn}else Vn=!1;Wn=Vn&&(!document.documentMode||9<document.documentMode)}function qn(){Fn&&(Fn.detachEvent("onpropertychange",Kn),Ln=Fn=null)}function Kn(e){if("value"===e.propertyName&&Bn(Ln)){var t=[];Dn(t,Ln,e,Pt(e)),zt(zn,t)}}function Xn(e,t,n){"focusin"===e?(qn(),Ln=n,(Fn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&qn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Ln)}function $n(e,t){if("click"===e)return Bn(t)}function Qn(e,t){if("input"===e||"change"===e)return Bn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!ae.call(t,r)||!Jn(e[r],t[r]))return!1}return!0}function ea(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ta(e,t){var n,a=ea(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ea(a)}}function na(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?na(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function aa(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ra(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sa=Ut&&"documentMode"in document&&11>=document.documentMode,ia=null,oa=null,la=null,ca=!1;function ua(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ca||null==ia||ia!==mt(a)||("selectionStart"in(a=ia)&&ra(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},la&&Zn(la,a)||(la=a,0<(a=ad(oa,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ia)))}function da(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ha={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},pa={},fa={};function ma(e){if(pa[e])return pa[e];if(!ha[e])return e;var t,n=ha[e];for(t in n)if(n.hasOwnProperty(t)&&t in fa)return pa[e]=n[t];return e}Ut&&(fa=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);var ga=ma("animationend"),xa=ma("animationiteration"),va=ma("animationstart"),ya=ma("transitionrun"),ba=ma("transitionstart"),wa=ma("transitioncancel"),ka=ma("transitionend"),Na=new Map,ja="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sa(e,t){Na.set(e,t),at(t,[e])}ja.push("scrollEnd");var Ca="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ea=[],Ta=0,Ia=0;function Aa(){for(var e=Ta,t=Ia=Ta=0;t<e;){var n=Ea[t];Ea[t++]=null;var a=Ea[t];Ea[t++]=null;var r=Ea[t];Ea[t++]=null;var s=Ea[t];if(Ea[t++]=null,null!==a&&null!==r){var i=a.pending;null===i?r.next=r:(r.next=i.next,i.next=r),a.pending=r}0!==s&&Pa(n,r,s)}}function _a(e,t,n,a){Ea[Ta++]=e,Ea[Ta++]=t,Ea[Ta++]=n,Ea[Ta++]=a,Ia|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Oa(e,t,n,a){return _a(e,t,n,a),Ma(e)}function Ra(e,t){return _a(e,null,null,t),Ma(e)}function Pa(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var r=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(a=s.alternate)&&(a.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(r=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,r&&null!==t&&(r=31-be(n),null===(a=(e=s.hiddenUpdates)[r])?e[r]=[t]:a.push(t),t.lane=536870912|n),s):null}function Ma(e){if(50<Hc)throw Hc=0,Gc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Da={};function Fa(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function La(e,t,n,a){return new Fa(e,t,n,a)}function za(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ba(e,t){var n=e.alternate;return null===n?((n=La(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ua(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wa(e,t,n,a,r,s){var o=0;if(a=e,"function"===typeof e)za(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=La(31,n,t,r)).elementType=E,e.lanes=s,e;case x:return Va(n.children,r,s,t);case v:o=8,r|=24;break;case y:return(e=La(12,n,t,2|r)).elementType=y,e.lanes=s,e;case N:return(e=La(13,n,t,r)).elementType=N,e.lanes=s,e;case j:return(e=La(19,n,t,r)).elementType=j,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case b:o=9;break e;case k:o=11;break e;case S:o=14;break e;case C:o=16,a=null;break e}o=29,n=Error(i(130,null===e?"null":typeof e,"")),a=null}return(t=La(o,n,t,r)).elementType=e,t.type=a,t.lanes=s,t}function Va(e,t,n,a){return(e=La(7,e,a,t)).lanes=n,e}function Ha(e,t,n){return(e=La(6,e,null,t)).lanes=n,e}function Ga(e){var t=La(18,null,null,0);return t.stateNode=e,t}function qa(e,t,n){return(t=La(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ka=new WeakMap;function Xa(e,t){if("object"===typeof e&&null!==e){var n=Ka.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Ka.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Ya=[],$a=0,Qa=null,Ja=0,Za=[],er=0,tr=null,nr=1,ar="";function rr(e,t){Ya[$a++]=Ja,Ya[$a++]=Qa,Qa=e,Ja=t}function sr(e,t,n){Za[er++]=nr,Za[er++]=ar,Za[er++]=tr,tr=e;var a=nr;e=ar;var r=32-be(a)-1;a&=~(1<<r),n+=1;var s=32-be(t)+r;if(30<s){var i=r-r%5;s=(a&(1<<i)-1).toString(32),a>>=i,r-=i,nr=1<<32-be(t)+r|n<<r|a,ar=s+e}else nr=1<<s|n<<r|a,ar=e}function ir(e){null!==e.return&&(rr(e,1),sr(e,1,0))}function or(e){for(;e===Qa;)Qa=Ya[--$a],Ya[$a]=null,Ja=Ya[--$a],Ya[$a]=null;for(;e===tr;)tr=Za[--er],Za[er]=null,ar=Za[--er],Za[er]=null,nr=Za[--er],Za[er]=null}function lr(e,t){Za[er++]=nr,Za[er++]=ar,Za[er++]=tr,nr=t.id,ar=t.overflow,tr=e}var cr=null,ur=null,dr=!1,hr=null,pr=!1,fr=Error(i(519));function mr(e){throw wr(Xa(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fr}function gr(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Ue]=e,t[We]=a,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)$u(Ku[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),yt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),Nt(t,a.value,a.defaultValue,a.children)}"string"!==typeof(n=a.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||cd(t.textContent,n)?(null!=a.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=a.onScroll&&$u("scroll",t),null!=a.onScrollEnd&&$u("scrollend",t),null!=a.onClick&&(t.onclick=Ot),t=!0):t=!1,t||mr(e,!0)}function xr(e){for(cr=e.return;cr;)switch(cr.tag){case 5:case 31:case 13:return void(pr=!1);case 27:case 3:return void(pr=!0);default:cr=cr.return}}function vr(e){if(e!==cr)return!1;if(!dr)return xr(e),dr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yd(e.type,e.memoizedProps)),t=!t),t&&ur&&mr(e),xr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ur=Md(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ur=Md(e)}else 27===n?(n=ur,Cd(e.type)?(e=Pd,Pd=null,ur=e):ur=n):ur=cr?Rd(e.stateNode.nextSibling):null;return!0}function yr(){ur=cr=null,dr=!1}function br(){var e=hr;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),hr=null),e}function wr(e){null===hr?hr=[e]:hr.push(e)}var kr=z(null),Nr=null,jr=null;function Sr(e,t,n){U(kr,t._currentValue),t._currentValue=n}function Cr(e){e._currentValue=kr.current,B(kr)}function Er(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t,n,a){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var s=r.dependencies;if(null!==s){var o=r.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Er(s.return,n,e),a||(o=null);break e}s=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(i(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Er(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Ir(e,t,n,a){e=null;for(var r=t,s=!1;null!==r;){if(!s)if(0!==(524288&r.flags))s=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=r.type;Jn(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===K.current){if(null===(o=r.alternate))throw Error(i(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}r=r.return}null!==e&&Tr(t,e,n,a),t.flags|=262144}function Ar(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _r(e){Nr=e,jr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Or(e){return Pr(Nr,e)}function Rr(e,t){return null===Nr&&_r(e),Pr(e,t)}function Pr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===jr){if(null===e)throw Error(i(308));jr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else jr=jr.next=t;return n}var Mr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Dr=a.unstable_scheduleCallback,Fr=a.unstable_NormalPriority,Lr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zr(){return{controller:new Mr,data:new Map,refCount:0}}function Br(e){e.refCount--,0===e.refCount&&Dr(Fr,function(){e.controller.abort()})}var Ur=null,Wr=0,Vr=0,Hr=null;function Gr(){if(0===--Wr&&null!==Ur){null!==Hr&&(Hr.status="fulfilled");var e=Ur;Ur=null,Vr=0,Hr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qr=P.S;P.S=function(e,t){Rc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ur){var n=Ur=[];Wr=0,Vr=Wu(),Hr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Wr++,t.then(Gr,Gr)}(0,t),null!==qr&&qr(e,t)};var Kr=z(null);function Xr(){var e=Kr.current;return null!==e?e:fc.pooledCache}function Yr(e,t){U(Kr,null===t?Kr.current:t.pool)}function $r(){var e=Xr();return null===e?null:{parent:Lr._currentValue,pool:e}}var Qr=Error(i(460)),Jr=Error(i(474)),Zr=Error(i(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ot,Ot),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ot,Ot);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e}throw rs=t,Qr}}function as(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw rs=t,Qr;throw t}}var rs=null;function ss(){if(null===rs)throw Error(i(459));var e=rs;return rs=null,e}function is(e){if(e===Qr||e===Zr)throw Error(i(483))}var os=null,ls=0;function cs(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===f)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hs(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Ba(e,t)).index=0,e.sibling=null,e}function s(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Ha(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var s=n.type;return s===x?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&as(s)===t.type)?(us(t=r(t,n.props),n),t.return=e,t):(us(t=Wa(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qa(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,a,s){return null===t||7!==t.tag?((t=Va(n,e.mode,a,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ha(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(n=Wa(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=qa(t,e.mode,n)).return=e,t;case C:return h(e,t=as(t),n)}if(R(t)||A(t))return(t=Va(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),n);if(t.$$typeof===w)return h(e,Rr(e,t),n);ds(e,t)}return null}function p(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===r?c(e,t,n,a):null;case g:return n.key===r?u(e,t,n,a):null;case C:return p(e,t,n=as(n),a)}if(R(n)||A(n))return null!==r?null:d(e,t,n,a,null);if("function"===typeof n.then)return p(e,t,cs(n),a);if(n.$$typeof===w)return p(e,t,Rr(e,n),a);ds(e,n)}return null}function f(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return l(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case m:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case g:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case C:return f(e,t,n,a=as(a),r)}if(R(a)||A(a))return d(t,e=e.get(n)||null,a,r,null);if("function"===typeof a.then)return f(e,t,n,cs(a),r);if(a.$$typeof===w)return f(e,t,n,Rr(t,a),r);ds(t,a)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===x&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===x){if(7===c.tag){n(l,c.sibling),(d=r(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===C&&as(y)===c.type){n(l,c.sibling),us(d=r(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===x?((d=Va(u.props.children,l.mode,d,u.key)).return=l,l=d):(us(d=Wa(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=r(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qa(u,l.mode,d)).return=l,l=d}return o(l);case C:return v(l,c,u=as(u),d)}if(R(u))return function(r,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var x=p(r,d,o[m],l);if(null===x){null===d&&(d=g);break}e&&d&&null===x.alternate&&t(r,d),i=s(x,i,m),null===u?c=x:u.sibling=x,u=x,d=g}if(m===o.length)return n(r,d),dr&&rr(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(r,o[m],l))&&(i=s(d,i,m),null===u?c=d:u.sibling=d,u=d);return dr&&rr(r,m),c}for(d=a(d);m<o.length;m++)null!==(g=f(d,r,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=s(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(r,e)}),dr&&rr(r,m),c}(l,c,u,d);if(A(u)){if("function"!==typeof(y=A(u)))throw Error(i(150));return function(r,o,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,m=o,g=o=0,x=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(x=m,m=null):x=m.sibling;var y=p(r,m,v.value,c);if(null===y){null===m&&(m=x);break}e&&m&&null===y.alternate&&t(r,m),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y,m=x}if(v.done)return n(r,m),dr&&rr(r,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(r,v.value,c))&&(o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return dr&&rr(r,g),u}for(m=a(m);!v.done;g++,v=l.next())null!==(v=f(m,r,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(r,e)}),dr&&rr(r,g),u}(l,c,u=y.call(u),d)}if("function"===typeof u.then)return v(l,c,cs(u),d);if(u.$$typeof===w)return v(l,c,Rr(l,u),d);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=r(c,u)).return=l,l=d):(n(l,c),(d=Ha(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,a){try{ls=0;var r=v(e,t,n,a);return os=null,r}catch(i){if(i===Qr||i===Zr)throw i;var s=La(29,i,null,e.mode);return s.lanes=a,s.return=e,s}}}var ps=hs(!0),fs=hs(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ys(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&pc)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,t=Ma(e),Pa(e,null,n),t}return _a(e,a,t,n),Ma(e)}function bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Pe(e,n)}}function ws(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?r=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ks=!1;function Ns(){if(ks){if(null!==Hr)throw Hr}}function js(e,t,n,a){ks=!1;var r=e.updateQueue;ms=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(i=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,f=h!==o.lane;if(f?(gc&h)===h:(a&h)===h){0!==h&&h===Vr&&(ks=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var x=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(x,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(x,d,h):m)||void 0===h)break e;d=p({},d,h);break e;case 2:ms=!0}}null!==(h=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===s&&(r.shared.lanes=0),jc|=i,e.lanes=i,e.memoizedState=d}}function Ss(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function Cs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ss(n[e],t)}var Es=z(null),Ts=z(0);function Is(e,t){U(Ts,e=kc),U(Es,t),kc=e|t.baseLanes}function As(){U(Ts,kc),U(Es,Es.current)}function _s(){kc=Ts.current,B(Es),B(Ts)}var Os=z(null),Rs=null;function Ps(e){var t=e.alternate;U(zs,1&zs.current),U(Os,e),null===Rs&&(null===t||null!==Es.current||null!==t.memoizedState)&&(Rs=e)}function Ms(e){U(zs,zs.current),U(Os,e),null===Rs&&(Rs=e)}function Ds(e){22===e.tag?(U(zs,zs.current),U(Os,e),null===Rs&&(Rs=e)):Fs()}function Fs(){U(zs,zs.current),U(Os,Os.current)}function Ls(e){B(Os),Rs===e&&(Rs=null),B(zs)}var zs=z(0);function Bs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||_d(n)||Od(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=0,Ws=null,Vs=null,Hs=null,Gs=!1,qs=!1,Ks=!1,Xs=0,Ys=0,$s=null,Qs=0;function Js(){throw Error(i(321))}function Zs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function ei(e,t,n,a,r,s){return Us=s,Ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?go:xo,Ks=!1,s=n(a,r),Ks=!1,qs&&(s=ni(t,n,a,r)),ti(e),s}function ti(e){P.H=mo;var t=null!==Vs&&null!==Vs.next;if(Us=0,Hs=Vs=Ws=null,Gs=!1,Ys=0,$s=null,t)throw Error(i(300));null===e||Ro||null!==(e=e.dependencies)&&Ar(e)&&(Ro=!0)}function ni(e,t,n,a){Ws=e;var r=0;do{if(qs&&($s=null),Ys=0,qs=!1,25<=r)throw Error(i(301));if(r+=1,Hs=Vs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}P.H=vo,s=t(n,a)}while(qs);return s}function ai(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?ci(t):t,e=e.useState()[0],(null!==Vs?Vs.memoizedState:null)!==e&&(Ws.flags|=1024),t}function ri(){var e=0!==Xs;return Xs=0,e}function si(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ii(e){if(Gs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Gs=!1}Us=0,Hs=Vs=Ws=null,qs=!1,Ys=Xs=0,$s=null}function oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Hs?Ws.memoizedState=Hs=e:Hs=Hs.next=e,Hs}function li(){if(null===Vs){var e=Ws.alternate;e=null!==e?e.memoizedState:null}else e=Vs.next;var t=null===Hs?Ws.memoizedState:Hs.next;if(null!==t)Hs=t,Vs=e;else{if(null===e){if(null===Ws.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Vs=e).memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},null===Hs?Ws.memoizedState=Hs=e:Hs=Hs.next=e}return Hs}function ci(e){var t=Ys;return Ys+=1,null===$s&&($s=[]),e=ns($s,e,t),t=Ws,null===(null===Hs?t.memoizedState:Hs.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?go:xo),e}function ui(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ci(e);if(e.$$typeof===w)return Or(e)}throw Error(i(438,String(e)))}function di(e){var t=null,n=Ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=Ws.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=T;return t.index++,n}function hi(e,t){return"function"===typeof t?t(e):t}function pi(e){return fi(li(),Vs,e)}function fi(e,t,n){var a=e.queue;if(null===a)throw Error(i(311));a.lastRenderedReducer=n;var r=e.baseQueue,s=a.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,a.pending=null}if(s=e.baseState,null===r)e.memoizedState=s;else{var l=o=null,c=null,u=t=r.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Us&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Vr&&(d=!0);else{if((Us&p)===p){u=u.next,p===Vr&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,Ws.lanes|=p,jc|=p}h=u.action,Ks&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=s):c=c.next=p,Ws.lanes|=h,jc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Jn(s,e.memoizedState)&&(Ro=!0,d&&null!==(n=Hr)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,a.lastRenderedState=s}return null===r&&(a.lanes=0),[e.memoizedState,a.dispatch]}function mi(e){var t=li(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);Jn(s,t.memoizedState)||(Ro=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,a]}function gi(e,t,n){var a=Ws,r=li(),s=dr;if(s){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!Jn((Vs||r).memoizedState,n);if(o&&(r.memoizedState=n,Ro=!0),r=r.queue,Ui(yi.bind(null,a,r,e),[e]),r.getSnapshot!==t||o||null!==Hs&&1&Hs.memoizedState.tag){if(a.flags|=2048,Di(9,{destroy:void 0},vi.bind(null,a,r,n,t),null),null===fc)throw Error(i(349));s||0!==(127&Us)||xi(a,t,n)}return n}function xi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function vi(e,t,n,a){t.value=n,t.getSnapshot=a,bi(t)&&wi(e)}function yi(e,t,n){return n(function(){bi(t)&&wi(e)})}function bi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(a){return!0}}function wi(e){var t=Ra(e,2);null!==t&&Xc(t,e,2)}function ki(e){var t=oi();if("function"===typeof e){var n=e;if(e=n(),Ks){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t}function Ni(e,t,n,a){return e.baseState=n,fi(e,Vs,"function"===typeof a?a:hi)}function ji(e,t,n,a,r){if(ho(e))throw Error(i(485));if(null!==(e=t.action)){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==P.T?n(!0):s.isTransition=!1,a(s),null===(n=t.pending)?(s.next=t.pending=s,Si(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Si(e,t){var n=t.action,a=t.payload,r=e.state;if(t.isTransition){var s=P.T,i={};P.T=i;try{var o=n(r,a),l=P.S;null!==l&&l(i,o),Ci(e,t,o)}catch(c){Ti(e,t,c)}finally{null!==s&&null!==i.types&&(s.types=i.types),P.T=s}}else try{Ci(e,t,s=n(r,a))}catch(u){Ti(e,t,u)}}function Ci(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ei(e,t,n)},function(n){return Ti(e,t,n)}):Ei(e,t,n)}function Ei(e,t,n){t.status="fulfilled",t.value=n,Ii(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Si(e,n)))}function Ti(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,Ii(t),t=t.next}while(t!==a)}e.action=null}function Ii(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ai(e,t){return t}function _i(e,t){if(dr){var n=fc.formState;if(null!==n){e:{var a=Ws;if(dr){if(ur){t:{for(var r=ur,s=pr;8!==r.nodeType;){if(!s){r=null;break t}if(null===(r=Rd(r.nextSibling))){r=null;break t}}r="F!"===(s=r.data)||"F"===s?r:null}if(r){ur=Rd(r.nextSibling),a="F!"===r.data;break e}}mr(a)}a=!1}a&&(t=n[0])}}return(n=oi()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},n.queue=a,n=lo.bind(null,Ws,a),a.dispatch=n,a=ki(!1),s=uo.bind(null,Ws,!1,a.queue),r={state:t,dispatch:null,action:e,pending:null},(a=oi()).queue=r,n=ji.bind(null,Ws,r,s,n),r.dispatch=n,a.memoizedState=e,[t,n,!1]}function Oi(e){return Ri(li(),Vs,e)}function Ri(e,t,n){if(t=fi(e,t,Ai)[0],e=pi(hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var a=ci(t)}catch(i){if(i===Qr)throw Zr;throw i}else a=t;var r=(t=li()).queue,s=r.dispatch;return n!==t.memoizedState&&(Ws.flags|=2048,Di(9,{destroy:void 0},Pi.bind(null,r,n),null)),[a,s,e]}function Pi(e,t){e.action=t}function Mi(e){var t=li(),n=Vs;if(null!==n)return Ri(t,n,e);li(),t=t.memoizedState;var a=(n=li()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Di(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=Ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Fi(){return li().memoizedState}function Li(e,t,n,a){var r=oi();Ws.flags|=e,r.memoizedState=Di(1|t,{destroy:void 0},n,void 0===a?null:a)}function zi(e,t,n,a){var r=li();a=void 0===a?null:a;var s=r.memoizedState.inst;null!==Vs&&null!==a&&Zs(a,Vs.memoizedState.deps)?r.memoizedState=Di(t,s,n,a):(Ws.flags|=e,r.memoizedState=Di(1|t,s,n,a))}function Bi(e,t){Li(8390656,8,e,t)}function Ui(e,t){zi(2048,8,e,t)}function Wi(e){var t=li().memoizedState;return function(e){Ws.flags|=4;var t=Ws.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Vi(e,t){return zi(4,2,e,t)}function Hi(e,t){return zi(4,4,e,t)}function Gi(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function qi(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,zi(4,4,Gi.bind(null,t,e),n)}function Ki(){}function Xi(e,t){var n=li();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&Zs(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Yi(e,t){var n=li();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&Zs(t,a[1]))return a[0];if(a=e(),Ks){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[a,t],a}function $i(e,t,n){return void 0===n||0!==(1073741824&Us)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Ws.lanes|=e,jc|=e,n)}function Qi(e,t,n,a){return Jn(n,t)?n:null!==Es.current?(e=$i(e,n,a),Jn(e,t)||(Ro=!0),e):0===(42&Us)||0!==(1073741824&Us)&&0===(261930&gc)?(Ro=!0,e.memoizedState=n):(e=Kc(),Ws.lanes|=e,jc|=e,t)}function Ji(e,t,n,a,r){var s=M.p;M.p=0!==s&&8>s?s:8;var i=P.T,o={};P.T=o,uo(e,!1,t,n);try{var l=r(),c=P.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(a.status="rejected",a.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),a}(l,a),qc());else co(e,t,a,qc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},qc())}finally{M.p=s,null!==i&&null!==o.types&&(i.types=o.types),P.T=i}}function Zi(){}function eo(e,t,n,a){if(5!==e.tag)throw Error(i(476));var r=to(e).queue;Ji(e,r,t,D,null===n?Zi:function(){return no(e),n(a)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},qc())}function ao(){return Or(uh)}function ro(){return li().memoizedState}function so(){return li().memoizedState}function io(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=qc(),a=ys(t,e=vs(n),n);return null!==a&&(Xc(a,t,n),bs(a,t,n)),t={cache:zr()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var a=qc();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?po(t,n):null!==(n=Oa(e,t,n,a))&&(Xc(n,e,a),fo(n,t,a))}function lo(e,t,n){co(e,t,n,qc())}function co(e,t,n,a){var r={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))po(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(r.hasEagerState=!0,r.eagerState=o,Jn(o,i))return _a(e,t,r,0),null===fc&&Aa(),!1}catch(l){}if(null!==(n=Oa(e,t,r,a)))return Xc(n,e,a),fo(n,t,a),!0}return!1}function uo(e,t,n,a){if(a={lane:2,revertLane:Wu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(i(479))}else null!==(t=Oa(e,n,a,2))&&Xc(t,e,2)}function ho(e){var t=e.alternate;return e===Ws||null!==t&&t===Ws}function po(e,t){qs=Gs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fo(e,t,n){if(0!==(4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Pe(e,n)}}var mo={readContext:Or,use:ui,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useInsertionEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useSyncExternalStore:Js,useId:Js,useHostTransitionStatus:Js,useFormState:Js,useActionState:Js,useOptimistic:Js,useMemoCache:Js,useCacheRefresh:Js};mo.useEffectEvent=Js;var go={readContext:Or,use:ui,useCallback:function(e,t){return oi().memoizedState=[e,void 0===t?null:t],e},useContext:Or,useEffect:Bi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Li(4194308,4,Gi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){Li(4,2,e,t)},useMemo:function(e,t){var n=oi();t=void 0===t?null:t;var a=e();if(Ks){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=oi();if(void 0!==n){var r=n(t);if(Ks){ye(!0);try{n(t)}finally{ye(!1)}}}else r=t;return a.memoizedState=a.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},a.queue=e,e=e.dispatch=oo.bind(null,Ws,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},oi().memoizedState=e},useState:function(e){var t=(e=ki(e)).queue,n=lo.bind(null,Ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ki,useDeferredValue:function(e,t){return $i(oi(),e,t)},useTransition:function(){var e=ki(!1);return e=Ji.bind(null,Ws,e.queue,!0,!1),oi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Ws,r=oi();if(dr){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===fc)throw Error(i(349));0!==(127&gc)||xi(a,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Bi(yi.bind(null,a,s,e),[e]),a.flags|=2048,Di(9,{destroy:void 0},vi.bind(null,a,s,n,t),null),n},useId:function(){var e=oi(),t=fc.identifierPrefix;if(dr){var n=ar;t="_"+t+"R_"+(n=(nr&~(1<<32-be(nr)-1)).toString(32)+n),0<(n=Xs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Qs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ao,useFormState:_i,useActionState:_i,useOptimistic:function(e){var t=oi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:di,useCacheRefresh:function(){return oi().memoizedState=io.bind(null,Ws)},useEffectEvent:function(e){var t=oi(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(i(440));return n.impl.apply(void 0,arguments)}}},xo={readContext:Or,use:ui,useCallback:Xi,useContext:Or,useEffect:Ui,useImperativeHandle:qi,useInsertionEffect:Vi,useLayoutEffect:Hi,useMemo:Yi,useReducer:pi,useRef:Fi,useState:function(){return pi(hi)},useDebugValue:Ki,useDeferredValue:function(e,t){return Qi(li(),Vs.memoizedState,e,t)},useTransition:function(){var e=pi(hi)[0],t=li().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:gi,useId:ro,useHostTransitionStatus:ao,useFormState:Oi,useActionState:Oi,useOptimistic:function(e,t){return Ni(li(),0,e,t)},useMemoCache:di,useCacheRefresh:so};xo.useEffectEvent=Wi;var vo={readContext:Or,use:ui,useCallback:Xi,useContext:Or,useEffect:Ui,useImperativeHandle:qi,useInsertionEffect:Vi,useLayoutEffect:Hi,useMemo:Yi,useReducer:mi,useRef:Fi,useState:function(){return mi(hi)},useDebugValue:Ki,useDeferredValue:function(e,t){var n=li();return null===Vs?$i(n,e,t):Qi(n,Vs.memoizedState,e,t)},useTransition:function(){var e=mi(hi)[0],t=li().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:gi,useId:ro,useHostTransitionStatus:ao,useFormState:Mi,useActionState:Mi,useOptimistic:function(e,t){var n=li();return null!==Vs?Ni(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:di,useCacheRefresh:so};function yo(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vo.useEffectEvent=Wi;var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=qc(),r=vs(a);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ys(e,r,a))&&(Xc(t,e,a),bs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=qc(),r=vs(a);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ys(e,r,a))&&(Xc(t,e,a),bs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qc(),a=vs(n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=ys(e,a,n))&&(Xc(t,e,n),bs(t,e,n))}};function wo(e,t,n,a,r,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,a)||!Zn(r,s))}function ko(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function No(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var r in n===t&&(n=p({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function jo(e){Ca(e)}function So(e){console.error(e)}function Co(e){Ca(e)}function Eo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function To(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Io(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){Eo(e,t)},n}function Ao(e){return(e=vs(e)).tag=3,e}function _o(e,t,n,a){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var s=a.value;e.payload=function(){return r(s)},e.callback=function(){To(t,n,a)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){To(t,n,a),"function"!==typeof r&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Oo=Error(i(461)),Ro=!1;function Po(e,t,n,a){t.child=null===e?fs(t,null,n,a):ps(t,e.child,n,a)}function Mo(e,t,n,a,r){n=n.render;var s=t.ref;if("ref"in a){var i={};for(var o in a)"ref"!==o&&(i[o]=a[o])}else i=a;return _r(t),a=ei(e,t,n,i,s,r),o=ri(),null===e||Ro?(dr&&o&&ir(t),t.flags|=1,Po(e,t,a,r),t.child):(si(e,t,r),rl(e,t,r))}function Do(e,t,n,a,r){if(null===e){var s=n.type;return"function"!==typeof s||za(s)||void 0!==s.defaultProps||null!==n.compare?((e=Wa(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fo(e,t,s,a,r))}if(s=e.child,!sl(e,r)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(i,a)&&e.ref===t.ref)return rl(e,t,r)}return t.flags|=1,(e=Ba(s,a)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,a,r){if(null!==e){var s=e.memoizedProps;if(Zn(s,a)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=a=s,!sl(e,r))return t.lanes=e.lanes,rl(e,t,r);0!==(131072&e.flags)&&(Ro=!0)}}return Ho(e,t,n,a,r)}function Lo(e,t,n,a){var r=a.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===a.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(a=t.child=e.child,r=0;null!==a;)r=r|a.lanes|a.childLanes,a=a.sibling;a=r&~s}else a=0,t.child=null;return Bo(e,t,s,n,a)}if(0===(536870912&n))return a=t.lanes=536870912,Bo(e,t,null!==s?s.baseLanes|n:n,n,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yr(0,null!==s?s.cachePool:null),null!==s?Is(t,s):As(),Ds(t)}else null!==s?(Yr(0,s.cachePool),Is(t,s),Fs(),t.memoizedState=null):(null!==e&&Yr(0,null),As(),Fs());return Po(e,t,r,n),t.child}function zo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bo(e,t,n,a,r){var s=Xr();return s=null===s?null:{parent:Lr._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Yr(0,null),As(),Ds(t),null!==e&&Ir(e,t,a,!0),t.childLanes=r,null}function Uo(e,t){return(t=Zo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Wo(e,t,n){return ps(t,e.child,null,n),(e=Uo(t,t.pendingProps)).flags|=2,Ls(t),t.memoizedState=null,e}function Vo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ho(e,t,n,a,r){return _r(t),n=ei(e,t,n,a,void 0,r),a=ri(),null===e||Ro?(dr&&a&&ir(t),t.flags|=1,Po(e,t,n,r),t.child):(si(e,t,r),rl(e,t,r))}function Go(e,t,n,a,r,s){return _r(t),t.updateQueue=null,n=ni(t,a,n,r),ti(e),a=ri(),null===e||Ro?(dr&&a&&ir(t),t.flags|=1,Po(e,t,n,s),t.child):(si(e,t,s),rl(e,t,s))}function qo(e,t,n,a,r){if(_r(t),null===t.stateNode){var s=Da,i=n.contextType;"object"===typeof i&&null!==i&&(s=Or(i)),s=new n(a,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=bo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=a,s.state=t.memoizedState,s.refs={},gs(t),i=n.contextType,s.context="object"===typeof i&&null!==i?Or(i):Da,s.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(yo(t,n,i,a),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(i=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),i!==s.state&&bo.enqueueReplaceState(s,s.state,null),js(t,a,s,r),Ns(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=No(n,o);s.props=l;var c=s.context,u=n.contextType;i=Da,"object"===typeof u&&null!==u&&(i=Or(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==i)&&ko(t,s,a,i),ms=!1;var h=t.memoizedState;s.state=h,js(t,a,s,r),Ns(),c=t.memoizedState,o||h!==c||ms?("function"===typeof d&&(yo(t,n,d,a),c=t.memoizedState),(l=ms||wo(t,n,l,a,h,c,i))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),s.props=a,s.state=c,s.context=i,a=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),a=!1)}else{s=t.stateNode,xs(e,t),u=No(n,i=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Da,"object"===typeof c&&null!==c&&(l=Or(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==d||h!==l)&&ko(t,s,a,l),ms=!1,h=t.memoizedState,s.state=h,js(t,a,s,r),Ns();var p=t.memoizedState;i!==d||h!==p||ms||null!==e&&null!==e.dependencies&&Ar(e.dependencies)?("function"===typeof o&&(yo(t,n,o,a),p=t.memoizedState),(u=ms||wo(t,n,u,a,h,p,l)||null!==e&&null!==e.dependencies&&Ar(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(a,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(a,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),s.props=a,s.state=p,s.context=l,a=u):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return s=a,Vo(e,t),a=0!==(128&t.flags),s||a?(s=t.stateNode,n=a&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&a?(t.child=ps(t,e.child,null,r),t.child=ps(t,null,n,r)):Po(e,t,n,r),t.memoizedState=s.state,e=t.child):e=rl(e,t,r),e}function Ko(e,t,n,a){return yr(),t.flags|=256,Po(e,t,n,a),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:$r()}}function $o(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ec),e}function Qo(e,t,n){var a,r=t.pendingProps,s=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&zs.current)),a&&(s=!0,t.flags&=-129),a=0!==(32&t.flags),t.flags&=-33,null===e){if(dr){if(s?Ps(t):Fs(),(e=ur)?null!==(e=null!==(e=Ad(e,pr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},(n=Ga(e)).return=t,t.child=n,cr=t,ur=null):e=null,null===e)throw mr(t);return Od(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,s?(Fs(),l=Zo({mode:"hidden",children:l},s=t.mode),r=Va(r,s,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Yo(n),r.childLanes=$o(e,a,n),t.memoizedState=Xo,zo(null,r)):(Ps(t),Jo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Ps(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Fs(),t.child=e.child,t.flags|=128,t=null):(Fs(),l=r.fallback,s=t.mode,r=Zo({mode:"visible",children:r.children},s),(l=Va(l,s,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,ps(t,e.child,null,n),(r=t.child).memoizedState=Yo(n),r.childLanes=$o(e,a,n),t.memoizedState=Xo,t=zo(null,r));else if(Ps(t),Od(l)){if(a=l.nextSibling&&l.nextSibling.dataset)var u=a.dgst;a=u,(r=Error(i(419))).stack="",r.digest=a,wr({value:r,source:null,stack:null}),t=el(e,t,n)}else if(Ro||Ir(e,t,n,!1),a=0!==(n&e.childLanes),Ro||a){if(null!==(a=fc)&&(0!==(r=Me(a,n))&&r!==c.retryLane))throw c.retryLane=r,Ra(e,r),Xc(a,e,r),Oo;_d(l)||iu(),t=el(e,t,n)}else _d(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ur=Rd(l.nextSibling),cr=t,dr=!0,hr=null,pr=!1,null!==e&&lr(t,e),(t=Jo(t,r.children)).flags|=4096);return t}return s?(Fs(),l=r.fallback,s=t.mode,u=(c=e.child).sibling,(r=Ba(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ba(u,l):(l=Va(l,s,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,zo(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Yo(n):(null!==(s=l.cachePool)?(c=Lr._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=$r(),l={baseLanes:l.baseLanes|n,cachePool:s}),r.memoizedState=l,r.childLanes=$o(e,a,n),t.memoizedState=Xo,zo(e.child,r)):(Ps(t),e=(n=e.child).sibling,(n=Ba(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Jo(e,t){return(t=Zo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zo(e,t){return(e=La(22,e,null,t)).lanes=0,e}function el(e,t,n){return ps(t,e.child,null,n),(e=Jo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Er(e.return,t,n)}function nl(e,t,n,a,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r,treeForkCount:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=r,i.treeForkCount=s)}function al(e,t,n){var a=t.pendingProps,r=a.revealOrder,s=a.tail;a=a.children;var i=zs.current,o=0!==(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,U(zs,i),Po(e,t,a,n),a=dr?Ja:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Bs(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),nl(t,!1,r,n,s,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Bs(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}nl(t,!0,n,null,s,a);break;case"together":nl(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function rl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ir(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ba(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ba(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ar(e))}function il(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),Sr(0,Lr,e.memoizedState.cache),yr();break;case 27:case 5:$(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:Sr(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(Ps(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qo(e,t,n):(Ps(t),null!==(e=rl(e,t,n))?e.sibling:null);Ps(t);break;case 19:var r=0!==(128&e.flags);if((a=0!==(n&t.childLanes))||(Ir(e,t,n,!1),a=0!==(n&t.childLanes)),r){if(a)return al(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),U(zs,zs.current),a)break;return null;case 22:return t.lanes=0,Lo(e,t,n,t.pendingProps);case 24:Sr(0,Lr,e.memoizedState.cache)}return rl(e,t,n)}(e,t,n);Ro=0!==(131072&e.flags)}else Ro=!1,dr&&0!==(1048576&t.flags)&&sr(t,Ja,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=as(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===k){t.tag=11,t=Mo(null,t,e,a,n);break e}if(r===S){t.tag=14,t=Do(null,t,e,a,n);break e}}throw t=O(e)||e,Error(i(306,t,""))}za(e)?(a=No(e,a),t.tag=1,t=qo(null,t,e,a,n)):(t.tag=0,t=Ho(null,t,e,a,n))}return t;case 0:return Ho(e,t,t.type,t.pendingProps,n);case 1:return qo(e,t,a=t.type,r=No(a,t.pendingProps),n);case 3:e:{if(X(t,t.stateNode.containerInfo),null===e)throw Error(i(387));a=t.pendingProps;var s=t.memoizedState;r=s.element,xs(e,t),js(t,a,null,n);var o=t.memoizedState;if(a=o.cache,Sr(0,Lr,a),a!==s.cache&&Tr(t,[Lr],n,!0),Ns(),a=o.element,s.isDehydrated){if(s={element:a,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ko(e,t,a,n);break e}if(a!==r){wr(r=Xa(Error(i(424)),t)),t=Ko(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ur=Rd(e.firstChild),cr=t,dr=!0,hr=null,pr=!0,n=fs(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(yr(),a===r){t=rl(e,t,n);break e}Po(e,t,a,n)}t=t.child}return t;case 26:return Vo(e,t),null===e?(n=Gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:dr||(n=t.type,e=t.pendingProps,(a=gd(q.current).createElement(n))[Ue]=t,a[We]=e,hd(a,n,e),et(a),t.stateNode=a):t.memoizedState=Gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&dr&&(a=t.stateNode=Fd(t.type,t.pendingProps,q.current),cr=t,pr=!0,r=ur,Cd(t.type)?(Pd=r,ur=Rd(a.firstChild)):ur=r),Po(e,t,t.pendingProps.children,n),Vo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&dr&&((r=a=ur)&&(null!==(a=function(e,t,n,a){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===s)return e}if(null===(e=Rd(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,pr))?(t.stateNode=a,cr=t,ur=Rd(a.firstChild),pr=!1,r=!0):r=!1),r||mr(t)),$(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,yd(r,s)?a=null:null!==o&&yd(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=ei(e,t,ai,null,null,n),uh._currentValue=r),Vo(e,t),Po(e,t,a,n),t.child;case 6:return null===e&&dr&&((e=n=ur)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}(n,t.pendingProps,pr))?(t.stateNode=n,cr=t,ur=null,e=!0):e=!1),e||mr(t)),null;case 13:return Qo(e,t,n);case 4:return X(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=ps(t,null,a,n):Po(e,t,a,n),t.child;case 11:return Mo(e,t,t.type,t.pendingProps,n);case 7:return Po(e,t,t.pendingProps,n),t.child;case 8:case 12:return Po(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Sr(0,t.type,a.value),Po(e,t,a.children,n),t.child;case 9:return r=t.type._context,a=t.pendingProps.children,_r(t),a=a(r=Or(r)),t.flags|=1,Po(e,t,a,n),t.child;case 14:return Do(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return al(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,r=0!==(128&t.flags);if(t.flags&=-129,null===e){if(dr){if("hidden"===a.mode)return e=Uo(t,a),t.lanes=536870912,zo(null,e);if(Ms(t),(e=ur)?null!==(e=null!==(e=Ad(e,pr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},(n=Ga(e)).return=t,t.child=n,cr=t,ur=null):e=null,null===e)throw mr(t);return t.lanes=536870912,null}return Uo(t,a)}var s=e.memoizedState;if(null!==s){var o=s.dehydrated;if(Ms(t),r)if(256&t.flags)t.flags&=-257,t=Wo(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Ro||Ir(e,t,n,!1),r=0!==(n&e.childLanes),Ro||r){if(null!==(a=fc)&&0!==(o=Me(a,n))&&o!==s.retryLane)throw s.retryLane=o,Ra(e,o),Xc(a,e,o),Oo;iu(),t=Wo(e,t,n)}else e=s.treeContext,ur=Rd(o.nextSibling),cr=t,dr=!0,hr=null,pr=!1,null!==e&&lr(t,e),(t=Uo(t,a)).flags|=4096;return t}return(e=Ba(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Lo(e,t,n,t.pendingProps);case 24:return _r(t),a=Or(Lr),null===e?(null===(r=Xr())&&(r=fc,s=zr(),r.pooledCache=s,s.refCount++,null!==s&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:a,cache:r},gs(t),Sr(0,Lr,r)):(0!==(e.lanes&n)&&(xs(e,t),js(t,null,null,n),Ns()),r=e.memoizedState,s=t.memoizedState,r.parent!==a?(r={parent:a,cache:a},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Sr(0,Lr,a)):(a=s.cache,Sr(0,Lr,a),a!==r.cache&&Tr(t,[Lr],n,!0))),Po(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,a,r){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!au())throw rs=es,Jr;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rh(t)){if(!au())throw rs=es,Jr;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Tc|=t)}function dl(e,t){if(!dr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=65011712&r.subtreeFlags,a|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function pl(e,t,n){var a=t.pendingProps;switch(or(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Cr(Lr),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vr(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,br())),hl(t),null;case 26:var r=t.type,s=t.memoizedState;return null===e?(ol(t),null!==s?(hl(t),cl(t,s)):(hl(t),ll(t,r,0,0,n))):s?s!==e.memoizedState?(ol(t),hl(t),cl(t,s)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&ol(t),hl(t),ll(t,r,0,0,n)),null;case 27:if(Q(t),n=q.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&ol(t);else{if(!a){if(null===t.stateNode)throw Error(i(166));return hl(t),null}e=H.current,vr(t)?gr(t):(e=Fd(r,a,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if(Q(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&ol(t);else{if(!a){if(null===t.stateNode)throw Error(i(166));return hl(t),null}if(s=H.current,vr(t))gr(t);else{var o=gd(q.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(s=o.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof a.is?o.createElement("select",{is:a.is}):o.createElement("select"),a.multiple?s.multiple=!0:a.size&&(s.size=a.size);break;default:s="string"===typeof a.is?o.createElement(r,{is:a.is}):o.createElement(r)}}s[Ue]=t,s[We]=a;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)s.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=s;e:switch(hd(s,r,a),r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&ol(t);else{if("string"!==typeof a&&null===t.stateNode)throw Error(i(166));if(e=q.current,vr(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(r=cr))switch(r.tag){case 27:case 5:a=r.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||cd(e.nodeValue,n)))||mr(t,!0)}else(e=gd(e).createTextNode(a))[Ue]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=vr(t),null!==n){if(null===e){if(!a)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[Ue]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ls(t),t):(Ls(t),null);if(0!==(128&t.flags))throw Error(i(558))}return hl(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=vr(t),null!==a&&null!==a.dehydrated){if(null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[Ue]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),r=!1}else r=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Ls(t),t):(Ls(t),null)}return Ls(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(r=a.alternate.memoizedState.cachePool.pool),s=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(s=a.memoizedState.cachePool.pool),s!==r&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return Y(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return Cr(t.type),hl(t),null;case 19:if(B(zs),null===(a=t.memoizedState))return hl(t),null;if(r=0!==(128&t.flags),null===(s=a.rendering))if(r)dl(a,!1);else{if(0!==Nc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Bs(e))){for(t.flags|=128,dl(a,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ua(n,e),n=n.sibling;return U(zs,1&zs.current|2),dr&&rr(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&le()>Pc&&(t.flags|=128,r=!0,dl(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Bs(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!dr)return hl(t),null}else 2*le()-a.renderingStartTime>Pc&&536870912!==n&&(t.flags|=128,r=!0,dl(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=le(),e.sibling=null,n=zs.current,U(zs,r?1&n|2:1&n),dr&&rr(t,a.treeForkCount),e):(hl(t),null);case 22:case 23:return Ls(t),_s(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&B(Kr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Cr(Lr),hl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function fl(e,t){switch(or(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cr(Lr),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(Ls(t),null===t.alternate)throw Error(i(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ls(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(zs),null;case 4:return Y(),null;case 10:return Cr(t.type),null;case 22:case 23:return Ls(t),_s(),null!==e&&B(Kr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cr(Lr),null;default:return null}}function ml(e,t){switch(or(t),t.tag){case 3:Cr(Lr),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Ls(t);break;case 13:Ls(t);break;case 19:B(zs);break;case 10:Cr(t.type);break;case 22:case 23:Ls(t),_s(),null!==e&&B(Kr);break;case 24:Cr(Lr)}}function gl(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var r=a.next;n=r;do{if((n.tag&e)===e){a=void 0;var s=n.create,i=n.inst;a=s(),i.destroy=a}n=n.next}while(n!==r)}}catch(o){Nu(t,t.return,o)}}function xl(e,t,n){try{var a=t.updateQueue,r=null!==a?a.lastEffect:null;if(null!==r){var s=r.next;a=s;do{if((a.tag&e)===e){var i=a.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(u){Nu(r,l,u)}}}a=a.next}while(a!==s)}}catch(u){Nu(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Cs(t,n)}catch(a){Nu(e,e.return,a)}}}function yl(e,t,n){n.props=No(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Nu(e,t,a)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"===typeof n?e.refCleanup=n(a):n.current=a}}catch(r){Nu(e,t,r)}}function wl(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"===typeof a)try{a()}catch(r){Nu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){Nu(e,t,s)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(r){Nu(e,e.return,r)}}function Nl(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(f)||ud(e,t,f,null,a,h)}}for(var p in a){var f=a[p];if(h=n[p],a.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":s=f;break;case"name":r=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:f!==h&&ud(e,t,p,f,a,h)}}return void vt(e,o,l,c,u,d,s,r);case"select":for(s in f=o=l=p=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":f=c;default:a.hasOwnProperty(s)||ud(e,t,s,null,a,c)}for(r in a)if(s=a[r],c=n[r],a.hasOwnProperty(r)&&(null!=s||null!=c))switch(r){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&ud(e,t,r,s,a,c)}return t=l,n=o,a=f,void(null!=p?wt(e,!!n,p,!1):!!a!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!a.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,a,r)}for(o in a)if(r=a[o],s=n[o],a.hasOwnProperty(o)&&(null!=r||null!=s))switch(o){case"value":p=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(i(91));break;default:r!==s&&ud(e,t,o,r,a,s)}return void kt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!a.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,a,p);for(c in a)if(p=a[c],f=n[c],a.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else ud(e,t,c,p,a,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!a.hasOwnProperty(g)&&ud(e,t,g,null,a,p);for(u in a)if(p=a[u],f=n[u],a.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:ud(e,t,u,p,a,f)}return;default:if(Tt(t)){for(var x in n)p=n[x],n.hasOwnProperty(x)&&void 0!==p&&!a.hasOwnProperty(x)&&dd(e,t,x,void 0,a,p);for(d in a)p=a[d],f=n[d],!a.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||dd(e,t,d,p,a,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!a.hasOwnProperty(v)&&ud(e,t,v,null,a,p);for(h in a)p=a[h],f=n[h],!a.hasOwnProperty(h)||p===f||null==p&&null==f||ud(e,t,h,p,a,f)}(a,e.type,n,t),a[We]=t}catch(r){Nu(e,e.return,r)}}function jl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function Sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||jl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ot));else if(4!==a&&(27===a&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function El(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);hd(t,a,n),t[Ue]=e,t[We]=n}catch(s){Nu(e,e.return,s)}}var Il=!1,Al=!1,_l=!1,Ol="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Pl(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Xl(e,n),4&a&&gl(5,n);break;case 1:if(Xl(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Nu(n,n.return,i)}else{var r=No(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Nu(n,n.return,o)}}64&a&&vl(n),512&a&&bl(n,n.return);break;case 3:if(Xl(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Cs(e,t)}catch(i){Nu(n,n.return,i)}}break;case 27:null===t&&4&a&&Tl(n);case 26:case 5:Xl(e,n),null===t&&4&a&&kl(n),512&a&&bl(n,n.return);break;case 12:Xl(e,n);break;case 31:Xl(e,n),4&a&&Bl(e,n);break;case 13:Xl(e,n),4&a&&Ul(e,n),64&a&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,n=Eu.bind(null,n))));break;case 22:if(!(a=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||Al,r=Il;var s=Al;Il=a,(Al=t)&&!s?$l(e,n,0!==(8772&n.subtreeFlags)):Xl(e,n),Il=r,Al=s}break;case 30:break;default:Xl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,Fl=!1;function Ll(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(xe,n)}catch(s){}switch(n.tag){case 26:Al||wl(n,t),Ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Al||wl(n,t);var a=Dl,r=Fl;Cd(n.type)&&(Dl=n.stateNode,Fl=!1),Ll(e,t,n),Ld(n.stateNode),Dl=a,Fl=r;break;case 5:Al||wl(n,t);case 6:if(a=Dl,r=Fl,Dl=null,Ll(e,t,n),Fl=r,null!==(Dl=a))if(Fl)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(n.stateNode)}catch(i){Nu(n,t,i)}else try{Dl.removeChild(n.stateNode)}catch(i){Nu(n,t,i)}break;case 18:null!==Dl&&(Fl?(Ed(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Hh(e)):Ed(Dl,n.stateNode));break;case 4:a=Dl,r=Fl,Dl=n.stateNode.containerInfo,Fl=!0,Ll(e,t,n),Dl=a,Fl=r;break;case 0:case 11:case 14:case 15:xl(2,n,t),Al||xl(4,n,t),Ll(e,t,n);break;case 1:Al||(wl(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount&&yl(n,t,a)),Ll(e,t,n);break;case 21:Ll(e,t,n);break;case 22:Al=(a=Al)||null!==n.memoizedState,Ll(e,t,n),Al=a;break;default:Ll(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Hh(e)}catch(n){Nu(t,t.return,n)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Hh(e)}catch(n){Nu(t,t.return,n)}}function Wl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ol),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ol),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var a=Tu.bind(null,e,t);t.then(a,a)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){Dl=l.stateNode,Fl=!1;break e}break;case 5:Dl=l.stateNode,Fl=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Dl)throw Error(i(160));zl(s,o,r),Dl=null,Fl=!1,null!==(s=r.alternate)&&(s.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Gl(t,e),t=t.sibling}var Hl=null;function Gl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),ql(e),4&a&&(xl(3,e,e.return),gl(3,e),xl(5,e,e.return));break;case 1:Vl(t,e),ql(e),512&a&&(Al||null===n||wl(n,n.return)),64&a&&Il&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var r=Hl;if(Vl(t,e),ql(e),512&a&&(Al||null===n||wl(n,n.return)),4&a){var s=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(a){case"title":(!(s=r.getElementsByTagName("title")[0])||s[Xe]||s[Ue]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=r.createElement(a),r.head.insertBefore(s,r.querySelector("head > title"))),hd(s,a,n),s[Ue]=e,et(s),a=s;break e;case"link":var o=nh("link","href",r).get(a+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(s=r.createElement(a),a,n),r.head.appendChild(s);break;case"meta":if(o=nh("meta","content",r).get(a+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(s=r.createElement(a),a,n),r.head.appendChild(s);break;default:throw Error(i(468,a))}s[Ue]=e,et(s),a=s}e.stateNode=a}else ah(r,e.type,e.stateNode);else e.stateNode=Qd(r,a,e.memoizedProps);else s!==a?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===a?ah(r,e.type,e.stateNode):Qd(r,a,e.memoizedProps)):null===a&&null!==e.stateNode&&Nl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),ql(e),512&a&&(Al||null===n||wl(n,n.return)),null!==n&&4&a&&Nl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),ql(e),512&a&&(Al||null===n||wl(n,n.return)),32&e.flags){r=e.stateNode;try{jt(r,"")}catch(m){Nu(e,e.return,m)}}4&a&&null!=e.stateNode&&Nl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&a&&(_l=!0);break;case 6:if(Vl(t,e),ql(e),4&a){if(null===e.stateNode)throw Error(i(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(m){Nu(e,e.return,m)}}break;case 3:if(th=null,r=Hl,Hl=Ud(t.containerInfo),Vl(t,e),Hl=r,ql(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Hh(t.containerInfo)}catch(m){Nu(e,e.return,m)}_l&&(_l=!1,Kl(e));break;case 4:a=Hl,Hl=Ud(e.stateNode.containerInfo),Vl(t,e),ql(e),Hl=a;break;case 12:default:Vl(t,e),ql(e);break;case 31:case 19:Vl(t,e),ql(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Wl(e,a)));break;case 13:Vl(t,e),ql(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Oc=le()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Wl(e,a)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Il,d=Al;if(Il=u||r,Al=d||c,Vl(t,e),Al=d,Il=u,ql(e),8192&a)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||Il||Al||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,r)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){Nu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(m){Nu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;r?Td(f,!0):Td(c.stateNode,!1)}catch(m){Nu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,Wl(e,n))));case 30:case 21:}}function ql(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(jl(a)){n=a;break}a=a.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var r=n.stateNode;El(e,Sl(e),r);break;case 5:var s=n.stateNode;32&n.flags&&(jt(s,""),n.flags&=-33),El(e,Sl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,Sl(e),o);break;default:throw Error(i(161))}}catch(l){Nu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Pl(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:xl(4,t,t.return),Yl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&yl(t,t.return,n),Yl(t);break;case 27:Ld(t.stateNode);case 26:case 5:wl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,r=e,s=t,i=s.flags;switch(s.tag){case 0:case 11:case 15:$l(r,s,n),gl(4,s);break;case 1:if($l(r,s,n),"function"===typeof(r=(a=s).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){Nu(a,a.return,c)}if(null!==(r=(a=s).updateQueue)){var o=a.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)Ss(l[r],o)}catch(c){Nu(a,a.return,c)}}n&&64&i&&vl(s),bl(s,s.return);break;case 27:Tl(s);case 26:case 5:$l(r,s,n),n&&null===a&&4&i&&kl(s),bl(s,s.return);break;case 12:$l(r,s,n);break;case 31:$l(r,s,n),n&&4&i&&Bl(r,s);break;case 13:$l(r,s,n),n&&4&i&&Ul(r,s);break;case 22:null===s.memoizedState&&$l(r,s,n),bl(s,s.return);break;case 30:break;default:$l(r,s,n)}t=t.sibling}}function Ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Br(n))}function Jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Br(e))}function Zl(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,a),t=t.sibling}function ec(e,t,n,a){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,a),2048&r&&gl(9,t);break;case 1:case 31:case 13:default:Zl(e,t,n,a);break;case 3:Zl(e,t,n,a),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Br(e)));break;case 12:if(2048&r){Zl(e,t,n,a),e=t.stateNode;try{var s=t.memoizedProps,i=s.id,o=s.onPostCommit;"function"===typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Nu(t,t.return,l)}}else Zl(e,t,n,a);break;case 23:break;case 22:s=t.stateNode,i=t.alternate,null!==t.memoizedState?2&s._visibility?Zl(e,t,n,a):nc(e,t):2&s._visibility?Zl(e,t,n,a):(s._visibility|=2,tc(e,t,n,a,0!==(10256&t.subtreeFlags)||!1)),2048&r&&Ql(i,t);break;case 24:Zl(e,t,n,a),2048&r&&Jl(t.alternate,t)}}function tc(e,t,n,a,r){for(r=r&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,i=t,o=n,l=a,c=i.flags;switch(i.tag){case 0:case 11:case 15:tc(s,i,o,l,r),gl(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?tc(s,i,o,l,r):nc(s,i):(u._visibility|=2,tc(s,i,o,l,r)),r&&2048&c&&Ql(i.alternate,i);break;case 24:tc(s,i,o,l,r),r&&2048&c&&Jl(i.alternate,i);break;default:tc(s,i,o,l,r)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,r=a.flags;switch(a.tag){case 22:nc(n,a),2048&r&&Ql(a.alternate,a);break;case 24:nc(n,a),2048&r&&Jl(a.alternate,a);break;default:nc(n,a)}t=t.sibling}}var ac=8192;function rc(e,t,n){if(e.subtreeFlags&ac)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:rc(e,t,n),e.flags&ac&&null!==e.memoizedState&&function(e,t,n,a){if("stylesheet"===n.type&&("string"!==typeof a.media||!1!==matchMedia(a.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var r=qd(a.href),s=t.querySelector(Kd(r));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ih.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,a=Xd(a),(r=zd.get(r))&&Zd(a,r),et(s=s.createElement("link"));var i=s;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),hd(s,"link",a),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ih.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Hl,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,t,n);break;case 3:case 4:var a=Hl;Hl=Ud(e.stateNode.containerInfo),rc(e,t,n),Hl=a;break;case 22:null===e.memoizedState&&(null!==(a=e.alternate)&&null!==a.memoizedState?(a=ac,ac=16777216,rc(e,t,n),ac=a):rc(e,t,n))}}function ic(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Rl=a,uc(a,e)}ic(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&xl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Rl=a,uc(a,e)}ic(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:xl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:xl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Br(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,Rl=a;else e:for(n=e;null!==Rl;){var r=(a=Rl).sibling,s=a.return;if(Ml(a),a===n){Rl=null;break e}if(null!==r){r.return=s,Rl=r;break e}Rl=s}}}var dc={getCacheForType:function(e){var t=Or(Lr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Or(Lr).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,mc=null,gc=0,xc=0,vc=null,yc=!1,bc=!1,wc=!1,kc=0,Nc=0,jc=0,Sc=0,Cc=0,Ec=0,Tc=0,Ic=null,Ac=null,_c=!1,Oc=0,Rc=0,Pc=1/0,Mc=null,Dc=null,Fc=0,Lc=null,zc=null,Bc=0,Uc=0,Wc=null,Vc=null,Hc=0,Gc=null;function qc(){return 0!==(2&pc)&&0!==gc?gc&-gc:null!==P.T?Wu():Le()}function Kc(){if(0===Ec)if(0===(536870912&gc)||dr){var e=je;0===(3932160&(je<<=1))&&(je=262144),Ec=e}else Ec=536870912;return null!==(e=Os.current)&&(e.flags|=32),Ec}function Xc(e,t,n){(e!==fc||2!==xc&&9!==xc)&&null===e.cancelPendingCommit||(tu(e,0),Jc(e,gc,Ec,!1)),Oe(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(Sc|=n),4===Nc&&Jc(e,gc,Ec,!1)),Mu(e))}function Yc(e,t,n){if(0!==(6&pc))throw Error(i(327));for(var a=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),r=a?function(e,t){var n=pc;pc|=2;var a=ru(),r=su();fc!==e||gc!==t?(Mc=null,Pc=le()+500,tu(e,t)):bc=Te(e,t);e:for(;;)try{if(0!==xc&&null!==mc){t=mc;var s=vc;t:switch(xc){case 1:xc=0,vc=null,hu(e,t,s,1);break;case 2:case 9:if(ts(s)){xc=0,vc=null,du(t);break}t=function(){2!==xc&&9!==xc||fc!==e||(xc=7),Mu(e)},s.then(t,t);break e;case 3:xc=7;break e;case 4:xc=5;break e;case 7:ts(s)?(xc=0,vc=null,du(t)):(xc=0,vc=null,hu(e,t,s,7));break;case 5:var o=null;switch(mc.tag){case 26:o=mc.memoizedState;case 5:case 27:var l=mc;if(o?rh(o):l.stateNode.complete){xc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,pu(u)):mc=null}break t}}xc=0,vc=null,hu(e,t,s,5);break;case 6:xc=0,vc=null,hu(e,t,s,6);break;case 8:eu(),Nc=6;break e;default:throw Error(i(462))}}cu();break}catch(d){nu(e,d)}return jr=Nr=null,P.H=a,P.A=r,pc=n,null!==mc?0:(fc=null,gc=0,Aa(),Nc)}(e,t):ou(e,t,!0),s=a;;){if(0===r){bc&&!a&&Jc(e,t,0,!1);break}if(n=e.current.alternate,!s||Qc(n)){if(2===r){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=s,Sc|=s,r=4;break e}s=Ac,Ac=r,null!==s&&(null===Ac?Ac=s:Ac.push.apply(Ac,s))}r=o}if(s=!1,2!==r)continue}}if(1===r){tu(e,0),Jc(e,t,0,!0);break}e:{switch(a=e,s=r){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Jc(a,t,Ec,!yc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(r=Oc+300-le())){if(Jc(a,t,Ec,!yc),0!==Ee(a,0,!0))break e;Bc=t,a.timeoutHandle=wd($c.bind(null,a,n,Ac,Mc,_c,t,Ec,Sc,Tc,yc,s,"Throttled",-0,0),r)}else $c(a,n,Ac,Mc,_c,t,Ec,Sc,Tc,yc,s,null,-0,0)}break}r=ou(e,t,!1),s=!1}Mu(e)}function $c(e,t,n,a,r,s,i,o,l,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ot});var f=(62914560&s)===s?Oc-le():(4194048&s)===s?Rc-le():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var r=n[a],s=r.transferSize,i=r.initiatorType,o=r.duration;if(s&&o&&pd(i)){for(i=0,o=r.responseEnd,a+=1;a<n.length;a++){var l=n[a],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&pd(d)&&(i+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--a,t+=8*(s+i)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(r)}}:null}(d,f)))return Bc=s,e.cancelPendingCommit=f(mu.bind(null,e,t,s,n,a,r,i,o,l,u,d,null,h,p)),void Jc(e,s,i,!c)}mu(e,t,s,n,a,r,i,o,l)}function Qc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var a=0;a<n.length;a++){var r=n[a],s=r.getSnapshot;r=r.value;try{if(!Jn(s(),r))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t,n,a){t&=~Cc,t&=~Sc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var r=t;0<r;){var s=31-be(r),i=1<<s;a[s]=-1,r&=~i}0!==n&&Re(e,n,t)}function Zc(){return 0!==(6&pc)||(Du(0,!1),!1)}function eu(){if(null!==mc){if(0===xc)var e=mc.return;else jr=Nr=null,ii(e=mc),os=null,ls=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),fc=e,mc=n=Ba(e.current,null),gc=t,xc=0,vc=null,yc=!1,bc=Te(e,t),wc=!1,Tc=Ec=Cc=Sc=jc=Nc=0,Ac=Ic=null,_c=!1,0!==(8&t)&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var r=31-be(a),s=1<<r;t|=e[r],a&=~s}return kc=t,Aa(),n}function nu(e,t){Ws=null,P.H=mo,t===Qr||t===Zr?(t=ss(),xc=3):t===Jr?(t=ss(),xc=4):xc=t===Oo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(Nc=1,Eo(e,Xa(t,e.current)))}function au(){var e=Os.current;return null===e||((4194048&gc)===gc?null===Rs:((62914560&gc)===gc||0!==(536870912&gc))&&e===Rs)}function ru(){var e=P.H;return P.H=mo,null===e?mo:e}function su(){var e=P.A;return P.A=dc,e}function iu(){Nc=4,yc||(4194048&gc)!==gc&&null!==Os.current||(bc=!0),0===(134217727&jc)&&0===(134217727&Sc)||null===fc||Jc(fc,gc,Ec,!1)}function ou(e,t,n){var a=pc;pc|=2;var r=ru(),s=su();fc===e&&gc===t||(Mc=null,tu(e,t)),t=!1;var i=Nc;e:for(;;)try{if(0!==xc&&null!==mc){var o=mc,l=vc;switch(xc){case 8:eu(),i=6;break e;case 3:case 2:case 9:case 6:null===Os.current&&(t=!0);var c=xc;if(xc=0,vc=null,hu(e,o,l,c),n&&bc){i=0;break e}break;default:c=xc,xc=0,vc=null,hu(e,o,l,c)}}lu(),i=Nc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,jr=Nr=null,pc=a,P.H=r,P.A=s,null===mc&&(fc=null,gc=0,Aa()),i}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!ie();)uu(mc)}function uu(e){var t=il(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Go(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Go(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:ii(t);default:ml(n,t),t=il(n,t=mc=Ua(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function hu(e,t,n,a){jr=Nr=null,ii(t),os=null,ls=0;var r=t.return;try{if(function(e,t,n,a,r){if(n.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){if(null!==(t=n.alternate)&&Ir(t,n,r,!0),null!==(n=Os.current)){switch(n.tag){case 31:case 13:return null===Rs?iu():null===n.alternate&&0===Nc&&(Nc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),ju(e,a,r)),!1;case 22:return n.flags|=65536,a===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),ju(e,a,r)),!1}throw Error(i(435,n.tag))}return ju(e,a,r),iu(),!1}if(dr)return null!==(t=Os.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,a!==fr&&wr(Xa(e=Error(i(422),{cause:a}),n))):(a!==fr&&wr(Xa(t=Error(i(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,a=Xa(a,n),ws(e,r=Io(e.stateNode,a,r)),4!==Nc&&(Nc=2)),!1;var s=Error(i(520),{cause:a});if(s=Xa(s,n),null===Ic?Ic=[s]:Ic.push(s),4!==Nc&&(Nc=2),null===t)return!0;a=Xa(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,ws(n,e=Io(n.stateNode,a,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Dc||!Dc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,_o(r=Ao(r),e,n,a),ws(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,gc))return Nc=1,Eo(e,Xa(n,e.current)),void(mc=null)}catch(s){if(null!==r)throw mc=r,s;return Nc=1,Eo(e,Xa(n,e.current)),void(mc=null)}32768&t.flags?(dr||1===a?e=!0:bc||0!==(536870912&gc)?e=!1:(yc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=Os.current)&&13===a.tag&&(a.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,yc);e=t.return;var n=pl(t.alternate,t,kc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Nc&&(Nc=5)}function fu(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Nc=6,mc=null}function mu(e,t,n,a,r,s,o,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Fc);if(0!==(6&pc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(s=t.lanes|t.childLanes,function(e,t,n,a,r,s){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-be(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==a&&Re(e,a,0),0!==s&&0===r&&0!==e.tag&&(e.suspendedLanes|=s&~(i&~t))}(e,n,s|=Ia,o,l,c),e===fc&&(mc=fc=null,gc=0),zc=t,Lc=e,Bc=n,Uc=s,Wc=r,Vc=a,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,re(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),a=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||a){a=P.T,P.T=null,r=M.p,M.p=2,o=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fd=yh,ra(e=aa(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==s||0!==a&&3!==h.nodeType||(c=o+a),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=o),p===s&&++d===a&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},yh=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(s=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,a=n.stateNode;try{var m=No(n.type,r);e=a.getSnapshotBeforeUpdate(m,s),a.__reactInternalSnapshotBeforeUpdate=e}catch(x){Nu(n,n.return,x)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Id(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{pc=o,M.p=r,P.T=a}}Fc=1,gu(),xu(),vu()}}function gu(){if(1===Fc){Fc=0;var e=Lc,t=zc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var a=M.p;M.p=2;var r=pc;pc|=4;try{Gl(t,e);var s=md,i=aa(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(i!==o&&o&&o.ownerDocument&&na(o.ownerDocument.documentElement,o)){if(null!==l&&ra(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=o.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(i=g,g=m,m=i);var x=ta(o,m),v=ta(o,g);if(x&&v&&(1!==p.rangeCount||p.anchorNode!==x.node||p.anchorOffset!==x.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(x.node,x.offset),p.removeAllRanges(),m>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}yh=!!fd,md=fd=null}finally{pc=r,M.p=a,P.T=n}}e.current=t,Fc=2}}function xu(){if(2===Fc){Fc=0;var e=Lc,t=zc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var a=M.p;M.p=2;var r=pc;pc|=4;try{Pl(e,t.alternate,t)}finally{pc=r,M.p=a,P.T=n}}Fc=3}}function vu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Lc,t=zc,n=Bc,a=Vc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,zc=Lc=null,yu(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Dc=null),Fe(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(xe,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==a){t=P.T,r=M.p,M.p=2,P.T=null;try{for(var s=e.onRecoverableError,i=0;i<a.length;i++){var o=a[i];s(o.value,{componentStack:o.stack})}}finally{P.T=t,M.p=r}}0!==(3&Bc)&&bu(),Mu(e),r=e.pendingLanes,0!==(261930&n)&&0!==(42&r)?e===Gc?Hc++:(Hc=0,Gc=e):Hc=0,Du(0,!1)}}function yu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Br(t)))}function bu(){return gu(),xu(),vu(),wu()}function wu(){if(5!==Fc)return!1;var e=Lc,t=Uc;Uc=0;var n=Fe(Bc),a=P.T,r=M.p;try{M.p=32>n?32:n,P.T=null,n=Wc,Wc=null;var s=Lc,o=Bc;if(Fc=0,zc=Lc=null,Bc=0,0!==(6&pc))throw Error(i(331));var l=pc;if(pc|=4,lc(s.current),ec(s,s.current,o,n),pc=l,Du(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(xe,s)}catch(c){}return!0}finally{M.p=r,P.T=a,yu(e,t)}}function ku(e,t,n){t=Xa(n,t),null!==(e=ys(e,t=Io(e.stateNode,t,2),2))&&(Oe(e,2),Mu(e))}function Nu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Dc||!Dc.has(a))){e=Xa(n,e),null!==(a=ys(t,n=Ao(2),2))&&(_o(n,a,t,e),Oe(a,2),Mu(a));break}}t=t.return}}function ju(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new hc;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(wc=!0,r.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function Su(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(gc&n)===n&&(4===Nc||3===Nc&&(62914560&gc)===gc&&300>le()-Oc?0===(2&pc)&&tu(e,0):Cc|=n,Tc===gc&&(Tc=0)),Mu(e)}function Cu(e,t){0===t&&(t=Ae()),null!==(e=Ra(e,t))&&(Oe(e,t),Mu(e))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==a&&a.delete(t),Cu(e,n)}var Iu=null,Au=null,_u=!1,Ou=!1,Ru=!1,Pu=0;function Mu(e){e!==Au&&null===e.next&&(null===Au?Iu=Au=e:Au=Au.next=e),Ou=!0,_u||(_u=!0,jd(function(){0!==(6&pc)?re(ue,Fu):Lu()}))}function Du(e,t){if(!Ru&&Ou){Ru=!0;do{for(var n=!1,a=Iu;null!==a;){if(!t)if(0!==e){var r=a.pendingLanes;if(0===r)var s=0;else{var i=a.suspendedLanes,o=a.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=r&~(i&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Uu(a,s))}else s=gc,0===(3&(s=Ee(a,a===fc?s:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||Te(a,s)||(n=!0,Uu(a,s));a=a.next}}while(n);Ru=!1}}function Fu(){Lu()}function Lu(){Ou=_u=!1;var e=0;0!==Pu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bd&&(bd=e,!0);return bd=null,!1}()&&(e=Pu);for(var t=le(),n=null,a=Iu;null!==a;){var r=a.next,s=zu(a,t);0===s?(a.next=null,null===n?Iu=r:n.next=r,null===r&&(Au=n)):(n=a,(0!==e||0!==(3&s))&&(Ou=!0)),a=r}0!==Fc&&5!==Fc||Du(e,!1),0!==Pu&&(Pu=0)}function zu(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var i=31-be(s),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&a)||(r[i]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=gc,n=Ee(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===xc||9===xc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&se(a),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&se(a),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return a=Bu.bind(null,e),n=re(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&se(a),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var a=gc;return 0===(a=Ee(e,e===fc?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,a,t),zu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Uu(e,t){if(bu())return null;Yc(e,t,!0)}function Wu(){if(0===Pu){var e=Vr;0===e&&(e=Ne,0===(261888&(Ne<<=1))&&(Ne=256)),Pu=e}return Pu}function Vu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:_t(""+e)}function Hu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Gu=0;Gu<ja.length;Gu++){var qu=ja[Gu];Sa(qu.toLowerCase(),"on"+(qu[0].toUpperCase()+qu.slice(1)))}Sa(ga,"onAnimationEnd"),Sa(xa,"onAnimationIteration"),Sa(va,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(ya,"onTransitionRun"),Sa(ba,"onTransitionStart"),Sa(wa,"onTransitionCancel"),Sa(ka,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){Ca(u)}r.currentTarget=null,s=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){Ca(u)}r.currentTarget=null,s=l}}}}function $u(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var a=e+"__bubble";n.has(a)||(ed(t,e,2,!1),n.add(a))}function Qu(e,t,n){var a=0;t&&(a|=4),ed(n,e,a,t)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Ju]){e[Ju]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Xu.has(t)||Qu(t,!1,e),Qu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ju]||(t[Ju]=!0,Qu("selectionchange",!1,t))}}function ed(e,t,n,a){switch(Ch(t)){case 2:var r=bh;break;case 8:r=wh;break;default:r=kh}n=r.bind(null,t,n,e),r=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function td(e,t,n,a,r){var s=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var o=a.stateNode.containerInfo;if(o===r)break;if(4===i)for(i=a.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===r)return;i=i.return}for(;null!==o;){if(null===(i=$e(o)))return;if(5===(c=i.tag)||6===c||26===c||27===c){a=s=i;continue e}o=o.parentNode}}a=a.return}zt(function(){var a=s,r=Pt(n),i=[];e:{var o=Na.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Xt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case ga:case xa:case va:c=un;break;case ka:c=wn;break;case"scroll":case"scrollend":c=rn;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=Nn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==o?o+"Capture":null:o;d=[];for(var f,m=a;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Bt(m,p))&&d.push(nd(m,g,f)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,r),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Ve])&&(c||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=a,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=a),c!==u)){if(d=on,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?o:Je(c),f=null==u?o:Je(u),(o=new d(g,m+"leave",c,n,r)).target=h,o.relatedTarget=f,g=null,$e(r)===a&&((d=new d(p,m+"enter",u,n,r)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=rd,m=u,f=0,g=p=c;g;g=d(g))f++;g=0;for(var x=m;x;x=d(x))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&sd(i,o,c,d,!1),null!==u&&null!==h&&sd(i,h,u,d,!0)}if("select"===(c=(o=a?Je(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Un;else if(Mn(o))if(Wn)v=Qn;else{v=Yn;var y=Xn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?a&&Tt(a.elementType)&&(v=Un):v=$n;switch(v&&(v=v(e,a))?Dn(i,v,n,r):(y&&y(e,o,a),"focusout"===e&&a&&"number"===o.type&&null!=a.memoizedProps.value&&bt(o,"number",o.value)),y=a?Je(a):window,e){case"focusin":(Mn(y)||"true"===y.contentEditable)&&(ia=y,oa=a,la=null);break;case"focusout":la=oa=ia=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,ua(i,n,r);break;case"selectionchange":if(sa)break;case"keydown":case"keyup":ua(i,n,r)}var b;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?_n(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Kt()):(Gt="value"in(Ht=r)?Ht.value:Ht.textContent,Rn=!0)),0<(y=ad(a,w)).length&&(w=new hn(w,e,null,n,r),i.push({event:w,listeners:y}),b?w.data=b:null!==(b=On(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(An=!0,In);case"textInput":return(e=t.data)===In&&An?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!Sn&&_n(e,t)?(e=Kt(),qt=Gt=Ht=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ad(a,"onBeforeInput")).length&&(y=new hn("onBeforeInput","beforeinput",null,n,r),i.push({event:y,listeners:w}),y.data=b)),function(e,t,n,a,r){if("submit"===t&&n&&n.stateNode===r){var s=Vu((r[We]||null).action),i=a.submitter;i&&null!==(t=(t=i[We]||null)?Vu(t.formAction):i.getAttribute("formAction"))&&(s=t,i=null);var o=new nn("action","action",null,a,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==Pu){var e=i?Hu(r,i):new FormData(r);eo(n,{pending:!0,data:e,method:r.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=i?Hu(r,i):new FormData(r),eo(n,{pending:!0,data:e,method:r.method,action:s},s,e))},currentTarget:r}]})}}(i,e,a,n,r)}Yu(i,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ad(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,s=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===s||(null!=(r=Bt(e,n))&&a.unshift(nd(e,r,s)),null!=(r=Bt(e,t))&&a.push(nd(e,r,s))),3===e.tag)return a;e=e.return}return[]}function rd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,a,r){for(var s=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===a)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=Bt(n,s))&&i.unshift(nd(n,c,l)):r||null!=(c=Bt(n,s))&&i.push(nd(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var id=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(id,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,a,r,s){switch(n){case"children":"string"===typeof a?"body"===t||"textarea"===t&&""===a||jt(e,a):("number"===typeof a||"bigint"===typeof a)&&"body"!==t&&jt(e,""+a);break;case"className":ct(e,"class",a);break;case"tabIndex":ct(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,a);break;case"style":Et(e,a,s);break;case"data":if("object"!==t){ct(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"===typeof a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=_t(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"===typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&ud(e,t,"name",r.name,r,null),ud(e,t,"formEncType",r.formEncType,r,null),ud(e,t,"formMethod",r.formMethod,r,null),ud(e,t,"formTarget",r.formTarget,r,null)):(ud(e,t,"encType",r.encType,r,null),ud(e,t,"method",r.method,r,null),ud(e,t,"target",r.target,r,null))),null==a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=_t(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=Ot);break;case"onScroll":null!=a&&$u("scroll",e);break;case"onScrollEnd":null!=a&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(i(61));if(null!=(n=a.__html)){if(null!=r.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"muted":e.muted=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"===typeof a||"boolean"===typeof a||"symbol"===typeof a){e.removeAttribute("xlink:href");break}n=_t(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"===typeof a||"symbol"===typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":$u("beforetoggle",e),$u("toggle",e),lt(e,"popover",a);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":lt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,a)}}function dd(e,t,n,a,r,s){switch(n){case"style":Et(e,a,s);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(i(61));if(null!=(n=a.__html)){if(null!=r.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof a?jt(e,a):("number"===typeof a||"bigint"===typeof a)&&jt(e,""+a);break;case"onScroll":null!=a&&$u("scroll",e);break;case"onScrollEnd":null!=a&&$u("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Ot);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(s=null!=(s=e[We]||null)?s[n]:null)&&e.removeEventListener(t,s,r),"function"!==typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):lt(e,n,a):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,r)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var a,r=!1,s=!1;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(null!=o)switch(a){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ud(e,t,a,o,n,null)}}return s&&ud(e,t,"srcSet",n.srcSet,n,null),void(r&&ud(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var l=a=o=s=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(null!=d)switch(r){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:ud(e,t,r,d,n,null)}}return void yt(e,a,l,c,u,o,s,!1);case"select":for(s in $u("invalid",e),r=o=a=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":a=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:ud(e,t,s,l,n,null)}return t=a,n=o,e.multiple=!!r,void(null!=t?wt(e,!!r,t,!1):null!=n&&wt(e,!!r,n,!0));case"textarea":for(o in $u("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:ud(e,t,o,l,n,null)}return void Nt(e,r,s,a);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else ud(e,t,c,r,n,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(r=0;r<Ku.length;r++)$u(Ku[r],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ud(e,t,u,r,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(r=n[d])&&dd(e,t,d,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&ud(e,t,l,r,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function xd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,kd="function"===typeof clearTimeout?clearTimeout:void 0,Nd="function"===typeof Promise?Promise:void 0,jd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Nd?function(e){return Nd.resolve(null).then(e).catch(Sd)}:wd;function Sd(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Ed(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===a)return e.removeChild(r),void Hh(t);a--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)a++;else if("html"===n)Ld(e.ownerDocument.documentElement);else if("head"===n){Ld(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var i=s.nextSibling,o=s.nodeName;s[Xe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=i}}else"body"===n&&Ld(e.ownerDocument.body);n=r}while(n);Hh(t)}function Td(e,t){var n=e;e=0;do{var a=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=a}while(n)}function Id(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}function _d(e){return"$?"===e.data||"$~"===e.data}function Od(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Pd=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Dd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Ld(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var zd=new Map,Bd=new Set;function Ud(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Wd=M.d;M.d={f:function(){var e=Wd.f(),t=Zc();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Wd.r(e)},D:function(e){Wd.D(e),Hd("dns-prefetch",e,null)},C:function(e,t){Wd.C(e,t),Hd("preconnect",e,t)},L:function(e,t,n){Wd.L(e,t,n);var a=Vd;if(a&&e&&t){var r='link[rel="preload"][as="'+xt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+xt(n.imageSizes)+'"]')):r+='[href="'+xt(e)+'"]';var s=r;switch(t){case"style":s=qd(e);break;case"script":s=Yd(e)}zd.has(s)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zd.set(s,e),null!==a.querySelector(r)||"style"===t&&a.querySelector(Kd(s))||"script"===t&&a.querySelector($d(s))||(hd(t=a.createElement("link"),"link",e),et(t),a.head.appendChild(t)))}},m:function(e,t){Wd.m(e,t);var n=Vd;if(n&&e){var a=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+xt(a)+'"][href="'+xt(e)+'"]',s=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Yd(e)}if(!zd.has(s)&&(e=p({rel:"modulepreload",href:e},t),zd.set(s,e),null===n.querySelector(r))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(s)))return}hd(a=n.createElement("link"),"link",e),et(a),n.head.appendChild(a)}}},X:function(e,t){Wd.X(e,t);var n=Vd;if(n&&e){var a=Ze(n).hoistableScripts,r=Yd(e),s=a.get(r);s||((s=n.querySelector($d(r)))||(e=p({src:e,async:!0},t),(t=zd.get(r))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},a.set(r,s))}},S:function(e,t,n){Wd.S(e,t,n);var a=Vd;if(a&&e){var r=Ze(a).hoistableStyles,s=qd(e);t=t||"default";var i=r.get(s);if(!i){var o={loading:0,preload:null};if(i=a.querySelector(Kd(s)))o.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zd.get(s))&&Zd(e,n);var l=i=a.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Jd(i,t,a)}i={type:"stylesheet",instance:i,count:1,state:o},r.set(s,i)}}},M:function(e,t){Wd.M(e,t);var n=Vd;if(n&&e){var a=Ze(n).hoistableScripts,r=Yd(e),s=a.get(r);s||((s=n.querySelector($d(r)))||(e=p({src:e,async:!0,type:"module"},t),(t=zd.get(r))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},a.set(r,s))}}};var Vd="undefined"===typeof document?null:document;function Hd(e,t,n){var a=Vd;if(a&&"string"===typeof t&&t){var r=xt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Bd.has(r)||(Bd.add(r),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(r)&&(hd(t=a.createElement("link"),"link",e),et(t),a.head.appendChild(t)))}}function Gd(e,t,n,a){var r,s,o,l,c=(c=q.current)?Ud(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=qd(n.href),(a=(n=Ze(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=qd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),zd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zd.set(e,n),u||(r=c,s=e,o=n,l=d.state,r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hd(s,"link",o),et(s),r.head.appendChild(s))))),t&&null===a)throw Error(i(528,""));return d}if(t&&null!==a)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yd(n),(a=(n=Ze(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function qd(e){return'href="'+xt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function Xd(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+xt(e)+'"]'}function $d(e){return"script[async]"+e}function Qd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+xt(n.href)+'"]');if(a)return t.instance=a,et(a),a;var r=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(a=(e.ownerDocument||e).createElement("style")),hd(a,"style",r),Jd(a,n.precedence,e),t.instance=a;case"stylesheet":r=qd(n.href);var s=e.querySelector(Kd(r));if(s)return t.state.loading|=4,t.instance=s,et(s),s;a=Xd(n),(r=zd.get(r))&&Zd(a,r),et(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(s,"link",a),t.state.loading|=4,Jd(s,n.precedence,e),t.instance=s;case"script":return s=Yd(n.src),(r=e.querySelector($d(s)))?(t.instance=r,et(r),r):(a=n,(r=zd.get(s))&&eh(a=p({},n),r),et(r=(e=e.ownerDocument||e).createElement("script")),hd(r,"link",a),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,Jd(a,n.precedence,e));return t.instance}function Jd(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,s=r,i=0;i<a.length;i++){var o=a[i];if(o.dataset.precedence===t)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var a=new Map,r=th=new Map;r.set(n,a)}else(a=(r=th).get(n))||(a=new Map,r.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Xe]||s[Ue]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var i=s.getAttribute(t)||"";i=e+i;var o=a.get(i);o?o.push(s):a.set(i,[s])}}return a}function ah(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function rh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function ih(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ih.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var a=n.get(null);else{n=new Map,oh.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var i=r[s];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),a=i)}a&&n.set(null,a)}i=(r=t.instance).getAttribute("data-precedence"),(s=n.get(i)||a)===a&&n.set(null,r),n.set(i,r),this.count++,a=ih.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),s?s.parentNode.insertBefore(r,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function dh(e,t,n,a,r,s,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,a,r,s,i,o,l,c,u,d){return e=new dh(e,t,n,i,l,c,u,d,o),t=1,!0===s&&(t|=24),s=La(3,null,null,t),e.current=s,s.stateNode=e,(t=zr()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:a,isDehydrated:n,cache:t},gs(s),e}function ph(e){return e?e=Da:Da}function fh(e,t,n,a,r,s){r=ph(r),null===a.context?a.context=r:a.pendingContext=r,(a=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(a.callback=s),null!==(n=ys(e,a,t))&&(Xc(n,0,t),bs(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function xh(e){if(13===e.tag||31===e.tag){var t=Ra(e,67108864);null!==t&&Xc(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=qc(),n=Ra(e,t=De(t));null!==n&&Xc(n,0,t),gh(e,t)}}var yh=!0;function bh(e,t,n,a){var r=P.T;P.T=null;var s=M.p;try{M.p=2,kh(e,t,n,a)}finally{M.p=s,P.T=r}}function wh(e,t,n,a){var r=P.T;P.T=null;var s=M.p;try{M.p=8,kh(e,t,n,a)}finally{M.p=s,P.T=r}}function kh(e,t,n,a){if(yh){var r=Nh(a);if(null===r)td(e,t,a,jh,n),Mh(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Th=Dh(Th,e,t,n,a,r),!0;case"dragenter":return Ih=Dh(Ih,e,t,n,a,r),!0;case"mouseover":return Ah=Dh(Ah,e,t,n,a,r),!0;case"pointerover":var s=r.pointerId;return _h.set(s,Dh(_h.get(s)||null,e,t,n,a,r)),!0;case"gotpointercapture":return s=r.pointerId,Oh.set(s,Dh(Oh.get(s)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(Mh(e,a),4&t&&-1<Ph.indexOf(e)){for(;null!==r;){var s=Qe(r);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var i=Ce(s.pendingLanes);if(0!==i){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-be(i);o.entanglements[1]|=l,i&=~l}Mu(s),0===(6&pc)&&(Pc=le()+500,Du(0,!1))}}break;case 31:case 13:null!==(o=Ra(s,2))&&Xc(o,0,2),Zc(),gh(s,2)}if(null===(s=Nh(a))&&td(e,t,a,jh,n),s===r)break;r=s}null!==r&&a.stopPropagation()}else td(e,t,a,null,n)}}function Nh(e){return Sh(e=Pt(e))}var jh=null;function Sh(e){if(jh=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return jh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Eh=!1,Th=null,Ih=null,Ah=null,_h=new Map,Oh=new Map,Rh=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":Ih=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":_h.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oh.delete(t.pointerId)}}function Dh(e,t,n,a,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=Qe(t))&&xh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Fh(e){var t=$e(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void ze(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void ze(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nh(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&xh(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);Rt=a,n.target.dispatchEvent(a),Rt=null,t.shift()}return!0}function zh(e,t,n){Lh(e)&&n.delete(t)}function Bh(){Eh=!1,null!==Th&&Lh(Th)&&(Th=null),null!==Ih&&Lh(Ih)&&(Ih=null),null!==Ah&&Lh(Ah)&&(Ah=null),_h.forEach(zh),Oh.forEach(zh)}function Uh(e,t){e.blockedOn===t&&(e.blockedOn=null,Eh||(Eh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bh)))}var Wh=null;function Vh(e){Wh!==e&&(Wh=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Wh===e&&(Wh=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],r=e[t+2];if("function"!==typeof a){if(null===Sh(a||n))continue;break}var s=Qe(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:r,method:n.method,action:a},a,r))}}))}function Hh(e){function t(t){return Uh(t,e)}null!==Th&&Uh(Th,e),null!==Ih&&Uh(Ih,e),null!==Ah&&Uh(Ah,e),_h.forEach(t),Oh.forEach(t);for(var n=0;n<Rh.length;n++){var a=Rh[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Rh.length&&null===(n=Rh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Rh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var r=n[a],s=n[a+1],i=r[We]||null;if("function"===typeof s)i||Vh(n);else if(i){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,i=s[We]||null)o=i.formAction;else if(null!==Sh(r))continue}else o=i.action;"function"===typeof o?n[a+1]=o:(n.splice(a,3),a-=3),Vh(n)}}}function Gh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var a=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function qh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));fh(t.current,qc(),e,t,null,null)},Kh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),Zc(),t[Ve]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rh.length&&0!==t&&t<Rh[n].priority;n++);Rh.splice(n,0,e),0===n&&Fh(e)}};var Xh=r.version;if("19.2.3"!==Xh)throw Error(i(527,Xh,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(a=r.return)){n=a;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return d(r),e;if(s===a)return d(r),t;s=s.sibling}throw Error(i(188))}if(n.return!==a.return)n=r,a=s;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,a=s;break}if(c===a){o=!0,a=r,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,a=r;break}if(c===a){o=!0,a=s,n=r;break}c=c.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==a)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{xe=$h.inject(Yh),ve=$h}catch(Jh){}}t.createRoot=function(e,t){if(!o(e))throw Error(i(299));var n=!1,a="",r=jo,s=So,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,a,null,r,s,l,Gh),e[Ve]=t.current,Zu(e),new qh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(i(299));var a=!1,r="",s=jo,l=So,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,a,r,u,s,l,c,Gh)).context=ph(null),n=t.current,(r=vs(a=De(a=qc()))).callback=null,ys(n,r,a),n=a,t.current.lanes=n,Oe(t,n),Mu(t),e[Ve]=t.current,Zu(e),new Kh(t)},t.version="19.2.3"},7043(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(2777),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!a.isSymbol(e))||("string"===typeof e&&(s.test(e)||!r.test(e))||null!=t&&Object.hasOwn(t,e)))}},7066(e,t,n){var a;!function(e,r){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=o:n.amdD&&n.amdO?void 0===(a=function(){return o}.call(t,n,t,r))||(r.exports=a):this.xor128=o}(0,e=n.nmd(e),n.amdD)},7231(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(3799),r=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&a.isIterateeCall(e,t,n)&&(t=n=void 0),e=r.toFinite(e),void 0===t?(t=e,e=0):t=r.toFinite(t),n=void 0===n?e<t?1:-1:r.toFinite(n);const s=Math.max(Math.ceil((t-e)/(n||1)),0),i=new Array(s);for(let a=0;a<s;a++)i[a]=e,e+=n;return i}},7237(e,t,n){"use strict";n(8365)},7260(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7283(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function a(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,a,s,i){if("function"!==typeof a)throw new TypeError("The listener must be a function");var o=new r(a,s||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function o(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,a,r=[];if(0===this._eventsCount)return r;for(a in e=this._events)t.call(e,a)&&r.push(n?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var r=0,s=a.length,i=new Array(s);r<s;r++)i[r]=a[r].fn;return i},o.prototype.listenerCount=function(e){var t=n?n+e:e,a=this._events[t];return a?a.fn?1:a.length:0},o.prototype.emit=function(e,t,a,r,s,i){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,a),!0;case 4:return u.fn.call(u.context,t,a,r),!0;case 5:return u.fn.call(u.context,t,a,r,s),!0;case 6:return u.fn.call(u.context,t,a,r,s,i),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,a);break;case 4:u[c].fn.call(u[c].context,t,a,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,a,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||a&&o.context!==a||i(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||r&&!o[l].once||a&&o[l].context!==a)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},7312(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],a=Math.floor(t),r=(e,t)=>{for(let s=0;s<e.length;s++){const i=e[s];Array.isArray(i)&&t<a?r(i,t+1):n.push(i)}};return r(e,0),n}},7330(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(9323);t.property=function(e){return function(t){return a.get(t,e)}}},7353(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=a;var r={},s={};function i(e,t){var n,a,i;return t?(i=0<=(e>>>=0)&&e<256)&&(a=s[e])?a:(n=l(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(n=l(e,e<0?-1:0,!1),i&&(r[e]=n),n)}function o(e,t){if(isNaN(e))return t?x:g;if(t){if(e<0)return x;if(e>=p)return k}else{if(e<=-f)return N;if(e+1>=f)return w}return e<0?o(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,a){return new n(e,t,a)}n.fromInt=i,n.fromNumber=o,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var a;if((a=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===a)return u(e.substring(1),t,n).neg();for(var r=o(c(n,8)),s=g,i=0;i<e.length;i+=8){var l=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+l),n);if(l<8){var h=o(c(n,l));s=s.mul(h).add(o(d))}else s=(s=s.mul(r)).add(o(d))}return s.unsigned=t,s}function d(e,t){return"number"===typeof e?o(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=i(1<<24),g=i(0);n.ZERO=g;var x=i(0,!0);n.UZERO=x;var v=i(1);n.ONE=v;var y=i(1,!0);n.UONE=y;var b=i(-1);n.NEG_ONE=b;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var N=l(0,-2147483648,!1);n.MIN_VALUE=N;var j=n.prototype;j.toInt=function(){return this.unsigned?this.low>>>0:this.low},j.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},j.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(N)){var t=o(e),n=this.div(t),a=n.mul(t).sub(this);return n.toString(e)+a.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=o(c(e,6),this.unsigned),s=this,i="";;){var l=s.div(r),u=(s.sub(l.mul(r)).toInt()>>>0).toString(e);if((s=l).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},j.getHighBits=function(){return this.high},j.getHighBitsUnsigned=function(){return this.high>>>0},j.getLowBits=function(){return this.low},j.getLowBitsUnsigned=function(){return this.low>>>0},j.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},j.isZero=function(){return 0===this.high&&0===this.low},j.eqz=j.isZero,j.isNegative=function(){return!this.unsigned&&this.high<0},j.isPositive=function(){return this.unsigned||this.high>=0},j.isOdd=function(){return 1===(1&this.low)},j.isEven=function(){return 0===(1&this.low)},j.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},j.eq=j.equals,j.notEquals=function(e){return!this.eq(e)},j.neq=j.notEquals,j.ne=j.notEquals,j.lessThan=function(e){return this.comp(e)<0},j.lt=j.lessThan,j.lessThanOrEqual=function(e){return this.comp(e)<=0},j.lte=j.lessThanOrEqual,j.le=j.lessThanOrEqual,j.greaterThan=function(e){return this.comp(e)>0},j.gt=j.greaterThan,j.greaterThanOrEqual=function(e){return this.comp(e)>=0},j.gte=j.greaterThanOrEqual,j.ge=j.greaterThanOrEqual,j.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},j.comp=j.compare,j.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(v)},j.neg=j.negate,j.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,s=65535&this.low,i=e.high>>>16,o=65535&e.high,c=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=s+(65535&e.low))>>>16,h+=(p+=r+c)>>>16,u+=(h+=n+o)>>>16,u+=t+i,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},j.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},j.sub=j.subtract,j.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(N))return e.isOdd()?N:g;if(e.eq(N))return this.isOdd()?N:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,s=this.low>>>16,i=65535&this.low,c=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,x=0,v=0,y=0;return v+=(y+=i*p)>>>16,x+=(v+=s*p)>>>16,v&=65535,x+=(v+=i*h)>>>16,f+=(x+=r*p)>>>16,x&=65535,f+=(x+=s*h)>>>16,x&=65535,f+=(x+=i*u)>>>16,f+=n*p+r*h+s*u+i*c,l((v&=65535)<<16|(y&=65535),(f&=65535)<<16|(x&=65535),this.unsigned)},j.mul=j.multiply,j.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,r,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?x:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return x;if(e.gt(this.shru(1)))return y;s=x}else{if(this.eq(N))return e.eq(v)||e.eq(b)?N:e.eq(N)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:b:(r=this.sub(e.mul(n)),s=n.add(r.div(e)));if(e.eq(N))return this.unsigned?x:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=g}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:c(2,i-48),h=o(n),p=h.mul(e);p.isNegative()||p.gt(r);)p=(h=o(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=v),s=s.add(h),r=r.sub(p)}return s},j.div=j.divide,j.modulo=function(e){return a(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},j.mod=j.modulo,j.rem=j.modulo,j.not=function(){return l(~this.low,~this.high,this.unsigned)},j.and=function(e){return a(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},j.or=function(e){return a(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},j.xor=function(e){return a(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},j.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},j.shl=j.shiftLeft,j.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},j.shr=j.shiftRight,j.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},j.shru=j.shiftRightUnsigned,j.shr_u=j.shiftRightUnsigned,j.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},j.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},j.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},j.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},j.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,a){return a?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7359(e,t,n){var a;!function(e,r){function s(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var a=.02519603282416938*(e+=t.charCodeAt(n));a-=e=a>>>0,e=(a*=e)>>>0,e+=4294967296*(a-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new s(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=o:n.amdD&&n.amdO?void 0===(a=function(){return o}.call(t,n,t,r))||(r.exports=a):this.alea=o}(0,e=n.nmd(e),n.amdD)},7599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7770(e,t,n){e.exports=n(9323).get},7820(e,t,n){e.exports=n(5414).throttle},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8108(){},8210(e,t,n){var a;!function(){"use strict";var r,s=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=d(1286742750677284.5),x={};function v(e,t){var n,a,r,s,i,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?T(t,h):t;if(c=e.d,u=t.d,i=e.e,r=t.e,c=c.slice(),s=i-r){for(s<0?(a=c,s=-s,l=u.length):(a=u,r=i,l=c.length),s>(l=(i=Math.ceil(h/7))>l?i+1:l+1)&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for((l=c.length)-(s=u.length)<0&&(s=l,a=u,u=c,c=a),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/f|0,c[s]%=f;for(n&&(c.unshift(n),++r),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=r,o?T(t,h):t}function y(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,a,r=e.length-1,s="",i=e[0];if(r>0){for(s+=i,t=1;t<r;t++)(n=7-(a=e[t]+"").length)&&(s+=S(n)),s+=a;(n=7-(a=(i=e[t])+"").length)&&(s+=S(n))}else if(0===i)return"0";for(;i%10===0;)i/=10;return s+i}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},x.comparedTo=x.cmp=function(e){var t,n,a,r,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,n=(a=s.d.length)<(r=e.d.length)?a:r;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return a===r?0:a>r^s.s<0?1:-1},x.decimalPlaces=x.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},x.dividedBy=x.div=function(e){return w(this,new this.constructor(e))},x.dividedToIntegerBy=x.idiv=function(e){var t=this.constructor;return T(w(this,new t(e),0,1),t.precision)},x.equals=x.eq=function(e){return!this.cmp(e)},x.exponent=function(){return N(this)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){return this.cmp(e)>=0},x.isInteger=x.isint=function(){return this.e>this.d.length-2},x.isNegative=x.isneg=function(){return this.s<0},x.isPositive=x.ispos=function(){return this.s>0},x.isZero=function(){return 0===this.s},x.lessThan=x.lt=function(e){return this.cmp(e)<0},x.lessThanOrEqualTo=x.lte=function(e){return this.cmp(e)<1},x.logarithm=x.log=function(e){var t,n=this,a=n.constructor,s=a.precision,i=s+5;if(void 0===e)e=new a(10);else if((e=new a(e)).s<1||e.eq(r))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(r)?new a(0):(o=!1,t=w(C(n,i),C(e,i),i),o=!0,T(t,s))},x.minus=x.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?I(t,e):v(t,(e.s=-e.s,e))},x.modulo=x.mod=function(e){var t,n=this,a=n.constructor,r=a.precision;if(!(e=new a(e)).s)throw Error(l+"NaN");return n.s?(o=!1,t=w(n,e,0,1).times(e),o=!0,n.minus(t)):T(new a(n),r)},x.naturalExponential=x.exp=function(){return k(this)},x.naturalLogarithm=x.ln=function(){return C(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},x.plus=x.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):I(t,(e.s=-e.s,e))},x.precision=x.sd=function(e){var t,n,a,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(r)+1,n=7*(a=r.d.length-1)+1,a=r.d[a]){for(;a%10==0;a/=10)n--;for(a=r.d[0];a>=10;a/=10)n++}return e&&t>n?t:n},x.squareRoot=x.sqrt=function(){var e,t,n,a,r,s,i,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(r=Math.sqrt(+c))||r==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),a=new u(t=r==1/0?"5e"+e:(t=r.toExponential()).slice(0,t.indexOf("e")+1)+e)):a=new u(r.toString()),r=i=(n=u.precision)+3;;)if(a=(s=a).plus(w(c,s,i+2)).times(.5),b(s.d).slice(0,i)===(t=b(a.d)).slice(0,i)){if(t=t.slice(i-3,i+1),r==i&&"4999"==t){if(T(s,n+1,0),s.times(s).eq(c)){a=s;break}}else if("9999"!=t)break;i+=4}return o=!0,T(a,n)},x.times=x.mul=function(e){var t,n,a,r,s,i,l,c,u,d=this,h=d.constructor,p=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=p.length)<(u=m.length)&&(s=p,p=m,m=s,i=c,c=u,u=i),s=[],a=i=c+u;a--;)s.push(0);for(a=u;--a>=0;){for(t=0,r=c+a;r>a;)l=s[r]+m[a]*p[r-a-1]+t,s[r--]=l%f|0,t=l/f|0;s[r]=(s[r]+t)%f|0}for(;!s[--i];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,o?T(e,h.precision):e},x.toDecimalPlaces=x.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),void 0===e?n:(y(e,0,s),void 0===t?t=a.rounding:y(t,0,8),T(n,e+N(n)+1,t))},x.toExponential=function(e,t){var n,a=this,r=a.constructor;return void 0===e?n=A(a,!0):(y(e,0,s),void 0===t?t=r.rounding:y(t,0,8),n=A(a=T(new r(a),e+1,t),!0,e+1)),n},x.toFixed=function(e,t){var n,a,r=this,i=r.constructor;return void 0===e?A(r):(y(e,0,s),void 0===t?t=i.rounding:y(t,0,8),n=A((a=T(new i(r),e+N(r)+1,t)).abs(),!1,e+N(a)+1),r.isneg()&&!r.isZero()?"-"+n:n)},x.toInteger=x.toint=function(){var e=this,t=e.constructor;return T(new t(e),N(e)+1,t.rounding)},x.toNumber=function(){return+this},x.toPower=x.pow=function(e){var t,n,a,s,i,c,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(r);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(r))return u;if(a=h.precision,e.eq(r))return T(u,a);if(c=(t=e.e)>=(n=e.d.length-1),i=u.s,c){if((n=p<0?-p:p)<=m){for(s=new h(r),t=Math.ceil(a/7+4),o=!1;n%2&&_((s=s.times(u)).d,t),0!==(n=d(n/2));)_((u=u.times(u)).d,t);return o=!0,e.s<0?new h(r).div(s):T(s,a)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,o=!1,s=e.times(C(u,a+12)),o=!0,(s=k(s)).s=i,s},x.toPrecision=function(e,t){var n,a,r=this,i=r.constructor;return void 0===e?a=A(r,(n=N(r))<=i.toExpNeg||n>=i.toExpPos):(y(e,1,s),void 0===t?t=i.rounding:y(t,0,8),a=A(r=T(new i(r),e,t),e<=(n=N(r))||n<=i.toExpNeg,e)),a},x.toSignificantDigits=x.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(y(e,1,s),void 0===t?t=n.rounding:y(t,0,8)),T(new n(this),e,t)},x.toString=x.valueOf=x.val=x.toJSON=function(){var e=this,t=N(e),n=e.constructor;return A(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,a=0,r=e.length;for(e=e.slice();r--;)n=e[r]*t+a,e[r]=n%f|0,a=n/f|0;return a&&e.unshift(a),e}function t(e,t,n,a){var r,s;if(n!=a)s=n>a?1:-1;else for(r=s=0;r<n;r++)if(e[r]!=t[r]){s=e[r]>t[r]?1:-1;break}return s}function n(e,t,n){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(a,r,s,i){var o,c,u,d,h,p,m,g,x,v,y,b,w,k,j,S,C,E,I=a.constructor,A=a.s==r.s?1:-1,_=a.d,O=r.d;if(!a.s)return new I(a);if(!r.s)throw Error(l+"Division by zero");for(c=a.e-r.e,C=O.length,j=_.length,g=(m=new I(A)).d=[],u=0;O[u]==(_[u]||0);)++u;if(O[u]>(_[u]||0)&&--c,(b=null==s?s=I.precision:i?s+(N(a)-N(r))+1:s)<0)return new I(0);if(b=b/7+2|0,u=0,1==C)for(d=0,O=O[0],b++;(u<j||d)&&b--;u++)w=d*f+(_[u]||0),g[u]=w/O|0,d=w%O|0;else{for((d=f/(O[0]+1)|0)>1&&(O=e(O,d),_=e(_,d),C=O.length,j=_.length),k=C,v=(x=_.slice(0,C)).length;v<C;)x[v++]=0;(E=O.slice()).unshift(0),S=O[0],O[1]>=f/2&&++S;do{d=0,(o=t(O,x,C,v))<0?(y=x[0],C!=v&&(y=y*f+(x[1]||0)),(d=y/S|0)>1?(d>=f&&(d=f-1),1==(o=t(h=e(O,d),x,p=h.length,v=x.length))&&(d--,n(h,C<p?E:O,p))):(0==d&&(o=d=1),h=O.slice()),(p=h.length)<v&&h.unshift(0),n(x,h,v),-1==o&&(o=t(O,x,C,v=x.length))<1&&(d++,n(x,C<v?E:O,v)),v=x.length):0===o&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[v++]=_[k]||0:(x=[_[k]],v=1)}while((k++<j||void 0!==x[0])&&b--)}return g[0]||g.shift(),m.e=c,T(m,i?s+N(m)+1:s)}}();function k(e,t){var n,a,s,i,l,c=0,d=0,p=e.constructor,f=p.precision;if(N(e)>16)throw Error(u+N(e));if(!e.s)return new p(r);for(null==t?(o=!1,l=f):l=t,i=new p(.03125);e.abs().gte(.1);)e=e.times(i),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=a=s=new p(r),p.precision=l;;){if(a=T(a.times(e),l),n=n.times(++c),b((i=s.plus(w(a,n,l))).d).slice(0,l)===b(s.d).slice(0,l)){for(;d--;)s=T(s.times(s),l);return p.precision=f,null==t?(o=!0,T(s,f)):s}s=i}}function N(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function j(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return T(new e(e.LN10),t)}function S(e){for(var t="";e--;)t+="0";return t}function C(e,t){var n,a,s,i,c,u,d,h,p,f=1,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(r))return new x(0);if(null==t?(o=!1,h=v):h=t,m.eq(10))return null==t&&(o=!0),j(x,h);if(h+=10,x.precision=h,a=(n=b(g)).charAt(0),i=N(m),!(Math.abs(i)<15e14))return d=j(x,h+2,v).times(i+""),m=C(new x(a+"."+n.slice(1)),h-10).plus(d),x.precision=v,null==t?(o=!0,T(m,v)):m;for(;a<7&&1!=a||1==a&&n.charAt(1)>3;)a=(n=b((m=m.times(e)).d)).charAt(0),f++;for(i=N(m),a>1?(m=new x("0."+n),i++):m=new x(a+"."+n.slice(1)),u=c=m=w(m.minus(r),m.plus(r),h),p=T(m.times(m),h),s=3;;){if(c=T(c.times(p),h),b((d=u.plus(w(c,new x(s),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==i&&(u=u.plus(j(x,h+2,v).times(i+""))),u=w(u,new x(f),h),x.precision=v,null==t?(o=!0,T(u,v)):u;u=d,s+=2}}function E(e,t){var n,a,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;48===t.charCodeAt(a);)++a;for(r=t.length;48===t.charCodeAt(r-1);)--r;if(t=t.slice(a,r)){if(r-=a,n=n-a-1,e.e=d(n/7),e.d=[],a=(n+1)%7,n<0&&(a+=7),a<r){for(a&&e.d.push(+t.slice(0,a)),r-=7;a<r;)e.d.push(+t.slice(a,a+=7));a=7-(t=t.slice(a)).length}else a-=r;for(;a--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function T(e,t,n){var a,r,s,i,l,c,p,m,x=e.d;for(i=1,s=x[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,r=t,p=x[m=0];else{if((m=Math.ceil((a+1)/7))>=(s=x.length))return e;for(p=s=x[m],i=1;s>=10;s/=10)i++;r=(a%=7)-7+i}if(void 0!==n&&(l=p/(s=h(10,i-r-1))%10|0,c=t<0||void 0!==x[m+1]||p%s,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(a>0?r>0?p/h(10,i-r):0:x[m-1])%10&1||n==(e.s<0?8:7))),t<1||!x[0])return c?(s=N(e),x.length=1,t=t-s-1,x[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==a?(x.length=m,s=1,m--):(x.length=m+1,s=h(10,7-a),x[m]=r>0?(p/h(10,i-r)%h(10,r)|0)*s:0),c)for(;;){if(0==m){(x[0]+=s)==f&&(x[0]=1,++e.e);break}if(x[m]+=s,x[m]!=f)break;x[m--]=0,s=1}for(a=x.length;0===x[--a];)x.pop();if(o&&(e.e>g||e.e<-g))throw Error(u+N(e));return e}function I(e,t){var n,a,r,s,i,l,c,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),o?T(t,m):t;if(c=e.d,h=t.d,a=t.e,u=e.e,c=c.slice(),i=u-a){for((d=i<0)?(n=c,i=-i,l=h.length):(n=h,a=u,l=c.length),i>(r=Math.max(Math.ceil(m/7),l)+2)&&(i=r,n.length=1),n.reverse(),r=i;r--;)n.push(0);n.reverse()}else{for((d=(r=c.length)<(l=h.length))&&(l=r),r=0;r<l;r++)if(c[r]!=h[r]){d=c[r]<h[r];break}i=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,r=h.length-l;r>0;--r)c[l++]=0;for(r=h.length;r>i;){if(c[--r]<h[r]){for(s=r;s&&0===c[--s];)c[s]=f-1;--c[s],c[r]+=f}c[r]-=h[r]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--a;return c[0]?(t.d=c,t.e=a,o?T(t,m):t):new p(0)}function A(e,t,n){var a,r=N(e),s=b(e.d),i=s.length;return t?(n&&(a=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+S(a):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+S(-r-1)+s,n&&(a=n-i)>0&&(s+=S(a))):r>=i?(s+=S(r+1-i),n&&(a=n-r-1)>0&&(s=s+"."+S(a))):((a=r+1)<i&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-i)>0&&(r+1===i&&(s+="."),s+=S(a))),e.s<0?"-"+s:s}function _(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,a,r=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if(void 0!==(a=e[n=r[t]])){if(!(d(a)===a&&a>=r[t+1]&&a<=r[t+2]))throw Error(c+n+": "+a);this[n]=a}if(void 0!==(a=e[n="LN10"])){if(a!=Math.LN10)throw Error(c+n+": "+a);this[n]=new this(a)}return this}i=function e(t){var n,a,r;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):E(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);E(t,e)}if(s.prototype=x,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=O,void 0===t&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<r.length;)t.hasOwnProperty(a=r[n++])||(t[a]=this[a]);return s.config(t),s}(i),i.default=i.Decimal=i,r=new i(1),void 0===(a=function(){return i}.call(t,n,t,e))||(e.exports=a)}()},8268(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(2132);t.isMatch=function(e,t){return a.isMatchWith(e,t,()=>{})}},8346(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365(e,t,n){"use strict";var a=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=a.useSyncExternalStore,i=a.useRef,o=a.useEffect,l=a.useMemo,c=a.useDebugValue},8396(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(5508);t.cloneDeep=function(e){return a.cloneDeepWith(e)}},8420(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8429(e,t,n){var a=n(8498).default;e.exports=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8443(e,t,n){"use strict";e.exports=n(9717)},8498(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8590(){},8845(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(8268),r=n(3272),s=n(8396),i=n(9323),o=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=r.toKey(e)}return t=s.cloneDeep(t),function(n){const r=i.get(n,e);return void 0===r?o.has(n,e):void 0===t?void 0===r:a.isMatch(r,t)}}},8853(e,t,n){"use strict";e.exports=n(5896)},9016(e,t,n){var a;!function(e,r){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=o:n.amdD&&n.amdO?void 0===(a=function(){return o}.call(t,n,t,r))||(r.exports=a):this.xorwow=o}(0,e=n.nmd(e),n.amdD)},9323(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(7260),r=n(2489),s=n(3272),i=n(1444);t.get=function e(t,n,o){if(null==t)return o;switch(typeof n){case"string":{if(a.isUnsafeProperty(n))return o;const s=t[n];return void 0===s?r.isDeepKey(n)?e(t,i.toPath(n),o):o:s}case"number":case"symbol":{"number"===typeof n&&(n=s.toKey(n));const e=t[n];return void 0===e?o:e}default:{var l;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let r=e;for(let s=0;s<t.length;s++){if(null==r)return n;if(a.isUnsafeProperty(t[s]))return n;r=r[t[s]]}if(void 0===r)return n;return r}(t,n,o);if(n=Object.is(null===(l=n)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(n),a.isUnsafeProperty(n))return o;const e=t[n];return void 0===e?o:e}}}},9397(e,t,n){e.exports=n(2682).isPlainObject},9461(e,t,n){"use strict";e.exports=n(2330)},9538(e,t,n){var a;!function(e,r){function s(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=o:n.amdD&&n.amdO?void 0===(a=function(){return o}.call(t,n,t,r))||(r.exports=a):this.xorshift7=o}(0,e=n.nmd(e),n.amdD)},9599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(6392),r=n(8346),s=n(1203);t.last=function(e){if(s.isArrayLike(e))return a.last(r.toArray(e))}},9709(e,t){"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,a)=>{if(e!==t){const r=n(e),s=n(t);if(r===s&&0===r){if(e<t)return"desc"===a?1:-1;if(e>t)return"desc"===a?-1:1}return"desc"===a?s-r:r-s}return 0}},9717(e,t,n){"use strict";var a=n(5043),r=n(9461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useSyncExternalStore,o=a.useRef,l=a.useEffect,c=a.useMemo,u=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,i=e,e=a(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var n=a(e);return void 0!==r&&r(t,n)?(i=e,t):(i=e,o=n)}var i,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,a,r]);var p=i(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),u(p),p}},9859(e,t,n){e.exports=n(7231).range},9921(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&a;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>a[e]);return i.default=()=>a,n.d(s,i),s}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{87:"2b076286",943:"65510789"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(a,r,s,i)=>{if(e[a])e[a].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=a),e[a]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var s=new Promise((n,a)=>r=e[t]=[n,a]);a.push(r[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,r[1](o)}},"chunk-"+t,t)}};var t=(t,a)=>{var r,s,[i,o,l]=a,c=0;if(i.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(a);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=self.webpackChunkfrontend=self.webpackChunkfrontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>vd,hasStandardBrowserEnv:()=>bd,hasStandardBrowserWebWorkerEnv:()=>wd,navigator:()=>yd,origin:()=>kd});var t={};n.r(t),n.d(t,{assertParamsValid:()=>rS,computeFlatOffset:()=>xS,computeOutShape:()=>iS,getNormalizedAxes:()=>uS,isSliceContinous:()=>gS,maskToAxes:()=>sS,parseSliceParams:()=>vS,sliceInfo:()=>yS,startForAxis:()=>fS,startIndicesWithElidedDims:()=>dS,stopForAxis:()=>mS,stopIndicesWithElidedDims:()=>hS,stridesForAxis:()=>pS,stridesWithElidedDims:()=>oS});var a={};n.r(a),n.d(a,{collectGatherOpShapeInfo:()=>FI,computeOutShape:()=>DI,segOpComputeOptimalWindowSize:()=>MI});var r={};n.r(r),n.d(r,{ERF_A1:()=>ZT,ERF_A2:()=>eI,ERF_A3:()=>tI,ERF_A4:()=>nI,ERF_A5:()=>aI,ERF_P:()=>JT,PARALLELIZE_THRESHOLD:()=>LT,RowPartitionType:()=>RT,SELU_SCALE:()=>QT,SELU_SCALEALPHA:()=>$T,applyActivation:()=>DE,assertAndGetBroadcastShape:()=>Uj,assertAxesAreInnerMostDims:()=>IC,assertParamsConsistent:()=>_T,assignToTypedArray:()=>cI,axesAreInnerMostDims:()=>SC,calculateShapes:()=>YT,checkEinsumDimSizes:()=>vI,checkPadOnDimRoundingMode:()=>LS,combineLocations:()=>CC,combineRaggedTensorToTensorShapes:()=>PT,complexWithEvenIndex:()=>iI,complexWithOddIndex:()=>oI,computeConv2DInfo:()=>ES,computeConv3DInfo:()=>TS,computeDefaultPad:()=>IS,computeDilation2DInfo:()=>jS,computeOptimalWindowSize:()=>zT,computeOutAndReduceShapes:()=>EC,computeOutShape:()=>OT,computePool2DInfo:()=>SS,computePool3DInfo:()=>CS,convertConv2DDataFormat:()=>FS,decodeEinsumEquation:()=>gI,eitherStridesOrDilationsAreOne:()=>MS,expandShapeToKeepDim:()=>TC,exponent:()=>dI,exponents:()=>uI,fromStringArrayToUint8:()=>zI,fromUint8ToStringArray:()=>LI,getAxesPermutation:()=>AC,getBroadcastDims:()=>zj,getComplexWithIndex:()=>lI,getEinsumComputePath:()=>yI,getEinsumPermutation:()=>xI,getFusedBiasGradient:()=>ME,getFusedDyActivation:()=>PE,getImageCenter:()=>BT,getInnerMostAxes:()=>OC,getPermuted:()=>WT,getRaggedRank:()=>DT,getReductionAxes:()=>Bj,getReshaped:()=>UT,getReshapedPermuted:()=>VT,getRowPartitionTypesHelper:()=>MT,getSliceBeginCoords:()=>HT,getSliceSize:()=>GT,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>NI,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>jI,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>SI,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>TI,getSparseReshapeInputOutputMismatchErrorMessage:()=>AI,getSparseReshapeInputOutputMultipleErrorMessage:()=>II,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>CI,getSparseReshapeNegativeOutputDimErrorMessage:()=>EI,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>PI,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>_I,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>OI,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>RI,getUndoAxesPermutation:()=>_C,isIdentityPermutation:()=>bI,log:()=>Zw,mergeRealAndImagArrays:()=>rI,prepareAndValidate:()=>qT,prepareSplitSize:()=>kI,segment_util:()=>a,shouldFuse:()=>FE,slice_util:()=>t,splitRealAndImagArrays:()=>sI,stridesOrDilationsArePositive:()=>DS,tupleValuesAreOne:()=>PS,upcastType:()=>Qk,validateDefaultValueShape:()=>FT,validateInput:()=>XT,validateUpdateShape:()=>KT,warn:()=>Jw});var s={};n.r(s),n.d(s,{mx:()=>_z,XI:()=>NB,Nk:()=>jB,f6:()=>CB,ct:()=>Cz,YG:()=>IB,hH:()=>MB,z3:()=>yU,sG:()=>AU,uM:()=>MU,vS:()=>JU,qB:()=>iW,GG:()=>lW,lg:()=>pW,rq:()=>uW,cu:()=>CW,WR:()=>NW,GE:()=>IW,px:()=>_W,jC:()=>qW,He:()=>YW,hE:()=>sV,BF:()=>dU,Dk:()=>mV,cl:()=>NV,_B:()=>DV,ub:()=>UV,_f:()=>HV,Ku:()=>$V,qy:()=>JV,Zy:()=>uH,bu:()=>pH,zv:()=>xz,dH:()=>Bz,HS:()=>yB,yH:()=>RH,l3:()=>MH,z9:()=>FH,x6:()=>WH,_m:()=>YH,eW:()=>eG,GK:()=>aG,SP:()=>iG,yr:()=>lG,dl:()=>UU,Dw:()=>fG,xT:()=>vG,_X:()=>Kz,wz:()=>SG});var i={};n.r(i),n.d(i,{scaleBand:()=>O8,scaleDiverging:()=>Cne,scaleDivergingLog:()=>Ene,scaleDivergingPow:()=>Ine,scaleDivergingSqrt:()=>Ane,scaleDivergingSymlog:()=>Tne,scaleIdentity:()=>b9,scaleImplicit:()=>A8,scaleLinear:()=>y9,scaleLog:()=>I9,scaleOrdinal:()=>_8,scalePoint:()=>P8,scalePow:()=>L9,scaleQuantile:()=>$9,scaleQuantize:()=>Q9,scaleRadial:()=>U9,scaleSequential:()=>yne,scaleSequentialLog:()=>bne,scaleSequentialPow:()=>kne,scaleSequentialQuantile:()=>jne,scaleSequentialSqrt:()=>Nne,scaleSequentialSymlog:()=>wne,scaleSqrt:()=>z9,scaleSymlog:()=>R9,scaleThreshold:()=>J9,scaleTime:()=>mne,scaleUtc:()=>gne,tickFormat:()=>x9});var o=n(5043),l=n.t(o,2),c=n(4391);function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function p(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const g=["sri"],x=["page"],v=["page","matches"],y=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],b=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],w=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var k="popstate";function N(){return A(function(e,t){let{pathname:n,search:a,hash:r}=e.location;return E("",{pathname:n,search:a,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:T(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function j(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function S(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function C(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return m(m({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?I(t):t),{},{state:n,key:t&&t.key||a||Math.random().toString(36).substring(2,10)})}function T(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function I(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function A(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:s=!1}=a,i=r.history,o="POP",l=null,c=u();function u(){return(i.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function h(e){return _(e)}null==c&&(c=0,i.replaceState(m(m({},i.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(r,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(k,d),l=e,()=>{r.removeEventListener(k,d),l=null}},createHref:e=>t(r,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let a=E(p.location,e,t);n&&n(a,e),c=u()+1;let d=C(a,c),h=p.createHref(a);try{i.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(h)}s&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let a=E(p.location,e,t);n&&n(a,e),c=u();let r=C(a,c),d=p.createHref(a);i.replaceState(r,"",d),s&&l&&l({action:o,location:p.location,delta:0})},go:e=>i.go(e)};return p}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),j(n,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:T(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=n+a),new URL(a,n)}new WeakMap;function O(e,t){return R(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function R(e,t,n,a){let r=X(("string"===typeof t?I(t):t).pathname||"/",n);if(null==r)return null;let s=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=K(r);i=H(s[o],e,a)}return i}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(a)&&i)return;j(l.relativePath.startsWith(a),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(a,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(a.length)}let c=ne([a,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(j(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:V(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let a of M(e.path))s(e,t,!0,a);else s(e,t)}),t}function M(e){let t=e.split("/");if(0===t.length)return[];let[n,...a]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===a.length)return r?[s,""]:[s];let i=M(a.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),r&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var D=/^:[\w-]+$/,F=3,L=2,z=1,B=10,U=-2,W=e=>"*"===e;function V(e,t){let n=e.split("/"),a=n.length;return n.some(W)&&(a+=U),t&&(a+=L),n.filter(e=>!W(e)).reduce((e,t)=>e+(D.test(t)?F:""===t?z:B),a)}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,r={},s="/",i=[];for(let o=0;o<a.length;++o){let e=a[o],l=o===a.length-1,c="/"===s?t:t.slice(s.length)||"/",u=G({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!a[a.length-1].route.index&&(u=G({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),i.push({params:r,pathname:ne([s,u.pathname]),pathnameBase:ae(ne([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=ne([s,u.pathnameBase]))}return i}function G(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=q(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],i=s.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=a.reduce((e,t,n)=>{let{paramName:a,isOptional:r}=t;if("*"===a){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[a]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];S("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(a.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),a]}function K(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return S(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&"/"!==a?null:e.slice(n)||"/"}var Y=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$=e=>Y.test(e);function Q(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function J(e,t,n,a){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(a),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function ee(e){let t=Z(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function te(e,t,n){let a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=I(e):(a=m({},e),j(!a.pathname||!a.pathname.includes("?"),J("?","pathname","search",a)),j(!a.pathname||!a.pathname.includes("#"),J("#","pathname","hash",a)),j(!a.search||!a.search.includes("#"),J("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:a,search:r="",hash:s=""}="string"===typeof e?I(e):e;if(a)if($(a))t=a;else{if(a.includes("//")){let e=a;a=a.replace(/\/\/+/g,"/"),S(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(a))}t=a.startsWith("/")?Q(a.substring(1),"/"):Q(a,n)}else t=n;return{pathname:t,search:re(r),hash:se(s)}}(a,s),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ne=e=>e.join("/").replace(/\/\/+/g,"/"),ae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),re=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",se=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ie=class{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function le(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function ue(e,t){let n=e;if("string"!==typeof n||!Y.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,r=!1;if(ce)try{let e=new URL(window.location.href),a=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=X(a.pathname,t);a.origin===e.origin&&null!=s?n=s+a.search+a.hash:r=!0}catch(s){S(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:a,isExternal:r,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var de=["POST","PUT","PATCH","DELETE"],he=(new Set(de),["GET",...de]);new Set(he),Symbol("ResetLoaderData");var pe=o.createContext(null);pe.displayName="DataRouter";var fe=o.createContext(null);fe.displayName="DataRouterState";var me=o.createContext(!1);function ge(){return o.useContext(me)}var xe=o.createContext({isTransitioning:!1});xe.displayName="ViewTransition";var ve=o.createContext(new Map);ve.displayName="Fetchers";var ye=o.createContext(null);ye.displayName="Await";var be=o.createContext(null);be.displayName="Navigation";var we=o.createContext(null);we.displayName="Location";var ke=o.createContext({outlet:null,matches:[],isDataRoute:!1});ke.displayName="Route";var Ne=o.createContext(null);Ne.displayName="RouteError";var je="REACT_ROUTER_ERROR";function Se(){return null!=o.useContext(we)}function Ce(){return j(Se(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(we).location}var Ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Te(e){o.useContext(be).static||o.useLayoutEffect(e)}function Ie(){let{isDataRoute:e}=o.useContext(ke);return e?function(){let{router:e}=Be("useNavigate"),t=We("useNavigate"),n=o.useRef(!1);Te(()=>{n.current=!0});let a=o.useCallback(async function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(n.current,Ee),n.current&&("number"===typeof a?await e.navigate(a):await e.navigate(a,m({fromRouteId:t},r)))},[e,t]);return a}():function(){j(Se(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(pe),{basename:t,navigator:n}=o.useContext(be),{matches:a}=o.useContext(ke),{pathname:r}=Ce(),s=JSON.stringify(ee(a)),i=o.useRef(!1);Te(()=>{i.current=!0});let l=o.useCallback(function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(S(i.current,Ee),!i.current)return;if("number"===typeof a)return void n.go(a);let l=te(a,JSON.parse(s),r,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ne([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,s,r,e]);return l}()}o.createContext(null);function Ae(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=o.useContext(ke),{pathname:a}=Ce(),r=JSON.stringify(ee(n));return o.useMemo(()=>te(e,JSON.parse(r),a,"path"===t),[e,r,a,t])}function _e(e,t,n,a,r){j(Se(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=o.useContext(be),{matches:i}=o.useContext(ke),l=i[i.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Ge(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=Ce();if(t){var g;let e="string"===typeof t?I(t):t;j("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let x=p.pathname||"/",v=x;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=O(e,{pathname:v});S(h||null!=y,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),S(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let b=Le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([d,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:ne([d,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,n,a,r);return t&&b?o.createElement(we.Provider,{value:{location:m({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},b):b}function Oe(){let e=Ve(),t=oe(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:s},"ErrorBoundary")," or"," ",o.createElement("code",{style:s},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:r},n):null,i)}var Re=o.createElement(Oe,null),Pe=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(je,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ie(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?o.createElement(ke.Provider,{value:this.props.routeContext},o.createElement(Ne.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?o.createElement(De,{error:e},t):t}};Pe.contextType=me;var Me=new WeakMap;function De(e){let{children:t,error:n}=e,{basename:a}=o.useContext(be);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(je,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Me.get(n);if(t)throw t;let r=ue(e.location,a);if(ce&&!Me.get(n)){if(!r.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:e.replace}));throw Me.set(n,t),t}window.location.href=r.absoluteURL||r.to}return o.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(r.absoluteURL||r.to)})}}return t}function Fe(e){let{routeContext:t,match:n,children:a}=e,r=o.useContext(pe);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(ke.Provider,{value:t},a)}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=r.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));j(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let i=!1,l=-1;if(n)for(let o=0;o<r.length;o++){let e=r[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=o),e.route.id){let{loaderData:t,errors:a}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||s){i=!0,r=l>=0?r.slice(0,l+1):[r[0]];break}}}let c=n&&a?(e,t)=>{var r,s;a(e,{location:n.location,params:null!==(r=null===(s=n.matches)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.params)&&void 0!==r?r:{},unstable_pattern:le(n.matches),errorInfo:t})}:void 0;return r.reduceRight((e,a,u)=>{let d,h=!1,p=null,f=null;n&&(d=s&&a.route.id?s[a.route.id]:void 0,p=a.route.errorElement||Re,i&&(l<0&&0===u?(Ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):l===u&&(h=!0,f=a.route.hydrateFallbackElement||null)));let m=t.concat(r.slice(0,u+1)),g=()=>{let t;return t=d?p:h?f:a.route.Component?o.createElement(a.route.Component,null):a.route.element?a.route.element:e,o.createElement(Fe,{match:a,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===u)?o.createElement(Pe,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function ze(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Be(e){let t=o.useContext(pe);return j(t,ze(e)),t}function Ue(e){let t=o.useContext(fe);return j(t,ze(e)),t}function We(e){let t=function(e){let t=o.useContext(ke);return j(t,ze(e)),t}(e),n=t.matches[t.matches.length-1];return j(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ve(){var e;let t=o.useContext(Ne),n=Ue("useRouteError"),a=We("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[a]}var He={};function Ge(e,t,n){t||He[e]||(He[e]=!0,S(!1,n))}var qe={};function Ke(e,t){e||qe[t]||(qe[t]=!0,console.warn(t))}l.useOptimistic;o.memo(function(e){let{routes:t,future:n,state:a,onError:r}=e;return _e(t,void 0,a,r,n)});function Xe(e){j(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ye(e){let{basename:t="/",children:n=null,location:a,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:l}=e;j(!Se(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=o.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:l,future:{}}),[c,s,i,l]);"string"===typeof a&&(a=I(a));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:m="default"}=a,g=o.useMemo(()=>{let e=X(d,c);return null==e?null:{location:{pathname:e,search:h,hash:p,state:f,key:m},navigationType:r}},[c,d,h,p,f,m,r]);return S(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(p,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:o.createElement(be.Provider,{value:u},o.createElement(we.Provider,{children:n,value:g}))}function $e(e){let{children:t,location:n}=e;return _e(Qe(t),n)}o.Component;function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return o.Children.forEach(e,(e,a)=>{if(!o.isValidElement(e))return;let r=[...t,a];if(e.type===o.Fragment)return void n.push.apply(n,Qe(e.props.children,r));j(e.type===Xe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),j(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Qe(e.props.children,r)),n.push(s)}),n}var Je="get",Ze="application/x-www-form-urlencoded";function et(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var tt=null;var nt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function at(e){return null==e||nt.has(e)?e:(S(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ze,'"')),null)}function rt(e,t){let n,a,r,s,i;if(function(e){return et(e)&&"form"===e.tagName.toLowerCase()}(e)){let i=e.getAttribute("action");a=i?X(i,t):null,n=e.getAttribute("method")||Je,r=at(e.getAttribute("enctype"))||Ze,s=new FormData(e)}else if(function(e){return et(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return et(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(a=o?X(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Je,r=at(e.getAttribute("formenctype"))||at(i.getAttribute("enctype"))||Ze,s=new FormData(i,e),!function(){if(null===tt)try{new FormData(document.createElement("form"),0),tt=!1}catch(e){tt=!0}return tt}()){let{name:t,type:n,value:a}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,a)}}else{if(et(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Je,a=null,r=Ze,i=e}return s&&"text/plain"===r&&(i=s,s=void 0),{action:a,method:n.toLowerCase(),encType:r,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function st(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function it(e,t,n){let a="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===a.pathname?a.pathname="_root.".concat(n):t&&"/"===X(a.pathname,t)?a.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):a.pathname="".concat(a.pathname.replace(/\/$/,""),".").concat(n),a}async function ot(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lt(e){return null!=e&&"string"===typeof e.page}function ct(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ut(e,t,n,a,r,s){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var a;return n[t].pathname!==e.pathname||(null===(a=n[t].route.path)||void 0===a?void 0:a.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=a.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let a=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function dt(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let r=[a.module];return a.clientActionModule&&(r=r.concat(a.clientActionModule)),a.clientLoaderModule&&(r=r.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(r=r.concat(a.hydrateFallbackModule)),a.imports&&(r=r.concat(a.imports)),r}).flat(1),[...new Set(a)];var a}function ht(e,t){let n=new Set,a=new Set(t);return e.reduce((e,r)=>{if(t&&!lt(r)&&"script"===r.as&&r.href&&a.has(r.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let a of n)t[a]=e[a];return t}(r));return n.has(s)||(n.add(s),e.push({key:s,link:r})),e},[])}function pt(e,t){return"lazy"===e.mode&&!0===t}function ft(){let e=o.useContext(pe);return st(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function mt(){let e=o.useContext(fe);return st(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gt=o.createContext(void 0);function xt(){let e=o.useContext(gt);return st(e,"You must render this element inside a <HydratedRouter> element"),e}function vt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function yt(e,t,n){if(n&&!Nt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}gt.displayName="FrameworkContext";function bt(e){let{page:t}=e,n=u(e,x),{router:a}=ft(),r=o.useMemo(()=>O(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?o.createElement(kt,m({page:t,matches:r},n)):null}function wt(e){let{manifest:t,routeModules:n}=xt(),[a,r]=o.useState([]);return o.useEffect(()=>{let a=!1;return async function(e,t,n){let a=await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await ot(a,n);return e.links?e.links():[]}return[]}));return ht(a.flat(1).filter(ct).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?m(m({},e),{},{rel:"prefetch",as:"style"}):m(m({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{a||r(e)}),()=>{a=!0}},[e,t,n]),a}function kt(e){let{page:t,matches:n}=e,a=u(e,v),r=Ce(),{manifest:s,routeModules:i}=xt(),{basename:l}=ft(),{loaderData:c,matches:d}=mt(),h=o.useMemo(()=>ut(t,n,d,s,r,"data"),[t,n,d,s,r]),p=o.useMemo(()=>ut(t,n,d,s,r,"assets"),[t,n,d,s,r]),f=o.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let e=new Set,a=!1;if(n.forEach(t=>{var n;let r=s.routes[t.route.id];r&&r.hasLoader&&(!h.some(e=>e.route.id===t.route.id)&&t.route.id in c&&null!==(n=i[t.route.id])&&void 0!==n&&n.shouldRevalidate||r.hasClientLoader?a=!0:e.add(t.route.id))}),0===e.size)return[];let o=it(t,l,"data");return a&&e.size>0&&o.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[l,c,r,s,h,n,t,i]),g=o.useMemo(()=>dt(p,s),[p,s]),x=wt(p);return o.createElement(o.Fragment,null,f.map(e=>o.createElement("link",m({key:e,rel:"prefetch",as:"fetch",href:e},a))),g.map(e=>o.createElement("link",m({key:e,rel:"modulepreload",href:e},a))),x.map(e=>{let{key:t,link:n}=e;return o.createElement("link",m({key:t,nonce:a.nonce},n))}))}var Nt=!1;function jt(e){let{manifest:t,serverHandoffString:n,isSpaMode:a,renderMeta:r,routeDiscovery:s,ssr:i}=xt(),{router:l,static:c,staticContext:d}=ft(),{matches:h}=mt(),p=ge(),f=pt(s,i);r&&(r.didRenderScripts=!0);let x=yt(h,null,a);o.useEffect(()=>{0},[]);let v=o.useMemo(()=>{var a;if(p)return null;let r=d?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=c?"".concat(null!==t.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(x.map((e,n)=>{let a="route".concat(n),r=t.routes[e.route.id];st(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,u=[...s?[{module:s,varName:"".concat(a,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(a,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(a,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(a,"_HydrateFallback")}]:[],{module:c,varName:"".concat(a,"_main")}];return 1===u.length?"import * as ".concat(a," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(a," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,a=u(e,g),r=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(s.pop();s.length>0;)i.push("/".concat(s.join("/"))),s.pop();i.forEach(e=>{let n=O(t.routes,e,t.basename);n&&n.forEach(e=>r.add(e.route.id))});let o=[...r].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return m(m({},a),{},{routes:o,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(x.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return o.createElement(o.Fragment,null,o.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:r},type:void 0})),o.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),y=Nt||p?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(dt(x,t,{includeHydrateFallback:!0}))),b="object"===typeof t.sri?t.sri:{};return Ke(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Nt||p?null:o.createElement(o.Fragment,null,"object"===typeof t.sri?o.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,f?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:b[t.url],suppressHydrationWarning:!0}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:b[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:b[t],suppressHydrationWarning:!0})),v)}function St(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}o.Component;function Ct(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let a,r=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(oe(t))return o.createElement(Et,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return o.createElement(Et,{title:"Application Error!",isOutsideRemixApp:n},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),r)}function Et(e){var t;let{title:n,renderScripts:a,isOutsideRemixApp:r,children:s}=e,{routeModules:i}=xt();return null!==i.root&&void 0!==t&&t.Layout&&!r?s:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,n)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,a?o.createElement(jt,null):null)))}var Tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Tt&&(window.__reactRouterVersion="7.11.0")}catch(jEe){}function It(e){let{basename:t,children:n,unstable_useTransitions:a,window:r}=e,s=o.useRef();null==s.current&&(s.current=N({window:r,v5Compat:!0}));let i=s.current,[l,c]=o.useState({action:i.action,location:i.location}),u=o.useCallback(e=>{!1===a?c(e):o.startTransition(()=>c(e))},[a]);return o.useLayoutEffect(()=>i.listen(u),[i,u]),o.createElement(Ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:a})}var At=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_t=o.forwardRef(function(e,t){let{onClick:n,discover:a="render",prefetch:r="none",relative:s,reloadDocument:i,replace:l,state:c,target:d,to:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:g}=e,x=u(e,y),{basename:v,unstable_useTransitions:b}=o.useContext(be),w="string"===typeof h&&At.test(h),k=ue(h,v);h=k.to;let N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(Se(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=o.useContext(be),{hash:r,pathname:s,search:i}=Ae(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:ne([n,s])),a.createHref({pathname:l,search:i,hash:r})}(h,{relative:s}),[S,C,E]=function(e,t){let n=o.useContext(gt),[a,r]=o.useState(!1),[s,i]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=o.useRef(null);o.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(a){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[a]);let f=()=>{r(!0)},m=()=>{r(!1),i(!1)};return n?"intent"!==e?[s,p,{}]:[s,p,{onFocus:vt(l,f),onBlur:vt(c,m),onMouseEnter:vt(u,f),onMouseLeave:vt(d,m),onTouchStart:vt(h,f)}]:[!1,p,{}]}(r,x),I=function(e){let{target:t,replace:n,state:a,preventScrollReset:r,relative:s,viewTransition:i,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=Ie(),d=Ce(),h=Ae(e,{relative:s});return o.useCallback(p=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(p,t)){p.preventDefault();let t=void 0!==n?n:T(d)===T(h),f=()=>u(e,{replace:t,state:a,preventScrollReset:r,relative:s,viewTransition:i,unstable_defaultShouldRevalidate:l});c?o.startTransition(()=>f()):f()}},[d,u,h,n,a,t,e,r,s,i,l,c])}(h,{replace:l,state:c,target:d,preventScrollReset:p,relative:s,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:b});let A=o.createElement("a",m(m(m({},x),E),{},{href:k.absoluteURL||N,onClick:k.isExternal||i?n:function(e){n&&n(e),e.defaultPrevented||I(e)},ref:St(t,C),target:d,"data-discover":w||"render"!==a?void 0:"true"}));return S&&!w?o.createElement(o.Fragment,null,A,o.createElement(bt,{page:N})):A});_t.displayName="Link";var Ot=o.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:r="",end:s=!1,style:i,to:l,viewTransition:c,children:d}=e,h=u(e,b),p=Ae(l,{relative:h.relative}),f=Ce(),g=o.useContext(fe),{navigator:x,basename:v}=o.useContext(be),y=null!=g&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.useContext(xe);j(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Mt("useViewTransitionState"),r=Ae(e,{relative:t});if(!n.isTransitioning)return!1;let s=X(n.currentLocation.pathname,a)||n.currentLocation.pathname,i=X(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=G(r.pathname,i)||null!=G(r.pathname,s)}(p)&&!0===c,w=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,k=f.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(k=k.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&v&&(N=X(N,v)||N);const S="/"!==w&&w.endsWith("/")?w.length-1:w.length;let C,E=k===w||!s&&k.startsWith(w)&&"/"===k.charAt(S),T=null!=N&&(N===w||!s&&N.startsWith(w)&&"/"===N.charAt(w.length)),I={isActive:E,isPending:T,isTransitioning:y},A=E?n:void 0;C="function"===typeof r?r(I):[r,E?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof i?i(I):i;return o.createElement(_t,m(m({},h),{},{"aria-current":A,className:C,ref:t,style:_,to:l,viewTransition:c}),"function"===typeof d?d(I):d)});Ot.displayName="NavLink";var Rt=o.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:a,navigate:r,reloadDocument:s,replace:i,state:l,method:c=Je,action:d,onSubmit:h,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x}=e,v=u(e,w),{unstable_useTransitions:y}=o.useContext(be),b=Lt(),k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=o.useContext(be),a=o.useContext(ke);j(a,"useFormAction must be used inside a RouteContext");let[r]=a.matches.slice(-1),s=m({},Ae(e||".",{relative:t})),i=Ce();if(null==e){s.search=i.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!r.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:ne([n,s.pathname]));return T(s)}(d,{relative:p}),N="get"===c.toLowerCase()?"get":"post",S="string"===typeof d&&At.test(d);return o.createElement("form",m(m({ref:t,method:N,action:k,onSubmit:s?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||c,s=()=>b(t||e.currentTarget,{fetcherKey:a,method:n,navigate:r,replace:i,state:l,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x});y&&!1!==r?o.startTransition(()=>s()):s()}},v),{},{"data-discover":S||"render"!==n?void 0:"true"}))});function Pt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Mt(e){let t=o.useContext(pe);return j(t,Pt(e)),t}Rt.displayName="Form";var Dt=0,Ft=()=>"__".concat(String(++Dt),"__");function Lt(){let{router:e}=Mt("useSubmit"),{basename:t}=o.useContext(be),n=We("useRouteId"),a=e.fetch,r=e.navigate;return o.useCallback(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:o,encType:l,formData:c,body:u}=rt(e,t);if(!1===s.navigate){let e=s.fetcherKey||Ft();await a(e,n,s.action||i,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await r(s.action||i,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[a,r,t,n])}var zt=n(579);const Bt=(0,o.createContext)({});function Ut(e){const t=(0,o.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Wt="undefined"!==typeof window,Vt=Wt?o.useLayoutEffect:o.useEffect,Ht=(0,o.createContext)(null);function Gt(e){return"object"===typeof e&&null!==e}function qt(e){return Gt(e)&&"offsetHeight"in e}const Kt=(0,o.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Xt(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const a=t.map(t=>{const a=Xt(t,e);return n||"function"!==typeof a||(n=!0),a});if(n)return()=>{for(let e=0;e<a.length;e++){const n=a[e];"function"===typeof n?n():Xt(t[e],null)}}}}(...t),t)}class $t extends o.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=qt(e)&&e.offsetWidth||0,a=qt(e)&&e.offsetHeight||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left,r.bottom=a-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Qt(e){var t,n;let{children:a,isPresent:r,anchorX:s,anchorY:i,root:l}=e;const c=(0,o.useId)(),u=(0,o.useRef)(null),d=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,o.useContext)(Kt),p=null!==(t=null===(n=a.props)||void 0===n?void 0:n.ref)&&void 0!==t?t:null===a||void 0===a?void 0:a.ref,f=Yt(u,p);return(0,o.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:a,right:o,bottom:p}=d.current;if(r||!u.current||!e||!t)return;const f="left"===s?"left: ".concat(a):"right: ".concat(o),m="bottom"===i?"bottom: ".concat(p):"top: ".concat(n);u.current.dataset.motionPopId=c;const g=document.createElement("style");h&&(g.nonce=h);const x=null!==l&&void 0!==l?l:document.head;return x.appendChild(g),g.sheet&&g.sheet.insertRule('\n          [data-motion-pop-id="'.concat(c,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(f,"px !important;\n            ").concat(m,"px !important;\n          }\n        ")),()=>{x.contains(g)&&x.removeChild(g)}},[r]),(0,zt.jsx)($t,{isPresent:r,childRef:u,sizeRef:d,children:o.cloneElement(a,{ref:f})})}const Jt=e=>{let{children:t,initial:n,isPresent:a,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:l,anchorX:c,anchorY:u,root:d}=e;const h=Ut(Zt),p=(0,o.useId)();let f=!0,g=(0,o.useMemo)(()=>(f=!1,{id:p,initial:n,isPresent:a,custom:s,onExitComplete:e=>{h.set(e,!0);for(const t of h.values())if(!t)return;r&&r()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[a,h,r]);return i&&f&&(g=m({},g)),(0,o.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[a]),o.useEffect(()=>{!a&&!h.size&&r&&r()},[a]),"popLayout"===l&&(t=(0,zt.jsx)(Qt,{isPresent:a,anchorX:c,anchorY:u,root:d,children:t})),(0,zt.jsx)(Ht.Provider,{value:g,children:t})};function Zt(){return new Map}function en(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,o.useContext)(Ht);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:a,register:r}=t,s=(0,o.useId)();(0,o.useEffect)(()=>{if(e)return r(s)},[e]);const i=(0,o.useCallback)(()=>e&&a&&a(s),[s,a,e]);return!n&&a?[!1,i]:[!0]}const tn=e=>e.key||"";function nn(e){const t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}const an=e=>{let{children:t,custom:n,initial:a=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:l=!1,anchorX:c="left",anchorY:u="top",root:d}=e;const[h,p]=en(l),f=(0,o.useMemo)(()=>nn(t),[t]),m=l&&!h?[]:f.map(tn),g=(0,o.useRef)(!0),x=(0,o.useRef)(f),v=Ut(()=>new Map),y=(0,o.useRef)(new Set),[b,w]=(0,o.useState)(f),[k,N]=(0,o.useState)(f);Vt(()=>{g.current=!1,x.current=f;for(let e=0;e<k.length;e++){const t=tn(k[e]);m.includes(t)?(v.delete(t),y.current.delete(t)):!0!==v.get(t)&&v.set(t,!1)}},[k,m.length,m.join("-")]);const j=[];if(f!==b){let e=[...f];for(let t=0;t<k.length;t++){const n=k[t],a=tn(n);m.includes(a)||(e.splice(t,0,n),j.push(n))}return"wait"===i&&j.length&&(e=j),N(nn(e)),w(f),null}const{forceRender:S}=(0,o.useContext)(Bt);return(0,zt.jsx)(zt.Fragment,{children:k.map(e=>{const t=tn(e),o=!(l&&!h)&&(f===k||m.includes(t));return(0,zt.jsx)(Jt,{isPresent:o,initial:!(g.current&&!a)&&void 0,custom:n,presenceAffectsLayout:s,mode:i,root:d,onExitComplete:o?void 0:()=>{if(y.current.has(t))return;if(y.current.add(t),!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null===S||void 0===S||S(),N(x.current),l&&(null===p||void 0===p||p()),r&&r())},anchorX:c,anchorY:u,children:e},t)})})},rn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sn=(()=>new Set(rn))(),on=(e,t,n)=>n>t?t:n<e?e:n,ln={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},cn=m(m({},ln),{},{transform:e=>on(0,1,e)}),un=m(m({},ln),{},{default:1}),dn=e=>Math.round(1e5*e)/1e5,hn=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const pn=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,fn=(e,t)=>n=>Boolean("string"===typeof n&&pn.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),mn=(e,t,n)=>a=>{if("string"!==typeof a)return a;const[r,s,i,o]=a.match(hn);return{[e]:parseFloat(r),[t]:parseFloat(s),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},gn=m(m({},ln),{},{transform:e=>Math.round((e=>on(0,255,e))(e))}),xn={test:fn("rgb","red"),parse:mn("red","green","blue"),transform:e=>{let{red:t,green:n,blue:a,alpha:r=1}=e;return"rgba("+gn.transform(t)+", "+gn.transform(n)+", "+gn.transform(a)+", "+dn(cn.transform(r))+")"}};const vn={test:fn("#"),parse:function(e){let t="",n="",a="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),a=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,a+=a,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:r?parseInt(r,16)/255:1}},transform:xn.transform},yn=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),bn=yn("deg"),wn=yn("%"),kn=yn("px"),Nn=yn("vh"),jn=yn("vw"),Sn=(()=>m(m({},wn),{},{parse:e=>wn.parse(e)/100,transform:e=>wn.transform(100*e)}))(),Cn={test:fn("hsl","hue"),parse:mn("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:a,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+wn.transform(dn(n))+", "+wn.transform(dn(a))+", "+dn(cn.transform(r))+")"}},En={test:e=>xn.test(e)||vn.test(e)||Cn.test(e),parse:e=>xn.test(e)?xn.parse(e):Cn.test(e)?Cn.parse(e):vn.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?xn.transform(e):Cn.transform(e),getAnimatableNone:e=>{const t=En.parse(e);return t.alpha=0,En.transform(t)}},Tn=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const In="number",An="color",_n=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function On(e){const t=e.toString(),n=[],a={color:[],number:[],var:[]},r=[];let s=0;const i=t.replace(_n,e=>(En.test(e)?(a.color.push(s),r.push(An),n.push(En.parse(e))):e.startsWith("var(")?(a.var.push(s),r.push("var"),n.push(e)):(a.number.push(s),r.push(In),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:i,indexes:a,types:r}}function Rn(e){return On(e).values}function Pn(e){const{split:t,types:n}=On(e),a=t.length;return e=>{let r="";for(let s=0;s<a;s++)if(r+=t[s],void 0!==e[s]){const t=n[s];r+=t===In?dn(e[s]):t===An?En.transform(e[s]):e[s]}return r}}const Mn=e=>"number"===typeof e?0:En.test(e)?En.getAnimatableNone(e):e;const Dn={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(hn))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Tn))||void 0===n?void 0:n.length)||0)>0},parse:Rn,createTransformer:Pn,getAnimatableNone:function(e){const t=Rn(e);return Pn(e)(t.map(Mn))}},Fn=new Set(["brightness","contrast","saturate","opacity"]);function Ln(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[a]=n.match(hn)||[];if(!a)return e;const r=n.replace(a,"");let s=Fn.has(t)?1:0;return a!==n&&(s*=100),t+"("+s+r+")"}const zn=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Bn=m(m({},Dn),{},{getAnimatableNone:e=>{const t=e.match(zn);return t?t.map(Ln).join(" "):e}}),Un=m(m({},ln),{},{transform:Math.round}),Wn=m(m({borderWidth:kn,borderTopWidth:kn,borderRightWidth:kn,borderBottomWidth:kn,borderLeftWidth:kn,borderRadius:kn,radius:kn,borderTopLeftRadius:kn,borderTopRightRadius:kn,borderBottomRightRadius:kn,borderBottomLeftRadius:kn,width:kn,maxWidth:kn,height:kn,maxHeight:kn,top:kn,right:kn,bottom:kn,left:kn,inset:kn,insetBlock:kn,insetBlockStart:kn,insetBlockEnd:kn,insetInline:kn,insetInlineStart:kn,insetInlineEnd:kn,padding:kn,paddingTop:kn,paddingRight:kn,paddingBottom:kn,paddingLeft:kn,paddingBlock:kn,paddingBlockStart:kn,paddingBlockEnd:kn,paddingInline:kn,paddingInlineStart:kn,paddingInlineEnd:kn,margin:kn,marginTop:kn,marginRight:kn,marginBottom:kn,marginLeft:kn,marginBlock:kn,marginBlockStart:kn,marginBlockEnd:kn,marginInline:kn,marginInlineStart:kn,marginInlineEnd:kn,backgroundPositionX:kn,backgroundPositionY:kn},{rotate:bn,rotateX:bn,rotateY:bn,rotateZ:bn,scale:un,scaleX:un,scaleY:un,scaleZ:un,skew:bn,skewX:bn,skewY:bn,distance:kn,translateX:kn,translateY:kn,translateZ:kn,x:kn,y:kn,z:kn,perspective:kn,transformPerspective:kn,opacity:cn,originX:Sn,originY:Sn,originZ:kn}),{},{zIndex:Un,fillOpacity:cn,strokeOpacity:cn,numOctaves:Un}),Vn=m(m({},Wn),{},{color:En,backgroundColor:En,outlineColor:En,fill:En,stroke:En,borderColor:En,borderTopColor:En,borderRightColor:En,borderBottomColor:En,borderLeftColor:En,filter:Bn,WebkitFilter:Bn}),Hn=e=>Vn[e],Gn=()=>({x:{min:0,max:0},y:{min:0,max:0}}),qn=e=>Boolean(e&&e.getVelocity),Kn=new Set(["width","height","top","left","right","bottom",...rn]),Xn=e=>t=>t.test(e),Yn=[ln,kn,wn,bn,jn,Nn,{test:e=>"auto"===e,parse:e=>e}],$n=e=>Yn.find(Xn(e));function Qn(e,t){return t?"".concat(e,". For more information and steps for solving, visit https://motion.dev/troubleshooting/").concat(t):e}var Jn;let Zn=()=>{},ea=()=>{};"undefined"!==typeof process&&"production"!==(null===(Jn={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"443",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tradehub-380.preview.emergentagent.com"})||void 0===Jn?void 0:Jn.NODE_ENV)&&(Zn=(e,t,n)=>{e||"undefined"===typeof console||console.warn(Qn(t,n))},ea=(e,t,n)=>{if(!e)throw new Error(Qn(t,n))});const ta=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),na=e=>t=>"string"===typeof t&&t.startsWith(e),aa=na("--"),ra=na("var(--"),sa=e=>!!ra(e)&&ia.test(e.split("/*")[0].trim()),ia=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function oa(e){return"string"===typeof e&&e.split("/*")[0].includes("var(--")}const la=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function ca(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ea(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'),"max-css-var-depth");const[a,r]=function(e){const t=la.exec(e);if(!t)return[,];const[,n,a,r]=t;return["--".concat(null!==n&&void 0!==n?n:a),r]}(e);if(!a)return;const s=window.getComputedStyle(t).getPropertyValue(a);if(s){const e=s.trim();return ta(e)?parseFloat(e):e}return sa(r)?ca(r,t,n+1):r}const ua=e=>180*e/Math.PI,da=e=>{const t=ua(Math.atan2(e[1],e[0]));return pa(t)},ha={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:da,rotateZ:da,skewX:e=>ua(Math.atan(e[1])),skewY:e=>ua(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},pa=e=>((e%=360)<0&&(e+=360),e),fa=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ma=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ga={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fa,scaleY:ma,scale:e=>(fa(e)+ma(e))/2,rotateX:e=>pa(ua(Math.atan2(e[6],e[5]))),rotateY:e=>pa(ua(Math.atan2(-e[2],e[0]))),rotateZ:da,rotate:da,skewX:e=>ua(Math.atan(e[4])),skewY:e=>ua(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xa(e){return e.includes("scale")?1:0}function va(e,t){if(!e||"none"===e)return xa(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let a,r;if(n)a=ga,r=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);a=ha,r=t}if(!r)return xa(t);const s=a[t],i=r[1].split(",").map(ya);return"function"===typeof s?s(i):i[s]}function ya(e){return parseFloat(e.trim())}const ba=e=>e===ln||e===kn,wa=new Set(["x","y","z"]),ka=rn.filter(e=>!wa.has(e));const Na={width:(e,t)=>{let{x:n}=e,{paddingLeft:a="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(a)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:a="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(a)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:a}=t;return parseFloat(a)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:a}=t;return parseFloat(a)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return va(n,"x")},y:(e,t)=>{let{transform:n}=t;return va(n,"y")}};Na.translateX=Na.x,Na.translateY=Na.y;const ja=e=>e,Sa={},Ca=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Ea={value:null,addProjectionMetrics:null};function Ta(e,t){let n=!1,a=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Ca.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,a=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(u.schedule(t),e()),l++,t(o)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r?n:a;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{a.delete(e),i.delete(e)},process:e=>{o=e,r?s=!0:(r=!0,[n,a]=[a,n],n.forEach(c),t&&Ea.value&&Ea.value.frameloop[t].push(l),l=0,n.clear(),r=!1,s&&(s=!1,u.process(e)))}};return u}(s,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:p,postRender:f}=i,m=()=>{const s=Sa.useManualTiming?r.timestamp:performance.now();n=!1,Sa.useManualTiming||(r.delta=a?1e3/60:Math.max(Math.min(s-r.timestamp,40),1)),r.timestamp=s,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),u.process(r),d.process(r),h.process(r),p.process(r),f.process(r),r.isProcessing=!1,n&&t&&(a=!1,e(m))},g=Ca.reduce((t,s)=>{const o=i[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,a=!0,r.isProcessing||e(m)),o.schedule(t,s,i)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<Ca.length;t++)i[Ca[t]].cancel(e)},state:r,steps:i}}const{schedule:Ia,cancel:Aa,state:_a,steps:Oa}=Ta("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:ja,!0),Ra=new Set;let Pa=!1,Ma=!1,Da=!1;function Fa(){if(Ma){const e=Array.from(Ra).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return ka.forEach(n=>{const a=e.getValue(n);void 0!==a&&(t.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[a,r]=t;null===(n=e.getValue(a))||void 0===n||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Ma=!1,Pa=!1,Ra.forEach(e=>e.complete(Da)),Ra.clear()}function La(){Ra.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ma=!0)})}class za{constructor(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=a,this.element=r,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ra.add(this),Pa||(Pa=!0,Ia.read(La),Ia.resolveKeyframes(Fa))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:a}=this;if(null===e[0]){const r=null===a||void 0===a?void 0:a.get(),s=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const a=n.readValue(t,s);void 0!==a&&null!==a&&(e[0]=a)}void 0===e[0]&&(e[0]=s),a&&void 0===r&&a.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ra.delete(this)}cancel(){"scheduled"===this.state&&(Ra.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Ba=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function Ua(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Ba(e))}function Wa(e,t){let n=Hn(e);return n!==Bn&&(n=Dn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Va=new Set(["auto","none","0"]);class Ha extends za{constructor(e,t,n,a,r){super(e,t,n,a,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),sa(n))){const a=ca(n,t.current);void 0!==a&&(e[o]=a),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Kn.has(n)||2!==e.length)return;const[a,r]=e,s=$n(a),i=$n(r);if(oa(a)!==oa(r)&&Na[n])this.needsMeasurement=!0;else if(s!==i)if(ba(s)&&ba(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else Na[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let a=0;a<e.length;a++)(null===e[a]||Ua(e[a]))&&n.push(a);n.length&&function(e,t,n){let a,r=0;for(;r<e.length&&!a;){const t=e[r];"string"===typeof t&&!Va.has(t)&&On(t).values.length&&(a=e[r]),r++}if(a&&n)for(const s of t)e[s]=Wa(n,a)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Na[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];void 0!==a&&e.getValue(n,a).jump(a,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const s=a.length-1,i=a[s];a[s]=Na[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,a]=e;t.getValue(n).set(a)}),this.resolveNoneKeyframes()}}function Ga(e,t){-1===e.indexOf(t)&&e.push(t)}function qa(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ka{constructor(){this.subscriptions=[]}add(e){return Ga(this.subscriptions,e),()=>qa(this.subscriptions,e)}notify(e,t,n){const a=this.subscriptions.length;if(a)if(1===a)this.subscriptions[0](e,t,n);else for(let r=0;r<a;r++){const a=this.subscriptions[r];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const{schedule:Xa,cancel:Ya}=Ta(queueMicrotask,!1);let $a;function Qa(){$a=void 0}const Ja={now:()=>(void 0===$a&&Ja.set(_a.isProcessing||Sa.useManualTiming?_a.timestamp:performance.now()),$a),set:e=>{$a=e,queueMicrotask(Qa)}};function Za(e,t){return t?e*(1e3/t):0}const er={current:void 0};class tr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=Ja.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ja.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ka);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ia.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return er.current&&er.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ja.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Za(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nr(e,t){return new tr(e,t)}const ar=[...Yn,En,Dn],rr={current:null},sr={current:!1},ir="undefined"!==typeof window;const or=new WeakMap;function lr(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function cr(e){return"string"===typeof e||Array.isArray(e)}const ur=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dr=["initial",...ur];function hr(e){return lr(e.animate)||dr.some(t=>cr(e[t]))}function pr(e){return Boolean(hr(e)||e.variants)}function fr(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function mr(e,t,n,a){if("function"===typeof t){const[r,s]=fr(a);t=t(void 0!==n?n:e.custom,r,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,s]=fr(a);t=t(void 0!==n?n:e.custom,r,s)}return t}const gr=["willChange"],xr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let vr={};function yr(e){vr=e}class br{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:a,reducedMotionConfig:r,blockInitialAnimation:s,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=za,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Ja.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Ia.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=m({},l),this.initialValues=n.initial?m({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=hr(n),this.isVariantNode=pr(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{},this),{willChange:h}=d,p=u(d,gr);for(const u in p){const e=p[u];void 0!==l[u]&&qn(e)&&e.set(l[u])}}mount(e){var t;this.current=e,or.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(sr.current||function(){if(sr.current=!0,ir)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>rr.current=e.matches;e.addEventListener("change",t),t()}else rr.current=!1}(),this.shouldReduceMotion=rr.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=sn.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ia.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;"undefined"!==typeof window&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in vr){const t=vr[e];if(!t)continue;const{isEnabled:n,Feature:a}=t;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<xr.length;n++){const t=xr[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const a=e["on"+t];a&&(this.propEventSubscriptions[t]=this.on(t,a))}this.prevMotionValues=function(e,t,n){for(const a in t){const r=t[a],s=n[a];if(qn(r))e.addValue(a,r);else if(qn(s))e.addValue(a,nr(r,{owner:e}));else if(s!==r)if(e.hasValue(a)){const t=e.getValue(a);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(a);e.addValue(a,nr(void 0!==t?t:r,{owner:e}))}}for(const a in n)void 0===t[a]&&e.removeValue(a);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=nr(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let a=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return void 0!==a&&null!==a&&("string"===typeof a&&(ta(a)||Ba(a))?a=parseFloat(a):(r=a,!ar.find(Xn(r))&&Dn.test(t)&&(a=Wa(e,t))),this.setBaseTarget(e,qn(a)?a.get():a)),qn(a)?a.get():a}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var a;const r=mr(this.props,t,null===(a=this.presenceContext)||void 0===a?void 0:a.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||qn(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Ka),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.events[e].notify(...n)}}scheduleRenderMicrotask(){Xa.render(this.render)}}class wr extends br{constructor(){super(...arguments),this.KeyframeResolver=Ha}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){const n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:a}=t;delete n[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qn(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}function kr(e){return e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase()))}const Nr=(e,t)=>t&&"number"===typeof e?t.transform(e):e,jr={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Sr=rn.length;function Cr(e,t,n){const{style:a,vars:r,transformOrigin:s}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(sn.has(l))i=!0;else if(aa(l))r[l]=e;else{const t=Nr(e,Wn[l]);l.startsWith("origin")?(o=!0,s[l]=t):a[l]=t}}if(t.transform||(i||n?a.transform=function(e,t,n){let a="",r=!0;for(let s=0;s<Sr;s++){const i=rn[s],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=Nr(o,Wn[i]);l||(r=!1,a+="".concat(jr[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return a=a.trim(),n?a=n(t,r?"":a):r&&(a="none"),a}(t,e.transform,n):a.transform&&(a.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;a.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const Er={offset:"stroke-dashoffset",array:"stroke-dasharray"},Tr={offset:"strokeDashoffset",array:"strokeDasharray"};const Ir=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"],Ar=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function _r(e,t,n,a,r){let{attrX:s,attrY:i,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(Cr(e,u(t,Ir),a),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;var f,m;(h.transform&&(p.transform=h.transform,delete h.transform),p.transform||h.transformOrigin)&&(p.transformOrigin=null!==(f=h.transformOrigin)&&void 0!==f?f:"50% 50%",delete h.transformOrigin);p.transform&&(p.transformBox=null!==(m=null===r||void 0===r?void 0:r.transformBox)&&void 0!==m?m:"fill-box",delete h.transformBox);for(const u of Ar)void 0!==h[u]&&(p[u]=h[u],delete h[u]);void 0!==s&&(h.x=s),void 0!==i&&(h.y=i),void 0!==o&&(h.scale=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=r?Er:Tr;e[s.offset]="".concat(-a),e[s.array]="".concat(t," ").concat(n)}(h,l,c,d,!1)}const Or=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Rr=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Pr(e,t,n,a){let{style:r,vars:s}=t;const i=e.style;let o;for(o in r)i[o]=r[o];for(o in null===a||void 0===a||a.applyProjectionStyles(i,n),s)i.setProperty(o,s[o])}function Mr(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Dr={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!kn.test(e))return e;e=parseFloat(e)}const n=Mr(e,t.target.x),a=Mr(e,t.target.y);return"".concat(n,"% ").concat(a,"%")}},Fr=(e,t,n)=>e+(t-e)*n,Lr={correct:(e,t)=>{let{treeScale:n,projectionDelta:a}=t;const r=e,s=Dn.parse(e);if(s.length>5)return r;const i=Dn.createTransformer(e),o="number"!==typeof s[0]?1:0,l=a.x.scale*n.x,c=a.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const u=Fr(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=u),"number"===typeof s[3+o]&&(s[3+o]/=u),i(s)}},zr={borderRadius:m(m({},Dr),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Dr,borderTopRightRadius:Dr,borderBottomLeftRadius:Dr,borderBottomRightRadius:Dr,boxShadow:Lr};function Br(e,t){let{layout:n,layoutId:a}=t;return sn.has(e)||e.startsWith("origin")||(n||void 0!==a)&&(!!zr[e]||"opacity"===e)}function Ur(e,t,n){const a=e.style,r=null===t||void 0===t?void 0:t.style,s={};if(!a)return s;for(const o in a){var i;(qn(a[o])||r&&qn(r[o])||Br(o,e)||void 0!==(null===n||void 0===n||null===(i=n.getValue(o))||void 0===i?void 0:i.liveStyle))&&(s[o]=a[o])}return s}function Wr(e,t,n){const a=Ur(e,t,n);for(const r in e)if(qn(e[r])||qn(t[r])){a[-1!==rn.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return a}class Vr extends wr{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(sn.has(t)){const e=Hn(t);return e&&e.default||0}return t=Or.has(t)?t:kr(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Wr(e,t,n)}build(e,t,n){_r(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,a){!function(e,t,n,a){Pr(e,t,void 0,a);for(const r in t.attrs)e.setAttribute(Or.has(r)?r:kr(r),t.attrs[r])}(e,t,0,a)}mount(e){this.isSVGTag=Rr(e.tagName),super.mount(e)}}function Hr(e){let{top:t,left:n,right:a,bottom:r}=e;return{x:{min:n,max:a},y:{min:t,max:r}}}function Gr(e){return void 0===e||1===e}function qr(e){let{scale:t,scaleX:n,scaleY:a}=e;return!Gr(t)||!Gr(n)||!Gr(a)}function Kr(e){return qr(e)||Xr(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Xr(e){return Yr(e.x)||Yr(e.y)}function Yr(e){return e&&"0%"!==e}function $r(e,t,n){return n+t*(e-n)}function Qr(e,t,n,a,r){return void 0!==r&&(e=$r(e,r,a)),$r(e,n,a)+t}function Jr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=Qr(e.min,t,n,a,r),e.max=Qr(e.max,t,n,a,r)}function Zr(e,t){let{x:n,y:a}=t;Jr(e.x,n.translate,n.scale,n.originPoint),Jr(e.y,a.translate,a.scale,a.originPoint)}const es=.999999999999,ts=1.0000000000001;function ns(e,t){e.min=e.min+t,e.max=e.max+t}function as(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Jr(e,t,n,Fr(e.min,e.max,r),a)}function rs(e,t){as(e.x,t.x,t.scaleX,t.scale,t.originX),as(e.y,t.y,t.scaleY,t.scale,t.originY)}function ss(e,t){return Hr(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}(e.getBoundingClientRect(),t))}class is extends wr{constructor(){super(...arguments),this.type="html",this.renderInstance=Pr}readValueFromInstance(e,t){var n,a;if(sn.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?xa(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return va(n,t)})(e,t);{const n=(a=e,window.getComputedStyle(a)),r=(aa(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof r?r.trim():r}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return ss(e,n)}build(e,t,n){Cr(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Ur(e,t,n)}}const os=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ls(e){return"string"===typeof e&&!e.includes("-")&&!!(os.indexOf(e)>-1||/[A-Z]/.test(e))}const cs=(e,t)=>{var n;return(null!==(n=t.isSVG)&&void 0!==n?n:ls(e))?new Vr(t):new is(t,{allowProjection:e!==o.Fragment})},us=(0,o.createContext)({strict:!1}),ds=(0,o.createContext)({});function hs(e){const{initial:t,animate:n}=function(e,t){if(hr(e)){const{initial:t,animate:n}=e;return{initial:!1===t||cr(t)?t:void 0,animate:cr(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,o.useContext)(ds));return(0,o.useMemo)(()=>({initial:t,animate:n}),[ps(t),ps(n)])}function ps(e){return Array.isArray(e)?e.join(" "):e}const fs=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ms(e,t,n){for(const a in t)qn(t[a])||Br(a,n)||(e[a]=t[a])}function gs(e,t){const n={};return ms(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,o.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Cr(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function xs(e,t){const n={},a=gs(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const vs=()=>m(m({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function ys(e,t,n,a){const r=(0,o.useMemo)(()=>{const n=vs();return _r(n,t,Rr(a),e.transformTemplate,e.style),m(m({},n.attrs),{},{style:m({},n.style)})},[t]);if(e.style){const t={};ms(t,e.style,e),r.style=m(m({},t),r.style)}return r}const bs=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ws(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||bs.has(e)}let ks=e=>!ws(e);try{"function"===typeof(Ns=require("@emotion/is-prop-valid").default)&&(ks=e=>e.startsWith("on")?!ws(e):Ns(e))}catch(SEe){}var Ns;function js(e,t,n,a,r){let{latestValues:s}=a,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0;const c=((null!==l&&void 0!==l?l:ls(e))?ys:xs)(t,s,r,e),u=function(e,t,n){const a={};for(const r in e)"values"===r&&"object"===typeof e.values||(ks(r)||!0===n&&ws(r)||!t&&!ws(r)||e.draggable&&r.startsWith("onDrag"))&&(a[r]=e[r]);return a}(t,"string"===typeof e,i),d=e!==o.Fragment?m(m(m({},u),c),{},{ref:n}):{},{children:h}=t,p=(0,o.useMemo)(()=>qn(h)?h.get():h,[h]);return(0,o.createElement)(e,m(m({},d),{},{children:p}))}function Ss(e){return qn(e)?e.get():e}const Cs=["transitionEnd","transition"];function Es(e,t,n,a){const r={},s=a(e,{});for(const u in s)r[u]=Ss(s[u]);let{initial:i,animate:o}=e;const l=hr(e),c=pr(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const h=d?o:i;if(h&&"boolean"!==typeof h&&!lr(h)){const t=Array.isArray(h)?h:[h];for(let n=0;n<t.length;n++){const a=mr(e,t[n]);if(a){const{transitionEnd:e,transition:t}=a,n=u(a,Cs);for(const a in n){let e=n[a];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[a]=e)}for(const a in e)r[a]=e[a]}}}return r}const Ts=e=>(t,n)=>{const a=(0,o.useContext)(ds),r=(0,o.useContext)(Ht),s=()=>function(e,t,n,a){let{scrapeMotionValuesFromProps:r,createRenderState:s}=e;return{latestValues:Es(t,n,a,r),renderState:s()}}(e,t,a,r);return n?s():Ut(s)},Is=Ts({scrapeMotionValuesFromProps:Ur,createRenderState:fs}),As=Ts({scrapeMotionValuesFromProps:Wr,createRenderState:vs}),_s={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Os=!1;function Rs(){return function(){if(Os)return;const e={};for(const t in _s)e[t]={isEnabled:e=>_s[t].some(t=>!!e[t])};yr(e),Os=!0}(),vr}const Ps=Symbol.for("motionComponentSymbol");function Ms(e,t,n){const a=(0,o.useRef)(n);(0,o.useInsertionEffect)(()=>{a.current=n});const r=(0,o.useRef)(null);return(0,o.useCallback)(n=>{var s;n&&(null===(s=e.onMount)||void 0===s||s.call(e,n));t&&(n?t.mount(n):t.unmount());const i=a.current;if("function"===typeof i)if(n){const e=i(n);"function"===typeof e&&(r.current=e)}else r.current?(r.current(),r.current=null):i(n);else i&&(i.current=n)},[t])}const Ds="data-"+kr("framerAppearId"),Fs=(0,o.createContext)({});function Ls(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function zs(e,t,n,a,r,s){var i,l,c,u;const{visualElement:d}=(0,o.useContext)(ds),h=(0,o.useContext)(us),p=(0,o.useContext)(Ht),f=(0,o.useContext)(Kt).reducedMotion,m=(0,o.useRef)(null);a=a||h.renderer,!m.current&&a&&(m.current=a(e,{visualState:t,parent:d,props:n,presenceContext:p,blockInitialAnimation:!!p&&!1===p.initial,reducedMotionConfig:f,isSVG:s}));const g=m.current,x=(0,o.useContext)(Fs);!g||g.projection||!r||"html"!==g.type&&"svg"!==g.type||function(e,t,n,a){const{layoutId:r,layout:s,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Bs(e.parent)),e.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:Boolean(i)||o&&Ls(o),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:a,crossfade:u,layoutScroll:l,layoutRoot:c})}(m.current,n,r,x);const v=(0,o.useRef)(!1);(0,o.useInsertionEffect)(()=>{g&&v.current&&g.update(n,p)});const y=n[Ds],b=(0,o.useRef)(Boolean(y)&&!(null!==(i=(l=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(l,y))&&(null===(c=(u=window).MotionHasOptimisedAnimation)||void 0===c?void 0:c.call(u,y)));return Vt(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),b.current&&g.animationState&&g.animationState.animateChanges())}),(0,o.useEffect)(()=>{g&&(!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,y)}),b.current=!1),g.enteringChildren=void 0)}),g}function Bs(e){if(e)return!1!==e.options.allowProjection?e.projection:Bs(e.parent)}function Us(e){var t,n;let{forwardMotionProps:a=!1,type:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;s&&function(e){const t=Rs();for(const n in e)t[n]=m(m({},t[n]),e[n]);yr(t)}(s);const l=r?"svg"===r:ls(e),c=l?As:Is;function u(t,n){let r;const s=m(m(m({},(0,o.useContext)(Kt)),t),{},{layoutId:Ws(t)}),{isStatic:u}=s,d=hs(t),h=c(t,u);if(!u&&Wt){!function(){(0,o.useContext)(us).strict;0}();const t=function(e){const t=Rs(),{drag:n,layout:a}=t;if(!n&&!a)return{};const r=m(m({},n),a);return{MeasureLayout:null!==n&&void 0!==n&&n.isEnabled(e)||null!==a&&void 0!==a&&a.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(s);r=t.MeasureLayout,d.visualElement=zs(e,h,s,i,t.ProjectionNode,l)}return(0,zt.jsxs)(ds.Provider,{value:d,children:[r&&d.visualElement?(0,zt.jsx)(r,m({visualElement:d.visualElement},s)):null,js(e,t,Ms(h,d.visualElement,n),h,u,a,l)]})}u.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==t?t:"",")"));const d=(0,o.forwardRef)(u);return d[Ps]=e,d}function Ws(e){let{layoutId:t}=e;const n=(0,o.useContext)(Bt).id;return n&&void 0!==t?n+"-"+t:t}function Vs(e,t){if("undefined"===typeof Proxy)return Us;const n=new Map,a=(n,a)=>Us(n,a,e,t);return new Proxy((e,t)=>a(e,t),{get:(r,s)=>"create"===s?a:(n.has(s)||n.set(s,Us(s,void 0,e,t)),n.get(s))})}class Hs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Gs(e,t,n){const a=e.getProps();return mr(a,t,void 0!==n?n:a.custom,e)}function qs(e,t){var n,a;return null!==(n=null!==(a=null===e||void 0===e?void 0:e[t])&&void 0!==a?a:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const Ks=e=>Array.isArray(e),Xs=["transitionEnd","transition"];function Ys(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,nr(n))}function $s(e){return Ks(e)?e[e.length-1]||0:e}function Qs(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(qn(e)&&e.add)}(n))return n.add(t);if(!n&&Sa.WillChange){const n=new Sa.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Js(e){return e.props[Ds]}const Zs=e=>1e3*e,ei=e=>e/1e3,ti=(e,t)=>n=>t(e(n)),ni=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(ti)},ai={layout:0,mainThread:0,waapi:0};function ri(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function si(e,t){return n=>n>0?t:e}const ii=(e,t,n)=>{const a=e*e,r=n*(t*t-a)+a;return r<0?0:Math.sqrt(r)},oi=[vn,xn,Cn];function li(e){const t=(n=e,oi.find(e=>e.test(n)));var n;if(Zn(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),"color-not-animatable"),!Boolean(t))return!1;let a=t.parse(e);return t===Cn&&(a=function(e){let{hue:t,saturation:n,lightness:a,alpha:r}=e;t/=360,n/=100,a/=100;let s=0,i=0,o=0;if(n){const e=a<.5?a*(1+n):a+n-a*n,r=2*a-e;s=ri(r,e,t+1/3),i=ri(r,e,t),o=ri(r,e,t-1/3)}else s=i=o=a;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(a)),a}const ci=(e,t)=>{const n=li(e),a=li(t);if(!n||!a)return si(e,t);const r=m({},n);return e=>(r.red=ii(n.red,a.red,e),r.green=ii(n.green,a.green,e),r.blue=ii(n.blue,a.blue,e),r.alpha=Fr(n.alpha,a.alpha,e),xn.transform(r))},ui=new Set(["none","hidden"]);function di(e,t){return n=>Fr(e,t,n)}function hi(e){return"number"===typeof e?di:"string"===typeof e?sa(e)?si:En.test(e)?ci:mi:Array.isArray(e)?pi:"object"===typeof e?En.test(e)?ci:fi:si}function pi(e,t){const n=[...e],a=n.length,r=e.map((e,n)=>hi(e)(e,t[n]));return e=>{for(let t=0;t<a;t++)n[t]=r[t](e);return n}}function fi(e,t){const n=m(m({},e),t),a={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(a[r]=hi(e[r])(e[r],t[r]));return e=>{for(const t in a)n[t]=a[t](e);return n}}const mi=(e,t)=>{const n=Dn.createTransformer(t),a=On(e),r=On(t);return a.indexes.var.length===r.indexes.var.length&&a.indexes.color.length===r.indexes.color.length&&a.indexes.number.length>=r.indexes.number.length?ui.has(e)&&!r.values.length||ui.has(t)&&!a.values.length?function(e,t){return ui.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):ni(pi(function(e,t){const n=[],a={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){var r;const i=t.types[s],o=e.indexes[i][a[i]],l=null!==(r=e.values[o])&&void 0!==r?r:0;n[s]=l,a[i]++}return n}(a,r),r.values),n):(Zn(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),"complex-values-different"),si(e,t))};function gi(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Fr(e,t,n);return hi(e)(e,t)}const xi=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ia.update(t,e)},stop:()=>Aa(t),now:()=>_a.isProcessing?_a.timestamp:Ja.now()}},vi=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a="";const r=Math.max(Math.round(t/n),2);for(let s=0;s<r;s++)a+=Math.round(1e4*e(s/(r-1)))/1e4+", ";return"linear(".concat(a.substring(0,a.length-2),")")},yi=2e4;function bi(e){let t=0;let n=e.next(t);for(;!n.done&&t<yi;)t+=50,n=e.next(t);return t>=yi?1/0:t}function wi(e,t,n){const a=Math.max(t-5,0);return Za(n-e(a),t-a)}const ki={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ni=.001;function ji(e){let t,n,{duration:a=ki.duration,bounce:r=ki.bounce,velocity:s=ki.velocity,mass:i=ki.mass}=e;Zn(a<=Zs(ki.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-r;o=on(ki.minDamping,ki.maxDamping,o),a=on(ki.minDuration,ki.maxDuration,ei(a)),o<1?(t=e=>{const t=e*o,n=t*a,r=t-s,i=Ci(e,o),l=Math.exp(-n);return Ni-r/i*l},n=e=>{const n=e*o*a,r=n*s+s,i=Math.pow(o,2)*Math.pow(e,2)*a,l=Math.exp(-n),c=Ci(Math.pow(e,2),o);return(-t(e)+Ni>0?-1:1)*((r-i)*l)/c}):(t=e=>Math.exp(-e*a)*((e-s)*a+1)-.001,n=e=>Math.exp(-e*a)*(a*a*(s-e)));const l=function(e,t,n){let a=n;for(let r=1;r<Si;r++)a-=e(a)/t(a);return a}(t,n,5/a);if(a=Zs(a),isNaN(l))return{stiffness:ki.stiffness,damping:ki.damping,duration:a};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:a}}}const Si=12;function Ci(e,t){return e*Math.sqrt(1-t*t)}const Ei=["duration","bounce"],Ti=["stiffness","damping","mass"];function Ii(e,t){return t.some(t=>void 0!==e[t])}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ki.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:r}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t=m({velocity:ki.velocity,stiffness:ki.stiffness,damping:ki.damping,mass:ki.mass,isResolvedFromDuration:!1},e);if(!Ii(e,Ti)&&Ii(e,Ei))if(e.visualDuration){const n=e.visualDuration,a=2*Math.PI/(1.2*n),r=a*a,s=2*on(.05,1,1-(e.bounce||0))*Math.sqrt(r);t=m(m({},t),{},{mass:ki.mass,stiffness:r,damping:s})}else{const n=ji(e);t=m(m(m({},t),n),{},{mass:ki.mass}),t.isResolvedFromDuration=!0}return t}(m(m({},n),{},{velocity:-ei(n.velocity||0)})),f=h||0,g=c/(2*Math.sqrt(l*u)),x=i-s,v=ei(Math.sqrt(l/u)),y=Math.abs(x)<5;let b;if(a||(a=y?ki.restSpeed.granular:ki.restSpeed.default),r||(r=y?ki.restDelta.granular:ki.restDelta.default),g<1){const e=Ci(v,g);b=t=>{const n=Math.exp(-g*v*t);return i-n*((f+g*v*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===g)b=e=>i-Math.exp(-v*e)*(x+(f+v*x)*e);else{const e=v*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*v*t),a=Math.min(e*t,300);return i-n*((f+g*v*x)*Math.sinh(a)+e*x*Math.cosh(a))/e}}const w={calculatedDuration:p&&d||null,next:e=>{const t=b(e);if(p)o.done=e>=d;else{let n=0===e?f:0;g<1&&(n=0===e?Zs(f):wi(b,e,t));const s=Math.abs(n)<=a,l=Math.abs(i-t)<=r;o.done=s&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(bi(w),yi),t=vi(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function _i(e){let{keyframes:t,velocity:n=0,power:a=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=a*n;const g=h+m,x=void 0===o?g:o(g);x!==g&&(m=x-h);const v=e=>-m*Math.exp(-e/r),y=e=>x+v(e),b=e=>{const t=v(e),n=y(e);p.done=Math.abs(t)<=u,p.value=p.done?x:n};let w,k;const N=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,k=Ai({keyframes:[p.value,f(p.value)],velocity:wi(y,e,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==w||(t=!0,b(e),N(e)),void 0!==w&&e>=w?k.next(e-w):(!t&&b(e),p)}}}Ai.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(m(m({},e),{},{keyframes:[0,t]})),a=Math.min(bi(n),yi);return{type:"keyframes",ease:e=>n.next(a*e).value/t,duration:ei(a)}}(e,100,Ai);return e.ease=t.ease,e.duration=Zs(t.duration),e.type="keyframes",e};const Oi=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Ri(e,t,n,a){if(e===t&&n===a)return ja;const r=t=>function(e,t,n,a,r){let s,i,o=0;do{i=t+(n-t)/2,s=Oi(i,a,r)-e,s>0?n=i:t=i}while(Math.abs(s)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Oi(r(e),t,a)}const Pi=Ri(.42,0,1,1),Mi=Ri(0,0,.58,1),Di=Ri(.42,0,.58,1),Fi=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Li=e=>t=>1-e(1-t),zi=Ri(.33,1.53,.69,.99),Bi=Li(zi),Ui=Fi(Bi),Wi=e=>(e*=2)<1?.5*Bi(e):.5*(2-Math.pow(2,-10*(e-1))),Vi=e=>1-Math.sin(Math.acos(e)),Hi=Li(Vi),Gi=Fi(Vi),qi=e=>Array.isArray(e)&&"number"===typeof e[0],Ki={linear:ja,easeIn:Pi,easeInOut:Di,easeOut:Mi,circIn:Vi,circInOut:Gi,circOut:Hi,backIn:Bi,backInOut:Ui,backOut:zi,anticipate:Wi},Xi=e=>{if(qi(e)){ea(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,a,r]=e;return Ri(t,n,a,r)}return"string"===typeof e?(ea(void 0!==Ki[e],"Invalid easing type '".concat(e,"'"),"invalid-easing-type"),Ki[e]):e},Yi=(e,t,n)=>{const a=t-e;return 0===a?1:(n-e)/a};function $i(e,t){let{clamp:n=!0,ease:a,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(ea(s===t.length,"Both input and output ranges must be the same length","range-length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const a=[],r=n||Sa.mix||gi,s=e.length-1;for(let i=0;i<s;i++){let n=r(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||ja:t;n=ni(e,n)}a.push(n)}return a}(t,a,r),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let a=0;if(l>1)for(;a<e.length-2&&!(n<e[a+1]);a++);const r=Yi(e[a],e[a+1],n);return o[a](r)};return n?t=>c(on(e[0],e[s-1],t)):c}function Qi(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let a=1;a<=t;a++){const r=Yi(0,t,a);e.push(Fr(n,1,r))}}(t,e.length-1),t}function Ji(e){let{duration:t=300,keyframes:n,times:a,ease:r="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(Xi):Xi(r),i={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(a&&a.length===n.length?a:Qi(n),t),l=$i(o,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||Di).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Zi=e=>null!==e;function eo(e,t,n){let{repeat:a,repeatType:r="loop"}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(Zi),o=s<0||a&&"loop"!==r&&a%2===1?0:i.length-1;return o&&void 0!==n?n:i[o]}const to={decay:_i,inertia:_i,tween:Ji,keyframes:Ji,spring:Ai};function no(e){"string"===typeof e.type&&(e.type=to[e.type])}class ao{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ro=e=>e/100;class so extends ao{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Ja.now()&&this.tick(Ja.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},ai.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;no(e);const{type:t=Ji,repeat:n=0,repeatDelay:a=0,repeatType:r,velocity:s=0}=e;let{keyframes:i}=e;const o=t||Ji;o!==Ji&&"number"!==typeof i[0]&&(this.mixKeyframes=ni(ro,gi(i[0],i[1])),i=[0,100]);const l=o(m(m({},e),{},{keyframes:i}));"mirror"===r&&(this.mirroredGenerator=o(m(m({},e),{},{keyframes:[...i].reverse(),velocity:-s}))),null===l.calculatedDuration&&(l.calculatedDuration=bi(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:a,mixKeyframes:r,mirroredGenerator:s,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>a;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=a);let v=this.currentTime,y=n;if(u){const e=Math.min(this.currentTime,a)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/i)):"mirror"===d&&(y=s)),v=on(0,1,n)*i}const b=x?{done:!1,value:c[0]}:y.next(v);r&&(b.value=r(b.value));let{done:w}=b;x||null===o||(w=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&p!==_i&&(b.value=eo(c,this.options,m,this.speed)),f&&f(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return ei(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ei(e)}get time(){return ei(this.currentTime)}set time(e){var t;e=Zs(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ja.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ei(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=xi,startTime:a}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=null!==a&&void 0!==a?a:r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ja.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,ai.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function io(e){let t;return()=>(void 0===t&&(t=e()),t)}const oo=io(()=>void 0!==window.ScrollTimeline),lo={};function co(e,t){const n=io(e);return()=>{var e;return null!==(e=lo[t])&&void 0!==e?e:n()}}const uo=co(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(jEe){return!1}return!0},"linearEasing"),ho=e=>{let[t,n,a,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(a,", ").concat(r,")")},po={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ho([0,.65,.55,1]),circOut:ho([.55,0,1,.45]),backIn:ho([.31,.01,.66,-.59]),backOut:ho([.33,1.53,.69,.99])};function fo(e,t){return e?"function"===typeof e?uo()?vi(e,t):"ease-out":qi(e)?ho(e):Array.isArray(e)?e.map(e=>fo(e,t)||po.easeOut):po[e]:void 0}function mo(e,t,n){let{delay:a=0,duration:r=300,repeat:s=0,repeatType:i="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=fo(o,r);Array.isArray(d)&&(u.easing=d),Ea.value&&ai.waapi++;const h={delay:a,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);const p=e.animate(u,h);return Ea.value&&p.finished.finally(()=>{ai.waapi--}),p}function go(e){return"function"===typeof e&&"applyToOptions"in e}const xo=["type"];class vo extends ao{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:a,pseudoElement:r,allowFlatten:s=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=s,this.options=e,ea("string"!==typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function(e){let{type:t}=e,n=u(e,xo);return go(t)&&uo()?t.applyToOptions(n):(null!==(a=n.duration)&&void 0!==a||(n.duration=300),null!==(r=n.ease)&&void 0!==r||(n.ease="easeOut"),n);var a,r}(e);this.animation=mo(t,n,a,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=eo(a,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(jEe){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return ei(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ei(e)}get time(){return ei(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Zs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){var e;return null!==(e=this.manualStartTime)&&void 0!==e?e:Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var a;this.allowFlatten&&(null===(a=this.animation.effect)||void 0===a||a.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&oo()?(this.animation.timeline=t,ja):n(this)}}const yo={anticipate:Wi,backInOut:Ui,circInOut:Gi};function bo(e){"string"===typeof e.ease&&e.ease in yo&&(e.ease=yo[e.ease])}const wo=["motionValue","onUpdate","onComplete","element"];class ko extends vo{constructor(e){bo(e),no(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const t=this.options,{motionValue:n,onUpdate:a,onComplete:r,element:s}=t,i=u(t,wo);if(!n)return;if(void 0!==e)return void n.set(e);const o=new so(m(m({},i),{},{autoplay:!1})),l=Math.max(10,Ja.now()-this.startTime),c=on(0,10,l-10);n.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const No=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Dn.test(e)&&"0"!==e||e.startsWith("url(")));function jo(e){e.duration=0,e.type="keyframes"}const So=new Set(["opacity","clipPath","filter","transform"]),Co=io(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Eo=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class To extends ao{constructor(e){var t;let{autoplay:n=!0,delay:a=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h}=e,p=u(e,Eo);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Ja.now();const f=m({autoplay:n,delay:a,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:h},p),g=(null===h||void 0===h?void 0:h.KeyframeResolver)||za;this.keyframeResolver=new g(l,(e,t,n)=>this.onKeyframesResolved(e,t,f,!n),c,d,h),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,a){var r;this.keyframeResolver=void 0;const{name:s,type:i,velocity:o,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=Ja.now(),function(e,t,n,a){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],i=No(r,t),o=No(s,t);return Zn(i===o,"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(s,'". "').concat(i?s:r,'" is not an animatable value.'),"value-not-animatable"),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||go(n))&&a)}(e,s,i,o)||(!Sa.instantAnimations&&l||null===u||void 0===u||u(eo(e,n,t)),e[0]=e[e.length-1],jo(n),n.repeat=0);const d=m(m({startTime:a?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),h=!c&&function(e){var t;const{motionValue:n,name:a,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Co()&&a&&So.has(a)&&("transform"!==a||!c)&&!l&&!r&&"mirror"!==s&&0!==i&&"inertia"!==o}(d),p=null===(r=d.motionValue)||void 0===r||null===(r=r.owner)||void 0===r?void 0:r.current,f=h?new ko(m(m({},d),{},{element:p})):new so(d);f.finished.then(()=>{this.notifyFinished()}).catch(ja),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),Da=!0,La(),Fa(),Da=!1);return this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const Io={type:"spring",stiffness:500,damping:25,restSpeed:10},Ao={type:"keyframes",duration:.8},_o={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Oo=(e,t)=>{let{keyframes:n}=t;return n.length>2?Ao:sn.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Io:_o},Ro=e=>null!==e;const Po=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Mo=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return i=>{const o=qs(a,e)||{},l=o.delay||a.delay||0;let{elapsed:c=0}=a;c-=Zs(l);const d=m(m({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:r});(function(e){let{when:t,delay:n,delayChildren:a,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,h=u(e,Po);return!!Object.keys(h).length})(o)||Object.assign(d,Oo(e,d)),d.duration&&(d.duration=Zs(d.duration)),d.repeatDelay&&(d.repeatDelay=Zs(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let h=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(jo(d),0===d.delay&&(h=!0)),(Sa.instantAnimations||Sa.skipAnimations)&&(h=!0,jo(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!s&&void 0!==t.get()){const e=function(e,t,n){let{repeat:a,repeatType:r="loop"}=t;const s=e.filter(Ro),i=a&&"loop"!==r&&a%2===1?0:s.length-1;return i&&void 0!==n?n:s[i]}(d.keyframes,o);if(void 0!==e)return void Ia.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new so(d):new To(d)}},Do=["transition","transitionEnd"];function Fo(e,t){let{protectedKeys:n,needsAnimating:a}=e;const r=n.hasOwnProperty(t)&&!0!==a[t];return a[t]=!1,r}function Lo(e,t){let{delay:n=0,transitionOverride:a,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:s=e.getDefaultTransition(),transitionEnd:i}=t,o=u(t,Do);a&&(s=a);const l=[],c=r&&e.animationState&&e.animationState.getState()[r];for(const u in o){var d;const t=e.getValue(u,null!==(d=e.latestValues[u])&&void 0!==d?d:null),a=o[u];if(void 0===a||c&&Fo(c,u))continue;const r=m({delay:n},qs(s||{},u)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(a)&&a===i&&!r.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=Js(e);if(t){const e=window.MotionHandoffAnimation(t,u,Ia);null!==e&&(r.startTime=e,h=!0)}}Qs(e,u),t.start(Mo(u,t,a,e.shouldReduceMotion&&Kn.has(u)?{type:!1}:r,e,h));const p=t.animation;p&&l.push(p)}return i&&Promise.all(l).then(()=>{Ia.update(()=>{i&&function(e,t){let n=Gs(e,t)||{},{transitionEnd:a={},transition:r={}}=n,s=u(n,Xs);s=m(m({},s),a);for(const i in s)Ys(e,i,$s(s[i]))}(e,i)})}),l}function zo(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*a;return"function"===typeof n?n(s,i):1===r?s*a:o-s*a}function Bo(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Gs(e,t,"exit"===a.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};a.transitionOverride&&(s=a.transitionOverride);const i=r?()=>Promise.all(Lo(e,r,a)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Bo(l,t,m(m({},i),{},{delay:n+("function"===typeof a?0:a)+zo(e.variantChildren,l,a,r,s)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,r,i,o,a)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(a.delay)])}const Uo=dr.length;function Wo(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Wo(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Uo;n++){const a=dr[n],r=e.props[a];(cr(r)||!1===r)&&(t[a]=r)}return t}function Vo(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let a=0;a<n;a++)if(t[a]!==e[a])return!1;return!0}const Ho=["transition","transitionEnd"],Go=[...ur].reverse(),qo=ur.length;function Ko(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:a}=t;return function(e,t){let n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Bo(e,t,a));n=Promise.all(r)}else if("string"===typeof t)n=Bo(e,t,a);else{const r="function"===typeof t?Gs(e,t,a.custom):t;n=Promise.all(Lo(e,r,a))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,a)}))}function Xo(e){let t=Ko(e),n=Qo(),a=!0;const r=t=>(n,a)=>{var r;const s=Gs(e,a,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(s){const{transition:e,transitionEnd:t}=s,a=u(s,Ho);n=m(m(m({},n),a),t)}return n};function s(s){const{props:i}=e,o=Wo(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<qo;t++){const h=Go[t],p=n[h],f=void 0!==i[h]?i[h]:o[h],g=cr(f),x=h===s?p.isActive:null;!1===x&&(d=t);let v=f===o[h]&&f!==i[h]&&g;if(v&&a&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=m({},u),!p.isActive&&null===x||!f&&!p.prevProp||lr(f)||"boolean"===typeof f)continue;const y=Yo(p.prevProp,f);let b=y||h===s&&p.isActive&&!v&&g||t>d&&g,w=!1;const k=Array.isArray(f)?f:[f];let N=k.reduce(r(h),{});!1===x&&(N={});const{prevResolvedValues:j={}}=p,S=m(m({},j),N),C=t=>{b=!0,c.has(t)&&(w=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=N[e],n=j[e];if(u.hasOwnProperty(e))continue;let a=!1;a=Ks(t)&&Ks(n)?!Vo(t,n):t!==n,a?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=N,p.isActive&&(u=m(m({},u),N)),a&&e.blockInitialAnimation&&(b=!1);const E=v&&y;b&&(!E||w)&&l.push(...k.map(t=>{const n={type:h};if("string"===typeof t&&a&&!E&&e.manuallyAnimateOnMount&&e.parent){const{parent:a}=e,r=Gs(a,t);if(a.enteringChildren&&r){const{delayChildren:t}=r.transition||{};n.delay=zo(a.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof i.initial){const n=Gs(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const a=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!==a&&void 0!==a?a:null}),l.push({animation:t})}let h=Boolean(l.length);return!a||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),a=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,a){var r;if(n[t].isActive===a)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,a)}),n[t].isActive=a;const i=s(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Qo()}}}function Yo(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Vo(t,e)}function $o(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qo(){return{animate:$o(!0),whileInView:$o(),whileHover:$o(),whileTap:$o(),whileDrag:$o(),whileFocus:$o(),exit:$o()}}let Jo=0;const Zo={animation:{Feature:class extends Hs{constructor(e){super(e),e.animationState||(e.animationState=Xo(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lr(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Hs{constructor(){super(...arguments),this.id=Jo++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},el={x:!1,y:!1};function tl(){return el.x||el.y}function nl(e){return[e("x"),e("y")]}function al(e){return e.max-e.min}function rl(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=a,e.originPoint=Fr(t.min,t.max,e.origin),e.scale=al(n)/al(t),e.translate=Fr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function sl(e,t,n,a){rl(e.x,t.x,n.x,a?a.originX:void 0),rl(e.y,t.y,n.y,a?a.originY:void 0)}function il(e,t,n){e.min=n.min+t.min,e.max=e.min+al(t)}function ol(e,t,n){e.min=t.min-n.min,e.max=e.min+al(t)}function ll(e,t,n){ol(e.x,t.x,n.x),ol(e.y,t.y,n.y)}const cl=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ul(e){return cl.has(e.tagName)||!0===e.isContentEditable}function dl(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n)}const hl=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function pl(e){return{point:{x:e.pageX,y:e.pageY}}}function fl(e,t,n,a){return dl(e,t,(e=>t=>hl(t)&&e(t,pl(t)))(n),a)}const ml=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},gl=(e,t)=>Math.abs(e-t);const xl=new Set(["auto","scroll"]);class vl{constructor(e,t){let{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:r=!1,distanceThreshold:s=3,element:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=wl(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=gl(e.x,t.x),a=gl(e.y,t.y);return Math.sqrt(n**2+a**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:a}=e,{timestamp:r}=_a;this.history.push(m(m({},a),{},{timestamp:r}));const{onStart:s,onMove:i}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=yl(t,this.transformPagePoint),Ia.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:a,resumeAnimation:r}=this.handlers;if(!this.dragSnapToOrigin&&this.startEvent||r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=wl("pointercancel"===e.type?this.lastMoveEventInfo:yl(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),a&&a(e,s)},!hl(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=a||window;const o=yl(pl(e),this.transformPagePoint),{point:l}=o,{timestamp:c}=_a;this.history=[m(m({},l),{},{timestamp:c})];const{onSessionStart:u}=t;u&&u(e,wl(o,this.history)),this.removeListeners=ni(fl(this.contextWindow,"pointermove",this.handlePointerMove),fl(this.contextWindow,"pointerup",this.handlePointerUp),fl(this.contextWindow,"pointercancel",this.handlePointerUp)),i&&this.startScrollTracking(i)}startScrollTracking(e){let t=e.parentElement;for(;t;){const e=getComputedStyle(t);(xl.has(e.overflowX)||xl.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,a=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},r=a.x-t.x,s=a.y-t.y;0===r&&0===s||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r,this.lastMoveEventInfo.point.y+=s):this.history.length>0&&(this.history[0].x-=r,this.history[0].y-=s),this.scrollPositions.set(e,a),Ia.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Aa(this.updatePoint)}}function yl(e,t){return t?{point:t(e.point)}:e}function bl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wl(e,t){let{point:n}=e;return{point:n,delta:bl(n,Nl(t)),offset:bl(n,kl(t)),velocity:jl(t,.1)}}function kl(e){return e[0]}function Nl(e){return e[e.length-1]}function jl(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,a=null;const r=Nl(e);for(;n>=0&&(a=e[n],!(r.timestamp-a.timestamp>Zs(t)));)n--;if(!a)return{x:0,y:0};const s=ei(r.timestamp-a.timestamp);if(0===s)return{x:0,y:0};const i={x:(r.x-a.x)/s,y:(r.y-a.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Sl(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Cl(e,t){let n=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,a]=[a,n]),{min:n,max:a}}const El=.35;function Tl(e,t,n){return{min:Il(e,t),max:Il(e,n)}}function Il(e,t){return"number"===typeof e?e:e[t]||0}const Al=new WeakMap;class _l{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:a}=this.visualElement;if(a&&!1===a.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new vl(e,{onSessionStart:e=>{t?(this.stopAnimation(),this.snapToCursor(pl(e).point)):this.pauseAnimation()},onStart:(e,t)=>{this.stopAnimation();const{drag:n,dragPropagation:a,onDragStart:r}=this.getProps();if(n&&!a&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?el[s]?null:(el[s]=!0,()=>{el[s]=!1}):el.x||el.y?null:(el.x=el.y=!0,()=>{el.x=el.y=!1}),!this.openDragLock))return;var s;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nl(e=>{let t=this.getAxisMotionValue(e).get()||0;if(wn.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const a=n.layout.layoutBox[e];if(a){t=al(a)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&Ia.postRender(()=>r(e,t)),Qs(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:a,onDirectionLock:r,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(a&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>nl(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:n,contextWindow:ml(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,a=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!a||!n)return;const{velocity:s}=a;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ia.postRender(()=>i(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){const{drag:a}=this.getProps();if(!n||!Ol(e,a,this.currentDirection))return;const r=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:a,max:r}=t;return void 0!==a&&e<a?e=n?Fr(a,e,n.min):Math.max(e,a):void 0!==r&&e>r&&(e=n?Fr(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),r.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&Ls(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!a)&&function(e,t){let{top:n,left:a,bottom:r,right:s}=t;return{x:Sl(e.x,a,s),y:Sl(e.y,n,r)}}(a.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:El;return!1===e?e=0:!0===e&&(e=El),{x:Tl(e,"left","right"),y:Tl(e,"top","bottom")}}(n),r!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&nl(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(a.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ls(e))return!1;const n=e.current;ea(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const r=function(e,t,n){const a=ss(e,n),{scroll:r}=t;return r&&(ns(a.x,r.offset.x),ns(a.y,r.offset.y)),a}(n,a.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:Cl(e.x,t.x),y:Cl(e.y,t.y)}}(a.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Hr(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:a,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=nl(i=>{if(!Ol(i,t,this.currentDirection))return;let l=o&&o[i]||{};s&&(l={min:0,max:0});const c=a?200:1e6,u=a?40:1e7,d=m(m({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(i,d)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Qs(this.visualElement,e),n.start(Mo(e,n,0,t,this.visualElement,!1))}stopAnimation(){nl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nl(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),a=n[t];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){nl(t=>{const{drag:n}=this.getProps();if(!Ol(t,n,this.currentDirection))return;const{projection:a}=this.visualElement,r=this.getAxisMotionValue(t);if(a&&a.layout){const{min:n,max:s}=a.layout.layoutBox[t],i=r.get()||0;r.set(e[t]-Fr(n,s,.5)+i)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Ls(t)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};nl(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();a[e]=function(e,t){let n=.5;const a=al(e),r=al(t);return r>a?n=Yi(t.min,t.max-a,e.min):a>r&&(n=Yi(e.min,e.max-r,t.min)),on(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),nl(t=>{if(!Ol(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:s}=this.constraints[t];n.set(Fr(r,s,a[t]))})}addListeners(){if(!this.visualElement.current)return;Al.set(this.visualElement,this);const e=this.visualElement.current,t=fl(e,"pointerdown",t=>{const{drag:n,dragListener:a=!0}=this.getProps(),r=t.target,s=r!==e&&ul(r);n&&a&&!s&&this.start(t)}),n=()=>{const{dragConstraints:e}=this.getProps();Ls(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,r=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ia.read(n);const s=dl(window,"resize",()=>this.scalePositionWithinConstraints()),i=a.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(nl(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{s(),t(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:r=!1,dragElastic:s=El,dragMomentum:i=!0}=e;return m(m({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:a,dragConstraints:r,dragElastic:s,dragMomentum:i})}}function Ol(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Rl=e=>(t,n)=>{e&&Ia.postRender(()=>e(t,n))};const Pl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Ml=!1;class Dl extends o.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:a}=this.props,{projection:r}=e;r&&(t.group&&t.group.add(r),n&&n.register&&a&&n.register(r),Ml&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions(m(m({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),Pl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:a,isPresent:r}=this.props,{projection:s}=n;return s?(s.isPresent=r,Ml=!0,a||e.layoutDependency!==t||void 0===t||e.isPresent!==r?s.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?s.promote():s.relegate()||Ia.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xa.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:a}=e;Ml=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Fl(e){const[t,n]=en(),a=(0,o.useContext)(Bt);return(0,zt.jsx)(Dl,m(m({},e),{},{layoutGroup:a,switchLayoutGroup:(0,o.useContext)(Fs),isPresent:t,safeToRemove:n}))}function Ll(e,t,n,a,r){return e=$r(e-=t,1/n,a),void 0!==r&&(e=$r(e,1/r,a)),e}function zl(e,t,n,a,r){let[s,i,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;wn.test(t)&&(t=parseFloat(t),t=Fr(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Fr(s.min,s.max,a);e===s&&(o-=t),e.min=Ll(e.min,t,n,o,r),e.max=Ll(e.max,t,n,o,r)}(e,t[s],t[i],t[o],t.scale,a,r)}const Bl=["x","scaleX","originX"],Ul=["y","scaleY","originY"];function Wl(e,t,n,a){zl(e.x,t,Bl,n?n.x:void 0,a?a.x:void 0),zl(e.y,t,Ul,n?n.y:void 0,a?a.y:void 0)}function Vl(e,t){e.min=t.min,e.max=t.max}function Hl(e,t){Vl(e.x,t.x),Vl(e.y,t.y)}function Gl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ql(e){return 0===e.translate&&1===e.scale}function Kl(e){return ql(e.x)&&ql(e.y)}function Xl(e,t){return e.min===t.min&&e.max===t.max}function Yl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $l(e,t){return Yl(e.x,t.x)&&Yl(e.y,t.y)}function Ql(e){return al(e.x)/al(e.y)}function Jl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}const Zl=["TopLeft","TopRight","BottomLeft","BottomRight"],ec=Zl.length,tc=e=>"string"===typeof e?parseFloat(e):e,nc=e=>"number"===typeof e||kn.test(e);function ac(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const rc=ic(0,.5,Hi),sc=ic(.5,.95,ja);function ic(e,t,n){return a=>a<e?0:a>t?1:n(Yi(e,t,a))}function oc(e){return Gt(e)&&"ownerSVGElement"in e}const lc=(e,t)=>e.depth-t.depth;class cc{constructor(){this.children=[],this.isDirty=!1}add(e){Ga(this.children,e),this.isDirty=!0}remove(e){qa(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lc),this.isDirty=!1,this.children.forEach(e)}}function uc(e,t){const n=Ja.now(),a=r=>{let{timestamp:s}=r;const i=s-n;i>=t&&(Aa(a),e(i-t))};return Ia.setup(a,!0),()=>Aa(a)}class dc{constructor(){this.members=[]}add(e){Ga(this.members,e),e.scheduleRender()}remove(e){if(qa(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let a=t;a>=0;a--){const e=this.members[a];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;!1===a&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const hc={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},pc=["","X","Y","Z"];let fc=0;function mc(e,t,n,a){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),a&&(a[e]=0))}function gc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Js(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ia,!(t||a))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&gc(a)}function xc(e){let{attachResizeListener:t,defaultParent:n,measureScroll:a,checkIsScrollRoot:r,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=fc++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ea.value&&(hc.nodes=hc.calculatedTargetDeltas=hc.calculatedProjections=0),this.nodes.forEach(bc),this.nodes.forEach(Ec),this.nodes.forEach(Tc),this.nodes.forEach(wc),Ea.addProjectionMetrics&&Ea.addProjectionMetrics(hc)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new cc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ka),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];t&&t.notify(...a)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=oc(e)&&!(oc(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:a,layout:r,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||a)&&(this.isLayoutDirty=!0),t){let n,a=0;const r=()=>this.root.updateBlockedByResize=!1;Ia.read(()=>{a=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==a&&(a=e,this.root.updateBlockedByResize=!0,n&&n(),n=uc(r,250),Pl.hasAnimatedSinceResize&&(Pl.hasAnimatedSinceResize=!1,this.nodes.forEach(Cc)))})}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&s&&(a||r)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:a,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||s.getDefaultTransition()||Pc,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!$l(this.targetLayout,r),u=!n&&a;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=m(m({},qs(i,"layout")),{},{onPlay:o,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else n||Cc(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ic),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const a=this.getTransformTemplate();this.prevTransformTemplateValue=a?a(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Nc);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(jc);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Sc),this.nodes.forEach(vc),this.nodes.forEach(yc)):this.nodes.forEach(jc),this.clearAllSnapshots();const e=Ja.now();_a.delta=on(0,1e3/60,e-_a.timestamp),_a.timestamp=e,_a.isProcessing=!0,Oa.update.process(_a),Oa.preRender.process(_a),Oa.render.process(_a),_a.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xa.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kc),this.sharedNodes.forEach(Ac)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ia.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ia.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||al(this.snapshot.measuredBox.x)||al(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Kl(this.projectionDelta),n=this.getTransformTemplate(),a=n?n(this.latestValues,""):void 0,r=a!==this.prevTransformTemplateValue;e&&this.instance&&(t||Kr(this.latestValues)||r)&&(s(this.instance,a),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var a;return e&&(n=this.removeTransform(n)),Fc((a=n).x),Fc(a.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(zc))){const{scroll:e}=this.root;e&&(ns(n.x,e.offset.x),ns(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Hl(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let a=0;a<this.path.length;a++){const t=this.path[a],{scroll:r,options:s}=t;t!==this.root&&r&&s.layoutScroll&&(r.wasRoot&&Hl(n,e),ns(n.x,r.offset.x),ns(n.y,r.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Hl(n,e);for(let a=0;a<this.path.length;a++){const e=this.path[a];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&rs(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Kr(e.latestValues)&&rs(n,e.latestValues)}return Kr(this.latestValues)&&rs(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Hl(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Kr(e.latestValues))continue;qr(e.latestValues)&&e.updateSnapshot();const a=Gn();Hl(a,e.measurePageBox()),Wl(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,a)}return Kr(this.latestValues)&&Wl(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=m(m(m({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_a.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const a=Boolean(this.resumingFrom)||this!==n;if(!(t||a&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:s}=this.options;if(!this.layout||!r&&!s)return;this.resolvedRelativeTargetAt=_a.timestamp;const i=this.getClosestProjectingParent();var o,l,c;(i&&this.linkedParentVersion!==i.layoutVersion&&!i.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(i&&i.layout?this.createRelativeTarget(i,this.layout.layoutBox,i.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,l=this.relativeTarget,c=this.relativeParent.target,il(o.x,l.x,c.x),il(o.y,l.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Hl(this.target,this.layout.layoutBox),Zr(this.target,this.targetDelta)):Hl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,i&&Boolean(i.resumingFrom)===Boolean(this.resumingFrom)&&!i.options.layoutScroll&&i.target&&1!==this.animationProgress?this.createRelativeTarget(i,this.target,i.target):this.relativeParent=this.relativeTarget=void 0),Ea.value&&hc.calculatedTargetDeltas++)}getClosestProjectingParent(){if(this.parent&&!qr(this.parent.latestValues)&&!Xr(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ll(this.relativeTargetOrigin,t,n),Hl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let a=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(a=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===_a.timestamp&&(a=!1),a)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;Hl(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let s,i;t.x=t.y=1;for(let o=0;o<r;o++){s=n[o],i=s.projectionDelta;const{visualElement:r}=s.options;r&&r.props.style&&"contents"===r.props.style.display||(a&&s.options.layoutScroll&&s.scroll&&s!==s.root&&rs(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Zr(e,i)),a&&Kr(s.latestValues)&&rs(e,s.latestValues))}t.x<ts&&t.x>es&&(t.x=1),t.y<ts&&t.y>es&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Gl(this.prevProjectionDelta.x,this.projectionDelta.x),Gl(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),sl(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Jl(this.projectionDelta.x,this.prevProjectionDelta.x)&&Jl(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ea.value&&hc.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,a=n?n.latestValues:{},r=m({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Rc));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;_c(s.x,e.x,n),_c(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ll(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,a){Oc(e.x,t.x,n.x,a),Oc(e.y,t.y,n.y,a)}(this.relativeTarget,this.relativeTargetOrigin,i,n),d&&function(e,t){return Xl(e.x,t.x)&&Xl(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Hl(d,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,n,a,r,s){var i,o;if(r)e.opacity=Fr(0,null!==(i=n.opacity)&&void 0!==i?i:1,rc(a)),e.opacityExit=Fr(null!==(o=t.opacity)&&void 0!==o?o:1,0,sc(a));else if(s){var l,c;e.opacity=Fr(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,a)}for(let u=0;u<ec;u++){const r="border".concat(Zl[u],"Radius");let s=ac(t,r),i=ac(n,r);void 0===s&&void 0===i||(s||(s=0),i||(i=0),0===s||0===i||nc(s)===nc(i)?(e[r]=Math.max(Fr(tc(s),tc(i),a),0),(wn.test(i)||wn.test(s))&&(e[r]+="%")):e[r]=i)}(t.rotate||n.rotate)&&(e.rotate=Fr(t.rotate||0,n.rotate||0,a))}(r,a,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ia.update(()=>{Pl.hasAnimatedSinceResize=!0,ai.layout++,this.motionValue||(this.motionValue=nr(0)),this.currentAnimation=function(e,t,n){const a=qn(e)?e:nr(e);return a.start(Mo("",a,t,n)),a.animation}(this.motionValue,[0,1e3],m(m({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{ai.layout--},onComplete:()=>{ai.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:a,latestValues:r}=e;if(t&&n&&a){if(this!==e&&this.layout&&a&&Lc(this.options.animationType,this.layout.layoutBox,a.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=al(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const a=al(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+a}Hl(t,n),rs(t,r),sl(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new dc);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this.getStack();a&&a.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const a={};n.z&&mc("z",e,a,this.animationValues);for(let r=0;r<pc.length;r++)mc("rotate".concat(pc[r]),e,a,this.animationValues),mc("skew".concat(pc[r]),e,a,this.animationValues);e.render();for(const r in a)e.setStaticValue(r,a[r]),this.animationValues&&(this.animationValues[r]=a[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=Ss(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Ss(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Kr(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const r=a.animationValues||a.latestValues;this.applyTransformsToTarget();let s=function(e,t,n){let a="";const r=e.x.translate/t.x,s=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((r||s||i)&&(a="translate3d(".concat(r,"px, ").concat(s,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(a+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:s,skewX:i,skewY:o}=n;e&&(a="perspective(".concat(e,"px) ").concat(a)),t&&(a+="rotate(".concat(t,"deg) ")),r&&(a+="rotateX(".concat(r,"deg) ")),s&&(a+="rotateY(".concat(s,"deg) ")),i&&(a+="skewX(".concat(i,"deg) ")),o&&(a+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(a+="scale(".concat(o,", ").concat(l,")")),a||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);n&&(s=n(r,s)),e.transform=s;const{x:i,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*o.origin,"% 0"),a.animationValues)?e.opacity=a===this?null!==(l=null!==(c=r.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=a===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const u in zr){if(void 0===r[u])continue;const{correct:t,applyTo:n,isCSSVariable:i}=zr[u],o="none"===s?r[u]:t(r[u],a);if(n){const t=n.length;for(let a=0;a<t;a++)e[n[a]]=o}else i?this.options.visualElement.renderState.vars[u]=o:e[u]=o}this.options.layoutId&&(e.pointerEvents=a===this?Ss(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Nc),this.root.sharedNodes.clear()}}}function vc(e){e.updateLayout()}function yc(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:a}=e.layout,{animationType:r}=e.options,s=n.source!==e.layout.source;"size"===r?nl(e=>{const a=s?n.measuredBox[e]:n.layoutBox[e],r=al(a);a.min=t[e].min,a.max=a.min+r}):Lc(r,n.layoutBox,t)&&nl(a=>{const r=s?n.measuredBox[a]:n.layoutBox[a],i=al(t[a]);r.max=r.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[a].max=e.relativeTarget[a].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};sl(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?sl(o,e.applyTransform(a,!0),n.measuredBox):sl(o,t,n.layoutBox);const l=!Kl(i);let c=!1;if(!e.resumeFrom){const a=e.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:r,layout:s}=a;if(r&&s){const i={x:{min:0,max:0},y:{min:0,max:0}};ll(i,n.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};ll(o,t,s.layoutBox),$l(i,o)||(c=!0),a.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=a)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function bc(e){Ea.value&&hc.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function kc(e){e.clearSnapshot()}function Nc(e){e.clearMeasurements()}function jc(e){e.isLayoutDirty=!1}function Sc(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Cc(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ec(e){e.resolveTargetDelta()}function Tc(e){e.calcProjection()}function Ic(e){e.resetSkewAndRotation()}function Ac(e){e.removeLeadSnapshot()}function _c(e,t,n){e.translate=Fr(t.translate,0,n),e.scale=Fr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Oc(e,t,n,a){e.min=Fr(t.min,n.min,a),e.max=Fr(t.max,n.max,a)}function Rc(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Pc={duration:.45,ease:[.4,0,.1,1]},Mc=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Dc=Mc("applewebkit/")&&!Mc("chrome/")?Math.round:ja;function Fc(e){e.min=Dc(e.min),e.max=Dc(e.max)}function Lc(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(Ql(t),Ql(n),.2)}function zc(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Bc=xc({attachResizeListener:(e,t)=>dl(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||(null===(e=document.body)||void 0===e?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||(null===(t=document.body)||void 0===t?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Uc={current:void 0},Wc=xc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Uc.current){const e=new Bc({});e.mount(window),e.setOptions({layoutScroll:!0}),Uc.current=e}return Uc.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Vc={pan:{Feature:class extends Hs{constructor(){super(...arguments),this.removePointerDownListener=ja}onPointerDown(e){this.session=new vl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ml(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Rl(e),onStart:Rl(t),onMove:n,onEnd:(e,t)=>{delete this.session,a&&Ia.postRender(()=>a(e,t))}}}mount(){this.removePointerDownListener=fl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Hs{constructor(e){super(e),this.removeGroupControls=ja,this.removeListeners=ja,this.controls=new _l(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ja}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.endPanSession()}},ProjectionNode:Wc,MeasureLayout:Fl}};function Hc(e,t,n){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"===typeof e){var a;let r=document;t&&(r=t.current);const s=null!==(a=null===n||void 0===n?void 0:n[e])&&void 0!==a?a:r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(e=>null!=e)}function Gc(e,t){const n=Hc(e),a=new AbortController;return[n,m(m({passive:!0},t),{},{signal:a.signal}),()=>a.abort()]}function qc(e){return!("touch"===e.pointerType||tl())}function Kc(e,t,n){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=a["onHover"+n];r&&Ia.postRender(()=>r(t,pl(t)))}const Xc=(e,t)=>!!t&&(e===t||Xc(e,t.parentElement)),Yc=new WeakSet;function $c(e){return t=>{"Enter"===t.key&&e(t)}}function Qc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Jc(e){return hl(e)&&!tl()}function Zc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[a,r,s]=Gc(e,n),i=e=>{const a=e.currentTarget;if(!Jc(e))return;Yc.add(a);const s=t(a,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),Yc.has(a)&&Yc.delete(a),Jc(e)&&"function"===typeof s&&s(e,{success:t})},o=e=>{i(e,a===window||a===document||n.useGlobalTarget||Xc(a,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,r),window.addEventListener("pointercancel",l,r)};return a.forEach(e=>{(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,r),qt(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const a=$c(()=>{if(Yc.has(n))return;Qc(n,"down");const e=$c(()=>{Qc(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Qc(n,"cancel"),t)});n.addEventListener("keydown",a,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",a),t)})(e,r)),ul(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}function eu(e,t,n){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=a["onTap"+("End"===n?"":n)];r&&Ia.postRender(()=>r(t,pl(t)))}const tu=["root"],nu=new WeakMap,au=new WeakMap,ru=e=>{const t=nu.get(e.target);t&&t(e)},su=e=>{e.forEach(ru)};function iu(e,t,n){const a=function(e){let{root:t}=e,n=u(e,tu);const a=t||document;au.has(a)||au.set(a,{});const r=au.get(a),s=JSON.stringify(n);return r[s]||(r[s]=new IntersectionObserver(su,m({root:t},n))),r[s]}(t);return nu.set(e,n),a.observe(e),()=>{nu.delete(e),a.unobserve(e)}}const ou={some:0,all:1};const lu={inView:{Feature:class extends Hs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:a="some",once:r}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof a?a:ou[a]};return iu(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:a}=this.node.getProps(),s=t?n:a;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Hs{mount(){const{current:e}=this.node;e&&(this.unmount=Zc(e,(e,t)=>(eu(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return eu(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Hs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(jEe){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ni(dl(this.node.current,"focus",()=>this.onFocus()),dl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Hs{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[a,r,s]=Gc(e,n),i=e=>{if(!qc(e))return;const{target:n}=e,a=t(n,e);if("function"!==typeof a||!n)return;const s=e=>{qc(e)&&(a(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,r)};return a.forEach(e=>{e.addEventListener("pointerenter",i,r)}),s}(e,(e,t)=>(Kc(this.node,t,"Start"),e=>Kc(this.node,e,"End"))))}unmount(){}}}},cu={layout:{ProjectionNode:Wc,MeasureLayout:Fl}},uu=Vs(m(m(m(m({},Zo),lu),Vc),cu),cs);function du(e,t){return function(){return e.apply(t,arguments)}}const{toString:hu}=Object.prototype,{getPrototypeOf:pu}=Object,{iterator:fu,toStringTag:mu}=Symbol,gu=(xu=Object.create(null),e=>{const t=hu.call(e);return xu[t]||(xu[t]=t.slice(8,-1).toLowerCase())});var xu;const vu=e=>(e=e.toLowerCase(),t=>gu(t)===e),yu=e=>t=>typeof t===e,{isArray:bu}=Array,wu=yu("undefined");function ku(e){return null!==e&&!wu(e)&&null!==e.constructor&&!wu(e.constructor)&&Su(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Nu=vu("ArrayBuffer");const ju=yu("string"),Su=yu("function"),Cu=yu("number"),Eu=e=>null!==e&&"object"===typeof e,Tu=e=>{if("object"!==gu(e))return!1;const t=pu(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(mu in e)&&!(fu in e)},Iu=vu("Date"),Au=vu("File"),_u=vu("Blob"),Ou=vu("FileList"),Ru=vu("URLSearchParams"),[Pu,Mu,Du,Fu]=["ReadableStream","Request","Response","Headers"].map(vu);function Lu(e,t){let n,a,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),bu(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(ku(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let i;for(n=0;n<s;n++)i=a[n],t.call(null,e[i],i,e)}}function zu(e,t){if(ku(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a,r=n.length;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const Bu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,Uu=e=>!wu(e)&&e!==Bu;const Wu=(Vu="undefined"!==typeof Uint8Array&&pu(Uint8Array),e=>Vu&&e instanceof Vu);var Vu;const Hu=vu("HTMLFormElement"),Gu=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),qu=vu("RegExp"),Ku=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Lu(n,(n,r)=>{let s;!1!==(s=t(n,r,e))&&(a[r]=s||n)}),Object.defineProperties(e,a)};const Xu=vu("AsyncFunction"),Yu=($u="function"===typeof setImmediate,Qu=Su(Bu.postMessage),$u?setImmediate:Qu?((e,t)=>(Bu.addEventListener("message",n=>{let{source:a,data:r}=n;a===Bu&&r===e&&t.length&&t.shift()()},!1),n=>{t.push(n),Bu.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var $u,Qu;const Ju="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Bu):"undefined"!==typeof process&&process.nextTick||Yu,Zu={isArray:bu,isArrayBuffer:Nu,isBuffer:ku,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Su(e.append)&&("formdata"===(t=gu(e))||"object"===t&&Su(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Nu(e.buffer),t},isString:ju,isNumber:Cu,isBoolean:e=>!0===e||!1===e,isObject:Eu,isPlainObject:Tu,isEmptyObject:e=>{if(!Eu(e)||ku(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(jEe){return!1}},isReadableStream:Pu,isRequest:Mu,isResponse:Du,isHeaders:Fu,isUndefined:wu,isDate:Iu,isFile:Au,isBlob:_u,isRegExp:qu,isFunction:Su,isStream:e=>Eu(e)&&Su(e.pipe),isURLSearchParams:Ru,isTypedArray:Wu,isFileList:Ou,forEach:Lu,merge:function e(){const{caseless:t,skipUndefined:n}=Uu(this)&&this||{},a={},r=(r,s)=>{const i=t&&zu(a,s)||s;Tu(a[i])&&Tu(r)?a[i]=e(a[i],r):Tu(r)?a[i]=e({},r):bu(r)?a[i]=r.slice():n&&wu(r)||(a[i]=r)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Lu(arguments[s],r);return a},extend:function(e,t,n){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Lu(t,(t,a)=>{n&&Su(t)?e[a]=du(t,n):e[a]=t},{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,a)=>{let r,s,i;const o={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)i=r[s],a&&!a(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&pu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:gu,kindOfTest:vu,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return-1!==a&&a===n},toArray:e=>{if(!e)return null;if(bu(e))return e;let t=e.length;if(!Cu(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[fu]).call(e);let a;for(;(a=n.next())&&!a.done;){const n=a.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const a=[];for(;null!==(n=e.exec(t));)a.push(n);return a},isHTMLForm:Hu,hasOwnProperty:Gu,hasOwnProp:Gu,reduceDescriptors:Ku,freezeMethods:e=>{Ku(e,(t,n)=>{if(Su(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const a=e[n];Su(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},a=e=>{e.forEach(e=>{n[e]=!0})};return bu(e)?a(e):a(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:zu,global:Bu,isContextDefined:Uu,isSpecCompliantForm:function(e){return!!(e&&Su(e.append)&&"FormData"===e[mu]&&e[fu])},toJSONObject:e=>{const t=new Array(10),n=(e,a)=>{if(Eu(e)){if(t.indexOf(e)>=0)return;if(ku(e))return e;if(!("toJSON"in e)){t[a]=e;const r=bu(e)?[]:{};return Lu(e,(e,t)=>{const s=n(e,a+1);!wu(s)&&(r[t]=s)}),t[a]=void 0,r}}return e};return n(e,0)},isAsyncFn:Xu,isThenable:e=>e&&(Eu(e)||Su(e))&&Su(e.then)&&Su(e.catch),setImmediate:Yu,asap:Ju,isIterable:e=>null!=e&&Su(e[fu])};function ed(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}Zu.inherits(ed,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Zu.toJSONObject(this.config),code:this.code,status:this.status}}});const td=ed.prototype,nd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nd[e]={value:e}}),Object.defineProperties(ed,nd),Object.defineProperty(td,"isAxiosError",{value:!0}),ed.from=(e,t,n,a,r,s)=>{const i=Object.create(td);Zu.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return ed.call(i,o,l,n,a,r),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};const ad=ed;function rd(e){return Zu.isPlainObject(e)||Zu.isArray(e)}function sd(e){return Zu.endsWith(e,"[]")?e.slice(0,-2):e}function id(e,t,n){return e?e.concat(t).map(function(e,t){return e=sd(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const od=Zu.toFlatObject(Zu,{},null,function(e){return/^is[A-Z]/.test(e)});const ld=function(e,t,n){if(!Zu.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(n=Zu.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Zu.isUndefined(t[e])})).metaTokens,r=n.visitor||c,s=n.dots,i=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Zu.isSpecCompliantForm(t);if(!Zu.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Zu.isDate(e))return e.toISOString();if(Zu.isBoolean(e))return e.toString();if(!o&&Zu.isBlob(e))throw new ad("Blob is not supported. Use a Buffer instead.");return Zu.isArrayBuffer(e)||Zu.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let o=e;if(e&&!r&&"object"===typeof e)if(Zu.endsWith(n,"{}"))n=a?n:n.slice(0,-2),e=JSON.stringify(e);else if(Zu.isArray(e)&&function(e){return Zu.isArray(e)&&!e.some(rd)}(e)||(Zu.isFileList(e)||Zu.endsWith(n,"[]"))&&(o=Zu.toArray(e)))return n=sd(n),o.forEach(function(e,a){!Zu.isUndefined(e)&&null!==e&&t.append(!0===i?id([n],a,s):null===i?n:n+"[]",l(e))}),!1;return!!rd(e)||(t.append(id(r,n,s),l(e)),!1)}const u=[],d=Object.assign(od,{defaultVisitor:c,convertValue:l,isVisitable:rd});if(!Zu.isObject(e))throw new TypeError("data must be an object");return function e(n,a){if(!Zu.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+a.join("."));u.push(n),Zu.forEach(n,function(n,s){!0===(!(Zu.isUndefined(n)||null===n)&&r.call(t,n,Zu.isString(s)?s.trim():s,a,d))&&e(n,a?a.concat(s):[s])}),u.pop()}}(e),t};function cd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ud(e,t){this._pairs=[],e&&ld(e,this,t)}const dd=ud.prototype;dd.append=function(e,t){this._pairs.push([e,t])},dd.toString=function(e){const t=e?function(t){return e.call(this,t,cd)}:cd;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const hd=ud;function pd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fd(e,t,n){if(!t)return e;const a=n&&n.encode||pd;Zu.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):Zu.isURLSearchParams(t)?t.toString():new hd(t,n).toString(a),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const md=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Zu.forEach(this.handlers,function(t){null!==t&&e(t)})}},gd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xd={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:hd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},vd="undefined"!==typeof window&&"undefined"!==typeof document,yd="object"===typeof navigator&&navigator||void 0,bd=vd&&(!yd||["ReactNative","NativeScript","NS"].indexOf(yd.product)<0),wd="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,kd=vd&&window.location.href||"http://localhost",Nd=m(m({},e),xd);const jd=function(e){function t(e,n,a,r){let s=e[r++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=r>=e.length;if(s=!s&&Zu.isArray(a)?a.length:s,o)return Zu.hasOwnProp(a,s)?a[s]=[a[s],n]:a[s]=n,!i;a[s]&&Zu.isObject(a[s])||(a[s]=[]);return t(e,n,a[s],r)&&Zu.isArray(a[s])&&(a[s]=function(e){const t={},n=Object.keys(e);let a;const r=n.length;let s;for(a=0;a<r;a++)s=n[a],t[s]=e[s];return t}(a[s])),!i}if(Zu.isFormData(e)&&Zu.isFunction(e.entries)){const n={};return Zu.forEachEntry(e,(e,a)=>{t(function(e){return Zu.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,n,0)}),n}return null};const Sd={transitional:gd,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,r=Zu.isObject(e);r&&Zu.isHTMLForm(e)&&(e=new FormData(e));if(Zu.isFormData(e))return a?JSON.stringify(jd(e)):e;if(Zu.isArrayBuffer(e)||Zu.isBuffer(e)||Zu.isStream(e)||Zu.isFile(e)||Zu.isBlob(e)||Zu.isReadableStream(e))return e;if(Zu.isArrayBufferView(e))return e.buffer;if(Zu.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ld(e,new Nd.classes.URLSearchParams,m({visitor:function(e,t,n,a){return Nd.isNode&&Zu.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Zu.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ld(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||a?(t.setContentType("application/json",!1),function(e,t,n){if(Zu.isString(e))try{return(t||JSON.parse)(e),Zu.trim(e)}catch(jEe){if("SyntaxError"!==jEe.name)throw jEe}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Sd.transitional,n=t&&t.forcedJSONParsing,a="json"===this.responseType;if(Zu.isResponse(e)||Zu.isReadableStream(e))return e;if(e&&Zu.isString(e)&&(n&&!this.responseType||a)){const n=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(jEe){if(n){if("SyntaxError"===jEe.name)throw ad.from(jEe,ad.ERR_BAD_RESPONSE,this,null,this.response);throw jEe}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nd.classes.FormData,Blob:Nd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Zu.forEach(["delete","get","head","post","put","patch"],e=>{Sd.headers[e]={}});const Cd=Sd,Ed=Zu.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Td=Symbol("internals");function Id(e){return e&&String(e).trim().toLowerCase()}function Ad(e){return!1===e||null==e?e:Zu.isArray(e)?e.map(Ad):String(e)}function _d(e,t,n,a,r){return Zu.isFunction(a)?a.call(this,t,n):(r&&(t=n),Zu.isString(t)?Zu.isString(a)?-1!==t.indexOf(a):Zu.isRegExp(a)?a.test(t):void 0:void 0)}class Od{constructor(e){e&&this.set(e)}set(e,t,n){const a=this;function r(e,t,n){const r=Id(t);if(!r)throw new Error("header name must be a non-empty string");const s=Zu.findKey(a,r);(!s||void 0===a[s]||!0===n||void 0===n&&!1!==a[s])&&(a[s||t]=Ad(e))}const s=(e,t)=>Zu.forEach(e,(e,n)=>r(e,n,t));if(Zu.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Zu.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,a,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),a=e.substring(r+1).trim(),!n||t[n]&&Ed[n]||("set-cookie"===n?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t})(e),t);else if(Zu.isObject(e)&&Zu.isIterable(e)){let n,a,r={};for(const t of e){if(!Zu.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[a=t[0]]=(n=r[a])?Zu.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=Id(e)){const n=Zu.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}(e);if(Zu.isFunction(t))return t.call(this,e,n);if(Zu.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Id(e)){const n=Zu.findKey(this,e);return!(!n||void 0===this[n]||t&&!_d(0,this[n],n,t))}return!1}delete(e,t){const n=this;let a=!1;function r(e){if(e=Id(e)){const r=Zu.findKey(n,e);!r||t&&!_d(0,n[r],r,t)||(delete n[r],a=!0)}}return Zu.isArray(e)?e.forEach(r):r(e),a}clear(e){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const r=t[n];e&&!_d(0,this[r],r,e,!0)||(delete this[r],a=!0)}return a}normalize(e){const t=this,n={};return Zu.forEach(this,(a,r)=>{const s=Zu.findKey(n,r);if(s)return t[s]=Ad(a),void delete t[r];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(r):String(r).trim();i!==r&&delete t[r],t[i]=Ad(a),n[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Zu.forEach(this,(n,a)=>{null!=n&&!1!==n&&(t[a]=e&&Zu.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Td]=this[Td]={accessors:{}}).accessors,n=this.prototype;function a(e){const a=Id(e);t[a]||(!function(e,t){const n=Zu.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(e,n,r){return this[a].call(this,t,e,n,r)},configurable:!0})})}(n,e),t[a]=!0)}return Zu.isArray(e)?e.forEach(a):a(e),this}}Od.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Zu.reduceDescriptors(Od.prototype,(e,t)=>{let{value:n}=e,a=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[a]=e}}}),Zu.freezeMethods(Od);const Rd=Od;function Pd(e,t){const n=this||Cd,a=t||n,r=Rd.from(a.headers);let s=a.data;return Zu.forEach(e,function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function Md(e){return!(!e||!e.__CANCEL__)}function Dd(e,t,n){ad.call(this,null==e?"canceled":e,ad.ERR_CANCELED,t,n),this.name="CanceledError"}Zu.inherits(Dd,ad,{__CANCEL__:!0});const Fd=Dd;function Ld(e,t,n){const a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new ad("Request failed with status code "+n.status,[ad.ERR_BAD_REQUEST,ad.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const zd=function(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=a[i];r||(r=l),n[s]=o,a[s]=l;let u=i,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Bd=function(e,t){let n,a,r=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,a&&(clearTimeout(a),a=null),e(...t)};return[function(){const e=Date.now(),t=e-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(n=l,a||(a=setTimeout(()=>{a=null,i(n)},s-t)))},()=>n&&i(n)]},Ud=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const r=zd(50,250);return Bd(n=>{const s=n.loaded,i=n.lengthComputable?n.total:void 0,o=s-a,l=r(o);a=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Wd=(e,t)=>{const n=null!=e;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},Vd=e=>function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Zu.asap(()=>e(...n))},Hd=Nd.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Nd.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Nd.origin),Nd.navigator&&/(msie|trident)/i.test(Nd.navigator.userAgent)):()=>!0,Gd=Nd.hasStandardBrowserEnv?{write(e,t,n,a,r,s,i){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];Zu.isNumber(n)&&o.push("expires=".concat(new Date(n).toUTCString())),Zu.isString(a)&&o.push("path=".concat(a)),Zu.isString(r)&&o.push("domain=".concat(r)),!0===s&&o.push("secure"),Zu.isString(i)&&o.push("SameSite=".concat(i)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function qd(e,t,n){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kd=e=>e instanceof Rd?m({},e):e;function Xd(e,t){t=t||{};const n={};function a(e,t,n,a){return Zu.isPlainObject(e)&&Zu.isPlainObject(t)?Zu.merge.call({caseless:a},e,t):Zu.isPlainObject(t)?Zu.merge({},t):Zu.isArray(t)?t.slice():t}function r(e,t,n,r){return Zu.isUndefined(t)?Zu.isUndefined(e)?void 0:a(void 0,e,0,r):a(e,t,0,r)}function s(e,t){if(!Zu.isUndefined(t))return a(void 0,t)}function i(e,t){return Zu.isUndefined(t)?Zu.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function o(n,r,s){return s in t?a(n,r):s in e?a(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>r(Kd(e),Kd(t),0,!0)};return Zu.forEach(Object.keys(m(m({},e),t)),function(a){const s=l[a]||r,i=s(e[a],t[a],a);Zu.isUndefined(i)&&s!==o||(n[a]=i)}),n}const Yd=e=>{const t=Xd({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:s,headers:i,auth:o}=t;if(t.headers=i=Rd.from(i),t.url=fd(qd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Zu.isFormData(n))if(Nd.hasStandardBrowserEnv||Nd.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Zu.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,a]=e;t.includes(n.toLowerCase())&&i.set(n,a)})}if(Nd.hasStandardBrowserEnv&&(a&&Zu.isFunction(a)&&(a=a(t)),a||!1!==a&&Hd(t.url))){const e=r&&s&&Gd.read(s);e&&i.set(r,e)}return t},$d="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const a=Yd(e);let r=a.data;const s=Rd.from(a.headers).normalize();let i,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=a;function f(){c&&c(),u&&u(),a.cancelToken&&a.cancelToken.unsubscribe(i),a.signal&&a.signal.removeEventListener("abort",i)}let m=new XMLHttpRequest;function g(){if(!m)return;const a=Rd.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ld(function(e){t(e),f()},function(e){n(e),f()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:a,config:e,request:m}),m=null}m.open(a.method.toUpperCase(),a.url,!0),m.timeout=a.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new ad("Request aborted",ad.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const a=t&&t.message?t.message:"Network Error",r=new ad(a,ad.ERR_NETWORK,e,m);r.event=t||null,n(r),m=null},m.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const r=a.transitional||gd;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),n(new ad(t,r.clarifyTimeoutError?ad.ETIMEDOUT:ad.ECONNABORTED,e,m)),m=null},void 0===r&&s.setContentType(null),"setRequestHeader"in m&&Zu.forEach(s.toJSON(),function(e,t){m.setRequestHeader(t,e)}),Zu.isUndefined(a.withCredentials)||(m.withCredentials=!!a.withCredentials),d&&"json"!==d&&(m.responseType=a.responseType),p&&([l,u]=Ud(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=Ud(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(i=t=>{m&&(n(!t||t.type?new Fd(null,e,m):t),m.abort(),m=null)},a.cancelToken&&a.cancelToken.subscribe(i),a.signal&&(a.signal.aborted?i():a.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);x&&-1===Nd.protocols.indexOf(x)?n(new ad("Unsupported protocol "+x+":",ad.ERR_BAD_REQUEST,e)):m.send(r||null)})},Qd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,a=new AbortController;const r=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;a.abort(t instanceof ad?t:new Fd(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,r(new ad("timeout ".concat(t," of ms exceeded"),ad.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:o}=a;return o.unsubscribe=()=>Zu.asap(i),o}};function Jd(e,t){this.v=e,this.k=t}function Zd(e){return function(){return new eh(e.apply(this,arguments))}}function eh(e){var t,n;function a(t,n){try{var s=e[t](n),i=s.value,o=i instanceof Jd;Promise.resolve(o?i.v:i).then(function(n){if(o){var l="return"===t?"return":"next";if(!i.k||n.done)return a(l,n);n=e[l](n).value}r(s.done?"return":"normal",n)},function(e){a("throw",e)})}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(s,i){var o={key:e,arg:r,resolve:s,reject:i,next:null};n?n=n.next=o:(t=n=o,a(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function th(e){return new Jd(e,0)}function nh(e){var t={},n=!1;function a(t,a){return n=!0,a=new Promise(function(n){n(e[t](a))}),{done:!1,value:new Jd(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):a("return",e)}),t}function ah(e){var t,n,a,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(a&&null!=(t=e[a]))return new rh(t.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function rh(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return rh=function(e){this.s=e,this.n=e.next},rh.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new rh(e)}eh.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},eh.prototype.next=function(e){return this._invoke("next",e)},eh.prototype.throw=function(e){return this._invoke("throw",e)},eh.prototype.return=function(e){return this._invoke("return",e)};const sh=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let a,r=0;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},ih=function(){var e=Zd(function*(e,t){var n,a=!1,r=!1;try{for(var s,i=ah(oh(e));a=!(s=yield th(i.next())).done;a=!1){const e=s.value;yield*nh(ah(sh(e,t)))}}catch(o){r=!0,n=o}finally{try{a&&null!=i.return&&(yield th(i.return()))}finally{if(r)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),oh=function(){var e=Zd(function*(e){if(e[Symbol.asyncIterator])return void(yield*nh(ah(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield th(t.read());if(e)break;yield n}}finally{yield th(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),lh=(e,t,n,a)=>{const r=ih(e,t);let s,i=0,o=e=>{s||(s=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await r.next();if(t)return o(),void e.close();let s=a.byteLength;if(n){let e=i+=s;n(e)}e.enqueue(new Uint8Array(a))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},{isFunction:ch}=Zu,uh=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Zu.global),{ReadableStream:dh,TextEncoder:hh}=Zu.global,ph=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return!!e(...n)}catch(jEe){return!1}},fh=e=>{e=Zu.merge.call({skipUndefined:!0},uh,e);const{fetch:t,Request:n,Response:a}=e,r=t?ch(t):"function"===typeof fetch,s=ch(n),i=ch(a);if(!r)return!1;const o=r&&ch(dh),l=r&&("function"===typeof hh?(c=new hh,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const u=s&&o&&ph(()=>{let e=!1;const t=new n(Nd.origin,{body:new dh,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=i&&o&&ph(()=>Zu.isReadableStream(new a("").body)),h={stream:d&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,n)=>{let a=t&&t[e];if(a)return a.call(t);throw new ad("Response type '".concat(e,"' is not supported"),ad.ERR_NOT_SUPPORT,n)})});const p=async(e,t)=>{const a=Zu.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(Zu.isBlob(e))return e.size;if(Zu.isSpecCompliantForm(e)){const t=new n(Nd.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Zu.isArrayBufferView(e)||Zu.isArrayBuffer(e)?e.byteLength:(Zu.isURLSearchParams(e)&&(e+=""),Zu.isString(e)?(await l(e)).byteLength:void 0)})(t):a};return async e=>{let{url:r,method:i,data:o,signal:l,cancelToken:c,timeout:f,onDownloadProgress:g,onUploadProgress:x,responseType:v,headers:y,withCredentials:b="same-origin",fetchOptions:w}=Yd(e),k=t||fetch;v=v?(v+"").toLowerCase():"text";let N=Qd([l,c&&c.toAbortSignal()],f),j=null;const S=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let C;try{if(x&&u&&"get"!==i&&"head"!==i&&0!==(C=await p(y,o))){let e,t=new n(r,{method:"POST",body:o,duplex:"half"});if(Zu.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Wd(C,Ud(Vd(x)));o=lh(t.body,65536,e,n)}}Zu.isString(b)||(b=b?"include":"omit");const t=s&&"credentials"in n.prototype,l=m(m({},w),{},{signal:N,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?b:void 0});j=s&&new n(r,l);let c=await(s?k(j,w):k(r,l));const f=d&&("stream"===v||"response"===v);if(d&&(g||f&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Zu.toFiniteNumber(c.headers.get("content-length")),[n,r]=g&&Wd(t,Ud(Vd(g),!0))||[];c=new a(lh(c.body,65536,n,()=>{r&&r(),S&&S()}),e)}v=v||"text";let E=await h[Zu.findKey(h,v)||"text"](c,e);return!f&&S&&S(),await new Promise((t,n)=>{Ld(t,n,{data:E,headers:Rd.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:j})})}catch(E){if(S&&S(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new ad("Network Error",ad.ERR_NETWORK,e,j),{cause:E.cause||E});throw ad.from(E,E&&E.code,e,j)}}},mh=new Map,gh=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:r}=t,s=[a,r,n];let i,o,l=s.length,c=mh;for(;l--;)i=s[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:fh(t)),c=o;return o},xh=(gh(),{http:null,xhr:$d,fetch:{get:gh}});Zu.forEach(xh,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(jEe){}Object.defineProperty(e,"adapterName",{value:t})}});const vh=e=>"- ".concat(e),yh=e=>Zu.isFunction(e)||null===e||!1===e;const bh={getAdapter:function(e,t){e=Zu.isArray(e)?e:[e];const{length:n}=e;let a,r;const s={};for(let i=0;i<n;i++){let n;if(a=e[i],r=a,!yh(a)&&(r=xh[(n=String(a)).toLowerCase()],void 0===r))throw new ad("Unknown adapter '".concat(n,"'"));if(r&&(Zu.isFunction(r)||(r=r.get(t))))break;s[n||"#"+i]=r}if(!r){const e=Object.entries(s).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(vh).join("\n"):" "+vh(e[0]):"as no adapter specified";throw new ad("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r},adapters:xh};function wh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fd(null,e)}function kh(e){wh(e),e.headers=Rd.from(e.headers),e.data=Pd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return bh.getAdapter(e.adapter||Cd.adapter,e)(e).then(function(t){return wh(e),t.data=Pd.call(e,e.transformResponse,t),t.headers=Rd.from(t.headers),t},function(t){return Md(t)||(wh(e),t&&t.response&&(t.response.data=Pd.call(e,e.transformResponse,t.response),t.response.headers=Rd.from(t.response.headers))),Promise.reject(t)})}const Nh="1.13.2",jh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{jh[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Sh={};jh.transitional=function(e,t,n){function a(e,t){return"[Axios v"+Nh+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new ad(a(r," has been removed"+(t?" in "+t:"")),ad.ERR_DEPRECATED);return t&&!Sh[r]&&(Sh[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},jh.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ch={assertOptions:function(e,t,n){if("object"!==typeof e)throw new ad("options must be an object",ad.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const s=a[r],i=t[s];if(i){const t=e[s],n=void 0===t||i(t,s,e);if(!0!==n)throw new ad("option "+s+" must be "+n,ad.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new ad("Unknown option "+s,ad.ERR_BAD_OPTION)}},validators:jh},Eh=Ch.validators;class Th{constructor(e){this.defaults=e||{},this.interceptors={request:new md,response:new md}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(jEe){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Xd(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:r}=t;void 0!==n&&Ch.assertOptions(n,{silentJSONParsing:Eh.transitional(Eh.boolean),forcedJSONParsing:Eh.transitional(Eh.boolean),clarifyTimeoutError:Eh.transitional(Eh.boolean)},!1),null!=a&&(Zu.isFunction(a)?t.paramsSerializer={serialize:a}:Ch.assertOptions(a,{encode:Eh.function,serialize:Eh.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ch.assertOptions(t,{baseUrl:Eh.spelling("baseURL"),withXsrfToken:Eh.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&Zu.merge(r.common,r[t.method]);r&&Zu.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=Rd.concat(s,r);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[kh.bind(this),void 0];for(e.unshift(...i),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let h=t;for(;d<u;){const e=i[d++],t=i[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=kh.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return fd(qd((e=Xd(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Zu.forEach(["delete","get","head","options"],function(e){Th.prototype[e]=function(t,n){return this.request(Xd(n||{},{method:e,url:t,data:(n||{}).data}))}}),Zu.forEach(["post","put","patch"],function(e){function t(t){return function(n,a,r){return this.request(Xd(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:a}))}}Th.prototype[e]=t(),Th.prototype[e+"Form"]=t(!0)});const Ih=Th;class Ah{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{n.subscribe(e),t=e}).then(e);return a.cancel=function(){n.unsubscribe(t)},a},e(function(e,a,r){n.reason||(n.reason=new Fd(e,a,r),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Ah(function(t){e=t});return{token:t,cancel:e}}}const _h=Ah;const Oh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Oh).forEach(e=>{let[t,n]=e;Oh[n]=t});const Rh=Oh;const Ph=function e(t){const n=new Ih(t),a=du(Ih.prototype.request,n);return Zu.extend(a,Ih.prototype,n,{allOwnKeys:!0}),Zu.extend(a,n,null,{allOwnKeys:!0}),a.create=function(n){return e(Xd(t,n))},a}(Cd);Ph.Axios=Ih,Ph.CanceledError=Fd,Ph.CancelToken=_h,Ph.isCancel=Md,Ph.VERSION=Nh,Ph.toFormData=ld,Ph.AxiosError=ad,Ph.Cancel=Ph.CanceledError,Ph.all=function(e){return Promise.all(e)},Ph.spread=function(e){return function(t){return e.apply(null,t)}},Ph.isAxiosError=function(e){return Zu.isObject(e)&&!0===e.isAxiosError},Ph.mergeConfig=Xd,Ph.AxiosHeaders=Rd,Ph.formToJSON=e=>jd(Zu.isHTMLForm(e)?new FormData(e):e),Ph.getAdapter=bh.getAdapter,Ph.HttpStatusCode=Rh,Ph.default=Ph;const Mh=Ph,Dh="".concat("https://tradehub-380.preview.emergentagent.com","/api"),Fh=(0,o.createContext)(null),Lh=()=>{const e=(0,o.useContext)(Fh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},zh=e=>{let{children:t}=e;const[n,a]=(0,o.useState)(null),[r,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(!1),c=(0,o.useCallback)(async()=>{try{if("true"===localStorage.getItem("oracleiq_guest_mode"))return a({id:"guest",name:"Guest User",email:"guest@oracleiqtrader.com",isGuest:!0}),l(!0),void s(!1);const e=await Mh.get("".concat(Dh,"/auth/me"),{withCredentials:!0});a(e.data),l(!0)}catch(e){a(null),l(!1)}finally{s(!1)}},[]);(0,o.useEffect)(()=>{c()},[c]);const u={user:n,isLoading:r,isAuthenticated:i,loginWithGoogle:()=>{localStorage.setItem("oracleiq_guest_mode","true"),a({id:"guest",name:"Guest User",email:"guest@oracleiqtrader.com",isGuest:!0}),l(!0)},loginAsGuest:()=>{localStorage.setItem("oracleiq_guest_mode","true"),a({id:"guest",name:"Guest User",email:"guest@oracleiqtrader.com",isGuest:!0}),l(!0)},logout:async()=>{try{localStorage.removeItem("oracleiq_guest_mode"),await Mh.post("".concat(Dh,"/auth/logout"),{},{withCredentials:!0})}catch(e){console.error("Logout error:",e)}finally{a(null),l(!1)}},handleAuthCallback:async e=>{try{const t=await Mh.post("".concat(Dh,"/auth/session"),{session_id:e},{withCredentials:!0});return a(t.data.user),l(!0),t.data.user}catch(t){throw console.error("Auth callback error:",t),t}},checkAuth:c};return(0,zt.jsx)(Fh.Provider,{value:u,children:t})},Bh=(0,o.createContext)(),Uh={dark:{id:"dark",name:"Dark",background:"bg-black",surface:"bg-black/40",text:"text-white",textMuted:"text-slate-400",border:"border-white/10",accent:"teal",cssVars:{"--bg-primary":"#000000","--bg-secondary":"#0a0a0a","--bg-surface":"rgba(0,0,0,0.4)","--text-primary":"#ffffff","--text-secondary":"#94a3b8","--border-color":"rgba(255,255,255,0.1)","--accent-color":"#14b8a6","--accent-glow":"rgba(20,184,166,0.3)"}},light:{id:"light",name:"Light",background:"bg-slate-100",surface:"bg-white/80",text:"text-slate-900",textMuted:"text-slate-600",border:"border-slate-200",accent:"teal",cssVars:{"--bg-primary":"#f1f5f9","--bg-secondary":"#ffffff","--bg-surface":"rgba(255,255,255,0.8)","--text-primary":"#0f172a","--text-secondary":"#475569","--border-color":"rgba(0,0,0,0.1)","--accent-color":"#0d9488","--accent-glow":"rgba(13,148,136,0.3)"}},matrix:{id:"matrix",name:"Matrix",background:"bg-black",surface:"bg-black/60",text:"text-green-400",textMuted:"text-green-600",border:"border-green-500/20",accent:"green",cssVars:{"--bg-primary":"#000000","--bg-secondary":"#001100","--bg-surface":"rgba(0,0,0,0.6)","--text-primary":"#4ade80","--text-secondary":"#16a34a","--border-color":"rgba(34,197,94,0.2)","--accent-color":"#22c55e","--accent-glow":"rgba(34,197,94,0.4)"}}},Wh=e=>{let{children:t}=e;const[n,a]=(0,o.useState)(()=>localStorage.getItem("cognitive-oracle-theme")||"dark"),r=Uh[n]||Uh.dark;(0,o.useEffect)(()=>{localStorage.setItem("cognitive-oracle-theme",n);const e=document.documentElement;Object.entries(r.cssVars).forEach(t=>{let[n,a]=t;e.style.setProperty(n,a)}),document.body.className="theme-".concat(n)},[n,r]);return(0,zt.jsx)(Bh.Provider,{value:{theme:n,currentTheme:r,setTheme:e=>{Uh[e]&&a(e)},toggleTheme:()=>{a(e=>{const t=Object.keys(Uh),n=t.indexOf(e);return t[(n+1)%t.length]})},themes:Uh},children:t})},Vh=()=>{const e=(0,o.useContext)(Bh);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},Hh=e=>"string"===typeof e,Gh=()=>{let e,t;const n=new Promise((n,a)=>{e=n,t=a});return n.resolve=e,n.reject=t,n},qh=e=>null==e?"":""+e,Kh=/###/g,Xh=e=>e&&e.indexOf("###")>-1?e.replace(Kh,"."):e,Yh=e=>!e||Hh(e),$h=(e,t,n)=>{const a=Hh(t)?t.split("."):t;let r=0;for(;r<a.length-1;){if(Yh(e))return{};const t=Xh(a[r]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++r}return Yh(e)?{}:{obj:e,k:Xh(a[r])}},Qh=(e,t,n)=>{const{obj:a,k:r}=$h(e,t,Object);if(void 0!==a||1===t.length)return void(a[r]=n);let s=t[t.length-1],i=t.slice(0,t.length-1),o=$h(e,i,Object);for(;void 0===o.obj&&i.length;){var l;s="".concat(i[i.length-1],".").concat(s),i=i.slice(0,i.length-1),o=$h(e,i,Object),null!==(l=o)&&void 0!==l&&l.obj&&"undefined"!==typeof o.obj["".concat(o.k,".").concat(s)]&&(o.obj=void 0)}o.obj["".concat(o.k,".").concat(s)]=n},Jh=(e,t)=>{const{obj:n,k:a}=$h(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,a))return n[a]},Zh=(e,t,n)=>{for(const a in t)"__proto__"!==a&&"constructor"!==a&&(a in e?Hh(e[a])||e[a]instanceof String||Hh(t[a])||t[a]instanceof String?n&&(e[a]=t[a]):Zh(e[a],t[a],n):e[a]=t[a]);return e},ep=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var tp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const np=e=>Hh(e)?e.replace(/[&<>"'\/]/g,e=>tp[e]):e;const ap=[" ",",","?","!",";"],rp=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),sp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const a=t.split(n);let r=e;for(let s=0;s<a.length;){if(!r||"object"!==typeof r)return;let e,t="";for(let i=s;i<a.length;++i)if(i!==s&&(t+=n),t+=a[i],e=r[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&i<a.length-1)continue;s+=i-s+1;break}r=e}return r},ip=e=>null===e||void 0===e?void 0:e.replace("_","-"),op={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,a;null===(n=console)||void 0===n||null===(n=n[e])||void 0===n||null===(a=n.apply)||void 0===a||a.call(n,console,t)}};class lp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||op,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,a){return a&&!this.debug?null:(Hh(e[0])&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new lp(this.logger,m(m({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new lp(this.logger,e)}}var cp=new lp;class up{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,a]=e;for(let r=0;r<a;r++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[a,r]=t;for(let s=0;s<r;s++)a.apply(a,[e,...n])})}}}class dp extends up{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var a;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Hh(n)&&s?o.push(...n.split(s)):o.push(n)));const l=Jh(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!l&&i&&Hh(n)?sp(null===(a=this.data)||void 0===a||null===(a=a[e])||void 0===a?void 0:a[t],n,s):l}addResource(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let i=[e,t];n&&(i=i.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(i=e.split("."),a=t,t=i[1]),this.addNamespaces(t),Qh(this.data,i,a),r.silent||this.emit("added",e,t,n,a)}addResources(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in n)(Hh(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});a.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),a=n,n=t,t=i[1]),this.addNamespaces(t);let o=Jh(this.data,i)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?Zh(o,n,r):o=m(m({},o),n),Qh(this.data,i,o),s.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var hp={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,a,r){return e.forEach(e=>{var s,i;t=null!==(s=null===(i=this.processors[e])||void 0===i?void 0:i.process(t,n,a,r))&&void 0!==s?s:t}),t}};const pp=Symbol("i18next/PATH_KEY");function fp(e,t){var n;const{[pp]:a}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(a,r)=>{var s,i;return null===(s=n)||void 0===s||null===(i=s.revoke)||void 0===i||i.call(s),r===pp?e:(e.push(r),n=Proxy.revocable(a,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return a.join(null!==(n=null===t||void 0===t?void 0:t.keySeparator)&&void 0!==n?n:".")}const mp={},gp=e=>!Hh(e)&&"boolean"!==typeof e&&"number"!==typeof e;class xp extends up{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=cp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t=m({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});if(null==e)return!1;const n=this.resolve(e,t);if(void 0===(null===n||void 0===n?void 0:n.res))return!1;const a=gp(n.res);return!1!==t.returnObjects||!a}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const a=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,i=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const a=ap.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===a.length)return!0;const r=rp.getRegExp("(".concat(a.map(e=>"?"===e?"\\?":e).join("|"),")"));let s=!r.test(e);if(!s){const t=e.indexOf(n);t>0&&!r.test(e.substring(0,t))&&(s=!0)}return s})(e,n,a);if(s&&!i){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Hh(r)?[r]:r};const s=e.split(n);(n!==a||n===a&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),e=s.join(a)}return{key:e,namespaces:Hh(r)?[r]:r}}translate(e,t,n){let a="object"===typeof t?m({},t):t;if("object"!==typeof a&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof a&&(a=m({},a)),a||(a={}),null==e)return"";"function"===typeof e&&(e=fp(e,m(m({},this.options),a))),Array.isArray(e)||(e=[String(e)]);const r=void 0!==a.returnDetails?a.returnDetails:this.options.returnDetails,s=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,{key:i,namespaces:o}=this.extractFromKey(e[e.length-1],a),l=o[o.length-1];let c=void 0!==a.nsSeparator?a.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=a.lng||this.language,d=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null===u||void 0===u?void 0:u.toLowerCase()))return d?r?{res:"".concat(l).concat(c).concat(i),usedKey:i,exactUsedKey:i,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(a)}:"".concat(l).concat(c).concat(i):r?{res:i,usedKey:i,exactUsedKey:i,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(a)}:i;const h=this.resolve(e,a);let p=null===h||void 0===h?void 0:h.res;const f=(null===h||void 0===h?void 0:h.usedKey)||i,g=(null===h||void 0===h?void 0:h.exactUsedKey)||i,x=void 0!==a.joinArrays?a.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==a.count&&!Hh(a.count),b=xp.hasDefaultValue(a),w=y?this.pluralResolver.getSuffix(u,a.count,a):"",k=a.ordinal&&y?this.pluralResolver.getSuffix(u,a.count,{ordinal:!1}):"",N=y&&!a.ordinal&&0===a.count,j=N&&a["defaultValue".concat(this.options.pluralSeparator,"zero")]||a["defaultValue".concat(w)]||a["defaultValue".concat(k)]||a.defaultValue;let S=p;v&&!p&&b&&(S=j);const C=gp(S),E=Object.prototype.toString.apply(S);if(!(v&&S&&C&&["[object Number]","[object Function]","[object RegExp]"].indexOf(E)<0)||Hh(x)&&Array.isArray(S))if(v&&Hh(x)&&Array.isArray(p))p=p.join(x),p&&(p=this.extendTranslation(p,e,a,n));else{let t=!1,r=!1;!this.isValidLookup(p)&&b&&(t=!0,p=j),this.isValidLookup(p)||(r=!0,p=i);const o=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&r?void 0:p,d=b&&j!==p&&this.options.updateMissing;if(r||t||d){if(this.logger.log(d?"updateKey":"missingKey",u,l,i,d?j:p),s){const e=this.resolve(i,m(m({},a),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let a=0;a<t.length;a++)e.push(t[a]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(a.lng||this.language):e.push(a.lng||this.language);const n=(e,t,n)=>{var r;const s=b&&n!==p?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,s,d,a):null!==(r=this.backendConnector)&&void 0!==r&&r.saveMissing&&this.backendConnector.saveMissing(e,l,t,s,d,a),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,a);N&&a["defaultValue".concat(this.options.pluralSeparator,"zero")]&&t.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&t.push("".concat(this.options.pluralSeparator,"zero")),t.forEach(t=>{n([e],i+t,a["defaultValue".concat(t)]||j)})}):n(e,i,j))}p=this.extendTranslation(p,e,a,h,n),r&&p===i&&this.options.appendNamespaceToMissingKey&&(p="".concat(l).concat(c).concat(i)),(r||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l).concat(c).concat(i):i,t?p:void 0,a))}else{if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,S,m(m({},a),{},{ns:o})):"key '".concat(i," (").concat(this.language,")' returned an object instead of string.");return r?(h.res=e,h.usedParams=this.getUsedParamsDetails(a),h):e}if(s){const e=Array.isArray(S),t=e?[]:{},n=e?g:f;for(const r in S)if(Object.prototype.hasOwnProperty.call(S,r)){const e="".concat(n).concat(s).concat(r);t[r]=b&&!p?this.translate(e,m(m({},a),{},{defaultValue:gp(j)?j[r]:void 0},{joinArrays:!1,ns:o})):this.translate(e,m(m({},a),{joinArrays:!1,ns:o})),t[r]===e&&(t[r]=S[r])}p=t}}return r?(h.res=p,h.usedParams=this.getUsedParamsDetails(a),h):p}extendTranslation(e,t,n,a,r){var s,i=this;if(null!==(s=this.i18nFormat)&&void 0!==s&&s.parse)e=this.i18nFormat.parse(e,m(m({},this.options.interpolation.defaultVariables),n),n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){var o;n.interpolation&&this.interpolator.init(m(m({},n),{interpolation:m(m({},this.options.interpolation),n.interpolation)}));const s=Hh(e)&&(void 0!==(null===n||void 0===n||null===(o=n.interpolation)||void 0===o?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(s){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=n.replace&&!Hh(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=m(m({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language||a.usedLng,n),s){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(null===r||void 0===r?void 0:r[0])!==a[0]||n.context?i.translate(...a,t):(i.logger.warn("It seems you are nesting recursively key: ".concat(a[0]," in key: ").concat(t[0])),null)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Hh(l)?[l]:l;return null!=e&&null!==c&&void 0!==c&&c.length&&!1!==n.applyPostProcessor&&(e=hp.handle(c,e,t,this.options&&this.options.postProcessPassResolved?m({i18nResolved:m(m({},a),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,n,a,r,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hh(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,i),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==i.count&&!Hh(i.count),d=u&&!i.ordinal&&0===i.count,h=void 0!==i.context&&(Hh(i.context)||"number"===typeof i.context)&&""!==i.context,p=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);c.forEach(e=>{var o,c;this.isValidLookup(t)||(s=e,mp["".concat(p[0],"-").concat(e)]||null===(o=this.utils)||void 0===o||!o.hasLoadedNamespace||null!==(c=this.utils)&&void 0!==c&&c.hasLoadedNamespace(s)||(mp["".concat(p[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(n=>{var s;if(this.isValidLookup(t))return;r=n;const o=[l];if(null!==(s=this.i18nFormat)&&void 0!==s&&s.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,i);else{let e;u&&(e=this.pluralResolver.getSuffix(n,i.count,i));const t="".concat(this.options.pluralSeparator,"zero"),a="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(u&&(i.ordinal&&0===e.indexOf(a)&&o.push(l+e.replace(a,this.options.pluralSeparator)),o.push(l+e),d&&o.push(l+t)),h){const n="".concat(l).concat(this.options.contextSeparator||"_").concat(i.context);o.push(n),u&&(i.ordinal&&0===e.indexOf(a)&&o.push(n+e.replace(a,this.options.pluralSeparator)),o.push(n+e),d&&o.push(n+t))}}let c;for(;c=o.pop();)this.isValidLookup(t)||(a=c,t=this.getResource(n,e,c,i))}))})}),{res:t,usedKey:n,exactUsedKey:a,usedLng:r,usedNS:s}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){var a;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!==(a=this.i18nFormat)&&void 0!==a&&a.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Hh(e.replace);let a=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a=m(m({},this.options.interpolation.defaultVariables),a)),!n){a=m({},a);for(const e of t)delete a[e]}return a}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class vp{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=cp.create("languageUtils")}getScriptPartFromCode(e){if(!(e=ip(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=ip(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Hh(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(jEe){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const a=this.getLanguagePartFromCode(e);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(e=>e===a?e:e.indexOf("-")<0&&a.indexOf("-")<0?void 0:e.indexOf("-")>0&&a.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===a||0===e.indexOf(a)&&a.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),Hh(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),a=[],r=e=>{e&&(this.isSupportedCode(e)?a.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return Hh(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(e))):Hh(e)&&r(this.formatLanguageCode(e)),n.forEach(e=>{a.indexOf(e)<0&&r(this.formatLanguageCode(e))}),a}}const yp={zero:0,one:1,two:2,few:3,many:4,other:5},bp={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class wp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=cp.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ip("dev"===e?"en":e),a=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:a});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let s;try{s=new Intl.PluralRules(n,{type:a})}catch(i){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),bp;if(!e.match(/-|_/))return bp;const n=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(n,t)}return this.pluralRulesCache[r]=s,s}needsPlural(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.getRule(e,n);return a||(a=this.getRule("dev",n)),(null===(t=a)||void 0===t?void 0:t.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>"".concat(t).concat(e))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>yp[e]-yp[t]).map(e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.getRule(e,n);return a?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(a.select(t)):(this.logger.warn("no plural rule found for: ".concat(e)),this.getSuffix("dev",t,n))}}const kp=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=((e,t,n)=>{const a=Jh(e,n);return void 0!==a?a:Jh(t,n)})(e,t,n);return!s&&r&&Hh(n)&&(s=sp(e,n,a),void 0===s&&(s=sp(t,n,a))),s},Np=e=>e.replace(/\$/g,"$$$$");class jp{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=cp.create("interpolator"),this.options=t,this.format=(null===t||void 0===t||null===(e=t.interpolation)||void 0===e?void 0:e.format)||(e=>e),this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:a,prefix:r,prefixEscaped:s,suffix:i,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:x}=e.interpolation;this.escape=void 0!==t?t:np,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==a&&a,this.prefix=r?ep(r):s||"{{",this.suffix=i?ep(i):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?ep(d):h||ep("$t("),this.nestingSuffix=p?ep(p):f||ep(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==x&&x,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null===e||void 0===e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"((?:[^()\"']+|\"[^\"]*\"|'[^']*'|\\((?:[^()]|\"[^\"]*\"|'[^']*')*\\))*?)").concat(this.nestingSuffix))}interpolate(e,t,n,a){var r;let s,i,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const r=kp(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,m(m(m({},a),t),{},{interpolationkey:e})):r}const r=e.split(this.formatSeparator),s=r.shift().trim(),i=r.join(this.formatSeparator).trim();return this.format(kp(t,l,s,this.options.keySeparator,this.options.ignoreJSONStructure),i,n,m(m(m({},a),t),{},{interpolationkey:s}))};this.resetRegExp();const u=(null===a||void 0===a?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=void 0!==(null===a||void 0===a||null===(r=a.interpolation)||void 0===r?void 0:r.skipOnVariables)?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Np(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Np(this.escape(e)):Np(e)}].forEach(t=>{for(o=0;s=t.regex.exec(e);){const n=s[1].trim();if(i=c(n),void 0===i)if("function"===typeof u){const t=u(e,s,a);i=Hh(t)?t:""}else if(a&&Object.prototype.hasOwnProperty.call(a,n))i="";else{if(d){i=s[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),i=""}else Hh(i)||this.useRawValueToEscape||(i=qh(i));const r=t.safeValue(i);if(e=e.replace(s[0],r),d?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n,a,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(e,t)=>{var n;const a=this.nestingOptionsSeparator;if(e.indexOf(a)<0)return e;const s=e.split(new RegExp("".concat(a,"[ ]*{")));let i="{".concat(s[1]);e=s[0],i=this.interpolate(i,r);const o=i.match(/'/g),l=i.match(/"/g);((null!==(n=null===o||void 0===o?void 0:o.length)&&void 0!==n?n:0)%2===0&&!l||l.length%2!==0)&&(i=i.replace(/'/g,'"'));try{r=JSON.parse(i),t&&(r=m(m({},t),r))}catch(jEe){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),jEe),"".concat(e).concat(a).concat(i)}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];r=m({},s),r=r.replace&&!Hh(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;const l=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(-1!==l&&(o=n[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),n[1]=n[1].slice(0,l)),a=t(i.call(this,n[1].trim(),r),r),a&&n[0]===e&&!Hh(a))return a;Hh(a)||(a=qh(a)),a||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),a=""),o.length&&(a=o.reduce((e,t)=>this.format(e,t,s.lng,m(m({},s),{},{interpolationkey:n[1].trim()})),a.trim())),e=e.replace(n[0],a),this.regexp.lastIndex=0}return e}}const Sp=e=>{const t={};return(n,a,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s=m(m({},s),{},{[r.interpolationkey]:void 0}));const i=a+JSON.stringify(s);let o=t[i];return o||(o=e(ip(a),r),t[i]=o),o(n)}},Cp=e=>(t,n,a)=>e(ip(n),a)(t);class Ep{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=cp.create("formatter"),this.options=e,this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Sp:Cp;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,m({},t));return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,m(m({},t),{},{style:"currency"}));return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,m({},t));return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,m({},t));return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,m({},t));return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Sp(t)}format(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(e=>e.indexOf(")")>-1)){const e=r.findIndex(e=>e.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,e)].join(this.formatSeparator)}const s=r.reduce((e,t)=>{const{formatName:r,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const a=e.split("(");t=a[0].toLowerCase().trim();const r=a[1].substring(0,a[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(e=>{if(e){const[t,...a]=e.split(":"),r=a.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=r),"false"===r&&(n[s]=!1),"true"===r&&(n[s]=!0),isNaN(r)||(n[s]=parseInt(r,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[r]){let t=e;try{var i;const o=(null===a||void 0===a||null===(i=a.formatParams)||void 0===i?void 0:i[a.interpolationkey])||{},l=o.locale||o.lng||a.locale||a.lng||n;t=this.formats[r](e,l,m(m(m({},s),a),o))}catch(o){this.logger.warn(o)}return t}return this.logger.warn("there was no format function for ".concat(r)),e},e);return s}}class Tp extends up{constructor(e,t,n){var a,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=cp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],null===(a=this.backend)||void 0===a||null===(r=a.init)||void 0===r||r.call(a,n,s.backend,s)}queueLoad(e,t,n,a){const r={},s={},i={},o={};return e.forEach(e=>{let a=!0;t.forEach(t=>{const i="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===s[i]&&(s[i]=!0):(this.state[i]=1,a=!1,void 0===s[i]&&(s[i]=!0),void 0===r[i]&&(r[i]=!0),void 0===o[t]&&(o[t]=!0)))}),a||(i[e]=!0)}),(Object.keys(r).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(r),pending:Object.keys(s),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const a=e.split("|"),r=a[0],s=a[1];t&&this.emit("failedLoading",r,s,t),!t&&n&&this.store.addResourceBundle(r,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const i={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:a,k:r}=$h(e,t,Object);a[r]=a[r]||[],a[r].push(n)})(n.loaded,[r],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{i[e]||(i[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===i[e][t]&&(i[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:a,wait:r,callback:s});this.readingCalls++;const i=(i,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&o&&a<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,a+1,2*r,s)},r):s(i,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,i);try{const n=o(e,t);n&&"function"===typeof n.then?n.then(e=>i(null,e)).catch(i):i(null,n)}catch(l){i(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Hh(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Hh(t)&&(t=[t]);const r=this.queueLoad(e,t,n,a);if(!r.toLoad.length)return r.pending.length||a(),null;r.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),a=n[0],r=n[1];this.read(a,r,"read",void 0,void 0,(n,s)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(r," for language ").concat(a," failed"),n),!n&&s&&this.logger.log("".concat(t,"loaded namespace ").concat(r," for language ").concat(a),s),this.loaded(e,n,s)})}saveMissing(e,t,n,a,r){var s,i,o;let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(null===(s=this.services)||void 0===s||null===(s=s.utils)||void 0===s||!s.hasLoadedNamespace||null!==(i=this.services)&&void 0!==i&&null!==(i=i.utils)&&void 0!==i&&i.hasLoadedNamespace(t)){if(void 0!==n&&null!==n&&""!==n){if(null!==(o=this.backend)&&void 0!==o&&o.create){const s=m(m({},l),{},{isUpdate:r}),i=this.backend.create.bind(this.backend);if(i.length<6)try{let r;r=5===i.length?i(e,t,n,a,s):i(e,t,n,a),r&&"function"===typeof r.then?r.then(e=>c(null,e)).catch(c):c(null,r)}catch(u){c(u)}else i(e,t,n,a,c,s)}e&&e[0]&&this.store.addResource(e[0],t,n,a)}}else this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Ip=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),Hh(e[1])&&(t.defaultValue=e[1]),Hh(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ap=e=>{var t,n;return Hh(e.ns)&&(e.ns=[e.ns]),Hh(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Hh(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null===(t=e.supportedLngs)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},_p=()=>{};class Op extends up{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Ap(e),this.services={},this.logger=cp,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),null==t.defaultNS&&t.ns&&(Hh(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=Ip();this.options=m(m(m({},a),this.options),Ap(t)),this.options.interpolation=m(m({},a.interpolation),this.options.interpolation),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),"function"!==typeof this.options.overloadTranslationOptionHandler&&(this.options.overloadTranslationOptionHandler=a.overloadTranslationOptionHandler),!0===this.options.debug&&"undefined"!==typeof console&&console.warn("i18next is maintained with support from locize.com \u2014 consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const r=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?cp.init(r(this.modules.logger),this.options):cp.init(null,this.options),t=this.modules.formatter?this.modules.formatter:Ep;const n=new vp(this.options);this.store=new dp(this.options.resources,this.options);const s=this.services;s.logger=cp,s.resourceStore=this.store,s.languageUtils=n,s.pluralResolver=new wp(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!t||this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format||(s.formatter=r(t),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new jp(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new Tp(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emit(t,...a)}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new xp(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emit(t,...a)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=_p),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const s=Gh(),i=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),s}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_p;const n=Hh(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){var a,r;if("cimode"===(null===n||void 0===n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],s=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)s(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>s(e))}null===(a=this.options.preload)||void 0===a||null===(r=a.forEach)||void 0===r||r.call(a,e=>s(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const a=Gh();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=_p),this.services.backendConnector.reload(e,t,e=>{a.resolve(),n(e)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&hp.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const a=Gh();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,i)=>{i?this.isLanguageChangingTo===e&&(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,a.resolve(function(){return n.t(...arguments)}),t&&t(s,function(){return n.t(...arguments)})},i=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Hh(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(Hh(t)?[t]:t);var i,o;a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null===(i=this.services.languageDetector)||void 0===i||null===(o=i.cacheUserLanguage)||void 0===o||o.call(i,a));this.loadResources(a,e=>{s(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),a}getFixedT(e,t,n){var a=this;const r=function(e,t){let s;if("object"!==typeof t){for(var i=arguments.length,o=new Array(i>2?i-2:0),l=2;l<i;l++)o[l-2]=arguments[l];s=a.options.overloadTranslationOptionHandler([e,t].concat(o))}else s=m({},t);s.lng=s.lng||r.lng,s.lngs=s.lngs||r.lngs,s.ns=s.ns||r.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||r.keyPrefix);const c=a.options.keySeparator||".";let u;return s.keyPrefix&&Array.isArray(e)?u=e.map(e=>("function"===typeof e&&(e=fp(e,m(m({},a.options),t))),"".concat(s.keyPrefix).concat(c).concat(e))):("function"===typeof e&&(e=fp(e,m(m({},a.options),t))),u=s.keyPrefix?"".concat(s.keyPrefix).concat(c).concat(e):e),a.t(u,s)};return Hh(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return null===(e=this.translator)||void 0===e?void 0:e.translate(...n)}exists(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return null===(e=this.translator)||void 0===e?void 0:e.exists(...n)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],a=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,e)||a&&!s(r,e)))}loadNamespaces(e,t){const n=Gh();return this.options.ns?(Hh(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Gh();Hh(e)&&(e=[e]);const a=this.options.preload||[],r=e.filter(e=>a.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return r.length?(this.options.preload=a.concat(r),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null===(t=this.languages)||void 0===t?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(jEe){}const a=(null===(n=this.services)||void 0===n?void 0:n.languageUtils)||new vp(Ip());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(a.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){const e=new Op(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0);return e.createInstance=Op.createInstance,e}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_p;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const a=m(m(m({},this.options),e),{isClone:!0}),r=new Op(a);void 0===e.debug&&void 0===e.prefix||(r.logger=r.logger.clone(e));if(["store","services","language"].forEach(e=>{r[e]=this[e]}),r.services=m({},this.services),r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=m({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((n,a)=>(n[a]=m({},e[t][a]),n),e[t]),e),{});r.store=new dp(e,a),r.services.resourceStore=r.store}if(e.interpolation){const t=m(m(m({},Ip().interpolation),this.options.interpolation),e.interpolation),n=m(m({},a),{},{interpolation:t});r.services.interpolator=new jp(n)}return r.translator=new xp(r.services,a),r.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r.emit(e,...n)}),r.init(a,t),r.translator.options=a,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Rp=Op.createInstance();Rp.createInstance,Rp.dir,Rp.init,Rp.loadResources,Rp.reloadResources,Rp.use,Rp.changeLanguage,Rp.getFixedT,Rp.t,Rp.exists,Rp.setDefaultNamespace,Rp.hasLoadedNamespace,Rp.loadNamespaces,Rp.loadLanguages;n(1844);Object.create(null);const Pp=(e,t,n,a)=>{var r,s,i;const o=[n,m({code:t},a||{})];if(null!==e&&void 0!==e&&null!==(r=e.services)&&void 0!==r&&null!==(r=r.logger)&&void 0!==r&&r.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Bp(o[0])&&(o[0]="react-i18next:: ".concat(o[0])),null!==e&&void 0!==e&&null!==(s=e.services)&&void 0!==s&&null!==(s=s.logger)&&void 0!==s&&s.warn?e.services.logger.warn(...o):null!==(i=console)&&void 0!==i&&i.warn&&console.warn(...o)},Mp={},Dp=(e,t,n,a)=>{Bp(n)&&Mp[n]||(Bp(n)&&(Mp[n]=new Date),Pp(e,t,n,a))},Fp=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Lp=(e,t,n)=>{e.loadNamespaces(t,Fp(e,n))},zp=(e,t,n,a)=>{if(Bp(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Lp(e,n,a);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,Fp(e,a))},Bp=e=>"string"===typeof e,Up=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Wp={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Vp=e=>Wp[e];let Hp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Up,Vp),transDefaultProps:void 0};let Gp;const qp=()=>Gp,Kp={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Hp=m(m({},Hp),e)}(e.options.react),(e=>{Gp=e})(e)}},Xp=(0,o.createContext)();class Yp{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}class $p extends Error{constructor(e,t,n){super(e),this.name="TranslationParserError",this.position=t,this.translationString=n,Error.captureStackTrace&&Error.captureStackTrace(this,$p)}}const Qp={"&nbsp;":"\xa0","&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&copy;":"\xa9","&reg;":"\xae","&trade;":"\u2122","&hellip;":"\u2026","&ndash;":"\u2013","&mdash;":"\u2014","&lsquo;":"\u2018","&rsquo;":"\u2019","&sbquo;":"\u201a","&ldquo;":"\u201c","&rdquo;":"\u201d","&bdquo;":"\u201e","&dagger;":"\u2020","&Dagger;":"\u2021","&bull;":"\u2022","&prime;":"\u2032","&Prime;":"\u2033","&lsaquo;":"\u2039","&rsaquo;":"\u203a","&sect;":"\xa7","&para;":"\xb6","&middot;":"\xb7","&ensp;":"\u2002","&emsp;":"\u2003","&thinsp;":"\u2009","&euro;":"\u20ac","&pound;":"\xa3","&yen;":"\xa5","&cent;":"\xa2","&curren;":"\xa4","&times;":"\xd7","&divide;":"\xf7","&minus;":"\u2212","&plusmn;":"\xb1","&ne;":"\u2260","&le;":"\u2264","&ge;":"\u2265","&asymp;":"\u2248","&equiv;":"\u2261","&infin;":"\u221e","&int;":"\u222b","&sum;":"\u2211","&prod;":"\u220f","&radic;":"\u221a","&part;":"\u2202","&permil;":"\u2030","&deg;":"\xb0","&micro;":"\xb5","&larr;":"\u2190","&uarr;":"\u2191","&rarr;":"\u2192","&darr;":"\u2193","&harr;":"\u2194","&crarr;":"\u21b5","&lArr;":"\u21d0","&uArr;":"\u21d1","&rArr;":"\u21d2","&dArr;":"\u21d3","&hArr;":"\u21d4","&alpha;":"\u03b1","&beta;":"\u03b2","&gamma;":"\u03b3","&delta;":"\u03b4","&epsilon;":"\u03b5","&zeta;":"\u03b6","&eta;":"\u03b7","&theta;":"\u03b8","&iota;":"\u03b9","&kappa;":"\u03ba","&lambda;":"\u03bb","&mu;":"\u03bc","&nu;":"\u03bd","&xi;":"\u03be","&omicron;":"\u03bf","&pi;":"\u03c0","&rho;":"\u03c1","&sigma;":"\u03c3","&tau;":"\u03c4","&upsilon;":"\u03c5","&phi;":"\u03c6","&chi;":"\u03c7","&psi;":"\u03c8","&omega;":"\u03c9","&Alpha;":"\u0391","&Beta;":"\u0392","&Gamma;":"\u0393","&Delta;":"\u0394","&Epsilon;":"\u0395","&Zeta;":"\u0396","&Eta;":"\u0397","&Theta;":"\u0398","&Iota;":"\u0399","&Kappa;":"\u039a","&Lambda;":"\u039b","&Mu;":"\u039c","&Nu;":"\u039d","&Xi;":"\u039e","&Omicron;":"\u039f","&Pi;":"\u03a0","&Rho;":"\u03a1","&Sigma;":"\u03a3","&Tau;":"\u03a4","&Upsilon;":"\u03a5","&Phi;":"\u03a6","&Chi;":"\u03a7","&Psi;":"\u03a8","&Omega;":"\u03a9","&Agrave;":"\xc0","&Aacute;":"\xc1","&Acirc;":"\xc2","&Atilde;":"\xc3","&Auml;":"\xc4","&Aring;":"\xc5","&AElig;":"\xc6","&Ccedil;":"\xc7","&Egrave;":"\xc8","&Eacute;":"\xc9","&Ecirc;":"\xca","&Euml;":"\xcb","&Igrave;":"\xcc","&Iacute;":"\xcd","&Icirc;":"\xce","&Iuml;":"\xcf","&ETH;":"\xd0","&Ntilde;":"\xd1","&Ograve;":"\xd2","&Oacute;":"\xd3","&Ocirc;":"\xd4","&Otilde;":"\xd5","&Ouml;":"\xd6","&Oslash;":"\xd8","&Ugrave;":"\xd9","&Uacute;":"\xda","&Ucirc;":"\xdb","&Uuml;":"\xdc","&Yacute;":"\xdd","&THORN;":"\xde","&szlig;":"\xdf","&agrave;":"\xe0","&aacute;":"\xe1","&acirc;":"\xe2","&atilde;":"\xe3","&auml;":"\xe4","&aring;":"\xe5","&aelig;":"\xe6","&ccedil;":"\xe7","&egrave;":"\xe8","&eacute;":"\xe9","&ecirc;":"\xea","&euml;":"\xeb","&igrave;":"\xec","&iacute;":"\xed","&icirc;":"\xee","&iuml;":"\xef","&eth;":"\xf0","&ntilde;":"\xf1","&ograve;":"\xf2","&oacute;":"\xf3","&ocirc;":"\xf4","&otilde;":"\xf5","&ouml;":"\xf6","&oslash;":"\xf8","&ugrave;":"\xf9","&uacute;":"\xfa","&ucirc;":"\xfb","&uuml;":"\xfc","&yacute;":"\xfd","&thorn;":"\xfe","&yuml;":"\xff","&iexcl;":"\xa1","&iquest;":"\xbf","&fnof;":"\u0192","&circ;":"\u02c6","&tilde;":"\u02dc","&OElig;":"\u0152","&oelig;":"\u0153","&Scaron;":"\u0160","&scaron;":"\u0161","&Yuml;":"\u0178","&ordf;":"\xaa","&ordm;":"\xba","&macr;":"\xaf","&acute;":"\xb4","&cedil;":"\xb8","&sup1;":"\xb9","&sup2;":"\xb2","&sup3;":"\xb3","&frac14;":"\xbc","&frac12;":"\xbd","&frac34;":"\xbe","&spades;":"\u2660","&clubs;":"\u2663","&hearts;":"\u2665","&diams;":"\u2666","&loz;":"\u25ca","&oline;":"\u203e","&frasl;":"\u2044","&weierp;":"\u2118","&image;":"\u2111","&real;":"\u211c","&alefsym;":"\u2135"},Jp=new RegExp(Object.keys(Qp).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),"g"),Zp=["children"],ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const n=(e=>{const t=[];let n=0,a="";const r=()=>{a&&(t.push({type:"Text",value:a,position:n-a.length}),a="")};for(;n<e.length;){const s=e[n];if("<"===s){const i=e.slice(n).match(/^<(\d+)>/);if(i)r(),t.push({type:"TagOpen",value:i[0],position:n,tagNumber:parseInt(i[1],10)}),n+=i[0].length;else{const i=e.slice(n).match(/^<\/(\d+)>/);i?(r(),t.push({type:"TagClose",value:i[0],position:n,tagNumber:parseInt(i[1],10)}),n+=i[0].length):(a+=s,n+=1)}}else a+=s,n+=1}return r(),t})(e),a=[],r=[],s=new Set;if(n.forEach(n=>{switch(n.type){case"Text":{const e=n.value.replace(Jp,e=>Qp[e]).replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(parseInt(t,10))).replace(/&#x([0-9a-fA-F]+);/g,(e,t)=>String.fromCharCode(parseInt(t,16)));(r.length>0?r[r.length-1].children:a).push(e)}break;case"TagOpen":{const{tagNumber:e}=n,i=(()=>{var e;if(0===r.length)return t;const n=r[r.length-1];return null!==(e=n.declaration.props)&&void 0!==e&&e.children&&Array.isArray(n.declaration.props.children)?n.declaration.props.children:n.declarations})(),o=i[e];if(!o){s.add(e);const t="<".concat(e,">");(r.length>0?r[r.length-1].children:a).push(t);break}r.push({tagNumber:e,children:[],position:n.position,declaration:o,declarations:i})}break;case"TagClose":{const{tagNumber:t}=n;if(s.has(t)){const e="</".concat(t,">");(r.length>0?r[r.length-1].children:a).push(e),s.delete(t);break}if(0===r.length)throw new $p("Unexpected closing tag </".concat(t,"> at position ").concat(n.position),n.position,e);const i=r.pop();if(i.tagNumber!==t)throw new $p("Mismatched tags: expected </".concat(i.tagNumber,"> but got </").concat(t,"> at position ").concat(n.position),n.position,e);const l=((e,t,n)=>{const{type:a,props:r={}}=e;if(r.children&&Array.isArray(r.children)&&n){const{children:e}=r,n=u(r,Zp);return o.createElement(a,n,...t)}return 0===t.length?o.createElement(a,r):1===t.length?o.createElement(a,r,t[0]):o.createElement(a,r,...t)})(i.declaration,i.children,i.declarations);(r.length>0?r[r.length-1].children:a).push(l)}}}),r.length>0){const t=r[r.length-1];throw new $p("Unclosed tag <".concat(t.tagNumber,"> at position ").concat(t.position),t.position,e)}return a};function tf(e){var t,n,a;let{i18nKey:r,defaultTranslation:s,content:i,ns:l,values:c={},i18n:u,t:d}=e;const h=u||qp();if(!h)return Dp(h,"NO_I18NEXT_INSTANCE","IcuTrans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),o.createElement(o.Fragment,{},s);const p=d||(null===(t=h.t)||void 0===t?void 0:t.bind(h))||(e=>e);let f=l||p.ns||(null===(n=h.options)||void 0===n?void 0:n.defaultNS);f=Bp(f)?[f]:f||["translation"];let g=c;null!==(a=h.options)&&void 0!==a&&null!==(a=a.interpolation)&&void 0!==a&&a.defaultVariables&&(g=c&&Object.keys(c).length>0?m(m({},c),h.options.interpolation.defaultVariables):m({},h.options.interpolation.defaultVariables));const x=p(r,m(m({defaultValue:s},g),{},{ns:f}));try{const e=ef(x,i);return o.createElement(o.Fragment,{},...e)}catch(v){return Pp(h,"ICU_TRANS_RENDER_ERROR",'IcuTrans component error for key "'.concat(r,'": ').concat(v.message),{i18nKey:r,error:v}),o.createElement(o.Fragment,{},x)}}tf.displayName="IcuTransWithoutContext";var nf=n(9461);const af={t:(e,t)=>{return Bp(t)?t:"object"===typeof(n=t)&&null!==n&&Bp(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},ready:!1},rf=()=>()=>{},sf=function(e){var t,n,a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:s}=r,{i18n:i,defaultNS:l}=(0,o.useContext)(Xp)||{},c=s||i||qp();c&&!c.reportNamespaces&&(c.reportNamespaces=new Yp),c||Dp(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=(0,o.useMemo)(()=>{var e;return m(m(m({},Hp),null===c||void 0===c||null===(e=c.options)||void 0===e?void 0:e.react),r)},[c,r]),{useSuspense:d,keyPrefix:h}=u,p=e||l||(null===c||void 0===c||null===(t=c.options)||void 0===t?void 0:t.defaultNS),f=Bp(p)?[p]:p||["translation"],g=(0,o.useMemo)(()=>f,f);null===c||void 0===c||null===(n=c.reportNamespaces)||void 0===n||null===(a=n.addUsedNamespaces)||void 0===a||a.call(n,g);const x=(0,o.useRef)(0),v=(0,o.useCallback)(e=>{if(!c)return rf;const{bindI18n:t,bindI18nStore:n}=u,a=()=>{x.current+=1,e()};return t&&c.on(t,a),n&&c.store.on(n,a),()=>{t&&t.split(" ").forEach(e=>c.off(e,a)),n&&n.split(" ").forEach(e=>c.store.off(e,a))}},[c,u]),y=(0,o.useRef)(),b=(0,o.useCallback)(()=>{if(!c)return af;const e=!(!c.isInitialized&&!c.initializedStoreOnce)&&g.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e))return!1}}):(Dp(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,c,u)),t=r.lng||c.language,n=x.current,a=y.current;if(a&&a.ready===e&&a.lng===t&&a.keyPrefix===h&&a.revision===n)return a;const s={t:c.getFixedT(t,"fallback"===u.nsMode?g:g[0],h),ready:e,lng:t,keyPrefix:h,revision:n};return y.current=s,s},[c,g,h,u,r.lng]),[w,k]=(0,o.useState)(0),{t:N,ready:j}=(0,nf.useSyncExternalStore)(v,b,b);(0,o.useEffect)(()=>{if(c&&!j&&!d){const e=()=>k(e=>e+1);r.lng?zp(c,r.lng,g,e):Lp(c,g,e)}},[c,r.lng,g,j,d,w]);const S=c||{},C=(0,o.useRef)(null),E=(0,o.useRef)(),T=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const n=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(n,"__original"))try{Object.defineProperty(n,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(a){}return n},I=(0,o.useMemo)(()=>{const e=S,t=null===e||void 0===e?void 0:e.language;let n=e;e&&(C.current&&C.current.__original===e?E.current!==t?(n=T(e),C.current=n,E.current=t):n=C.current:(n=T(e),C.current=n,E.current=t));const a=[N,n,j];return a.t=N,a.i18n=n,a.ready=j,a},[N,S,j,S.resolvedLanguage,S.language,S.languages]);if(c&&d&&!j)throw new Promise(e=>{const t=()=>e();r.lng?zp(c,r.lng,g,t):Lp(c,g,t)});return I};const{slice:of,forEach:lf}=[];const cf=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,uf={create(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*n*1e3)),a&&(r.domain=a),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"},a=encodeURIComponent(t);let r="".concat(e,"=").concat(a);if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+="; Max-Age=".concat(Math.floor(e))}if(n.domain){if(!cf.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain=".concat(n.domain)}if(n.path){if(!cf.test(n.path))throw new TypeError("option path is invalid");r+="; Path=".concat(n.path)}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(r+="; Partitioned"),r}(e,t,r)},read(e){const t="".concat(e,"="),n=document.cookie.split(";");for(let a=0;a<n.length;a++){let e=n[a];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var df={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return uf.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:a,cookieDomain:r,cookieOptions:s}=t;n&&"undefined"!==typeof document&&uf.create(n,e,a,r,s)}},hf={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){var a;let{search:e}=window.location;!window.location.search&&(null===(a=window.location.hash)||void 0===a?void 0:a.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const r=e.substring(1).split("&");for(let a=0;a<r.length;a++){const e=r[a].indexOf("=");if(e>0){r[a].substring(0,e)===n&&(t=r[a].substring(e+1))}}}return t}},pf={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:a}=e;if("undefined"!==typeof window){const{hash:e}=window.location;if(e&&e.length>2){const s=e.substring(1);if(n){const e=s.split("&");for(let a=0;a<e.length;a++){const r=e[a].indexOf("=");if(r>0){e[a].substring(0,r)===n&&(t=e[a].substring(r+1))}}}if(t)return t;if(!t&&a>-1){var r;const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;return null===(r=t["number"===typeof a?a:0])||void 0===r?void 0:r.replace("/","")}}}return t}};let ff=null;const mf=()=>{if(null!==ff)return ff;try{if(ff="undefined"!==typeof window&&null!==window.localStorage,!ff)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(jEe){ff=!1}return ff};var gf={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&mf())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&mf()&&window.localStorage.setItem(n,e)}};let xf=null;const vf=()=>{if(null!==xf)return xf;try{if(xf="undefined"!==typeof window&&null!==window.sessionStorage,!xf)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(jEe){xf=!1}return xf};var yf={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&vf())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&vf()&&window.sessionStorage.setItem(n,e)}},bf={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:a}=navigator;if(e)for(let r=0;r<e.length;r++)t.push(e[r]);n&&t.push(n),a&&t.push(a)}return t.length>0?t:void 0}},wf={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const a=n||("undefined"!==typeof document?document.documentElement:null);return a&&"function"===typeof a.getAttribute&&(t=a.getAttribute("lang")),t}},kf={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"===typeof window)return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(a))return;return null===(t=a["number"===typeof n?n:0])||void 0===t?void 0:t.replace("/","")}},Nf={name:"subdomain",lookup(e){var t;let{lookupFromSubdomainIndex:n}=e;const a="number"===typeof n?n+1:1,r="undefined"!==typeof window&&(null===(t=window.location)||void 0===t||null===(t=t.hostname)||void 0===t?void 0:t.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[a]}};let jf=!1;try{document.cookie,jf=!0}catch(jEe){}const Sf=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];jf||Sf.splice(1,1);class Cf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return lf.call(of.call(arguments,1),t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])}),e}(t,this.options||{},{order:Sf,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(df),this.addDetector(hf),this.addDetector(gf),this.addDetector(yf),this.addDetector(bf),this.addDetector(wf),this.addDetector(kf),this.addDetector(Nf),this.addDetector(pf)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>void 0!==e&&null!==e&&!function(e){return"string"===typeof e&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(e))}(e)).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}Cf.type="languageDetector";const Ef={en:{translation:JSON.parse('{"common":{"loading":"Loading...","error":"Error","success":"Success","save":"Save","cancel":"Cancel","delete":"Delete","edit":"Edit","close":"Close","confirm":"Confirm","back":"Back","next":"Next","search":"Search","filter":"Filter","refresh":"Refresh","export":"Export","download":"Download","settings":"Settings"},"nav":{"trading":"Trading","orders":"Orders","alerts":"Alerts","auto":"Auto","news":"News","social":"Social","portfolio":"Portfolio","wallet":"Wallet","paper":"Paper"},"auth":{"signIn":"Sign In","signOut":"Sign Out","welcome":"Welcome","profile":"Profile"},"trading":{"buy":"Buy","sell":"Sell","symbol":"Symbol","quantity":"Quantity","price":"Price","total":"Total","orderType":"Order Type","market":"Market","limit":"Limit","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Place Order","orderValue":"Order Value","currentPrice":"Current Price"},"alerts":{"title":"Price Alerts","addAlert":"Add Alert","noAlerts":"No alerts set","createPrompt":"Click \'Add Alert\' to create one","above":"Above","below":"Below","targetPrice":"Target Price","condition":"Condition","triggered":"Triggered","pending":"Pending","soundEnabled":"Sound Enabled"},"wallet":{"title":"My Wallet","totalBalance":"Total Balance","holdings":"Holdings","send":"Send","receive":"Receive","transactions":"Recent Transactions","address":"Wallet Address","copied":"Copied!","amount":"Amount","recipient":"Recipient Address"},"crawler":{"title":"Trade Signals","whales":"Whale Activity","news":"News Headlines","social":"Social Signals","orderbook":"Order Book","critical":"Critical","high":"High","medium":"Medium","low":"Low","noSignals":"No signals detected"},"autoTrading":{"title":"Auto Trading","paperMode":"Paper Mode","liveMode":"Live Mode","strategies":"Trading Strategies","start":"Start","stop":"Stop","trades":"Trades","pnl":"P&L","wins":"Wins","losses":"Losses"},"news":{"title":"Live News Feed","allNews":"All News","bullish":"Bullish","bearish":"Bearish","highImpact":"High Impact","sentiment":"Market Sentiment"},"export":{"exportCSV":"Export CSV","exportPDF":"Export PDF","downloadHistory":"Download Trade History"},"status":{"live":"Live","online":"Online","offline":"Offline","connected":"Connected","disconnected":"Disconnected","focused":"Focused","stressed":"Stressed","fatigued":"Fatigued","confident":"Confident"}}')},es:{translation:JSON.parse('{"common":{"loading":"Cargando...","error":"Error","success":"\xc9xito","save":"Guardar","cancel":"Cancelar","delete":"Eliminar","edit":"Editar","close":"Cerrar","confirm":"Confirmar","back":"Atr\xe1s","next":"Siguiente","search":"Buscar","filter":"Filtrar","refresh":"Actualizar","export":"Exportar","download":"Descargar","settings":"Configuraci\xf3n"},"nav":{"trading":"Trading","orders":"\xd3rdenes","alerts":"Alertas","auto":"Auto","news":"Noticias","social":"Social","portfolio":"Portafolio","wallet":"Cartera","paper":"Demo"},"auth":{"signIn":"Iniciar Sesi\xf3n","signOut":"Cerrar Sesi\xf3n","welcome":"Bienvenido","profile":"Perfil"},"trading":{"buy":"Comprar","sell":"Vender","symbol":"S\xedmbolo","quantity":"Cantidad","price":"Precio","total":"Total","orderType":"Tipo de Orden","market":"Mercado","limit":"L\xedmite","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Realizar Orden","orderValue":"Valor de Orden","currentPrice":"Precio Actual"},"alerts":{"title":"Alertas de Precio","addAlert":"Agregar Alerta","noAlerts":"Sin alertas","createPrompt":"Haz clic en \'Agregar Alerta\' para crear una","above":"Por Encima","below":"Por Debajo","targetPrice":"Precio Objetivo","condition":"Condici\xf3n","triggered":"Activada","pending":"Pendiente","soundEnabled":"Sonido Activado"},"wallet":{"title":"Mi Cartera","totalBalance":"Balance Total","holdings":"Posiciones","send":"Enviar","receive":"Recibir","transactions":"Transacciones Recientes","address":"Direcci\xf3n de Cartera","copied":"\xa1Copiado!","amount":"Cantidad","recipient":"Direcci\xf3n del Destinatario"},"crawler":{"title":"Se\xf1ales de Trading","whales":"Actividad de Ballenas","news":"Titulares de Noticias","social":"Se\xf1ales Sociales","orderbook":"Libro de \xd3rdenes","critical":"Cr\xedtico","high":"Alto","medium":"Medio","low":"Bajo","noSignals":"Sin se\xf1ales detectadas"},"autoTrading":{"title":"Trading Autom\xe1tico","paperMode":"Modo Demo","liveMode":"Modo Real","strategies":"Estrategias de Trading","start":"Iniciar","stop":"Detener","trades":"Operaciones","pnl":"P&L","wins":"Ganancias","losses":"P\xe9rdidas"},"news":{"title":"Noticias en Vivo","allNews":"Todas","bullish":"Alcistas","bearish":"Bajistas","highImpact":"Alto Impacto","sentiment":"Sentimiento del Mercado"},"export":{"exportCSV":"Exportar CSV","exportPDF":"Exportar PDF","downloadHistory":"Descargar Historial"},"status":{"live":"En Vivo","online":"En L\xednea","offline":"Desconectado","connected":"Conectado","disconnected":"Desconectado","focused":"Enfocado","stressed":"Estresado","fatigued":"Cansado","confident":"Confiado"}}')},zh:{translation:JSON.parse('{"common":{"loading":"\u52a0\u8f7d\u4e2d...","error":"\u9519\u8bef","success":"\u6210\u529f","save":"\u4fdd\u5b58","cancel":"\u53d6\u6d88","delete":"\u5220\u9664","edit":"\u7f16\u8f91","close":"\u5173\u95ed","confirm":"\u786e\u8ba4","back":"\u8fd4\u56de","next":"\u4e0b\u4e00\u6b65","search":"\u641c\u7d22","filter":"\u7b5b\u9009","refresh":"\u5237\u65b0","export":"\u5bfc\u51fa","download":"\u4e0b\u8f7d","settings":"\u8bbe\u7f6e"},"nav":{"trading":"\u4ea4\u6613","orders":"\u8ba2\u5355","alerts":"\u8b66\u62a5","auto":"\u81ea\u52a8","news":"\u65b0\u95fb","social":"\u793e\u4ea4","portfolio":"\u6295\u8d44\u7ec4\u5408","wallet":"\u94b1\u5305","paper":"\u6a21\u62df"},"auth":{"signIn":"\u767b\u5f55","signOut":"\u9000\u51fa","welcome":"\u6b22\u8fce","profile":"\u4e2a\u4eba\u8d44\u6599"},"trading":{"buy":"\u4e70\u5165","sell":"\u5356\u51fa","symbol":"\u4ee3\u7801","quantity":"\u6570\u91cf","price":"\u4ef7\u683c","total":"\u603b\u8ba1","orderType":"\u8ba2\u5355\u7c7b\u578b","market":"\u5e02\u4ef7","limit":"\u9650\u4ef7","stopLoss":"\u6b62\u635f","takeProfit":"\u6b62\u76c8","trailingStop":"\u8ffd\u8e2a\u6b62\u635f","placeOrder":"\u4e0b\u5355","orderValue":"\u8ba2\u5355\u4ef7\u503c","currentPrice":"\u5f53\u524d\u4ef7\u683c"},"alerts":{"title":"\u4ef7\u683c\u8b66\u62a5","addAlert":"\u6dfb\u52a0\u8b66\u62a5","noAlerts":"\u6682\u65e0\u8b66\u62a5","createPrompt":"\u70b9\u51fb\'\u6dfb\u52a0\u8b66\u62a5\'\u521b\u5efa\u4e00\u4e2a","above":"\u9ad8\u4e8e","below":"\u4f4e\u4e8e","targetPrice":"\u76ee\u6807\u4ef7\u683c","condition":"\u6761\u4ef6","triggered":"\u5df2\u89e6\u53d1","pending":"\u5f85\u5b9a","soundEnabled":"\u5f00\u542f\u58f0\u97f3"},"wallet":{"title":"\u6211\u7684\u94b1\u5305","totalBalance":"\u603b\u4f59\u989d","holdings":"\u6301\u4ed3","send":"\u53d1\u9001","receive":"\u63a5\u6536","transactions":"\u6700\u8fd1\u4ea4\u6613","address":"\u94b1\u5305\u5730\u5740","copied":"\u5df2\u590d\u5236!","amount":"\u91d1\u989d","recipient":"\u63a5\u6536\u5730\u5740"},"crawler":{"title":"\u4ea4\u6613\u4fe1\u53f7","whales":"\u5de8\u9cb8\u6d3b\u52a8","news":"\u65b0\u95fb\u5934\u6761","social":"\u793e\u4ea4\u4fe1\u53f7","orderbook":"\u8ba2\u5355\u7c3f","critical":"\u7d27\u6025","high":"\u9ad8","medium":"\u4e2d","low":"\u4f4e","noSignals":"\u6682\u65e0\u4fe1\u53f7"},"autoTrading":{"title":"\u81ea\u52a8\u4ea4\u6613","paperMode":"\u6a21\u62df\u6a21\u5f0f","liveMode":"\u5b9e\u76d8\u6a21\u5f0f","strategies":"\u4ea4\u6613\u7b56\u7565","start":"\u542f\u52a8","stop":"\u505c\u6b62","trades":"\u4ea4\u6613","pnl":"\u76c8\u4e8f","wins":"\u76c8\u5229","losses":"\u4e8f\u635f"},"news":{"title":"\u5b9e\u65f6\u65b0\u95fb","allNews":"\u5168\u90e8","bullish":"\u770b\u6da8","bearish":"\u770b\u8dcc","highImpact":"\u91cd\u5927\u5f71\u54cd","sentiment":"\u5e02\u573a\u60c5\u7eea"},"export":{"exportCSV":"\u5bfc\u51faCSV","exportPDF":"\u5bfc\u51faPDF","downloadHistory":"\u4e0b\u8f7d\u4ea4\u6613\u8bb0\u5f55"},"status":{"live":"\u5b9e\u65f6","online":"\u5728\u7ebf","offline":"\u79bb\u7ebf","connected":"\u5df2\u8fde\u63a5","disconnected":"\u5df2\u65ad\u5f00","focused":"\u4e13\u6ce8","stressed":"\u7d27\u5f20","fatigued":"\u75b2\u52b3","confident":"\u81ea\u4fe1"}}')},fr:{translation:JSON.parse('{"common":{"loading":"Chargement...","error":"Erreur","success":"Succ\xe8s","save":"Enregistrer","cancel":"Annuler","delete":"Supprimer","edit":"Modifier","close":"Fermer","confirm":"Confirmer","back":"Retour","next":"Suivant","search":"Rechercher","filter":"Filtrer","refresh":"Actualiser","export":"Exporter","download":"T\xe9l\xe9charger","settings":"Param\xe8tres"},"nav":{"trading":"Trading","orders":"Ordres","alerts":"Alertes","auto":"Auto","news":"Actualit\xe9s","social":"Social","portfolio":"Portefeuille","wallet":"Portefeuille","paper":"D\xe9mo"},"auth":{"signIn":"Connexion","signOut":"D\xe9connexion","welcome":"Bienvenue","profile":"Profil"},"trading":{"buy":"Acheter","sell":"Vendre","symbol":"Symbole","quantity":"Quantit\xe9","price":"Prix","total":"Total","orderType":"Type d\'Ordre","market":"March\xe9","limit":"Limite","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Passer l\'Ordre","orderValue":"Valeur de l\'Ordre","currentPrice":"Prix Actuel"},"alerts":{"title":"Alertes de Prix","addAlert":"Ajouter une Alerte","noAlerts":"Aucune alerte","createPrompt":"Cliquez sur \'Ajouter une Alerte\' pour en cr\xe9er une","above":"Au-dessus","below":"En-dessous","targetPrice":"Prix Cible","condition":"Condition","triggered":"D\xe9clench\xe9e","pending":"En attente","soundEnabled":"Son Activ\xe9"},"wallet":{"title":"Mon Portefeuille","totalBalance":"Solde Total","holdings":"Positions","send":"Envoyer","receive":"Recevoir","transactions":"Transactions R\xe9centes","address":"Adresse du Portefeuille","copied":"Copi\xe9!","amount":"Montant","recipient":"Adresse du Destinataire"},"crawler":{"title":"Signaux de Trading","whales":"Activit\xe9 des Baleines","news":"Titres des Actualit\xe9s","social":"Signaux Sociaux","orderbook":"Carnet d\'Ordres","critical":"Critique","high":"\xc9lev\xe9","medium":"Moyen","low":"Faible","noSignals":"Aucun signal d\xe9tect\xe9"},"autoTrading":{"title":"Trading Automatique","paperMode":"Mode D\xe9mo","liveMode":"Mode R\xe9el","strategies":"Strat\xe9gies de Trading","start":"D\xe9marrer","stop":"Arr\xeater","trades":"Transactions","pnl":"P&L","wins":"Gains","losses":"Pertes"},"news":{"title":"Actualit\xe9s en Direct","allNews":"Toutes","bullish":"Haussi\xe8res","bearish":"Baissi\xe8res","highImpact":"Fort Impact","sentiment":"Sentiment du March\xe9"},"export":{"exportCSV":"Exporter CSV","exportPDF":"Exporter PDF","downloadHistory":"T\xe9l\xe9charger l\'Historique"},"status":{"live":"En Direct","online":"En Ligne","offline":"Hors Ligne","connected":"Connect\xe9","disconnected":"D\xe9connect\xe9","focused":"Concentr\xe9","stressed":"Stress\xe9","fatigued":"Fatigu\xe9","confident":"Confiant"}}')},de:{translation:JSON.parse('{"common":{"loading":"Laden...","error":"Fehler","success":"Erfolg","save":"Speichern","cancel":"Abbrechen","delete":"L\xf6schen","edit":"Bearbeiten","close":"Schlie\xdfen","confirm":"Best\xe4tigen","back":"Zur\xfcck","next":"Weiter","search":"Suchen","filter":"Filtern","refresh":"Aktualisieren","export":"Exportieren","download":"Herunterladen","settings":"Einstellungen"},"nav":{"trading":"Handel","orders":"Auftr\xe4ge","alerts":"Alarme","auto":"Auto","news":"Nachrichten","social":"Sozial","portfolio":"Portfolio","wallet":"Wallet","paper":"Demo"},"auth":{"signIn":"Anmelden","signOut":"Abmelden","welcome":"Willkommen","profile":"Profil"},"trading":{"buy":"Kaufen","sell":"Verkaufen","symbol":"Symbol","quantity":"Menge","price":"Preis","total":"Gesamt","orderType":"Auftragsart","market":"Markt","limit":"Limit","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Auftrag Erteilen","orderValue":"Auftragswert","currentPrice":"Aktueller Preis"},"alerts":{"title":"Preisalarme","addAlert":"Alarm Hinzuf\xfcgen","noAlerts":"Keine Alarme","createPrompt":"Klicken Sie auf \'Alarm Hinzuf\xfcgen\' um einen zu erstellen","above":"\xdcber","below":"Unter","targetPrice":"Zielpreis","condition":"Bedingung","triggered":"Ausgel\xf6st","pending":"Ausstehend","soundEnabled":"Ton Aktiviert"},"wallet":{"title":"Mein Wallet","totalBalance":"Gesamtguthaben","holdings":"Best\xe4nde","send":"Senden","receive":"Empfangen","transactions":"Letzte Transaktionen","address":"Wallet-Adresse","copied":"Kopiert!","amount":"Betrag","recipient":"Empf\xe4ngeradresse"},"crawler":{"title":"Handelssignale","whales":"Wal-Aktivit\xe4t","news":"Schlagzeilen","social":"Soziale Signale","orderbook":"Orderbuch","critical":"Kritisch","high":"Hoch","medium":"Mittel","low":"Niedrig","noSignals":"Keine Signale erkannt"},"autoTrading":{"title":"Automatischer Handel","paperMode":"Demo-Modus","liveMode":"Live-Modus","strategies":"Handelsstrategien","start":"Starten","stop":"Stoppen","trades":"Trades","pnl":"G&V","wins":"Gewinne","losses":"Verluste"},"news":{"title":"Live-Nachrichten","allNews":"Alle","bullish":"Bullisch","bearish":"B\xe4risch","highImpact":"Hohe Auswirkung","sentiment":"Marktstimmung"},"export":{"exportCSV":"CSV Exportieren","exportPDF":"PDF Exportieren","downloadHistory":"Verlauf Herunterladen"},"status":{"live":"Live","online":"Online","offline":"Offline","connected":"Verbunden","disconnected":"Getrennt","focused":"Fokussiert","stressed":"Gestresst","fatigued":"Erm\xfcdet","confident":"Selbstsicher"}}')}};Rp.use(Cf).use(Kp).init({resources:Ef,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const Tf=[{code:"en",name:"English",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"es",name:"Espa\xf1ol",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"zh",name:"\u4e2d\u6587",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"fr",name:"Fran\xe7ais",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"de",name:"Deutsch",flag:"\ud83c\udde9\ud83c\uddea"}],If=()=>{const e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const t=e.current;if(!t)return;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%^&*(){}[]|;:,.<>?/~`\u03b1\u03b2\u03b3\u03b4\u03b5\u03b6\u03b7\u03b8\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03bf\u03c0\u03c1\u03c3\u03c4\u03c5\u03c6\u03c7\u03c8\u03c9\u2211\u220f\u222b\u2202\u2207\u2248\u2260\u2264\u2265\xb1\xd7\xf7\u221a\u221e",a=Math.floor(window.innerWidth/20),r=[];for(let e=0;e<a;e++){const s=document.createElement("div");s.className="matrix-column",s.style.left="".concat(e/a*100,"%"),s.style.animationDuration="".concat(8+12*Math.random(),"s"),s.style.animationDelay="".concat(5*Math.random(),"s"),s.style.opacity=.5*Math.random()+.1;const i=Math.floor(20*Math.random())+10;let o="";for(let e=0;e<i;e++){const e=n[Math.floor(124*Math.random())];o+="<span>".concat(e,"</span>")}s.innerHTML=o,t.appendChild(s),r.push(s)}const s=setInterval(()=>{r.forEach(e=>{e.querySelectorAll("span").forEach(e=>{Math.random()>.95&&(e.textContent=n[Math.floor(124*Math.random())])})})},100);return()=>{clearInterval(s),r.forEach(e=>e.remove())}},[]),(0,zt.jsxs)("div",{ref:e,className:"matrix-bg","aria-hidden":"true",children:[(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-[#050505]/50 to-[#050505]"}),(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#050505]/80 via-transparent to-[#050505]/80"})]})},Af=e=>{let{onComplete:t}=e;const[n,a]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const e=setTimeout(()=>a(!0),1500);return()=>clearTimeout(e)},[]),(0,zt.jsxs)(uu.div,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center",exit:{opacity:0},transition:{duration:.5},children:[(0,zt.jsx)(If,{}),(0,zt.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,zt.jsxs)(uu.div,{className:"relative w-24 h-24 mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20},children:[(0,zt.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/30 backdrop-blur-xl"}),(0,zt.jsx)("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-slate-900 to-slate-800 border border-white/10 flex items-center justify-center",children:(0,zt.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-12 h-12",children:[(0,zt.jsx)(uu.path,{d:"M 50 15 C 70 15, 85 30, 85 50 C 85 70, 70 85, 50 85 C 30 85, 15 70, 15 50 C 15 30, 30 15, 50 15",fill:"none",stroke:"#14b8a6",strokeWidth:"3",strokeLinecap:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut"}}),(0,zt.jsx)(uu.path,{d:"M 30 50 L 45 50 L 55 35 L 70 50",fill:"none",stroke:"#14b8a6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,delay:.5,ease:"easeOut"}})]})}),(0,zt.jsx)("div",{className:"absolute inset-0 rounded-full bg-teal-500/20 blur-xl animate-pulse"})]}),(0,zt.jsxs)(uu.div,{className:"flex items-center gap-3 mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,zt.jsx)("h1",{className:"font-heading text-xl md:text-2xl font-medium text-slate-300 tracking-wide",children:"Next-Gen Algorithmic Trading Platform"}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-mono bg-teal-500/20 text-teal-400 border border-teal-500/30",children:"PRO"})]}),(0,zt.jsx)(an,{children:n&&(0,zt.jsx)(uu.button,{onClick:t,className:"mt-12 px-8 py-4 rounded-xl bg-slate-800/80 backdrop-blur-xl border border-white/10  text-white font-medium text-lg hover:bg-slate-700/80 hover:border-teal-500/30 hover:shadow-[0_0_30px_rgba(20,184,166,0.2)] transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":"enter-platform-btn",children:"Launch OracleIQ"})}),(0,zt.jsx)(uu.p,{className:"mt-6 text-sm text-slate-600 font-mono",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"OracleIQTrader.com - AI Trading Platform v1.0"})]})]})};function _f(e,t){let n;const a=()=>{const{currentTime:a}=t,r=(null===a?0:a.value)/100;n!==r&&e(r),n=r};return Ia.preUpdate(a,!0),()=>Aa(a)}const Of=new WeakMap;let Rf;const Pf=(e,t,n)=>(a,r)=>r&&r[0]?r[0][e+"Size"]:oc(a)&&"getBBox"in a?a.getBBox()[t]:a[n],Mf=Pf("inline","width","offsetWidth"),Df=Pf("block","height","offsetHeight");function Ff(e){var t;let{target:n,borderBoxSize:a}=e;null===(t=Of.get(n))||void 0===t||t.forEach(e=>{e(n,{get width(){return Mf(n,a)},get height(){return Df(n,a)}})})}function Lf(e){e.forEach(Ff)}function zf(e,t){Rf||"undefined"!==typeof ResizeObserver&&(Rf=new ResizeObserver(Lf));const n=Hc(e);return n.forEach(e=>{var n;let a=Of.get(e);a||(a=new Set,Of.set(e,a)),a.add(t),null===(n=Rf)||void 0===n||n.observe(e)}),()=>{n.forEach(e=>{const n=Of.get(e);var a;(null===n||void 0===n||n.delete(t),null!==n&&void 0!==n&&n.size)||(null===(a=Rf)||void 0===a||a.unobserve(e))})}}const Bf=new Set;let Uf;function Wf(e){return Bf.add(e),Uf||(Uf=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Bf.forEach(t=>t(e))},window.addEventListener("resize",Uf)),()=>{Bf.delete(e),Bf.size||"function"!==typeof Uf||(window.removeEventListener("resize",Uf),Uf=void 0)}}const Vf={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Hf(e,t,n,a){const r=n[t],{length:s,position:i}=Vf[t],o=r.current,l=n.time;r.current=e["scroll".concat(i)],r.scrollLength=e["scroll".concat(s)]-e["client".concat(s)],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=Yi(0,r.scrollLength,r.current);const c=a-l;r.velocity=c>50?0:Za(r.current-o,c)}const Gf={start:0,center:.5,end:1};function qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0;if(e in Gf&&(e=Gf[e]),"string"===typeof e){const t=parseFloat(e);e.endsWith("px")?a=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?a=t/100*document.documentElement.clientWidth:e.endsWith("vh")?a=t/100*document.documentElement.clientHeight:e=t}return"number"===typeof e&&(a=t*e),n+a}const Kf=[0,0];function Xf(e,t,n,a){let r=Array.isArray(e)?e:Kf,s=0,i=0;return"number"===typeof e?r=[e,e]:"string"===typeof e&&(r=(e=e.trim()).includes(" ")?e.split(" "):[e,Gf[e]?e:"0"]),s=qf(r[0],n,a),i=qf(r[1],t),s-i}const Yf={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},$f={x:0,y:0};function Qf(e,t,n){const{offset:a=Yf.All}=n,{target:r=e,axis:s="y"}=n,i="y"===s?"height":"width",o=r!==e?function(e,t){const n={x:0,y:0};let a=e;for(;a&&a!==t;)if(qt(a))n.x+=a.offsetLeft,n.y+=a.offsetTop,a=a.offsetParent;else if("svg"===a.tagName){const e=a.getBoundingClientRect();a=a.parentElement;const t=a.getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else{if(!(a instanceof SVGGraphicsElement))break;{const{x:e,y:t}=a.getBBox();n.x+=e,n.y+=t;let r=null,s=a.parentNode;for(;!r;)"svg"===s.tagName&&(r=s),s=a.parentNode;a=r}}return n}(r,e):$f,l=r===e?{width:e.scrollWidth,height:e.scrollHeight}:function(e){return"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}(r),c={width:e.clientWidth,height:e.clientHeight};t[s].offset.length=0;let u=!t[s].interpolate;const d=a.length;for(let h=0;h<d;h++){const e=Xf(a[h],c[i],l[i],o[s]);u||e===t[s].interpolatorOffsets[h]||(u=!0),t[s].offset[h]=e}u&&(t[s].interpolate=$i(t[s].offset,Qi(a),{clamp:!1}),t[s].interpolatorOffsets=[...t[s].offset]),t[s].progress=on(0,1,t[s].interpolate(t[s].current))}function Jf(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{measure:t=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0;if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let a=t;for(;a&&a!==e;)n.x.targetOffset+=a.offsetLeft,n.y.targetOffset+=a.offsetTop,a=a.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,a.target,n),function(e,t,n){Hf(e,"x",t,n),Hf(e,"y",t,n),t.time=n}(e,n,t),(a.offset||a.target)&&Qf(e,n,a)},notify:()=>t(n)}}const Zf=["container"],em=new WeakMap,tm=new WeakMap,nm=new WeakMap,am=e=>e===document.scrollingElement?window:e;function rm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{container:n=document.scrollingElement}=t,a=u(t,Zf);if(!n)return ja;let r=nm.get(n);r||(r=new Set,nm.set(n,r));const s=Jf(n,e,{time:0,x:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0},y:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}},a);if(r.add(s),!em.has(n)){const e=()=>{for(const e of r)e.measure(_a.timestamp);Ia.preUpdate(t)},t=()=>{for(const e of r)e.notify()},a=()=>Ia.read(e);em.set(n,a);const s=am(n);window.addEventListener("resize",a,{passive:!0}),n!==document.documentElement&&tm.set(n,function(e,t){return"function"===typeof e?Wf(e):zf(e,t)}(n,a)),s.addEventListener("scroll",a,{passive:!0}),a()}const i=em.get(n);return Ia.read(i,!1,!0),()=>{Aa(i);const e=nm.get(n);if(!e)return;if(e.delete(s),e.size)return;const t=em.get(n);var a;(em.delete(n),t)&&(am(n).removeEventListener("scroll",t),null===(a=tm.get(n))||void 0===a||a(),window.removeEventListener("resize",t))}}const sm=["source","container"],im=new Map;function om(e){var t,n,a,r;let{source:s,container:i}=e,o=u(e,sm);const{axis:l}=o;s&&(i=s);const c=null!==(t=im.get(i))&&void 0!==t?t:new Map;im.set(i,c);const d=null!==(n=o.target)&&void 0!==n?n:"self",h=null!==(a=c.get(d))&&void 0!==a?a:{},p=l+(null!==(r=o.offset)&&void 0!==r?r:[]).join(",");return h[p]||(h[p]=!o.target&&oo()?new ScrollTimeline({source:i,axis:l}):function(e){const t={value:0},n=rm(n=>{t.value=100*n[e.axis].progress},e);return{currentTime:t,cancel:n}}(m({container:i},o))),h[p]}const lm=["axis","container"];function cm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{axis:n="y",container:a=document.scrollingElement}=t,r=u(t,lm);if(!a)return ja;const s=m({axis:n,container:a},r);return"function"===typeof e?function(e,t){return function(e){return 2===e.length}(e)?rm(n=>{e(n[t.axis].progress,n)},t):_f(e,om(t))}(e,s):function(e,t){const n=om(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:e=>(e.pause(),_f(t=>{e.time=e.iterationDuration*t},n))})}(e,s)}const um=["container","target"],dm=()=>({scrollX:nr(0),scrollY:nr(0),scrollXProgress:nr(0),scrollYProgress:nr(0)}),hm=e=>!!e&&!e.current;function pm(e,t){const n=function(e){const t=Ut(()=>nr(e)),{isStatic:n}=(0,o.useContext)(Kt);if(n){const[,n]=(0,o.useState)(e);(0,o.useEffect)(()=>t.on("change",n),[])}return t}(t()),a=()=>n.set(t());return a(),Vt(()=>{const t=()=>Ia.preRender(a,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),Aa(a)}}),n}function fm(e,t,n,a){if("function"===typeof e)return function(e){er.current=[],e();const t=pm(er.current,e);return er.current=void 0,t}(e);if(void 0!==n&&!Array.isArray(n)&&"function"!==typeof t)return function(e,t,n,a){const r=Ut(()=>Object.keys(n)),s=Ut(()=>({}));for(const i of r)s[i]=fm(e,t,n[i],a);return s}(e,t,n,a);const r="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,n=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],a=$i(1+t<0||arguments.length<=1+t?void 0:arguments[1+t],2+t<0||arguments.length<=2+t?void 0:arguments[2+t],3+t<0||arguments.length<=3+t?void 0:arguments[3+t]);return e?a(n):a}(t,n,a);return Array.isArray(e)?mm(e,r):mm([e],e=>{let[t]=e;return r(t)})}function mm(e,t){const n=Ut(()=>[]);return pm(e,()=>{n.length=0;const a=e.length;for(let t=0;t<a;t++)n[t]=e[t].get();return t(n)})}const gm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xm=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},vm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var ym={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bm=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],wm=(0,o.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c}=e,d=u(e,bm);return(0,o.createElement)("svg",m(m(m({ref:t},ym),{},{width:a,height:a,stroke:n,strokeWidth:s?24*Number(r)/Number(a):r,className:vm("lucide",i)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...c.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),km=["className"],Nm=(e,t)=>{const n=(0,o.forwardRef)((n,a)=>{let{className:r}=n,s=u(n,km);return(0,o.createElement)(wm,m({ref:a,iconNode:t,className:vm("lucide-".concat(gm(xm(e))),"lucide-".concat(e),r)},s))});return n.displayName=xm(e),n},jm=Nm("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Sm=Nm("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Cm=Nm("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Em=Nm("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Tm=Nm("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Im=Nm("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Am=Nm("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),_m=Nm("ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]),Om=Nm("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),Rm=Nm("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Pm=Nm("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Mm=Nm("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Dm=Nm("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Fm=Nm("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Lm=Nm("code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),zm=Nm("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Bm=Nm("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Um=Nm("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Wm=Nm("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Vm=Nm("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Hm=Nm("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Gm=Nm("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),qm=Nm("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Km=Nm("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Xm=Nm("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Ym=Nm("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),$m=Nm("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Qm=Nm("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jm=Nm("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function Zm(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Zm(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function eg(){for(var e,t,n=0,a="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Zm(e))&&(a&&(a+=" "),a+=t);return a}const tg=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},ng="-",ag=[],rg=e=>{const t=og(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return ig(e);const n=e.split(ng),a=""===n[0]&&n.length>1?1:0;return sg(n,a,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=a[e],r=n[e];return t?r?((e,t)=>{const n=new Array(e.length+t.length);for(let a=0;a<e.length;a++)n[a]=e[a];for(let a=0;a<t.length;a++)n[e.length+a]=t[a];return n})(r,t):t:r||ag}return n[e]||ag}}},sg=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const a=e[t],r=n.nextPart.get(a);if(r){const n=sg(e,t+1,r);if(n)return n}const s=n.validators;if(null===s)return;const i=0===t?e.join(ng):e.slice(t).join(ng),o=s.length;for(let l=0;l<o;l++){const e=s[l];if(e.validator(i))return e.classGroupId}},ig=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),a=t.slice(0,n);return a?"arbitrary.."+a:void 0})(),og=e=>{const{theme:t,classGroups:n}=e;return lg(n,t)},lg=(e,t)=>{const n=tg();for(const a in e){const r=e[a];cg(r,n,a,t)}return n},cg=(e,t,n,a)=>{const r=e.length;for(let s=0;s<r;s++){const r=e[s];ug(r,t,n,a)}},ug=(e,t,n,a)=>{"string"!==typeof e?"function"!==typeof e?pg(e,t,n,a):hg(e,t,n,a):dg(e,t,n)},dg=(e,t,n)=>{(""===e?t:fg(t,e)).classGroupId=n},hg=(e,t,n,a)=>{mg(e)?cg(e(a),t,n,a):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},pg=(e,t,n,a)=>{const r=Object.entries(e),s=r.length;for(let i=0;i<s;i++){const[e,s]=r[i];cg(s,fg(t,e),n,a)}},fg=(e,t)=>{let n=e;const a=t.split(ng),r=a.length;for(let s=0;s<r;s++){const e=a[s];let t=n.nextPart.get(e);t||(t=tg(),n.nextPart.set(e,t)),n=t}return n},mg=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,gg=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),a=Object.create(null);const r=(r,s)=>{n[r]=s,t++,t>e&&(t=0,a=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=a[e])?(r(e,t),t):void 0},set(e,t){e in n?n[e]=t:r(e,t)}}},xg=[],vg=(e,t,n,a,r)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:a,isExternal:r}),yg=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=e=>{const t=[];let n,a=0,r=0,s=0;const i=e.length;for(let u=0;u<i;u++){const i=e[u];if(0===a&&0===r){if(":"===i){t.push(e.slice(s,u)),s=u+1;continue}if("/"===i){n=u;continue}}"["===i?a++:"]"===i?a--:"("===i?r++:")"===i&&r--}const o=0===t.length?e:e.slice(s);let l=o,c=!1;o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0);return vg(t,c,l,n&&n>s?n-s:void 0)};if(t){const e=t+":",n=a;a=t=>t.startsWith(e)?n(t.slice(e.length)):vg(xg,!1,t,void 0,!0)}if(n){const e=a;a=t=>n({className:t,parseClassName:e})}return a},bg=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let r=0;r<e.length;r++){const s=e[r],i="["===s[0],o=t.has(s);i||o?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(s)):a.push(s)}return a.length>0&&(a.sort(),n.push(...a)),n}},wg=/\s+/,kg=e=>{if("string"===typeof e)return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=kg(e[a]))&&(n&&(n+=" "),n+=t);return n},Ng=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];let r,s,i,o;const l=e=>{const t=s(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:r,sortModifiers:s}=t,i=[],o=e.trim().split(wg);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=a(f?h.substring(0,p):h);if(!m){if(!f){l=e+(l.length>0?" "+l:l);continue}if(m=a(h),!m){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=0===u.length?"":1===u.length?u[0]:s(u).join(":"),x=d?g+"!":g,v=x+m;if(i.indexOf(v)>-1)continue;i.push(v);const y=r(m,f);for(let n=0;n<y.length;++n){const e=y[n];i.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return i(e,n),n};return o=t=>{const a=n.reduce((e,t)=>t(e),e());return r=(e=>m({cache:gg(e.cacheSize),parseClassName:yg(e),sortModifiers:bg(e)},rg(e)))(a),s=r.cache.get,i=r.cache.set,o=l,l(t)},function(){return o(function(){let e,t,n=0,a="";for(;n<arguments.length;){var r;(e=(r=n++)<0||arguments.length<=r?void 0:arguments[r])&&(t=kg(e))&&(a&&(a+=" "),a+=t)}return a}(...arguments))}},jg=[],Sg=e=>{const t=t=>t[e]||jg;return t.isThemeGetter=!0,t},Cg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Eg=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Tg=/^\d+\/\d+$/,Ig=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ag=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_g=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Og=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rg=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pg=e=>Tg.test(e),Mg=e=>!!e&&!Number.isNaN(Number(e)),Dg=e=>!!e&&Number.isInteger(Number(e)),Fg=e=>e.endsWith("%")&&Mg(e.slice(0,-1)),Lg=e=>Ig.test(e),zg=()=>!0,Bg=e=>Ag.test(e)&&!_g.test(e),Ug=()=>!1,Wg=e=>Og.test(e),Vg=e=>Rg.test(e),Hg=e=>!qg(e)&&!Jg(e),Gg=e=>sx(e,cx,Ug),qg=e=>Cg.test(e),Kg=e=>sx(e,ux,Bg),Xg=e=>sx(e,dx,Mg),Yg=e=>sx(e,ox,Ug),$g=e=>sx(e,lx,Vg),Qg=e=>sx(e,px,Wg),Jg=e=>Eg.test(e),Zg=e=>ix(e,ux),ex=e=>ix(e,hx),tx=e=>ix(e,ox),nx=e=>ix(e,cx),ax=e=>ix(e,lx),rx=e=>ix(e,px,!0),sx=(e,t,n)=>{const a=Cg.exec(e);return!!a&&(a[1]?t(a[1]):n(a[2]))},ix=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=Eg.exec(e);return!!a&&(a[1]?t(a[1]):n)},ox=e=>"position"===e||"percentage"===e,lx=e=>"image"===e||"url"===e,cx=e=>"length"===e||"size"===e||"bg-size"===e,ux=e=>"length"===e,dx=e=>"number"===e,hx=e=>"family-name"===e,px=e=>"shadow"===e,fx=(Symbol.toStringTag,()=>{const e=Sg("color"),t=Sg("font"),n=Sg("text"),a=Sg("font-weight"),r=Sg("tracking"),s=Sg("leading"),i=Sg("breakpoint"),o=Sg("container"),l=Sg("spacing"),c=Sg("radius"),u=Sg("shadow"),d=Sg("inset-shadow"),h=Sg("text-shadow"),p=Sg("drop-shadow"),f=Sg("blur"),m=Sg("perspective"),g=Sg("aspect"),x=Sg("ease"),v=Sg("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Jg,qg],b=()=>[Jg,qg,l],w=()=>[Pg,"full","auto",...b()],k=()=>[Dg,"none","subgrid",Jg,qg],N=()=>["auto",{span:["full",Dg,Jg,qg]},Dg,Jg,qg],j=()=>[Dg,"auto",Jg,qg],S=()=>["auto","min","max","fr",Jg,qg],C=()=>["auto",...b()],E=()=>[Pg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],T=()=>[e,Jg,qg],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",tx,Yg,{position:[Jg,qg]}],A=()=>["auto","cover","contain",nx,Gg,{size:[Jg,qg]}],_=()=>[Fg,Zg,Kg],O=()=>["","none","full",c,Jg,qg],R=()=>["",Mg,Zg,Kg],P=()=>[Mg,Fg,tx,Yg],M=()=>["","none",f,Jg,qg],D=()=>["none",Mg,Jg,qg],F=()=>["none",Mg,Jg,qg],L=()=>[Mg,Jg,qg],z=()=>[Pg,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Lg],breakpoint:[Lg],color:[zg],container:[Lg],"drop-shadow":[Lg],ease:["in","out","in-out"],font:[Hg],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Lg],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Lg],shadow:[Lg],spacing:["px",Mg],text:[Lg],"text-shadow":[Lg],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pg,qg,Jg,g]}],container:["container"],columns:[{columns:[Mg,qg,Jg,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Dg,"auto",Jg,qg]}],basis:[{basis:[Pg,"full","auto",o,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Mg,Pg,"auto","initial","none",qg]}],grow:[{grow:["",Mg,Jg,qg]}],shrink:[{shrink:["",Mg,Jg,qg]}],order:[{order:[Dg,"first","last","none",Jg,qg]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[o,"screen",...E()]}],"min-w":[{"min-w":[o,"screen","none",...E()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",n,Zg,Kg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Jg,Xg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fg,qg]}],"font-family":[{font:[ex,qg,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Jg,qg]}],"line-clamp":[{"line-clamp":[Mg,"none",Jg,Xg]}],leading:[{leading:[s,...b()]}],"list-image":[{"list-image":["none",Jg,qg]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Jg,qg]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Mg,"from-font","auto",Jg,Kg]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[Mg,"auto",Jg,qg]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jg,qg]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jg,qg]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Dg,Jg,qg],radial:["",Jg,qg],conic:[Dg,Jg,qg]},ax,$g]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:_()}],"gradient-via-pos":[{via:_()}],"gradient-to-pos":[{to:_()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:O()}],"rounded-s":[{"rounded-s":O()}],"rounded-e":[{"rounded-e":O()}],"rounded-t":[{"rounded-t":O()}],"rounded-r":[{"rounded-r":O()}],"rounded-b":[{"rounded-b":O()}],"rounded-l":[{"rounded-l":O()}],"rounded-ss":[{"rounded-ss":O()}],"rounded-se":[{"rounded-se":O()}],"rounded-ee":[{"rounded-ee":O()}],"rounded-es":[{"rounded-es":O()}],"rounded-tl":[{"rounded-tl":O()}],"rounded-tr":[{"rounded-tr":O()}],"rounded-br":[{"rounded-br":O()}],"rounded-bl":[{"rounded-bl":O()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Mg,Jg,qg]}],"outline-w":[{outline:["",Mg,Zg,Kg]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",u,rx,Qg]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",d,rx,Qg]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[Mg,Kg]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",h,rx,Qg]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[Mg,Jg,qg]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Mg]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[Jg,qg]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Mg]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Jg,qg]}],filter:[{filter:["","none",Jg,qg]}],blur:[{blur:M()}],brightness:[{brightness:[Mg,Jg,qg]}],contrast:[{contrast:[Mg,Jg,qg]}],"drop-shadow":[{"drop-shadow":["","none",p,rx,Qg]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",Mg,Jg,qg]}],"hue-rotate":[{"hue-rotate":[Mg,Jg,qg]}],invert:[{invert:["",Mg,Jg,qg]}],saturate:[{saturate:[Mg,Jg,qg]}],sepia:[{sepia:["",Mg,Jg,qg]}],"backdrop-filter":[{"backdrop-filter":["","none",Jg,qg]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[Mg,Jg,qg]}],"backdrop-contrast":[{"backdrop-contrast":[Mg,Jg,qg]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Mg,Jg,qg]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Mg,Jg,qg]}],"backdrop-invert":[{"backdrop-invert":["",Mg,Jg,qg]}],"backdrop-opacity":[{"backdrop-opacity":[Mg,Jg,qg]}],"backdrop-saturate":[{"backdrop-saturate":[Mg,Jg,qg]}],"backdrop-sepia":[{"backdrop-sepia":["",Mg,Jg,qg]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Jg,qg]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Mg,"initial",Jg,qg]}],ease:[{ease:["linear","initial",x,Jg,qg]}],delay:[{delay:[Mg,Jg,qg]}],animate:[{animate:["none",v,Jg,qg]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Jg,qg]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:F()}],"scale-x":[{"scale-x":F()}],"scale-y":[{"scale-y":F()}],"scale-z":[{"scale-z":F()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[Jg,qg,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jg,qg]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jg,qg]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[Mg,Zg,Kg,Xg]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),mx=Ng(fx);function gx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mx(eg(t))}const xx=["children","className","title","icon","accent","animate","glowOnHover"],vx=e=>{let{children:t,className:n,title:a,icon:r,accent:s="teal",animate:i=!0,glowOnHover:o=!0}=e,l=u(e,xx);const c=i?uu.div:"div",d=i?{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"}}:{};return(0,zt.jsxs)(c,m(m(m({className:gx("relative overflow-hidden rounded-2xl","bg-black/40 backdrop-blur-xl","border transition-all duration-300",{teal:"border-teal-500/30 hover:border-teal-500/50",rose:"border-rose-500/30 hover:border-rose-500/50",indigo:"border-indigo-500/30 hover:border-indigo-500/50",white:"border-white/10 hover:border-white/20"}[s],o&&{teal:"hover:shadow-[0_0_30px_rgba(20,184,166,0.2)]",rose:"hover:shadow-[0_0_30px_rgba(244,63,94,0.2)]",indigo:"hover:shadow-[0_0_30px_rgba(99,102,241,0.2)]",white:"hover:shadow-[0_0_30px_rgba(255,255,255,0.1)]"}[s],n)},d),l),{},{children:[a&&(0,zt.jsxs)("div",{className:"flex items-center gap-3 border-b border-white/5 px-5 py-4",children:[r&&(0,zt.jsx)("span",{className:"text-xl",children:r}),(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold uppercase tracking-wider text-white/90",children:a})]}),(0,zt.jsx)("div",{className:"p-5",children:t})]}))},yx="".concat("https://tradehub-380.preview.emergentagent.com","/api"),bx=e=>{var t,n,a,r,s,i,l,c,u,d;let{onClose:h,onSignUp:p}=e;const[f,m]=(0,o.useState)({portfolio:null,bot:null,prediction:null,sentiment:null,competition:null,stats:null}),[g,x]=(0,o.useState)(!0),[v,y]=(0,o.useState)("portfolio"),[b,w]=(0,o.useState)(!0);(0,o.useEffect)(()=>{k();const e=setInterval(()=>{b&&k()},5e3);return()=>clearInterval(e)},[b]);const k=async()=>{try{const[e,t,n,a,r,s]=await Promise.all([fetch("".concat(yx,"/demo/portfolio")).then(e=>e.json()),fetch("".concat(yx,"/demo/bot")).then(e=>e.json()),fetch("".concat(yx,"/demo/prediction/BTC")).then(e=>e.json()),fetch("".concat(yx,"/demo/sentiment/BTC")).then(e=>e.json()),fetch("".concat(yx,"/demo/competition")).then(e=>e.json()),fetch("".concat(yx,"/demo/status")).then(e=>e.json())]);m({portfolio:e,bot:t,prediction:n,sentiment:a,competition:r,stats:s}),x(!1)}catch(e){console.error("Error fetching demo data:",e),x(!1)}},N=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),j=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%"),S=[{id:"portfolio",label:"Portfolio",icon:Sm},{id:"bot",label:"AI Bot",icon:qm},{id:"predictions",label:"ML Predict",icon:Rm},{id:"sentiment",label:"Sentiment",icon:Km},{id:"competition",label:"Compete",icon:Xm}];return g?(0,zt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-xl",children:(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)(uu.div,{className:"w-16 h-16 mx-auto mb-4 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,zt.jsx)("p",{className:"text-slate-400 font-mono",children:"Loading Demo Mode..."})]})}):(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-[#050505]/95 backdrop-blur-xl overflow-auto",children:[(0,zt.jsxs)("div",{className:"sticky top-0 z-10 bg-black/80 backdrop-blur-xl border-b border-white/5",children:[(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-500/20 border border-amber-500/30",children:[(0,zt.jsx)(Gm,{size:14,className:"text-amber-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-amber-400",children:"DEMO MODE"})]}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Experience the full platform with simulated data"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("button",{onClick:()=>w(!b),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-mono transition-all ".concat(b?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-slate-500/20 text-slate-400 border border-slate-500/30"),children:[b?(0,zt.jsx)(Ym,{size:14}):(0,zt.jsx)(Gm,{size:14}),b?"Live":"Paused"]}),(0,zt.jsxs)("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold text-sm hover:shadow-lg hover:shadow-teal-500/25 transition-all",children:[(0,zt.jsx)($m,{size:14}),"Sign Up Free"]}),(0,zt.jsx)("button",{onClick:h,className:"p-2 text-slate-400 hover:text-white transition-colors",children:(0,zt.jsx)(Qm,{size:20})})]})]}),(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-4 pb-3",children:(0,zt.jsx)("div",{className:"flex gap-2",children:S.map(e=>(0,zt.jsxs)("button",{onClick:()=>y(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat(v===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"text-slate-500 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))})})]}),(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,zt.jsxs)(an,{mode:"wait",children:["portfolio"===v&&f.portfolio&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zt.jsxs)(vx,{accent:"teal",className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Sm,{className:"text-teal-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Total Value"})]}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:N(f.portfolio.total_value)}),(0,zt.jsxs)("p",{className:"text-sm text-emerald-400 mt-1",children:[j((f.portfolio.total_value-1e5)/1e5*100)," all time"]})]}),(0,zt.jsxs)(vx,{accent:"blue",className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Mm,{className:"text-blue-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Cash Available"})]}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:N(f.portfolio.cash_balance)}),(0,zt.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Ready to trade"})]}),(0,zt.jsxs)(vx,{accent:"purple",className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Tm,{className:"text-purple-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Positions"})]}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:(null===(t=f.portfolio.positions)||void 0===t?void 0:t.length)||0}),(0,zt.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Active holdings"})]})]}),(0,zt.jsx)(vx,{title:"Holdings",icon:"\ud83d\udcca",accent:"teal",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(n=f.portfolio.positions)||void 0===n?void 0:n.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-teal-500/20 to-transparent flex items-center justify-center",children:(0,zt.jsx)("span",{className:"font-bold text-teal-400",children:e.symbol})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-semibold text-white",children:e.symbol}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.quantity," units @ ",N(e.avg_price)]})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"font-semibold text-white",children:N(e.value)}),(0,zt.jsxs)("p",{className:"text-sm ".concat(e.pnl>=0?"text-emerald-400":"text-red-400"),children:[N(e.pnl)," (",j(e.pnl_percent),")"]})]})]},t))})})]},"portfolio"),"bot"===v&&f.bot&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Bot Status",icon:"\ud83e\udd16",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Status"}),(0,zt.jsxs)("span",{className:"flex items-center gap-2 text-emerald-400",children:[(0,zt.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),null===(a=f.bot.status)||void 0===a?void 0:a.toUpperCase()]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Strategy"}),(0,zt.jsx)("span",{className:"text-white capitalize",children:f.bot.strategy})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Capital Allocated"}),(0,zt.jsx)("span",{className:"text-white",children:N(f.bot.capital_allocated)})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Win Rate"}),(0,zt.jsxs)("span",{className:"text-teal-400",children:[f.bot.win_rate,"%"]})]})]})}),(0,zt.jsx)(vx,{title:"Performance",icon:"\ud83d\udcc8",accent:"blue",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Today's Trades"}),(0,zt.jsx)("span",{className:"text-white",children:f.bot.trades_today})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Today's P&L"}),(0,zt.jsx)("span",{className:f.bot.pnl_today>=0?"text-emerald-400":"text-red-400",children:N(f.bot.pnl_today)})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Total P&L"}),(0,zt.jsx)("span",{className:f.bot.pnl_total>=0?"text-emerald-400":"text-red-400",children:N(f.bot.pnl_total)})]})]})})]}),(0,zt.jsx)(vx,{title:"Bot Positions",icon:"\ud83d\udcca",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(r=f.bot.active_positions)||void 0===r?void 0:r.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-mono ".concat("LONG"===e.side?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:e.side}),(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-slate-500 text-sm",children:["Size: ",e.size]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-slate-400 text-sm",children:["Entry: ",N(e.entry)]}),(0,zt.jsx)("p",{className:e.current_pnl>=0?"text-emerald-400":"text-red-400",children:N(e.current_pnl)})]})]},t))})})]},"bot"),"predictions"===v&&f.prediction&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,zt.jsxs)(vx,{title:"BTC Price Prediction (24h)",icon:"\ud83e\udde0",accent:"purple",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Direction"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat(null!==(s=f.prediction.direction)&&void 0!==s&&s.includes("bullish")?"text-emerald-400":null!==(i=f.prediction.direction)&&void 0!==i&&i.includes("bearish")?"text-red-400":"text-slate-400"),children:f.prediction.direction})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Confidence"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-teal-400",children:[(100*f.prediction.confidence).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"24h Target"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:N(f.prediction.target_24h)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Volatility"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-amber-400 capitalize",children:f.prediction.volatility})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Support Level"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:N(f.prediction.support)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Resistance Level"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-red-400",children:N(f.prediction.resistance)})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center gap-3",children:[(0,zt.jsx)(Rm,{className:"text-amber-400",size:24}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-semibold text-amber-400",children:"Demo Prediction"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:"Sign up to access real ML models trained on live market data"})]}),(0,zt.jsx)("button",{onClick:p,className:"ml-auto px-4 py-2 rounded-lg bg-amber-500/20 text-amber-400 text-sm font-semibold hover:bg-amber-500/30 transition-colors",children:"Unlock Full Access"})]})]},"predictions"),"sentiment"===v&&f.sentiment&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,zt.jsxs)(vx,{title:"Social Sentiment Analysis",icon:"\ud83d\udcac",accent:"blue",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Overall"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat("bullish"===f.sentiment.overall?"text-emerald-400":"bearish"===f.sentiment.overall?"text-red-400":"text-slate-400"),children:f.sentiment.overall})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Score"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-teal-400",children:[(100*f.sentiment.score).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Total Mentions"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:null===(l=f.sentiment.total_mentions)||void 0===l?void 0:l.toLocaleString()})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Fear & Greed"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-amber-400",children:f.sentiment.fear_greed_index})]})]}),(0,zt.jsxs)("div",{className:"mb-4",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:"Trending"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(c=f.sentiment.trending_hashtags)||void 0===c?void 0:c.map((e,t)=>(0,zt.jsx)("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-sm",children:e},t))})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Whale Activity"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-purple-400 capitalize",children:f.sentiment.whale_activity})]})]})},"sentiment"),"competition"===v&&f.competition&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,zt.jsxs)(vx,{title:f.competition.name,icon:"\ud83c\udfc6",accent:"amber",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Your Rank"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-amber-400",children:["#",f.competition.user_rank]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Your P&L"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-emerald-400",children:["+",null===(u=f.competition.user_pnl)||void 0===u?void 0:u.toFixed(2),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Prize Pool"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:N(f.competition.prize_pool)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Time Left"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-teal-400",children:f.competition.time_remaining})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Leaderboard"}),null===(d=f.competition.leaderboard)||void 0===d?void 0:d.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(0===t?"bg-amber-500/10 border border-amber-500/20":"bg-white/5"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold ".concat(0===t?"bg-amber-500 text-black":1===t?"bg-slate-400 text-black":2===t?"bg-amber-700 text-white":"bg-slate-700 text-white"),children:e.rank}),(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.name})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-bold text-emerald-400",children:["+",e.pnl_percent,"%"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.trades," trades"]})]})]},t))]})]})},"competition")]})}),(0,zt.jsx)("div",{className:"sticky bottom-0 bg-gradient-to-t from-black via-black/90 to-transparent py-6",children:(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-teal-500/10 via-cyan-500/10 to-purple-500/10 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-semibold text-white",children:"Ready to trade for real?"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:"Sign up now and get $100 bonus on your first $500 deposit"})]}),(0,zt.jsxs)("button",{onClick:p,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold hover:shadow-lg hover:shadow-teal-500/25 transition-all flex items-center gap-2",children:["Start Trading",(0,zt.jsx)(Jm,{size:18})]})]})})})]})},wx=Nm("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),kx=Nm("fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),Nx=Nm("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),jx=e=>{let{onGetStarted:t}=e;const n=[{icon:Wm,label:"Real-time Prices"},{icon:wx,label:"Push Alerts"},{icon:kx,label:"Biometric Login"},{icon:Nx,label:"PWA Support"}];return(0,zt.jsxs)("section",{className:"relative py-20 overflow-hidden","data-testid":"device-showcase",children:[(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#050505] via-[#0a1628] to-[#050505]",children:(0,zt.jsx)("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"radial-gradient(circle at 30% 50%, rgba(20, 184, 166, 0.1) 0%, transparent 50%),\n                            radial-gradient(circle at 70% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%)"}})}),(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-6 relative",children:(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[(0,zt.jsx)(uu.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"relative",children:(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-teal-500/20 to-purple-500/20 blur-3xl"}),(0,zt.jsx)(uu.img,{src:"https://customer-assets.emergentagent.com/job_tradehub-380/artifacts/0biltc25_%243299.20.png",alt:"OracleIQTrader on Tablet, Phone, and VR",className:"relative w-full max-w-xl mx-auto drop-shadow-2xl",initial:{y:20},animate:{y:[20,-10,20]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}})]})}),(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8,delay:.2},children:[(0,zt.jsx)("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:(0,zt.jsx)("span",{className:"bg-gradient-to-r from-teal-400 to-purple-400 bg-clip-text text-transparent",children:"Trade On The Go"})}),(0,zt.jsx)("p",{className:"text-lg text-slate-400 mb-8",children:"Download our mobile app and access real-time trading, AI predictions, and portfolio analytics from anywhere in the world."}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:n.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},className:"flex items-center gap-3 text-slate-300",children:[(0,zt.jsx)(e.icon,{className:"w-5 h-5 text-teal-400"}),(0,zt.jsx)("span",{children:e.label})]},e.label))}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,zt.jsxs)("button",{className:"flex items-center gap-3 px-6 py-3 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[(0,zt.jsx)("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:(0,zt.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),(0,zt.jsxs)("div",{className:"text-left",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Download on"}),(0,zt.jsx)("div",{className:"text-white font-semibold",children:"App Store"})]})]}),(0,zt.jsxs)("button",{className:"flex items-center gap-3 px-6 py-3 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[(0,zt.jsx)("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:(0,zt.jsx)("path",{d:"M3 20.5v-17c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v17c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5m18-8.5l-12 12v-24l12 12z"})}),(0,zt.jsxs)("div",{className:"text-left",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Get it on"}),(0,zt.jsx)("div",{className:"text-white font-semibold",children:"Google Play"})]})]})]})]})]})})]})},Sx="https://static.prod-images.emergentagent.com/jobs/a0a82ecc-3e60-429c-be59-f5b8a7b8a45e/images/9e4794f327719e73fa1fbd376c7f3d287a8340f4814b1f897ccd5f1707647dac.png",Cx=e=>{let{onGetStarted:t}=e;const[n,a]=(0,o.useState)(!1),[r,s]=(0,o.useState)({x:0,y:0}),{scrollYProgress:i}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{container:t,target:n}=e,a=u(e,um);const r=Ut(dm),s=(0,o.useRef)(null),i=(0,o.useRef)(!1),l=(0,o.useCallback)(()=>(s.current=cm((e,t)=>{let{x:n,y:a}=t;r.scrollX.set(n.current),r.scrollXProgress.set(n.progress),r.scrollY.set(a.current),r.scrollYProgress.set(a.progress)},m(m({},a),{},{container:(null===t||void 0===t?void 0:t.current)||void 0,target:(null===n||void 0===n?void 0:n.current)||void 0})),()=>{var e;null===(e=s.current)||void 0===e||e.call(s)}),[t,n,JSON.stringify(a.offset)]);return Vt(()=>(i.current=!1,hm(t)||hm(n)?void(i.current=!0):l()),[l]),(0,o.useEffect)(()=>i.current?(ea(!hm(t),"Container ref is defined but not hydrated","use-scroll-ref"),ea(!hm(n),"Target ref is defined but not hydrated","use-scroll-ref"),l()):void 0,[l]),r}(),l=fm(i,[0,1],["0%","50%"]);(0,o.useEffect)(()=>{const e=e=>s({x:e.clientX,y:e.clientY});return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]);const c=[{name:"Real Stocks",icon:jm,color:"text-blue-400"},{name:"Crypto",icon:Sm,color:"text-amber-400"},{name:"ETFs",icon:Cm,color:"text-purple-400"},{name:"Options",icon:Em,color:"text-pink-400"},{name:"Futures",icon:Tm,color:"text-cyan-400"},{name:"Forex",icon:Im,color:"text-green-400"},{name:"Event Markets",icon:Am,color:"text-orange-400"},{name:"Supply Chain",icon:_m,color:"text-teal-400"},{name:"Macro Events",icon:Om,color:"text-indigo-400"},{name:"Prediction",icon:Rm,color:"text-rose-400"}],d=[{num:"1",title:"Execution Receipt",desc:"See every detail of every trade instantly: venue, NBBO, fill price, all fees, latency. Export to CSV for tax prep.",icon:Pm,color:"from-teal-500/20"},{num:"2",title:"Cost Tracker",desc:'Monthly "cost of trading" report vs. industry benchmarks. See exactly what you saved this month.',icon:Mm,color:"from-emerald-500/20"},{num:"3",title:"Risk Dashboard",desc:"Visual VaR, portfolio heat, drawdown projections per position. Long-term and trading buckets separate by default.",icon:Dm,color:"from-blue-500/20"},{num:"4",title:"Creator Economy",desc:"Embed your transparent fill receipt in your YouTube or TikTok. Revenue share with creators on referrals.",icon:Fm,color:"from-purple-500/20"},{num:"5",title:"Open API",desc:"REST, WebSocket, Python, JS libraries. Real-time market data. Algorithmic execution. TradingView integration native.",icon:Lm,color:"from-cyan-500/20"},{num:"6",title:"Ethical Monetization",desc:"Public dashboard of our monthly revenue sources. No PFOF. No short-selling your order flow. Full transparency.",icon:zm,color:"from-amber-500/20"},{num:"7",title:"Prediction Markets",desc:"Trade sports outcomes, political events, macro indicators, and supply chain risks. Real probability discovery.",icon:Am,color:"from-rose-500/20"},{num:"8",title:"Mobile Parity",desc:'Everything on desktop is on mobile. Real execution, risk management, and reporting\u2014no "app-ified" dumbing down.',icon:Bm,color:"from-indigo-500/20"}],h=[{title:"Transparent Pricing",desc:"See exactly what you pay: venue fees, spreads, FX costs, platform fee. No hidden markups. We cap execution costs and refund the difference when we beat our own promise.",icon:Mm,color:"text-emerald-400"},{title:"Best Execution Proof",desc:"On every trade, we show you the best quote available across all venues vs. your fill price. Transparent audit trail on every receipt.",icon:Pm,color:"text-blue-400"},{title:"Truly Global",desc:"Real interbank FX rates. Trade US stocks, EU equities, crypto, forex, commodities\u2014all in one account with true multi-currency support.",icon:Im,color:"text-purple-400"},{title:"Real Risk Management",desc:"Visual VaR bands, position-level risk, portfolio heat maps. No dark leverage defaults. Long-term investing and speculation separated by design.",icon:Dm,color:"text-amber-400"},{title:"Ethical Monetization",desc:"No payment for order flow. No proprietary trading against your flow. Public dashboard showing exactly how we make money each month.",icon:zm,color:"text-rose-400"},{title:"Built for Creators",desc:"Native TradingView integration. Public APIs (REST/WebSocket). Python/JS libraries. Embed transparent execution into your content.",icon:Lm,color:"text-cyan-400"}],p=[{text:"FCA Regulated",icon:Dm},{text:"MiFID II Compliant",icon:Um},{text:"Best Execution Guaranteed",icon:Wm},{text:"Zero PFOF",icon:Vm}],f=e=>!0===e?(0,zt.jsx)(Um,{className:"w-5 h-5 text-emerald-400 mx-auto"}):!1===e?(0,zt.jsx)("span",{className:"text-slate-500",children:"\u2717"}):null===e?(0,zt.jsx)("span",{className:"text-slate-500",children:"N/A"}):(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:e});return(0,zt.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white overflow-hidden",children:[(0,zt.jsxs)("div",{className:"fixed inset-0 pointer-events-none",children:[(0,zt.jsx)(uu.div,{className:"absolute w-[800px] h-[800px] rounded-full bg-teal-500/10 blur-[120px]",style:{y:l},animate:{x:[0,100,0],y:[0,50,0]},transition:{duration:20,repeat:1/0,ease:"linear"}}),(0,zt.jsx)(uu.div,{className:"absolute right-0 top-1/4 w-[600px] h-[600px] rounded-full bg-purple-500/10 blur-[100px]",animate:{x:[0,-50,0],y:[0,100,0]},transition:{duration:15,repeat:1/0,ease:"linear"}}),(0,zt.jsx)("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),\n                            linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"50px 50px"}})]}),(0,zt.jsx)(uu.nav,{className:"fixed top-0 left-0 right-0 z-50 backdrop-blur-xl bg-black/40 border-b border-white/5",initial:{y:-100},animate:{y:0},children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(uu.img,{src:Sx,alt:"OracleIQ",className:"w-10 h-10 rounded-xl",animate:{rotateY:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),(0,zt.jsx)("span",{className:"text-xl font-bold tracking-wider",children:"OracleIQTrader"})]}),(0,zt.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,zt.jsx)("a",{href:"#trade-everything",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Assets"}),(0,zt.jsx)("a",{href:"#features",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Features"}),(0,zt.jsx)("a",{href:"#compare",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Compare"}),(0,zt.jsx)("a",{href:"#why",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Why Us"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("button",{onClick:()=>a(!0),className:"px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors",children:"Watch Demo"}),(0,zt.jsx)("button",{onClick:t,className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-teal-500 to-teal-600 text-white font-semibold text-sm hover:shadow-lg hover:shadow-teal-500/25 transition-all","data-testid":"get-started-btn",children:"Start Trading Free"})]})]})}),(0,zt.jsx)("section",{className:"relative min-h-screen flex items-center justify-center pt-20",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-20 text-center",children:[(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-wrap justify-center gap-3 mb-8",children:p.map((e,t)=>(0,zt.jsxs)("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 text-xs text-slate-300",children:[(0,zt.jsx)(e.icon,{size:12,className:"text-teal-400"}),e.text]},t))}),(0,zt.jsxs)(uu.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"text-5xl md:text-7xl lg:text-8xl font-bold mb-6 leading-tight",children:[(0,zt.jsx)("span",{className:"bg-gradient-to-r from-white via-white to-slate-400 bg-clip-text text-transparent",children:"Trading Without"}),(0,zt.jsx)("br",{}),(0,zt.jsx)("span",{className:"bg-gradient-to-r from-teal-400 via-cyan-400 to-emerald-400 bg-clip-text text-transparent",children:"Compromises"})]}),(0,zt.jsx)(uu.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-lg md:text-xl text-slate-400 max-w-3xl mx-auto mb-10",children:"One platform. Zero hidden fees. Glass-box pricing. Trade stocks, crypto, options, futures, forex, prediction markets\u2014all with institutional clarity."}),(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-12",children:[(0,zt.jsxs)("button",{onClick:t,className:"group px-8 py-4 rounded-2xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold text-lg hover:shadow-2xl hover:shadow-teal-500/30 transition-all flex items-center gap-2","data-testid":"start-trading-btn",children:["Start Trading Free",(0,zt.jsx)(Hm,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),(0,zt.jsxs)("button",{onClick:()=>a(!0),className:"group px-8 py-4 rounded-2xl bg-white/5 border border-white/10 text-white font-semibold text-lg hover:bg-white/10 transition-all flex items-center gap-2","data-testid":"try-demo-btn",children:[(0,zt.jsx)(Gm,{className:"w-5 h-5"}),"Watch Demo"]})]}),(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"flex flex-wrap justify-center gap-8 text-center",children:[{value:"50K+",label:"Traders"},{value:"0%",label:"Hidden Fees"},{value:"100%",label:"Transparent"},{value:"24/7",label:"Support"}].map((e,t)=>(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-2xl md:text-3xl font-bold text-white",children:e.value}),(0,zt.jsx)("div",{className:"text-sm text-slate-500",children:e.label})]},t))})]})}),(0,zt.jsx)("section",{id:"trade-everything",className:"relative py-24 border-y border-white/5",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[(0,zt.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Trade Everything"}),(0,zt.jsx)("p",{className:"text-xl text-slate-400",children:"One account. Multiple asset classes. Unified risk engine."})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:c.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.05*t},className:"p-6 rounded-2xl bg-white/5 border border-white/10 hover:border-teal-500/30 hover:bg-white/10 transition-all text-center group cursor-pointer",children:[(0,zt.jsx)(e.icon,{className:"w-8 h-8 ".concat(e.color," mx-auto mb-3 group-hover:scale-110 transition-transform")}),(0,zt.jsx)("span",{className:"text-sm font-medium text-white",children:e.name})]},e.name))})]})}),(0,zt.jsx)(jx,{onGetStarted:t}),(0,zt.jsx)("section",{id:"features",className:"relative py-24",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[(0,zt.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Why You'll Never Leave"}),(0,zt.jsx)("p",{className:"text-xl text-slate-400",children:"Features designed by traders, for traders"})]}),(0,zt.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.05*t},className:"p-6 rounded-2xl bg-gradient-to-br ".concat(e.color," to-transparent border border-white/10 hover:border-white/20 transition-all"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,zt.jsx)("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center text-sm font-bold text-teal-400",children:e.num}),(0,zt.jsx)(e.icon,{className:"w-5 h-5 text-white/70"})]}),(0,zt.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:e.title}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 leading-relaxed",children:e.desc})]},e.title))})]})}),(0,zt.jsx)("section",{id:"compare",className:"relative py-24 border-y border-white/5",children:(0,zt.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[(0,zt.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"How We Stack Up"}),(0,zt.jsx)("p",{className:"text-xl text-slate-400",children:"The truth about pricing transparency and range"})]}),(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/10",children:[(0,zt.jsx)("th",{className:"text-left py-4 px-4 text-slate-400 font-normal",children:"Feature"}),(0,zt.jsx)("th",{className:"py-4 px-4 text-center",children:(0,zt.jsx)("span",{className:"text-teal-400 font-bold",children:"Oracle IQ"})}),(0,zt.jsx)("th",{className:"py-4 px-4 text-center text-slate-400",children:"Pro Brokers"}),(0,zt.jsx)("th",{className:"py-4 px-4 text-center text-slate-400",children:"Free Brokers"}),(0,zt.jsx)("th",{className:"py-4 px-4 text-center text-slate-400",children:"Social Trading"}),(0,zt.jsx)("th",{className:"py-4 px-4 text-center text-slate-400",children:"Crypto Exchanges"})]})}),(0,zt.jsx)("tbody",{children:[{feature:"Fee Transparency",oracleiq:!0,ibkr:!1,t212:!1,etoro:!1,binance:!0},{feature:"Real Interbank FX",oracleiq:!0,ibkr:!0,t212:!1,etoro:!1,binance:null},{feature:"Zero PFOF",oracleiq:!0,ibkr:!0,t212:!1,etoro:!1,binance:null},{feature:"Stocks + Crypto + Derivatives",oracleiq:!0,ibkr:!0,t212:"Stocks only",etoro:"CFDs only",binance:"Crypto only"},{feature:"Prediction Markets",oracleiq:!0,ibkr:!1,t212:!1,etoro:!1,binance:!1},{feature:"Best Execution Audit Trail",oracleiq:!0,ibkr:!1,t212:!1,etoro:!1,binance:!1},{feature:"Native TradingView API",oracleiq:!0,ibkr:!1,t212:!0,etoro:!0,binance:!0},{feature:"Beginner-Friendly UX",oracleiq:!0,ibkr:!1,t212:!0,etoro:!0,binance:!0},{feature:"Public Fee Breakdown",oracleiq:!0,ibkr:!1,t212:!1,etoro:!1,binance:!0}].map((e,t)=>(0,zt.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,zt.jsx)("td",{className:"py-4 px-4 text-white text-sm",children:e.feature}),(0,zt.jsx)("td",{className:"py-4 px-4 text-center bg-teal-500/5",children:f(e.oracleiq)}),(0,zt.jsx)("td",{className:"py-4 px-4 text-center",children:f(e.ibkr)}),(0,zt.jsx)("td",{className:"py-4 px-4 text-center",children:f(e.t212)}),(0,zt.jsx)("td",{className:"py-4 px-4 text-center",children:f(e.etoro)}),(0,zt.jsx)("td",{className:"py-4 px-4 text-center",children:f(e.binance)})]},t))})]})})]})}),(0,zt.jsx)("section",{id:"why",className:"relative py-24",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[(0,zt.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Why Oracle IQ Trader?"}),(0,zt.jsx)("p",{className:"text-xl text-slate-400",children:"Built for every trader. Powerful tools, radical transparency."})]}),(0,zt.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},className:"p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-white/20 transition-all",children:[(0,zt.jsx)(e.icon,{className:"w-10 h-10 ".concat(e.color," mb-4")}),(0,zt.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 leading-relaxed",children:e.desc})]},e.title))})]})}),(0,zt.jsx)("section",{className:"relative py-24 border-t border-white/5",children:(0,zt.jsx)("div",{className:"max-w-4xl mx-auto px-6 text-center",children:(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[(0,zt.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Stop Overpaying for Mediocrity"}),(0,zt.jsx)("p",{className:"text-xl text-slate-400 mb-10 max-w-2xl mx-auto",children:"Professional-grade power. Intuitive simplicity. And radical transparency the industry has never seen."}),(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[(0,zt.jsx)("button",{onClick:t,className:"px-10 py-5 rounded-2xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold text-xl hover:shadow-2xl hover:shadow-teal-500/30 transition-all",children:"Start Trading Now"}),(0,zt.jsx)("button",{className:"px-10 py-5 rounded-2xl bg-white/5 border border-white/10 text-white font-semibold text-lg hover:bg-white/10 transition-all",children:"Read Our Whitepaper"})]})]})})}),(0,zt.jsx)("footer",{className:"relative py-16 border-t border-white/10 bg-black/40",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,zt.jsxs)("div",{className:"grid md:grid-cols-5 gap-8 mb-12",children:[(0,zt.jsxs)("div",{className:"md:col-span-1",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,zt.jsx)("img",{src:Sx,alt:"OracleIQ",className:"w-8 h-8 rounded-lg"}),(0,zt.jsx)("span",{className:"font-bold",children:"OracleIQTrader"})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"The most transparent trading platform in the world."})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-4",children:"Product"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Trading Platform"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Mobile App"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"APIs & Tools"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Education Hub"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-4",children:"Company"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"About Us"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Blog"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Careers"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Press"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-4",children:"Legal"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Terms of Service"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Privacy Policy"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Regulatory"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Risk Disclosure"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-4",children:"Support"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Help Center"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Community"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Contact Us"}),(0,zt.jsx)("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Status"})]})]})]}),(0,zt.jsxs)("div",{className:"pt-8 border-t border-white/10 flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"\xa9 2026 OracleIQTrader. FCA Regulated | MiFID II Compliant | Best Execution Guaranteed"}),(0,zt.jsx)("p",{className:"text-xs text-slate-600 text-center md:text-right max-w-md",children:"Past performance is not indicative of future results. Trading leveraged instruments carries high risk."})]})]})}),n&&(0,zt.jsx)(bx,{onClose:()=>a(!1)})]})},Ex=["children","variant","size","icon","className","disabled"],Tx=e=>{let{children:t,variant:n="teal",size:a="default",icon:r,className:s,disabled:i}=e,o=u(e,Ex);return(0,zt.jsxs)(uu.button,m(m({className:gx("relative inline-flex items-center justify-center gap-2","rounded-lg border font-mono font-medium","transition-all duration-300","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none",{teal:"bg-teal-500/10 text-teal-400 border-teal-500/50 hover:bg-teal-500/20 hover:shadow-[0_0_25px_rgba(20,184,166,0.4)]",rose:"bg-rose-500/10 text-rose-400 border-rose-500/50 hover:bg-rose-500/20 hover:shadow-[0_0_25px_rgba(244,63,94,0.4)]",indigo:"bg-indigo-500/10 text-indigo-400 border-indigo-500/50 hover:bg-indigo-500/20 hover:shadow-[0_0_25px_rgba(99,102,241,0.4)]",white:"bg-white/5 text-white border-white/20 hover:bg-white/10 hover:shadow-[0_0_25px_rgba(255,255,255,0.2)]",ghost:"bg-transparent text-slate-400 border-transparent hover:text-white hover:bg-white/5"}[n],{sm:"px-3 py-1.5 text-xs",default:"px-5 py-2.5 text-sm",lg:"px-7 py-3 text-base"}[a],s),whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},disabled:i},o),{},{children:[r&&(0,zt.jsx)("span",{className:"text-lg",children:r}),t]}))},Ix=Nm("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Ax=()=>{const{loginWithGoogle:e,isLoading:t}=Lh(),n=[{icon:Rm,title:"AI-Powered Analysis",desc:"Multi-agent consensus system"},{icon:jm,title:"Real-Time Markets",desc:"Live crypto & stock prices"},{icon:Dm,title:"Secure Trading",desc:"Enterprise-grade security"}];return(0,zt.jsxs)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center relative overflow-hidden",children:[(0,zt.jsx)(If,{}),(0,zt.jsxs)(uu.div,{className:"relative z-10 w-full max-w-md mx-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,zt.jsxs)("div",{className:"text-center mb-8",children:[(0,zt.jsx)(uu.div,{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/30 mb-4",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20},children:(0,zt.jsx)(Wm,{className:"text-teal-400",size:36})}),(0,zt.jsx)("h1",{className:"font-heading text-3xl font-bold uppercase tracking-wider text-white mb-2",children:"OracleIQTrader"}),(0,zt.jsx)("p",{className:"text-slate-500 font-mono text-sm",children:"AI-Powered Trading Platform"})]}),(0,zt.jsxs)("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-8",children:[(0,zt.jsx)("h2",{className:"text-xl font-heading font-semibold text-white mb-6 text-center",children:"Sign in to continue"}),(0,zt.jsxs)(Tx,{onClick:e,variant:"white",className:"w-full py-4 text-base",disabled:t,"data-testid":"google-login-btn",children:[(0,zt.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,zt.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,zt.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,zt.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,zt.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 my-6",children:[(0,zt.jsx)("div",{className:"flex-1 h-px bg-white/10"}),(0,zt.jsx)("span",{className:"text-slate-600 text-xs font-mono",children:"OR"}),(0,zt.jsx)("div",{className:"flex-1 h-px bg-white/10"})]}),(0,zt.jsxs)(Tx,{onClick:()=>window.location.href="/",variant:"ghost",className:"w-full","data-testid":"guest-continue-btn",children:[(0,zt.jsx)(Ix,{size:16}),"Continue as Guest"]}),(0,zt.jsx)("div",{className:"mt-8 pt-6 border-t border-white/5",children:(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-4",children:n.map((e,t)=>(0,zt.jsxs)(uu.div,{className:"text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},children:[(0,zt.jsx)(e.icon,{size:20,className:"text-teal-400 mx-auto mb-2"}),(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:e.title})]},e.title))})})]}),(0,zt.jsx)("p",{className:"text-center text-slate-600 text-xs font-mono mt-6",children:"Powered by OracleIQ AI \u2022 Enterprise Grade Security"})]})]})},_x=()=>{const e=Ie(),t=Ce(),{handleAuthCallback:n}=Lh(),a=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(a.current)return;a.current=!0;(async()=>{const a=t.hash,r=new URLSearchParams(a.replace("#","")).get("session_id");if(!r)return console.error("No session_id found in URL"),void e("/login",{replace:!0});try{const t=await n(r);e("/",{replace:!0,state:{user:t}})}catch(s){console.error("Auth callback error:",s),e("/login",{replace:!0})}})()},[t.hash,n,e]),(0,zt.jsx)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-teal-500 border-t-transparent mx-auto mb-4"}),(0,zt.jsx)("p",{className:"text-slate-400 font-mono",children:"Authenticating..."})]})})},Ox=e=>{let{children:t,variant:n="default",pulse:a=!1,icon:r,className:s}=e;return(0,zt.jsxs)("span",{className:gx("inline-flex items-center gap-2 rounded-full border px-3 py-1.5","text-xs font-medium font-mono uppercase tracking-wider","backdrop-blur-sm transition-all duration-300",{default:"border-white/10 bg-white/5 text-slate-300",active:"border-teal-500/50 bg-teal-500/10 text-teal-400",warning:"border-amber-500/50 bg-amber-500/10 text-amber-400",danger:"border-rose-500/50 bg-rose-500/10 text-rose-400",success:"border-emerald-500/50 bg-emerald-500/10 text-emerald-400",info:"border-indigo-500/50 bg-indigo-500/10 text-indigo-400"}[n],a&&"animate-pulse",s),children:[r&&(0,zt.jsx)("span",{className:"text-sm",children:r}),a&&"active"===n&&(0,zt.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,zt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"}),(0,zt.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-teal-500"})]}),t]})},Rx=Nm("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Px=Nm("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Mx=Nm("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Dx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,a]=(0,o.useState)(null),[r,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(null),d=(0,o.useRef)(0),{onMessage:h,onConnect:p,onDisconnect:f,reconnect:m=!0,maxReconnectAttempts:g=5,reconnectInterval:x=3e3}=t,v=(0,o.useCallback)(()=>{var t;if((null===(t=c.current)||void 0===t?void 0:t.readyState)!==WebSocket.OPEN)try{const t=e.replace("https://","wss://").replace("http://","ws://");c.current=new WebSocket(t),c.current.onopen=()=>{s(!0),l(null),d.current=0,null===p||void 0===p||p()},c.current.onmessage=e=>{try{const t=JSON.parse(e.data);a(t),null===h||void 0===h||h(t)}catch(jEe){console.error("WebSocket message parse error:",jEe)}},c.current.onerror=e=>{l("WebSocket connection error"),console.error("WebSocket error:",e)},c.current.onclose=()=>{s(!1),null===f||void 0===f||f(),m&&d.current<g&&(d.current+=1,u.current=setTimeout(()=>{v()},x))}}catch(n){l(n.message)}},[e,p,f,h,m,g,x]),y=(0,o.useCallback)(()=>{u.current&&clearTimeout(u.current),c.current&&c.current.close()},[]),b=(0,o.useCallback)(e=>{var t;(null===(t=c.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&c.current.send("string"===typeof e?e:JSON.stringify(e))},[]);return(0,o.useEffect)(()=>(v(),()=>{y()}),[v,y]),{data:n,isConnected:r,error:i,sendMessage:b,connect:v,disconnect:y}};var Fx;const Lx="".concat("https://tradehub-380.preview.emergentagent.com","/api"),zx=(null===(Fx="https://tradehub-380.preview.emergentagent.com")?void 0:Fx.replace("https://","wss://").replace("http://","ws://"))+"/ws/prices",Bx=e=>{let{onClose:t,symbols:n=["BTC","ETH","SPY"]}=e;const[a,r]=(0,o.useState)({}),[s,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!0),{data:u,isConnected:d,error:h}=Dx(zx,{onMessage:e=>{if("price_update"===e.type&&e.data){const t={};e.data.forEach(e=>{t[e.symbol]=e}),r(e=>m(m({},e),t)),i(!1)}},onConnect:()=>{console.log("WebSocket connected for live prices")},reconnect:!0,maxReconnectAttempts:3});(0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(Lx,"/market/prices")),t={};e.data.forEach(e=>{t[e.symbol]=e}),r(e=>m(m({},e),t)),i(!1)}catch(e){console.error("Error fetching markets:",e)}};if(e(),!d){const t=setInterval(e,5e3);return()=>clearInterval(t)}},[d]);const p=(0,o.useMemo)(()=>n.map(e=>a[e]).filter(Boolean),[a,n]);return(0,zt.jsx)(uu.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"relative","data-testid":"live-markets-realtime",children:(0,zt.jsxs)(vx,{className:"min-w-[320px]",accent:"white",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold text-white/90 uppercase tracking-wider",children:"Live Markets"}),(0,zt.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-mono ".concat(d?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"),children:[d?(0,zt.jsx)(Rx,{size:10}):(0,zt.jsx)(Px,{size:10}),d?"LIVE":"REST"]})]}),t&&(0,zt.jsx)("button",{onClick:t,className:"text-slate-500 hover:text-white transition-colors","data-testid":"close-markets-btn",children:(0,zt.jsx)(Qm,{size:18})})]}),(0,zt.jsx)("div",{className:"flex gap-6",children:s?(0,zt.jsx)("div",{className:"flex gap-6",children:n.map((e,t)=>(0,zt.jsxs)("div",{className:"animate-pulse",children:[(0,zt.jsx)("div",{className:"h-4 w-12 bg-white/10 rounded mb-2"}),(0,zt.jsx)("div",{className:"h-6 w-20 bg-white/10 rounded"})]},t))}):p.map(e=>{var t,n,a;return(0,zt.jsxs)(uu.div,{className:"text-center","data-testid":"market-".concat(e.symbol.toLowerCase()),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,zt.jsx)("p",{className:"text-sm font-mono text-slate-400 mb-1",children:e.symbol}),(0,zt.jsx)("p",{className:"text-lg font-mono font-semibold text-white tabular-nums",children:(n=e.price,a=e.symbol,n?"$".concat("BTC"===a||"ETH"===a||"SOL"===a?n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):"$0")}),(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs font-mono ".concat(e.change_percent>=0?"text-emerald-400":"text-rose-400"),children:[e.change_percent>=0?(0,zt.jsx)(jm,{size:12}):(0,zt.jsx)(Mx,{size:12}),(0,zt.jsxs)("span",{children:[e.change_percent>=0?"+":"",null===(t=e.change_percent)||void 0===t?void 0:t.toFixed(2),"%"]})]}),"coingecko"===e.source&&(0,zt.jsx)("span",{className:"text-[10px] text-teal-500/60 font-mono",children:"CG"})]},e.symbol)})})]})})},Ux=Nm("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Wx=Nm("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Vx="".concat("https://tradehub-380.preview.emergentagent.com","/api"),Hx=e=>{let{onCommand:t}=e;const[n,a]=(0,o.useState)(!1),[r,s]=(0,o.useState)(""),[i,l]=(0,o.useState)(0),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)([]);(0,o.useEffect)(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onresult=e=>{const t=e.results.length-1,n=e.results[t],a=n[0].transcript,r=n[0].confidence;s(a),l(r),n.isFinal&&p(a,r)},e.onerror=e=>{console.error("Speech recognition error:",e.error),a(!1)},e.onend=()=>{n&&e.start()},u(e)}},[]);const p=async(e,n)=>{const a={id:Date.now(),text:e,confidence:n,timestamp:new Date};h(e=>[...e,a]),setTimeout(()=>{h(e=>e.filter(e=>e.id!==a.id))},5e3);try{const a=await Mh.post("".concat(Vx,"/voice/parse"),{transcript:e,confidence:n});t&&t(a.data)}catch(r){console.error("Error parsing voice command:",r)}};(0,o.useCallback)(()=>{c?n?(c.stop(),a(!1)):(c.start(),a(!0)):console.error("Speech recognition not supported")},[c,n]);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"voice-panel",children:[(0,zt.jsxs)(uu.button,{onClick:()=>{const e=["Buy 1000 shares AAPL at market","Sell 500 shares NVDA limit 150","Buy 2 BTC at market price","Show me ETH analysis","Execute buy order for Tesla"],t=e[Math.floor(Math.random()*e.length)],n=.85+.12*Math.random();p(t,n),s(t),l(n)},className:"flex items-center gap-3 px-5 py-3 rounded-xl border backdrop-blur-xl transition-all ".concat(n?"bg-teal-500/20 border-teal-500/50 text-teal-400 shadow-[0_0_30px_rgba(20,184,166,0.3)]":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:border-white/20"),whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":"voice-toggle-btn",children:[n?(0,zt.jsx)(Ux,{className:"animate-pulse",size:20}):(0,zt.jsx)(Wx,{size:20}),(0,zt.jsx)("span",{className:"font-mono text-sm",children:n?"Voice Active":"Start Listening"}),n&&(0,zt.jsxs)("span",{className:"relative flex h-2 w-2 ml-2",children:[(0,zt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"}),(0,zt.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-teal-500"})]})]}),(0,zt.jsx)(an,{children:d.map(e=>(0,zt.jsx)(uu.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{type:"spring",stiffness:300,damping:25},"data-testid":"voice-command-ephemeral",children:(0,zt.jsx)(vx,{className:"glass-teal",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Execute:"}),(0,zt.jsx)("p",{className:"text-xl font-heading font-semibold text-white",children:e.text}),(0,zt.jsxs)("p",{className:"text-sm font-mono text-teal-400",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]})})},e.id))})]})},Gx=Nm("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),qx=Nm("camera-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]),Kx=Nm("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Xx=Nm("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);class Yx{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class $x{refCount(e){return Qx("refCount")}incRef(e){return Qx("incRef")}timerAvailable(){return!0}time(e){return Qx("time")}read(e){return Qx("read")}readSync(e){return Qx("readSync")}readToGPU(e,t){return Qx("readToGPU")}numDataIds(){return Qx("numDataIds")}disposeData(e,t){return Qx("disposeData")}write(e,t,n){return Qx("write")}move(e,t,n,a,r){return Qx("move")}createTensorFromGPUData(e,t,n){return Qx("createTensorFromGPUData")}memory(){return Qx("memory")}floatPrecision(){return Qx("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Qx("dispose")}}function Qx(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Jx(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,tv(e,t,n)}function Zx(e,t,n){return Math.max(e,Math.min(t,n))}function ev(e){return e%2===0?e:e+1}function tv(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function nv(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function av(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";nv(iv(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function rv(e){nv(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function sv(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function iv(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ov(e){return e%1===0}function lv(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function cv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function uv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return new Promise((r,s)=>{let i=0;const o=()=>{if(e())return void r();i++;const l=t(i);null!=n&&i>=n?s():null!=a?a(o,l):setTimeout(o,l)};o()})}function dv(e,t){let n=1,a=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(-1===e[s]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(a," and dim ").concat(s));a=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found ".concat(e[s]," at dim ").concat(s));if(-1===a){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const r=e.slice();return r[a]=t/n,r}function hv(e,t){const n=t.length;return e=null==e?t.map((e,t)=>t):[].concat(e),nv(e.every(e=>e>=-n&&e<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)),nv(e.every(e=>ov(e)),()=>"All values in axis param must be integers but "+"got axis ".concat(e)),e.map(e=>e<0?n+e:e)}function pv(e,t){const n=[],a=[],r=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||r?null:hv(t,e).sort();let i=0;for(let o=0;o<e.length;++o){if(null!=s){if(s[i]===o&&1!==e[o])throw new Error("Can't squeeze axis ".concat(o," since its dim '").concat(e[o],"' is not 1"));(null==s[i]||s[i]>o)&&1===e[o]&&(n.push(e[o]),a.push(o)),s[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),a.push(o))}return{newShape:n,keptDims:a}}function fv(e,t){return mv(e,t)}function mv(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function gv(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function xv(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function vv(e){return"string"===typeof e||e instanceof String}function yv(e){return"number"===typeof e}function bv(e){return Array.isArray(e)?bv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":yv(e)?"float32":vv(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function wv(e){return!!(e&&e.constructor&&e.call&&e.apply)}function kv(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Nv(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function jv(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Array;if(1===t.length){const s=t[0]*(a?2:1);for(let t=0;t<s;t++)r[t]=n[e+t]}else{const s=t[0],i=t.slice(1),o=i.reduce((e,t)=>e*t)*(a?2:1);for(let t=0;t<s;t++)r[t]=jv(e+t*o,i,n,a)}return r}function Sv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const a=e.reduce((e,t)=>e*t)*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return jv(0,e,t,n)}function Cv(e,t){const n=Ev(e,t);for(let a=0;a<n.length;a++)n[a]=1;return n}function Ev(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Tv(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return Sv(e,new Float32Array(n));if("int32"===t)return Sv(e,new Int32Array(n));if("bool"===t)return Sv(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Iv(e){e.forEach(t=>{nv(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"]."))})}function Av(e,t,n){if(0===t)return 0;if(1===t)return e[0];let a=e[e.length-1];for(let r=0;r<e.length-1;++r)a+=n[r]*e[r];return a}function _v(e,t,n){if(0===t)return[];if(1===t)return[e];const a=new Array(t);for(let r=0;r<a.length-1;++r)a[r]=Math.floor(e/n[r]),e-=a[r]*n[r];return a[a.length-1]=e,a}function Ov(e){return e&&e.then&&"function"===typeof e.then}const Rv="tfjsflags";class Pv{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Mv,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Ov(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(Rv in e){e[Rv].split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)})}}}function Mv(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,a[0],a[1]),a.join("=")}),t}function Dv(){return Lv}let Fv,Lv=null;function zv(){if(null==Fv){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Fv=e}return Fv}function Bv(e,t){const n=function(){const e=zv();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const a=t();return n.set(e,a),n.get(e)}}const Uv="Abs",Wv="Acos",Vv="Acosh",Hv="Add",Gv="AddN",qv="All",Kv="Any",Xv="ArgMax",Yv="ArgMin",$v="Asin",Qv="Asinh",Jv="Atan",Zv="Atanh",ey="Atan2",ty="AvgPool",ny="AvgPoolGrad",ay="AvgPool3D",ry="AvgPool3DGrad",sy="BatchMatMul",iy="BatchToSpaceND",oy="Bincount",ly="BitwiseAnd",cy="BroadcastArgs",uy="Cast",dy="Ceil",hy="ClipByValue",py="Complex",fy="ComplexAbs",my="Concat",gy="Conv2D",xy="Conv2DBackpropFilter",vy="Conv2DBackpropInput",yy="Conv3D",by="Conv3DBackpropFilterV2",wy="Conv3DBackpropInputV2",ky="Cos",Ny="Cosh",jy="Cumprod",Sy="Cumsum",Cy="CropAndResize",Ey="DenseBincount",Ty="DepthToSpace",Iy="DepthwiseConv2dNative",Ay="DepthwiseConv2dNativeBackpropFilter",_y="DepthwiseConv2dNativeBackpropInput",Oy="Diag",Ry="Dilation2D",Py="Dilation2DBackpropInput",My="Dilation2DBackpropFilter",Dy="Draw",Fy="RealDiv",Ly="Einsum",zy="Elu",By="EluGrad",Uy="Erf",Wy="Equal",Vy="Exp",Hy="ExpandDims",Gy="Expm1",qy="FFT",Ky="Fill",Xy="FlipLeftRight",Yy="Floor",$y="FloorDiv",Qy="FusedBatchNorm",Jy="GatherV2",Zy="GatherNd",eb="Greater",tb="GreaterEqual",nb="Identity",ab="IFFT",rb="Imag",sb="IsFinite",ib="IsInf",ob="IsNan",lb="LeakyRelu",cb="Less",ub="LessEqual",db="LinSpace",hb="Log",pb="Log1p",fb="LogicalAnd",mb="LogicalNot",gb="LogicalOr",xb="LRN",vb="LRNGrad",yb="Max",bb="Maximum",wb="MaxPool",kb="MaxPoolGrad",Nb="MaxPool3D",jb="MaxPool3DGrad",Sb="MaxPoolWithArgmax",Cb="Mean",Eb="Min",Tb="Minimum",Ib="MirrorPad",Ab="Mod",_b="Multinomial",Ob="Multiply",Rb="Neg",Pb="NotEqual",Mb="NonMaxSuppressionV3",Db="NonMaxSuppressionV4",Fb="NonMaxSuppressionV5",Lb="OnesLike",zb="OneHot",Bb="Pack",Ub="PadV2",Wb="Pow",Vb="Prelu",Hb="Prod",Gb="RaggedGather",qb="RaggedRange",Kb="RaggedTensorToTensor",Xb="Range",Yb="Real",$b="Reciprocal",Qb="Relu",Jb="Reshape",Zb="ResizeNearestNeighbor",ew="ResizeNearestNeighborGrad",tw="ResizeBilinear",nw="ResizeBilinearGrad",aw="Relu6",rw="Reverse",sw="Round",iw="Rsqrt",ow="ScatterNd",lw="TensorScatterUpdate",cw="SearchSorted",uw="Select",dw="Selu",hw="Slice",pw="Sin",fw="Sinh",mw="Sign",gw="Sigmoid",xw="Softplus",vw="Sqrt",yw="Sum",bw="SpaceToBatchND",ww="SplitV",kw="Softmax",Nw="SparseFillEmptyRows",jw="SparseReshape",Sw="SparseSegmentMean",Cw="SparseSegmentSum",Ew="SparseToDense",Tw="SquaredDifference",Iw="Square",Aw="StaticRegexReplace",_w="StridedSlice",Ow="StringNGrams",Rw="StringSplit",Pw="StringToHashBucketFast",Mw="Sub",Dw="Tan",Fw="Tanh",Lw="Tile",zw="TopK",Bw="Transform",Uw="Transpose",Ww="Unique",Vw="Unpack",Hw="UnsortedSegmentSum",Gw="ZerosLike",qw="Step",Kw="FromPixels",Xw="RotateWithOffset",Yw="_FusedMatMul",$w="FusedConv2D",Qw="FusedDepthwiseConv2D";function Jw(){Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.warn(...arguments)}function Zw(){Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.log(...arguments)}const ek=Bv("kernelRegistry",()=>new Map),tk=Bv("gradRegistry",()=>new Map);function nk(e,t){const n=ok(e,t);return ek.get(n)}function ak(e){return tk.get(e)}function rk(e){const t=ek.entries(),n=[];for(;;){const{done:a,value:r}=t.next();if(a)break;const[s,i]=r,[o]=s.split("_");o===e&&n.push(i)}return n}function sk(e){const{kernelName:t,backendName:n}=e,a=ok(t,n);ek.has(a)&&Jw("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),ek.set(a,e)}function ik(e){const{kernelName:t}=e;tk.has(t)&&Dv().getBool("DEBUG")&&Jw("Overriding the gradient for '".concat(t,"'")),tk.set(t,e)}function ok(e,t){return"".concat(t,"_").concat(e)}function lk(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var ck=n(7353);const uk=n.n(ck)()||ck;function dk(e){return uk.fromString(e,!0,16)}const hk=dk("c3a5c85c97cb3127"),pk=dk("b492b66fbe98f273"),fk=dk("9ae16a3b2f90404f");function mk(e){return e.xor(e.shru(47))}function gk(e,t,n){const a=e.slice(t,t+n);return uk.fromBytes(Array.from(a),!0,!0)}function xk(e,t){return gk(e,t,8)}function vk(e,t){return gk(e,t,4)}function yk(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function bk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dk("9ddfea08eb382d69"),a=e.xor(t).mul(n);a=a.xor(a.shru(47));let r=t.xor(a).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function wk(e,t,n,a){return function(e,t,n,a,r,s){r=r.add(e),s=yk(s.add(r).add(a),21);const i=r;return r=(r=r.add(t)).add(n),s=s.add(yk(r,44)),[r.add(a),s.add(i)]}(xk(e,t),xk(e,t+8),xk(e,t+16),xk(e,t+24),n,a)}function kk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=uk.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=fk.add(2*t),a=xk(e,0).add(fk),r=xk(e,t-8);return bk(yk(r,37).mul(n).add(a),yk(a,25).add(r).mul(n),n)}if(t>=4){const n=fk.add(2*t);return bk(vk(e,0).shl(3).add(t),vk(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),a=t+(e[t-1]<<2);return mk(fk.mul(n).xor(hk.mul(a))).mul(fk)}return fk}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=fk.add(2*t),a=xk(e,0).mul(pk),r=xk(e,8),s=xk(e,t-8).mul(n),i=xk(e,t-16).mul(fk);return bk(yk(a.add(r),43).add(yk(s,30)).add(i),a.add(yk(r.add(fk),18)).add(s),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=fk.add(2*t),a=xk(e,0).mul(fk),r=xk(e,8),s=xk(e,t-8).mul(n),i=xk(e,t-16).mul(fk),o=yk(a.add(r),43).add(yk(s,30)).add(i),l=bk(o,a.add(yk(r.add(fk),18)).add(s),n),c=xk(e,16).mul(n),u=xk(e,24),d=o.add(xk(e,t-32)).mul(n),h=l.add(xk(e,t-24)).mul(n);return bk(yk(c.add(u),43).add(yk(d,30)).add(h),c.add(yk(u.add(a),18)).add(d),n)}(e,t);let a=n,r=n.mul(pk).add(113),s=mk(r.mul(fk).add(113)).mul(fk),i=[uk.UZERO,uk.UZERO],o=[uk.UZERO,uk.UZERO];a=a.mul(fk).add(xk(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{a=yk(a.add(r).add(i[0]).add(xk(e,l+8)),37).mul(pk),r=yk(r.add(i[1]).add(xk(e,l+48)),42).mul(pk),a=a.xor(o[1]),r=r.add(i[0]).add(xk(e,l+40)),s=yk(s.add(o[0]),33).mul(pk),i=wk(e,l,i[1].mul(pk),a.add(o[0])),o=wk(e,l+32,s.add(o[1]),r.add(xk(e,l+16))),[s,a]=[a,s],l+=64}while(l!==c);const d=pk.add(s.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),a=yk(a.add(r).add(i[0]).add(xk(e,l+8)),37).mul(d),r=yk(r.add(i[1]).add(xk(e,l+48)),42).mul(d),a=a.xor(o[1].mul(9)),r=r.add(i[0].mul(9).add(xk(e,l+40))),s=yk(s.add(o[0]),33).mul(d),i=wk(e,l,i[1].mul(d),a.add(o[0])),o=wk(e,l+32,s.add(o[1]),r.add(xk(e,l+16))),[s,a]=[a,s],bk(bk(i[0],o[0],d).add(mk(r).mul(hk)).add(s),bk(i[1],o[1],d).add(a),d)}function Nk(e,t){return"string"===t?Ck(e):jk([e],t)}function jk(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ik(e)),Dv().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(a,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function Sk(){return Dv().platform.now()}function Ck(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Dv().platform.encode(e,t)}function Ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Dv().platform.decode(e,t)}function Tk(e){return null!=Dv().platform.isTypedArray?Dv().platform.isTypedArray(e):lk(e)}function Ik(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||Ov(e)||null==e||Tk(e)&&n)t.push(e);else if(Array.isArray(e)||Tk(e))for(let a=0;a<e.length;++a)Ik(e[a],t,n);else{let a=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(a=Math.max(a,Number(t)));for(let r=0;r<=a;r++)Ik(e[r],t,n)}return t}class Ak{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Ok)}profileKernel(e,t,n){let a;const r=()=>{a=n()};let s;const i=Sk();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(r);else{r();for(const e of a)e.dataSync();s=Promise.resolve({kernelMs:Sk()-i})}if(Dv().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<a.length;o++){const t=a[o];t.data().then(n=>{_k(n,t.dtype,e)})}return{kernelName:e,outputs:a,inputs:t,timeMs:s.then(e=>e.kernelMs),extraInfo:s.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:a,inputs:r,extraInfo:s}=e;n.forEach(e=>{Promise.all([e.data(),a,s]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],r,n[2])})})}}function _k(e,t,n){if("float32"!==t)return!1;for(let a=0;a<e.length;a++){const t=e[a];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class Ok{logKernelProfile(e,t,n,a,r,s){const i="number"===typeof a?cv("".concat(a,"ms"),9):a.error,o=cv(e,25),l=t.rank,c=t.size,u=cv(t.shape.toString(),14);let d="";for(const h in r){const e=r[h];if(null!=e){const n=e.shape||t.shape,a=n.length;d+="".concat(h,": ").concat(a,"D ").concat(a>0?n:""," ")}}console.log("%c".concat(o,"\t%c").concat(i,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(s),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function Rk(e,t,n,a){const r=Nv(t),s=function(e,t,n,a){const r=sv(t),s=a[a.length-1],i=new Array(s).fill(0),o=t.length,l="complex64"===n?Fk(e):e;if(o>1)for(let c=0;c<r/s;c++){const e=c*s;for(let t=0;t<s;t++)i[t]=Math.max(i[t],Pk(l[e+t],0,n).length)}return i}(e,t,n,r),i=t.length,o=Dk(e,t,n,r,s),l=["Tensor"];return a&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(i)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(o.map(e=>"    "+e).join("\n")),l.join("\n")}function Pk(e,t,n){let a;return a=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):vv(e)?"'".concat(e,"'"):"bool"===n?Mk(e):parseFloat(e.toFixed(7)).toString(),cv(a,t)}function Mk(e){return 0===e?"false":"true"}function Dk(e,t,n,a,r){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,o=t[0],l=t.length;if(0===l){if("complex64"===n){return[Pk(Fk(e)[0],0,n)]}return"bool"===n?[Mk(e[0])]:[e[0].toString()]}if(1===l){if(o>20){const t=3*i;let a=Array.from(e.slice(0,t)),s=Array.from(e.slice((o-3)*i,o*i));return"complex64"===n&&(a=Fk(a),s=Fk(s)),["["+a.map((e,t)=>Pk(e,r[t],n)).join(", ")+", ..., "+s.map((e,t)=>Pk(e,r[o-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?Fk(e):Array.from(e)).map((e,t)=>Pk(e,r[t],n)).join(", ")+"]"]}const c=t.slice(1),u=a.slice(1),d=a[0]*i,h=[];if(o>20){for(let t=0;t<3;t++){const a=t*d,s=a+d;h.push(...Dk(e.slice(a,s),c,n,u,r,!1))}h.push("...");for(let t=o-3;t<o;t++){const a=t*d,s=a+d;h.push(...Dk(e.slice(a,s),c,n,u,r,t===o-1))}}else for(let m=0;m<o;m++){const t=m*d,a=t+d;h.push(...Dk(e.slice(t,a),c,n,u,r,m===o-1))}const p=2===l?",":"";h[0]="["+(o>0?h[0]+p:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(s?"":f),h}function Fk(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class Lk{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=sv(e),null!=n){const e=n.length;nv(e===this.size,()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||mv(t,this.size),this.strides=Nv(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];0===n.length&&(n=[0]),nv(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")"));const r=this.locToIndex(n);this.values[r]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let a=0;for(const s of t){if(s<0||s>=this.shape[a]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}a++}let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=this.strides[s]*t[s];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return zk().makeTensor(this.values,this.shape,this.dtype)}}let zk=null,Bk=null,Uk=null;class Wk{constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=sv(e),this.strides=Nv(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Bk.buffer(this.shape,this.dtype,e)}bufferSync(){return Bk.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Sv(this.shape,e,"complex64"===this.dtype)}arraySync(){return Sv(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=zk().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>Ek(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),zk().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=zk().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>Ek(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await zk().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),zk().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Bk.print(this,e)}clone(){return this.throwIfDisposed(),Bk.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Rk(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Bk.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),zk().makeVariable(this,e,t,n)}}function Vk(){return Bv("Tensor",()=>Wk)}Object.defineProperty(Wk,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Vk();class Hk extends Wk{constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!iv(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));zk().disposeTensor(this),this.dataId=e.dataId,zk().incRef(this,null)}dispose(){zk().disposeVariable(this),this.isDisposedInternal=!0}}var Gk,qk,Kk,Xk,Yk;Object.defineProperty(Hk,Symbol.hasInstance,{value:e=>e instanceof Wk&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Gk||(Gk={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(qk||(qk={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Kk||(Kk={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Xk||(Xk={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Yk||(Yk={}));const $k={float32:Xk,int32:qk,bool:Kk,complex64:Yk};function Qk(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return $k[e][t]}function Jk(e){return Qk(e,"int32")}function Zk(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function eN(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function tN(e,t){if(e.dtype===t.dtype)return[e,t];const n=Qk(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function nN(e,t){return t.some(t=>t.id===e.id)}function aN(e){const t=[];return rN(e,t,new Set),t}function rN(e,t,n){if(null==e)return;if(e instanceof Wk)return void t.push(e);if(a=e,!Array.isArray(a)&&"object"!==typeof a)return;var a;const r=e;for(const s in r){const e=r[s];n.has(e)||(n.add(e),rN(e,t,n))}}function sN(e){return null!=e.kernelName}class iN{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class oN{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iN}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Jw("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ak(this.backendInstance),!0}setupRegisteredKernels(){rk(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){rk(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof $x||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,a=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,Jw("Initialization of backend ".concat(e," failed")),Jw(n.stack||n.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(n){return Jw("Initialization of backend ".concat(e," failed")),Jw(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),s=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(()=>this.startScope(a),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(a){throw t(),a}}nextTensorId(){return oN.nextTensorId++}nextVariableId(){return oN.nextVariableId++}clone(e){const t=cN.runKernel(nb,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{const t={x:e},n={dtype:"float32"};return cN.runKernel(uy,t,n)}}),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=nk(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const a=this.backend.numDataIds();let r=0;n.forEach(e=>{r+="complex64"===e.dtype?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=a-t-r-s;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const a=this.isTapeOn(),r=this.state.numBytes,s=this.state.numTensors;let i,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=sN(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(sN(e)){const{kernelName:t,inputs:r,attrs:s}=e;null==this.backendName&&this.backend;const l=nk(t,this.backendName);nv(null!=l,()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'")),i=()=>{const e=this.backend.numDataIds();o=l.kernelFunc({inputs:r,attrs:s,backend:this.backend});const i=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const c=i.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(a){const e=this.getTensorsForGradient(t,r,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,r=e=>{a&&(n=e.map(e=>this.keep(this.clone(e))))};i=()=>{const e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,r));const n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,d=sN(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,c,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=i()}),a&&this.addTapeNode(l,c,t,d,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(e=>null!=c[e]?c[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){const a=ak(e);if(null!=a){const e=a.inputsToSave||[],r=a.outputsToSave||[];let s;a.saveAllInputs?(nv(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(e=>t[e])):s=e.map(e=>t[e]);const i=n.filter((e,t)=>r[t]);return s.concat(i)}return[]}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let r=e;"string"===n&&vv(e[0])&&(r=e.map(e=>Ck(e)));const s=a.write(r,t,n),i=new Wk(t,n,s,this.nextTensorId());if(this.trackTensor(i,a),"string"===n){const e=this.state.tensorInfo.get(s),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,a){const r={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(r,a)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:a,dtype:r}=e,s=new Wk(a,r,n,this.nextTensorId());return this.trackTensor(s,t),s}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));const r=new Hk(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*xv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Hk||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*xv(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,a,r,s){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},o=ak(e);null!=o&&(a=o.gradFunc),null!=a&&(i.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],a=Ev(e.size,e.dtype);return this.makeTensor(a,e.shape,e.dtype)}return e}),a(e.length>1?e:e[0],r,s))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=aN(e),n=new Set(t.map(e=>e.id));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||n.has(e.id)||e.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==a.id||this.track(e)})}gradients(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(nv(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));nv(r instanceof Wk,()=>"The result y returned by f() must be a tensor.");const s=function(e,t,n){const a={},r={};for(let l=0;l<t.length;l++)a[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],s=n.inputs;for(const e in s){const i=s[e];let o=!1;for(let e=0;e<t.length;e++)if(a[i.id]){n.outputs.forEach(e=>a[e.id]=!0),o=!0,r[n.id]=!0;break}if(o)break}}const s={};s[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(s[t.outputs[e].id]){for(const e in n)s[n[e].id]=!0,i[t.id]=!0;break}}const o=[];for(let l=0;l<e.length;l++){const t=e[l];if(r[t.id]&&i[t.id]){const e={};for(const r in t.inputs){const n=t.inputs[r];a[n.id]&&(e[r]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,r);if(!a&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[r.id]=null==n?function(e){const t=Cv(sv(e),"float32");return cN.makeTensor(t,e,"float32")}(r.shape):n,function(e,t,n,a){for(let r=t.length-1;r>=0;r--){const s=t[r],i=[];if(s.outputs.forEach(t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(s.kernelName,"."));const o=s.gradient(i);for(const t in s.inputs){if(!(t in o))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(o),"."));const r=n(()=>o[t]());if("float32"!==r.dtype)throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(r.dtype,"'"));const i=s.inputs[t];if(!iv(r.shape,i.shape))throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(r.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=r;else{const t=e[i.id];e[i.id]=a(t,r),t.dispose()}}}}(e,s,e=>this.tidy(e),uN);const a=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:r,grads:a}})}customGrad(e){var t=this;return nv(wv(e),()=>"The f passed in customGrad(f) must be a function."),function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];let s;nv(a.every(e=>e instanceof Wk),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const i={};a.forEach((e,t)=>{i[t]=e});return t.runKernelFunc({forwardFunc:(t,n)=>(s=e(...a,n),nv(s.value instanceof Wk,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),nv(wv(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),backwardsFunc:(e,t)=>{const n=s.gradFunc(e,t),r=Array.isArray(n)?n:[n];nv(r.length===a.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),nv(r.every(e=>e instanceof Wk),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return r.forEach((e,t)=>{i[t]=()=>e}),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Sk(),n=await this.backend.time(e);return n.wallMs=Sk()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iN;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function lN(){const e=zv();if(null==e._tfengine){const t=new Pv(e);e._tfengine=new oN(t)}var t;return t=e._tfengine.ENV,Lv=t,zk=()=>e._tfengine,e._tfengine}oN.nextTensorId=0,oN.nextVariableId=0;const cN=lN();function uN(e,t){const n={a:e,b:t};return cN.runKernel(Hv,n)}let dN;function hN(e){if(void 0!==dN)return dN;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function pN(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const fN=Dv();function mN(e,t){let n=e;if(Tk(e))return"string"===t?[]:[e.length];if(Zk(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(eN(e))return[e.buffer.size/(null==t?4:xv(t))];if(!Array.isArray(e))return[];const a=[];for(;Array.isArray(n)||Tk(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&Dv().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&gN(e,a,[]),a}function gN(e,t,n){if(n=n||[],!Array.isArray(e)&&!Tk(e))return void nv(0===t.length,()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements"));nv(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")),nv(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements"));const a=t.slice(1);for(let r=0;r<e.length;++r)gN(e[r],a,n.concat(r))}function xN(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(a,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function vN(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Vk())return xN(a,e.dtype,t,n),e;let r=bv(e);if("string"!==r&&["bool","int32","float32"].indexOf(a)>=0&&(r=a),xN(a,r,t,n),null==e||!Tk(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const a=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(a,"'"))}const s=mN(e,r);Tk(e)||Array.isArray(e)||(e=[e]);const i="string"!==r?jk(e,r):Ik(e,[],!0);return cN.makeTensor(i,s,r)}function yN(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((e,r)=>vN(e,"".concat(t,"[").concat(r,"]"),n,a))}fN.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),fN.registerFlag("IS_BROWSER",()=>pN()),fN.registerFlag("IS_NODE",()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node),fN.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),fN.registerFlag("IS_SAFARI",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),fN.registerFlag("PROD",()=>!1),fN.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>fN.getBool("DEBUG")),fN.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),fN.registerFlag("IS_TEST",()=>!1),fN.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>fN.getBool("DEBUG")),fN.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),fN.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),fN.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function bN(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const r=function(){cN.startScope(n);try{const e=a(...arguments);return Ov(e)&&console.error("Cannot return a Promise inside of tidy."),cN.endScope(e),e}catch(e){throw cN.endScope(null),e}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}const wN=bN({complex_:function(e,t){const n=vN(e,"real","complex"),a=vN(t,"imag","complex");av(n.shape,a.shape,"real and imag shapes, ".concat(n.shape," and ").concat(a.shape,", ")+"must match in call to tf.complex().");const r={real:n,imag:a};return cN.runKernel(py,r)}});function kN(e,t,n,a){if(null==a)a=bv(e);else if("complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(eN(e)||Zk(e)){if("float32"!==a&&"int32"!==a)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(a,"."));return cN.backend.createTensorFromGPUData(e,t||n,a)}if(!Tk(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Iv(t);const e=sv(t),a=sv(n);nv(e===a,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(a));for(let r=0;r<n.length;++r){const e=n[r],a=r!==n.length-1||e!==sv(t.slice(r));nv(n[r]===t[r]||!a,()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). "))}}return Tk(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?jk(e,a):Ik(e,[],!0),cN.makeTensor(e,t,a)}function NN(e,t,n){return kN(e,t,mN(e,n),n)}class jN{static join(e){return new jN(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map(e=>Tk(e)?e.buffer:e)).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const a=e[n];n!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=t+a.byteLength;this.shards.push({buffer:a,start:t,end:r}),t=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const a=new ArrayBuffer(t-e),r=new Uint8Array(a);let s=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],a=e+s-n.start,o=s,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,a,l-a);if(r.set(c,o),s+=c.length,t<n.end)break}return a}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,a=e.length;for(;n<=a;){const r=Math.floor((a-n)/2)+n,s=t(e[r]);if(0===s)return r;s<0?a=r:n=r+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function SN(){return cN}function CN(){return cN.memory()}function EN(e,t){return cN.tidy(e,t)}function TN(e){aN(e).forEach(e=>e.dispose())}function IN(e){return cN.keep(e)}function AN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return cN.registerBackend(e,t,n)}function _N(){return cN.backend}Uk=function(e){Dv().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};async function ON(e,t){const n=[],a=[],r=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let s=0;s<r.length;++s){const i=r[s],o=Array.isArray(e)?e[s].tensor:e[i];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(o.dtype));const l={name:i,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){const e=new Promise(async e=>{const t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,a=new Uint8Array(n);let r=0;for(let s=0;s<t.length;s++){const e=t[s],n=new Uint8Array(new Uint32Array([e.length]).buffer);a.set(n,r),r+=4,a.set(e,r),r+=e.length}e(a)});a.push(e)}else a.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:RN(await Promise.all(a)),specs:n}}function RN(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))});const a=new Uint8Array(t);let r=0;return n.forEach(e=>{a.set(new Uint8Array(e.buffer),r),r+=e.byteLength}),a.buffer}const PN="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function MN(e){return PN?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function DN(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function FN(e,t){let n,a;return null!=e.weightsManifest&&([n,a]=await t(e.weightsManifest)),function(e,t,n){const a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(a.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");a.weightSpecs=t,a.weightData=n}return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(a.initializerSignature=e.initializerSignature),a}(e,n,a)}function LN(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:MN(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:MN(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new jN(e.weightData).byteLength}}function zN(e){const t=[];for(const n of e)t.push(...n.weights);return t}class BN{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==BN.instance&&(BN.instance=new BN),BN.instance}static registerSaveRouter(e){BN.getInstance().saveRouters.push(e)}static registerLoadRouter(e){BN.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return BN.getHandlers(e,"save")}static getLoadHandlers(e,t){return BN.getHandlers(e,"load",t)}static getHandlers(e,t,n){const a=[];return("load"===t?BN.getInstance().loadRouters:BN.getInstance().saveRouters).forEach(t=>{const r=t(e,n);null!==r&&a.push(r)}),a}}const UN="tensorflowjs",WN="models_store",VN="model_info_store";function HN(){if(!Dv().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function GN(e){const t=e.result;t.createObjectStore(WN,{keyPath:"modelPath"}),t.createObjectStore(VN,{keyPath:"modelPath"})}class qN{constructor(e){if(this.indexedDB=HN(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const a=this.indexedDB.open(UN,1);a.onupgradeneeded=()=>GN(a),a.onsuccess=()=>{const r=a.result;if(null==t){const t=r.transaction(WN,"readonly"),a=t.objectStore(WN).get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return r.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(a.result.modelArtifacts)},a.onerror=e=>(r.close(),n(a.error)),t.oncomplete=()=>r.close()}else{t.weightData=jN.join(t.weightData);const a=LN(t),i=r.transaction(VN,"readwrite");let o,l,c=i.objectStore(VN);try{o=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(s){return n(s)}o.onsuccess=()=>{l=r.transaction(WN,"readwrite");const o=l.objectStore(WN);let u;try{u=o.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a})}catch(s){return n(s)}u.onsuccess=()=>e({modelArtifactsInfo:a}),u.onerror=e=>{c=i.objectStore(VN);const t=c.delete(this.modelPath);t.onsuccess=()=>(r.close(),n(u.error)),t.onerror=e=>(r.close(),n(u.error))}},o.onerror=e=>(r.close(),n(o.error)),i.oncomplete=()=>{null==l?r.close():l.oncomplete=()=>r.close()}}},a.onerror=e=>n(a.error)})}}qN.URL_SCHEME="indexeddb://";const KN=e=>{return Dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qN.URL_SCHEME)?(t=e.slice(qN.URL_SCHEME.length),new qN(t)):null;var t};BN.registerSaveRouter(KN),BN.registerLoadRouter(KN);class XN{constructor(){this.indexedDB=HN()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(UN,1);n.onupgradeneeded=()=>GN(n),n.onsuccess=()=>{const a=n.result,r=a.transaction(VN,"readonly"),s=r.objectStore(VN).getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(a.close(),t(s.error)),r.oncomplete=()=>a.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(qN.URL_SCHEME)?t.slice(qN.URL_SCHEME.length):t,new Promise((t,n)=>{const a=this.indexedDB.open(UN,1);a.onupgradeneeded=()=>GN(a),a.onsuccess=()=>{const r=a.result,s=r.transaction(VN,"readwrite"),i=s.objectStore(VN),o=i.get(e);let l;o.onsuccess=()=>{if(null==o.result)return r.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const a=i.delete(e),s=()=>{l=r.transaction(WN,"readwrite");const a=l.objectStore(WN).delete(e);a.onsuccess=()=>t(o.result.modelArtifactsInfo),a.onerror=e=>n(o.error)};a.onsuccess=s,a.onerror=e=>(s(),r.close(),n(o.error))}},o.onerror=e=>(r.close(),n(o.error)),s.oncomplete=()=>{null==l?r.close():l.oncomplete=()=>r.close()}},a.onerror=e=>n(a.error)})}}const YN="/",$N="tensorflowjs_models",QN="info",JN="model_topology",ZN="weight_specs",ej="weight_data",tj="model_metadata";function nj(e){return{info:[$N,e,QN].join(YN),topology:[$N,e,JN].join(YN),weightSpecs:[$N,e,ZN].join(YN),weightData:[$N,e,ej].join(YN),modelMetadata:[$N,e,tj].join(YN)}}function aj(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function rj(e){const t=e.split(YN);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(YN)}class sj{constructor(e){if(!Dv().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=nj(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),a=JSON.stringify(e.weightSpecs),r=LN(e),s=jN.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,function(e){if(PN)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let a=0,r=t.length;a<r;a++)n+=String.fromCharCode(t[a]);return btoa(n)}(s));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:r}}catch(t){throw aj(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(r.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(r.weightSpecsBytes,", ")+"weightDataBytes=".concat(r.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==a)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=a;const r=this.LS.getItem(this.keys.modelMetadata);if(null!=r){const e=JSON.parse(r);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(PN){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let a=0;a<t.length;++a)n.set([t.charCodeAt(a)],a);return n.buffer}(s),t}}sj.URL_SCHEME="localstorage://";const ij=e=>{return Dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sj.URL_SCHEME)?(t=e.slice(sj.URL_SCHEME.length),new sj(t)):null;var t};BN.registerSaveRouter(ij),BN.registerLoadRouter(ij);class oj{constructor(){nv(Dv().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),nv("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=$N+YN,n=YN+QN;for(let a=0;a<this.LS.length;++a){const r=this.LS.key(a);if(r.startsWith(t)&&r.endsWith(n)){e[rj(r)]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){var t;const n=nj(e=(t=e).startsWith(sj.URL_SCHEME)?t.slice(sj.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const a=JSON.parse(this.LS.getItem(n.info));return aj(n),a}}const lj="://";class cj{constructor(){this.managers={}}static getInstance(){return null==cj.instance&&(cj.instance=new cj),cj.instance}static registerManager(e,t){nv(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(lj)&&(e=e.slice(0,e.indexOf(lj))),nv(e.length>0,()=>"scheme must not be an empty string.");const n=cj.getInstance();nv(null==n.managers[e],()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){const t=cj.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(cj.getInstance().managers)}}class uj{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&Dv().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(e,t)}isTypedArray(e){return lk(e)}}if(Dv().get("IS_BROWSER")){Dv().setPlatform("browser",new uj);try{cj.registerManager(sj.URL_SCHEME,new oj)}catch(CEe){}try{cj.registerManager(qN.URL_SCHEME,new XN)}catch(CEe){}}const dj=()=>n(5817);let hj;class pj{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Dv().global.fetch?Dv().global.fetch(e,t):(null==hj&&(hj=dj()),hj(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function fj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Iv(e),new Lk(e,t,n)}Dv().get("IS_NODE")&&!Dv().get("IS_BROWSER")&&Dv().setPlatform("node",new pj);const mj=bN({cast_:function(e,t){const n=vN(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const a={x:n},r={dtype:t};return cN.runKernel(uy,a,r)}});const gj=bN({clone_:function(e){const t={x:vN(e,"x","clone","string_or_numeric")};return cN.runKernel(nb,t)}});lN();Bk={buffer:fj,cast:mj,clone:gj,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};const xj=bN({add_:function(e,t){let n=vN(e,"a","add"),a=vN(t,"b","add");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel(Hv,r)}});const vj=bN({floorDiv_:function(e,t){let n=vN(e,"a","floorDiv"),a=vN(t,"b","floorDiv");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel($y,r)}});const yj=bN({div_:function(e,t){let n=vN(e,"a","div"),a=vN(t,"b","div");if([n,a]=tN(n,a),"int32"===n.dtype&&"int32"===a.dtype)return vj(n,a);const r={a:n,b:a};return cN.runKernel(Fy,r,{})}});const bj=bN({mul_:function(e,t){let n=vN(e,"a","mul"),a=vN(t,"b","mul");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel(Ob,r)}});const wj=bN({sqrt_:function(e){const t={x:vN(e,"x","sqrt","float32")};return cN.runKernel(vw,t)}});const kj=bN({square_:function(e){const t=vN(e,"x","square");return cN.runKernel("Square",{x:t},{})}});const Nj=bN({zerosLike_:function(e){const t={x:vN(e,"x","zerosLike")};return cN.runKernel(Gw,t)}});function jj(e){return cN.customGrad(e)}function Sj(e,t){if((Tk(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Tk(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return kN(e,[],[],t)}const Cj=new Map,Ej=new Map;class Tj{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Ij{constructor(){this.classNameMap={}}static getMap(){return null==Ij.instance&&(Ij.instance=new Ij),Ij.instance}static register(e){Ij.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Aj(e,t,n){nv(null!=e.className,()=>"Class being registered does not have the static className property defined."),nv("string"===typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),nv(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const a=t+">"+n;return Ij.register(e),Cj.set(a,e),Ej.set(e,a),e}class _j extends Tj{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:a,grads:r}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:r[e.name]}));this.applyGradients(e)}else this.applyGradients(r);return TN(r),t?a:(a.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){nv(wv(e),()=>"The f passed in variableGrads(f) must be a function"),nv(null==t||Array.isArray(t)&&t.every(e=>e instanceof Hk),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in cN.registeredVariables)t.push(cN.registeredVariables[e])}const a=n?t.filter(e=>!e.trainable):null,r=t.length;t=t.filter(e=>e.trainable),nv(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(r," variables is ")+"trainable.");const{value:s,grads:i}=cN.gradients(e,t,null,!0);nv(i.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),nv(0===s.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor"));const o={};return t.forEach((e,t)=>{null!=i[t]&&(o[e.name]=i[t])}),null!=a&&a.forEach(e=>o[e.name]=null),{value:s,grads:o}}(e,t)}dispose(){null!=this.iterations_&&TN(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Sj(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(_j,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class Oj extends _j{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=cN.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const a=cN.registeredVariables[t],r=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:EN(()=>Nj(a).variable(r))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:EN(()=>Nj(a).variable(r))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const i=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;EN(()=>{const e=xj(bj(i,this.rho),bj(kj(s),1-this.rho)),t=bj(yj(wj(xj(o,this.epsilon)),wj(xj(i,this.epsilon))),s),n=xj(bj(o,this.rho),bj(kj(t),1-this.rho));i.assign(e),o.assign(n);const r=xj(bj(t,-this.learningRate),a);a.assign(r)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(TN(this.accumulatedGrads.map(e=>e.variable)),TN(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function Rj(e,t,n){Iv(e);const a={shape:e,value:t,dtype:n=n||bv(t)};return cN.runKernel(Ky,{},a)}class Pj extends _j{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const a=cN.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:EN(()=>Rj(a.shape,this.initialAccumulatorValue).variable(e))}}const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const s=this.accumulatedGrads[n].variable;EN(()=>{const e=xj(s,kj(r));s.assign(e);const t=xj(bj(yj(r,wj(xj(e,cN.backend.epsilon()))),-this.learningRate),a);a.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&TN(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const Mj=bN({pow_:function(e,t){let n=vN(e,"base","pow"),a=vN(t,"exp","pow");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel(Wb,r)}});const Dj=bN({sub_:function(e,t){let n=vN(e,"a","sub"),a=vN(t,"b","sub");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel(Mw,r)}});class Fj extends _j{static get className(){return"Adam"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],EN(()=>{this.accBeta1=Sj(t).variable(),this.accBeta2=Sj(n).variable()}),null==a&&(this.epsilon=cN.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);EN(()=>{const n=Dj(1,this.accBeta1),a=Dj(1,this.accBeta2);t.forEach((t,r)=>{const s=cN.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:EN(()=>Nj(s).variable(i))}),null==this.accumulatedSecondMoment[r]&&(this.accumulatedSecondMoment[r]={originalName:"".concat(t,"/v"),variable:EN(()=>Nj(s).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[r].variable,c=this.accumulatedSecondMoment[r].variable,u=xj(bj(l,this.beta1),bj(o,1-this.beta1)),d=xj(bj(c,this.beta2),bj(kj(o),1-this.beta2)),h=yj(u,n),p=yj(d,a);l.assign(u),c.assign(d);const f=xj(bj(yj(h,xj(wj(p),this.epsilon)),-this.learningRate),s);s.assign(f)}),this.accBeta1.assign(bj(this.accBeta1,this.beta1)),this.accBeta2.assign(bj(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&TN(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&TN(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),EN(()=>{this.accBeta1.assign(Mj(this.beta1,this.iterations_+1)),this.accBeta2.assign(Mj(this.beta2,this.iterations_+1))});const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const Lj=bN({abs_:function(e){const t=vN(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return cN.runKernel(fy,e)}{const e={x:t};return cN.runKernel(Uv,e)}}});function zj(e,t){const n=e.length,a=[];for(let r=0;r<n;r++){const s=n-1-r,i=e[s]||1;(t[t.length-1-r]||1)>1&&1===i&&a.unshift(s)}return a}function Bj(e,t){const n=[];for(let a=0;a<t.length;a++){const r=e[e.length-a-1],s=t.length-a-1,i=t[s];(null==r||1===r&&i>1)&&n.unshift(s)}return n}function Uj(e,t){const n=Math.max(e.length,t.length),a=new Array(n);for(let r=0;r<n;r++){let s=e[e.length-r-1];null==s&&(s=1);let i=t[t.length-r-1];if(null==i&&(i=1),1===s)a[n-r-1]=i;else if(1===i)a[n-r-1]=s;else{if(s!==i){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}a[n-r-1]=s}}return a}const Wj=bN({maximum_:function(e,t){let n=vN(e,"a","maximum"),a=vN(t,"b","maximum");[n,a]=tN(n,a),"bool"===n.dtype&&(n=mj(n,"int32"),a=mj(a,"int32")),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(bb,r)}});class Vj extends _j{static get className(){return"Adamax"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],EN(()=>{this.iteration=Sj(0).variable(),this.accBeta1=Sj(t).variable()}),null==a&&(this.epsilon=cN.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);EN(()=>{const n=Dj(1,this.accBeta1),a=yj(-this.learningRate,xj(bj(this.iteration,this.decay),1));t.forEach((t,r)=>{const s=cN.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:Nj(s).variable(i)}),null==this.accumulatedWeightedInfNorm[r]&&(this.accumulatedWeightedInfNorm[r]={originalName:"".concat(t,"/v"),variable:Nj(s).variable(i)});const o=Array.isArray(e)?e[r].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[r].variable,c=this.accumulatedWeightedInfNorm[r].variable,u=xj(bj(l,this.beta1),bj(o,1-this.beta1)),d=bj(c,this.beta2),h=Lj(o),p=Wj(d,h);l.assign(u),c.assign(p);const f=xj(bj(yj(a,n),yj(u,xj(p,this.epsilon))),s);s.assign(f)}),this.iteration.assign(xj(this.iteration,1)),this.accBeta1.assign(bj(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&TN(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&TN(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class Hj extends _j{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const r=cN.registeredVariables[t];EN(()=>{const e=xj(bj(this.c,a),r);r.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=IN(Sj(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class Gj extends Hj{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Sj(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const a=cN.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:EN(()=>Nj(a).variable(e))}}const r=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&EN(()=>{let e;const t=xj(bj(this.m,r),s);e=this.useNesterov?xj(bj(this.c,xj(s,bj(t,this.m))),a):xj(bj(this.c,t),a),r.assign(t),a.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&TN(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class qj extends _j{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==a&&(this.epsilon=cN.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const a=cN.registeredVariables[t],r=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:EN(()=>Nj(a).variable(r))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:EN(()=>Nj(a).variable(r))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:EN(()=>Nj(a).variable(r))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;EN(()=>{const e=xj(bj(i,this.decay),bj(kj(s),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,r=xj(bj(t,this.decay),bj(s,1-this.decay)),l=yj(bj(s,this.learningRate),wj(Dj(e,xj(kj(r),this.epsilon)))),c=xj(bj(o,this.momentum),l);i.assign(e),t.assign(r),o.assign(c);const u=Dj(a,c);a.assign(u)}else{const e=xj(bj(i,this.decay),bj(kj(s),1-this.decay)),t=xj(bj(o,this.momentum),yj(bj(s,this.learningRate),wj(xj(e,this.epsilon))));i.assign(e),o.assign(t);const n=Dj(a,t);a.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&TN(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&TN(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&TN(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const Kj=[Oj,Pj,Fj,Vj,Gj,qj,Hj];function Xj(e){return new Promise(e=>setTimeout(e)).then(e)}class Yj{constructor(e){if(!Dv().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Yj.URL_SCHEME)&&(e=e.slice(Yj.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=jN.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=DN(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await Xj(()=>r.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Xj(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:LN(e)}}}}Yj.URL_SCHEME="downloads://";function $j(e,t,n,a){!function(e){nv(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}(e),function(e,t){nv(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)),nv(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)),nv(t>=e,()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t))}(n=null==n?0:n,a=null==a?1:a);let r=0;return Promise.all(e.map(s=>(s.then(s=>{const i=n+ ++r/e.length*(a-n);return t(i),s}),s)))}async function Qj(e,t){null==t&&(t={});const n=null==t.fetchFunc?Dv().platform.fetch:t.fetchFunc,a=e.map(e=>n(e,t.requestInit,{isBinary:!0})),r=(null==t.onProgress?await Promise.all(a):await $j(a,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(r):await $j(r,t.onProgress,.5,1)}BN.registerSaveRouter(e=>Dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yj.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Yj(e)}(e.slice(Yj.URL_SCHEME.length)):null);class Jj{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(nv("function"===typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Dv().platform.fetch,nv(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&nv(2===e.length,()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=DN(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=jN.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:LN(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(a.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(jEe){let t="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,a=t.weightsManifest;if(null==n&&null==a)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return FN(await this.loadModelJSON(),e=>this.loadWeights(e))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=zN(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const a=null==t.fetchFunc?Dv().platform.fetch:t.fetchFunc;let r,s=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;s<e.length;){if(!r){const n=(await a(e[s],t.requestInit,{isBinary:!0})).body;r=n.getReader()}const{done:o,value:l}=await r.read();if(!o)return void n.enqueue(l);s++,r=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,s/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),a=e.substring(0,t),r=n>t?e.substring(n):"";return[a+"/",r]}(t),r=this.weightPathPrefix||n,s=[],i=[];for(const o of e)for(const e of o.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):s.push(r+e+a);return this.weightUrlConverter&&s.push(...await Promise.all(i)),s}async loadWeights(e){const t=await this.getWeightUrls(e);return[zN(e),await Qj(t,this.loadOptions)]}}function Zj(e){return null!=e.match(Jj.URL_SCHEME_REGEX)}Jj.URL_SCHEME_REGEX=/^https?:\/\//;const eS=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>Zj(e)):Zj(e),n)return tS(e,t)}return null};function tS(e,t){return new Jj(e,t)}BN.registerSaveRouter(eS),BN.registerLoadRouter(eS);const nS=-2,aS=-1;function rS(e,t,n){const a=e.shape.length;nv(a===t.length,()=>"Error in slice".concat(a,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(a,").")),nv(a===n.length,()=>"Error in slice".concat(a,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(a,")."));for(let r=0;r<a;++r)nv(t[r]+n[r]<=e.shape[r],()=>"Error in slice".concat(a,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")"))}function sS(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function iS(e,t,n){const a=[];for(let r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}function oS(e,t,n,a){const r=[...e];for(let s=r.length;s<a.length;s++)r.push(1);for(let s=0;s<n;s++)0===s?r[t]=1:(r.splice(t,0,1),r.pop());return r}function lS(e,t,n){return n<=e?n:n-(t-1)}function cS(e,t){const n=[];for(let a=0;a<e;a++)n.push(t+a);return n}function uS(e,t,n,a,r,s,i,o,l){const c=e.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=dS(i,l,c,a,e),d=hS(o,l,c,r,e),h=oS(s,l,c,e)}else for(let p=0;p<c;p++)u[p]=fS(i,a,s,e,p,l),d[p]=mS(o,r,s,e,p,l),h[p]=pS(s,p,l);return{begin:u,end:d,strides:h}}function dS(e,t,n,a,r){const s=[...r],i=cS(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=0;else{const r=lS(t,n,o);let i=a[r];e&1<<r&&(i=0),s[o]=i}return s}function hS(e,t,n,a,r){const s=[...r],i=cS(n,t);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const r=lS(t,n,o);let i=a[r];e&1<<r&&(i=Number.MAX_SAFE_INTEGER),s[o]=i}for(let o=0;o<s.length;o++){const e=r[o];s[o]<0&&(s[o]+=e),s[o]=Zx(0,s[o],r[o])}return s}function pS(e,t,n){let a=e[t];return(n&1<<t||null==a)&&(a=1),a}function fS(e,t,n,a,r,s){let i=t[r];const o=n[r]||1;(e&1<<r||s&1<<r||null==i)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=a[r];return i<0&&(i+=l),i=Zx(0,i,l-1),i}function mS(e,t,n,a,r,s){let i=t[r];const o=n[r]||1;(e&1<<r||s&1<<r||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=a[r];return i<0&&(i+=l),i=o>0?Zx(0,i,l):Zx(-1,i,l-1),i}function gS(e,t,n){let a=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){a=r;break}for(let r=a+1;r<n.length;r++)if(t[r]>0||n[r]!==e[r])return!1;return!0}function xS(e,t){let n=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}function vS(e,t,n){let a;const r=e.shape.length;let s;return a="number"===typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice(),a.forEach(e=>{nv(-1!==e,()=>"slice() does not support negative begin indexing.")}),s=null==n?new Array(r).fill(-1):"number"===typeof n?[n,...new Array(r-1).fill(-1)]:n.length<r?n.concat(new Array(r-n.length).fill(-1)):n,s=s.map((t,n)=>t>=0?t:(nv(-1===t,()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")),e.shape[n]-a[n])),[a,s]}function yS(e,t,n,a,r,s,i,o,l){let c;if(null==a?(c=new Array(t.length),c.fill(1)):c=a,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:r,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)u&&0!==(1<<y&o)&&d.numAddAxisAfterEllipsis++,1<<y&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){const r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(nS),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(aS),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(d,h);let p=!0,f=!0,m=!0;const g=[],x=[];for(let y=0;y<e.length;++y){if(0===h.strides[y])throw Error("strides[".concat(y,"] must be non-zero"));const t=!!(h.shrinkAxisMask&1<<y),n=e[y];if(-1===n){g.push(t?1:-1);continue}const a=[h.beginMask&1<<y,h.endMask&1<<y],r=[h.strides[y]>0?0:-1,h.strides[y]>0?n:n-1];if(t&&h.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[y];const s=!!(h.beginMask&1<<y&&h.endMask&1<<y);if(h.beginValid&&h.endValid){if(t){const e=h.begin[y]<0?n+h.begin[y]:h.begin[y];if(h.begin[y]=e,h.end[y]=h.begin[y]+1,e<0||e>=n)throw Error("slice index ".concat(h.begin[y]," of dimension ").concat(y," out of bounds."))}else h.begin[y]=bS(h.begin[y],0,h.strides[y],n,a,r),h.end[y]=bS(h.end[y],1,h.strides[y],n,a,r);const e=1===h.strides[y]&&0===h.begin[y]&&h.end[y]===n;p=p&&e,f=f&&(0===y&&1===h.strides[y]||e)}else p=p&&1===h.strides[y]&&s,f=f&&(0===y&&1===h.strides[y]||s);let i,o=!1;if(h.beginValid&&h.endValid?(i=h.end[y]-h.begin[y],o=!0):t?(i=1,o=!0):s&&n>=0&&(i=h.strides[y]<0?-n:n,o=!0),o){let e;e=0===i||i<0!==h.strides[y]<0?0:Math.trunc(i/h.strides[y])+(i%h.strides[y]!==0?1:0),g.push(e)}else g.push(-1)}for(let y=0;y<h.finalShapeGatherIndices.length;++y){const e=h.finalShapeGatherIndices[y];e>=0?x.push(g[e]):e===nS&&x.push(1)}const v=x.filter((e,t)=>h.finalShapeGatherIndices[t]!==nS);return{finalShapeSparse:v,finalShape:x,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function bS(e,t,n,a,r,s){if(r[t])return n>0?s[t]:s[t+1&1];{const t=e<0?a+e:e;return t<s[0]?s[0]:t>s[1]?s[1]:t}}const wS=bN({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:vN(e,"x","all","bool")},r={axis:t,keepDims:n};return cN.runKernel(qv,a,r)}});const kS=bN({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:vN(e,"x","any","bool")},r={axis:t,keepDims:n};return cN.runKernel(Kv,a,r)}});const NS=bN({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vN(e,"x","argMax")},a={axis:t};return cN.runKernel(Xv,n,a)}});function jS(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",s=arguments.length>5?arguments[5]:void 0;return ES(e,[...t,e[3]],n,s,a,null,null,FS(r))}function SS(e,t,n,a,r,s){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[o,l]=AS(t);let c;if("channelsLast"===i)c=[o,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));c=[o,l,e[1],e[1]]}return ES(e,c,n,a,r,s,!1,i)}function CS(e,t,n,a,r,s){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[o,l,c]=_S(t);let u,d;if("NDHWC"===i)d="channelsLast",u=[o,l,c,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat ".concat(i));d="channelsFirst",u=[o,l,c,e[1],e[1]]}return TS(e,u,n,a,r,!1,d,s)}function ES(e,t,n,a,r,s){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,d]=[-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,d]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));[l,d,c,u]=e}const[h,p,,f]=t,[m,g]=AS(n),[x,v]=AS(a),y=OS(h,x),b=OS(p,v),{padInfo:w,outHeight:k,outWidth:N}=function(e,t,n,a,r,s,i,o,l){let c,u,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const r=function(e,t,n,a,r){null==a&&(a=IS(e,t,n));const s=e[0],i=e[1],o=RS((s-t+2*a)/n+1,r),l=RS((i-t+2*a)/n+1,r);return[o,l]}([t,n],s,a,e,o);u=r[0],d=r[1]}else if("same"===e){u=Math.ceil(t/a),d=Math.ceil(n/r);const e=Math.max(0,(u-1)*a+s-t),o=Math.max(0,(d-1)*r+i-n),l=Math.floor(e/2),h=e-l,p=Math.floor(o/2);c={top:l,bottom:h,left:p,right:o-p,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-s+1)/a),d=Math.ceil((n-i+1)/r);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const h="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:h,bottom:p,left:f,right:m,type:0===h&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=RS((t-s+h+p)/a+1,o),d=RS((n-i+f+m)/r+1,o)}}return{padInfo:c,outHeight:u,outWidth:d}}(r,c,u,m,g,y,b,s,o),j=i?f*d:f;let S;return"channelsFirst"===o?S=[l,j,k,N]:"channelsLast"===o&&(S=[l,k,N,j]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:k,outWidth:N,outChannels:j,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:y,effectiveFilterWidth:b,dilationHeight:x,dilationWidth:v,inShape:e,outShape:S,filterShape:t}}function TS(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",o=arguments.length>7?arguments[7]:void 0,[l,c,u,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,c,u,d,h]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[l,h,c,u,d]=e}const[p,f,m,,g]=t,[x,v,y]=_S(n),[b,w,k]=_S(a),N=OS(p,b),j=OS(f,w),S=OS(m,k),{padInfo:C,outDepth:E,outHeight:T,outWidth:I}=function(e,t,n,a,r,s,i,o,l,c,u){let d,h,p,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,a,r,s){null==r&&(r=IS(e,t[0],a[0]));const i=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*r>=t[o]&&(i[o]=RS((e[o]-t[o]+2*r)/a[o]+1,s));return i}([t,n,a,1],[o,l,c],1,[r,s,i],e,u);h=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{h=Math.ceil(t/r),p=Math.ceil(n/s),f=Math.ceil(a/i);const e=(h-1)*r+o-t,u=(p-1)*s+l-n,m=(f-1)*i+c-a,g=Math.floor(e/2),x=e-g,v=Math.floor(u/2),y=u-v,b=Math.floor(m/2);d={top:v,bottom:y,left:b,right:m-b,front:g,back:x,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(r,c,u,d,x,v,y,N,j,S,o),A=s?g*h:g;let _;return"channelsFirst"===i?_=[l,A,E,T,I]:"channelsLast"===i&&(_=[l,E,T,I,A]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:E,outHeight:T,outWidth:I,outChannels:A,padInfo:C,strideDepth:x,strideHeight:v,strideWidth:y,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:N,effectiveFilterHeight:j,effectiveFilterWidth:S,dilationDepth:b,dilationHeight:w,dilationWidth:k,inShape:e,outShape:_,filterShape:t}}function IS(e,t,n){const a=OS(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+a)/2)}function AS(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function _S(e){return"number"===typeof e?[e,e,e]:e}function OS(e,t){return t<=1?e:e+(e-1)*(t-1)}function RS(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function PS(e){const[t,n,a]=AS(e);return 1===t&&1===n&&1===a}function MS(e,t){return PS(e)||PS(t)}function DS(e){return AS(e).every(e=>e>0)}function FS(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function LS(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)nv(ov(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach(t=>{t.forEach(t=>{nv(ov(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."))})})}}}const zS=bN({reshape_:function(e,t){const n={x:vN(e,"x","reshape","string_or_numeric")},a={shape:t};return cN.runKernel(Jb,n,a)}});const BS=bN({avgPool_:function(e,t,n,a,r){const s=vN(e,"x","avgPool","float32");nv(MS(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"));let i=s,o=!1;3===s.rank&&(o=!0,i=zS(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nv(4===i.rank,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")),LS("avgPool",a,r);const l={x:i},c={filterSize:t,strides:n,pad:a,dimRoundingMode:r};let u=cN.runKernel(ty,l,c);return u=mj(u,s.dtype),o?zS(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const US=bN({avgPool3d_:function(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=vN(e,"x","avgPool3d","float32");let o=i,l=!1;4===i.rank&&(l=!0,o=zS(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),nv(5===o.rank,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),nv("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(s)),nv("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),LS("avgPool3d",a,r);const c={x:o},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:s};let d=cN.runKernel(ay,c,u);return d=mj(d,o.dtype),l?zS(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const WS=bN({batchNorm_:function(e,t,n,a,r,s){null==s&&(s=.001);const i=vN(e,"x","batchNorm"),o=vN(t,"mean","batchNorm"),l=vN(n,"variance","batchNorm");let c,u;null!=r&&(c=vN(r,"scale","batchNorm")),null!=a&&(u=vN(a,"offset","batchNorm")),nv(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),nv(null==u||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),nv(null==c||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:function(e){let t;return t=0===e.rank||1===e.rank?zS(e,[1,1,1,e.size]):2===e.rank?zS(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?zS(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),scale:c,offset:u,mean:o,variance:l},h={varianceEpsilon:s},p=cN.runKernel(Qy,d,h);return zS(p,i.shape)}});const VS=bN({batchNorm2d_:function(e,t,n,a,r,s){const i=vN(e,"x","batchNorm"),o=vN(t,"mean","batchNorm"),l=vN(n,"variance","batchNorm");let c,u;return null!=r&&(c=vN(r,"scale","batchNorm")),null!=a&&(u=vN(a,"offset","batchNorm")),nv(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,".")),nv(2===o.rank||1===o.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(o.rank,".")),nv(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&nv(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&nv(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")),WS(i,o,l,u,c,s)}});const HS=bN({batchNorm3d_:function(e,t,n,a,r,s){const i=vN(e,"x","batchNorm"),o=vN(t,"mean","batchNorm"),l=vN(n,"variance","batchNorm");let c,u;return null!=r&&(c=vN(r,"scale","batchNorm")),null!=a&&(u=vN(a,"offset","batchNorm")),nv(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,".")),nv(3===o.rank||1===o.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(o.rank,".")),nv(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&nv(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&nv(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")),WS(i,o,l,u,c,s)}});const GS=bN({batchNorm4d_:function(e,t,n,a,r,s){const i=vN(e,"x","batchNorm"),o=vN(t,"mean","batchNorm"),l=vN(n,"variance","batchNorm");let c,u;return null!=r&&(c=vN(r,"scale","batchNorm")),null!=a&&(u=vN(a,"offset","batchNorm")),nv(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,".")),nv(4===o.rank||1===o.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(o.rank,".")),nv(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&nv(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&nv(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")),WS(i,o,l,u,c,s)}});const qS=bN({broadcastTo_:function(e,t){let n=vN(e,"broadcastTo","x");const a=n.shape;if(Iv(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=zS(n,e)}const r=n.shape,s=Array.from(t);for(let c=t.length-1;c>=0;c--)if(r[c]===t[c])s[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(t,"]."));const i=s.map((e,t)=>e>1?t:-1).filter(e=>e>=0);if(0===i.length)return gj(n);const o={x:n},l={reps:s};return cN.runKernel(Lw,o,l)}});const KS=bN({clipByValue_:function(e,t,n){const a=vN(e,"x","clipByValue");if(nv(t<=n,()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")),t===n)return Rj(a.shape,t,a.dtype);const r={x:a},s={clipValueMin:t,clipValueMax:n};return cN.runKernel(hy,r,s)}});const XS=bN({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;nv(e.length>=1,()=>"Pass at least one tensor to concat");const n=yN(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}),1===n.length)return gj(n[0]);const a=n,r={axis:t};return cN.runKernel(my,a,r)}});const YS=bN({concat1d_:function(e){return XS(e,0)}});const $S=bN({concat2d_:function(e,t){return XS(e,t)}});const QS=bN({concat3d_:function(e,t){return XS(e,t)}});const JS=bN({concat4d_:function(e,t){return XS(e,t)}});const ZS=bN({conv2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const o=vN(e,"x","conv2d","float32"),l=vN(t,"filter","conv2d","float32");let c=o,u=!1;3===o.rank&&(u=!0,c=zS(o,[1,o.shape[0],o.shape[1],o.shape[2]])),nv(4===c.rank,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),nv(4===l.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")),LS("conv2d",a,i);const d="NHWC"===r?c.shape[3]:c.shape[1];nv(d===l.shape[2],()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(l.shape[2],".")),nv(MS(n,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(s,"'")),nv(DS(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),nv(DS(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},p={strides:n,pad:a,dataFormat:r,dilations:s,dimRoundingMode:i},f=cN.runKernel(gy,h,p);return u?zS(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const eC=bN({conv1d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const o=vN(e,"x","conv1d"),l=vN(t,"filter","conv1d");let c=o,u=!1;2===o.rank&&(u=!0,c=zS(o,[1,o.shape[0],o.shape[1]])),nv(3===c.rank,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),nv(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")),LS("conv1d",a,i),nv(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")),nv(MS(n,s),()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(s,"'")),nv(DS(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),nv(DS(n),()=>"Error in conv1D: Stride should be larger than 0."),nv("NWC"===r,()=>"Error in conv1d: got dataFormat of ".concat(r," but only NWC is currently supported."));const d=zS(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=zS(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=ZS(h,d,[1,n],a,"NHWC",[1,s],i);return zS(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const tC=bN({conv2DBackpropInput_:function(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;nv(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,l=t,c=!1;3===t.rank&&(c=!0,l=zS(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),nv(4===o.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(o.length,".")),nv(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)),nv(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank));const u="NHWC"===s?o[3]:o[1],d="NHWC"===s?l.shape[3]:l.shape[1];nv(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],".")),nv(d===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")),LS("conv2dDerInput",r,i);const h={dy:l,filter:n},p={strides:a,pad:r,dataFormat:s,dimRoundingMode:i,inputShape:o},f=cN.runKernel(vy,h,p);return c?zS(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const nC=bN({conv2dTranspose_:function(e,t,n,a,r,s){const i=vN(e,"x","conv2dTranspose"),o=vN(t,"filter","conv2dTranspose");return tC(n,i,o,a,r,"NHWC",s)}});const aC=bN({conv3d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=vN(e,"x","conv3d"),o=vN(t,"filter","conv3d");let l=i,c=!1;4===i.rank&&(c=!0,l=zS(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),nv(5===l.rank,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),nv(5===o.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(o.rank,".")),nv(l.shape[4]===o.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(o.shape[3],".")),nv(MS(n,s),()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(s,"'")),nv("NDHWC"===r,()=>"Error in conv3d: got dataFormat of ".concat(r," but only NDHWC is currently supported.")),nv(DS(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),nv(DS(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:o},d={strides:n,pad:a,dataFormat:r,dilations:s},h=cN.runKernel(yy,u,d);return c?zS(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const rC=bN({conv3DBackpropInput_:function(e,t,n,a,r){nv(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let s=e,i=t,o=!1;4===t.rank&&(o=!0,i=zS(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const l=s[4],c=i.shape[4];nv(5===s.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(s.length,".")),nv(5===i.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)),nv(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)),nv(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")),nv(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],"."));const u={dy:i,filter:n},d={pad:r,strides:a,inputShape:s},h=cN.runKernel(wy,u,d);return o?zS(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const sC=bN({conv3dTranspose_:function(e,t,n,a,r){const s=vN(e,"x","conv3dTranspose"),i=vN(t,"filter","conv3dTranspose");return rC(n,s,i,a,r)}});const iC=bN({denseBincount_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=vN(e,"x","denseBincount"),s=vN(t,"weights","denseBincount");nv("int32"===r.dtype,()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(r.dtype)),nv(r.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(r.rank,".")),nv(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),nv(s.size===r.size||0===s.size,()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(r.shape,", weights shape: ")+"".concat(s.shape,"."));const i={x:r,weights:s},o={size:n,binaryOutput:a};return cN.runKernel(Ey,i,o)}});const oC=bN({depthwiseConv2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const o=vN(e,"x","depthwiseConv2d","float32"),l=vN(t,"filter","depthwiseConv2d","float32");let c=o,u=!1;3===o.rank&&(u=!0,c=zS(o,[1,o.shape[0],o.shape[1],o.shape[2]])),nv(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")),nv(4===l.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."));const d="NHWC"===r?c.shape[3]:c.shape[1];nv(d===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")),LS("depthwiseConv2d",a,i);const h={x:c,filter:l},p={strides:n,pad:a,dataFormat:r,dilations:s,dimRoundingMode:i},f=cN.runKernel(Iy,h,p);return u?zS(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const lC=bN({elu_:function(e){const t={x:vN(e,"x","elu","float32")};return cN.runKernel(zy,t)}});const cC=bN({equal_:function(e,t){let n=vN(e,"a","equal","string_or_numeric"),a=vN(t,"b","equal","string_or_numeric");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(Wy,r)}});const uC=bN({erf_:function(e){let t=vN(e,"x","erf");nv("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=mj(t,"float32"));const n={x:t};return cN.runKernel(Uy,n)}});const dC=bN({exp_:function(e){const t={x:vN(e,"x","exp")};return cN.runKernel(Vy,t)}});const hC=bN({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vN(e,"x","expandDims","string_or_numeric");nv(t<=n.rank,()=>"Axis must be <= rank of the tensor");const a={input:n},r={dim:t};return cN.runKernel(Hy,a,r)}});const pC=bN({tile_:function(e,t){const n=vN(e,"x","tile","string_or_numeric");nv(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,"."));const a={x:n},r={reps:t};return cN.runKernel(Lw,a,r)}});const fC=bN({eye_:function(e,t,n){null==t&&(t=e);const a=fj([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),r=e<=t?e:t;for(let i=0;i<r;++i)a.set(1,i,i);const s=zS(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return pC(hC(s,0),[n[0],1,1]);if(2===n.length)return pC(hC(hC(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return pC(hC(hC(hC(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const mC=bN({floor_:function(e){const t={x:vN(e,"x","floor","float32")};return cN.runKernel(Yy,t)}});const gC=bN({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r={x:vN(e,"x","gather"),indices:vN(t,"indices","gather","int32")},s={axis:n,batchDims:a};return cN.runKernel(Jy,r,s)}});const xC=bN({greater_:function(e,t){let n=vN(e,"a","greater","string_or_numeric"),a=vN(t,"b","greater","string_or_numeric");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(eb,r)}});const vC=bN({greaterEqual_:function(e,t){let n=vN(e,"a","greaterEqual","string_or_numeric"),a=vN(t,"b","greaterEqual","string_or_numeric");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(tb,r)}});const yC=bN({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:vN(e,"x","leakyRelu")},a={alpha:t};return cN.runKernel(lb,n,a)}});const bC=bN({log_:function(e){const t={x:vN(e,"x","log","float32")};return cN.runKernel(hb,t)}});const wC=bN({log1p_:function(e){const t={x:vN(e,"x","log1p")};return cN.runKernel(pb,t)}});const kC=bN({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:vN(e,"x","max")},r={reductionIndices:t,keepDims:n};return cN.runKernel(yb,a,r)}});const NC=bN({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=vN(e,"x","sum");"bool"===a.dtype&&(a=mj(a,"int32"));const r={x:a},s={axis:t,keepDims:n};return cN.runKernel(yw,r,s)}});const jC=bN({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=vN(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const a=jj((e,n)=>{const a=kC(e,t,!0),r=Dj(e,a),s=Dj(mj(r,"float32"),bC(NC(dC(r),t,!0)));n([s]);return{value:s,gradFunc:(e,n)=>{const[a]=n,r=dC(a);return Dj(e,bj(NC(e,t,!0),r))}}});return a(n)}});function SC(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function CC(e,t,n){const a=e.length+t.length,r=[];let s=0,i=0;for(let o=0;o<a;o++)-1===n.indexOf(o)?r.push(e[s++]):r.push(t[i++]);return r}function EC(e,t){const n=[],a=e.length;for(let r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map(t=>e[t])]}function TC(e,t){return CC(e,t.map(e=>1),t)}function IC(e,t,n){nv(SC(t,n),()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input."))}function AC(e,t){if(SC(e,t))return null;const n=[];for(let a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach(e=>n.push(e)),n}function _C(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function OC(e,t){const n=[];for(let a=t-e;a<t;++a)n.push(a);return n}const RC=bN({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=vN(e,"x","logSumExp"),r=hv(t,a.shape),s=kC(a,r,!0),i=Dj(a,s),o=dC(i),l=NC(o,r),c=bC(l),u=xj(zS(s,c.shape),c);if(n){const e=TC(u.shape,r);return zS(u,e)}return u}});const PC=bN({logicalAnd_:function(e,t){const n=vN(e,"a","logicalAnd","bool"),a=vN(t,"b","logicalAnd","bool");Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(fb,r)}});const MC=bN({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=vN(e,"a","matMul"),s=vN(t,"b","matMul");[r,s]=tN(r,s);const i={a:r,b:s},o={transposeA:n,transposeB:a};return cN.runKernel(sy,i,o)}});const DC=bN({maxPool_:function(e,t,n,a,r){const s=vN(e,"x","maxPool");let i=s,o=!1;3===s.rank&&(o=!0,i=zS(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nv(4===i.rank,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")),nv(MS(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")),LS("maxPool",a,r);const l={x:i},c={filterSize:t,strides:n,pad:a,dimRoundingMode:r},u=cN.runKernel(wb,l,c);return o?zS(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const FC=bN({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=vN(e,"x","maxPool3d");let o=i,l=!1;4===i.rank&&(l=!0,o=zS(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),nv(5===o.rank,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),nv("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(s)),LS("maxPool3d",a,r);const c={x:o},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:s},d=cN.runKernel(Nb,c,u);return l?zS(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const LC=bN({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:vN(e,"x","mean")},r={axis:t,keepDims:n};return cN.runKernel(Cb,a,r)}});const zC=bN({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:vN(e,"x","min")},r={axis:t,keepDims:n};return cN.runKernel(Eb,a,r)}});const BC=bN({minimum_:function(e,t){let n=vN(e,"a","minimum"),a=vN(t,"b","minimum");[n,a]=tN(n,a),"bool"===n.dtype&&(n=mj(n,"int32"),a=mj(a,"int32")),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(Tb,r)}});const UC=bN({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=hv(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=vN(e,"x","moments")).shape),a=LC(e,n,t);let r=a.shape;t||(r=TC(a.shape,n));const s=kj(Dj(mj(e,"float32"),zS(a,r)));return{mean:a,variance:LC(s,n,t)}}});const WC=bN({neg_:function(e){const t={x:vN(e,"x","neg")};return cN.runKernel(Rb,t)}});const VC=bN({notEqual_:function(e,t){let n=vN(e,"a","notEqual","string_or_numeric"),a=vN(t,"b","notEqual","string_or_numeric");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(Pb,r)}});const HC=bN({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const s={indices:vN(e,"indices","oneHot","int32")},i={dtype:r,depth:t,onValue:n,offValue:a};return cN.runKernel(zb,s,i)}});function GC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Iv(e),"complex64"===t){const t=GC(e,"float32"),n=GC(e,"float32");return wN(t,n)}const n=Ev(sv(e),t);return cN.makeTensor(n,e,t)}function qC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Iv(e),"complex64"===t){const t=qC(e,"float32"),n=GC(e,"float32");return wN(t,n)}const n=Cv(sv(e),t);return cN.makeTensor(n,e,t)}const KC=bN({onesLike_:function(e){const t={x:vN(e,"x","onesLike")};return cN.runKernel(Lb,t)}});const XC=bN({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=vN(e,"x","pad");if(0===a.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:t,constantValue:n},s={x:a};return cN.runKernel(Ub,s,r)}});const YC=bN({prelu_:function(e,t){const n={x:vN(e,"x","prelu"),alpha:vN(t,"alpha","prelu")};return cN.runKernel(Vb,n)}});var $C=n(4334);class QC{constructor(e,t,n,a,r){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=r||Math.random();this.random=$C.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let a,r,s;do{a=2*this.random()-1,r=2*this.random()-1,s=a*a+r*r}while(s>=1||0===s);const i=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*a*i,t=this.mean+this.stdDev*r*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class JC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"===typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=$C.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const ZC=bN({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(Iv(e),null!=a&&"bool"===a)throw new Error("Unsupported data type ".concat(a));const s=new QC(t,n,a,!1,r),i=fj(e,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}});const eE=bN({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0;Iv(e);const s=fj(e,a),i=new JC(t,n,null,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});function tE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const r={start:e,stop:t,step:n,dtype:a};return cN.runKernel(Xb,{},r)}const nE=bN({relu_:function(e){const t={x:vN(e,"x","relu")};return cN.runKernel(Qb,t)}});const aE=bN({reverse_:function(e,t){const n={x:vN(e,"x","reverse")},a={dims:t};return cN.runKernel(rw,n,a)}});const rE=bN({selu_:function(e){const t={x:vN(e,"x","selu")};return cN.runKernel(dw,t)}});const sE=bN({separableConv2d_:function(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const o=vN(e,"x","separableConv2d"),l=vN(t,"depthwiseFilter","separableConv2d"),c=vN(n,"pointwiseFilter","separableConv2d");let u=o,d=!1;if(3===o.rank&&(d=!0,u=zS(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");nv(4===u.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")),nv(4===l.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),nv(4===c.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),nv(1===c.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")),nv(1===c.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],"."));const h=l.shape[2],p=l.shape[3];nv(c.shape[2]===h*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*p,", ")+"but got ".concat(c.shape[2],"."));const f=oC(u,l,a,r,i,s),m=ZS(f,c,1,"valid",i);return d?zS(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const iE=bN({sigmoid_:function(e){const t={x:vN(e,"x","sigmoid","float32")};return cN.runKernel(gw,t)}});const oE=bN({slice_:function(e,t,n){const a=vN(e,"x","slice","string_or_numeric");if(0===a.rank)throw new Error("Slicing scalar is not possible");const r={x:a},s={begin:t,size:n};return cN.runKernel(hw,r,s)}});const lE=bN({slice1d_:function(e,t,n){const a=vN(e,"x","slice1d");return nv(1===a.rank,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(a.rank," tensor")),oE(a,[t],[n])}});const cE=bN({slice2d_:function(e,t,n){const a=vN(e,"x","slice2d");return nv(2===a.rank,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(a.rank," tensor")),oE(a,t,n)}});const uE=bN({slice3d_:function(e,t,n){const a=vN(e,"x","slice3d");return nv(3===a.rank,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(a.rank," tensor")),oE(a,t,n)}});const dE=bN({slice4d_:function(e,t,n){const a=vN(e,"x","slice4d");return nv(4===a.rank,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(a.rank," tensor")),oE(a,t,n)}});const hE=bN({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=vN(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const a={logits:n},r={dim:t};return cN.runKernel(kw,a,r)}});const pE=bN({softplus_:function(e){const t={x:vN(e,"x","softplus")};return cN.runKernel(xw,t)}});const fE=bN({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a={x:vN(e,"x","split")},r={numOrSizeSplits:t,axis:n};return cN.runKernel(ww,a,r)}});const mE=bN({squeeze_:function(e,t){const n=vN(e,"x","squeeze","string_or_numeric");return zS(n,pv(n.shape,t).newShape)}});const gE=bN({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=yN(e,"tensors","stack","string_or_numeric");nv(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&nv(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const a=n,r={axis:t};return cN.runKernel(Bb,a,r)}});const xE=bN({tanh_:function(e){const t={x:vN(e,"x","tanh","float32")};return cN.runKernel(Fw,t)}});function vE(e,t){rv(e);const n=mN(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return kN(e,null,n,t)}function yE(e,t,n){if(rv(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const a=mN(e,n);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return kN(e,t,a,n)}const bE=bN({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(Iv(e),null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const s=new QC(t,n,a,!0,r),i=fj(e,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}});const wE=bN({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vN(e,"x","unstack","string_or_numeric");nv(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));const a={value:n},r={axis:t};return cN.runKernel(Vw,a,r)}});const kE=bN({where_:function(e,t,n){const a=vN(t,"a","where"),r=vN(n,"b","where"),s=vN(e,"condition","where","bool"),i=Uj(Uj(s.shape,a.shape),r.shape),o={condition:qS(s,i),t:qS(a,i),e:qS(r,i)};return cN.runKernel(uw,o)}});const NE=bN({imag_:function(e){const t={input:vN(e,"input","imag")};return cN.runKernel(rb,t)}});const jE=bN({real_:function(e){const t={input:vN(e,"input","real")};return cN.runKernel(Yb,t)}});const SE=bN({transpose_:function(e,t,n){const a=vN(e,"x","transpose");if(null==t&&(t=a.shape.map((e,t)=>t).reverse()),nv(a.rank===t.length,()=>"Error in transpose: rank of input ".concat(a.rank," ")+"must match length of perm ".concat(t,".")),t.forEach(e=>{nv(e>=0&&e<a.rank,()=>"All entries in 'perm' must be between 0 and ".concat(a.rank-1)+" but got ".concat(t))}),a.rank<=1)return a.clone();const r={x:a},s={perm:t};return"complex64"===a.dtype?EN(()=>{let e=jE(a),t=NE(a);return e=cN.runKernel(Uw,{x:e},s),t=cN.runKernel(Uw,{x:t},s),n&&(t=WC(t)),wN(e,t)}):cN.runKernel(Uw,r,s)}});const CE=bN({dropout_:function(e,t,n,a){const r=vN(e,"x","dropout");if(nv("float32"===r.dtype,()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(r.dtype," tensor instead.")),nv(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),0===t)return e instanceof Wk?r.clone():r;const s=function(e,t){if(null==t)return e.shape.slice();if(iv(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let a=0;a<e.shape.length;a++)null==t[a]&&null!=e.shape[a]?n.push(e.shape[a]):n.push(t[a]);return n}return t}(r,n),i=1-t,o=yj(mC(xj(eE(s,0,1,"float32",a),i)),i);return bj(r,o)}});const EE=bN({fft_:function(e){nv("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return cN.runKernel(qy,t)}});const TE=bN({rfft_:function(e,t){nv("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1];const a=e.size/n;let r;if(null!=t&&t<n){const a=e.shape.map(e=>0),s=e.shape.map(e=>e);s[e.shape.length-1]=t,r=oE(e,a,s),n=t}else if(null!=t&&t>n){const a=e.shape.map(e=>e);a[e.shape.length-1]=t-n,r=XS([e,GC(a)],e.shape.length-1),n=t}else r=e;const s=Nj(r),i=zS(wN(r,s),[a,n]),o=EE(i),l=Math.floor(n/2)+1,c=jE(o),u=NE(o),d=fE(c,[l,n-l],c.shape.length-1),h=fE(u,[l,n-l],u.shape.length-1),p=r.shape.slice();return p[r.shape.length-1]=l,zS(wN(d[0],h[0]),p)}});const IE=bN({ifft_:function(e){nv("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return cN.runKernel(ab,t)}});const AE=bN({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let a;if(t<=2){const r=zS(e,[n,t]);a=IE(r)}else{const r=[n,2*(t-1)],s=zS(jE(e),[n,t]),i=zS(NE(e),[n,t]),o=aE(oE(s,[0,1],[n,t-2]),1),l=bj(aE(oE(i,[0,1],[n,t-2]),1),Sj(-1)),c=XS([s,o],1),u=XS([i,l],1),d=zS(wN(c,u),[r[0],r[1]]);a=IE(d)}if(a=jE(a),3===e.rank&&0!==e.shape[0]){const t=a,n=e.shape[0];a=zS(a,[n,a.shape[0]/n,a.shape[1]]),t.dispose()}return a}});const _E=bN({conv2DBackpropFilter_:function(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=zS(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=zS(t,[1,t.shape[0],t.shape[1],t.shape[2]])),nv(4===o.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(o.shape,".")),nv(4===l.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")),nv(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,"."));const c="NHWC"===s?o.shape[3]:o.shape[1],u="NHWC"===s?l.shape[3]:l.shape[1];nv(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")),nv(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],").")),LS("conv2dDerFilter",r,i);const d={x:o,dy:l},h={strides:a,pad:r,dataFormat:s,dimRoundingMode:i,filterShape:n};return cN.runKernel(xy,d,h)}});const OE=bN({relu6_:function(e){const t={x:vN(e,"x","relu6")};return cN.runKernel(aw,t)}});const RE=bN({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vN(e,"x","step")},a={alpha:t};return cN.runKernel(qw,n,a)}});function PE(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return bj(e,RE(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function ME(e,t){let n=t;const a=Bj(e.shape,t.shape);return a.length>0&&(n=NC(n,a)),zS(n,e.shape)}function DE(e,t,n,a){if("linear"===t)return e;if("relu"===t)return nE(e);if("elu"===t)return lC(e);if("relu6"===t)return OE(e);if("prelu"===t)return YC(e,n);if("leakyrelu"===t)return yC(e,a);if("sigmoid"===t)return iE(e);throw new Error("Unknown fused activation ".concat(t,"."))}const FE=(e,t)=>!(e>0)||"linear"===t;const LE=bN({fusedConv2d_:function(e){let{x:t,filter:n,strides:a,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}=e;if(c=c||"linear",!1===FE(cN.state.gradientDepth,c)){nv("NHWC"===s,()=>"Error in fused conv2d: got dataFormat of ".concat(s," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let e=ZS(t,n,a,r,s,i,o);return null!=l&&(e=xj(e,l)),DE(e,c,u,d)}const h=vN(t,"x","conv2d","float32"),p=vN(n,"filter","conv2d","float32");let f=h,m=!1;3===h.rank&&(m=!0,f=zS(h,[1,h.shape[0],h.shape[1],h.shape[2]])),nv(4===f.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,".")),nv(4===p.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")),LS("fused conv2d",r,o);const g="NHWC"===s?f.shape[3]:f.shape[1];nv(p.shape[2]===g,()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],".")),nv(MS(a,i),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(i,"'"));const x=ES(f.shape,p.shape,a,i,r,o);let v,y;if(null!=l&&(v=vN(l,"bias","fused conv2d"),[v]=tN(v,h),"NHWC"===s?Uj(x.outShape,v.shape):(nv(v.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,".")),nv(0===v.shape.length||v.shape[0]===x.outChannels||1===v.shape[0],()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(x.outChannels,")")))),null!=u){const e=u.shape;if(nv(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,".")),1===e.length)nv(1===e[0]||e[0]===x.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(x.outChannels,")."));else if(3===e.length)try{Uj(e,x.outShape)}catch(jEe){const n="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(x.outShape,").");throw Error(n)}y=vN(u,"prelu weights","fused conv2d")}const b=(e,t)=>{nv("NHWC"===s,()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported."));const[n,o,l,u]=t,d=PE(e,l,c);nv(PS(i),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'"));const h=[tC(o.shape,d,n,a,r),_E(o,d,n.shape,a,r)];if(null!=u){const e=ME(u,d);h.push(e)}return h},w={x:f,filter:p,bias:v,preluActivationWeights:y},k={strides:a,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:c,leakyreluAlpha:d};if(null==l){const e=jj((e,t,n)=>{let a=cN.runKernel($w,w,k);return n([t,e,a]),m&&(a=zS(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}});return e(f,p)}{const e=jj((e,t,n,a)=>{let r=cN.runKernel($w,w,k);return a([t,e,r,n]),m&&(r=zS(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}});return e(f,p,v)}}});const zE=bN({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=zS(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=zS(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:o,dy:l},u={strides:a,pad:r,dimRoundingMode:i,dilations:s,filterShape:n};return cN.runKernel(Ay,c,u)}});const BE=bN({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,o=t,l=!1;3===t.rank&&(l=!0,o=zS(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:o,filter:n},u={strides:a,pad:r,dimRoundingMode:i,dilations:s,inputShape:e},d=cN.runKernel(_y,c,u);return l?zS(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const UE=bN({fusedMatMul_:function(e){let{a:t,b:n,transposeA:a=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:l=.2}=e;if(!1===FE(cN.state.gradientDepth,i)){let e=MC(t,n,a,r);return null!=s&&(e=xj(e,s)),DE(e,i,o,l)}let c=vN(t,"a","fused matMul"),u=vN(n,"b","fused matMul");[c,u]=tN(c,u);const d=a?c.shape[c.rank-2]:c.shape[c.rank-1],h=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=a?c.shape[c.rank-1]:c.shape[c.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=c.shape.slice(0,-2),g=u.shape.slice(0,-2),x=sv(m),v=sv(g);nv(d===h,()=>"Error in fused matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(c.shape," and ")+"".concat(u.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match."));const y=Uj(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),b=zS(c,a?[x,d,p]:[x,p,d]),w=zS(u,r?[v,f,h]:[v,h,f]);let k,N;null!=s&&(k=vN(s,"bias","fused matMul"),[k]=tN(k,c),Uj(y,k.shape)),null!=o&&(N=vN(o,"prelu weights","fused matMul"));const j=(e,t)=>{const[n,o,l,c]=t,u=PE(zS(e,l.shape),l,i);let d,h;if(a||r?!a&&r?(d=MC(u,o,!1,!1),h=MC(u,n,!0,!1)):a&&!r?(d=MC(o,u,!1,!0),h=MC(n,u,!1,!1)):(d=MC(o,u,!0,!0),h=MC(u,n,!0,!0)):(d=MC(u,o,!1,!0),h=MC(n,u,!0,!1)),null!=s){return[d,h,ME(c,u)]}return[d,h]},S={a:b,b:w,bias:k,preluActivationWeights:N},C={transposeA:a,transposeB:r,activation:i,leakyreluAlpha:l};if(null==s){const e=jj((e,t,n)=>{const a=cN.runKernel(Yw,S,C);return n([e,t,a]),{value:zS(a,y),gradFunc:j}});return e(b,w)}{const e=jj((e,t,n,a)=>{const r=cN.runKernel(Yw,S,C);return a([e,t,r,n]),{value:zS(r,y),gradFunc:j}});return e(b,w,k)}}});const WE=bN({cropAndResize_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=vN(e,"image","cropAndResize"),o=vN(t,"boxes","cropAndResize","float32"),l=vN(n,"boxInd","cropAndResize","int32"),c=o.shape[0];nv(4===i.rank,()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")),nv(2===o.rank&&4===o.shape[1],()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(o.shape,".")),nv(1===l.rank&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(o.shape,".")),nv(2===a.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(a.length,".")),nv(a[0]>=1&&a[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(a)),nv("bilinear"===r||"nearest"===r,()=>"method must be bilinear or nearest, but was ".concat(r));const u={image:i,boxes:o,boxInd:l},d={method:r,extrapolationValue:s,cropSize:a};return cN.runKernel(Cy,u,d)}});const VE=bN({flipLeftRight_:function(e){const t=vN(e,"image","flipLeftRight","float32");nv(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,"."));const n={image:t};return cN.runKernel(Xy,n,{})}});const HE=bN({grayscaleToRGB_:function(e){const t=vN(e,"image","grayscaleToRGB"),n=t.rank-1,a=t.shape[n];nv(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),nv(1===a,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(a,"."));const r=new Array(t.rank);return r.fill(1,0,n),r[n]=3,pC(t,r)}});const GE=bN({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const r=n.map((e,t)=>vN(e,"tensors".concat(t),"einsum")),s={equation:e};return cN.runKernel(Ly,r,s)}});const qE=bN({rgbToGrayscale_:function(e){const t=vN(e,"image","RGBToGrayscale"),n=t.rank-1,a=t.shape[n];nv(t.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),nv(3===a,()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(a,"."));const r=t.dtype,s=mj(t,"float32"),i=vE([.2989,.587,.114]);let o;switch(t.rank){case 2:o=GE("ij,j->i",s,i);break;case 3:o=GE("ijk,k->ij",s,i);break;case 4:o=GE("ijkl,l->ijk",s,i);break;case 5:o=GE("ijklm,m->ijkl",s,i);break;case 6:o=GE("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return o=hC(o,-1),mj(o,r)}});const KE=bN({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=vN(e,"image","rotateWithOffset","float32");nv(4===r.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(r.rank,"."));const s={image:r},i={radians:t,fillValue:n,center:a};return cN.runKernel(Xw,s,i)}});function XE(e,t,n,a,r,s){null==a&&(a=.5),null==r&&(r=Number.NEGATIVE_INFINITY),null==s&&(s=0);const i=e.shape[0];return n=Math.min(n,i),nv(0<=a&&a<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(a,"'")),nv(2===e.rank,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),nv(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),nv(1===t.rank,()=>"scores must be a 1D tensor"),nv(t.shape[0]===i,()=>"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])),nv(0<=s&&s<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(s,"'")),{maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:s}}const YE=bN({nonMaxSuppression_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const s=vN(e,"boxes","nonMaxSuppression","float32"),i=vN(t,"scores","nonMaxSuppression","float32"),o=XE(s,i,n,a,r);n=o.maxOutputSize,a=o.iouThreshold,r=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:a,scoreThreshold:r};return cN.runKernel(Mb,{boxes:s,scores:i},l)}});function $E(e,t,n){const a=function(e,t,n){return function(e,t,n){let a=0,r=e.length,s=0,i=!1;for(;a<r;){s=a+(r-a>>>1);const o=n(t,e[s]);o>0?a=s+1:(r=s,i=!o)}return i?a:-a-1}(e,t,n||QE)}(e,t,n),r=a<0?-(a+1):a;e.splice(r,0,t)}function QE(e,t){return e>t?1:e<t?-1:0}function JE(e,t,n,a,r){return tT(e,t,n,a,r,0)}function ZE(e,t,n,a,r,s){return tT(e,t,n,a,r,0,!1,s,!0)}function eT(e,t,n,a,r,s){return tT(e,t,n,a,r,s,!0)}function tT(e,t,n,a,r,s){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let g=0;g<t.length;g++)t[g]>r&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(rT);const u=s>0?-.5/s:0,d=[],h=[];for(;d.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<r)break;let o=!1;for(let l=d.length-1;l>=i;--l){const n=nT(e,s,d[l]);if(n>=a){o=!0;break}if(t.score=t.score*aT(a,u,n),t.score<=r)break}t.suppressBeginIndex=d.length,o||(t.score===n?(d.push(s),h.push(t.score)):t.score>r&&$E(c,t,rT))}const p=d.length,f=n-p;o&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function nT(e,t,n){const a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),s=Math.min(a[0],a[2]),i=Math.min(a[1],a[3]),o=Math.max(a[0],a[2]),l=Math.max(a[1],a[3]),c=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),d=Math.max(r[0],r[2]),h=Math.max(r[1],r[3]),p=(o-s)*(l-i),f=(d-c)*(h-u);if(p<=0||f<=0)return 0;const m=Math.max(s,c),g=Math.max(i,u),x=Math.min(o,d),v=Math.min(l,h),y=Math.max(x-m,0)*Math.max(v-g,0);return y/(p+f-y)}function aT(e,t,n){const a=Math.exp(t*n*n);return n<=e?a:0}function rT(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const sT=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const s=vN(e,"boxes","nonMaxSuppressionAsync"),i=vN(t,"scores","nonMaxSuppressionAsync"),o=XE(s,i,n,a,r);n=o.maxOutputSize,a=o.iouThreshold,r=o.scoreThreshold;const l=await Promise.all([s.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:d}=JE(c,u,n,a,r);return s!==e&&s.dispose(),i!==t&&i.dispose(),vE(d,"int32")};const iT=bN({nonMaxSuppressionWithScore_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=vN(e,"boxes","nonMaxSuppression"),o=vN(t,"scores","nonMaxSuppression"),l=XE(i,o,n,a,r,s);n=l.maxOutputSize,a=l.iouThreshold,r=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:i,scores:o},u={maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:s},d=cN.runKernel(Fb,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}});const oT=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=vN(e,"boxes","nonMaxSuppressionAsync"),o=vN(t,"scores","nonMaxSuppressionAsync"),l=XE(i,o,n,a,r,s);n=l.maxOutputSize,a=l.iouThreshold,r=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([i.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=eT(u,d,n,a,r,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:vE(h,"int32"),selectedScores:vE(p)}};const lT=bN({nonMaxSuppressionPadded_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=vN(e,"boxes","nonMaxSuppression"),o=vN(t,"scores","nonMaxSuppression"),l=XE(i,o,n,a,r,null),c={boxes:i,scores:o},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s},d=cN.runKernel(Db,c,u);return{selectedIndices:d[0],validOutputs:d[1]}}});const cT=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=vN(e,"boxes","nonMaxSuppressionAsync"),o=vN(t,"scores","nonMaxSuppressionAsync"),l=XE(i,o,n,a,r,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([i.data(),o.data()]),{selectedIndices:f,validOutputs:m}=ZE(h,p,c,u,d,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:vE(f,"int32"),validOutputs:Sj(m,"int32")}};const uT=bN({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=vN(e,"images","resizeBilinear");nv(3===r.rank||4===r.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,".")),nv(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")),nv(!1===a||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=r,i=!1;3===r.rank&&(i=!0,s=zS(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,o={images:s},l={alignCorners:n,halfPixelCenters:a,size:t},c=cN.runKernel(tw,o,l);return i?zS(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const dT=bN({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=vN(e,"images","resizeNearestNeighbor");nv(3===r.rank||4===r.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,".")),nv(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")),nv("float32"===r.dtype||"int32"===r.dtype,()=>"`images` must have `int32` or `float32` as dtype"),nv(!1===a||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=r,i=!1;3===r.rank&&(i=!0,s=zS(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,o={images:s},l={alignCorners:n,halfPixelCenters:a,size:t},c=cN.runKernel(Zb,o,l);return i?zS(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const hT=bN({bincount_:function(e,t,n){const a=vN(e,"x","bincount"),r=vN(t,"weights","bincount");nv("int32"===a.dtype,()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(a.dtype)),nv(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),nv(r.size===a.size||0===r.size,()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(a.shape,", weights shape: ")+"".concat(r.shape,"."));const s={x:a,weights:r},i={size:n};return cN.runKernel(oy,s,i)}});const pT=bN({lessEqual_:function(e,t){let n=vN(e,"a","lessEqual","string_or_numeric"),a=vN(t,"b","lessEqual","string_or_numeric");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(ub,r)}});const fT=bN({round_:function(e){const t={x:vN(e,"x","round")};return cN.runKernel(sw,t)}});const mT=bN({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=vN(e,"image","threshold"),s=r.shape[0]*r.shape[1];let i,o,l,c,u=bj(vE([a]),255);if(nv(3===r.rank,()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(r.rank,".")),nv(3===r.shape[2]||1===r.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(r.shape[2],".")),nv("int32"===r.dtype||"float32"===r.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(r.dtype,".")),nv("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was ".concat(t)),3===r.shape[2]){[i,o,l]=fE(r,[1,1,1],-1);const e=bj(i,.2989),t=bj(o,.587),n=bj(l,.114);c=xj(xj(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,a,r,s,i,o,l=vE([-1]),c=vE([0]),u=vE([0]);for(let d=0;d<e.size-1;d++){n=oE(e,0,d+1),a=oE(e,d+1),i=yj(NC(n),t),o=yj(NC(a),t);const h=NC(bj(n,tE(0,n.size)));r=yj(h,NC(n));const p=Rj(a.shape,n.size),f=xj(tE(0,a.size),p),m=bj(a,f);s=yj(NC(m),NC(a));const g=Dj(r,s),x=Dj(r,s),v=bj(i,o);u=bj(bj(v,g),x);const y=xC(u,c);c=kE(y,u,c),l=kE(y,vE([d]),l)}return l}(hT(mj(fT(c),"int32"),NN([]),256),s)}const d=n?pT(c,u):xC(c,u);return mj(bj(d,255),"int32")}});const gT=bN({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;const i=vN(e,"image","transform","float32"),o=vN(t,"transforms","transform","float32");nv(4===i.rank,()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")),nv(2===o.rank&&(o.shape[0]===i.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),nv(null==s||2===s.length,()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(s,"."));const l={image:i,transforms:o},c={interpolation:n,fillMode:a,fillValue:r,outputShape:s};return cN.runKernel(Bw,l,c)}});const xT=bN({less_:function(e,t){let n=vN(e,"a","less","string_or_numeric"),a=vN(t,"b","less","string_or_numeric");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(cb,r)}});const vT=bN({bandPart_:function(e,t,n){const a=vN(e,"a","bandPart");nv(a.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(a.rank,"."));const r=a.shape,[s,i]=a.shape.slice(-2);let o,l;"number"===typeof t?(nv(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),nv(t<=s,()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,").")),o=vN(t<0?s:t,"numLower","bandPart")):(nv("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),o=kE(xT(t,0),s,BC(t,s))),"number"===typeof n?(nv(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),nv(n<=i,()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,").")),l=vN(n<0?i:n,"numUpper","bandPart")):(nv("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=kE(xT(n,0),i,BC(n,i)));const c=zS(tE(0,s,1,"int32"),[-1,1]),u=tE(0,i,1,"int32"),d=Dj(c,u),h=PC(pT(d,o),vC(d,WC(l))),p=GC([s,i],a.dtype);return zS(gE(wE(zS(a,[-1,s,i])).map(e=>kE(h,e,p))),r)}});function yT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Lj(e);if(1!==e.rank&&null===n)return yT(zS(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return NC(Lj(e),n);if(t===1/0)return kC(Lj(e),n);if(t===-1/0)return zC(Lj(e),n);if("euclidean"===t||2===t)return wj(NC(Mj(Lj(e),Sj(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return kC(NC(Lj(e),n[0]),n[1]-1);if(t===1/0)return kC(NC(Lj(e),n[1]),n[0]);if(t===-1/0)return zC(NC(Lj(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return wj(NC(kj(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const bT=bN({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=yT(e=vN(e,"x","norm"),t,n);let s=r.shape;if(a){const t=hv(n,e.shape);s=TC(r.shape,t)}return zS(r,s)}});const wT=bN({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,nv(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)nv(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")"))}else t=!0,e=fE(e,e.shape[0],0).map(e=>mE(e,[0]));nv(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],")."));const n=[],a=e;for(let r=0;r<e.length;++r)n.push(cN.tidy(()=>{let e=a[r];if(r>0)for(let t=0;t<r;++t){const a=bj(NC(bj(n[t],e)),n[t]);e=Dj(e,a)}return yj(e,bT(e,"euclidean"))}));return t?gE(n,0):n}});function kT(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return cN.tidy(()=>{nv(2===e.shape.length,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));const n=e.shape[0],a=e.shape[1];let r=fC(n),s=gj(e);const i=yE([[1]],[1,1]);let o=gj(i);const l=n>=a?a:n;for(let e=0;e<l;++e){const t=s,l=o,c=r;[o,s,r]=cN.tidy(()=>{const t=oE(s,[e,e],[n-e,1]),l=bT(t),c=oE(s,[e,e],[1,1]),u=kE(xC(c,0),yE([[-1]]),yE([[1]])),d=Dj(c,bj(u,l)),h=yj(t,d);o=1===h.shape[0]?gj(i):XS([i,oE(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=WC(yj(MC(u,d),l)),f=oE(s,[e,0],[n-e,a]),m=bj(p,o),g=SE(o);if(0===e)s=Dj(f,MC(m,MC(g,f)));else{const t=Dj(f,MC(m,MC(g,f)));s=XS([oE(s,[0,0],[e,a]),t],0)}const x=SE(m),v=oE(r,[0,e],[n,r.shape[1]-e]);if(0===e)r=Dj(v,MC(MC(v,o),x));else{const t=Dj(v,MC(MC(v,o),x));r=XS([oE(r,[0,0],[n,e]),t],1)}return[o,s,r]}),TN([t,l,c])}return!t&&n>a&&(r=oE(r,[0,0],[n,a]),s=oE(s,[0,0],[a,a])),[r,s]})}const NT=bN({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(nv(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),2===e.rank)return kT(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),a=wE(zS(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),r=[],s=[];a.forEach(e=>{const[n,a]=kT(e,t);r.push(n),s.push(a)});return[zS(gE(r,0),e.shape),zS(gE(s,0),e.shape)]}}});var jT;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(jT||(jT={}));const ST=bN({squaredDifference_:function(e,t){let n=vN(e,"a","squaredDifference"),a=vN(t,"b","squaredDifference");[n,a]=tN(n,a),Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(Tw,r,{})}});const CT={flipLeftRight:VE,grayscaleToRGB:HE,resizeNearestNeighbor:dT,resizeBilinear:uT,rgbToGrayscale:qE,rotateWithOffset:KE,cropAndResize:WE,nonMaxSuppression:YE,nonMaxSuppressionAsync:sT,nonMaxSuppressionWithScore:iT,nonMaxSuppressionWithScoreAsync:oT,nonMaxSuppressionPadded:lT,nonMaxSuppressionPaddedAsync:cT,threshold:mT,transform:gT},ET={bandPart:vT,gramSchmidt:wT,qr:NT};const TT=class{static sgd(e){return new Hj(e)}static momentum(e,t){return new Gj(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new qj(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new Fj(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new Oj(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new Vj(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new Pj(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},IT="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function AT(){return new Promise(e=>IT(()=>e()))}function _T(e,t){const n=e[0].length;e.forEach((e,t)=>{nv(e.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")"))}),nv(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));const a=e[0];e.forEach((e,r)=>{for(let s=0;s<n;s++)nv(s===t||e[s]===a[s],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(r,"."))})}function OT(e,t){const n=e[0].slice();for(let a=1;a<e.length;a++)n[t]+=e[a][t];return n}var RT;function PT(e,t,n){let a=new Array;if(null==n&&null==t)return a;if(null==t)for(;a.length<e+n.length;)a.push(-1);else a=t.slice();if(null==n)return a;if(e+n.length!==a.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(a.length));for(let r=1;r<n.length;++r){const s=n[r],i=a[a.length-n.length+r],o=a[i];if(s>=0)if(o>=0){if(o!==s)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(r+e,"] = ").concat(s," but shape[").concat(r+e,"] = ").concat(o))}else a[i]=s}return a}function MT(e){const t={FIRST_DIM_SIZE:RT.FIRST_DIM_SIZE,VALUE_ROWIDS:RT.VALUE_ROWIDS,ROW_LENGTHS:RT.ROW_LENGTHS,ROW_SPLITS:RT.ROW_SPLITS,ROW_LIMITS:RT.ROW_LIMITS,ROW_STARTS:RT.ROW_STARTS},n=[];for(const a of e){if(!(a in t))break;n.push(t[a])}return n}function DT(e){return 0===e.length?0:e[0]===RT.FIRST_DIM_SIZE?e.length-1:e.length}function FT(e,t){if(null==e||null==t)return;const n=e.length,a=t.length;if(n>=a)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(a,")"));for(let r=0;r<Math.min(n,a-1);++r){const n=e[r],a=t[r+1];if(n>=0&&a>=0&&1!==n&&n!==a)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(r-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(r-e.length,"] = ").concat(a))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(RT||(RT={}));const LT=30;function zT(e){return e<=LT?e:kv(e,Math.floor(Math.sqrt(e)))}function BT(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function UT(e,t,n){let a=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function WT(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let a=t+1;a<e;++a)a<=2*t?(n.push(a),n.push(a-(t+1))):n.push(a)}else{const a=[],r=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?r.push(n):a.push(n);n.push(...a),n.push(0),n.push(...r)}return n}function VT(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(let s=1;s<e.length;++s)s<=t.length?a?r.push(t[s-1]*e[s]):r.push(e[s]/t[s-1]):r.push(e[s]);return r}function HT(e,t){const n=[0];for(let a=0;a<t;++a)n.push(e[a][0]);return n}function GT(e,t,n){const a=e.slice(0,1);for(let r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}function qT(e,t){const n=e.shape.length,a=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(a<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(a,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[a-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[a-1]," vs. ").concat(n));if(0===sv(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const r=t.shape,s=r[r.length-1];let i=1;for(let d=0;d<r.length-1;++d)i*=r[d];const o=e.shape,l=r.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=o[d],l.push(o[d]);const u=[...Nv(e.shape).map(e=>e/c),1].slice(0,s);return[l,i,c,u]}function KT(e,t,n){const a=t.rank>1?t.shape[t.rank-1]:1,r=t.rank>1?t.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(a,", and batchDim: ").concat(r,".");if(n.rank<r)throw new Error(s+" update.rank < ".concat(r,". "));if(e.length<a+(n.rank-r))throw new Error(s+" Output shape length < ".concat(a+(n.rank-r)));if(n.rank!==r+e.length-a)throw new Error(s+" update.rank != ".concat(r+e.length-a));for(let i=0;i<r;++i)if(n.shape[i]!==t.shape[i])throw new Error(s+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(let i=0;i<n.rank-r;++i)if(n.shape[i+r]!==e[i+a])throw new Error(s+" updates.shape[".concat(i+r,"] (").concat(n.shape[i+r],") != shape[").concat(i+r,"] (").concat(e[i+r],")"))}function XT(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}KT(n,t,e)}function YT(e,t,n){const a=t.shape.length,r=a>1?t.shape[a-1]:1,s=n.length;let i=1;for(let l=r;l<s;++l)i*=n[l];const o=r<1?1:r;return{sliceRank:r,numUpdates:sv(t.shape)/o,sliceSize:i,strides:[...Nv(n.slice(0,r)),1],outputSize:sv(n)}}const $T=1.7580993408473768,QT=1.0507009873554805,JT=.3275911,ZT=.254829592,eI=-.284496736,tI=1.421413741,nI=-1.453152027,aI=1.061405429;function rI(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function sI(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}function iI(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=0;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function oI(e){const t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=2;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function lI(e,t){return{real:e[2*t],imag:e[2*t+1]}}function cI(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function uI(e,t){const n=new Float32Array(e/2),a=new Float32Array(e/2);for(let r=0;r<Math.ceil(e/2);r++){const s=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(s),a[r]=Math.sin(s)}return{real:n,imag:a}}function dI(e,t,n){const a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}const hI="->",pI=/->/g,fI=",",mI="...";function gI(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(pI,"").length)/hI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(hI,'").'));const[a,r]=e.split(hI);nv(-1===a.indexOf(mI),()=>'The ellipsis notation ("'.concat(mI,'") is not supported yet.'));const s=a.split(fI),i=s.length;if(t!==i)throw new Error("Expected ".concat(i," input tensors, received ").concat(t));if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<r.length;++d){const e=r[d];if(!s.some(t=>-1!==t.indexOf(e)))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===o.indexOf(e)&&o.push(e)}for(let d=0;d<a.length;++d){const e=a[d];-1===o.indexOf(e)&&e!==fI&&o.push(e)}const l=new Array(s.length);for(let d=0;d<i;++d){if(new Set(s[d].split("")).size!==s[d].length)throw new Error("Found duplicate axes in input component ".concat(s[d],". ")+"Support for duplicate axes in input is not implemented yet.");l[d]=[];for(let e=0;e<s[d].length;++e)l[d].push(o.indexOf(s[d][e]))}const c=o.length,u=[];for(let d=r.length;d<c;++d)u.push(d);return{allDims:o,summedDims:u,idDims:l}}function xI(e,t){let n=new Array(e);n.fill(-1);for(let r=0;r<t.length;++r)n[t[r]]=r;const a=[];for(let r=0;r<e;++r)-1===n[r]&&a.push(r);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:a}}function vI(e,t,n){const a=new Array(e);for(let r=0;r<n.length;++r){const e=n[r].shape;for(let n=0;n<t[r].length;++n)void 0===a[t[r][n]]?a[t[r][n]]=e[n]:nv(a[t[r][n]]===e[n],()=>"Expected dimension ".concat(a[t[r][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n]))}}function yI(e,t){const n=e,a=[];let r=0;0===e.length&&n.push(-1),r=e.length+1;for(let i=0;i<r;++i)a.push([]);const s=[];for(let i=0;i<n.length;++i){const e=wI(t,n[i]);for(const t of e)-1===s.indexOf(t)&&(a[i].push(t),s.push(t))}return{path:n,steps:a}}function bI(e){return e.every((e,t)=>e===t)}function wI(e,t){const n=[];for(let a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function kI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof t)nv(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),a=new Array(t).fill(e.shape[n]/t);else{const r=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);nv(r<=1,()=>"There should be only one negative value in split array.");const s=t.indexOf(-1);if(-1!==s){const a=t.reduce((e,t)=>t>0?e+t:e);t[s]=e.shape[n]-a}nv(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),a=t}return a}function NI(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function jI(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function SI(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function CI(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function EI(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function TI(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function II(e,t){const n=sv(e),a=sv(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(e," outputShape= ").concat(t)}function AI(e,t){const n=sv(e),a=sv(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(e," outputShape=").concat(t)}function _I(){return"segment ids must be >= 0"}function OI(){return"segment ids are not increasing"}function RI(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function PI(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function MI(e,t){let n,a=!1;for(e<=LT?(n=e,a=!0):n=kv(e,Math.floor(Math.sqrt(e)));!a;)n>t||n===e?a=!0:n=kv(e,n+1);return n}function DI(e,t,n){const a=[],r=e.length;for(let s=0;s<r;s++)s!==t?a.push(e[s]):a.push(n);return a}function FI(e,t,n,a){const r=t.shape.length,s=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error("Expect batchDims in the range of [-".concat(r,", ").concat(r,"], but got ").concat(a));if(a<0&&(a+=r),a>s)throw new Error("batchDims (".concat(a,") must be less than rank(x) (\n    ").concat(s,")."));if(n<a)throw new Error("batchDims (".concat(a,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<a;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));const i=e.shape[n],o=[];let l=1,c=1,u=1;for(let d=0;d<a;++d)o.push(e.shape[d]),l*=e.shape[d];for(let d=a;d<n;d++)o.push(e.shape[d]),c*=e.shape[d];for(let d=a;d<r;d++)o.push(t.shape[d]);for(let d=n+1;d<s;d++)o.push(e.shape[d]),u*=e.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:o}}function LI(e){try{return e.map(e=>Ek(e))}catch(CEe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(CEe))}}function zI(e){return e.map(e=>Ck(e))}function BI(e,t){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);const a=fj(e,"int32"),r=fj([n.length,e.length],"int32");for(let s=0;s<n.length;s++){const t=a.indexToLoc(n[s]),i=s*e.length;r.values.set(t,i)}return r.toTensor()}!function(){for(const e of Kj)Aj(e)}();const UI={kernelName:Uv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,RE(mj(n,"float32"),-1))}}},WI={kernelName:Wv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=kj(mj(n,"float32")),a=wj(Dj(Sj(1),t));return WC(yj(e,a))}}}},VI={kernelName:Vv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=wj(Dj(kj(mj(n,"float32")),1));return yj(e,t)}}}},HI={kernelName:Hv,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{let t=e;const a=Bj(n.shape,r);return a.length>0&&(t=NC(t,a)),zS(t,n.shape)},b:()=>{let t=e;const n=Bj(a.shape,r);return n.length>0&&(t=NC(t,n)),zS(t,a.shape)}}}},GI={kernelName:Gv,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,a)=>{n[a]=()=>e.clone()}),n}},qI={kernelName:Xv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nj(n)}}},KI={kernelName:Yv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nj(n)}}},XI={kernelName:$v,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,wj(Dj(Sj(1),kj(mj(n,"float32")))))}}},YI={kernelName:Qv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=wj(xj(Sj(1),kj(mj(n,"float32"))));return yj(e,t)}}}},$I={kernelName:ey,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{const t=xj(kj(n),kj(a));let s=bj(e,yj(a,t));const i=Bj(n.shape,r);return i.length>0&&(s=NC(s,i)),zS(s,n.shape)},b:()=>{const t=xj(kj(n),kj(a));let s=WC(bj(e,yj(n,t)));const i=Bj(a.shape,r);return i.length>0&&(s=NC(s,i)),zS(s,a.shape)}}}},QI={kernelName:Jv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,xj(kj(mj(n,"float32")),1))}}},JI={kernelName:Zv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,Dj(Sj(1),kj(mj(n,"float32"))))}}};const ZI=bN({avgPool3dGrad_:function(e,t,n,a,r,s){const i=vN(e,"dy","avgPool3dGrad"),o=vN(t,"input","avgPool3dGrad");let l=i,c=o,u=!1;4===o.rank&&(u=!0,l=zS(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=zS(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),nv(5===l.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")),nv(5===c.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")),LS("avgPool3dGrad",r,s);const d={dy:l,input:c},h={filterSize:n,strides:a,pad:r,dimRoundingMode:s},p=cN.runKernel(ry,d,h);return u?zS(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),eA={kernelName:ay,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{filterSize:r,strides:s,pad:i,dimRoundingMode:o}=n;return{x:()=>ZI(e,a,r,s,i,o)}}};const tA=bN({avgPoolGrad_:function(e,t,n,a,r){const s=vN(e,"dy","avgPoolGrad"),i=vN(t,"input","avgPoolGrad");nv(i.rank===s.rank,()=>"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(s.rank,")"));let o=i,l=s,c=!1;3===i.rank&&(c=!0,o=zS(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=zS(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nv(4===l.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")),nv(4===o.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(o.rank,"."));const u={dy:l,input:o},d={filterSize:n,strides:a,pad:r},h=cN.runKernel(ny,u,d);return c?zS(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),nA={kernelName:ty,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{filterSize:r,strides:s,pad:i}=n;return{x:()=>tA(e,a,r,s,i)}}},aA={kernelName:sy,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[a,r]=t,{transposeA:s,transposeB:i}=n;return s||i?!s&&i?{a:()=>MC(e,r,!1,!1),b:()=>MC(e,a,!0,!1)}:s&&!i?{a:()=>MC(r,e,!1,!0),b:()=>MC(a,e,!1,!1)}:{a:()=>MC(r,e,!0,!0),b:()=>MC(e,a,!0,!0)}:{a:()=>MC(e,r,!1,!0),b:()=>MC(a,e,!0,!1)}}};const rA=bN({spaceToBatchND_:function(e,t,n){const a=vN(e,"x","spaceToBatchND");nv(a.rank>=1+t.length,()=>"input rank ".concat(a.rank," should be > than [blockShape] ").concat(t.length)),nv(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),nv(a.shape.reduce((e,a,r)=>r>0&&r<=t.length?e&&(a+n[r-1][0]+n[r-1][1])%t[r-1]===0:e,!0),()=>"input spatial dimensions ".concat(a.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));const r={x:a},s={blockShape:t,paddings:n};return cN.runKernel(bw,r,s)}}),sA={kernelName:iy,gradFunc:(e,t,n)=>{const{blockShape:a,crops:r}=n;return{x:()=>rA(e,a,r)}}},iA={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const a=n,r=a.inputShape,s=a.shape,i=Array.from(s);for(let l=r.length-1;l>=0;l--)if(r[l]===s[l])i[l]=1;else if(1!==r[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(s,"]."));const o=[];for(let l=0;l<i.length;l++)i[l]>1&&o.push(l);return{x:()=>NC(e,o,!0)}}},oA={kernelName:uy,gradFunc:e=>({x:()=>e.clone()})},lA={kernelName:dy,gradFunc:e=>({x:()=>Nj(e)})},cA={kernelName:hy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{clipValueMin:r,clipValueMax:s}=n;return{x:()=>kE(PC(vC(a,r),pT(a,s)),e,Nj(e))}}},uA={kernelName:fy,inputsToSave:["x"],gradFunc:UI.gradFunc},dA={kernelName:my,saveAllInputs:!0,gradFunc:(e,t,n)=>{const a=t.map(e=>e.shape),{axis:r}=n,s=hv(r,t[0].shape)[0],i=a.map(e=>e[s]);return fE(e,i,s).map(e=>()=>e)}},hA={kernelName:gy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,{dilations:s,strides:i,pad:o,dataFormat:l}=n;return nv(PS(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'")),{x:()=>tC(a.shape,e,r,i,o,l),filter:()=>_E(a,e,r.shape,i,o,l)}}},pA={kernelName:vy,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,{strides:s,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>ZS(e,r,s,i,o,1,l),filter:()=>_E(e,a,r.shape,s,i,o,l)}}};const fA=bN({conv3DBackpropFilter_:function(e,t,n,a,r){let s=e;4===e.rank&&(s=zS(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=zS(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),nv(5===s.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(s.shape,".")),nv(5===i.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")),nv(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")),nv(s.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(s.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")),nv(i.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],")."));const o={x:s,dy:i},l={strides:a,pad:r,filterShape:n};return cN.runKernel(by,o,l)}}),mA={kernelName:yy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:a,strides:r,pad:s}=n;nv(PS(a),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(a,"'"));const[i,o]=t;return{x:()=>rC(i.shape,e,o,r,s),filter:()=>fA(i,e,o.shape,r,s)}}};const gA=bN({sin_:function(e){const t={x:vN(e,"x","sin","float32")};return cN.runKernel(pw,t)}}),xA={kernelName:ky,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(WC(gA(mj(n,"float32"))),e)}}};const vA=bN({sinh_:function(e){const t={x:vN(e,"x","sinh")};return cN.runKernel(fw,t)}}),yA={kernelName:Ny,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(vA(mj(n,"float32")),e)}}};const bA=bN({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={x:vN(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:a};return cN.runKernel(Sy,r,s)}}),wA={kernelName:Sy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r,exclusive:s,reverse:i}=n;return{x:()=>{const t=AC([r],a.rank);let n=bA(e,r,s,!i);return null!=t&&(n=SE(n,t)),n}}}},kA={kernelName:Iy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:a,strides:r,pad:s,dimRoundingMode:i}=n,o=null==a?[1,1]:a;nv(PS(o),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(o,"'"));const[l,c]=t;return nv(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")),nv(4===c.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")),nv(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")),nv(MS(r,o),()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(r," and dilations ")+"'".concat(o,"'.")),LS("depthwiseConv2d",s,i),{x:()=>BE(l.shape,e,c,r,s,o,i),filter:()=>zE(l,e,c.shape,r,s,o,i)}}},NA={kernelName:Ry,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,s={x:a,filter:r,dy:e},i={x:a,filter:r,dy:e};return{x:()=>cN.runKernel(Py,s,n),filter:()=>cN.runKernel(My,i,n)}}},jA={kernelName:zy,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,a={dy:e,y:n};return{x:()=>cN.runKernel(By,a)}}},SA={kernelName:Uy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=bj(dC(WC(kj(n))),2/Math.sqrt(Math.PI));return{x:()=>bj(e,a)}}},CA={kernelName:Vy,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,n)}}},EA={kernelName:Hy,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>zS(e,n.shape)}}},TA={kernelName:Gy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,dC(n))}}},IA={kernelName:Yy,gradFunc:e=>({x:()=>Nj(e)})},AA={kernelName:$y,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{const t=yj(e,mj(a,"float32")),s=Bj(n.shape,r);return s.length>0?zS(NC(t,s),n.shape):t},b:()=>{let t=bj(e,mj(n,"float32"));const s=Bj(a.shape,r);s.length>0&&(t=zS(NC(t,s),a.shape));const i=kj(a);return WC(yj(t,mj(i,"float32")))}}}};const _A=bN({rsqrt_:function(e){const t={x:vN(e,"x","rsqrt","float32")};return cN.runKernel(iw,t)}}),OA={kernelName:Qy,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:a}=n,[r,s,i,o]=t,l=null==o?Sj(1):o,c=Bj(s.shape,r.shape),u=[];if(1===s.rank){for(let e=0;e<r.shape.length-1;++e)u.push(r.shape[e]);u.push(1)}const d=Dj(r,s),h=bj(e,l),p=_A(xj(i,Sj(a))),f=bj(bj(bj(p,p),p),Sj(-.5));return{x:()=>1===s.rank?zS(bj(bj(e,pC(zS(p,[1,1,1,s.shape[0]]),u)),l),r.shape):zS(bj(bj(e,p),l),r.shape),mean:()=>{let e=bj(bj(p,Sj(-1)),h);return 1===s.rank&&(e=NC(e,c)),zS(e,s.shape)},variance:()=>{let e=bj(bj(f,d),h);return 1===s.rank&&(e=NC(e,c)),zS(e,s.shape)},scale:()=>{const t=bj(d,p);let n=bj(e,t);return 1===s.rank&&(n=NC(n,c)),zS(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=NC(t,c)),zS(t,s.shape)}}}};const RA=bN({unsortedSegmentSum_:function(e,t,n){const a=vN(e,"x","unsortedSegmentSum"),r=vN(t,"segmentIds","unsortedSegmentSum","int32");nv(ov(n),()=>"numSegments must be of dtype int");const s={x:a,segmentIds:r},i={numSegments:n};return cN.runKernel(Hw,s,i)}}),PA={kernelName:Jy,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[a,r]=t,{axis:s,batchDims:i}=n,o=hv(s,a.shape)[0],l=(e,t,n)=>()=>{const a=e.shape,r=t.size,i=a.slice(0,o),l=i.length,c=a.slice(s,a.length).slice(1),u=c.length,d=MA(0,l),h=MA(l+1,l+1+u),p=DA([i,[r],c]),f=zS(n,p),m=zS(t,[r]),g=DA([[l],d,h]),x=SE(f,g);let v=RA(x,m,e.shape[o]);const y=_C(g);return v=SE(v,y),v};if(1===i){const t=a.shape[0],n=a.split(t,0),s=()=>{const t=gE(n.map((t,n)=>l(t,r.slice(n,1),e.slice(n,1))()));return t.reshape(a.shape)};return{x:s,indices:()=>r}}return{x:l(a,r,e),indices:()=>r}}};function MA(e,t){const n=[];for(let a=e;a<t;++a)n.push(a);return n}function DA(e){const t=[];for(let n=0;n<e.length;++n)for(let a=0;a<e[n].length;++a)t.push(e[n][a]);return t}const FA={kernelName:tb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>Nj(n),b:()=>Nj(a)}}},LA={kernelName:nb,gradFunc:e=>({x:()=>mj(e,"float32")})},zA={kernelName:sb,gradFunc:e=>({x:()=>Nj(e)})},BA={kernelName:ib,gradFunc:e=>({x:()=>Nj(e)})},UA={kernelName:ob,gradFunc:e=>({x:()=>Nj(e)})},WA={kernelName:lb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{alpha:r}=n,s=xC(a,0);return{x:()=>kE(s,e,bj(e,r))}}},VA={kernelName:pb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,xj(n,1))}}},HA={kernelName:hb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,mj(n,"float32"))}}},GA={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n;return{logits:()=>{const t=dC(a);return Dj(e,bj(NC(e,r,!0),t))}}}};const qA=bN({localResponseNormalizationBackprop_:function(e,t,n){const a={x:e,y:t,dy:n},r={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return cN.runKernel(vb,a,r)}}),KA={kernelName:xb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{depthRadius:s,bias:i,alpha:o,beta:l}=n;return{x:()=>qA(a,r,e,s,i,o,l)}}};function XA(e,t,n,a){return t.rank<n.rank&&(t=zS(t,TC(t.shape,a))),e.rank<n.rank&&(e=zS(e,TC(e.shape,a))),{x:()=>bj(e,mj(cC(n,t),e.dtype))}}const YA={kernelName:yb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const a=n,{reductionIndices:r}=a,s=t[0],i=XA(e,t[1],s,hv(r,s.shape));return{x:()=>i.x()}}},$A={kernelName:bb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>bj(e,mj(vC(n,a),"float32")),b:()=>bj(e,mj(xT(n,a),"float32"))}}};const QA=bN({maxPool3dGrad_:function(e,t,n,a,r,s,i){const o=vN(e,"dy","maxPool3dGrad"),l=vN(t,"input","maxPool3dGrad"),c=vN(n,"output","maxPool3dGrad");let u=o,d=l,h=c,p=!1;4===l.rank&&(p=!0,u=zS(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=zS(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=zS(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),nv(5===u.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")),nv(5===d.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")),nv(5===h.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")),LS("maxPool3dGrad",s,i);const f={dy:u,input:d,output:h},m={filterSize:a,strides:r,pad:s,dimRoundingMode:i},g=cN.runKernel(jb,f,m);return p?zS(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),JA={kernelName:Nb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>QA(e,a,r,s,i,o,l)}}};const ZA=bN({maxPoolGrad_:function(e,t,n,a,r,s,i){const o=vN(e,"dy","maxPoolGrad"),l=vN(t,"input","maxPoolGrad"),c=vN(n,"output","maxPoolGrad");nv(l.rank===o.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(o.rank,")")),nv(4===o.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(o.rank,".")),nv(4===l.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")),LS("maxPoolGrad",s,i);const u={dy:o,input:l,output:c},d={filterSize:a,strides:r,pad:s,dimRoundingMode:i};return cN.runKernel(kb,u,d)}}),e_={kernelName:wb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{filterSize:s,strides:i,pad:o}=n;return{x:()=>ZA(e,a,r,s,i,o)}}},t_={kernelName:Cb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n,s=hv(r,a.shape),i=sv(EC(a.shape,s)[1]);return{x:()=>{const t=a.shape.slice();s.forEach(e=>{t[e]=1});const n=zS(e,t);return yj(bj(n,qC(a.shape,"float32")),i)}}}},n_={kernelName:Eb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const a=n,{axis:r}=a,[s,i]=t,o=XA(e,i,s,hv(r,s.shape));return{x:()=>o.x()}}},a_={kernelName:Tb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>bj(e,mj(pT(n,a),"float32")),b:()=>bj(e,mj(xC(n,a),"float32"))}}},r_={kernelName:Ib,inputsToSave:["x"],gradFunc:(e,t,n)=>{const a=t[0],{paddings:r}=n,s=r.map(e=>e[0]);return{x:()=>oE(e,s,a.shape)}}},s_={kernelName:Ab,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{const t=Bj(n.shape,r);return t.length>0?zS(NC(e,t),n.shape):e},b:()=>{const t=bj(e,WC(mC(yj(n,a)))),s=Bj(a.shape,r);return s.length>0?zS(NC(t,s),a.shape):t}}}},i_={kernelName:Ob,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{const t=bj(e,mj(a,"float32")),s=Bj(n.shape,r);return s.length>0?zS(NC(t,s),n.shape):t},b:()=>{const t=bj(e,mj(n,"float32")),s=Bj(a.shape,r);return s.length>0?zS(NC(t,s),a.shape):t}}}},o_={kernelName:Rb,gradFunc:e=>({x:()=>WC(e)})},l_={kernelName:zb,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>GC(n.shape,"float32")}}},c_={kernelName:Lb,gradFunc:e=>({x:()=>Nj(e)})},u_={kernelName:Bb,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:a}=n;return wE(e,a).map(e=>()=>e)}},d_={kernelName:Ub,inputsToSave:["x"],gradFunc:(e,t,n)=>{const a=t[0],{paddings:r}=n,s=r.map(e=>e[0]);return{x:()=>oE(e,s,a.shape)}}},h_={kernelName:Wb,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,a,r]=t,s=n,i=a,o=Uj(s.shape,i.shape);return{a:()=>{const t=mj(i,"float32");let n=bj(e,bj(t,Mj(s,Dj(t,Sj(1)))));const a=Bj(s.shape,o);return a.length>0&&(n=NC(n,a)),zS(n,s.shape)},b:()=>{const t=xC(s,0),n=kE(t,bC(s),Nj(s));let a=bj(e,bj(r,n));const l=Bj(i.shape,o);return l.length>0&&(a=NC(a,l)),zS(a,i.shape)}}}},p_={kernelName:Vb,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,a]=t,r=xC(n,0);return{x:()=>kE(r,e,bj(e,a)),alpha:()=>{let t=kE(r,Nj(e),bj(e,n));const s=Bj(a.shape,e.shape);return s.length>0&&(t=NC(t,s)),zS(t,a.shape)}}}};const f_=bN({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={x:vN(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:a};return cN.runKernel(jy,r,s)}});function m_(e,t,n){const a=e.shape.length,r=a-n.length,s=AC(n,a);let i=e;null!=s&&(i=SE(e,s));const o=i.shape.slice(),l=o.splice(a-n.length,n.length).reduce((e,t)=>e*t,1);o.push(l);let c=function(e,t,n){const a=e.shape.slice();a[n]=1;const r=zS(t,a),s=f_(e,n,!0,!1),i=f_(e,n,!0,!0),o=bj(s,i);return bj(r,o)}(i.reshape(o),t,r);if(c=c.reshape(i.shape),null!=s){const e=_C(s);c=SE(c,e)}return c}const g_={kernelName:Hb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n;let s=[];return s=void 0===r||null===r?a.shape.map((e,t)=>t):"number"===typeof r?[r]:r,{x:()=>m_(a,e,s)}}},x_={kernelName:Fy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{const t=yj(e,mj(a,"float32")),s=Bj(n.shape,r);return s.length>0?zS(NC(t,s),n.shape):t},b:()=>{let t=bj(e,mj(n,"float32"));const s=Bj(a.shape,r);s.length>0&&(t=zS(NC(t,s),a.shape));const i=kj(a);return WC(yj(t,mj(i,"float32")))}}}},v_={kernelName:$b,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,WC(kj(n)))}}},y_={kernelName:aw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=bj(pT(n,6),RE(n));return{x:()=>bj(e,mj(a,"float32"))}}},b_={kernelName:Qb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,mj(RE(n),"float32"))}}},w_={kernelName:Jb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>zS(e,n.shape)}}},k_={kernelName:tw,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[a]=t,r={dy:e,images:a};return{images:()=>cN.runKernel(nw,r,n)}}},N_={kernelName:Zb,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[a]=t,r={dy:e,images:a};return{images:()=>cN.runKernel(ew,r,n)}}},j_={kernelName:rw,gradFunc:(e,t,n)=>{const{dims:a}=n,r=hv(a,e.shape);return{x:()=>aE(e,r)}}},S_={kernelName:sw,gradFunc:e=>({x:()=>Nj(e)})},C_={kernelName:iw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>WC(yj(e,bj(Mj(n,1.5),2)))}}};const E_=bN({logicalNot_:function(e){const t={x:vN(e,"x","logicalNot","bool")};return cN.runKernel(mb,t)}}),T_={kernelName:uw,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>mj(Nj(n),"float32"),t:()=>bj(e,mj(n,e.dtype)),e:()=>bj(e,mj(E_(n),e.dtype))}}},I_={kernelName:dw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=xC(n,Sj(0)),a=Sj($T),r=Sj(QT),s=bj(e,r),i=bj(bj(e,a),dC(mj(n,"float32")));return kE(t,s,i)}}}},A_={kernelName:gw,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,bj(n,Dj(Sj(1),n)))}}},__={kernelName:mw,gradFunc:e=>({x:()=>Nj(e)})};const O_=bN({cos_:function(e){const t={x:vN(e,"x","cos","float32")};return cN.runKernel(ky,t)}}),R_={kernelName:pw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(O_(mj(n,"float32")),e)}}};const P_=bN({cosh_:function(e){const t={x:vN(e,"x","cosh","float32")};return cN.runKernel(Ny,t)}}),M_={kernelName:fw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(P_(mj(n,"float32")),e)}}},D_={kernelName:hw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{begin:r,size:s}=n,i=a.shape,[o,l]=vS(a,r,s),c=[];for(let u=0;u<e.rank;u++)c.push([o[u],i[u]-o[u]-l[u]]);return{x:()=>XC(e,c)}}},F_={kernelName:kw,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a]=t,{dim:r}=n,s=bj(e,a);return{logits:()=>Dj(s,bj(NC(s,[r],true),a))}}},L_={kernelName:xw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,iE(n))}}};const z_=bN({batchToSpaceND_:function(e,t,n){const a=vN(e,"x","batchToSpaceND"),r=t.reduce((e,t)=>e*t);nv(a.rank>=1+t.length,()=>"input rank is ".concat(a.rank," but should be > than blockShape.length ").concat(t.length)),nv(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),nv(a.shape[0]%r===0,()=>"input tensor batch is ".concat(a.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(r));const s={x:a},i={blockShape:t,crops:n};return cN.runKernel(iy,s,i)}}),B_={kernelName:bw,gradFunc:(e,t,n)=>{const{blockShape:a,paddings:r}=n;return{x:()=>z_(e,a,r)}}},U_={kernelName:ww,gradFunc:(e,t,n)=>{const{axis:a}=n;return{x:()=>XS(e,a)}}},W_={kernelName:Tw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Sj(2);return{a:()=>bj(e,bj(r,Dj(n,a))),b:()=>bj(e,bj(r,Dj(a,n)))}}},V_={kernelName:Mw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=Uj(n.shape,a.shape);return{a:()=>{let t=e;const a=Bj(n.shape,r);return a.length>0&&(t=NC(t,a)),zS(t,n.shape)},b:()=>{let t=e;const n=Bj(a.shape,r);return n.length>0&&(t=NC(t,n)),zS(WC(t),a.shape)}}}},H_={kernelName:Lw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{reps:r}=n;return{x:()=>{let t=Nj(a);if(1===a.rank)for(let n=0;n<r[0];++n)t=xj(t,oE(e,[n*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(let n=0;n<r[0];++n)for(let s=0;s<r[1];++s)t=xj(t,oE(e,[n*a.shape[0],s*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(let n=0;n<r[0];++n)for(let s=0;s<r[1];++s)for(let i=0;i<r[2];++i)t=xj(t,oE(e,[n*a.shape[0],s*a.shape[1],i*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(a.rank," tensors yet."));for(let n=0;n<r[0];++n)for(let s=0;s<r[1];++s)for(let i=0;i<r[2];++i)for(let o=0;o<r[3];++o)t=xj(t,oE(e,[n*a.shape[0],s*a.shape[1],i*a.shape[2],o*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return t}}}},G_={kernelName:Hw,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=Wj(t,Nj(t)),a=gC(e,n);let r=vC(t,Sj(0,"int32"));const s=a.rank-r.rank;for(let o=0;o<s;++o)r=hC(r,o+1);r=PC(r,qC(a.shape,"bool"));const i=Nj(a);return kE(r,a,i)}(e,n)}}};const q_=[UI,WI,VI,HI,GI,qI,KI,XI,YI,$I,QI,JI,eA,nA,aA,sA,iA,oA,lA,cA,uA,dA,pA,hA,mA,xA,yA,wA,kA,NA,x_,jA,SA,CA,EA,TA,AA,IA,OA,PA,FA,LA,zA,BA,UA,WA,VA,HA,GA,KA,YA,YA,$A,JA,e_,t_,n_,a_,r_,s_,i_,o_,l_,c_,u_,d_,d_,h_,p_,g_,v_,y_,b_,w_,k_,N_,j_,S_,C_,T_,I_,A_,__,R_,M_,D_,F_,L_,B_,B_,U_,U_,{kernelName:vw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,bj(wj(mj(n,"float32")),2))}}},W_,{kernelName:Iw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(e,bj(mj(n,"float32"),2))}}},{kernelName:qw,gradFunc:e=>({x:()=>Nj(e)})},V_,{kernelName:yw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,r=a.shape.slice(),{axis:s}=n;hv(s,a.shape).forEach(e=>{r[e]=1});const i=zS(e,r),o=bj(i,qC(a.shape,"float32"));return{x:()=>o}}},{kernelName:Dw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yj(e,kj(O_(n)))}}},{kernelName:Fw,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>bj(Dj(Sj(1),kj(n)),e)}}},H_,{kernelName:Uw,gradFunc:(e,t,n)=>{const a=n,{perm:r}=a,s=_C(r);return{x:()=>SE(e,s)}}},{kernelName:Vw,gradFunc:(e,t,n)=>{const a=n,{axis:r}=a;return{value:()=>gE(e,r)}}},G_,{kernelName:Gw,gradFunc:e=>({x:()=>Nj(e)})}];for(const n of q_)ik(n);Vk().prototype.abs=function(){return this.throwIfDisposed(),Lj(this)};const K_=bN({acos_:function(e){const t={x:vN(e,"x","acos")};return cN.runKernel(Wv,t)}});Vk().prototype.acos=function(){return this.throwIfDisposed(),K_(this)};const X_=bN({acosh_:function(e){const t={x:vN(e,"x","acosh")};return cN.runKernel(Vv,t)}});Vk().prototype.acosh=function(){return this.throwIfDisposed(),X_(this)},Vk().prototype.add=function(e){return this.throwIfDisposed(),xj(this,e)},Vk().prototype.all=function(e,t){return this.throwIfDisposed(),wS(this,e,t)},Vk().prototype.any=function(e,t){return this.throwIfDisposed(),kS(this,e,t)},Vk().prototype.argMax=function(e){return this.throwIfDisposed(),NS(this,e)};const Y_=bN({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vN(e,"x","argMin")},a={axis:t};return cN.runKernel(Yv,n,a)}});Vk().prototype.argMin=function(e){return this.throwIfDisposed(),Y_(this,e)},Vk().prototype.asScalar=function(){return this.throwIfDisposed(),nv(1===this.size,()=>"The array must have only 1 element."),zS(this,[])},Vk().prototype.asType=function(e){return this.throwIfDisposed(),mj(this,e)},Vk().prototype.as1D=function(){return this.throwIfDisposed(),zS(this,[this.size])},Vk().prototype.as2D=function(e,t){return this.throwIfDisposed(),zS(this,[e,t])},Vk().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),zS(this,[e,t,n])},Vk().prototype.as4D=function(e,t,n,a){return this.throwIfDisposed(),zS(this,[e,t,n,a])},Vk().prototype.as5D=function(e,t,n,a,r){return this.throwIfDisposed(),zS(this,[e,t,n,a,r])};const $_=bN({asin_:function(e){const t={x:vN(e,"x","asin")};return cN.runKernel($v,t)}});Vk().prototype.asin=function(){return this.throwIfDisposed(),$_(this)};const Q_=bN({asinh_:function(e){const t={x:vN(e,"x","asinh")};return cN.runKernel(Qv,t)}});Vk().prototype.asinh=function(){return this.throwIfDisposed(),Q_(this)};const J_=bN({atan_:function(e){const t={x:vN(e,"x","atan")};return cN.runKernel(Jv,t)}});Vk().prototype.atan=function(){return this.throwIfDisposed(),J_(this)};const Z_=bN({atan2_:function(e,t){let n=vN(e,"a","atan2"),a=vN(t,"b","atan2");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel(ey,r)}});Vk().prototype.atan2=function(e){return this.throwIfDisposed(),Z_(this,e)};const eO=bN({atanh_:function(e){const t={x:vN(e,"x","atanh")};return cN.runKernel(Zv,t)}});Vk().prototype.atanh=function(){return this.throwIfDisposed(),eO(this)},Vk().prototype.avgPool=function(e,t,n,a){return this.throwIfDisposed(),BS(this,e,t,n,a)},Vk().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),z_(this,e,t)},Vk().prototype.batchNorm=function(e,t,n,a,r){return this.throwIfDisposed(),WS(this,e,t,n,a,r)},Vk().prototype.broadcastTo=function(e){return this.throwIfDisposed(),qS(this,e)},Vk().prototype.cast=function(e){return this.throwIfDisposed(),mj(this,e)};const tO=bN({ceil_:function(e){const t={x:vN(e,"x","ceil","float32")};return cN.runKernel(dy,t)}});Vk().prototype.ceil=function(){return this.throwIfDisposed(),tO(this)},Vk().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),KS(this,e,t)},Vk().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Wk&&(e=[e]),XS([this,...e],t)},Vk().prototype.conv1d=function(e,t,n,a,r,s){return this.throwIfDisposed(),eC(this,e,t,n,a,r,s)},Vk().prototype.conv2dTranspose=function(e,t,n,a,r){return this.throwIfDisposed(),nC(this,e,t,n,a,r)},Vk().prototype.conv2d=function(e,t,n,a,r,s){return this.throwIfDisposed(),ZS(this,e,t,n,a,r,s)},Vk().prototype.cos=function(){return this.throwIfDisposed(),O_(this)},Vk().prototype.cosh=function(){return this.throwIfDisposed(),P_(this)},Vk().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),f_(this,e,t,n)},Vk().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),bA(this,e,t,n)};const nO=bN({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const a=vN(e,"x","depthToSpace","float32"),r="NHWC"===n?a.shape[1]:a.shape[2],s="NHWC"===n?a.shape[2]:a.shape[3],i="NHWC"===n?a.shape[3]:a.shape[1];nv(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),nv(r*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(r," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(a.shape)),nv(s*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(s," and ").concat(t," for depthToSpace with input shape\n        ").concat(a.shape)),nv(i%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(a.shape));const o={x:a},l={blockSize:t,dataFormat:n};return cN.runKernel(Ty,o,l)}});Vk().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),nO(this,e,t)},Vk().prototype.depthwiseConv2d=function(e,t,n,a,r,s){return this.throwIfDisposed(),oC(this,e,t,n,a,r,s)};const aO=bN({dilation2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=vN(e,"x","dilation2d"),o=vN(t,"filter","dilation2d");nv(3===i.rank||4===i.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")),nv(3===o.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(o.rank,".")),nv("NHWC"===s,()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(s));let l=i,c=!1;3===i.rank&&(l=zS(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),nv(l.shape[3]===o.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(o.shape[2]));const u={x:l,filter:o},d={strides:n,pad:a,dilations:r},h=cN.runKernel(Ry,u,d);return c?zS(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});Vk().prototype.dilation2d=function(e,t,n,a,r){return this.throwIfDisposed(),aO(this,e,t,n,a,r)};const rO=bN({divNoNan_:function(e,t){let n=vN(e,"a","div"),a=vN(t,"b","div");[n,a]=tN(n,a);const r=yj(n,a),s=Nj(r),i=cC(a,s);return kE(i,s,r)}});Vk().prototype.divNoNan=function(e){return this.throwIfDisposed(),rO(this,e)},Vk().prototype.div=function(e){return this.throwIfDisposed(),yj(this,e)};const sO=bN({dot_:function(e,t){const n=vN(e,"t1","dot"),a=vN(t,"t2","dot");nv((1===n.rank||2===n.rank)&&(1===a.rank||2===a.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(a.rank,"."));const r=1===n.rank?n.size:n.shape[1],s=1===a.rank?a.size:a.shape[0];if(nv(r===s,()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(r," and ").concat(s,".")),1===n.rank&&1===a.rank){const e=zS(n,[1,-1]),t=zS(a,[-1,1]),r=MC(e,t);return zS(r,[])}if(1===n.rank&&2===a.rank){const e=zS(n,[1,-1]),t=zS(a,[a.shape[0],a.shape[1]]),r=MC(e,t);return zS(r,[r.size])}if(2===n.rank&&1===a.rank){const e=zS(a,[-1,1]),t=MC(n,e);return zS(t,[t.size])}{const e=zS(a,[a.shape[0],a.shape[1]]);return MC(n,e)}}});Vk().prototype.dot=function(e){return this.throwIfDisposed(),sO(this,e)},Vk().prototype.elu=function(){return this.throwIfDisposed(),lC(this)},Vk().prototype.equal=function(e){return this.throwIfDisposed(),cC(this,e)},Vk().prototype.erf=function(){return this.throwIfDisposed(),uC(this)};const iO=bN({euclideanNorm_:function(e){return bT(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});Vk().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),iO(this,e,t)},Vk().prototype.exp=function(){return this.throwIfDisposed(),dC(this)},Vk().prototype.expandDims=function(e){return this.throwIfDisposed(),hC(this,e)};const oO=bN({expm1_:function(e){const t={x:vN(e,"x","expm1")};return cN.runKernel(Gy,t)}});Vk().prototype.expm1=function(){return this.throwIfDisposed(),oO(this)},Vk().prototype.fft=function(){return this.throwIfDisposed(),EE(this)},Vk().prototype.flatten=function(){return this.throwIfDisposed(),zS(this,[this.size])},Vk().prototype.floor=function(){return this.throwIfDisposed(),mC(this)},Vk().prototype.floorDiv=function(e){return this.throwIfDisposed(),vj(this,e)},Vk().prototype.gather=function(e,t,n){return this.throwIfDisposed(),gC(this,e,t,n)},Vk().prototype.greaterEqual=function(e){return this.throwIfDisposed(),vC(this,e)},Vk().prototype.greater=function(e){return this.throwIfDisposed(),xC(this,e)},Vk().prototype.ifft=function(){return this.throwIfDisposed(),IE(this)},Vk().prototype.irfft=function(){return this.throwIfDisposed(),AE(this)};const lO=bN({isFinite_:function(e){const t={x:vN(e,"x","isFinite")};return cN.runKernel(sb,t)}});Vk().prototype.isFinite=function(){return this.throwIfDisposed(),lO(this)};const cO=bN({isInf_:function(e){const t={x:vN(e,"x","isInf")};return cN.runKernel(ib,t)}});Vk().prototype.isInf=function(){return this.throwIfDisposed(),cO(this)};const uO=bN({isNaN_:function(e){const t={x:vN(e,"x","isNaN")};return cN.runKernel(ob,t)}});Vk().prototype.isNaN=function(){return this.throwIfDisposed(),uO(this)},Vk().prototype.leakyRelu=function(e){return this.throwIfDisposed(),yC(this,e)},Vk().prototype.lessEqual=function(e){return this.throwIfDisposed(),pT(this,e)},Vk().prototype.less=function(e){return this.throwIfDisposed(),xT(this,e)};const dO=bN({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const s=vN(e,"x","localResponseNormalization");nv(4===s.rank||3===s.rank,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(s.rank,".")),nv(ov(t),()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,"."));let i=s,o=!1;3===s.rank&&(o=!0,i=zS(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:i},c={depthRadius:t,bias:n,alpha:a,beta:r},u=cN.runKernel(xb,l,c);return o?zS(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});Vk().prototype.localResponseNormalization=function(e,t,n,a){return this.throwIfDisposed(),dO(this,e,t,n,a)};const hO=bN({logSigmoid_:function(e){const t=vN(e,"x","logSigmoid");return jj(e=>({value:WC(pE(WC(e))),gradFunc:t=>bj(t,iE(WC(e)))}))(t)}});Vk().prototype.logSigmoid=function(){return this.throwIfDisposed(),hO(this)},Vk().prototype.logSoftmax=function(e){return this.throwIfDisposed(),jC(this,e)},Vk().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),RC(this,e,t)},Vk().prototype.log=function(){return this.throwIfDisposed(),bC(this)},Vk().prototype.log1p=function(){return this.throwIfDisposed(),wC(this)},Vk().prototype.logicalAnd=function(e){return this.throwIfDisposed(),PC(this,e)},Vk().prototype.logicalNot=function(){return this.throwIfDisposed(),E_(this)};const pO=bN({logicalOr_:function(e,t){const n=vN(e,"a","logicalOr","bool"),a=vN(t,"b","logicalOr","bool");Uj(n.shape,a.shape);const r={a:n,b:a};return cN.runKernel(gb,r)}});Vk().prototype.logicalOr=function(e){return this.throwIfDisposed(),pO(this,e)};const fO=bN({logicalXor_:function(e,t){const n=vN(e,"a","logicalXor","bool"),a=vN(t,"b","logicalXor","bool");return Uj(n.shape,a.shape),PC(pO(e,t),E_(PC(e,t)))}});Vk().prototype.logicalXor=function(e){return this.throwIfDisposed(),fO(this,e)},Vk().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),MC(this,e,t,n)},Vk().prototype.maxPool=function(e,t,n,a){return this.throwIfDisposed(),DC(this,e,t,n,a)},Vk().prototype.max=function(e,t){return this.throwIfDisposed(),kC(this,e,t)},Vk().prototype.maximum=function(e){return this.throwIfDisposed(),Wj(this,e)},Vk().prototype.mean=function(e,t){return this.throwIfDisposed(),LC(this,e,t)},Vk().prototype.min=function(e,t){return this.throwIfDisposed(),zC(this,e,t)},Vk().prototype.minimum=function(e){return this.throwIfDisposed(),BC(this,e)};const mO=bN({mirrorPad_:function(e,t,n){nv("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,"."));const a=vN(e,"x","mirrorPad");if(0===a.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");nv(t.length===a.rank,()=>"Padding doesn't match input. Must be ".concat(a.rank,". ")+"Got ".concat(t.length,"."));const r="reflect"===n?1:0;for(let o=0;o<a.rank;o++)nv(2===t[o].length,()=>"Invalid number of paddings. Must be length of 2 each."),nv(t[o][0]>=0&&t[o][0]<=a.shape[o]-r&&t[o][1]>=0&&t[o][1]<=a.shape[o]-r,()=>"Padding in dimension ".concat(o," cannot be greater than or equal ")+"to ".concat(a.shape[o]-r," or less than 0 for input of ")+"shape ".concat(a.shape));const s={paddings:t,mode:n},i={x:a};return cN.runKernel(Ib,i,s)}});Vk().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),mO(this,e,t)};const gO=bN({mod_:function(e,t){let n=vN(e,"a","mod"),a=vN(t,"b","mod");[n,a]=tN(n,a);const r={a:n,b:a};return cN.runKernel(Ab,r)}});Vk().prototype.mod=function(e){return this.throwIfDisposed(),gO(this,e)},Vk().prototype.mul=function(e){return this.throwIfDisposed(),bj(this,e)},Vk().prototype.neg=function(){return this.throwIfDisposed(),WC(this)},Vk().prototype.norm=function(e,t,n){return this.throwIfDisposed(),bT(this,e,t,n)},Vk().prototype.notEqual=function(e){return this.throwIfDisposed(),VC(this,e)},Vk().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),HC(this,e,t,n)},Vk().prototype.onesLike=function(){return this.throwIfDisposed(),KC(this)},Vk().prototype.pad=function(e,t){return this.throwIfDisposed(),XC(this,e,t)};const xO=bN({pool_:function(e,t,n,a,r,s,i){null==r&&(r=[1,1]),null==s&&(s=1),0===a&&(a="valid");const o=vN(e,"x","maxPool");let l=o,c=!1;3===o.rank&&(c=!0,l=zS(o,[1,o.shape[0],o.shape[1],o.shape[2]])),nv(MS(s,r),()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(r,"'"));const u=SS(l.shape,t,s,r,a),d=[u.dilationHeight,u.dilationWidth];let h;h="same"===a?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)),a=n.map(e=>e-1),r=a.map(e=>Math.floor(e/2)),s=a.map((e,t)=>e-r[t]);return a.map((e,t)=>[r[t],s[t]])}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,m]=function(e,t,n){const a=n.map(e=>e[0]),r=n.map(e=>e[1]),s=e.concat(a,r),i=t.map((e,t)=>(e-s[t]%e)%e),o=r.map((e,t)=>e+i[t]),l=t.map((e,t)=>[a[t],o[t]]),c=t.map((e,t)=>[0,i[t]]);return[l,c]}([u.inHeight,u.inWidth],d,h),g=p?a:"valid",x=p?l:rA(l,d,f),v=("avg"===n?()=>BS(x,t,s,g,i):()=>DC(x,t,s,g,i))(),y=p?v:z_(v,d,m);return c?zS(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});Vk().prototype.pool=function(e,t,n,a,r,s){return this.throwIfDisposed(),xO(this,e,t,n,a,r,s)},Vk().prototype.pow=function(e){return this.throwIfDisposed(),Mj(this,e)},Vk().prototype.prelu=function(e){return this.throwIfDisposed(),YC(this,e)};const vO=bN({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=vN(e,"x","prod");"bool"===a.dtype&&(a=mj(a,"int32"));const r={x:a},s={axis:t,keepDims:n};return cN.runKernel(Hb,r,s)}});Vk().prototype.prod=function(e,t){return this.throwIfDisposed(),vO(this,e,t)};const yO=bN({reciprocal_:function(e){const t={x:vN(e,"x","reciprocal")};return cN.runKernel($b,t)}});Vk().prototype.reciprocal=function(){return this.throwIfDisposed(),yO(this)},Vk().prototype.relu=function(){return this.throwIfDisposed(),nE(this)},Vk().prototype.relu6=function(){return this.throwIfDisposed(),OE(this)},Vk().prototype.reshapeAs=function(e){return this.throwIfDisposed(),zS(this,e.shape)},Vk().prototype.reshape=function(e){return this.throwIfDisposed(),zS(this,e)},Vk().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),uT(this,e,t,n)},Vk().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),dT(this,e,t,n)},Vk().prototype.reverse=function(e){return this.throwIfDisposed(),aE(this,e)},Vk().prototype.rfft=function(){return this.throwIfDisposed(),TE(this)},Vk().prototype.round=function(){return this.throwIfDisposed(),fT(this)},Vk().prototype.rsqrt=function(){return this.throwIfDisposed(),_A(this)},Vk().prototype.selu=function(){return this.throwIfDisposed(),rE(this)},Vk().prototype.separableConv2d=function(e,t,n,a,r,s){return this.throwIfDisposed(),sE(this,e,t,n,a,r,s)},Vk().prototype.sigmoid=function(){return this.throwIfDisposed(),iE(this)};const bO=bN({sign_:function(e){const t={x:vN(e,"x","sign")};return cN.runKernel(mw,t)}});Vk().prototype.sign=function(){return this.throwIfDisposed(),bO(this)},Vk().prototype.sin=function(){return this.throwIfDisposed(),gA(this)},Vk().prototype.sinh=function(){return this.throwIfDisposed(),vA(this)},Vk().prototype.slice=function(e,t){return this.throwIfDisposed(),oE(this,e,t)},Vk().prototype.softmax=function(e){return this.throwIfDisposed(),hE(this,e)},Vk().prototype.softplus=function(){return this.throwIfDisposed(),pE(this)},Vk().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),rA(this,e,t)},Vk().prototype.split=function(e,t){return this.throwIfDisposed(),fE(this,e,t)},Vk().prototype.sqrt=function(){return this.throwIfDisposed(),wj(this)},Vk().prototype.square=function(){return this.throwIfDisposed(),kj(this)},Vk().prototype.squaredDifference=function(e){return this.throwIfDisposed(),ST(this,e)},Vk().prototype.squeeze=function(e){return this.throwIfDisposed(),mE(this,e)},Vk().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Wk?[this,e]:[this,...e];return gE(n,t)},Vk().prototype.step=function(e){return this.throwIfDisposed(),RE(this,e)};const wO=bN({stridedSlice_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:vN(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:a,beginMask:r,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return cN.runKernel(_w,c,u)}});Vk().prototype.stridedSlice=function(e,t,n,a,r,s,i,o){return this.throwIfDisposed(),wO(this,e,t,n,a,r,s,i,o)},Vk().prototype.sub=function(e){return this.throwIfDisposed(),Dj(this,e)},Vk().prototype.sum=function(e,t){return this.throwIfDisposed(),NC(this,e,t)};const kO=bN({tan_:function(e){const t={x:vN(e,"x","tan","float32")};return cN.runKernel(Dw,t)}});Vk().prototype.tan=function(){return this.throwIfDisposed(),kO(this)},Vk().prototype.tanh=function(){return this.throwIfDisposed(),xE(this)},Vk().prototype.tile=function(e){return this.throwIfDisposed(),pC(this,e)},Vk().prototype.toBool=function(){return this.throwIfDisposed(),mj(this,"bool")},Vk().prototype.toFloat=function(){return this.throwIfDisposed(),mj(this,"float32")},Vk().prototype.toInt=function(){return this.throwIfDisposed(),mj(this,"int32")};const NO=bN({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=vN(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const r=a.shape[a.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>r)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(r,") ")+"but got ".concat(t));const s={x:a},i={k:t,sorted:n},[o,l]=cN.runKernel(zw,s,i);return{values:o,indices:l}}});Vk().prototype.topk=function(e,t){return this.throwIfDisposed(),NO(this,e,t)},Vk().prototype.transpose=function(e){return this.throwIfDisposed(),SE(this,e)};const jO=bN({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vN(e,"x","unique","string_or_numeric");nv(n.rank>0,()=>"The input tensor must be at least 1D");const a={x:n},r={axis:t},[s,i]=cN.runKernel(Ww,a,r);return{values:s,indices:i}}});Vk().prototype.unique=function(e){return this.throwIfDisposed(),jO(this,e)},Vk().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),RA(this,e,t)},Vk().prototype.unstack=function(e){return this.throwIfDisposed(),wE(this,e)},Vk().prototype.where=function(e,t){return this.throwIfDisposed(),kE(e,this,t)},Vk().prototype.zerosLike=function(){return this.throwIfDisposed(),Nj(this)};class SO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,SO.prototype)}}class CO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,CO.prototype)}}class EO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,EO.prototype)}}class TO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,TO.prototype)}}class IO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,IO.prototype)}}Error;class AO{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function _O(e,t){if(Array.isArray(e)){let n=[];for(let a=0;a<t;a++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function OO(e,t){if(!e)throw new IO(t)}function RO(e,t){let n=0;for(const a of e)a===t&&n++;return n}function PO(e){return 1===e.length?e[0]:e}function MO(e){return Array.isArray(e)?e:[e]}function DO(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function FO(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let LO={};function zO(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function BO(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach(e=>BO(e));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?BO(t):e[n]=t.value)}}}function UO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const r=e;let s;if(r in n)s=n[r];else if(r in LO)s=LO[r];else if(s=t[r],null==s)throw new EO("Unknown ".concat(a,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return s}{const s=e;if(null==s.className||null==s.config)throw new EO("".concat(a,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");const i=s.className;let o,l;if(i in n?[o,l]=n[i]:i in LO?[o,l]=LO.className:i in t&&([o,l]=t[i]),null==o)throw new EO("Unknown ".concat(a,": ").concat(i,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(LO))e[n]=LO[n];for(const r of Object.keys(n))e[r]=n[r];s.config.customObjects=e;const t=Object.assign({},LO);for(const r of Object.keys(n))LO[r]=n[r];BO(s.config);const a=l(o,s.config,n,r);return LO=Object.assign({},t),a}{const e=Object.assign({},LO);for(const a of Object.keys(n))LO[a]=n[a];const t=new o(s.config);return LO=Object.assign({},e),t}}}function WO(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function VO(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function HO(e){if(null==e)throw new EO("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function GO(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new EO("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function qO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return OO(n>=0),OO(a>=n),Array.isArray(e)&&e.length>=n&&e.length<=a&&e.every(e=>typeof e===t)}function KO(e,t){Array.isArray(e)?(nv(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((e,n)=>KO(e,"element ".concat(n+1," of ").concat(t)))):nv(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(XO(e),"."))}function XO(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>XO(e)).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function YO(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let $O=0;function QO(){return $O++}const JO={};function ZO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in JO||(JO[e]=0),JO[e]+=1,e+JO[e].toString()}const eR=["channelsFirst","channelsLast"],tR=["nearest","bilinear"],nR=["valid","same","causal"],aR=["max","avg"],rR=["sum","mul","concat","ave"],sR=new Map;function iR(e){GO(eR,"DataFormat",e)}function oR(e){GO(nR,"PaddingMode",e)}function lR(e){GO(aR,"PoolMode",e)}const cR=[];function uR(e,t){cR.push(e);try{const e=t();return cR.pop(),e}catch(jEe){throw cR.pop(),jEe}}function dR(e){if(!fR(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===cR.length?"":cR.join("/")+"/")+e}function hR(e){if(!fR(e))throw new Error("Not a valid tensor name: '"+e+"'");sR.has(e)||sR.set(e,0);const t=sR.get(e);if(sR.set(e,sR.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return sR.set(n,1),n}return e}const pR=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function fR(e){return!!e.match(pR)}function mR(e){return e===parseInt(e.toString(),10)}function gR(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let a=1;for(let r=t;r<n;++r)a*=e[r];return a}function xR(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n];a<t&&(t=a)}return t}function vR(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n];a>t&&(t=a)}return t}function yR(e,t){if(t<e)throw new EO("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let a=e;a<t;++a)n.push(a);return n}let bR;function wR(){return null==bR&&(bR=_N().epsilon()),bR}function kR(e,t){return mj(e,t)}function NR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),zS(e,n)}function jR(e,t,n){return EN(()=>{switch(e.rank){case 1:return lE(e,t,n);case 2:return cE(e,[t,0],[n,e.shape[1]]);case 3:return uE(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return dE(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return oE(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return oE(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new EO("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function SR(e,t,n){return EN(()=>{switch(e.rank){case 1:return lE(e,t,n);case 2:return cE(e,[0,t],[e.shape[0],n]);case 3:return uE(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return dE(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new EO("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function CR(e,t,n,a){return EN(()=>{switch(e.rank){case 1:return lE(e,t,n);case 2:switch(a){case 1:return jR(e,t,n);case 2:return SR(e,t,n);default:throw new EO("The axis is not within the rank of the tensor "+"".concat(a))}case 3:switch(a){case 1:return jR(e,t,n);case 2:return uE(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return SR(e,t,n);default:throw new EO("The axis is not within the rank of the tensor "+"".concat(a))}case 4:switch(a){case 1:return jR(e,t,n);case 2:return dE(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return dE(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return SR(e,t,n);default:throw new EO("The axis is not within the rank of the tensor "+"".concat(a))}default:throw new EO("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function ER(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),XS(e,n)}function TR(e,t){switch(e.rank){case 1:return YS([e,t]);case 2:return $S([e,t],0);case 3:return QS([e,t],0);case 4:return JS([e,t],0);default:throw new EO("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function IR(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new EO("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return pC(e,t)}function AR(e){return ZC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function _R(e,t,n,a){if(e.rank<2||t.rank<2)throw new TO("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new TO("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return UE({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?PR(e.rank,a,"channelsLast"):null,activation:n})}{const r=e.shape.slice(),s=r.pop();e=zS(e,[-1,s]);const i=t.shape.slice(),o=i.pop(),l=i.pop(),c=[...i,o],u=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=zS(SE(t,u),[l,-1]);const d=[...r,...c];return zS(UE({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?PR(e.rank,a,"channelsLast"):null,activation:n}),d)}}function OR(e,t,n){return EN(()=>(t=Array.isArray(t)?vE(t,"int32"):mj(t,"int32"),gC(e,t,n)))}function RR(e){return bj(e,e)}function PR(e,t,n){const a=t.shape;if(1!==t.rank&&t.rank!==e)throw new EO("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===a.length?zS(t,[1,a[0],1,1,1]):zS(t,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?zS(t,[1,1,1,1,a[0]]):zS(t,[1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?zS(t,[1,a[0],1,1]):zS(t,[1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?zS(t,[1,1,1,a[0]]):zS(t,[1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?zS(t,[1,a[0],1]):zS(t,[1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?zS(t,[1,1,a[0]]):zS(t,[1].concat(a))}else if(e<3)return t;throw new EO("Unsupported input rank by biasAdd: ".concat(t.rank))}function MR(e,t,n){return EN(()=>(null==n&&(n="channelsLast"),iR(n),xj(e,PR(e.rank,t,n))))}function DR(e,t,n,a){return EN(()=>CE(e,t,n,a))}function FR(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const LR=["fanIn","fanOut","fanAvg"],zR=["normal","uniform","truncatedNormal"];class BR extends Tj{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class UR extends BR{apply(e,t){return GC(e,t)}}UR.className="Zeros",Aj(UR);class WR extends BR{apply(e,t){return qC(e,t)}}WR.className="Ones",Aj(WR);class VR extends BR{constructor(e){if(super(),"object"!==typeof e)throw new EO("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new EO("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return EN(()=>bj(Sj(this.value),qC(e,t)))}getConfig(){return{value:this.value}}}VR.className="Constant",Aj(VR);class HR extends BR{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return eE(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}HR.className="RandomUniform",Aj(HR);class GR extends BR{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new TO("randomNormal does not support dType ".concat(t,"."));return AR(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}GR.className="RandomNormal",Aj(GR);class qR extends BR{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new TO("truncatedNormal does not support dType ".concat(t,"."));return bE(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}qR.className="TruncatedNormal",Aj(qR);class KR extends BR{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return EN(()=>{if(2!==e.length||e[0]!==e[1])throw new EO("Identity matrix initializer can only be used for 2D square matrices.");return bj(this.gain,fC(e[0]))})}getConfig(){return{gain:this.gain}}}KR.className="Identity",Aj(KR);class XR extends BR{constructor(e){if(super(),e.scale<0)throw new EO("scale must be a positive float. Got: ".concat(e.scale));this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){GO(LR,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){GO(zR,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(iR(a),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===a){const a=gR(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===a){const a=gR(e,0,e.length-2);t=e[e.length-2]*a,n=e[e.length-1]*a}}else{const a=gR(e);t=Math.sqrt(a),n=Math.sqrt(a)}return[t,n]}(e),a=n[0],r=n[1];let s=this.scale;if("fanIn"===this.mode?s/=Math.max(1,a):"fanOut"===this.mode?s/=Math.max(1,r):s/=Math.max(1,(a+r)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new TO("".concat(this.getClassName()," does not support dType ").concat(t,"."));return bE(e,0,n,t,this.seed)}{const n=Math.sqrt(3*s);return eE(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}XR.className="VarianceScaling",Aj(XR);class YR extends XR{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return XR.className}}YR.className="GlorotUniform",Aj(YR);class $R extends XR{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return XR.className}}$R.className="GlorotNormal",Aj($R);class QR extends XR{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return XR.className}}QR.className="HeNormal",Aj(QR);class JR extends XR{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return XR.className}}JR.className="HeUniform",Aj(JR);class ZR extends XR{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return XR.className}}ZR.className="LeCunNormal",Aj(ZR);class eP extends XR{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return XR.className}}eP.className="LeCunUniform",Aj(eP);class tP extends BR{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return EN(()=>{if(e.length<2)throw new TO("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=sv(e.slice(0,-1)),a=e[e.length-1],r=n*a;r>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(r,") elements: ")+"Slowness may result.");const s=AR([Math.max(a,n),Math.min(a,n)],0,1,t,this.seed),i=ET.qr(s,!1);let o=i[0];const l=i[1].flatten().stridedSlice([0],[Math.min(a,n)*Math.min(a,n)],[Math.min(a,n)+1]);return o=bj(o,l.sign()),n<a&&(o=o.transpose()),bj(Sj(this.gain),o.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}tP.className="Orthogonal",Aj(tP);const nP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function aP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return UO(e,Ij.getMap().classNameMap,t,"initializer")}function rP(e){return zO(e)}function sP(e){if("string"===typeof e){const t=e in nP?nP[e]:e;if("GlorotNormal"===t)return new $R;if("GlorotUniform"===t)return new YR;if("HeNormal"===t)return new QR;if("HeUniform"===t)return new JR;if("LeCunNormal"===t)return new ZR;if("LeCunUniform"===t)return new eP;{const e={};return e.className=t,e.config={},aP(e)}}return e instanceof BR?e:aP(e)}function iP(e){return Array.isArray(e)&&Array.isArray(e[0])}function oP(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function lP(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new EO("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function cP(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new EO("Expected exactly 1 Shape; got ".concat(e.length))}return e}function uP(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}const dP="Variable";class hP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dP,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=QO(),n=null==n?dP:n,this.originalName=dR(n),this.name=hR(this.originalName),this.trainable_=a,this.constraint=r,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return cN.makeVariable(e,t,n,a)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function pP(e){return e.map(e=>e.read())}function fP(e){e.forEach(e=>{e[0].write(e[1])})}class mP{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class gP{constructor(e,t,n,a,r,s,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=a,this.callArgs=r,this.outputTensorIndex=i,this.id=QO(),null!=s&&(this.originalName=dR(s),this.name=hR(this.originalName)),this.rank=t.length}}let xP=0;class vP{constructor(e,t){this.callArgs=t,this.id=xP++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let yP=0;class bP extends Tj{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=yP++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=DO(e)+"_"+ZO(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new CO("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new EO("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return PO(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return PO(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new SO("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new SO("Layer ".concat(this.name)+" is not connected, no input to return.");return PO(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new SO("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new SO("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return PO(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=MO(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=MO(this.inputSpec);if(t.length!==n.length)throw new EO("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let a=0;a<t.length;a++){const e=t[a],r=n[a];if(null==r)continue;const s=e.rank;if(null!=r.ndim&&s!==r.ndim)throw new EO("Input ".concat(a," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(r.ndim,", found ndim=").concat(s));if(null!=r.maxNDim&&s>r.maxNDim)throw new EO("Input ".concat(a," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(r.maxNDim,", found ndim=").concat(s));if(null!=r.minNDim&&s<r.minNDim)throw new EO("Input ".concat(a," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(r.minNDim,", found ndim=").concat(s,"."));if(null!=r.dtype&&e.dtype!==r.dtype)throw new EO("Input ".concat(a," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(r.dtype,", found dtype=").concat(e.dtype,"."));if(r.axes){const t=e.shape;for(const e in r.axes){const n=Number(e),s=r.axes[e],i=n>=0?t[n]:t[t.length+n];if(null!=s&&-1===[s,null].indexOf(i))throw new EO("Input ".concat(a," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(s," but got shape ").concat(t,"."))}}if(null!=r.shape)for(let t=0;t<r.shape.length;++t){const n=r.shape[t],s=e.shape[t];if(null!=n&&null!=s&&n!==s)throw new EO("Input ".concat(a," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(r.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=MO(e),a=function(e){let t=!0;for(const n of MO(e))if(!(n instanceof gP)){t=!1;break}return t}(e),r=function(e){let t=!0;for(const n of MO(e))if(n instanceof gP){t=!1;break}return t}(e);if(a===r)throw new EO("Arguments to apply() must be all SymbolicTensors or all Tensors");return uR(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of MO(e))t.push(n.shape);this.build(PO(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let a=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,a);const r=MO(a),s=[];for(let e of r)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(a=PO(s),null!=this.activityRegularizer)throw new TO("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}{const n=function(e){e=MO(e);const t=[];for(const n of e)t.push(n.shape);return PO(t)}(e),a=this.computeOutputShape(n);let r;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),r=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((n,a)=>new gP(s,n,this,MO(e),t,this.name,a)):new gP(s,a,this,MO(e),t,this.name),this.addInboundNode(e,r,null,null,n,a,t),this._refCount++,null!=this.activityRegularizer)throw new TO("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,a)=>{null!=n&&null!=e[a]&&e[a]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new SO("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new SO("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new CO("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return uP(this.weights)}build(e){this.built=!0}getWeights(){return pP(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){EN(()=>{const t=this.weights;if(t.length!==e.length)throw new EO('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],a=pP(t);for(let r=0;r<a.length;++r){const s=a[r],i=t[r],o=e[r];if(!iv(s.shape,o.shape))throw new EO("Layer weight shape ".concat(s.shape," ")+"not compatible with provided weight shape ".concat(o.shape));n.push([i,o])}fP(n)})}addWeight(e,t,n,a,r,s,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new EO("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(a=null!=o?o():sP("zeros"));const l=a.apply(t,n),c=new hP(l,n,e,s,i);return l.dispose(),null!=r&&this.addLoss(()=>r.apply(c.read())),null==s&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=MO(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach(e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")})}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const a=this.computeMask(e,n),r=MO(t),s=MO(a);if(r.length!==s.length)throw new Error("".concat(this.name," outputs ").concat(r.length," tensors ")+"but ".concat(r.length," masks for those tensors"));for(let i=0;i<r.length;i++)r[i].kerasMask=s[i]}addInboundNode(e,t,n,a,r,s){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const o=MO(e);t=MO(t),n=MO(n),a=MO(a),r=oP(r),s=oP(s);const l=[],c=[],u=[];for(const d of o)l.push(d.sourceLayer),c.push(d.nodeIndex),u.push(d.tensorIndex);new vP({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:a,inputShapes:r,outputShapes:s},i);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function wP(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const a=wP(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of a)-1===t.indexOf(e)&&t.push(e)}return t}}}class kP extends bP{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:ZO("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new EO("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new EO("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new EO("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const a=new gP(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new vP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new EO("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}kP.className="InputLayer",Aj(kP);class NP{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof NP)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new EO("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return mj(t,e.dtype)}catch(CEe){throw new EO("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof gP){if(null==this.id2Value[e.id])throw new EO("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new EO("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof gP){if(null==this.id2Value[e.id])throw new EO("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new EO("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&TN(this.id2Mask)}}const jP=new AO,SP=new AO;function CP(e,t,n,a){const r=null!=n&&n.training,s=Array.isArray(e),i=s?e:[e],o=i.map(e=>e.name),l=[],c=t.names();for(const f of o)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);const u=o.join(",")+"|"+t.names().sort().join(",");let d,h=jP.get(u);if(null==h){const e=function(e,t){nv(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],a={};if(1===e.length){const r=TP(e[0],t);n=r.sorted,a=r.recipientMap}else{const r=new Set;for(const s of e){const{sorted:e,recipientMap:i}=TP(s,t);for(const t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(const t in i)null==a[t]&&(a[t]=new Set),i[t].forEach(e=>a[t].add(e))}}return{sorted:n,recipientCounts:EP(a)}}(i,t);h=e.sorted,d=e.recipientCounts,jP.put(u,h),SP.put(u,d)}d={},r||Object.assign(d,SP.get(u));const p=new NP(t);for(let f=0;f<h.length;++f){if(null!=a){const e=CN().numTensors;e>a.maxNumTensors&&(a.maxNumTensors=e),e<a.minNumTensors&&(a.minNumTensors=e)}const e=h[f],s=e.sourceLayer;if(s instanceof kP)continue;const i=[],c=[],u=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),a=p.getMask(n);i.push(e),c.push(a),null!=a&&(m=!0),r||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==o.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}m&&((n=n||{}).mask=c[0]);const g=MO(s.apply(i,n));let x=null;s.supportsMasking&&(x=s.computeMask(i,c));const v=IP(e),y=Array.isArray(v)?v:[v];for(let t=0;t<y.length;++t){p.hasKey(y[t])||p.add(y[t],g[t],Array.isArray(x)?x[0]:x);const e=o.indexOf(y[t].name);-1!==e&&(l[e]=g[t])}r||TN(u)}return p.disposeMasks(),s?l:l[0]}function EP(e){const t={};for(const n in e)t[n]=e[n].size;return t}function TP(e,t){const n=new Set,a=[],r={};for(const o of t.names())n.add(o);const s=[],i=[];for(s.push(e);s.length>0;){const e=s[s.length-1];if(n.has(e.name)){s.pop();continue}const t=i[i.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),a.push(e),n.add(e.name),t&&i.pop();else{i.push(s.length-1);for(const t of e.inputs)null==r[t.name]&&(r[t.name]=new Set),r[t.name].add(e.name),n.has(t.name)||s.push(t)}}return{sorted:a,recipientMap:r}}function IP(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const a of e.sourceLayer.inboundNodes[t].outputTensors)if(a.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function AP(e,t){return EN(()=>wj(NC(bj(e,e),t,!0)))}Dv().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function(e){null!=jP&&jP.setMaxEntries(e),null!=SP&&SP.setMaxEntries(e)});class _P extends Tj{getConfig(){return{}}}class OP extends _P{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return EN(()=>{const t=AP(e,this.axis),n=KS(t,0,this.maxValue);return bj(e,yj(n,xj(wR(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}OP.className="MaxNorm",Aj(OP);class RP extends _P{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return EN(()=>yj(e,xj(wR(),AP(e,this.axis))))}getConfig(){return{axis:this.axis}}}RP.className="UnitNorm",Aj(RP);class PP extends _P{apply(e){return nE(e)}}PP.className="NonNeg",Aj(PP);class MP extends _P{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return EN(()=>{const t=AP(e,this.axis),n=xj(bj(this.rate,KS(t,this.minValue,this.maxValue)),bj(1-this.rate,t));return bj(e,yj(n,xj(wR(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}MP.className="MinMaxNorm",Aj(MP);const DP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function FP(e){return zO(e)}function LP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return UO(e,Ij.getMap().classNameMap,t,"constraint")}function zP(e){if(null==e)return null;if("string"===typeof e){return LP({className:e in DP?DP[e]:e,config:{}})}return e instanceof _P?e:LP(e)}async function BP(e){if(null==e)return;const t=[],n=[],a=[];for(const r in e){const s=e[r];if("number"!==typeof s){const e=s;t.push(e.data()),n.push(r),a.push(e)}}if(t.length>0){const r=await Promise.all(t);for(let t=0;t<r.length;++t)e[n[t]]=r[t][0];TN(a)}}function UP(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var WP;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(WP||(WP={}));class VP{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class HP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class GP extends VP{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const a in t){const e=t[a];if("number"===typeof e)this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+e*n;else{let t;a in this.totals?t=this.totals[a]:this.totals[a]=0;const r=EN(()=>xj(this.totals[a],bj(e,n)));this.totals[a]=r,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:EN(()=>{const e=bj(yj(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),IN(t[n])}))}}class qP extends VP{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const r in this.history){const a=this.history[r];for(let s=0;s<a.length;++s)if("number"!==typeof a[s]){const i=a[s];e.push(i.data()),t.push(r),n.push(s)}}const a=await Promise.all(e);for(let r=0;r<a.length;++r){this.history[t[r]][n[r]].dispose(),this.history[t[r]][n[r]]=a[r][0]}}}class KP extends VP{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||AT,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");yv(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let a,r=null!=n?n():Sk();return function(){const s=null!=n?n():Sk();return s-r<t||(r=s,a=e(...arguments)),a}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const a=[];null!=this.yield&&(await BP(n),a.push(this.yield(e,t,n))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await BP(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await BP(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await BP(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await BP(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):yv(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await BP(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await BP(e),await this.trainEnd(e))}}function XP(e,t){if(null==e&&(e={}),e instanceof VP)return[e];if(Array.isArray(e)&&e[0]instanceof VP)return e;return MO(e).map(e=>new KP(e,t))}class YP{constructor(){}static registerCallbackConstructor(e,t){nv(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)),YP.checkForDuplicate(t),null==YP.constructors[e]&&(YP.constructors[e]=[]),YP.constructors[e].push(t)}static checkForDuplicate(e){for(const t in YP.constructors){YP.constructors[+t].forEach(t=>{if(t===e)throw new EO("Duplicate callback constructor.")})}}static clear(){YP.constructors={}}static createCallbacks(e){const t=[];for(const n in YP.constructors){const a=+n;e>=a&&t.push(...YP.constructors[a])}return t.map(e=>new e)}}function $P(e,t,n,a,r,s,i,o,l){const c=new qP,u=[new GP,...YP.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const d=new HP(u);return d.setParams({epochs:n,initialEpoch:a,samples:r,steps:s,batchSize:i,verbose:t,doValidation:o,metrics:l}),{callbackList:d,history:c}}function QP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return UO(e,Ij.getMap().classNameMap,t,"layer",n)}function JP(e,t){return EN(()=>{"float32"!==e.dtype&&(e=mj(e,"float32"));const n=NC(RR(e),t,!0),a=Rj(n.shape,wR()),r=wj(Wj(n,a));return yj(e,r)})}function ZP(e,t){return EN(()=>LC(RR(Dj(t,e)),-1))}function eM(e,t){return EN(()=>LC(Lj(Dj(t,e)),-1))}function tM(e,t){return EN(()=>{const n=Dj(e,t),a=KS(Lj(e),wR(),Number.MAX_VALUE),r=Lj(yj(n,a));return bj(100,LC(r,-1))})}function nM(e,t){return EN(()=>{const n=KS(t,wR(),Number.MAX_VALUE),a=bC(xj(1,n)),r=KS(e,wR(),Number.MAX_VALUE),s=bC(xj(1,r));return LC(RR(Dj(a,s)),-1)})}function aM(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EN(()=>{if(n)t=hE(t);else{const e=NC(t,t.shape.length-1,!0);t=yj(t,e)}return t=KS(t,wR(),1-wR()),WC(NC(bj(mj(e,"float32"),bC(t)),t.shape.length-1))})}function rM(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EN(()=>{const a=mj(mC(function(e){const t=[gR(e.shape)];return zS(e,t)}(e)),"int32"),r=(t=KS(t,wR(),1-wR())).shape;return aM(zS(HC(a,r[r.length-1]),r),t,n)})}function sM(e,t){return EN(()=>{let n;return n=KS(t,wR(),1-wR()),n=bC(yj(n,Dj(1,n))),LC(function(e,t){if(!iv(e.shape,t.shape))throw new EO("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return EN(()=>{const n=nE(t),a=WC(Lj(t));return xj(Dj(n,bj(t,e)),wC(dC(a)))})}(e,n),-1)})}function iM(e,t){return EN(()=>{const n=KS(e,wR(),1),a=KS(t,wR(),1);return NC(bj(e,bC(yj(n,a))),-1)})}function oM(e,t){return EN(()=>{const n=JP(e,-1),a=JP(t,-1),r=bj(n,a);return WC(NC(r,-1))})}YP.constructors={};const lM={meanSquaredError:ZP,meanAbsoluteError:eM,meanAbsolutePercentageError:tM,meanSquaredLogarithmicError:nM,squaredHinge:function(e,t){return EN(()=>{const n=Wj(0,Dj(1,bj(e,t)));return LC(RR(n),-1)})},hinge:function(e,t){return EN(()=>{const n=Wj(0,Dj(1,bj(e,t)));return LC(n,-1)})},categoricalHinge:function(e,t){return EN(()=>{const n=NC(bj(e,t),-1),a=kC(bj(Dj(1,e),t),-1);return Wj(0,xj(1,Dj(a,n)))})},logcosh:function(e,t){return EN(()=>{const n=Math.log(2),a=Dj(t,e),r=Dj(xj(a,pE(bj(-2,a))),n);return LC(r,-1)})},categoricalCrossentropy:aM,sparseCategoricalCrossentropy:rM,binaryCrossentropy:sM,kullbackLeiblerDivergence:iM,poisson:function(e,t){return EN(()=>{const n=bC(xj(wR(),t));return LC(Dj(t,bj(e,n)),-1)})},cosineProximity:oM};function cM(e){if("string"===typeof e){if(e in lM)return lM[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new EO(t)}return e}function uM(e,t){return EN(()=>{const n=bj(.5,KC(t)),a=kR(xC(t,n),e.dtype);return LC(cC(e,a),-1)})}function dM(e,t){return EN(()=>kR(cC(NS(e,-1),NS(t,-1)),"float32"))}function hM(e,t){return EN(()=>mj(NC(PC(cC(e,1),cC(t,1))),"float32"))}function pM(e,t){return sM(e,t)}function fM(e,t){return e.rank===t.rank&&(e=mE(e,[e.rank-1])),(t=NS(t,-1)).dtype!==e.dtype&&(t=mj(t,e.dtype)),mj(cC(e,t),"float32")}const mM=aM,gM=rM,xM={binaryAccuracy:uM,categoricalAccuracy:dM,precision:function(e,t){return EN(()=>{const n=hM(e,t),a=function(e,t){return EN(()=>mj(NC(PC(cC(e,0),cC(t,1))),"float32"))}(e,t),r=xj(n,a);return mj(kE(xC(r,0),yj(n,r),0),"float32")})},categoricalCrossentropy:mM,sparseCategoricalCrossentropy:gM,mse:ZP,MSE:ZP,mae:eM,MAE:eM,mape:tM,MAPE:tM,cosine:oM};function vM(e){if("string"===typeof e&&e in xM)return xM[e];if("string"!==typeof e&&null!=e)return e;throw new EO("Unknown metric ".concat(e))}function yM(e){if(OO(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(lM))if(lM[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(xM))if(xM[n]===e){t=n;break}return void 0!==t?t:e.name}}const bM=1048576;function wM(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!kM(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>bM&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(bM,"."))}}function kM(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!kM(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!kM(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function NM(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const r=function(e){let t=!0;const n=[],a=[];for(const r in e.nodesByDepth)n.push(e.nodesByDepth[r]);for(const r of n){if(r.length>1||1===r.length&&r[0].inboundLayers.length>1){t=!1;break}a.push(...r)}if(t)for(const r of e.layers){let e=!1;for(const n of r.inboundNodes)if(-1!==a.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),s=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(r?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!r){s.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}a("_".repeat(t)),jM(s,n,a),a("=".repeat(t));const o=e.layers;for(let u=0;u<o.length;++u)r?SM(o[u],n,a):CM(o[u],n,i,a),a((u===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?uP(e.collectedTrainableWeights):uP(e.trainableWeights);return t}(e),c=uP(e.nonTrainableWeights);a("Total params: ".concat(l+c)),a("Trainable params: ".concat(l)),a("Non-trainable params: ".concat(c)),a("_".repeat(t))}function jM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,a="";for(let r=0;r<e.length;++r)r>0&&(a=a.slice(0,a.length-1)+" "),a+=e[r],a=a.slice(0,t[r]),a+=" ".repeat(t[r]-a.length);n(a)}function SM(e,t,n){let a,r;try{r=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(CEe){r="multiple"}try{a=JSON.stringify(e.outputShape)}catch(CEe){a="multiple"}const s=e.name,i=e.getClassName();jM(["".concat(s," (").concat(i,")"),r,a,e.countParams().toString()],t,n)}function CM(e,t,n,a){let r,s;try{s=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(CEe){s="multiple"}try{r=JSON.stringify(e.outputShape)}catch(CEe){r="multiple"}const i=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],a=u.tensorIndices[e];i.push("".concat(t,"[").concat(n,"][").concat(a,"]"))}const o=e.name,l=e.getClassName(),c=0===i.length?"":i[0];jM(["".concat(o," (").concat(l,")"),s,r,e.countParams().toString(),c],t,a);for(let u=1;u<i.length;++u)jM(["","","","",i[u]],t,a)}function EM(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function TM(e,t){if(null===e)return null;if("string"===typeof e)return FO(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],a=e.length;for(let r=0;r<a;++r){const a=e[r];EM(t,r,a)?n.push(a):n.push(TM(a,t))}return n}{const t={};for(const n of Object.keys(e)){const a=e[n];if("name"===n&&"string"===typeof a)t[n]=a;else{const e=FO(n);t[e]=TM(a,e)}}return t}}function IM(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return DO(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],a=e.length;for(let r=0;r<a;++r){const a=e[r];EM(t,r,a)?n.push(a):n.push(IM(a,t))}return n}{const t={};for(const n of Object.keys(e)){const a=e[n],r=DO(n);t[r]="name"!==n&&"className"!==n||"string"!==typeof a?IM(a,n):a}return t}}const AM="4.22.0";class _M extends bP{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=ZO(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],VO(this.inputs).length!==this.inputs.length)throw new EO("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map(e=>e.name)));VO(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map(e=>e.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const e=x.sourceLayer,t=x.nodeIndex,n=x.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const x of this.inputs){const e=x.sourceLayer,t=x.nodeIndex,n=x.tensorIndex;OO(0===t,"input layer has >1 nodes"),OO(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const t=this.inputLayers[x];if(!(t instanceof kP))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(x," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},a={},r={},s={},i=[],o=(e,t,n,a,r,l)=>{null!=a&&null!=r&&null!=l||(a=e.sourceLayer,r=e.nodeIndex,l=e.tensorIndex);const c=a.inboundNodes[r];if(-1!==n.indexOf(c))throw new CO("The tensor ".concat(e.name,' at layer "').concat(a.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(c))return;this.containerNodes.add(_M.nodeKey(a,r)),a.id in s||(s[a.id]=Object.keys(s).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let s=0;s<u;s++){const e=c.inputTensors[s],a=c.inboundLayers[s],r=c.nodeIndices[s],i=c.tensorIndices[s];o(e,t,n,a,r,i)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);i.push(c)},l=[],c=[];for(const x of this.outputs)o(x,l,c);const u=i.slice().reverse();for(const x of u){n[x.id]=x,x.id in t||(t[x.id]=0);let e=t[x.id];const s=null==a[x.outboundLayer.id]?0:a[x.outboundLayer.id];e=Math.max(e,s),a[x.outboundLayer.id]=e,r[x.outboundLayer.id]=x.outboundLayer,t[x.id]=e;for(let a=0;a<x.inboundLayers.length;a++){const r=x.inboundLayers[a],s=x.nodeIndices[a],i=r.inboundNodes[s],o=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(e+1,o),n[i.id]=i}}const d={};for(const x in t){const e=t[x];e in d||(d[e]=[]),d[e].push(n[x])}const h={};for(const x in a){const e=a[x];e in h||(h[e]=[]),h[e].push(r[x])}let p=Object.keys(h).map(e=>parseInt(e,10)).sort(WO);this.layers=[];for(const x of p){const e=h[x];e.sort((e,t)=>{const n=s[e.id],a=s[t.id];return n<a?-1:n>a?1:0});for(const t of e)t instanceof _M&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=h,p=Object.keys(d).map(e=>parseInt(e,10)).sort(WO);const f=this.inputs.slice(),m=[];for(const x of p)for(const e of d[x]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new CO("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(m));for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=d;const g=this.layers.map(e=>e.name);for(const x of g){const e=g.filter(e=>e===x).length;if(1!==e)throw new CO('The name "'.concat(x,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new vP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new EO("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let a=0;const r=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);r&&this.parseWeights(e);for(const i of this.layers)for(const[e,t]of i.weights.entries()){const s=r?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[s])throw new EO("Duplicate weight name: ".concat(s));n[s]=t,a++}const s=[];for(const i in e){let a=i;if(null==n[i]){const e=i.split("/");a=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[a])s.push([n[a],e[i]]);else if(t)throw new EO("Provided weight data has no target variable: ".concat(i));delete n[a]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new EO("".concat(e.length," of ").concat(a," weights are not set: ")+"".concat(e))}fP(s)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),a=["vars","layer_checkpoint_dependencies"],r=n.map(e=>e.startsWith("_")?e.slice(1):e).filter(e=>!a.includes(e)).join("/");r!==t&&(e[r]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(AM),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=IM(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return EN(()=>{e=MO(e);const n=new NP;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return CP(this.outputs,n,t)})}computeMask(e,t){return EN(()=>{let n;return e=MO(e),n=null==t?_O(null,e.length):MO(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=oP(e);if(t.length!==this.inputLayers.length)throw new EO("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let i=0;i<t.length;i++){const e=this.inputLayers[i],a=t[i];n[e.name+"_0_0"]=a}const a=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(WO);if(a.length>1)for(const i of a){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const a=[];for(let i=0;i<t.inboundLayers.length;i++){const e=t.inboundLayers[i],r=t.nodeIndices[i],s=t.tensorIndices[i],o=n["".concat(e.name,"_").concat(r,"_").concat(s)];a.push(o)}const r=oP(e.computeOutputShape(PO(a))),s=e.inboundNodes.indexOf(t);for(let t=0;t<r.length;t++){n["".concat(e.name,"_").concat(s,"_").concat(t)]=r[t]}}}const r=[],s=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],t=this.outputLayersNodeIndices[i],n=this.outputLayersTensorIndices[i],a="".concat(e.name,"_").concat(t,"_").concat(n);s.push(a)}for(let i=0;i<s.length;i++){const e=s[i];OO(e in n),r.push(n[e])}return PO(r)}runInternalGraph(e,t){null==t&&(t=_O(null,e.length));const n={};for(let o=0;o<this.inputs.length;++o){const a=this.inputs[o],r=e[o],s=t[o];n[a.id]=[r,s]}const a=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(WO);for(const o of a){const e=this.nodesByDepth[o];for(const t of e){const e=t.outboundLayer,a=t.inputTensors,r=t.outputTensors,s=new Array;for(const t of a)t.id in n&&s.push(n[t.id]);if(s.length===a.length){let a,i,o,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===s.length){const[t,n]=s[0];null==c.mask&&(c.mask=n),o=MO(e.call(t,c)),l=MO(e.computeMask(t,n)),a=[t],i=[n]}else a=s.map(e=>e[0]),i=s.map(e=>e[1]),null==c.mask&&(c.mask=i),o=MO(e.call(a,c)),l=MO(e.computeMask(a,i));if(e.activityRegularizer)throw new TO("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<r.length;++e){const t=r[e],a=o[e],s=l[e];n[t.id]=[a,s]}}}}const r=[],s=[],i=[];for(const o of this.outputs){OO(o.id in n,"Could not compute output ".concat(o.name," : ").concat(o.id));const[e,t]=n[o.id];i.push(e.shape),r.push(e),s.push(t)}return[r,s,i]}buildNodeConversionMap(e){const t={};let n;for(const a of this.layers){n=a instanceof _M?1:0;for(let e=0;e<a.inboundNodes.length;e++){const r=_M.nodeKey(a,e);this.containerNodes.has(r)&&(t[r]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new EO("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new EO("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new EO("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return EN(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const a=_M.nodeKey(t,n);this.containerNodes.has(a)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const s of this.layers){const e=s.getClassName(),a=s.getConfig(),r=[];for(let n=0;n<s.inboundNodes.length;n++){const e=s.inboundNodes[n],a=_M.nodeKey(s,n);let i={};if(this.containerNodes.has(a)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(CEe){console.warn("Layer ".concat(s.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),i={}}if(e.inboundLayers.length>0){const n=[];for(let a=0;a<e.inboundLayers.length;a++){const r=e.inboundLayers[a],s=e.nodeIndices[a],o=e.tensorIndices[a];let l=t[_M.nodeKey(r,s)];null==l&&(l=0),n.push([r.name,l,o,i])}r.push(n)}}}const i={};i.name=s.name,i.className=e,i.config=a,i.inboundNodes=r,n.push(i)}e.layers=n;const a=[];for(let s=0;s<this.inputLayers.length;s++){const e=this.inputLayers[s],n=this.inputLayersNodeIndices[s],r=_M.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let i=t[r];null!==i&&void 0!==i||(i=0);const o=this.inputLayersTensorIndices[s];a.push([e.name,i,o])}e.inputLayers=a;const r=[];for(let s=0;s<this.outputLayers.length;s++){const e=this.outputLayers[s],n=this.outputLayersNodeIndices[s],a=_M.nodeKey(e,n);if(!this.containerNodes.has(a))continue;let i=t[a];null!==i&&void 0!==i||(i=0);const o=this.outputLayersTensorIndices[s];r.push([e.name,i,o])}return e.outputLayers=r,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={},r={};function s(e,t){e.name in r?r[e.name].push(t):r[e.name]=[t]}function i(e,t){const n=[];let r;for(const i of t){const o=i[0],l=i[1],c=i[2];if(r=null==i[3]?{}:i[3],!(o in a))return void s(e,t);const u=a[o];if(u.inboundNodes.length<=l)return void s(e,t);const d=u.inboundNodes[l];n.push(d.outputTensors[c])}n.length>0&&e.apply(PO(n),r)}function o(e){const r=e.name,i=QP(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),a[r]=i;e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new EO("Corrupted configuration, expected array for nodeData: ".concat(e));s(i,e)})}const l=t.name,c=t.layers;for(const f of c)o(f);for(;!HO(r);)for(const e of c){const t=a[e.name];if(t.name in r){const e=r[t.name];delete r[t.name];for(const n of e)i(t,n)}}const u=[],d=[],h=t.inputLayers;for(const f of h){const e=f[0],t=f[1],n=f[2];OO(e in a);const r=a[e].inboundNodes[t].outputTensors;u.push(r[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];OO(e in a);const r=a[e].inboundNodes[t].outputTensors;d.push(r[n])}return new e({inputs:u,outputs:d,name:l})}get stateful(){if(this._stateful)throw new EO("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){EN(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function OM(e,t,n){const a=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===a)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==a)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(a," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error("The model has multiple (".concat(a,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(a," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function RM(e,t){return OM(e,t,"classWeight")}async function PM(e,t,n,a){if(null!=t||null!=a)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=EN(()=>{if(1===e.shape.length)return gj(e);if(2===e.shape.length){if(e.shape[1]>1){return NS(e,1)}if(1===e.shape[1])return zS(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),a=Array.from(await t.data());TN(t);const r=[];return a.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");r.push(n[e])}),vE(r,"float32")}return null}function MM(e,t){return bj(e,t)}function DM(e,t){let n,a;const r=t;n=r.xs,a=r.ys,nv(null!=n&&null!=a,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t));const s=FM("input",e.inputNames,n),i=FM("output",e.outputNames,a),o=s[0].shape[0];nv(s.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(s.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")),nv(i.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<s.length;l++)nv(s[l].shape[0]===o,()=>"Batch size mismatch: input "+"".concat(e.inputNames[l]," has ").concat(s[l].shape[0],"; ")+"expected  ".concat(o," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<i.length;l++)nv(i[l].shape[0]===o,()=>"Batch size mismatch: output "+"".concat(e.outputNames[l]," has ").concat(i[l].shape[0],"; ")+"expected  ".concat(o," based on input ").concat(e.inputNames[0],"."));return{xs:s,ys:i}}function FM(e,t,n){if(n instanceof Wk)return[n];if(Array.isArray(n))return nv(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{const a=[];for(const r of t){if(null==n[r])throw new EO("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(r,"'."));a.push(n[r])}return a}}async function LM(e,t,n){const a=null!=n.batchesPerEpoch;if(nv(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),nv(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),nv(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)),nv(!a||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)),nv(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const r=null!=n.validationData;let s,i;if(r)if(zM(n.validationData))nv(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches));else{const e=function(e){if(3===e.length)throw new TO("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);s=e.xs,i=e.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=r?l.slice().concat(l.map(e=>"val_"+e)):l.slice();const u=XP(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:h,history:p}=$P(u,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,r,c);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const c={};await h.onEpochBegin(f);let u=0,d=0;for(a||(m=await t.iterator());!a||u<n.batchesPerEpoch;){const t=await m.next();if(a&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:a,ys:r}=DM(e,t.value),s={};s.batch=d,s.size=a[0].shape[0],await h.onBatchBegin(d,s);const i=[];if(null!=n.classWeight){const t=RM(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await PM(r[e],null,t[e]))}const c=a.concat(r).concat(i),p=o(c);TN(c);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];s[t]=n,IN(n)}await h.onBatchEnd(d,s),UP(s),d++,u++}if(a?u>=n.batchesPerEpoch:t.done){if(r){let t;t=zM(n.validationData)?MO(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):MO(e.evaluate(s,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,c),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function zM(e){return"function"===typeof e.iterator}function BM(e){nv(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function UM(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>jR(e,t,n-t)):jR(e,t,n-t)}function WM(e,t){return EN(()=>null==e?null:Array.isArray(e)?e.map(e=>WM(e,t)):OR(e,"int32"===t.dtype?t:mj(t,"int32")))}function VM(e,t){const n=[];let a=0,r=null;for(;a<e;)r=a+t,r>=e&&(r=e),n.push([a,r]),a=r;return n}function HM(e){const t=[];e instanceof Wk&&(e=[e]);for(let n=0;n<e.length;++n){const a=e[n];if(1===a.rank)t.push(NR(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(a)}}return t}function GM(e,t){if(null==e)return;const n=[];if(t instanceof Wk)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const r in t){const e=t[r];n.push(e.id)}const a=[];if(e instanceof Wk)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&a.push(e)});else if(null!=e)for(const r in e){const t=e[r];-1===n.indexOf(t.id)&&a.push(t)}a.forEach(e=>{e.isDisposed||e.dispose()})}function qM(e){return Array.isArray(e)}function KM(e){return!function(e){return e instanceof Wk}(e)&&!qM(e)}function XM(e,t,n){let a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(qM(e)&&e.length>0)t=!0;else if(KM(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new EO("Error when checking model ".concat(s," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map(e=>null);if(KM(e)){a=[];for(const n of t){if(null==e[n])throw new EO('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));a.push(e[n])}}else if(qM(e)){if(e.length!==t.length)throw new EO("Error when checking model ".concat(s,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));a=e}else{if(t.length>1)throw new EO("The model ".concat(s," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));a=[e]}if(a=HM(a),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=a[i];if(e.shape.length!==n[i].length)throw new EO("Error when checking ".concat(s,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[i].length;++t){if(0===t&&!r)continue;const a=e.shape[t],o=n[i][t];if(null!=o&&o>=0&&a!==o)throw new EO("".concat(s," expected a batch of elements where each ")+"example has shape [".concat(n[i].slice(1,n[i].length),"] ")+"(i.e.,tensor shape [*,".concat(n[i].slice(1,n[i].length),"])")+" but the ".concat(s," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return a}function YM(e,t,n){let a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new EO("Error when checking model ".concat(s,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));a=e}else{if(t.length>1)throw new EO("The model expects ".concat(t.length," ").concat(s," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));a=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=a[i];if(e.shape.length!==n[i].length)throw new EO("Error when checking ".concat(s,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let a=0;a<n[i].length;++a){if(0===a&&!r)continue;const o=e.shape[a],l=n[i][a];if(null!=l&&l!==o)throw new EO("Error when checking ".concat(s,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class $M extends _M{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new EO("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");NM(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>TT.adagrad(.01),Adadelta:()=>TT.adadelta(1,.95,wR()),Adam:()=>TT.adam(.001,.9,.999,wR()),Adamax:()=>TT.adamax(.002,.9,.999,wR(),0),RMSProp:()=>TT.rmsprop(.001,.9,0,wR()),SGD:()=>TT.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new EO("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof _j))throw new EO("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new EO("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map(e=>cM(e))}else{const n=cM(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new EO('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(cM(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const e=this.internalOutputShapes[s],t=this.outputNames[s];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[s])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],uR("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const a=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const a of t){let t=n.hasOwnProperty(a)?n[a]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),r=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};uR("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=t=>{let n,a,s;for(const i of t){if("string"===typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let r;1===t[t.length-1]||this.lossFunctions[e]===sM?-1!==["accuracy","acc"].indexOf(i)?a=uM:-1!==["crossentropy","ce"].indexOf(i)&&(a=pM):this.lossFunctions[e]===rM?-1!==["accuracy","acc"].indexOf(i)?a=fM:-1!==["crossentropy","ce"].indexOf(i)&&(a=gM):-1!==["accuracy","acc"].indexOf(i)?a=dM:-1!==["crossentropy","ce"].indexOf(i)&&(a=mM),-1!==["accuracy","acc"].indexOf(i)?r="acc":-1!==["crossentropy","ce"].indexOf(i)&&(r="ce"),s=a,n=""+r}else{const e=vM(i);s=e,n=""+yM(i)}let t;uR(n,()=>{t=s}),r(e,n,t)}};t(a[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=null==n.batchSize?32:n.batchSize;BM(a);const r=this.standardizeUserDataXY(e,t,!0,a);try{const e=r[0].concat(r[1]);this.makeTestFunction();const t=this.testFunction;return PO(this.testLoop(t,e,a,n.verbose,n.steps))}finally{GM(r[0],e),GM(r[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const a=null!=(n=n||{}).batches,r=e.testFunction;let s=[];if(n.verbose>0)throw new TO("Verbose mode is not implemented yet.");nv(!a||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches)));const i=function(e){return"function"===typeof e.next}(t)?t:await t.iterator();let o=0,l=0;for(;!a||l<n.batches;){const t=await i.next();if(s=EN(()=>{if(t.value){const{xs:n,ys:a}=DM(e,t.value),i=n.concat(a),c=EN(()=>r(i));if(TN(i),0===l)for(let e=0;e<c.length;++e)s.push(Sj(0));const u=i[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=s[e];s[e]=EN(()=>xj(s[e],bj(u,t))),l>0&&TN(n)}TN(c),o+=u,++l}return s}),t.done){a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<s.length;++c){const e=s[c];s[c]=yj(s[c],o),TN(e)}return PO(s)}(this,e,t)}checkNumSamples(e,t,n){let a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(a=null,null!=t)throw new EO("If ".concat(r," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new EO("Either the input data should have a defined shape, or "+"".concat(r," shoud be specified."));a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new EO("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),a=n?t:[t],r=this.retrieveSymbolicTensors(a),s=new NP;if(e instanceof Wk&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new EO("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)s.add(this.inputs[t],e[t])}else for(const o of this.inputs){const t=e[o.name];if(null==t)throw new EO("No value is provided for the model's input ".concat(o.name));s.add(o,t)}const i=CP(r,s);return n?i:i[0]}retrieveSymbolicTensors(e){const t=_O(null,e.length);let n=e.length;for(const a of this.layers){const r=Array.isArray(a.output)?a.output:[a.output],s=r.map(e=>e.name);for(let a=0;a<e.length;++a){const i=s.indexOf(e[a]);if(-1!==i&&(t[a]=r[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,a)=>{null==t&&n.push(e[a])}),new EO("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return EN(()=>{const a=this.checkNumSamples(e);if(n)throw new TO("Verbose predictLoop() is not implemented yet.");const r=VM(a,t),s=this.outputs.map(e=>[]);for(let t=0;t<r.length;++t){const n=EN(()=>{const n=r[t][0],a=r[t][1],s=UM(e,n,a),i=[];if(Array.isArray(s))for(let e=0;e<s.length;++e)i.push({key:this.inputs[e],value:s[e]});else i.push({key:this.inputs[0],value:s});const o=new NP(i);return CP(this.outputs,o)});n.forEach((e,t)=>s[t].push(e))}return PO(s.map(e=>XS(e,0)))})}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=HM(e);YM(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return BM(e),this.predictLoop(n,e)}finally{GM(n,e)}}predictOnBatch(e){YM(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new CO("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let r=0;r<this.feedOutputShapes.length;++r){const e=this.feedOutputShapes[r];this.feedLossFns[r]===rM?a.push(e.slice(0,e.length-1).concat([1])):a.push(e)}if(function(e,t){const n=VO(e.map(e=>e.shape[0]));n.sort();const a=VO(t.map(e=>e.shape[0]));if(a.sort(),n.length>1)throw new EO("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(e=>e.shape))));if(a.length>1)throw new EO("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(e=>e.shape))));if(n.length>0&&a.length>0&&!iv(n,a))throw new EO("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(n[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(e=XM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=XM(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){const a=[ZP,sM,aM];for(let r=0;r<e.length;++r){const s=e[r],i=t[r],o=n[r];if(null!=i){if(i===aM&&1===s.shape[s.shape.length-1])throw new EO("You are passing a target array of shape ".concat(s.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==a.indexOf(i)){const e=s.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){const a=e[n],r=t[n];if(null!=r&&a!==r)throw new EO("A target Tensor with shape ".concat(s.shape," was passed for an ")+"output of shape ".concat(o,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new EO("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,a){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5?arguments[5]:void 0;const[i,o]=this.standardizeUserDataXY(e,t,r,s);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=a){const e=RM(a,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await PM(o[t],null,e[t]))}return[i,o,l]}testLoop(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;return EN(()=>{const s=this.checkNumSamples(t,n,r,"steps"),i=[];if(a>0)throw new TO("Verbose mode is not implemented yet.");if(null!=r)throw new TO("steps mode in testLoop() is not implemented yet");{const a=VM(s,n),r=vE(yR(0,s));for(let n=0;n<a.length;++n){const s=a[n][0],o=a[n][1],l=jR(r,s,o-s),c=WM(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)i.push(Sj(0));for(let e=0;e<u.length;++e){const t=u[e];i[e]=xj(i[e],bj(o-s,t))}}for(let e=0;e<i.length;++e)i[e]=yj(i[e],s)}return i})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const a=e[n];let r=a;if(RO(e,a)>1){const t=RO(e.slice(0,n),a);r+="_".concat(t)}t.push(r)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],i=this.collectedTrainableWeights.map(e=>e.read()),o=this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new NP(e),o=CP(this.outputs,i,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(a[n],o[n]);null!=r[n]&&(e=MM(e,r[n]));const s=LC(e);t.push(s),l=0===n?e:xj(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],r=this.metricsTensors[n][1];e=LC(t(a[r],o[r]))}IN(e),s.push(e)}return l=LC(l),this.calculateLosses().forEach(e=>{l=xj(l,e)}),l},!0,i);return[o].concat(s)}}makeTestFunction(){this.testFunction=e=>EN(()=>{const t=[];let n;const a=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let e=0;e<this.inputs.length;++e)s.push({key:this.inputs[e],value:a[e]});const i=new NP(s),o=CP(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const a=this.lossFunctions[e],s=LC(a(r[e],o[e]));n=0===e?s:xj(n,s),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],a=this.metricsTensors[e][1],s=LC(n(r[a],o[a]));t.push(s)}return t})}async fit(e,t){let n,a,r,s,i,o,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const h=null==d.batchSize?32:d.batchSize;BM(h);const p=!1,f=await this.standardizeUserData(e,t,d.sampleWeight,d.classWeight,p,h);n=f[0],a=f[1],u=f[2];let m,g=!1;if(null!=d.validationData&&d.validationData.length>0){if(g=!0,2!==d.validationData.length)throw 3===d.validationData.length?new TO("validationData including sample weights is not supported yet."):new EO("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(d.validationData," is invalid."));i=d.validationData[0],o=d.validationData[1];const e=!0,t=await this.standardizeUserData(i,o,null,null,e,h);l=t[0],c=t[1],m=l.concat(c)}else if(null!=d.validationSplit&&d.validationSplit>0&&d.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-d.validationSplit)),t=n[0].shape[0];l=UM(n,e,t),r=n,n=UM(n,0,e),c=UM(a,e,t),s=a,a=UM(a,0,e),m=l.concat(c)}else null!=d.validationSteps&&(g=!0);const x=n.concat(a).concat(u);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let b,w;g?(this.makeTestFunction(),b=this.testFunction,w=y.slice().concat(y.map(e=>"val_"+e))):(b=null,m=[],w=y.slice());const k=XP(d.callbacks,d.yieldEvery);return await this.fitLoop(v,x,y,h,d.epochs,d.verbose,k,b,m,d.shuffle,w,d.initialEpoch,null,null)}finally{this.isTraining=!1,GM(n,e),GM(a,t),GM(r,e),GM(s,t),GM(l,i),GM(c,o),null!=u&&TN(u)}}async fitLoop(e,t,n,a,r,s,i,o,l,c,u,d,h,p){null==a&&(a=32),null==r&&(r=1),null==c&&(c=!0),null==d&&(d=0);let f=!1;if(null!=o&&null!=l&&(f=!0),null!=p&&(f=!0,null==h))throw new EO("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,a,h,"steps_per_epoch");let g;null!=m&&(g=yR(0,m)),null==s&&(s=1);const{callbackList:x,history:v}=$P(i,s,r,d,m,h,a,f,u);x.setModel(this),this.history=v,await x.onTrainBegin(),this.stopTraining_=!1;for(let y=d;y<r;++y){await x.onEpochBegin(y);const r={};if(null!=h)throw new TO("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new TO("batch shuffling is not implemneted yet");c&&Jx(g);const s=vE(g),i=VM(m,a);for(let c=0;c<i.length;++c){const u={};if(await x.onBatchBegin(c,u),EN(()=>{const d=i[c][0],h=i[c][1],p=jR(s,d,h-d);u.batch=c,u.size=h-d;const m=WM(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],a=g[e];u[t]=a,IN(a)}if(c===i.length-1&&f){const e=this.testLoop(o,l,a);for(let t=0;t<n.length;++t){const a=n[t],s=e[t];IN(s),r["val_"+a]=s}}}),await x.onBatchEnd(c,u),UP(u),this.stopTraining_)break}s.dispose()}if(await x.onEpochEnd(y,r),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return LM(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),a=n[0],r=n[1],s=this.makeTrainFunction()(a.concat(r)),i=[];for(const o of s){const e=await o.data();i.push(e[0])}return TN(s),GM(n[0],e),GM(n[1],t),PO(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,a=n?this.trainableWeights:this.weights,r=this.getWeights(n);for(let s=0;s<a.length;++s)n&&!a[s].trainable||t.push({name:a[s].originalName,tensor:r[s]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=CN().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-CN().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=DO(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>DO(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const a of t){if("string"!==typeof n[a])throw new Error("Serialization of non-string loss is not supported.");e[a]=DO(n[a])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[DO(yM(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>DO(yM(e)));{const e={};for(const t in this.metrics)e[t]=DO(yM(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=QP(TM(e.optimizer_config));let n,a;if("string"===typeof e.loss)n=FO(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>FO(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=FO(e.loss[t])}if(Array.isArray(e.metrics))a=e.metrics.map(e=>FO(e));else if(null!=e.metrics){a={};for(const t in e.metrics)a[t]=FO(e.metrics[t])}this.compile({loss:n,metrics:a,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,BN.getSaveHandlers(n));if(0===t.length)throw new EO("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new EO("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}var n;if(null==e.save)throw new EO("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const a=await ON(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(AM),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await ON(await this.optimizer.getWeights(),e);a.specs.push(...n),a.data=(s=[a.data,t],jN.join(s))}var s;if(null!=this.userDefinedMetadata){const e=!0;wM(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=a.data,r.weightSpecs=a.specs,e.save(r)}setUserDefinedMetadata(e){wM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}$M.className="Model",Aj($M);class QM extends $M{}QM.className="Functional",Aj(QM);class JM extends $M{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:ZO("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new EO("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof JM||e instanceof $M;let n;if(t){if(n=e,1!==n.outputs.length)throw new EO("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new EO("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new EO("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new EO("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new kP({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new EO("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new EO("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=wP(this.outputs[0])}this.inboundNodes=[],new vP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:_O(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(cP(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new $M({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new CO("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new CO("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new CO("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new CO("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new EO("Legacy serialization format not supported yet.");n=t}else nv(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),n=t.layers,delete t.layers,r=t;const s=new e(r);if(!(s instanceof JM))throw new TO("Sequential.fromConfig called on non-Sequential input: ".concat(s));for(const i of n){const e=QP(i,void 0,a);a&&e.setFastWeightInitDuringBuild(!0),s.add(e)}return s}set stopTraining(e){if(null==this.model)throw new EO("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new EO("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}JM.className="Sequential",Aj(JM);class ZM extends Tj{getConfig(){return{}}}class eD extends ZM{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new TO("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return lC(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}eD.className="elu",Aj(eD);class tD extends ZM{apply(e){return rE(e)}}tD.className="selu",Aj(tD);class nD extends ZM{apply(e){return nE(e)}}nD.className="relu",Aj(nD);class aD extends ZM{apply(e){return EN(()=>BC(6,nE(e)))}}aD.className="relu6",Aj(aD);class rD extends ZM{apply(e){return e}}rD.className="linear",Aj(rD);class sD extends ZM{apply(e){return iE(e)}}sD.className="sigmoid",Aj(sD);class iD extends ZM{apply(e){return function(e){return EN(()=>{const t=xj(.5,bj(.2,e));return KS(t,0,1)})}(e)}}iD.className="hardSigmoid",Aj(iD);class oD extends ZM{apply(e){return pE(e)}}oD.className="softplus",Aj(oD);class lD extends ZM{apply(e){return function(e){return EN(()=>yj(e,xj(Lj(e),1)))}(e)}}lD.className="softsign",Aj(lD);class cD extends ZM{apply(e){return xE(e)}}cD.className="tanh",Aj(cD);class uD extends ZM{apply(e){return hE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}uD.className="softmax",Aj(uD);class dD extends ZM{apply(e){return jC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}dD.className="logSoftmax",Aj(dD);class hD extends ZM{apply(e){return EN(()=>EN(()=>{const t=Math.sqrt(2),n=bj(.5,xj(1,uC(yj(e,t))));return bj(e,n)}))}}hD.className="gelu",Aj(hD);class pD extends ZM{apply(e){return EN(()=>bj(.5,bj(e,xj(1,xE(bj(wj(yj(2,Math.PI)),xj(e,bj(.044715,Mj(e,3)))))))))}}pD.className="gelu_new",Aj(pD);class fD extends ZM{apply(e){return EN(()=>bj(e,xE(pE(e))))}}fD.className="mish",Aj(fD);class mD extends ZM{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return EN(()=>bj(iE(bj(e,t)),e))}}function gD(e){return e.getClassName()}function xD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return UO(e,Ij.getMap().classNameMap,t,"activation")}function vD(e){if(null==e){const e={className:"linear",config:{}};return xD(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},xD(t)}return e instanceof ZM?e:xD(e)}function yD(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}mD.className="swish",Aj(mD);class bD extends Tj{}class wD extends bD{constructor(e){super(),yD(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return EN(()=>{let t=GC([1]);return this.hasL1&&(t=xj(t,NC(bj(this.l1,Lj(e))))),this.hasL2&&(t=xj(t,NC(bj(this.l2,RR(e))))),zS(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}wD.className="L1L2",Aj(wD);const kD={l1l2:"L1L2"};function ND(e){return zO(e)}function jD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return UO(e,Ij.getMap().classNameMap,t,"regularizer")}function SD(e){if(null==e)return null;if("string"===typeof e){return jD({className:e in kD?kD[e]:e,config:{}})}return e instanceof bD?e:jD(e)}class CD extends bP{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=lP(e);let n=nE(e);return null!=this.maxValue&&(n=KS(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}CD.className="ReLU",Aj(CD);class ED extends bP{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=lP(e);return yC(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}ED.className="LeakyReLU",Aj(ED);class TD extends bP{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=sP(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=SD(e.alphaRegularizer),this.alphaConstraint=zP(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new EO("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=cP(e)).slice(1);if(null!=this.sharedAxes)for(const a of this.sharedAxes)t[a-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let a=1;a<e.length;++a)n[a]=e[a];this.inputSpec=[new mP({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=lP(e),YC(e,this.alpha.read())}getConfig(){const e={alphaInitializer:rP(this.alphaInitializer),alphaRegularizer:ND(this.alphaRegularizer),alphaConstraint:FP(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}TD.className="PReLU",Aj(TD);class ID extends bP{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new TO("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=lP(e);return lC(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}ID.className="ELU",Aj(ID);class AD extends bP{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=lP(e);return bj(n,mj(xC(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}AD.className="ThresholdedReLU",Aj(AD);class _D extends bP{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new uD).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return EN(()=>{let n=lP(e);const a=t.mask;if(null!=a){const e=bj(Dj(qC(n.shape),mj(a,n.dtype)),Sj(-1e9));n=xj(n,e)}return this.axis instanceof Array?this.axis.length>1?dC(Dj(n,RC(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function OD(e,t,n){if("number"===typeof e)return _O(e,t);if(e.length!==t)throw new EO("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let a=0;a<t;++a){const r=e[a];if(!mR(r))throw new EO("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(r))}return e}function RD(e,t,n,a){if(null==e)return e;let r;return r="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((r+a-1)/a)}function PD(e,t,n,a){if(null==e)return null;if("valid"===a)e=e*t+vR([n-t,0]);else{if("same"!==a)throw new EO("Unsupport padding mode: ".concat(a,"."));e*=t}return e}function MD(e,t){return EN(()=>(iR(t),"channelsFirst"===t?SE(e,[0,2,3,1]):e))}function DD(e,t){return EN(()=>(iR(t),"channelsFirst"===t?SE(e,[0,2,3,4,1]):e))}function FD(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",s=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return EN(()=>{if(null==s&&(s="channelsLast"),iR(s),3!==e.shape.length)throw new EO("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new EO("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new EO("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if("channelsFirst"===s&&(e=SE(e,[0,2,1])),"causal"===r)throw new TO("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=eC(e,t,a,"same"===r?"same":"valid","NWC",i);return null!=n&&(o=MR(o,n)),o})}function LD(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",s=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return EN(()=>{if(null==s&&(s="channelsLast"),iR(s),3!==e.rank&&4!==e.rank)throw new EO("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new EO("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let l=MD(e,s);if("causal"===r)throw new TO("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=LE({x:l,filter:t,strides:a,pad:"same"===r?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===s&&(l=SE(l,[0,3,1,2])),l})}function zD(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",s=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return EN(()=>{if(null==s&&(s="channelsLast"),iR(s),4!==e.rank&&5!==e.rank)throw new EO("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new EO("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let o=DD(e,s);if("causal"===r)throw new TO("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=aC(o,t,a,"same"===r?"same":"valid","NDHWC",i),null!=n&&(o=MR(o,n)),"channelsFirst"===s&&(o=SE(o,[0,4,1,2,3])),o})}_D.className="Softmax",Aj(_D);class BD extends bP{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",BD.verifyArgs(t),this.rank=e,KO(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new TO("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=OD(t.kernelSize,e,"kernelSize"),this.strides=OD(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,oR(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,iR(this.dataFormat),this.activation=vD(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=sP(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=zP(t.biasConstraint),this.biasRegularizer=SD(t.biasRegularizer),this.activityRegularizer=SD(t.activityRegularizer),this.dilationRate=OD(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new EO("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new EO("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new EO("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(OO("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!qO(e.kernelSize,"number",1,3))throw new EO("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:gD(this.activation),useBias:this.useBias,biasInitializer:rP(this.biasInitializer),biasRegularizer:ND(this.biasRegularizer),activityRegularizer:ND(this.activityRegularizer),biasConstraint:FP(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class UD extends BD{constructor(e,t){super(e,t),this.kernel=null,UD.verifyArgs(t),this.filters=t.filters,KO(this.filters,"filters"),this.kernelInitializer=sP(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=zP(t.kernelConstraint),this.kernelRegularizer=SD(t.kernelRegularizer)}build(e){e=cP(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new EO("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],a=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return EN(()=>{let t;e=lP(e);const n=null==this.bias?null:this.bias.read(),a=YO(this.activation.getClassName());if(null!=a&&2===this.rank)t=LD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(1===this.rank)t=FD(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=LD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new TO("convolutions greater than 3D are not implemented yet.");t=zD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=cP(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let r=0;r<n.length;++r){const e=RD(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(e)}let a=[e[0]];return"channelsLast"===this.dataFormat?(a=a.concat(t),a.push(this.filters)):(a.push(this.filters),a=a.concat(t)),a}getConfig(){const e={filters:this.filters,kernelInitializer:rP(this.kernelInitializer),kernelRegularizer:ND(this.kernelRegularizer),kernelConstraint:FP(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new EO("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class WD extends UD{constructor(e){super(2,e),WD.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!qO(e.kernelSize,"number",1,2))throw new EO("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}WD.className="Conv2D",Aj(WD);class VD extends UD{constructor(e){super(3,e),VD.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new EO("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}VD.className="Conv3D",Aj(VD);class HD extends WD{constructor(e){if(super(e),this.inputSpec=[new mP({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new EO("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=cP(e)).length)throw new EO("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new EO("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new mP({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return EN(()=>{let t=lP(e);if(4!==t.shape.length)throw new EO("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,a=n[0];let r,s;"channelsFirst"===this.dataFormat?(r=2,s=3):(r=1,s=2);const i=n[r],o=n[s],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],d=this.strides[1],h=[a,PD(i,u,l,this.padding),PD(o,d,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=SE(t,[0,2,3,1]));let p=nC(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=SE(p,[0,3,1,2])),null!=this.bias&&(p=MR(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){const t=(e=cP(e)).slice();let n,a,r;"channelsFirst"===this.dataFormat?(n=1,a=2,r=3):(n=3,a=1,r=2);const s=this.kernelSize[0],i=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[a]=PD(t[a],o,s,this.padding),t[r]=PD(t[r],l,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}HD.className="Conv2DTranspose",Aj(HD);class GD extends VD{constructor(e){if(super(e),this.inputSpec=[new mP({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new EO("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=cP(e)).length)throw new EO("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new EO("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new mP({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return EN(()=>{let t=lP(e);if(5!==t.shape.length)throw new EO("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,a=n[0];let r,s,i;"channelsFirst"===this.dataFormat?(i=2,r=3,s=4):(i=1,r=2,s=3);const o=n[i],l=n[r],c=n[s],u=this.kernelSize[0],d=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[a,PD(o,p,u,this.padding),PD(l,f,d,this.padding),PD(c,m,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=SE(t,[0,2,3,4,1]));let x=sC(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(x=SE(x,[0,4,1,2,3])),null!==this.bias&&(x=MR(x,this.bias.read(),this.dataFormat)),null!==this.activation&&(x=this.activation.apply(x)),x})}computeOutputShape(e){const t=(e=cP(e)).slice();let n,a,r,s;"channelsFirst"===this.dataFormat?(n=1,a=2,r=3,s=4):(n=4,a=1,r=2,s=3);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[a]=PD(t[a],c,i,this.padding),t[r]=PD(t[r],u,o,this.padding),t[s]=PD(t[s],d,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}GD.className="Conv3DTranspose",Aj(GD);class qD extends UD{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new EO("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new EO("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new EO("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=sP(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=SD(t.depthwiseRegularizer),this.depthwiseConstraint=zP(t.depthwiseConstraint),this.pointwiseInitializer=sP(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=SD(t.pointwiseRegularizer),this.pointwiseConstraint=zP(t.pointwiseConstraint)}build(e){if((e=cP(e)).length<this.rank+2)throw new EO("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new EO("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],a=this.kernelSize.concat([n,this.depthMultiplier]),r=[];for(let i=0;i<this.rank;++i)r.push(1);r.push(n*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new mP({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return EN(()=>{let t;if(e=lP(e),1===this.rank)throw new TO("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=SE(e,[0,2,3,1])),t=sE(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=MR(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=SE(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=rP(this.depthwiseInitializer),e.pointwiseInitializer=rP(this.pointwiseInitializer),e.depthwiseRegularizer=ND(this.depthwiseRegularizer),e.pointwiseRegularizer=ND(this.pointwiseRegularizer),e.depthwiseConstraint=FP(this.depthwiseConstraint),e.pointwiseConstraint=FP(this.pointwiseConstraint),e}}qD.className="SeparableConv";class KD extends qD{constructor(e){super(2,e)}}KD.className="SeparableConv2D",Aj(KD);class XD extends UD{constructor(e){super(1,e),XD.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!qO(e.kernelSize,"number",1,1))throw new EO("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}XD.className="Conv1D",Aj(XD);class YD extends bP{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return EN(()=>{if(e=lP(e),"channelsLast"===this.dataFormat){const t=CR(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return CR(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=CR(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return CR(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}YD.className="Cropping2D",Aj(YD);class $D extends bP{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,iR(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){GO(tR,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return EN(()=>{let t=lP(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=SE(t,[0,2,3,1]);const e=this.size[0]*n[2],a=this.size[1]*n[3],r="nearest"===this.interpolation?CT.resizeNearestNeighbor(t,[e,a]):CT.resizeBilinear(t,[e,a]);return SE(r,[0,3,1,2])}{const e=this.size[0]*n[1],a=this.size[1]*n[2];return"nearest"===this.interpolation?CT.resizeNearestNeighbor(t,[e,a]):CT.resizeBilinear(t,[e,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}$D.className="UpSampling2D",Aj($D);class QD extends BD{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=sP(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=zP(e.depthwiseConstraint),this.depthwiseRegularizer=SD(e.depthwiseRegularizer)}build(e){if((e=cP(e)).length<4)throw new EO("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new EO("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],a=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return EN(()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return EN(()=>{null==r&&(r="channelsLast"),iR(r);let i=MD(e,r);if(4!==e.rank)throw new EO("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new EO("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=oC(i,t,n,"same"===a?"same":"valid","NHWC",s),"channelsFirst"===r&&(i=SE(i,[0,3,1,2])),i})}(e=lP(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=MR(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=cP(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=RD(t,this.kernelSize[0],this.padding,this.strides[0]),s=RD(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],a,r,s]:[e[0],r,s,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=rP(this.depthwiseInitializer),e.depthwiseRegularizer=ND(this.depthwiseRegularizer),e.depthwiseConstraint=FP(this.depthwiseRegularizer),e}}function JD(e,t,n,a){if(Array.isArray(e)){if(null!=t||null!=n)throw new EO("When inputs is an array, neither initialState or constants should be provided");null!=a&&(n=e.slice(e.length-a,e.length),e=e.slice(0,e.length-a)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function r(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=r(t),constants:n=r(n)}}function ZD(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return EN(()=>{const l=t.shape.length;if(l<3)throw new EO("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(yR(2,l));if(t=SE(t,c),null!=s)throw new TO("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=r&&(r=mj(mj(r,"bool"),"float32"),r.rank===l-1&&(r=hC(r,-1)),r=SE(r,c)),a&&(t=aE(t,0),null!=r&&(r=aE(r,0)));const u=[];let d,h=n;const p=t.shape[0],f=wE(t);let m,g;null!=r&&(m=wE(r));for(let t=0;t<p;++t){const n=f[t],a=EN(()=>e(n,h));if(null==r)d=a[0],h=a[1];else{const e=EN(()=>{const e=m[t],n=Dj(KC(e),e),r=xj(bj(a[0],e),bj(h[0],n)),s=h.map((t,r)=>xj(bj(a[1][r],e),bj(t,n)));return{output:r,newStates:s}});d=e.output,h=e.newStates}o&&u.push(d)}if(o){g=gE(u,1)}return[d,g,h]})}QD.className="DepthwiseConv2D",Aj(QD);class eF extends bP{constructor(e){let t;if(super(e),null==e.cell)throw new EO("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new lF({cells:e.cell}):e.cell,null==t.stateSize)throw new EO("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new mP({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return yR(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){iP(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let a;if(a=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const a of t)n.push([e[0],a]);return[a].concat(n)}return a}computeMask(e,t){return EN(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new TO("Constants support is not implemented in RNN yet.");iP(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new mP({shape:[t,null,...n]});const a=[e[0]].concat(e.slice(2));let r;if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!iv(this.stateSpec.map(e=>e.shape[e.shape.length-1]),r))throw new EO("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map(e=>new mP({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];EN(()=>{if(!this.stateful)throw new SO("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new EO("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>GC([n,e])):this.states_=[GC([n,this.cell.stateSize])];else if(null==e)TN(this.states_),null!=this.keptStates&&(TN(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>GC([n,e])):this.states_[0]=GC([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new EO("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):TN(this.states_);for(let t=0;t<this.states_.length;++t){const a=e[t],r=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,s=[n,r];if(!iv(a.shape,s))throw new EO("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(s,", received shape=").concat(a.shape));this.states_[t]=a}}this.states_=this.states_.map(e=>IN(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});const r=JD(e,n,a,this.numConstants);e=r.inputs,n=r.initialState,a=r.constants;let s=[],i=[];if(null!=n){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new mP({shape:e.shape}));i=i.concat(this.stateSpec)}null!=a&&(t.constants=a,s=s.concat(a),this.numConstants=a.length);if(s[0]instanceof gP){const n=[e].concat(s),a=this.inputSpec.concat(i),r=this.inputSpec;this.inputSpec=a;const o=super.apply(n,t);return this.inputSpec=r,o}return super.apply(e,t)}call(e,t){return EN(()=>{const n=null==t?null:t.mask,a=null==t?null:t.training;let r=null==t?null:t.initialState;e=lP(e),null==r&&(r=this.stateful?this.states_:this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==s)throw new EO("RNN Layer has ".concat(s," state(s) but was passed ")+"".concat(r.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:a},o=ZD((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]},e,r,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],c=o[1],u=o[2];this.stateful&&this.resetStates(u,a);const d=this.returnSequences?c:l;return this.returnState?[d].concat(u):d})}getInitialState(e){return EN(()=>{let t=GC(e.shape);return t=NC(t,[1,2]),t=NR(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?IR(t,[1,e]):t):this.cell.stateSize>1?[IR(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===eF.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=QP(t.cell,n);return new e(Object.assign(t,{cell:a}))}}eF.className="RNN",Aj(eF);class tF extends bP{}class nF extends tF{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,KO(this.units,"units"),this.activation=vD(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=sP(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sP(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sP(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=SD(e.kernelRegularizer),this.recurrentRegularizer=SD(e.recurrentRegularizer),this.biasRegularizer=SD(e.biasRegularizer),this.kernelConstraint=zP(e.kernelConstraint),this.recurrentConstraint=zP(e.recurrentConstraint),this.biasConstraint=zP(e.biasConstraint),this.dropout=xR([1,vR([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=xR([1,vR([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=cP(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return EN(()=>{if(2!==e.length)throw new EO("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const a=null!=t.training&&t.training;let r;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=cF({ones:()=>KC(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=cF({ones:()=>KC(n),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;r=_R(null!=s?bj(e,s):e,this.kernel.read()),null!=this.bias&&(r=MR(r,this.bias.read())),null!=i&&(n=bj(n,i));let o=xj(r,_R(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:gD(this.activation),useBias:this.useBias,kernelInitializer:rP(this.kernelInitializer),recurrentInitializer:rP(this.recurrentInitializer),biasInitializer:rP(this.biasInitializer),kernelRegularizer:ND(this.kernelRegularizer),recurrentRegularizer:ND(this.recurrentRegularizer),biasRegularizer:ND(this.biasRegularizer),activityRegularizer:ND(this.activityRegularizer),kernelConstraint:FP(this.kernelConstraint),recurrentConstraint:FP(this.recurrentConstraint),biasConstraint:FP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}nF.className="SimpleRNNCell",Aj(nF);class aF extends eF{constructor(e){e.cell=new nF(e),super(e)}call(e,t){return EN(()=>{null!=this.cell.dropoutMask&&(TN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(TN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})})}static fromConfig(e,t){return new e(t)}}aF.className="SimpleRNN",Aj(aF);class rF extends tF{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new EO("GRUCell does not support reset_after parameter set to true.");this.units=e.units,KO(this.units,"units"),this.activation=vD(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=vD(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=sP(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sP(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sP(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=SD(e.kernelRegularizer),this.recurrentRegularizer=SD(e.recurrentRegularizer),this.biasRegularizer=SD(e.biasRegularizer),this.kernelConstraint=zP(e.kernelConstraint),this.recurrentConstraint=zP(e.recurrentConstraint),this.biasConstraint=zP(e.biasConstraint),this.dropout=xR([1,vR([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=xR([1,vR([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=cP(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return EN(()=>{if(2!==e.length)throw new EO("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=cF({ones:()=>KC(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=cF({ones:()=>KC(a),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,s=this.recurrentDropoutMask;let i,o,l;0<this.dropout&&this.dropout<1&&(e=bj(e,r[0]));let c=_R(e,this.kernel.read());this.useBias&&(c=MR(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=bj(a,s[0]));const u=this.recurrentKernel.read(),[d,h]=fE(u,[2*this.units,this.units],u.rank-1),p=_R(a,d),[f,m,g]=fE(c,3,c.rank-1),[x,v]=fE(p,2,p.rank-1);i=this.recurrentActivation.apply(xj(f,x)),o=this.recurrentActivation.apply(xj(m,v));const y=_R(bj(o,a),h);l=this.activation.apply(xj(g,y));const b=xj(bj(i,a),bj(xj(1,WC(i)),l));return[b,b]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:gD(this.activation),recurrentActivation:gD(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rP(this.kernelInitializer),recurrentInitializer:rP(this.recurrentInitializer),biasInitializer:rP(this.biasInitializer),kernelRegularizer:ND(this.kernelRegularizer),recurrentRegularizer:ND(this.recurrentRegularizer),biasRegularizer:ND(this.biasRegularizer),activityRegularizer:ND(this.activityRegularizer),kernelConstraint:FP(this.kernelConstraint),recurrentConstraint:FP(this.recurrentConstraint),biasConstraint:FP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}rF.className="GRUCell",Aj(rF);class sF extends eF{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new rF(e),super(e)}call(e,t){return EN(()=>{null!=this.cell.dropoutMask&&(TN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(TN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}sF.className="GRU",Aj(sF);class iF extends tF{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,KO(this.units,"units"),this.activation=vD(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=vD(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=sP(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sP(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sP(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=SD(e.kernelRegularizer),this.recurrentRegularizer=SD(e.recurrentRegularizer),this.biasRegularizer=SD(e.biasRegularizer),this.kernelConstraint=zP(e.kernelConstraint),this.recurrentConstraint=zP(e.recurrentConstraint),this.biasConstraint=zP(e.biasConstraint),this.dropout=xR([1,vR([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=xR([1,vR([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=cP(e))[e.length-1];let a;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;a=new((t=class extends BR{apply(t,a){const r=e.apply([n]),s=(new WR).apply([n]),i=e.apply([2*n]);return TR(TR(r,s),i)}}).className="CustomInit",t)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return EN(()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new EO("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let a=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=cF({ones:()=>KC(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=cF({ones:()=>KC(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,c,u;0<this.dropout&&this.dropout<1&&(e=bj(e,s[0]));let d=_R(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=bj(a,i[0])),d=xj(d,_R(a,this.recurrentKernel.read())),this.useBias&&(d=MR(d,this.bias.read()));const[h,p,f,m]=fE(d,4,d.rank-1);o=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),c=xj(bj(l,r),bj(o,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const g=bj(u,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:gD(this.activation),recurrentActivation:gD(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rP(this.kernelInitializer),recurrentInitializer:rP(this.recurrentInitializer),biasInitializer:rP(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:ND(this.kernelRegularizer),recurrentRegularizer:ND(this.recurrentRegularizer),biasRegularizer:ND(this.biasRegularizer),activityRegularizer:ND(this.activityRegularizer),kernelConstraint:FP(this.kernelConstraint),recurrentConstraint:FP(this.recurrentConstraint),biasConstraint:FP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}iF.className="LSTMCell",Aj(iF);class oF extends eF{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new iF(e),super(e)}call(e,t){return EN(()=>{null!=this.cell.dropoutMask&&(TN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(TN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}oF.className="LSTM",Aj(oF);class lF extends tF{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return EN(()=>{let n=e.slice(1);const a=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?a.push(n.splice(0,e.stateSize.length)):a.push(n.splice(0,1));a.reverse();const r=[];let s;for(let i=0;i<this.cells.length;++i){const o=this.cells[i];n=a[i],s=0===i?[e[0]].concat(n):[s[0]].concat(n),s=o.call(s,t),r.push(s.slice(1))}n=[];for(const e of r.slice().reverse())n.push(...e);return[s[0]].concat(n)})}build(e){let t;iP(e)&&(e=e[0]),this.cells.forEach((n,a)=>{uR("RNNCell_".concat(a),()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[];for(const r of t.cells)a.push(QP(r,n));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return pP(e)}setWeights(e){const t=[];for(const n of this.cells){const a=n.weights.length,r=e.splice(a);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],r[e]])}fP(t)}}function cF(e){const{ones:t,rate:n,training:a=!1,count:r=1,dropoutFunc:s}=e,i=()=>null!=s?s(t(),n):DR(t(),n),o=()=>FR(i,t,a);if(!r||r<=1)return IN(o().clone());return Array(r).fill(void 0).map(o).map(e=>IN(e.clone()))}lF.className="StackedRNNCells",Aj(lF);var uF=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};class dF extends eF{constructor(e){if(e.unroll)throw new TO("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new TO("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new mP({ndim:5})]}call(e,t){return EN(()=>{if(null!=this.cell.dropoutMask&&(TN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(TN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new EO("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return EN(()=>{const{stateSize:t}=this.cell,n=e.shape,a=this.computeSingleOutputShape(n),r=GC([a[0],...a.slice(2)]);return Array.isArray(t)?Array(t.length).fill(r):[r]})}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];EN(()=>{if(!this.stateful)throw new SO("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,a=this.computeSingleOutputShape(n),r=[a[0],...a.slice(2)];if(null==n[0])throw new EO("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>GC(r)):this.states_=[GC(r)];else if(null==e)TN(this.states_),null!=this.keptStates&&(TN(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>GC(r)):this.states_[0]=GC(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new EO("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):TN(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],a=r;if(!iv(n.shape,a))throw new EO("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(a,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map(e=>IN(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:a,padding:r,strides:s,dilationRate:i}=this.cell,o="channelsFirst"===t,l=e[o?3:2],c=e[o?4:3],u=RD(l,a[0],r,s[0],i[0]),d=RD(c,a[1],r,s[1],i[1]);return[...e.slice(0,2),...o?[n,u,d]:[u,d,n]]}}dF.className="ConvRNN2D";class hF extends iF{constructor(e){const{filters:t,kernelSize:n,strides:a,padding:r,dataFormat:s,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,KO(this.filters,"filters"),this.kernelSize=OD(n,2,"kernelSize"),this.kernelSize.forEach(e=>KO(e,"kernelSize")),this.strides=OD(a||1,2,"strides"),this.strides.forEach(e=>KO(e,"strides")),this.padding=r||"valid",oR(this.padding),this.dataFormat=s||"channelsLast",iR(this.dataFormat),this.dilationRate=OD(i||1,2,"dilationRate"),this.dilationRate.forEach(e=>KO(e,"dilationRate"))}build(e){var t;e=cP(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new EO("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const a=e[n],r=this.kernelSize.concat([a,4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,a=this.filters;e=new((t=class extends BR{apply(e,t){return ER([n.apply([a]),qC([a]),n.apply([2*a])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return EN(()=>{if(3!==e.length)throw new EO("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,a=e[0],r=e[1],s=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=cF({ones:()=>KC(a),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=(e,t,n)=>t&&t[n]?bj(t[n],e):e;let l=o(a,i,0),c=o(a,i,1),u=o(a,i,2),d=o(a,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=cF({ones:()=>KC(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let p=o(r,h,0),f=o(r,h,1),m=o(r,h,2),g=o(r,h,3);const[x,v,y,b]=fE(this.kernel.read(),4,3),[w,k,N,j]=this.useBias?fE(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,x,w,this.padding),c=this.inputConv(c,v,k,this.padding),u=this.inputConv(u,y,N,this.padding),d=this.inputConv(d,b,j,this.padding);const[S,C,E,T]=fE(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,S),f=this.recurrentConv(f,C),m=this.recurrentConv(m,E),g=this.recurrentConv(g,T);const I=this.recurrentActivation.apply(xj(l,p)),A=this.recurrentActivation.apply(xj(c,f)),_=xj(bj(A,s),bj(I,this.activation.apply(xj(u,m)))),O=bj(this.recurrentActivation.apply(xj(d,g)),this.activation.apply(_));return[O,O,_]})}getConfig(){const e=super.getConfig(),{units:t}=e,n=uF(e,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),a)}inputConv(e,t,n,a){const r=ZS(e,t,this.strides,a||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?MR(r,n,this.dataFormat):r}recurrentConv(e,t){return ZS(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}hF.className="ConvLSTM2DCell",Aj(hF);class pF extends dF{constructor(e){const t=new hF(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}pF.className="ConvLSTM2D",Aj(pF);class fF extends bP{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let a=0;a<this.noiseShape.length;++a)n.push(null==this.noiseShape[a]?t[a]:this.noiseShape[a]);return n}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,a=this.getNoiseShape(n);return FR(()=>DR(n,this.rate,a,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}fF.className="Dropout",Aj(fF);class mF extends fF{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}mF.className="SpatialDropout1D",Aj(mF);class gF extends bP{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,KO(this.units,"units"),this.activation=vD(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=sP(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=sP(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=zP(e.kernelConstraint),this.biasConstraint=zP(e.biasConstraint),this.kernelRegularizer=SD(e.kernelRegularizer),this.biasRegularizer=SD(e.biasRegularizer),this.activityRegularizer=SD(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=cP(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=cP(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e),a=YO(this.activation.getClassName());let r;return null!=a?r=_R(n,this.kernel.read(),a,this.bias?this.bias.read():null):(r=_R(n,this.kernel.read()),null!=this.bias&&(r=MR(r,this.bias.read())),null!=this.activation&&(r=this.activation.apply(r))),r})}getConfig(){const e={units:this.units,activation:gD(this.activation),useBias:this.useBias,kernelInitializer:rP(this.kernelInitializer),biasInitializer:rP(this.biasInitializer),kernelRegularizer:ND(this.kernelRegularizer),biasRegularizer:ND(this.biasRegularizer),activityRegularizer:ND(this.activityRegularizer),kernelConstraint:FP(this.kernelConstraint),biasConstraint:FP(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}gF.className="Dense",Aj(gF);class xF extends bP{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=cP(e);for(const t of e.slice(1))if(null==t)throw new EO('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],gR(e,1)]}call(e,t){return EN(()=>{this.invokeCallHook(e,t);let n=lP(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=SE(n,e)}return function(e){if(e.rank<=1)throw new EO("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],gR(e.shape,1)];return zS(e,t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}xF.className="Flatten",Aj(xF);class vF extends bP{constructor(e){super(e),this.supportsMasking=!0,this.activation=vD(e.activation)}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e);return this.activation.apply(n)})}getConfig(){const e={activation:gD(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}vF.className="Activation",Aj(vF);class yF extends bP{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return EN(()=>function(e,t){return EN(()=>{if(2!==e.shape.length)throw new EO("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return IR(NR(e,1),[1,t,1])})}(e=lP(e),this.n))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}yF.className="RepeatVector",Aj(yF);class bF extends bP{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",a=t.slice();let r=1,s=null;for(let o=0;o<a.length;++o){const e=a[o];if(this.isUnknown(e)){if(null!==s)throw new EO("Can only specifiy one unknown dimension.");s=o}else r*=e}const i=gR(e);if(null!==s){if(0===r||i%r!==0)throw new EO(n);a[s]=i/r}else if(i!==r)throw new EO(n);return a}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e),a=n.shape,r=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return zS(n,r)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}bF.className="Reshape",Aj(bF);class wF extends bP{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=yR(1,e.dims.length+1);if(!iv(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new mP({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=cP(e)).slice();return this.dims.forEach((n,a)=>{t[a+1]=e[n]}),t}call(e,t){return SE(lP(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}wF.className="Permute",Aj(wF);class kF extends bP{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=lP(e);return kS(VC(n,this.maskValue),-1)}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e),a=kS(VC(n,this.maskValue),-1,!0);return bj(n,mj(a,n.dtype))})}}kF.className="Masking",Aj(kF);class NF extends bP{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(MO(e.inputLength))}this.inputDim=e.inputDim,KO(this.inputDim,"inputDim"),this.outputDim=e.outputDim,KO(this.outputDim,"outputDim"),this.embeddingsInitializer=sP(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=SD(e.embeddingsRegularizer),this.activityRegularizer=SD(e.activityRegularizer),this.embeddingsConstraint=zP(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return EN(()=>this.maskZero?(e=lP(e),VC(e,Nj(e))):null)}computeOutputShape(e){if(e=cP(e),null==this.inputLength)return[...e,this.outputDim];const t=MO(this.inputLength);if(t.length!==e.length-1)throw new EO('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let a=0;a<t.length;++a){const r=t[a],s=e[a+1];if(null!=r&&null!=s&&r!==s)throw new EO('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==r&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return EN(()=>{this.invokeCallHook(e,t);let n=lP(e);"int32"!==n.dtype&&(n=kR(n,"int32"));const a=OR(this.embeddings.read(),zS(n,[n.size]));return zS(a,cP(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:rP(this.embeddingsInitializer),embeddingsRegularizer:ND(this.embeddingsRegularizer),activityRegularizer:ND(this.activityRegularizer),embeddingsConstraint:FP(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}NF.className="Embedding",Aj(NF);class jF extends bP{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new TO}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let a=0;a<t.length;++a){const r=e[e.length-t.length+a],s=t[a];if(null==r||null==s||r<0||s<0)n.push(null);else if(1===r)n.push(s);else if(1===s)n.push(r);else{if(r!==s)throw new EO("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(r)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[cP(e)]),e.length<2)throw new EO("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const r of e)null!=r&&null!==r[0]&&t.push(r[0]);if(t=VO(t),t.length>1)throw new EO("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const t=null==e[r]?null:e[r].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const a=e.map(e=>e.length);-1===e.indexOf(null)&&1===VO(a).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return EN(()=>{if(this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const a=vR(n);for(let n of e){const e=n.rank;for(let t=0;t<a-e;++t)n=NR(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const s of e){const e=s.rank;if(null==e){const e=s.shape,a=e[0],r=e.slice(1).concat([a]);let i=zS(s,[a].concat(gR(e.slice(1))));i=SE(i,[1,0]),i=zS(i,r),t.push(i),n=!0}else if(e>1){const a=yR(1,e).concat([0]);t.push(SE(s,a)),n=!0}else t.push(s)}let a=this.mergeFunction(t);const r=a.rank;if(n)if(null==r){const e=a.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));a=zS(SE(zS(a,[-1,t]),[1,0]),n)}else if(r>1){const e=[r-1].concat(yR(0,r-1));a=SE(a,e)}return a}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){const n=null==e[a]?null:e[a].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const a of e)null!=a&&null!==a[0]&&n.push(a[0]);return n=VO(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return EN(()=>{if(null==t)return null;if(!Array.isArray(t))throw new EO("`mask` should be an Array");if(!Array.isArray(e))throw new EO("`inputs` should be an Array");if(t.length!==e.length)throw new EO("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:hC(e,0)))[0];for(let e=1;e<t.length-1;++e)n=PC(n,t[e]);return n})}}class SF extends jF{constructor(e){super(e)}mergeFunction(e){return EN(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=xj(t,e[n]);return t})}}SF.className="Add",Aj(SF);class CF extends jF{constructor(e){super(e)}mergeFunction(e){return EN(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=bj(t,e[n]);return t})}}CF.className="Multiply",Aj(CF);class EF extends jF{constructor(e){super(e)}mergeFunction(e){return EN(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=xj(t,e[n]);return bj(1/e.length,t)})}}EF.className="Average",Aj(EF);class TF extends jF{constructor(e){super(e)}mergeFunction(e){return EN(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Wj(t,e[n]);return t})}}TF.className="Maximum",Aj(TF);class IF extends jF{constructor(e){super(e)}mergeFunction(e){return EN(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=BC(t,e[n]);return t})}}IF.className="Minimum",Aj(IF);class AF extends jF{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new EO("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const a of e)if(null!=a){t=!1;break}if(t)return;const n=[];for(let a=0;a<e.length;++a){const t=e[a].slice();t.splice(this.axis,1);let r=!1;for(const e of n)if(iv(e,t)){r=!0;break}r||n.push(t)}if(n.length>1)throw new EO("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return EN(()=>ER(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new EO("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),a=this.axis<0?n.length+this.axis:this.axis;for(const r of t.slice(1)){if(null==n[a]||null==r[a]){n[a]=null;break}n[a]+=r[a]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new EO("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new EO("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new EO("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return EN(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const a=[];for(let s=0;s<e.length;++s)null==t[s]?a.push(mj(KC(e[s]),"bool")):t[s].rank<e[s].rank?a.push(hC(t[s],-1)):a.push(t[s]);const r=XS(a,this.axis);return wS(r,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function _F(e,t){for(;e<0;)e+=t;return e}AF.className="Concatenate",Aj(AF);class OF extends jF{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){nv(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new TO("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new EO("Dimension incompatibility: "+"".concat(t[a[0]]," !== ").concat(n[a[1]]))}mergeFunction(e){if(2!==e.length)throw new EO("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>_F(t,e[n].shape.length)):[_F(this.axes,n.shape.length),_F(this.axes,a.shape.length)],this.normalize&&(n=JP(n,t[0]),a=JP(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new TO("batchDot is not implemented for tensors of 4D or higher rank yet");if(nv(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)),nv(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new TO("batchDot is not implemented for complex64-type Tensors yet.");const a=e.shape.length,r=t.shape.length;null==n&&(n=[a-1,r-2]);const s=n;return EN(()=>{let n,i;if(a>r){n=a-r;const e=[];for(let t=0;t<n;++t)e.push(1);t=zS(t,t.shape.concat(e))}else if(r>a){n=r-a;const t=[];for(let e=0;e<n;++e)t.push(1);e=zS(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=s[0]===s[1]?NC(bj(e,t),s[0]):NC(bj(SE(e,[1,0]),t),s[1]);else{const n=s[0]!==e.shape.length-1,a=s[1]===t.shape.length-1;i=MC(e,t,n,a)}if(n>0){let e;e=a>r?a+r-3:a-1;const t=[];for(let a=e;a<e+n;++a)t.push(a);i=mE(i,t)}return 1===i.shape.length&&(i=hC(i,1)),i})}(n,a,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[_F(this.axes,e.length),_F(this.axes,t.length)],n}computeOutputShape(e){nv(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new TO("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);const r=t.concat(n);return 1===r.length&&r.push(1),r}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}OF.className="Dot",Aj(OF);class RF extends bP{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e);return FR(()=>xj(AR(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}RF.className="GaussianNoise",Aj(RF);class PF extends bP{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return EN(()=>{this.invokeCallHook(e,t);const n=lP(e);if(this.rate>0&&this.rate<1){return FR(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return bj(n,AR(n.shape,1,e))},()=>n,t.training||!1)}return n})}}PF.className="GaussianDropout",Aj(PF);class MF extends bP{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||lP(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return EN(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),a=()=>{const t=lP(e),a=-1.7580993408473766;let r=vC(eE(n),this.rate);r=kR(r,"float32");const s=((1-this.rate)*(1+this.rate*a**2))**-.5,i=-s*a*this.rate,o=xj(bj(t,r),bj(xj(r,-1),a));return xj(bj(o,s),i)};return FR(a,()=>lP(e),t.training||!1)}return e})}}function DF(e,t,n,a,r){let s,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)s=VS(e,t,n,a,r,i);else if(3===e.rank)s=HS(e,t,n,a,r,i);else{if(4!==e.rank)throw new TO("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");s=GS(e,t,n,a,r,i)}return s}function FF(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return iv(a.slice().sort(),yR(0,e.rank-1))?function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return EN(()=>{const s=UC(e,a),i=s.mean,o=s.variance;return[DF(e,i,o,n,t,r),i,o]})}(e,t,n,a,r):function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return EN(()=>{const s=UC(e,a),i=s.mean,o=s.variance,l=[];for(const t of yR(0,e.rank))-1!==a.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=zS(i,l),u=zS(o,l),d=null==t?null:zS(t,l),h=null==n?null:zS(n,l);return[DF(e,c,u,h,d,r),i,o]})}(e,t,n,a,r)}MF.className="AlphaDropout",Aj(MF);class LF extends bP{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=sP(e.betaInitializer||"zeros"),this.gammaInitializer=sP(e.gammaInitializer||"ones"),this.movingMeanInitializer=sP(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=sP(e.movingVarianceInitializer||"ones"),this.betaConstraint=zP(e.betaConstraint),this.gammaConstraint=zP(e.gammaConstraint),this.betaRegularizer=SD(e.betaRegularizer),this.gammaRegularizer=SD(e.gammaRegularizer)}build(e){e=cP(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new EO("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new mP({ndim:e.length,axes:{[t]:n}})];const a=[n];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return EN(()=>{const n=null!=t.training&&t.training,a=lP(e),r=a.shape,s=r.length,i=yR(0,s),o=this.axis>=0?this.axis:this.axis+s;i.splice(o,1);const l=_O(1,s);l[o]=r[o];const c=i.slice();c.sort();const u=!iv(c,yR(0,s).slice(0,s-1));if(!n)return(()=>{if(u){const e=zS(this.movingMean.read(),l),t=zS(this.movingVariance.read(),l),n=this.center?zS(this.beta.read(),l):null,r=this.scale?zS(this.gamma.read(),l):null;return DF(a,e,t,n,r,this.epsilon)}return DF(a,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,h,p]=FF(a,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{EN(()=>{const a=1-n,r=e.read(),s=bj(Dj(r,t),a);e.write(Dj(r,s))})};return(()=>{f(this.movingMean,h,this.momentum),f(this.movingVariance,p,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rP(this.betaInitializer),gammaInitializer:rP(this.gammaInitializer),movingMeanInitializer:rP(this.movingMeanInitializer),movingVarianceInitializer:rP(this.movingVarianceInitializer),betaRegularizer:ND(this.betaRegularizer),gammaRegularizer:ND(this.gammaRegularizer),betaConstraint:FP(this.betaConstraint),gammaConstraint:FP(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}LF.className="BatchNormalization",Aj(LF);class zF extends bP{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=sP(e.betaInitializer||"zeros"),this.gammaInitializer=sP(e.gammaInitializer||"ones"),this.betaRegularizer=SD(e.betaRegularizer),this.gammaRegularizer=SD(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=cP(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: ".concat(r));if(this.axis.length!==VO(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map(t=>e[t]),a=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,t){const n=lP(e),a=n.shape,r=a.length;return EN(()=>{let{mean:e,variance:t}=UC(n,this.axis,!0);const s=_O(1,r);for(const n of this.axis)s[n]=a[n];const i=e=>null!=e&&e.shape.length!==r?zS(e,s):e;let o=this.scale?i(this.gamma.read()):null,l=this.center?i(this.beta.read()):null;const c=[],u=[];for(let n=0;n<r;++n)-1!==this.axis.indexOf(n)?(c.push(a[n]),u.push(1)):(c.push(1),u.push(a[n]));return e=pC(e,c),t=pC(t,c),null!=o&&(o=pC(o,u)),null!=l&&(l=pC(l,u)),DF(n,e,t,l,o,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rP(this.betaInitializer),gammaInitializer:rP(this.gammaInitializer),betaRegularizer:ND(this.betaRegularizer),gammaRegularizer:ND(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}zF.className="LayerNormalization",Aj(zF);class BF extends bP{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new EO("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new EO("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new EO("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new mP({ndim:4})]}computeOutputShape(e){let t,n;return e=cP(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return EN(()=>{return t=lP(e),n=this.padding,a=this.dataFormat,EN(()=>{if(4!==t.rank)throw new EO("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new EO("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new EO("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let e;return e="channelsFirst"===a?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],XC(t,e)});var t,n,a})}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function UF(e,t,n,a,r,s){return EN(()=>{let i;iR(r),lR(s),oR(a),null==n&&(n=[1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==s&&(s="max"),e=MD(e,r);const o="same"===a?"same":"valid";return i="max"===s?DC(e,t,n,o):BS(e,t,n,o),"channelsFirst"===r&&(i=SE(i,[0,3,1,2])),i})}function WF(e,t,n,a,r,s){return EN(()=>{let i;iR(r),lR(s),oR(a),null==n&&(n=[1,1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==s&&(s="max"),e=DD(e,r);const o="same"===a?"same":"valid";return i="max"===s?FC(e,t,n,o):US(e,t,n,o),"channelsFirst"===r&&(i=SE(i,[0,4,1,2,3])),i})}BF.className="ZeroPadding2D",Aj(BF);class VF extends bP{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new EO("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(KO(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new EO("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}KO(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,oR(this.padding),this.inputSpec=[new mP({ndim:3})]}computeOutputShape(e){const t=RD((e=cP(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return EN(()=>{this.invokeCallHook(e,t),e=NR(lP(e),2);const n=this.poolingFunction(lP(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return mE(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class HF extends VF{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return iR(r),oR(a),UF(e,t,n,a,r,"max")}}HF.className="MaxPooling1D",Aj(HF);class GF extends VF{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return iR(r),oR(a),UF(e,t,n,a,r,"avg")}}GF.className="AveragePooling1D",Aj(GF);class qF extends bP{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new EO("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];KO(this.poolSize,"poolSize"),KO(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,iR(this.dataFormat),oR(this.padding),this.inputSpec=[new mP({ndim:4})]}computeOutputShape(e){e=cP(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=RD(t,this.poolSize[0],this.padding,this.strides[0]),n=RD(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return EN(()=>(this.invokeCallHook(e,t),this.poolingFunction(lP(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class KF extends qF{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return iR(r),oR(a),UF(e,t,n,a,r,"max")}}KF.className="MaxPooling2D",Aj(KF);class XF extends qF{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return iR(r),oR(a),UF(e,t,n,a,r,"avg")}}XF.className="AveragePooling2D",Aj(XF);class YF extends bP{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new EO("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];KO(this.poolSize,"poolSize"),KO(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,iR(this.dataFormat),oR(this.padding),this.inputSpec=[new mP({ndim:5})]}computeOutputShape(e){e=cP(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[4]:e[3];return t=RD(t,this.poolSize[0],this.padding,this.strides[0]),n=RD(n,this.poolSize[1],this.padding,this.strides[1]),a=RD(a,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,a]:[e[0],t,n,a,e[4]]}call(e,t){return EN(()=>(this.invokeCallHook(e,t),this.poolingFunction(lP(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class $F extends YF{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return iR(r),oR(a),WF(e,t,n,a,r,"max")}}$F.className="MaxPooling3D",Aj($F);class QF extends YF{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return iR(r),oR(a),WF(e,t,n,a,r,"avg")}}QF.className="AveragePooling3D",Aj(QF);class JF extends bP{constructor(e){super(e),this.inputSpec=[new mP({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new TO}}class ZF extends JF{constructor(e){super(e||{})}call(e,t){return EN(()=>{const t=lP(e);return LC(t,1)})}}ZF.className="GlobalAveragePooling1D",Aj(ZF);class eL extends JF{constructor(e){super(e||{})}call(e,t){return EN(()=>{const t=lP(e);return kC(t,1)})}}eL.className="GlobalMaxPooling1D",Aj(eL);class tL extends bP{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,iR(this.dataFormat),this.inputSpec=[new mP({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new TO}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class nL extends tL{call(e,t){return EN(()=>{const t=lP(e);return"channelsLast"===this.dataFormat?LC(t,[1,2]):LC(t,[2,3])})}}nL.className="GlobalAveragePooling2D",Aj(nL);class aL extends tL{call(e,t){return EN(()=>{const t=lP(e);return"channelsLast"===this.dataFormat?kC(t,[1,2]):kC(t,[2,3])})}}aL.className="GlobalMaxPooling2D",Aj(aL);class rL extends bP{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=QP(t.layer,n);delete t.layer;const r={layer:a};return Object.assign(r,t),new e(r)}}class sL extends rL{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=cP(e)).length<3)throw new EO("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=cP(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),a=e[1];return[n[0],a].concat(n.slice(1))}call(e,t){return EN(()=>ZD((e,n)=>[lP(this.layer.call(e,t)),[]],e=lP(e),[],!1,null,null,!1,!0)[1])}}sL.className="TimeDistributed",Aj(sL);class iL extends rL{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=QP(n),t.goBackwards=!0!==t.goBackwards;const a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=QP(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){GO(rR,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new TO("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,a,r=this.forwardLayer.computeOutputShape(e);return Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),this.returnState?(a=r.slice(1),t=r[0]):t=r[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):PO(n)}apply(e,t){let n=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});const r=JD(e,n,a,this.numConstants);if(e=r.inputs,n=r.initialState,a=r.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==a)return super.apply(e,t);const s=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new EO("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);const a=n.map(e=>new mP({shape:e.shape}));this.forwardLayer.stateSpec=a.slice(0,e/2),this.backwardLayer.stateSpec=a.slice(e/2),i.push(...a)}if(null!=a)throw new TO("Support for constants in Bidirectional layers is not implemented yet.");const o=s[0]instanceof gP;for(const l of s)if(l instanceof gP!==o)throw new EO("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[e].concat(s),a=this.inputSpec.concat(i),r=this.inputSpec;this.inputSpec=a;const o=super.apply(n,t);return this.inputSpec=r,o}return super.apply(e,t)}call(e,t){return EN(()=>{const n=t.initialState;let a,r,s,i;if(null==n)a=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{const s=n.slice(0,n.length/2),i=n.slice(n.length/2);a=this.forwardLayer.call(e,Object.assign(t,{initialState:s})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(a)&&(s=a.slice(1).concat(r.slice(1))),a=a[0],r=r[0]),this.returnSequences&&(r=aE(r,1)),"concat"===this.mergeMode?i=ER([a,r]):"sum"===this.mergeMode?i=xj(a,r):"ave"===this.mergeMode?i=bj(.5,xj(a,r)):"mul"===this.mergeMode?i=bj(a,r):null==this.mergeMode&&(i=[a,r]),this.returnState?null==this.mergeMode?i.concat(s):[i].concat(s):i})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){uR(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),uR(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=QP(t.layer);if(delete t.layer,null!=t.numConstants)throw new TO("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=t;return a.layer=n,new e(a)}}iL.className="Bidirectional",Aj(iL);class oL extends bP{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return EN(()=>("float32"!==(e=lP(e)).dtype&&(e=kR(e,"float32")),xj(bj(e,this.scale),this.offset)))}}oL.className="Rescaling",Aj(oL);const{resizeBilinear:lL,cropAndResize:cL}=CT;class uL extends bP{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,a,r,s,i,o){return EN(()=>{let l,c=!1;const u=[t/s,n/i,(a+t)/s,(r+n)/i],d=[];3===e.rank?(c=!0,l=gE([e])):l=e;for(let e=0;e<l.shape[0];e++)d.push(u);const h=NN(d,[d.length,4]),p=tE(0,d.length,1,"int32"),f=cL(l,h,p,[a,r],"nearest");return kR(c?lP(wE(f)):f,o)})}upsize(e,t,n,a){return EN(()=>kR(lL(e,[t,n]),a))}call(e,t){return EN(()=>{const t=lP(e),n=t.dtype,a=t.shape,r=a[a.length-3],s=a[a.length-2];let i=0;r!==this.height&&(i=Math.floor((r-this.height)/2));let o=0;return s!==this.width&&(o=Math.floor((s-this.width)/2),0===o&&(o=1)),i>=0&&o>=0?this.centerCrop(t,i,o,this.height,this.width,r,s,n):this.upsize(e,this.height,this.width,n)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=cP(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}uL.className="CenterCrop",Aj(uL);class dL extends bP{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=cP(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return EN(()=>{let n;if("int32"!==(e=lP(e)).dtype&&(e=kR(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new EO("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=lP(t.countWeights)}const a=kC(e),r=zC(e),s=xC(this.numTokens,a).bufferSync().get(0),i=vC(r,0).bufferSync().get(0);if(!s||!i)throw new EO("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,a){let r=lP(e);if("int32"!==r.dtype&&(r=kR(r,"int32")),"int"===t)return r;const s=r.shape;if(0===r.rank&&(r=hC(r,-1)),"oneHot"===t&&1!==r.shape[r.shape.length-1]&&(r=hC(r,-1)),r.rank>2)throw new EO("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(s)+" which would result in output rank ".concat(r.rank,"."));const i=["multiHot","oneHot"].includes(t),o=r;let l;if(l=iC(o,"undefined"!==typeof a&&"count"===t?a:[],n,i),"tfIdf"!==t)return l;if(a)return bj(l,a);throw new EO("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}}dL.className="CategoryEncoding",Aj(dL);const hL=new Set(["bilinear","nearest"]);class pL extends bP{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!hL.has(e.interpolation))throw new EO("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=cP(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return EN(()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return CT.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return CT.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...hL]," are supported"))})}}pL.className="Resizing",Aj(pL);class fL{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}fL.className="RandomSeed";class mL extends bP{constructor(e){super(e),this.randomGenerator=new fL(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}mL.className="BaseRandomLayer";const gL=new Set(["bilinear","nearest"]);class xL extends mL{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new EO("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new EO("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new EO("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!gL.has(n))throw new EO("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=cP(e))[2];return[this.imgHeight,-1,t]}call(e,t){return EN(()=>{const t=lP(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=eE([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*n;a=Math.round(a);const r=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return CT.resizeBilinear(e,r);case"nearest":return CT.resizeNearestNeighbor(e,r);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...gL]," are supported"))}})}}xL.className="RandomWidth",Aj(xL);var vL,yL;Dv().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(vL||(vL={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(yL||(yL={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function bL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(a.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(r.recurse){if(jL(e)){const r=Array.isArray(e)?[]:{};a.add(e);for(const s in e){const i=bL(e[s],t,n,a);r[s]=i}return a.delete(e),e.__proto__&&(r.__proto__=e.__proto__),r}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,r.value),r.value}function wL(e){return kL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:NL)}function kL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const a=e[0];if(n.has(a))throw new Error("Circular references are not supported.");const r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(r.recurse){if(jL(a)){const r=Array.isArray(a)?[]:{};n.add(a);for(const s in a){const a=kL(e.map(e=>e[s]),t,n);r[s]=a}return n.delete(a),r}throw new Error("Can't recurse into non-iterable type: ".concat(a))}return r.value}function NL(e){return null===e?null:jL(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function jL(e){let t=!1;if(Dv().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:a}=n(551);t=e instanceof a}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Wk)&&!(e instanceof Promise)&&!t)}function SL(e){return function(e,t){return bL(e,t)}(e,CL)}function CL(e){return e instanceof Wk?{value:e.clone(),recurse:!1}:jL(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class EL{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class TL extends EL{constructor(){super(TL.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let a=0;a<n;a++)t[a]=this.get(this.wrap(this.begin+a));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function IL(e){return new RL(e)}function AL(e,t){return new HL(e,t)}TL.INITIAL_CAPACITY=32;class _L{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new BL(this,e)}filter(e){return new LL(this,e)}map(e){return new zL(this,e)}mapAsync(e){return new UL(this,e)}serialMapAsync(e){return new UL(this,e).serial()}flatmap(e){return new VL(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e){return new FL(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NL;return this.rowMajorBatch(e,t).map(e=>wL(e,n))}concatenate(e,t){return new HL(new OL([this,e]),t)}take(e){return e<0||null==e?this:new DL(this,e)}skip(e){return e<0||null==e?this:new ML(this,e)}prefetch(e){return new qL(this,e)}shuffle(e,t){return new KL(this,e,t)}serial(){return new PL(this)}}class OL extends _L{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:SL(e),done:!1}}}class RL extends _L{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(jEe){throw jEe.message="Error thrown while iterating through a dataset: ".concat(jEe.message),jEe}}}class PL extends _L{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class ML extends _L{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;TN(e.value)}return this.upstream.next()}}class DL extends _L{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class FL extends _L{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class LL extends _L{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;TN(e.value)}}}class zL extends _L{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=aN(e.value),n=this.transform(e.value),a=aN(n);for(const r of t)nN(r,a)||r.dispose();return{value:n,done:!1}}}class BL extends _L{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(jEe){if(!this.handler(jEe))return{value:null,done:!0}}}}class UL extends _L{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=aN(e.value),n=await this.transform(e.value),a=aN(n);for(const r of t)nN(r,a)||r.dispose();return{value:n,done:!1}}}class WL extends _L{constructor(){super(),this.outputQueue=new TL,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class VL extends WL{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=aN(e.value),n=this.transform(e.value),a=aN(n);this.outputQueue.pushAll(n);for(const r of t)nN(r,a)||r.dispose();return!0}}class HL extends _L{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var GL;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(GL||(GL={}));class qL extends _L{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new EL(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class KL extends qL{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=$C.alea(n||Sk().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class XL{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let a;return nv(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e)),a=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),YL(async()=>(await n.iterator()).columnMajorBatch(e,t,$L),a)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,YL(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,YL(async()=>(await t.iterator()).filter(t=>EN(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return YL(async()=>(await t.iterator()).map(t=>EN(()=>e(t))),this.size)}mapAsync(e){const t=this;return YL(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return YL(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,YL(async()=>AL(IL(async()=>({value:await t.iterator(),done:!1})).take(e)),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,YL(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const a=this,r=$C.alea(t||Sk().toString());return YL(async()=>{let t=r.int32();return n&&(t+=r.int32()),(await a.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,YL(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function YL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends XL{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function $L(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof Wk||Tk(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Wk?gE(e):NN(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}XL.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function QL(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&nv("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}const JL=BI;class ZL extends $x{nextDataId(){return ZL.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Yx(this,SN())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Dv().get("IS_NODE")&&Jw("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:n,refCount:1}),a}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&vv(n[0])){const r=n.map(e=>Ck(e));a=this.write(r,e,t)}else a=this.write(n,e,t);return{dataId:a,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,a,r){this.data.set(e,{values:t,dtype:a,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return rI(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>Ek(e));return fj(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return fj(e.shape,e.dtype,t)}makeOutput(e,t,n){return SN().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Sk();e();return{kernelMs:Sk()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){QL([e],"where");const t=this.readSync(e.dataId);return JL(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}ZL.nextDataId=0;function ez(e){return(t,n,a)=>{const r=mv(n,t.length);for(let s=0;s<t.length;++s)r[s]=e(t[s],a);return r}}function tz(e,t,n){return nz(e,ez(t),n)}function nz(e,t,n){return a=>{let{inputs:r,attrs:s,backend:i}=a;const{x:o}=r;QL(o,e);const l=i,c=l.data.get(o.dataId).values;let u;if("string"===o.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=LI(c)}else u=c;const d=n||o.dtype,h=t(u,d,s);return l.makeTensorInfo(o.shape,d,h)}}AN("cpu",()=>new ZL,1);const az=tz(zy,e=>e>=0?e:Math.exp(e)-1),rz={kernelName:zy,backendName:"cpu",kernelFunc:az};function sz(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const iz={kernelName:nb,backendName:"cpu",kernelFunc:sz};function oz(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:s}=a;QL([r],"leakyRelu");const i=sv(r.shape),o=n.data.get(r.dataId).values,l=fv("float32",i);for(let c=0;c<o.length;c++)l[c]=o[c]<0?s*o[c]:o[c];return n.makeTensorInfo(r.shape,"float32",l)}const lz={kernelName:lb,backendName:"cpu",kernelFunc:oz};function cz(e){return(t,n,a,r,s)=>{const i=Uj(t,n),o=i.length,l=Nv(i),c=fv(s,sv(i)),u=t.length,d=n.length,h=Nv(t),p=Nv(n),f=zj(t,i),m=zj(n,i);if(f.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=e(a[g%a.length],r[g%r.length]);else for(let g=0;g<c.length;++g){const t=_v(g,o,l),n=t.slice(-u);f.forEach(e=>n[e]=0);const s=Av(n,u,h),i=t.slice(-d);m.forEach(e=>i[e]=0);const x=Av(i,d,p);c[g]=e(a[s],r[x])}return[c,i]}}const uz=cz((e,t)=>e<0?t*e:e);function dz(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t;QL([a,r],"prelu");const s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,[o,l]=uz(a.shape,r.shape,s,i,"float32");return n.makeTensorInfo(l,"float32",o)}const hz={kernelName:Vb,backendName:"cpu",kernelFunc:dz},pz=tz(Qb,e=>Math.max(0,e)),fz={kernelName:Qb,backendName:"cpu",kernelFunc:pz},mz=tz(aw,e=>Math.min(Math.max(0,e),6)),gz={kernelName:aw,backendName:"cpu",kernelFunc:mz},xz=ez(e=>1/(1+Math.exp(-e))),vz=tz(gw,e=>1/(1+Math.exp(-e))),yz={kernelName:gw,backendName:"cpu",kernelFunc:vz};function bz(e,t,n,a,r){if("linear"===n)return sz({inputs:{x:t},backend:e});if("relu"===n)return pz({inputs:{x:t},backend:e});if("elu"===n)return az({inputs:{x:t},backend:e});if("relu6"===n)return mz({inputs:{x:t},backend:e});if("prelu"===n)return dz({inputs:{x:t,alpha:a},backend:e});if("leakyrelu"===n)return oz({inputs:{x:t},backend:e,attrs:{alpha:r}});if("sigmoid"===n)return vz({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function wz(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,o=n.makeTensorInfo(a.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(a.shape,"float32",s),imag:n.makeTensorInfo(r.shape,"float32",i)},o}const kz={kernelName:py,backendName:"cpu",kernelFunc:wz};function Nz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return wz({inputs:{real:Nz(e,t,"float32"),imag:Nz(e,t,"float32")},backend:e})}const a=Ev(sv(t),n);return e.makeTensorInfo(t,n,a)}function jz(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.real,s=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,s)}const Sz={kernelName:Yb,backendName:"cpu",kernelFunc:jz};function Cz(e,t,n,a){if("int32"===a){return[t,"int32",Int32Array.from(e)]}if("bool"===a){const a=jk([0],n),[r,s]=cz((e,t)=>e!==t?1:0)(t,[],e,a,"bool");return[s,"bool",r]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(a))}function Ez(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dtype:s}=a;if("complex64"===s){if("complex64"===r.dtype)return sz({inputs:{x:r},backend:n});const e=Nz(n,r.shape,r.dtype),t=Ez({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=wz({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),a}if("complex64"===r.dtype){const e=jz({inputs:{input:r},backend:n}),t=Ez({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!gv(r.dtype,s)){const e=sz({inputs:{x:r},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}const i=n.data.get(r.dataId).values,[o,l,c]=Cz(i,r.shape,r.dtype,s);return n.makeTensorInfo(o,l,c)}const Tz={kernelName:uy,backendName:"cpu",kernelFunc:Ez};function Iz(e,t,n,a){return null==n?n=>{let{inputs:r,backend:s}=n;const{a:i,b:o}=r,l=s;QL([i,o],e);const c=l.data.get(i.dataId).values,u=l.data.get(o.dataId).values,d="string"===i.dtype?LI(c):c,h="string"===i.dtype?LI(u):u,p=a||i.dtype,[f,m]=t(i.shape,o.shape,d,h,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:r,backend:s}=e;const{a:i,b:o}=r,l=s;if("complex64"===i.dtype||"complex64"===o.dtype){const e=Ez({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),a=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,s=l.data.get(a.dataId).values,c=l.data.get(r.dataId).values,u=Ez({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(u.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=l.data.get(h.dataId).values,m=l.data.get(p.dataId).values,[g,x,v]=n(i.shape,o.shape,s,c,f,m),y=l.makeTensorInfo(v,"float32",g),b=l.makeTensorInfo(v,"float32",x),w=wz({inputs:{real:y,imag:b},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(b),w}{const e=l.data.get(i.dataId).values,n=l.data.get(o.dataId).values,r=a||i.dtype,[s,c]=t(i.shape,o.shape,e,n,r);return l.makeTensorInfo(c,r,s)}}}function Az(e){return(t,n,a,r,s,i)=>{const o=Uj(t,n),l=sv(o),c=o.length,u=Nv(o),d=fv("float32",l),h=fv("float32",l),p=zj(t,o),f=zj(n,o),m=rI(a,r),g=rI(s,i),x=t.length,v=Nv(t),y=n.length,b=Nv(n);if(p.length+f.length===0)for(let w=0;w<d.length;w++){const t=w%m.length,n=w%g.length,a=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);d[w]=a.real,h[w]=a.imag}else for(let w=0;w<d.length;w++){const t=_v(w,c,u),n=t.slice(-x);p.forEach(e=>n[e]=0);const a=Av(n,x,v),r=t.slice(-y);f.forEach(e=>r[e]=0);const s=Av(r,y,b),i=e(m[2*a],m[2*a+1],g[2*s],g[2*s+1]);d[w]=i.real,h[w]=i.imag}return[d,h,o]}}const _z=cz((e,t)=>e+t),Oz=Az((e,t,n,a)=>({real:e+n,imag:t+a})),Rz=Iz(Hv,_z,Oz),Pz={kernelName:Hv,backendName:"cpu",kernelFunc:Rz};function Mz(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:s}=a,i=sv(r.shape),o=dv(s,i),l=sv(o);nv(i===l,()=>"The new shape (".concat(o,") has ").concat(l," elements and the old ")+"shape (".concat(r.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."),n.incRef(r.dataId);const c=n.data.get(r.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=o,t.shape=o}return{dataId:r.dataId,shape:o,dtype:r.dtype}}const Dz={kernelName:Jb,backendName:"cpu",kernelFunc:Mz};function Fz(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:s}=t,{transposeA:i,transposeB:o}=a;QL([r,s],"matMul");const l=r.shape.length,c=s.shape.length,u=i?r.shape[l-2]:r.shape[l-1],d=o?s.shape[c-1]:s.shape[c-2],h=i?r.shape[l-1]:r.shape[l-2],p=o?s.shape[c-2]:s.shape[c-1],f=r.shape.slice(0,-2),m=s.shape.slice(0,-2),g=sv(f),x=sv(m),v=Uj(r.shape.slice(0,-2),s.shape.slice(0,-2)).concat([h,p]);nv(u===d,()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(d,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(s.shape," and transposeA=").concat(i)+" and transposeB=".concat(o," must match."));const y=o?[x,p,d]:[x,d,p],b=Mz({inputs:{x:r},backend:n,attrs:{shape:i?[g,u,h]:[g,h,u]}}),w=Mz({inputs:{x:s},backend:n,attrs:{shape:y}}),k=i?b.shape[1]:b.shape[2],N=i?b.shape[2]:b.shape[1],j=o?w.shape[1]:w.shape[2],S=Math.max(g,x),C=n.data.get(b.dataId).values,E=n.data.get(w.dataId).values,T=Nv(b.shape),I=Nv(w.shape),[A,_,O]=i?[T[0],1,T[1]]:[T[0],T[1],1],[R,P,M]=o?[1,I[1],I[0]]:[I[1],1,I[0]],D=N*j,F=fj([S,N,j],b.dtype),L=F.values,z=n.blockSize;for(let B=0;B<S;B++){const e=B%g,t=B%x;for(let n=0;n<N;n+=z){const a=Math.min(n+z,N);for(let r=0;r<j;r+=z){const s=Math.min(r+z,j);for(let i=0;i<k;i+=z){const o=Math.min(i+z,k);for(let l=n;l<a;l++)for(let n=r;n<s;n++){let a=0;for(let r=i;r<o;r++){a+=C[e*A+l*_+r*O]*E[r*R+n*P+t*M]}L[B*D+(l*j+n)]+=a}}}}}return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,F.dtype,F.values)}const Lz={kernelName:sy,backendName:"cpu",kernelFunc:Fz};const zz={kernelName:Yw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=a;let h,p,f;const m=[];h=Fz({inputs:{a:r,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(p=Rz({inputs:{a:h,b:i},backend:n}),m.push(h),h=p),u&&(f=bz(n,h,u,o,d),m.push(h),h=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}};function Bz(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const Uz={kernelName:Uv,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;QL(t,"abs");let a=new Float32Array(sv(t.shape));return a=Bz(n.data.get(t.dataId).values),n.makeOutput(a,t.shape,t.dtype)}},Wz=tz(Wv,e=>Math.acos(e)),Vz={kernelName:Wv,backendName:"cpu",kernelFunc:Wz},Hz=tz(Vv,e=>Math.acosh(e)),Gz={kernelName:Vv,backendName:"cpu",kernelFunc:Hz};const qz={kernelName:Gv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,a=t;QL(t,"addN");const r=a.map(e=>n.data.get(e.dataId).values),s=fj(a[0].shape,a[0].dtype),i=s.values;for(let o=0;o<a.length;o++){const e=r[o];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}};function Kz(e,t,n,a,r){const s=t.length,i=sv(t),o=Nv(t),l=Nv(r),c=fv(n,sv(r));for(let u=0;u<i;++u){const t=_v(u,s,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[a[e]];c[Av(n,s,l)]=e[u]}return c}function Xz(e){const{inputs:t,attrs:n,backend:a}=e,{x:r}=t,{perm:s}=n;QL(r,"transpose");const i=r.shape.length,o=new Array(i);for(let c=0;c<o.length;c++)o[c]=r.shape[s[c]];const l=Kz(a.data.get(r.dataId).values,r.shape,r.dtype,s,o);return{dataId:a.write(l,o,r.dtype),shape:o,dtype:r.dtype}}const Yz={kernelName:Uw,backendName:"cpu",kernelFunc:Xz};const $z={kernelName:qv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a;QL(r,"all");const o=hv(s,r.shape);let l=o;const c=AC(l,r.shape.length);let u=r;null!=c&&(u=Xz({inputs:{x:r},backend:n,attrs:{perm:c}}),l=OC(l.length,r.shape.length)),IC("all",l,u.shape.length);const[d,h]=EC(u.shape,l),p=sv(h),f=Ev(sv(d),u.dtype),m=n.data.get(u.dataId).values;for(let x=0;x<f.length;++x){const e=x*p;let t=m[e];for(let n=0;n<p;++n){const a=m[e+n];t=t&&a}f[x]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(i){const e=Mz({inputs:{x:g},backend:n,attrs:{shape:TC(d,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const Qz={kernelName:Kv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a;QL(r,"any");const o=hv(s,r.shape);let l=o;const c=AC(l,r.shape.length);let u=r;null!=c&&(u=Xz({inputs:{x:r},backend:n,attrs:{perm:c}}),l=OC(l.length,r.shape.length)),IC("any",l,u.shape.length);const[d,h]=EC(u.shape,l),p=sv(h),f=Ev(sv(d),u.dtype),m=n.data.get(u.dataId).values;for(let x=0;x<f.length;++x){const e=x*p;let t=m[e];for(let n=0;n<p;++n){const a=m[e+n];t=t||a}f[x]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(i){const e=Mz({inputs:{x:g},backend:n,attrs:{shape:TC(d,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const Jz={kernelName:Xv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s}=a;QL(r,"argMax");let i=hv(s,r.shape);const o=AC(i,r.shape.length);let l=r;const c=[];null!=o&&(l=Xz({inputs:{x:r},backend:n,attrs:{perm:o}}),c.push(l),i=OC(i.length,l.shape.length)),i=[i[0]],IC("argMax",i,l.shape.length);const[u,d]=EC(l.shape,i),h=Ev(sv(u),"int32"),p=sv(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let a=0;a<p;++a){const r=f[e+a];r>t&&(t=r,n=a)}h[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",h)}};const Zz={kernelName:Yv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s}=a;QL(r,"argMin");let i=hv(s,r.shape);const o=AC(i,r.shape.length);let l=r;const c=[];null!=o&&(l=Xz({inputs:{x:r},backend:n,attrs:{perm:o}}),c.push(l),i=OC(i.length,l.shape.length)),i=[i[0]],IC("argMin",i,l.shape.length);const[u,d]=EC(l.shape,i),h=Ev(sv(u),"int32"),p=sv(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let a=0;a<p;++a){const r=f[e+a];r<t&&(t=r,n=a)}h[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",h)}},eB=tz($v,e=>Math.asin(e)),tB={kernelName:$v,backendName:"cpu",kernelFunc:eB},nB=tz(Qv,e=>Math.asinh(e)),aB={kernelName:Qv,backendName:"cpu",kernelFunc:nB},rB=tz(Jv,e=>Math.atan(e)),sB={kernelName:Jv,backendName:"cpu",kernelFunc:rB},iB=cz((e,t)=>Math.atan2(e,t)),oB=Iz(ey,iB),lB={kernelName:ey,backendName:"cpu",kernelFunc:oB},cB=tz(Zv,e=>Math.atanh(e)),uB={kernelName:Zv,backendName:"cpu",kernelFunc:cB};function dB(e,t,n,a,r,s){const i=r.strideHeight,o=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,u=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=fj(r.outShape,n),g=m.values,x=r.outShape[1]*r.outShape[2]*r.outShape[3],v=r.outShape[2]*r.outShape[3],y=r.outShape[3];for(let b=0;b<r.batchSize;++b){const t=b*x,n=b*a[0];for(let m=0;m<r.inChannels;++m)for(let x=0;x<r.outHeight;++x){const b=x*i-h,w=Math.max(0,b),k=Math.min(r.inHeight,u+b),N=t+x*v;for(let t=0;t<r.outWidth;++t){const i=t*o-p,u=Math.max(0,i),h=Math.min(r.inWidth,d+i);let x=f,v=0,b=0;for(let t=w;t<k;t+=l){const r=n+t*a[1];for(let t=u;t<h;t+=c){const n=e[r+t*a[2]+m];"max"===s&&n>x?x=n:"avg"===s&&(v+=n,b++)}if(isNaN(x))break}g[N+t*y+m]="avg"===s?v/b:x}}}return m}function hB(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=fj(a.outShape,"int32"),o=a.strideHeight,l=a.strideWidth,c=a.dilationHeight,u=a.dilationWidth,d=a.effectiveFilterHeight,h=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,m=fj(t,n,e);for(let g=0;g<a.batchSize;++g)for(let e=0;e<a.inChannels;++e)for(let t=0;t<a.outHeight;++t){const n=t*o-p;let x=n;for(;x<0;)x+=c;const v=Math.min(a.inHeight,d+n);for(let o=0;o<a.outWidth;++o){const d=o*l-f;let p=d;for(;p<0;)p+=u;const y=Math.min(a.inWidth,h+d);let b=Number.NEGATIVE_INFINITY,w=-1;for(let t=x;t<v;t+=c){const i=t-n;for(let n=p;n<y;n+=u){const o=n-d,l=m.get(g,t,n,e);l>b&&(b=l,w=r?s?((g*a.inHeight+t)*a.inWidth+n)*a.inChannels+e:(t*a.inWidth+n)*a.inChannels+e:i*h+o)}}i.set(w,g,t,o,e)}}return i}function pB(e,t,n,a,r,s){const i=r.strideDepth,o=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,u=r.dilationHeight,d=r.dilationWidth,h=r.effectiveFilterDepth,p=r.effectiveFilterHeight,f=r.effectiveFilterWidth,m=r.padInfo.front,g=r.padInfo.top,x=r.padInfo.left,v="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=fj(r.outShape,n),b=y.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],N=r.outShape[3]*r.outShape[4],j=r.outShape[4];for(let S=0;S<r.batchSize;++S){const t=S*w,n=S*a[0];for(let y=0;y<r.inChannels;++y)for(let w=0;w<r.outDepth;++w){const S=w*i-m;let C=S;for(;C<0;)C+=c;const E=Math.min(r.inDepth,h+S),T=t+w*k;for(let t=0;t<r.outHeight;++t){const i=t*o-g;let h=i;for(;h<0;)h+=u;const m=Math.min(r.inHeight,p+i),w=T+t*N;for(let t=0;t<r.outWidth;++t){const i=t*l-x;let o=i;for(;o<0;)o+=d;const p=Math.min(r.inWidth,f+i),g=w+t*j;let k=v,N=0,S=0;for(let t=C;t<E;t+=c){const r=n+t*a[1];for(let t=h;t<m;t+=u){const n=r+t*a[2];for(let t=o;t<p;t+=d){const r=e[n+t*a[3]+y];if("max"===s&&r>k?k=r:"avg"===s&&(N+=r,S++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}b[g+y]="avg"===s?N/Math.max(S,1):k}}}}return y}const fB={kernelName:ty,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;QL(r,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=a;nv(MS(i,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const c=SS(r.shape,s,i,1,o,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&iv(c.inShape,c.outShape))u=sz({inputs:{x:r},backend:n});else{const e=n.data.get(r.dataId).values,t=Nv(r.shape),a=dB(e,r.shape,r.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,r.dtype,a.values)}return u}};const mB={kernelName:ay,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=a;QL(r,"avgPool3d");const u=CS(r.shape,s,i,1,o,l,c),d=pB(n.data.get(r.dataId).values,r.shape,r.dtype,Nv(r.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const gB={kernelName:ry,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=a;QL([r,s],"avgPool3DGrad");const u=CS(s.shape,i,o,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,x=u.dilationDepth,v=u.dilationHeight,y=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,k=u.effectiveFilterWidth,N=b-1-u.padInfo.front,j=k-1-u.padInfo.left,S=w-1-u.padInfo.top,C=fj(s.shape,"float32"),E=1/(f*m*g),T=n.bufferSync(r);for(let I=0;I<u.batchSize;++I)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let a=0;a<u.inWidth;++a){const r=t-N,s=n-S,i=a-j;let o=0;for(let t=0;t<b;t+=x){const n=(r+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const a=(s+t)/h;if(!(a<0||a>=u.outHeight||Math.floor(a)!==a))for(let t=0;t<k;t+=y){const r=(i+t)/p;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;o+=T.get(I,n,a,r,e)}}}C.set(o*E,I,t,n,a,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const xB={kernelName:ny,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s}=t,i=s;QL([r,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=a,u=SS(i.shape,o,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,x=u.effectiveFilterHeight,v=u.effectiveFilterWidth,y=v-1-u.padInfo.left,b=x-1-u.padInfo.top,w=fj(i.shape,"float32"),k=1/(p*f),N=n.data.get(r.dataId).values,j=fj(r.shape,"float32",N);for(let S=0;S<u.batchSize;++S)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const a=t-b,r=n-y;let s=0;for(let t=0;t<x;t+=m){const n=(a+t)/d;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const a=(r+t)/h;if(a<0||a>=u.outWidth||Math.floor(a)!==a)continue;s+=j.get(S,n,a,e)}}w.set(s*k,S,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const vB={kernelName:Qy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,scale:s,offset:i,mean:o,variance:l}=t;nv(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),nv(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),nv(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),QL([r,o,l,s,i],"batchNorm");let{varianceEpsilon:c}=a;null==c&&(c=.001);const u=n.data.get(r.dataId).values,d=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,p=s?n.data.get(s.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,x=p.length,v=h.length,y=d.length;let b=0,w=0,k=0,N=0;for(let j=0;j<u.length;++j)m[j]=f[b++]+(u[j]-d[w++])*p[k++]/Math.sqrt(h[N++]+c),b>=g&&(b=0),w>=y&&(w=0),k>=x&&(k=0),N>=v&&(N=0);return n.makeTensorInfo(r.shape,r.dtype,m)}};function yB(e,t,n,a,r){const s=gS(a,t,n),i=sv(n),o=Nv(a);if(s){const n=xS(t,o);return"string"===r?e.slice(n,n+i):e.subarray(n,n+i)}const l=fj(a,r,"string"===r?LI(e):e),c=fj(n,r);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map((e,n)=>e+t[n]);c.set(l.get(...n),...e)}return"string"===r?zI(c.values):c.values}function bB(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:s,size:i}=a;QL(r,"slice");const[o,l]=vS(r,s,i);rS(r,o,l);const c=yB(n.data.get(r.dataId).values,o,l,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,c)}const wB={kernelName:hw,backendName:"cpu",kernelFunc:bB};const kB={kernelName:iy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:s,crops:i}=a;QL([r],"batchToSpaceND");const o=s.reduce((e,t)=>e*t),l=UT(r.shape,s,o),c=WT(l.length,s.length),u=VT(r.shape,s,o),d=HT(i,s.length),h=GT(u,i,s.length),p=Mz({inputs:{x:r},backend:n,attrs:{shape:l}}),f=Xz({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Mz({inputs:{x:f},backend:n,attrs:{shape:u}}),g=bB({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function NB(e,t,n,a,r){const s=sv(a),i=Ev(r,n);for(let o=0;o<e.length;o++){const n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=r||(i[n]+=s>0?t[o]:1)}return i}function jB(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e.shape[0],s=e.shape[1],i=fj([r,n],t.dtype);for(let o=0;o<r;o++)for(let r=0;r<s;r++){const s=e.get(o,r);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(a?i.set(1,o,s):t.size>0?i.set(i.get(o,s)+t.get(o,r),o,s):i.set(i.get(o,s)+1,o,s))}return i}const SB={kernelName:oy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:s}=t,{size:i}=a,o=NB(n.data.get(r.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,o)}},CB=cz((e,t)=>e&t),EB={kernelName:ly,backendName:"cpu",kernelFunc:Iz(ly,CB)};const TB={kernelName:cy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,o=Uj(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},IB=ez(e=>Math.ceil(e)),AB=nz(dy,IB),_B={kernelName:dy,backendName:"cpu",kernelFunc:AB},OB=tz(hy,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),RB={kernelName:hy,backendName:"cpu",kernelFunc:OB},PB={kernelName:fy,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,a=new Float32Array(sv(t.shape)),r=n.data.get(t.dataId),s=r.complexTensorInfos.real,i=r.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<o.length;c++){const e=o[c],t=l[c];a[c]=Math.hypot(e,t)}return n.makeOutput(a,t.shape,"float32")}};function MB(e,t,n,a){const r=mv(n,sv(t));if(a&&"string"!==n){let t=0;e.forEach(e=>{const n=sv(e.shape);r.set(e.vals,t),t+=n})}else{let a=0;e.forEach(e=>{const s="string"===n?LI(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+a;for(let t=0;t<e.shape[1];++t)r[o+t]=s[i++]}a+=e.shape[1]})}return r}function DB(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.imag,s=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,s)}const FB={kernelName:rb,backendName:"cpu",kernelFunc:DB};function LB(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,s=hv(r,t[0].shape)[0],i=t.map(e=>e.shape);_T(i,s);let o=OT(t.map(e=>e.shape),s);if(0===sv(o))return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(e=>sv(e.shape)>0);if(1===l.length)return sz({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){const e=l.map(e=>jz({inputs:{input:e},backend:n})),t=l.map(e=>DB({inputs:{input:e},backend:n})),a=LB({inputs:e,backend:n,attrs:{axis:s}}),r=LB({inputs:t,backend:n,attrs:{axis:s}}),i=wz({inputs:{real:a,imag:r},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r),i}const c=l.map(e=>{const t=sv(e.shape.slice(s));return Mz({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),u=c.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));o=OT(c.map(e=>e.shape),1);const d=1===c[0].shape[0],h=MB(u,o,t[0].dtype,d),p=OT(l.map(e=>e.shape),s),f=n.makeTensorInfo(p,t[0].dtype,h);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}const zB={kernelName:my,backendName:"cpu",kernelFunc:LB};function BB(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=a;QL([r,s],"conv2d");const d=FS(l),h=ES(r.shape,s.shape,i,c,o,u,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,x=h.padInfo.left,v=h.padInfo.top,y="channelsLast"===h.dataFormat,b=new Lk(h.outShape,r.dtype),w=Nv(r.shape),k=Nv(s.shape),N=w[0],j=y?w[1]:w[2],S=y?w[2]:1,C=y?1:w[1],E=b.strides[0],T=y?b.strides[1]:b.strides[2],I=y?b.strides[2]:1,A=y?1:b.strides[1],_=n.data.get(r.dataId).values,O=n.data.get(s.dataId).values,R=b.values;for(let P=0;P<h.batchSize;++P){const e=P*N,t=P*E;for(let n=0;n<h.outHeight;++n){const a=t+n*T,r=n*h.strideHeight-v;for(let t=0;t<p;++t){const n=r+t*m;if(n<0||n>=h.inHeight)continue;const s=t*k[0],i=e+n*j;for(let e=0;e<h.outWidth;++e){const t=a+e*I,n=e*h.strideWidth-x;for(let e=0;e<f;++e){const a=n+e*g;if(a<0||a>=h.inWidth)continue;const r=i+a*S;let o=s+e*k[1];for(let e=0;e<h.inChannels;++e){const n=_[r+e*C];for(let e=0;e<h.outChannels;++e)R[t+e*A]+=n*O[o+e];o+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,R)}const UB={kernelName:gy,backendName:"cpu",kernelFunc:BB};const WB={kernelName:xy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=a;QL([r,s],"conv2dBackpropFilter");const d=FS(l),h=ES(r.shape,u,i,1,o,c,!1,d),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,x="channelsLast"===h.dataFormat,v=new Lk(h.filterShape,"float32"),y=h.padInfo.left,b=h.padInfo.top,w=n.data.get(r.dataId).values,k=n.data.get(s.dataId).values,N=new Lk(r.shape,r.dtype,w),j=new Lk(s.shape,s.dtype,k);for(let S=0;S<m;++S){const e=Math.max(0,Math.ceil((b-S)/p)),t=Math.min(h.outHeight,(h.inHeight+b-S)/p);for(let n=0;n<g;++n){const a=Math.max(0,Math.ceil((y-n)/f)),r=Math.min(h.outWidth,(h.inWidth+y-n)/f);for(let s=0;s<h.inChannels;++s)for(let i=0;i<h.outChannels;++i){let o=0;for(let l=0;l<h.batchSize;++l)for(let c=e;c<t;++c){const e=S+c*p-b;for(let t=a;t<r;++t){const a=n+t*f-y;o+=x?N.get(l,e,a,s)*j.get(l,c,t,i):N.get(l,s,e,a)*j.get(l,i,c,t)}}v.set(o,S,n,s,i)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const VB={kernelName:vy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=a;QL([r,s],"conv2dBackpropInput");const d=Nv(s.shape),h=Nv(r.shape);let p=FS(c);const f=ES(i,s.shape,o,1,l,u,!1,p),m=new Lk(f.inShape,"float32"),g=m.values,x=n.data.get(r.dataId).values,v=n.data.get(s.dataId).values,[y,b,w]=d,{batchSize:k,filterHeight:N,filterWidth:j,inChannels:S,inHeight:C,inWidth:E,outChannels:T,outHeight:I,outWidth:A,strideHeight:_,strideWidth:O}=f;p=f.dataFormat;const R=N-1-f.padInfo.top,P=j-1-f.padInfo.left,M="channelsLast"===p,D=m.strides[0],F=M?m.strides[1]:m.strides[2],L=M?m.strides[2]:1,z=M?1:m.strides[1],B=h[0],U=M?h[1]:h[2],W=M?h[2]:1,V=M?1:h[1];for(let H=0;H<k;++H)for(let e=0;e<S;++e)for(let t=0;t<C;++t){const n=t-R,a=Math.max(0,Math.ceil(n/_)),r=Math.min(I,(N+n)/_);for(let s=0;s<E;++s){const i=s-P,o=Math.max(0,Math.ceil(i/O)),l=Math.min(A,(j+i)/O);let c=0;for(let t=a;t<r;++t){const a=t*_-n;for(let n=o;n<l;++n){const r=B*H+U*t+W*n,s=y*(N-1-a)+b*(j-1-(n*O-i))+w*e;for(let e=0;e<T;++e){c+=x[r+V*e]*v[s+e]}}}g[D*H+F*t+L*s+z*e]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const HB={kernelName:yy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dilations:l}=a;QL([r,s],"conv3d");const c=TS(r.shape,s.shape,i,l,o),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,x=g.front,v=g.left,y=g.top,b=new Lk(c.outShape,r.dtype),w=n.data.get(r.dataId).values,k=n.data.get(s.dataId).values,N=b.values,j=Nv(r.shape),S=Nv(s.shape);for(let C=0;C<c.batchSize;++C){const e=C*j[0],t=C*b.strides[0];for(let n=0;n<c.outDepth;++n){const a=t+n*b.strides[1],r=n*c.strideDepth-x;for(let t=0;t<u;++t){const n=r+t*p;if(n<0||n>=c.inDepth)continue;const s=t*S[0],i=e+n*j[1];for(let e=0;e<c.outHeight;++e){const t=a+e*b.strides[2],n=e*c.strideHeight-y;for(let e=0;e<d;++e){const a=n+e*f;if(a<0||a>=c.inHeight)continue;const r=s+e*S[1],o=i+a*j[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,a=e*c.strideWidth-v;for(let e=0;e<h;++e){const t=a+e*m;if(t<0||t>=c.inWidth)continue;const s=r+e*S[2],i=o+t*c.inChannels;let l=s;for(let e=0;e<c.inChannels;++e){const t=w[i+e];for(let e=0;e<c.outChannels;++e)N[n+e]+=t*k[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const GB={kernelName:by,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:s}=t,{strides:i,pad:o,filterShape:l}=a;QL([r,s],"conv3dBackpropFilterV2");const c=Nv(r.shape),u=Nv(s.shape),d=TS(r.shape,l,i,1,o),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,x=d.filterWidth,v=new Lk(d.filterShape,"float32"),y=v.values,[b,w,k,N]=v.strides,j=n.data.get(s.dataId).values,[S,C,E,T]=u,I=n.data.get(r.dataId).values,[A,_,O,R]=c,P=d.padInfo.front,M=d.padInfo.left,D=d.padInfo.top;for(let F=0;F<m;++F){const e=Math.max(0,Math.ceil((P-F)/h)),t=Math.min(d.outDepth,(d.inDepth+P-F)/h),n=F*b;for(let a=0;a<g;++a){const r=Math.max(0,Math.ceil((D-a)/p)),s=Math.min(d.outHeight,(d.inHeight+D-a)/p),i=a*w+n;for(let n=0;n<x;++n){const o=Math.max(0,Math.ceil((M-n)/f)),l=Math.min(d.outWidth,(d.inWidth+M-n)/f),c=n*k+i;for(let i=0;i<d.inChannels;++i){const u=i*N+c;for(let c=0;c<d.outChannels;++c){let m=0;for(let u=0;u<d.batchSize;++u){const d=u*A,g=u*S;for(let u=e;u<t;++u){const e=(F+u*h-P)*_+d,t=u*C+g;for(let u=r;u<s;++u){const r=(a+u*p-D)*O+e,s=u*E+t;for(let e=o;e<l;++e){const t=e*T+s;m+=I[(n+e*f-M)*R+r+i]*j[t+c]}}}}y[u+c]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const qB={kernelName:wy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:s}=t,{pad:i,strides:o,inputShape:l}=a;QL([r],"conv3dBackpropInputV2");const c=Nv(r.shape),u=Nv(s.shape),d=TS(l,s.shape,o,1,i),h=new Lk(d.inShape,"float32"),p=h.values,[f,m,g,x]=h.strides,v=n.data.get(r.dataId).values,[y,b,w,k]=c,N=n.data.get(s.dataId).values,[j,S,C,E]=u,{batchSize:T,filterDepth:I,filterHeight:A,filterWidth:_,inChannels:O,inDepth:R,inHeight:P,inWidth:M,outChannels:D,outDepth:F,outHeight:L,outWidth:z,strideDepth:B,strideHeight:U,strideWidth:W}=d,V=I-1-d.padInfo.front,H=A-1-d.padInfo.top,G=_-1-d.padInfo.left;for(let q=0;q<T;++q)for(let e=0;e<O;++e)for(let t=0;t<R;++t){const n=t-V,a=Math.max(0,Math.ceil(n/B)),r=Math.min(F,(I+n)/B);for(let s=0;s<P;++s){const i=s-H,o=Math.max(0,Math.ceil(i/U)),l=Math.min(L,(A+i)/U);for(let c=0;c<M;++c){const u=c-G,d=Math.max(0,Math.ceil(u/W)),h=Math.min(z,(_+u)/W);let T=0;for(let t=a;t<r;++t){const a=t*B-n;for(let n=o;n<l;++n){const r=n*U-i;for(let s=d;s<h;++s){const i=y*q+b*t+w*n+k*s,o=j*(I-1-a)+S*(A-1-r)+C*(_-1-(s*W-u))+E*e;for(let e=0;e<D;++e){T+=v[i+e]*N[o+e]}}}}p[f*q+m*t+g*s+x*c+e]=T}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},KB=tz(ky,e=>Math.cos(e)),XB={kernelName:ky,backendName:"cpu",kernelFunc:KB},YB=tz(Ny,e=>Math.cosh(e)),$B={kernelName:Ny,backendName:"cpu",kernelFunc:YB};const QB={kernelName:Cy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:c}=a,[u,d,h,p]=r.shape,f=s.shape[0],[m,g]=o,x=fj([f,m,g,p],"float32"),v=n.data.get(s.dataId).values,y=n.data.get(i.dataId).values,b=n.data.get(r.dataId).values,w=Nv(r.shape),k=Nv(x.shape);for(let N=0;N<f;N++){const e=4*N,t=v[e],n=v[e+1],a=v[e+2],r=v[e+3],s=y[N];if(s>=u)continue;const i=m>1?(a-t)*(d-1)/(m-1):0,o=g>1?(r-n)*(h-1)/(g-1):0;for(let u=0;u<m;u++){const e=m>1?t*(d-1)+u*i:.5*(t+a)*(d-1);if(e<0||e>d-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+N*k[0];x.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),a=Math.ceil(e),i=e-t;for(let e=0;e<g;e++){const l=g>1?n*(h-1)+e*o:.5*(n+r)*(h-1);if(l<0||l>h-1){for(let t=0;t<p;t++){const n=t+e*k[2]+u*k[1]+N*k[0];x.values[n]=c}continue}const d=Math.floor(l),f=Math.ceil(l),m=l-d;for(let n=0;n<p;n++){let r=n+d*w[2]+t*w[1]+s*w[0];const o=b[r];r=n+f*w[2]+t*w[1]+s*w[0];const l=b[r];r=n+d*w[2]+a*w[1]+s*w[0];const c=b[r];r=n+f*w[2]+a*w[1]+s*w[0];const h=o+(l-o)*m,p=c+(b[r]-c)*m;r=n+e*k[2]+u*k[1]+N*k[0],x.values[r]=h+(p-h)*i}}}else for(let t=0;t<g;++t){const a=g>1?n*(h-1)+t*o:.5*(n+r)*(h-1);if(a<0||a>h-1){for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+N*k[0];x.values[n]=c}continue}const i=Math.round(a),l=Math.round(e);for(let e=0;e<p;e++){const n=e+i*w[2]+l*w[1]+s*w[0],a=e+t*k[2]+u*k[1]+N*k[0];x.values[a]=b[n]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const JB={kernelName:jy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,exclusive:i,reverse:o}=a;QL(r,"cumprod");const l=AC([s],r.shape.length);let c=r;null!=l&&(c=Xz({inputs:{x:r},backend:n,attrs:{perm:l}}));const u=OC(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=Qk(c.dtype,"int32"),h=Cv(sv(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let x=0;x<p.length;x+=f)for(let e=0;e<f;e++){const t=m(x,e);if(0===e)h[t]=i?1:p[t];else{const n=m(x,e-1);h[t]=i?p[n]*h[n]:p[t]*h[n]}}const g=n.makeTensorInfo(c.shape,d,h);if(null!=l){const e=Xz({inputs:{x:g},backend:n,attrs:{perm:_C(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const ZB={kernelName:Sy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,exclusive:i,reverse:o}=a;QL(r,"cumsum");const l=AC([s],r.shape.length);let c=r;null!=l&&(c=Xz({inputs:{x:r},backend:n,attrs:{perm:l}}));const u=OC(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=Qk(c.dtype,"int32"),h=Ev(sv(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let x=0;x<p.length;x+=f)for(let e=0;e<f;e++){const t=m(x,e);if(0===e)h[t]=i?0:p[t];else{const n=m(x,e-1);h[t]=i?p[n]+h[n]:p[t]+h[n]}}const g=n.makeTensorInfo(c.shape,d,h);if(null!=l){const e=Xz({inputs:{x:g},backend:n,attrs:{perm:_C(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const eU={kernelName:Ey,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:s}=t,{size:i,binaryOutput:o}=a;if(1===r.shape.length){const e=NB(n.data.get(r.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,e)}if(2===r.shape.length){const e=jB(n.bufferSync(r),n.bufferSync(s),i,o);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};const tU={kernelName:Ty,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:s,dataFormat:i}=a;nv("NHWC"===i,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i));const o=r.shape[0],l=r.shape[1],c=r.shape[2],u=r.shape[3],d=l*s,h=c*s,p=u/(s*s),f=n.data.get(r.dataId).values,m=new Float32Array(o*d*h*p);let g=0;for(let x=0;x<o;++x)for(let e=0;e<d;++e){const t=Math.floor(e/s),n=e%s;for(let e=0;e<h;++e){const a=Math.floor(e/s),r=(n*s+e%s)*p;for(let e=0;e<p;++e){const n=e+r+u*(a+c*(t+l*x));m[g++]=f[n]}}}return n.makeTensorInfo([o,d,h,p],r.dtype,m)}};function nU(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=a;QL([r,s],"depthwiseConv2DNative");const u=Nv(r.shape),d=Nv(s.shape);let h=l;null==h&&(h=[1,1]),nv(MS(i,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(h,"'"));const p=ES(r.shape,s.shape,i,h,o,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:x,padInfo:v}=p,y=v.left,b=v.top,w=p.outChannels/p.inChannels,k=new Lk(p.outShape,r.dtype),N=n.data.get(r.dataId).values,j=n.data.get(s.dataId).values,S=k.values;for(let C=0;C<p.batchSize;++C){const e=C*u[0],t=C*k.strides[0];for(let n=0;n<p.outHeight;++n){const a=t+n*k.strides[1],r=n*p.strideHeight-b;for(let t=0;t<f;++t){const n=r+t*g;if(n<0||n>=p.inHeight)continue;const s=t*d[0],i=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=a+e*k.strides[2],n=e*p.strideWidth-y;for(let e=0;e<m;++e){const a=n+e*x;if(a<0||a>=p.inWidth)continue;const r=s+e*d[1],o=i+a*p.inChannels;let l=t,c=r;for(let e=0;e<p.inChannels;++e){const t=N[o+e];for(let e=0;e<w;++e)S[l+e]+=t*j[c+e];l+=w,c+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const aU={kernelName:Iy,backendName:"cpu",kernelFunc:nU};const rU={kernelName:Ay,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=a;QL([r,s],"depthwiseConv2dNativeBackpropFilter");const d=ES(r.shape,u,i,o,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=d,g=new Lk(d.filterShape,"float32"),x=d.padInfo.left,v=d.padInfo.top,y=d.outChannels/d.inChannels,b=n.data.get(r.dataId).values,w=new Lk(r.shape,r.dtype,b),k=n.data.get(s.dataId).values,N=new Lk(s.shape,s.dtype,k);for(let j=0;j<f;++j){const e=Math.max(0,Math.ceil((v-j)/h)),t=Math.min(d.outHeight,(d.inHeight+v-j)/h);for(let n=0;n<m;++n){const a=Math.max(0,Math.ceil((x-n)/p)),r=Math.min(d.outWidth,(d.inWidth+x-n)/p);for(let s=0;s<d.outChannels;++s){const i=Math.trunc(s/y),o=s%y;let l=0;for(let c=0;c<d.batchSize;++c)for(let o=e;o<t;++o){const e=j+o*h-v;for(let t=a;t<r;++t){const a=n+t*p-x;l+=w.get(c,e,a,i)*N.get(c,o,t,s)}}g.set(l,j,n,i,o)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const sU={kernelName:_y,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=a;QL([r,s],"depthwiseConv2DNativeBackpropInput");const d=Nv(r.shape),h=Nv(s.shape),p=ES(u,s.shape,i,o,l,c,!0),f=new Lk(p.inShape,"float32"),m=f.values,[g,x,v]=f.strides,y=n.data.get(r.dataId).values,[b,w,k]=d,N=n.data.get(s.dataId).values,[j,S,C]=h,{batchSize:E,filterHeight:T,filterWidth:I,inChannels:A,inHeight:_,inWidth:O,outChannels:R,outHeight:P,outWidth:M,strideHeight:D,strideWidth:F}=p,L=T-1-p.padInfo.top,z=I-1-p.padInfo.left,B=R/A;for(let U=0;U<E;++U)for(let e=0;e<A;++e)for(let t=0;t<_;++t){const n=t-L,a=Math.max(0,Math.ceil(n/D)),r=Math.min(P,(T+n)/D);for(let s=0;s<O;++s){const i=s-z,o=Math.max(0,Math.ceil(i/F)),l=Math.min(M,(I+i)/F);let c=0;for(let t=a;t<r;++t){const a=t*D-n;for(let n=o;n<l;++n){const r=b*U+w*t+k*n,s=j*(T-1-a)+S*(I-1-(n*F-i))+C*e;for(let t=0;t<B;++t){c+=y[r+(e*B+t)]*N[s+t]}}}m[g*U+x*t+v*s+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const iU={kernelName:Oy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=sv(a.shape),s=n.data.get(a.dataId).values,i=fj([r,r],a.dtype),o=i.values;for(let c=0;c<s.length;c++)o[c*r+c]=s[c];const l=[...a.shape,...a.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},oU={kernelName:Ry,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,filter:s}=t,{strides:i,pad:o,dilations:l}=a,c=n,u=c.data.get(r.dataId).values,d=r.shape.length,h=c.data.get(s.dataId).values,p=s.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:x,outHeight:v,outWidth:y,padInfo:b,strideHeight:w,strideWidth:k,filterHeight:N,filterWidth:j,dilationHeight:S,dilationWidth:C,outShape:E}=jS(r.shape,s.shape,i,o,"NHWC",l),T=sv(E),I=E.length,A=mv(r.dtype,T);for(let _=0;_<f;++_)for(let e=0;e<v;++e){const t=e*w-b.top;for(let n=0;n<y;++n){const a=n*k-b.left;for(let i=0;i<x;++i){let o=Number.MIN_SAFE_INTEGER;for(let e=0;e<N;++e){const n=t+e*S;if(n>=0&&n<m)for(let t=0;t<j;++t){const l=a+t*C;if(l>=0&&l<g){const a=Av([_,n,l,i],d,Nv(r.shape)),c=Av([e,t,i],p,Nv(s.shape)),f=u[a]+h[c];f>o&&(o=f)}}}A[Av([_,e,n,i],I,Nv(E))]=o}}}return{dataId:c.write(jk(A,r.dtype),E,r.dtype),shape:E,dtype:r.dtype}}},lU={kernelName:My,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,filter:s,dy:i}=t,{strides:o,pad:l,dilations:c}=a,u=n,d=Sv(r.shape,u.data.get(r.dataId).values),h=Sv(s.shape,u.data.get(s.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:x,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:N,dilationHeight:j,dilationWidth:S,outShape:C}=jS(r.shape,s.shape,o,l,"NHWC",c);nv(i.rank===C.length,()=>"Error in ".concat(My,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(i.rank));const E=Sv(C,u.data.get(i.dataId).values),T=Tv(s.shape,s.dtype);for(let I=0;I<p;++I)for(let e=0;e<x;++e){const t=e*b-y.top;for(let n=0;n<v;++n){const a=n*w-y.left;for(let r=0;r<g;++r){let s=Number.MIN_SAFE_INTEGER,i=0,o=0;for(let e=0;e<k;++e){const n=t+e*j;if(n>=0&&n<f)for(let t=0;t<N;++t){const l=a+t*S;if(l>=0&&l<m){const a=d[I][n][l][r]+h[e][t][r];a>s&&(s=a,i=e,o=t)}}}T[i][o][r]+=E[I][e][n][r]}}}return{dataId:u.write(jk(T,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},cU={kernelName:Py,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,filter:s,dy:i}=t,{strides:o,pad:l,dilations:c}=a,u=n,d=Sv(r.shape,u.data.get(r.dataId).values),h=Sv(s.shape,u.data.get(s.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:x,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:N,dilationHeight:j,dilationWidth:S,outShape:C}=jS(r.shape,s.shape,o,l,"NHWC",c);nv(i.rank===C.length,()=>"Error in ".concat(Py,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(i.rank));const E=Sv(C,u.data.get(i.dataId).values),T=Tv(r.shape,r.dtype);for(let I=0;I<p;++I)for(let e=0;e<x;++e){const t=e*b-y.top;for(let n=0;n<v;++n){const a=n*w-y.left;for(let r=0;r<g;++r){let s=Number.MIN_SAFE_INTEGER,i=t<0?0:t,o=a<0?0:a;for(let e=0;e<k;++e){const n=t+e*j;if(n>=0&&n<f)for(let t=0;t<N;++t){const l=a+t*S;if(l>=0&&l<m){const a=d[I][n][l][r]+h[e][t][r];a>s&&(s=a,i=n,o=l)}}}T[I][i][o][r]+=E[I][e][n][r]}}}return{dataId:u.write(jk(T,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};const uU={kernelName:Dy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r}=t,{canvas:s,options:i}=a,{contextOptions:o,imageOptions:l}=i||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===o||void 0===o?void 0:o.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(o.contextType," is not supported by the CPU backend."));const d=s.getContext(u,(null===o||void 0===o?void 0:o.contextAttributes)||{});if(null==d)throw new Error("Could not get the context with ".concat(u," type."));const[h,p]=r.shape.slice(0,2),f=2===r.shape.length?1:r.shape[2],m=n.data.get(r.dataId).values,g="float32"===r.dtype?255:1,x=new Uint8ClampedArray(p*h*4);for(let y=0;y<h*p;++y){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=m[y*f+n];if("float32"===r.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===r.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*y;x[t+0]=Math.round(e[0]),x[t+1]=Math.round(e[1]),x[t+2]=Math.round(e[2]),x[t+3]=Math.round(e[3])}s.width=p,s.height=h;const v=new ImageData(x,p,h);return d.putImageData(v,0,0),r}},dU=cz((e,t)=>e*t),hU=Az((e,t,n,a)=>({real:e*n-t*a,imag:e*a+t*n})),pU=Iz(Ob,dU,hU),fU={kernelName:Ob,backendName:"cpu",kernelFunc:pU};function mU(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a;let o;QL(r,"sum"),o="bool"===r.dtype?Ez({inputs:{x:r},backend:n,attrs:{dtype:"int32"}}):sz({inputs:{x:r},backend:n});const l=o.shape.length,c=hv(s,o.shape),u=AC(c,l);let d=c,h=o;null!=u&&(h=Xz({inputs:{x:o},backend:n,attrs:{perm:u}}),d=OC(d.length,l)),IC("sum",d,h.shape.length);const[p,f]=EC(h.shape,d);let m=Nz(n,p,Qk(h.dtype,"int32"));const g=sv(f),x=n.data.get(m.dataId).values,v=n.data.get(h.dataId).values;for(let y=0;y<x.length;++y){const e=y*g;let t=0;for(let n=0;n<g;++n)t+=v[e+n];x[y]=t}if(i){const e=m;m=Mz({inputs:{x:m},backend:n,attrs:{shape:TC(m.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(o),null!=u&&n.disposeIntermediateTensorInfo(h),m}const gU={kernelName:yw,backendName:"cpu",kernelFunc:mU};const xU={kernelName:Ly,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,s=t,{allDims:i,summedDims:o,idDims:l}=gI(r,s.length);vI(i.length,l,s);const{path:c,steps:u}=yI(o,l),d=u.length;let h=null,p=i.length;const f=[];for(let m=0;m<d;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:a}=xI(p,l[e]);let r;bI(t)?r=s[e]:(r=Xz({inputs:{x:s[e]},backend:n,attrs:{perm:t}}),f.push(r));const i=r.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);iv(r.shape,i)||(r=Mz({inputs:{x:r},backend:n,attrs:{shape:i}}),f.push(r)),null===h?h=r:(h=pU({inputs:{a:r,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=mU({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}};const vU={kernelName:By,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:a,y:r}=t;QL([a,r],"eluGrad");const s=new Float32Array(sv(r.shape)),i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values;for(let l=0;l<i.length;++l){const e=i[l];s[l]=e>=0?o[l]:o[l]*(e+1)}return n.makeTensorInfo(r.shape,"float32",s)}},yU=cz((e,t)=>e===t?1:0),bU=Iz(Wy,yU,null,"bool"),wU={kernelName:Wy,backendName:"cpu",kernelFunc:bU},kU=JT,NU=ZT,jU=eI,SU=tI,CU=nI,EU=aI,TU=tz(Uy,e=>{const t=Math.sign(e),n=Math.abs(e),a=1/(1+kU*n);return t*(1-((((EU*a+CU)*a+SU)*a+jU)*a+NU)*a*Math.exp(-n*n))}),IU={kernelName:Uy,backendName:"cpu",kernelFunc:TU},AU=ez(e=>Math.exp(e)),_U=nz(Vy,AU,"float32"),OU={kernelName:Vy,backendName:"cpu",kernelFunc:_U};function RU(e){const{inputs:t,backend:n,attrs:a}=e,{input:r}=t,{dim:s}=a,i=r.shape.length,o=r.shape.slice();let l=s;return s<0&&(nv(-(i+1)<=s,()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")),l=i+s+1),o.splice(l,0,1),Mz({inputs:{x:r},backend:n,attrs:{shape:o}})}const PU={kernelName:Hy,backendName:"cpu",kernelFunc:RU},MU=ez(e=>Math.expm1(e)),DU=nz(Gy,MU),FU={kernelName:Gy,backendName:"cpu",kernelFunc:DU},LU=cz((e,t)=>e/t),zU=Iz(Fy,LU),BU={kernelName:Fy,backendName:"cpu",kernelFunc:zU},UU=cz((e,t)=>e-t),WU=Az((e,t,n,a)=>({real:e-n,imag:t-a})),VU=Iz(Mw,UU,WU),HU={kernelName:Mw,backendName:"cpu",kernelFunc:VU};function GU(e,t,n){const a=e.shape,r=a[0],s=a[1],i=n.data.get(e.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[r,s],u=sv(c),d=fv("float32",u),h=fv("float32",u);for(let g=0;g<r;g++){const e=bB({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,s]}}),a=bB({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),r=wz({inputs:{real:e,imag:a},backend:n}),{real:i,imag:c}=qU(r,t,n),u=rI(i,c);for(let t=0;t<s;t++){const e=lI(u,t);d[g*s+t]=e.real,h[g*s+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r)}const p=n.makeTensorInfo(c,"float32",d),f=n.makeTensorInfo(c,"float32",h),m=wz({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function qU(e,t,n){const a=sv(e.shape),r=n.data.get(e.dataId),s=n.data.get(r.complexTensorInfos.real.dataId).values,i=n.data.get(r.complexTensorInfos.imag.dataId).values;if(0===((o=a)&o-1)){const r=KU(s,i,a,t,n),o=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(o,"float32",r.real),t=n.makeTensorInfo(o,"float32",r.imag),s=n.makeTensorInfo([],"float32",Nk(a,"float32")),i=sz({inputs:{x:s},backend:n}),l=BU.kernelFunc({inputs:{a:e,b:s},backend:n}),c=BU.kernelFunc({inputs:{a:t,b:i},backend:n}),u=n.data.get(l.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:d}}return r}{const e=function(e,t,n){const a=new Float32Array(2*t);for(let r=0;r<t;r++){let s=0,i=0;for(let a=0;a<t;a++){const o=dI(r*a,t,n),l=lI(e,a);s+=l.real*o.real-l.imag*o.imag,i+=l.real*o.imag+l.imag*o.real}n&&(s/=t,i/=t),cI(a,s,i,r)}return a}(rI(s,i),a,t);return sI(e)}var o}function KU(e,t,n,a,r){if(1===n)return{real:e,imag:t};const s=rI(e,t),i=n/2,o=iI(s),l=o.real,c=o.imag,u=[l.length],d=r.makeTensorInfo(u,"float32",l),h=r.makeTensorInfo(u,"float32",c),p=wz({inputs:{real:d,imag:h},backend:r}),f=oI(s),m=f.real,g=f.imag,x=[m.length],v=r.makeTensorInfo(x,"float32",m),y=r.makeTensorInfo(x,"float32",g),b=wz({inputs:{real:v,imag:y},backend:r}),w=KU(l,c,i,a,r),k=w.real,N=w.imag,j=[k.length],S=r.makeTensorInfo(j,"float32",k),C=r.makeTensorInfo(j,"float32",N),E=wz({inputs:{real:S,imag:C},backend:r}),T=KU(m,g,i,a,r),I=T.real,A=T.imag,_=[I.length],O=r.makeTensorInfo(_,"float32",I),R=r.makeTensorInfo(_,"float32",A),P=wz({inputs:{real:O,imag:R},backend:r}),M=uI(n,a),D=[M.real.length],F=r.makeTensorInfo(D,"float32",M.real),L=r.makeTensorInfo(D,"float32",M.imag),z=wz({inputs:{real:F,imag:L},backend:r}),B=pU({inputs:{a:z,b:P},backend:r}),U=Rz({inputs:{a:E,b:B},backend:r}),W=VU({inputs:{a:E,b:B},backend:r}),V=jz({inputs:{input:U},backend:r}),H=jz({inputs:{input:W},backend:r}),G=DB({inputs:{input:U},backend:r}),q=DB({inputs:{input:W},backend:r}),K=LB({inputs:[V,H],backend:r,attrs:{axis:0}}),X=LB({inputs:[G,q],backend:r,attrs:{axis:0}}),Y=r.data.get(K.dataId).values,$=r.data.get(X.dataId).values;return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(S),r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(E),r.disposeIntermediateTensorInfo(O),r.disposeIntermediateTensorInfo(R),r.disposeIntermediateTensorInfo(P),r.disposeIntermediateTensorInfo(F),r.disposeIntermediateTensorInfo(L),r.disposeIntermediateTensorInfo(z),r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(U),r.disposeIntermediateTensorInfo(W),r.disposeIntermediateTensorInfo(V),r.disposeIntermediateTensorInfo(G),r.disposeIntermediateTensorInfo(H),r.disposeIntermediateTensorInfo(q),r.disposeIntermediateTensorInfo(K),r.disposeIntermediateTensorInfo(X),{real:Y,imag:$}}const XU={kernelName:qy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t,r=sv(a.shape),s=a.shape[a.shape.length-1],i=Mz({inputs:{x:a},backend:n,attrs:{shape:[r/s,s]}}),o=GU(i,!1,n),l=Mz({inputs:{x:o},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}};function YU(e){const{backend:t,attrs:n}=e,{shape:a,value:r,dtype:s}=n,i=s||bv(r),o=mv(i,sv(a));return function(e,t){e.fill(t)}(o,r),t.makeTensorInfo(a,i,o)}const $U={kernelName:Ky,backendName:"cpu",kernelFunc:YU};const QU={kernelName:Xy,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,s=a,i=fv(r.dtype,sv(r.shape)),[o,l,c,u]=r.shape,d=s.data.get(r.dataId).values;for(let h=0;h<o;h++){const e=h*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const a=t*u;for(let r=0;r<u;r++){const s=Math.round(c-t-1),o=e+n+a+r;let l=d[o];if(s>=0&&s<c){l=d[e+n+s*u+r]}i[o]=l}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},JU=ez(e=>Math.floor(e)),ZU=nz(Yy,JU),eW={kernelName:Yy,backendName:"cpu",kernelFunc:ZU},tW=cz((e,t)=>Math.floor(e/t)),nW=Iz($y,tW,null,"int32"),aW={kernelName:$y,backendName:"cpu",kernelFunc:nW};const rW={kernelName:$w,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=a;let m=BB({inputs:{x:r,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const e=m;if("NCHW"===u&&1===i.shape.length&&1!==i.shape[0]){const e=Mz({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Rz({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=Rz({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===u&&"prelu"===p&&1===o.shape.length&&1!==o.shape[0]){const e=Mz({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=bz(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=bz(n,m,p,o,f);n.disposeIntermediateTensorInfo(e)}return m}};const sW={kernelName:Qw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=a;let m=nU({inputs:{x:r,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const e=m;m=Rz({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=bz(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}};function iW(e,t,n,a,r,s,i,o,l){const c=fj([a,s],n);for(let u=0;u<a;u++){const n=[];let a=0;for(let t=0;t<r;t++){const s=e[u*r+t];a+=s*i[t],n.push(s)}if(a<0||a>=l/s)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(o));for(let e=0;e<s;e++)c.values[u*s+e]=t.get(...t.indexToLoc(a*s+e))}return c}const oW={kernelName:Zy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,s=sv(a.shape),i=r.shape,o=i[i.length-1],[l,c,u,d]=qT(a,r);if(0===c)return n.makeTensorInfo(l,a.dtype,[]);const h=iW(n.data.get(r.dataId).values,n.bufferSync(a),a.dtype,c,o,u,d,a.shape,s);return n.makeTensorInfo(l,a.dtype,h.values)}};function lW(e,t,n){const a=fj(n,e.dtype);for(let r=0;r<a.size;++r){const n=a.indexToLoc(r).slice(),s=n[0],i=n[2],o=t.locToIndex([s,i]);n[2]=t.values[o];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(a.values[r]=e.values[l])}return a}const cW={kernelName:Jy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:s}=t,{axis:i,batchDims:o}=a;QL([r,s],"gatherV2");const l=hv(i,r.shape)[0],c=n.data.get(s.dataId).values,u=r.shape[l];for(let y=0;y<c.length;++y){const e=c[y];nv(e<=u-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]"))}let d=o;null==o&&(d=0);const h=sv(s.shape),p=FI(r,s,l,d),f=Mz({inputs:{x:r},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Mz({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],x=n.bufferSync(m),v=lW(n.bufferSync(f),x,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},uW=cz((e,t)=>e>t?1:0),dW=Iz(eb,uW,null,"bool"),hW={kernelName:eb,backendName:"cpu",kernelFunc:dW},pW=cz((e,t)=>e>=t?1:0),fW=Iz(tb,pW,null,"bool"),mW={kernelName:tb,backendName:"cpu",kernelFunc:fW};const gW={kernelName:ab,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t,r=sv(a.shape),s=a.shape[a.shape.length-1],i=Mz({inputs:{x:a},backend:n,attrs:{shape:[r/s,s]}}),o=GU(i,!0,n),l=Mz({inputs:{x:o},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}},xW=tz(sb,e=>Number.isFinite(e)?1:0,"bool"),vW={kernelName:sb,backendName:"cpu",kernelFunc:xW},yW=tz(ib,e=>Math.abs(e)===1/0?1:0,"bool"),bW={kernelName:ib,backendName:"cpu",kernelFunc:yW},wW=tz(ob,e=>Number.isNaN(e)?1:0,"bool"),kW={kernelName:ob,backendName:"cpu",kernelFunc:wW},NW=cz((e,t)=>e<t?1:0),jW=Iz(cb,NW,null,"bool"),SW={kernelName:cb,backendName:"cpu",kernelFunc:jW},CW=cz((e,t)=>e<=t?1:0),EW=Iz(ub,CW,null,"bool"),TW={kernelName:ub,backendName:"cpu",kernelFunc:EW};function IW(e,t,n){const a=(t-e)/(n-1),r=Ev(n,"float32");r[0]=e;for(let s=1;s<r.length;s++)r[s]=r[s-1]+a;return r}const AW={kernelName:db,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:s}=n,i=IW(a,r,s);return t.makeTensorInfo([i.length],"float32",i)}},_W=ez(e=>Math.log(e)),OW=nz(hb,_W),RW={kernelName:hb,backendName:"cpu",kernelFunc:OW},PW=tz(pb,e=>Math.log1p(e)),MW={kernelName:pb,backendName:"cpu",kernelFunc:PW},DW=cz((e,t)=>e&&t),FW=Iz(fb,DW,null,"bool"),LW={kernelName:fb,backendName:"cpu",kernelFunc:FW},zW=tz(mb,e=>e?0:1,"bool"),BW={kernelName:mb,backendName:"cpu",kernelFunc:zW},UW=cz((e,t)=>e||t),WW=Iz(gb,UW,null,"bool"),VW={kernelName:gb,backendName:"cpu",kernelFunc:WW};const HW={kernelName:xb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=a;QL(r,"LRN");const c=r.shape[3],u=c-1,d=n.data.get(r.dataId).values,h=sv(r.shape),p=new Float32Array(h);function f(e){const t=e%c;let n=e-t+Math.max(0,t-s);const a=e-t+Math.min(t+s,u);let r=0;for(;n<=a;n++){const e=d[n];r+=e*e}return r}for(let m=0;m<h;m++){const e=f(m),t=d[m]*Math.pow(i+o*e,-l);p[m]=t}return n.makeTensorInfo(r.shape,r.dtype,p)}};const GW={kernelName:vb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=a;QL(i,"LRNGrad");const d=sv(i.shape),h=i.shape[3],p=n.data.get(i.dataId).values,f=n.data.get(r.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(d),x=d;for(let v=0;v<x;v++){const e=v%h,t=v-e+Math.max(0,e-o),n=v-e+Math.min(h,e+o+1);let a=0;for(let r=t;r<n;r++)a+=Math.pow(f[r],2);a=c*a+l;for(let r=t;r<n;r++){let e=-2*c*u*f[r]*m[v]/a;v===r&&(e+=Math.pow(a,-u)),e*=p[v],g[r]+=e}}return n.makeTensorInfo(i.shape,r.dtype,g)}};function qW(e,t,n,a){const r=fv(a,sv(n));for(let s=0;s<r.length;++s){const n=s*t;let a=e[n];for(let r=0;r<t;++r){const t=e[n+r];(Number.isNaN(t)||t>a)&&(a=t)}r[s]=a}return r}function KW(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:s,keepDims:i}=a,o=n;let l=r.shape;const c=l.length,u=hv(s,l);let d=u;const h=AC(d,c);let p=o.data.get(r.dataId).values;if(null!=h){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[h[t]];p=Kz(p,l,r.dtype,h,e),d=OC(d.length,c),l=e}QL(r,"max"),IC("max",d,c);const[f,m]=EC(l,d),g=qW(p,sv(m),f,r.dtype),x=o.write(g,f,r.dtype);let v=f;if(i){v=TC(f,u)}return{dataId:x,shape:v,dtype:r.dtype}}const XW={kernelName:yb,backendName:"cpu",kernelFunc:KW},YW=cz((e,t)=>Math.max(e,t)),$W=Iz(bb,YW),QW={kernelName:bb,backendName:"cpu",kernelFunc:$W};const JW={kernelName:wb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;QL(r,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=a;nv(MS(i,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const c=SS(r.shape,s,i,1,o,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&iv(c.inShape,c.outShape))u=sz({inputs:{x:r},backend:n});else{const e=n.data.get(r.dataId).values,t=Nv(r.shape),a=dB(e,r.shape,r.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,r.dtype,a.values)}return u}};const ZW={kernelName:Nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=a;QL(r,"maxPool3d");const u=CS(r.shape,s,i,1,o,l,c),d=pB(n.data.get(r.dataId).values,r.shape,r.dtype,Nv(r.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const eV={kernelName:jb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=a;QL([r,s],"maxPool3DGrad");const u=CS(s.shape,i,o,1,l,c),d=function(e,t){const n=fj(t.outShape,"int32"),a=t.strideDepth,r=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let x=0;x<t.outDepth;++x){const v=x*a-h;let y=v;for(;y<0;)y+=i;const b=Math.min(t.inDepth,c+v);for(let a=0;a<t.outHeight;++a){const c=a*r-p;let h=c;for(;h<0;)h+=o;const w=Math.min(t.inHeight,u+c);for(let r=0;r<t.outWidth;++r){const p=r*s-f;let k=p;for(;k<0;)k+=l;const N=Math.min(t.inWidth,d+p);let j=Number.NEGATIVE_INFINITY,S=-1;for(let t=y;t<b;t+=i){const n=t-v;for(let a=h;a<w;a+=o){const r=a-c;for(let s=k;s<N;s+=l){const i=s-p,o=e.get(m,t,a,s,g);o>=j&&(j=o,S=n*u*d+r*u+i)}}}n.set(S,m,x,a,r,g)}}}return n}(n.bufferSync(s),u),h=u.strideDepth,p=u.strideHeight,f=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,x=u.dilationWidth,v=u.effectiveFilterDepth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,w=v-1-u.padInfo.front,k=b-1-u.padInfo.left,N=y-1-u.padInfo.top,j=fj(s.shape,"float32"),S=n.bufferSync(r);for(let C=0;C<u.batchSize;++C)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let a=0;a<u.inWidth;++a){const r=t-w,s=n-N,i=a-k;let o=0;for(let t=0;t<v;t+=m){const n=(r+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let a=0;a<y;a+=g){const r=(s+a)/p;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let s=0;s<b;s+=x){const l=(i+s)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=v*y*b-1-d.get(C,n,r,l,e)===t*y*b+a*b+s?1:0;if(0===c)continue;o+=S.get(C,n,r,l,e)*c}}}j.set(o,C,t,n,a,e)}return n.makeTensorInfo(j.shape,j.dtype,j.values)}};const tV={kernelName:kb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s,output:i}=t,o=s;QL([s,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=a,h=SS(o.shape,l,c,1,u,d),p=n.data.get(o.dataId).values,f=fj(h.outShape,o.dtype,hB(p,o.shape,o.dtype,h).values),m=h.strideHeight,g=h.strideWidth,x=h.dilationHeight,v=h.dilationWidth,y=h.effectiveFilterHeight,b=h.effectiveFilterWidth,w=b-1-h.padInfo.left,k=y-1-h.padInfo.top,N=fj(o.shape,"float32"),j=n.data.get(r.dataId).values,S=fj(r.shape,"float32",j);for(let C=0;C<h.batchSize;++C)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const a=t-k,r=n-w;let s=0;for(let t=0;t<y;t+=x){const n=(a+t)/m;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let a=0;a<b;a+=v){const i=(r+a)/g;if(i<0||i>=h.outWidth||Math.floor(i)!==i)continue;const o=y*b-1-f.get(C,n,i,e)===t*b+a?1:0;if(0===o)continue;s+=S.get(C,n,i,e)*o}}N.set(s,C,t,n,e)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};const nV={kernelName:Sb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:l}=n,c=a;QL(r,"MaxPoolWithArgmax");const u=c.data.get(r.dataId).values,d=SS(r.shape,s,i,[1,1],o),[h,p]=function(e,t,n,a,r){const s=dB(e,0,n,Nv(t),r,"max"),i=hB(e,t,n,r,!0,a);return[s.values,i.values]}(u,r.shape,r.dtype,l,d),f=c.write(h,d.outShape,r.dtype),m=c.write(p,d.outShape,r.dtype);return[{dataId:f,shape:d.outShape,dtype:r.dtype},{dataId:m,shape:d.outShape,dtype:"int32"}]}};const aV={kernelName:Cb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a,o=hv(s,r.shape),l=sv(EC(r.shape,o)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const d=Ez({inputs:{x:r},backend:n,attrs:{dtype:"float32"}});c.push(d);const h=zU({inputs:{a:d,b:u},backend:n});c.push(h);const p=mU({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:i}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};const rV={kernelName:Eb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a;QL(r,"min");const o=hv(s,r.shape);let l=o;const c=AC(l,r.shape.length);let u=r;null!=c&&(u=Xz({inputs:{x:r},backend:n,attrs:{perm:c}}),l=OC(l.length,r.shape.length)),IC("min",l,u.shape.length);const[d,h]=EC(u.shape,l),p=sv(h),f=Ev(sv(d),u.dtype),m=n.data.get(u.dataId).values;for(let x=0;x<f.length;++x){const e=x*p;let t=m[e];for(let n=0;n<p;++n){const a=m[e+n];(Number.isNaN(a)||a<t)&&(t=a)}f[x]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(i){const e=Mz({inputs:{x:g},backend:n,attrs:{shape:TC(d,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},sV=cz((e,t)=>Math.min(e,t)),iV=Iz(Tb,sV),oV={kernelName:Tb,backendName:"cpu",kernelFunc:iV};const lV={kernelName:Ib,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:s,mode:i}=a;QL(r,"mirrorPad");const o=s.map((e,t)=>e[0]+r.shape[t]+e[1]),l=s.map(e=>e[0]),c=s.map((e,t)=>e[0]+r.shape[t]),u="reflect"===i?0:1,d=n.data.get(r.dataId).values,h=r.shape.length,p=Nv(r.shape),f=sv(o),m=o.length,g=Nv(o),x=fv(r.dtype,f);for(let v=0;v<f;v++){let e=_v(v,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map((e,t)=>e-l[t]);const t=Av(e,h,p);x[v]=d[t]}return{dataId:n.write(x,o,r.dtype),shape:o,dtype:r.dtype}}},cV=cz((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),uV=Iz(Ab,cV),dV={kernelName:Ab,backendName:"cpu",kernelFunc:uV};function hV(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:s}=a,i=r.shape.length;let o=s;if(-1===o&&(o=i-1),o!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(o));const l=hv([o],r.shape),c=KW({inputs:{x:r},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=TC(c.shape,l),d=Mz({inputs:{x:c},backend:n,attrs:{shape:u}}),h=VU({inputs:{a:r,b:d},backend:n}),p=_U({inputs:{x:h},backend:n}),f=mU({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=Mz({inputs:{x:f},backend:n,attrs:{shape:u}}),g=zU({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const pV={kernelName:kw,backendName:"cpu",kernelFunc:hV};const fV={kernelName:_b,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:s,seed:i,normalized:o}=a;QL(r,"multinomial");const l=o?r:hV({inputs:{logits:r},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,s],p=Ev(sv(h),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=d[e];for(let r=1;r<t.length;++r)t[r]=t[r-1]+d[e+r];const n=$C.alea(i.toString()),a=f*s;for(let r=0;r<s;++r){const e=n();p[a+r]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[a+r]=n;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}};function mV(e,t,n){const a=Nk(-1,n);return dU([],t,a,e,n)}const gV={kernelName:Rb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;QL(a,"neg");const r=n.data.get(a.dataId).values,[s,i]=mV(r,a.shape,a.dtype);return n.makeTensorInfo(i,a.dtype,s)}},xV=JE;const vV={kernelName:Mb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=a;QL(r,"NonMaxSuppression");const c=n.data.get(r.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=xV(c,u,i,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},yV=ZE;const bV={kernelName:Db,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=a;QL(r,"NonMaxSuppressionPadded");const u=n.data.get(r.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:h,validOutputs:p}=yV(u,d,i,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},wV=eT;const kV={kernelName:Fb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=a;QL(r,"NonMaxSuppressionWithScore");const u=n.data.get(r.dataId).values,d=n.data.get(s.dataId).values,h=i,p=o,f=l,m=c,{selectedIndices:g,selectedScores:x}=wV(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}},NV=cz((e,t)=>e!==t?1:0),jV=Iz(Pb,NV,null,"bool"),SV={kernelName:Pb,backendName:"cpu",kernelFunc:jV};const CV={kernelName:zb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:s,depth:i,onValue:o,offValue:l}=a;QL(r,"oneHot");const c=sv(r.shape),u=new Float32Array(c*i);u.fill(l);const d=n.data.get(r.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<i&&(u[h*i+d[h]]=o);return n.makeTensorInfo([...r.shape,i],s,u)}};function EV(e){const{inputs:t,backend:n}=e,{x:a}=t;if("string"===a.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===a.dtype){const e=jz({inputs:{input:a},backend:n}),t=EV({inputs:{x:e},backend:n}),r=DB({inputs:{input:a},backend:n}),s=EV({inputs:{x:r},backend:n}),i=wz({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s),i}return YU({backend:n,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}const TV={kernelName:Gw,backendName:"cpu",kernelFunc:EV};const IV={kernelName:Lb,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){const t=jz({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),s=DB({inputs:{input:r},backend:a}),i=EV({inputs:{x:s},backend:a}),o=wz({inputs:{real:n,imag:i},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(i),o}return YU({backend:a,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}};function AV(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return RU({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const s=t[0].shape,i=t[0].dtype;t.forEach(e=>{av(s,e.shape,"All tensors passed to stack must have matching shapes"),nv(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(e=>{const t=RU({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t}),c=LB({inputs:l,backend:n,attrs:{axis:r}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}const _V={kernelName:Bb,backendName:"cpu",kernelFunc:AV};const OV={kernelName:Ub,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:s,constantValue:i}=a;QL(r,"pad");const o=s.map((e,t)=>e[0]+r.shape[t]+e[1]),l=s.map(e=>e[0]),c=n.data.get(r.dataId).values,u=sv(r.shape),d=r.shape.length,h=Nv(r.shape),p=sv(o),f=o.length,m=Nv(o),g=fv(r.dtype,p);0!==i&&g.fill(i);for(let x=0;x<u;x++){const e=_v(x,d,h).map((e,t)=>e+l[t]);g[Av(e,f,m)]=c[x]}return{dataId:n.write(g,o,r.dtype),shape:o,dtype:r.dtype}}},RV=cz((e,t)=>Math.pow(e,t)),PV=Iz(Wb,RV),MV={kernelName:Wb,backendName:"cpu",kernelFunc:PV};function DV(e,t,n,a){const[r,s]=EC(e,a),i=Qk(t,"int32"),o=Ev(sv(r),i),l=sv(s);for(let c=0;c<o.length;++c){const e=c*l;let t=1;for(let a=0;a<l;++a)t*=n[e+a];o[c]=t}return{outVals:o,outShape:r,outDtype:i}}const FV={kernelName:Hb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a;QL(r,"prod");const o=r.shape.length,l=hv(s,r.shape),c=AC(l,o);let u=l,d=r;const h=[];null!=c&&(d=Xz({inputs:{x:r},backend:n,attrs:{perm:c}}),h.push(d),u=OC(u.length,o));const p=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=DV(d.shape,d.dtype,p,u);let x=m;return i&&(x=TC(m,l)),h.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(x,g,f)}};function LV(e,t,n,a){const r=[];let s=0;const i=t.length-1+n.length,o=new Array(i).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){const a=e[n],r=n===e.length-1?t:e[n+1].length;if(0===a.length)throw new Error("Ragged splits may not be empty");if(a[0]<0)throw new Error("Ragged splits must be non-negative");if(a[a.length-1]>r)throw new Error("Ragged splits must not point past values");for(let e=1;e<a.length;++e)if(a[e-1]>a[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,a);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)o[c].push(t*e)}for(let c=0;c<e.length;++c){let a=e[c],i=e[c]+1;for(let e=0;e<n.length;++e){const r=n[e],s=e+t.length-1;if(s>=0){const e=o[s],t=e[e.length-1]-r[a];for(let n=a;n<i;++n)o[s].push(r[n+1]+t)}a=r[a],i=r[i]}i!==a&&(r.push([a,i]),s+=i-a)}return{outSplits:o,valueSlices:r,numValues:s}}function zV(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let a=t;a<e.length;a++)n[t-1]*=e[a];return n}function BV(e,t,n,a,r){const s=t.slice();s[0]=r;const i=mv(n,sv(s)),o=e.length;return function(e,t,n,a,r,s){const i=zV(t,2)[1],o=zV(s,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<a;++n)r[l*o+n]=e[t*i+n];++l}}(e,t,a,0===o?0:o/t[0],i,s),[i,s]}function UV(e,t,n,a,r,s,i,o){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,a)=>{if(e<0||e>=n){const r=_v(a,t.length,Nv(t)).join(",");throw new Error("indices[".concat(r,"] = ").concat(e," is not in [0, ").concat(n,")"))}})}(s,i,t[0][0]-1),0===a.length)throw new Error("params.rank must be nonzero");const l=a[0],{outSplits:c,valueSlices:u,numValues:d}=LV(s,i,e,l),h=function(e){const t=[];for(let n=0;n<e.length;++n){const a=mv("int32",e[n].length);t.push(a),e[n].forEach((e,t)=>a[t]=e)}return t}(c),p=BV(n,a,r,u,d);return[h,p[0],p[1]]}const WV={kernelName:Gb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{paramsNestedSplits:r,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:o}=a,l=r.map(e=>n.data.get(e.dataId).values),c=r.map(e=>e.shape),u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,[h,p,f]=UV(l,c,u,s.shape,s.dtype,d,i.shape),m=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,s.dtype,p);return m.concat([g])}},VV=2147483647;function HV(e,t,n,a,r,s,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=0===t.length,l=0===r.length,c=0===i.length,u=[];o||u.push(t[0]),l||u.push(r[0]),c||u.push(i[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],h=mv("int32",d+1);h[0]=0;for(let m=0;m<d;++m){const t=o?e[0]:e[m],n=l?a[0]:a[m],r=c?s[0]:s[m];if(0===r)throw new Error("Requires delta != 0");let i;if(r>0&&n<t||r<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/r)),i>VV)throw new Error("Requires ((limit - start) / delta) <= ".concat(VV));h[m+1]=h[m]+i}const p=mv(n,h[d]);let f=0;for(let m=0;m<d;++m){const t=h[m+1]-h[m];let n=o?e[0]:e[m];const a=c?s[0]:s[m];for(let e=0;e<t;++e)p[f++]=n,n+=a}return[h,p]}const GV={kernelName:qb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:a,limits:r,deltas:s}=t,i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,[c,u]=HV(i,a.shape,a.dtype,o,r.shape,l,s.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],a.dtype,u)]}};var qV=RT;class KV{constructor(e,t,n,a,r,s,i,o,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=a,this.valuesDType=r,this.defaultValue=s,this.defaultValueShape=i,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=MT(c),this.raggedRank=DT(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===qV.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===qV.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case qV.VALUE_ROWIDS:return KV.getMaxWidthValueRowID(t);case qV.ROW_SPLITS:return KV.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(qV[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let a=0;a<t-1;++a){const t=e[a+1]-e[a];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,a=e[0],r=0;for(let s=1;s<t;++s){const t=e[s];t!==a&&(a=t,r=Math.max(s-n,r),n=s)}return Math.max(t-n,r)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return YV(e,n)}calculateOutputSize(e){const t=this.valuesShape;FT(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=PT(this.raggedRank,n,t);a[0]<0&&(a[0]=e);for(let r=1;r<=this.raggedRank;++r)a[r]<0&&(a[r]=this.getMaxWidth(r));return a}calculateFirstParentOutputIndex(e,t,n){const a=Math.min(e,n),r=[];let s=0;for(let i=0;i<a;++i,s+=t)r.push(s);for(let i=a;i<e;++i)r.push(-1);return nv(r.length===e,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(e,t,n,a){const r=e.length,s=[];for(let i=0;i<r-1;++i){const r=e[i+1]-e[i];let o=Math.min(a,r),l=t[i];-1===l&&(o=0);for(let e=0;e<o;++e)s.push(l),l+=n;for(let e=0;e<r-o;++e)s.push(-1)}if(r>0&&s.length!==e[r-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,t,n,a){const r=e.length,s=[];if(0===r)return[];let i=0,o=e[0];if(o>=t.length)throw new Error("Got currentValueRowId=".concat(o,", which is not less than ").concat(t.length));let l=t[o];s.push(l);for(let c=1;c<r;++c){const r=e[c];if(r===o)l>=0&&(++i,i<a?l+=n:l=-1);else{if(i=0,o=r,r>=t.length)throw new Error("Got nextValueRowId=".concat(r," which is not less than ").concat(t.length));l=t[r]}s.push(l)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,t,n,a){const r=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case qV.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,t,n,a);case qV.ROW_SPLITS:if(r.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(r.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(r,t,n,a);default:throw new Error("Unsupported partition type: ".concat(qV[s]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case qV.FIRST_DIM_SIZE:return e[0];case qV.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case qV.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(qV[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let s=n.length-2;s>=0;--s)n[s]=n[s+1]*t[s+1];const a=YV(t,!1),r=mv(this.valuesDType,sv(a));if(n[0]*t[0]>0){let s=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){s=this.calculateOutputIndex(e-1,s,n[e],t[e])}this.setOutput(this.raggedRank,s,r,a)}return[a,r]}setOutput(e,t,n,a){if(0===n.length)return;const r=this.values,s=n;let i=a.slice();i=i.slice(e+1);const o=sv(i),l=t.length;let c=this.defaultValue;if(c.length!==o&&1!==c.length){const e=this.defaultValueShape;EN(()=>{const t=zS(c,e),n=qS(t,i);c=n.dataSync()})}let u=0,d=0,h=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==h){if(d<h){const e=r.subarray(u*o);XV(s.subarray(d*o),e,(h-d)*o)}if(p>=l){const t=n.length;e=Math.floor(t/o)}if(e>h)if(1===this.defaultValue.length)s.subarray(h*o,e*o).fill(this.defaultValue[0]),h=e;else for(;e>h;){XV(s.slice(h*o),c,o),++h}e<0?(u=p+1,d=h):(u=p,d=h,h=d+1)}else++h}}}function XV(e,t,n){for(let a=0;a<n;a++)e[a]=t[a]}function YV(e,t){const n=[];for(let a of e){if(a<0){if(!t)throw new Error("Dimension ".concat(a," must be >= 0"));if(a<-1)throw new Error("Dimension ".concat(a," must be >= -1"));a=-1}n.push(a)}return n}function $V(e,t,n,a,r,s,i,o,l,c){return new KV(e,t,n,a,r,s,i,o,l,c).compute()}const QV={kernelName:Kb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{shape:r,values:s,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=a,c=n.data.get(r.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,h=o.map(e=>n.data.get(e.dataId).values),p=o.map(e=>e.shape),[f,m]=$V(c,r.shape,u,s.shape,s.dtype,d,i.shape,h,p,l);return n.makeTensorInfo(f,s.dtype,m)}};function JV(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return Ev(0,a);const r=Ev(Math.abs(Math.ceil((t-e)/n)),a);t<e&&1===n&&(n=-1),r[0]=e;for(let s=1;s<r.length;s++)r[s]=r[s-1]+n;return r}const ZV={kernelName:Xb,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,dtype:s,step:i}=n,o=JV(a,r,i,s);return t.makeTensorInfo([o.length],s,o)}},eH=tz($b,e=>1/e),tH={kernelName:$b,backendName:"cpu",kernelFunc:eH};const nH={kernelName:tw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:s,halfPixelCenters:i,size:o}=a;QL(r,"resizeBilinear");const l=Nv(r.shape),[c,u]=o,[d,h,p,f]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(sv([d,c,u,f])),x=[s&&c>1?h-1:h,s&&u>1?p-1:p],v=[s&&c>1?c-1:c,s&&u>1?u-1:u];let y=0;const b=x[0]/v[0],w=x[1]/v[1];for(let k=0;k<d;k++)for(let e=0;e<c;e++){let t;t=i?b*(e+.5)-.5:b*e;const n=Math.max(0,Math.floor(t)),a=t-n,r=Math.min(h-1,Math.ceil(t)),s=k*l[0]+n*l[1],o=k*l[0]+r*l[1];for(let e=0;e<u;e++){let t;t=i?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,c=Math.min(p-1,Math.ceil(t)),u=s+n*l[2],d=o+n*l[2],h=s+c*l[2],x=o+c*l[2];for(let e=0;e<f;e++){const t=m[u+e],n=m[d+e],s=t+(m[h+e]-t)*r,i=s+(n+(m[x+e]-n)*r-s)*a;g[y++]=i}}}return n.makeTensorInfo([d,c,u,f],"float32",g)}};const aH={kernelName:nw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:s}=t,{alignCorners:i}=a;QL([s,r],"resizeBilinearGrad");const o=Nv(r.shape),[l,c,u,d]=r.shape,[,h,p]=s.shape,f=new Float32Array(l*c*u*d),m=[i&&h>1?c-1:c,i&&p>1?u-1:u],g=[i&&h>1?h-1:h,i&&p>1?p-1:p],x=m[0]/g[0],v=m[1]/g[1],y=n.data.get(s.dataId).values;let b=0;for(let w=0;w<l;w++){const e=w*o[0];for(let t=0;t<h;t++){const n=t*x,a=Math.floor(n),r=Math.min(Math.ceil(n),c-1),s=e+a*o[1],i=e+r*o[1],l=n-a,h=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),a=Math.min(Math.ceil(t),u-1),r=t-n,c=1-r,p=s+n*o[2],m=s+a*o[2],g=i+n*o[2],x=i+a*o[2],w=h*c,k=h*r,N=l*c,j=l*r;for(let e=0;e<d;e++){const t=y[b++];f[p+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*N,f[x+e]+=t*j}}}}return n.makeTensorInfo([l,u,c,d],"float32",f)}};const rH={kernelName:Zb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:s,halfPixelCenters:i,size:o}=a;QL(r,"resizeNearestNeighbor");const l=Nv(r.shape),[c,u]=o,[d,h,p,f]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(d*c*u*f),x=[s&&c>1?h-1:h,s&&u>1?p-1:p],v=[s&&c>1?c-1:c,s&&u>1?u-1:u],y=x[0]/v[0],b=x[1]/v[1];let w=0;for(let k=0;k<d;k++){const e=k*l[0];for(let t=0;t<c;t++){const n=i?y*(t+.5):y*t;let a=Math.min(h-1,s?Math.round(n):Math.floor(n));i&&(a=Math.max(0,a));const r=e+a*l[1];for(let e=0;e<u;e++){const t=i?b*(e+.5):b*e;let n=Math.min(p-1,s?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const a=r+n*l[2];for(let e=0;e<f;e++){const t=m[a+e];g[w++]=t}}}}return n.makeTensorInfo([d,c,u,f],r.dtype,g)}};const sH={kernelName:ew,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:s}=t,{alignCorners:i}=a;QL([s,r],"resizeNearestNeighborGrad");const o=Nv(r.shape),l=Nv(s.shape),[c,u,d,h]=r.shape,[,p,f]=s.shape,m=new Float32Array(c*u*d*h),g=n.data.get(s.dataId).values,x=[i&&p>1?u-1:u,i&&f>1?d-1:d],v=[i&&p>1?p-1:p,i&&f>1?f-1:f],y=x[0]/v[0],b=x[1]/v[1],w=1/y,k=1/b,N=2*Math.ceil(w)+2,j=2*Math.ceil(k)+2;for(let S=0;S<c;S++){const e=S*o[0];for(let t=0;t<u;t++){const n=e+t*o[1],a=Math.floor(t*w),r=Math.floor(a-N/2);for(let s=0;s<d;s++){const a=n+s*o[2],c=Math.floor(s*k),x=Math.floor(c-j/2);for(let n=0;n<h;n++){let o=0;for(let a=0;a<N;a++){const c=a+r;if(c<0||c>=p)continue;const h=e+c*l[1],m=c*y;if(t===Math.min(u-1,i?Math.round(m):Math.floor(m)))for(let e=0;e<j;e++){const t=e+x;if(t<0||t>=f)continue;const a=h+t*l[2],r=t*b;s===Math.min(d-1,i?Math.round(r):Math.floor(r))&&(o+=g[a+n])}}m[a+n]=o}}}}return n.makeTensorInfo(r.shape,r.dtype,m)}};const iH={kernelName:rw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:s}=a;QL(r,"reverse");const i=r.shape.length,o=hv(s,r.shape);if(0===i)return sz({inputs:{x:r},backend:n});const l=new Lk(r.shape,r.dtype),c=n.bufferSync(r);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();o.forEach(e=>t[e]=r.shape[e]-1-t[e]),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},oH={kernelName:Xw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,{radians:s,fillValue:i,center:o}=n,l=a,c=fv(r.dtype,sv(r.shape)),[u,d,h,p]=r.shape,[f,m]=BT(o,d,h),g=Math.sin(s),x=Math.cos(s),v=l.data.get(r.dataId).values;for(let y=0;y<u;y++){const e=y*h*d*p;for(let t=0;t<d;t++){const n=t*(h*p);for(let a=0;a<h;a++){const r=a*p;for(let s=0;s<p;s++){const o=[u,t,a,s],l=o[2],y=o[1];let b=(l-f)*x-(y-m)*g,w=(l-f)*g+(y-m)*x;b=Math.round(b+f),w=Math.round(w+m);let k=i;if("number"!==typeof i&&(k=3===s?255:i[s]),b>=0&&b<h&&w>=0&&w<d){k=v[e+w*(h*p)+b*p+s]}c[e+n+r+s]=k}}}}return{dataId:l.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},lH=tz(sw,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),cH={kernelName:sw,backendName:"cpu",kernelFunc:lH},uH=ez(e=>1/Math.sqrt(e)),dH=nz(iw,uH),hH={kernelName:iw,backendName:"cpu",kernelFunc:dH};function pH(e,t,n,a,r,s,i,o,l,c){const u=[a/r,r],d=e.values,h=t.values;if(0===a)return fj(n,t.dtype);const p=l instanceof Lk?l:fj(u,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<s;f++){const e=[];let s=0;for(let t=0;t<i;t++){const n=d[f*i+t];e.push(n),s+=n*o[t]}if(s<0||s>=a/r)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<r;n++)c?p.values[s*r+n]+=h[f*r+n]:p.values[s*r+n]=0===t.rank?h[0]:h[f*r+n]}return p}const fH={kernelName:ow,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:s}=t,{shape:i}=a,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=YT(0,r,i),h=pH(n.bufferSync(r),n.bufferSync(s),i,d,c,l,o,u,0,!0);return n.makeTensorInfo(i,h.dtype,h.values)}};function mH(e,t){let n=0,a=e.length,r=0;for(;n<a;)r=Math.floor((n+a)/2),e[r]<t?n=r+1:a=r;return a}function gH(e,t){let n=0,a=e.length,r=0;for(;n<a;)r=Math.floor((n+a)/2),e[r]<=t?n=r+1:a=r;return a}const xH={kernelName:cw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:s}=t,{side:i}=a,o=function(e,t,n,a,r,s){const i=mv("int32",n*r);for(let o=0;o<n;++o){const n=e.slice(o*a,(o+1)*a),l=o*r;for(let e=0;e<r;++e)i[l+e]="left"===s?mH(n,t[e+l]):gH(n,t[e+l])}return i}(n.data.get(r.dataId).values,n.data.get(s.dataId).values,r.shape[0],r.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",o)}};const vH={kernelName:uw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:s}=t;QL([a,r,s],"select");const i=a.shape.length,o=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(s.dataId).values,u=Qk(r.dtype,s.dtype),d=Ev(sv(r.shape),u);let h=0;const p=0===i||i>1||1===r.shape.length?1:sv(r.shape.slice(1));for(let f=0;f<o.length;f++)for(let e=0;e<p;e++)1===o[f]?d[h++]=l[f]:d[h++]=c[f];return n.makeTensorInfo(r.shape,u,d)}},yH=$T,bH=QT,wH=tz(dw,e=>e>=0?bH*e:yH*(Math.exp(e)-1)),kH={kernelName:dw,backendName:"cpu",kernelFunc:wH},NH=tz(mw,e=>e<0?-1:e>0?1:0),jH={kernelName:mw,backendName:"cpu",kernelFunc:NH},SH=tz(pw,e=>Math.sin(e)),CH={kernelName:pw,backendName:"cpu",kernelFunc:SH},EH=tz(fw,e=>Math.sinh(e)),TH={kernelName:fw,backendName:"cpu",kernelFunc:EH},IH=Math.log(1.1920928955078125e-7)+2,AH=tz(xw,e=>{const t=e>-IH,n=e<IH,a=Math.exp(e);let r;return r=n?a:t?e:Math.log(1+a),r}),_H={kernelName:xw,backendName:"cpu",kernelFunc:AH};const OH={kernelName:bw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:s,paddings:i}=a;QL([r],"spaceToBatchND");const o=sv(s),l=[[0,0]];l.push(...i);for(let g=1+s.length;g<r.shape.length;++g)l.push([0,0]);const c=OV.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),u=UT(c.shape,s,o,!1),d=WT(u.length,s.length,!1),h=VT(c.shape,s,o,!1),p=Mz({inputs:{x:c},backend:n,attrs:{shape:u}}),f=Xz({inputs:{x:p},backend:n,attrs:{perm:d}}),m=Mz({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function RH(e,t,n,a,r,s,i){const o=t[0],l=s[0],c=new Array(l),u=new Array(o),d=t[1];if(0===l){if(0!==o)throw new Error(NI(o));return[mv(n,0),[0,d],mv(r,0),c,u]}let h=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<o;++g){const t=e[g*d];if(t<0)throw new Error(jI(g,t));if(t>=l)throw new Error(SI(g,t,l));++f[t],h=h&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];c[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&h){const t=e,n=a;for(let e=0;e<o;++e)u[e]=e;return[t,[o,d],n,c,u]}{const t=f[l-1],s=mv(n,t*d),h=mv(r,t),p=new Array(l).fill(0);for(let n=0;n<o;++n){const t=e[n*d],r=p[t],i=(0===t?0:f[t-1])+r;p[t]++;for(let a=0;a<d;++a)s[i*d+a]=e[n*d+a];h[i]=a[n],u[n]=i}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];s[t*d+0]=e;for(let e=1;e<d;++e)s[t*d+e]=0;h[t]=i}}return[s,[t,d],h,c,u]}}const PH={kernelName:Nw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(s.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(r.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const o=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values[0],[d,h,p,f,m]=RH(o,a.shape,a.dtype,l,r.dtype,c,u);return[n.makeTensorInfo(h,a.dtype,d),n.makeTensorInfo([h[0]],r.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};function MH(e,t,n,a,r){const s=sv(a),i=t[0],o=r.length,l=[];let c=1,u=-1;for(let m=0;m<o;++m){const e=r[m];if(-1===e){if(-1!==u)throw new Error(CI(u,m));u=m,l.push(1)}else{if(e<0)throw new Error(EI(m,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(s/c);if(c*e!==s)throw new Error(II(a,l));l[u]=e}if(sv(l)!==s)throw new Error(AI(a,l));const d=a.length,h=[];if(d>0){h[d-1]=1;for(let e=d-2;e>=0;--e)h[e]=h[e+1]*a[e+1]}const p=[];if(o>0){p[o-1]=1;for(let e=o-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=mv(n,i*o);for(let m=0;m<i;++m){let t=0;for(let n=0;n<d;++n)t+=e[m*d+n]*h[n];for(let e=0;e<o;++e)f[m*o+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[i,o],l]}const DH={kernelName:jw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:s}=t;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(r.shape));if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(s.shape));const i=Array.from(n.data.get(r.dataId).values),o=n.data.get(a.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,u,d]=MH(o,a.shape,a.dtype,i,l);return[n.makeTensorInfo(u,a.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}};function FH(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const o=a.length,l=[t[0],e.length/t[0]],c=l[1],u=o>0?r[o-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=u;const h=d.reduce((e,t)=>e*t,1),p=mv(n,h);if(0===o)return u>0&&p.fill(i),[p,d];if(u<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,x=r[f];for(;;){let t=0;if(m<o){if(t=r[m],x===t){++m;continue}if(x>=t)throw new Error(OI())}if(x<0||x>=u)throw new Error(RI(x,u));x>g&&p.fill(i,g*c,x*c);for(let n=f;n<m;++n){const t=a[n];if(t<0||t>=l[0])throw new Error(PI(n,a[n],l[0]));for(let n=0;n<c;n++)p[x*c+n]+=e[t*c+n]}if(s)for(let e=0;e<c;e++)p[x*c+e]/=m-f;if(f=m,++m,g=x+1,x=t,m>o)break}return g<u&&p.fill(i,g*c,u*c),[p,d]}const LH={kernelName:Sw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:s}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(r.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(s.shape));if(r.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,[c,u]=FH(i,a.shape,a.dtype,o,l,!0);return n.makeTensorInfo(u,a.dtype,c)}};const zH={kernelName:Cw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:s}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(r.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(s.shape));if(r.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,[c,u]=FH(i,a.shape,a.dtype,o,l);return n.makeTensorInfo(u,a.dtype,c)}};const BH={kernelName:Ew,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:s,defaultValue:i}=t,{outputShape:o}=a,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=YT(0,r,o),p=!1,f=n.bufferSync(r);let m;switch(s.dtype){case"bool":m=pH(f,n.bufferSync(s),o,h,u,c,l,d,Boolean(n.data.get(i.dataId).values[0]),p);break;case"float32":m=pH(f,n.bufferSync(s),o,h,u,c,l,d,n.data.get(i.dataId).values[0],p);break;case"int32":m=pH(f,n.bufferSync(s),o,h,u,c,l,d,n.data.get(i.dataId).values[0],p);break;case"string":m=pH(f,n.bufferSync(s),o,h,u,c,l,d,Ek(n.data.get(i.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(s.dtype))}return n.makeTensorInfo(o,m.dtype,m.values)}};const UH={kernelName:ww,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:s,axis:i}=a,o=hv(i,r.shape)[0],l=kI(r,s,o),c=new Array(r.shape.length).fill(0),u=r.shape.slice();return l.map(e=>{const t=[...u];t[o]=e;const a=bB({inputs:{x:r},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,a})}},WH=ez(e=>Math.sqrt(e)),VH=tz(vw,e=>Math.sqrt(e)),HH={kernelName:vw,backendName:"cpu",kernelFunc:VH},GH={kernelName:Iw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:a}=t,r=n;QL(a,"square");const s=r.data.get(a.dataId).values,i=new Float32Array(s.length);for(let o=0;o<s.length;++o){const e=s[o];i[o]=e*e}return{dataId:r.write(i,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},qH=cz((e,t)=>{const n=e-t;return n*n}),KH=Iz(Tw,qH),XH={kernelName:Tw,backendName:"cpu",kernelFunc:KH},YH=ez((e,t)=>{const{pattern:n,replaceGlobal:a,rewrite:r}=t;return e.replace(new RegExp(n,a?"g":""),r)}),$H=nz(Aw,YH),QH={kernelName:Aw,backendName:"cpu",kernelFunc:$H},JH=tz(qw,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),ZH={kernelName:qw,backendName:"cpu",kernelFunc:JH};function eG(e,t,n,a){const r=fj(e,t.dtype);for(let s=0;s<r.size;s++){const e=r.indexToLoc(s),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+a[t];r.set(t.get(...i),...e)}return r}const tG={kernelName:_w,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=a;QL(r,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:v,end:y,strides:b}=yS(r.shape,s,i,o,l,c,u,d,h);let w;if(m)w=Mz({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||x){nv(r.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(r.shape.length));const e=iS(v,y,b),t=bB({inputs:{x:r},backend:n,attrs:{begin:v,size:e}});w=Mz({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=eG(p,n.bufferSync(r),b,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class nG{constructor(e,t,n,a,r,s){this.separator=Ck(e),this.nGramWidths=t,this.leftPad=Ck(n),this.rightPad=Ck(a),this.padWidth=r,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,a,r,s){for(let i=0;i<r;++i){const o=this.getPadWidth(s),l=Math.max(0,o-i),c=Math.max(0,o-(r-(i+1))),u=s-(l+c),d=t+(l>0?0:i-o);let h=0;h+=l*this.leftPad.length;for(let t=0;t<u;++t)h+=e[d+t].length;h+=c*this.rightPad.length;h+=(l+c+u-1)*this.separator.length,n[a+i]=new Uint8Array(h);const p=n[a+i];let f=0;const m=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[d+t]),m(this.separator);if(u>0){m(e[d+u-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,a=t.length;if(a>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let r=1;r<a;++r){let a=t[r]>=e;if(a=a&&t[r]<=n,!a)throw new Error("Invalid split value ".concat(t[r],", must be in [").concat(e,", ").concat(n,"]"));e=t[r]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const r=a-1,s=mv("int32",a);if(0===n||0===a){const e=new Array(n);for(let t=0;t<=r;++t)s[t]=0;return[e,s]}s[0]=0;for(let o=1;o<=r;++o){const e=t[o]-t[o-1];let n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),s[o]=s[o-1]+n}const i=new Array(s[r]);for(let o=0;o<r;++o){const n=t[o];let a=s[o];if(this.nGramWidths.forEach(r=>{const s=t[o+1]-t[o],l=this.getNumNGrams(s,r);this.createNGrams(e,n,i,a,l,r),a+=l}),this.preserveShort&&a===s[o]){const r=t[o+1]-t[o];if(0===r)continue;const s=r+2*this.padWidth,l=1;this.createNGrams(e,n,i,a,l,s)}}return[i,s]}}function aG(e,t,n,a,r,s,i,o){return new nG(n,a,r,s,i,o).compute(e,t)}const rG={kernelName:Ow,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=a,{data:u,dataSplits:d}=t,h=n.data.get(u.dataId).values,p=n.data.get(d.dataId).values,[f,m]=aG(h,p,r,s,i,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function sG(e,t,n,a){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)a.push(e.subarray(t,t+1));return}if(1===t.length){const r=t[0];let s=e.indexOf(r);for(;-1!==s;){const t=e.subarray(0,s);n&&0===t.length||a.push(t),s=(e=e.subarray(s+1)).indexOf(r)}return void(n&&0===e.length||a.push(e))}let r=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){const t=e.subarray(r,s);n&&0===t.length||a.push(t),r=s+1}}function iG(e,t,n){const a=e.length,r=[];let s=0,i=0;const o=new Array(a);for(let h=0;h<a;++h){const a=r.length;sG(e[h],t,n,r);const l=r.length-a;o[h]=l,s+=l,i=Math.max(i,l)}const l=mv("int32",2*s),c=new Array(s),u=[a,i];let d=0;for(let h=0;h<a;++h)for(let e=0;e<o[h];++e)l[2*d]=h,l[2*d+1]=e,c[d]=r[d],++d;return[l,c,u]}const oG={kernelName:Rw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error("Input must be a vector, got shape: ".concat(s.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,d]=iG(o,l,r),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function lG(e,t){const n=mv("int32",e.length);for(let a=0;a<e.length;++a)n[a]=kk(e[a]).modulo(t).getLowBitsUnsigned();return n}const cG={kernelName:Pw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=lG(n.data.get(s.dataId).values,r);return n.makeTensorInfo(s.shape,"int32",i)}},uG=tz(Dw,e=>Math.tan(e)),dG={kernelName:Dw,backendName:"cpu",kernelFunc:uG},hG=tz(Fw,e=>Math.tanh(e));const pG={kernelName:lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:a,indices:r,updates:s}=t,{sliceRank:i,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=YT(0,r,a.shape),d=n.bufferSync(r),h=n.bufferSync(s),p=n.bufferSync(a),f=pH(d,h,a.shape,u,l,o,i,c,p,!1);return n.makeTensorInfo(a.shape,f.dtype,f.values)}};function fG(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const a=fj(n,e.dtype);for(let r=0;r<a.values.length;++r){const t=a.indexToLoc(r),n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=t[a]%e.shape[a];const s=e.locToIndex(n);a.values[r]=e.values[s]}return a}const mG={kernelName:Lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:s}=a;QL(r,"tile");const i=fG(n.bufferSync(r),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},gG=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function xG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;a>n;){if(a-n>600){const r=a-n+1,s=t-n+1,i=Math.log(r),o=.5*Math.exp(2*i/3),l=.5*Math.sqrt(i*o*(r-o)/r)*Math.sign(s-r/2);xG(e,t,Math.max(n,Math.floor(t-s*o/r+l)),Math.min(a,Math.floor(t+(r-s)*o/r+l)))}const r=e[t];let s=n,i=a;for(tv(e,n,t),gG(e[a],r)>0&&tv(e,n,a);s<i;){for(tv(e,s,i),s++,i--;gG(e[s],r)<0;)s+=1;for(;gG(e[i],r)>0;)i-=1}0===gG(e[n],r)?tv(e,n,i):(i+=1,tv(e,i,a)),i<=t&&(n=i+1),t<=i&&(a=i-1)}}function vG(e,t,n,a,r){const s=t[t.length-1],[i,o]=[e.length/s,s],l=fv(n,i*a),c=fv("int32",i*a);for(let d=0;d<i;d++){const t=d*o,n=e.subarray(t,t+o);let s=new Array(n.length);n.forEach((e,t)=>s[t]={value:e,index:t}),a<s.length&&(xG(s,a),s=s.slice(0,a)),r&&s.sort(gG);const i=d*a,u=l.subarray(i,i+a),h=c.subarray(i,i+a);for(let e=0;e<a;e++)u[e]=s[e].value,h[e]=s[e].index}const u=t.slice();return u[u.length-1]=a,[fj(u,n,l),fj(u,"int32",c)]}const yG={kernelName:zw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:s,sorted:i}=a;QL(r,"topk");const o=n.data.get(r.dataId).values,[l,c]=vG(o,r.shape,r.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const bG={kernelName:Bw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{image:r,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=n,[u,d,h,p]=r.shape,[f,m]=null!=c?c:[d,h],g=[u,f,m,p],x=Nv(r.shape),v=x[0],y=x[1],b=x[2],w=Nv(g),k=w[0],N=w[1],j=w[2],S=fv(r.dtype,sv(g));S.fill(l);const C=a.data.get(r.dataId).values,E=a.data.get(s.dataId).values;for(let T=0;T<u;++T){const e=1===s.shape[0]?E:E.subarray(8*T,8*T+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let a=0;a<p;++a){let r;const s=e[6]*n+e[7]*t+1;if(0===s)continue;const c=(e[0]*n+e[1]*t+e[2])/s,u=(e[3]*n+e[4]*t+e[5])/s,p=wG(c,h,o),f=wG(u,d,o);switch(i){case"nearest":r=NG(C,d,h,v,y,b,T,f,p,a,l);break;case"bilinear":r=jG(C,d,h,v,y,b,T,f,p,a,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}S[T*k+t*N+n*j+a]=r}return a.makeTensorInfo(g,r.dtype,S)}return{dataId:a.write(S,g,r.dtype),shape:r.shape,dtype:r.dtype}}};function wG(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Zx(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return Zx(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Zx(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function kG(e,t,n,a,r,s,i,o,l,c,u){return 0<=o&&o<t&&0<=l&&l<n?e[i*a+o*r+l*s+c]:u}function NG(e,t,n,a,r,s,i,o,l,c,u){return kG(e,t,n,a,r,s,i,Math.round(o),Math.round(l),c,u)}function jG(e,t,n,a,r,s,i,o,l,c,u){const d=Math.floor(o),h=Math.floor(l),p=d+1,f=h+1;return(p-o)*((f-l)*kG(e,t,n,a,r,s,i,d,h,c,u)+(l-h)*kG(e,t,n,a,r,s,i,d,f,c,u))+(o-d)*((f-l)*kG(e,t,n,a,r,s,i,p,h,c,u)+(l-h)*kG(e,t,n,a,r,s,i,p,f,c,u))}function SG(e,t,n,a){const r=hv(t,n)[0],s=[1,n[0],1];for(let f=0;f<r;f++)s[0]*=n[f];s[1]=n[r];for(let f=r+1;f<n.length;f++)s[2]*=n[f];const i=new Map,o=new Int32Array(n[r]),l=new Lk(s,a,e),c=[],u=1===s[0]&&1===s[2];for(let f=0;f<n[r];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<s[0];t++)for(let n=0;n<s[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=i.get(t);if(null!=n)o[f]=n;else{const e=i.size;i.set(t,e),o[f]=e,c.push(f)}}const d=s.slice();d[1]=i.size;const h=new Lk(d,a);c.forEach((e,t)=>{for(let n=0;n<s[0];n++)for(let a=0;a<s[2];a++)h.set(l.get(n,e,a),n,t,a)});const p=n.slice();return p[r]=d[1],{outputValues:h.values,outputShape:p,indices:o}}const CG={kernelName:Ww,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:s}=t;QL(s,"unique");const i=a.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:c}=SG(i,r,s.shape,s.dtype);return[a.makeTensorInfo(l,s.dtype,o),a.makeTensorInfo([c.length],"int32",c)]}};const EG={kernelName:Vw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:s}=a;s<0&&(s+=r.shape.length);const i=r.shape.length,o=r.shape[s],l=new Array(i-1);let c=0;for(let p=0;p<i;p++)p!==s&&(l[c++]=r.shape[p]);const u=new Array(i).fill(0),d=r.shape.slice();d[s]=1;const h=new Array(o);for(let p=0;p<h.length;p++){u[s]=p;const e=bB({inputs:{x:r},backend:n,attrs:{begin:u,size:d}});h[p]=Mz({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return h}};const TG={kernelName:Hw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:s}=t,{numSegments:i}=a;QL(r,"unsortedSegmentSum");const o=[],l=[],c=r.shape.length-s.shape.length;let u=s;for(let h=0;h<c;++h){const e=RU({inputs:{input:u},backend:n,attrs:{dim:h+1}});u=e,l.push(e)}for(let h=0;h<i;++h){const e=Nk(h,"int32"),t=n.makeTensorInfo([],"int32",e),a=bU({inputs:{a:t,b:u},backend:n}),s=Ez({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),i=pU({inputs:{a:s,b:r},backend:n}),c=mU({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});o.push(c),l.push(t),l.push(a),l.push(s),l.push(i),l.push(c)}const d=AV({inputs:o,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}},IG=[zz,Uz,Vz,Gz,Pz,qz,$z,Qz,Jz,Zz,tB,aB,sB,lB,uB,fB,mB,gB,xB,Lz,vB,kB,SB,EB,TB,Tz,_B,RB,kz,PB,zB,UB,WB,VB,HB,GB,qB,XB,$B,QB,JB,ZB,eU,tU,aU,rU,sU,iU,oU,lU,cU,uU,xU,rz,vU,wU,IU,OU,PU,FU,XU,$U,QU,eW,aW,rW,sW,oW,cW,hW,mW,iz,gW,FB,vW,bW,kW,lz,SW,TW,AW,RW,MW,LW,BW,VW,HW,GW,XW,QW,JW,ZW,eV,tV,nV,aV,rV,oV,lV,dV,fV,fU,gV,vV,bV,kV,SV,CV,IV,_V,OV,MV,hz,FV,WV,GV,QV,ZV,Sz,BU,tH,fz,gz,Dz,nH,aH,rH,sH,iH,oH,cH,hH,fH,xH,vH,kH,yz,jH,CH,TH,wB,pV,_H,OH,PH,DH,LH,zH,BH,UH,HH,GH,XH,QH,ZH,tG,rG,oG,cG,HU,gU,dG,{kernelName:Fw,backendName:"cpu",kernelFunc:hG},pG,mG,yG,bG,Yz,CG,EG,TG,TV];for(const n of IG)sk(n);const AG={},_G={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function OG(e,t){if(!(e in AG)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(Dv().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete AG[e]},!1),Dv().getBool("SOFTWARE_WEBGL_ENABLED")&&(_G.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",_G)||n.getContext("experimental-webgl",_G);return n.getContext("webgl2",_G)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;AG[e]=n}const n=AG[e];return null==n||n.isContextLost()?(delete AG[e],OG(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),AG[e])}var RG,PG,MG;function DG(e,t){return[t,e]}function FG(e){const t=sv(e);return lv(Math.ceil(t/4))}function LG(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function zG(e,t){const n=e;let a,r,s,i,o,l,c,u,d,h;return 2===Dv().getNumber("WEBGL_VERSION")?(a=n.R32F,r=n.R16F,s=n.RGBA16F,i=n.RGBA32F,o=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(a=e.RGBA,r=e.RGBA,s=e.RGBA,i=n.RGBA,o=e.RGBA,c=4,u=4,d=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}function BG(e,t){const n=t();return Dv().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(RG||(RG={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(PG||(PG={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(MG||(MG={}));function UG(e){return!!(Dv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function WG(e,t){return QG(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}const VG=/ERROR: [0-9]+:([0-9]+):/g;function HG(e,t){const n=VG.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const a=+n[1],r=e.split("\n"),s=r.length.toString().length+2,i=r.map((e,t)=>cv((t+1).toString(),s)+e);let o=0;for(let d=0;d<i.length;d++)o=Math.max(i[d].length,o);const l=i.slice(0,a-1),c=i.slice(a-1,a),u=i.slice(a);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(cv(c[0],o)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function GG(e,t){if(BG(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function qG(e,t,n,a,r,s,i){const o=e.getAttribLocation(t,n);return-1!==o&&(BG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,a)),BG(e,()=>e.vertexAttribPointer(o,r,e.FLOAT,!1,s,i)),BG(e,()=>e.enableVertexAttribArray(o)),!0)}function KG(e,t,n,a){BG(e,()=>function(e,t,n){JG(e,n),BG(e,()=>e.activeTexture(e.TEXTURE0+n)),BG(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,a)),BG(e,()=>e.uniform1i(n,a))}function XG(e,t,n){BG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),BG(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function YG(e,t){BG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),BG(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function $G(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function QG(e,t,n){const a=BG(e,()=>t());if(null==a)throw new Error(n);return a}function JG(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function ZG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return sv(e.slice(0,e.length-t))}function eq(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function tq(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[ZG(e),...eq(e)]),t}function nq(e){return e%2===0}function aq(e,t){if(iv(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],a=t[t.length-1];if(n===a)return!0;if(nq(n)&&nq(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&nq(e[0])&&nq(t[0])}let rq,sq;function iq(e,t){return null!=e.getExtension(t)}function oq(e){try{if(null!=OG(e))return!0}catch(jEe){return console.log("Error when getting WebGL context: ",jEe),!1}return!1}function lq(e){if(0===e)return!1;const t=OG(e);if(1!==e){if(iq(t,"EXT_color_buffer_float"))return cq(t);const e="EXT_color_buffer_half_float";if(iq(t,e)){const n=t.getExtension(e);return function(e,t){const n=zG(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);const r=1,s=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,r,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(i),o}(t,n)}return!1}if(!iq(t,"OES_texture_float"))return!1;if(!iq(t,"WEBGL_color_buffer_float"))return!1;return cq(t)}function cq(e){const t=zG(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),r}function uq(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&nv("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend.")})}const dq=Dv();function hq(){let e,t,n,a,r,s,i,o,l,c;return 2===Dv().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",r="texture",s="outputColor",i="out vec4 outputColor;",o=Dv().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",a="varying",r="texture2D",s="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:r,output:s,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function pq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=Nv(t);return a.map((t,r)=>{const s="int ".concat(e[r]," = ").concat(n," / ").concat(t),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t);return"".concat(s,"; ").concat(i,";")}).join("")}function fq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=Nv(t);return a.map((t,r)=>{const s="int ".concat(e[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(e[r]," * outShapeStrides[").concat(r,"]");return"".concat(s,"; ").concat(i,";")}).join("")}function mq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=e.map((e,t)=>t),r=function(e,t){const n=e.length,a=e.map(e=>"".concat(t,"[").concat(e,"]")),r=new Array(n-1);r[n-2]=a[n-1];for(let s=n-3;s>=0;--s)r[s]="(".concat(r[s+1]," * ").concat(a[s+1],")");return r}(a,t);return r.map((t,a)=>{const s="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(s,"; ").concat(i,";")}).join("")}function gq(e){const t=Nv(e).map(e=>e.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}dq.registerFlag("HAS_WEBGL",()=>dq.getNumber("WEBGL_VERSION")>0),dq.registerFlag("WEBGL_VERSION",()=>oq(2)?2:oq(1)?1:0),dq.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),dq.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===dq.get("WEBGL_VERSION")),dq.registerFlag("WEBGL_CPU_FORWARD",()=>!0),dq.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),dq.registerFlag("WEBGL_PACK",()=>dq.getBool("HAS_WEBGL")),dq.registerFlag("WEBGL_PACK_NORMALIZATION",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_CLIP",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_REDUCE",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_LAZILY_UNPACK",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_CONV_IM2COL",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>dq.getBool("WEBGL_PACK")),dq.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==rq){const t=OG(e);rq=t.getParameter(t.MAX_TEXTURE_SIZE)}return rq}(dq.getNumber("WEBGL_VERSION"))),dq.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==sq){const t=OG(e);sq=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,sq)}(dq.getNumber("WEBGL_VERSION"))),dq.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=dq.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=OG(e);return t=iq(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:iq(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),dq.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>dq.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!hN()),dq.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=OG(e);if(1===e){if(!iq(t,"OES_texture_float"))return!1}else if(!iq(t,"EXT_color_buffer_float"))return!1;return cq(t)}(dq.getNumber("WEBGL_VERSION"))),dq.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!dq.getBool("WEBGL_FORCE_F16_TEXTURES")&&dq.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),dq.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>lq(dq.getNumber("WEBGL_VERSION"))),dq.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=dq.getNumber("WEBGL_VERSION"))&&null!=OG(e).fenceSync;var e}),dq.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>dq.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),dq.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}),dq.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>hN()?1:-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))}),dq.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),dq.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),dq.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),dq.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),dq.registerFlag("WEBGL_EXP_CONV",()=>!1),dq.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>dq.getBool("IS_TEST")),dq.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),dq.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),dq.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),dq.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const xq="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:vq}=r;function yq(e,t,n){const a=[];if(e.forEach(e=>{const t=sv(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=Iq(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:a.push("uniform int ".concat(e.name,"Shape;"));break;case 2:a.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:a.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:a.push("uniform ivec4 ".concat(e.name,"Shape;"))}a.push("uniform ivec2 ".concat(e.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;")}a.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{a.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))});const r=a.join("\n"),s=e.map(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r="";r+=n?wq(e,a):bq(e,a);const s=e.shapeInfo.logicalShape,i=t.logicalShape;s.length<=i.length&&(r+=n?function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,o=vq(e.shapeInfo.logicalShape,t.logicalShape),l=Tq(i),c=i-s;let u;const d=["x","y","z","w","u","v"];u=0===s?"":i<2&&o.length>=1?"coords = 0;":o.map(e=>"coords.".concat(d[e+c]," = 0;")).join("\n");let h="";h=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(d[t+c])).join(", ");let p="return outputValue;";const f=1===sv(e.shapeInfo.logicalShape),m=sv(t.logicalShape),g=1===m;if(1!==s||f||g){if(f&&!g)p=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){const e=s-2,t=s-1;o.indexOf(e)>-1&&o.indexOf(t)>-1?p="return vec4(outputValue.x);":o.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(r,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",s=t.texShape,i=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&iv(i,s))return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=Tq(l),u=vq(e.shapeInfo.logicalShape,t.logicalShape),d=l-o;let h;const p=["x","y","z","w","u","v"];h=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map(e=>"coords.".concat(p[e+d]," = 0;")).join("\n");let f="";f=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(p[t+d])).join(", ");return"\n    float ".concat(r,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(a,"(").concat(f,");\n    }\n  ")}(e,t));return r}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),i=t.texShape,o=hq(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(o);let c,u,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(kq,"\n    ").concat(Nq,"\n    ").concat(jq,"\n  ");return t}(o);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===a[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    ");if(1===a[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(iv(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(a[0],", ").concat(a[1],"));\n      }\n    ");const r=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),s=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      int b = index / ").concat(s,";\n      index -= b * ").concat(s,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),s=r*Math.ceil(e[e.length-2]/2);let i=s,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)i*=e[e.length-c-1],o="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+o,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(s,";\n      index -= b * ").concat(s,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(o)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(iv(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=fq(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const a=pq(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=fq(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const a=pq(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=pq(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=pq(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(o)),n.packedInputs&&(d+=Sq);return[d,l,u,r,c,s,n.userCode].join("\n")}function bq(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");const[r,s]=e.shapeInfo.texShape;if(1===r&&1===s)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=Cq(n);if(t)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[o,l]=e.shapeInfo.texShape;return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(l,", ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int index) {\n        ").concat(Eq(e),"\n      }\n    ");const r=e.shapeInfo.texShape,s=r[0],i=r[1];if(1===i&&1===s)return"\n      float ".concat(a,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const o=Cq(n);if(1===i)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(s,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===s)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(i,", index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),s=e.shapeInfo.texShape;if(null!=s&&iv(n,s)){if(t)return"\n      float ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const e=s[0],n=s[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}const{newShape:i,keptDims:o}=pv(n),l=i;if(l.length<n.length){const n=Aq(e,l),a=["row","col"];return"\n      ".concat(bq(n,t),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(_q(a,o),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Eq(e),"\n      }\n    ");const c=s[0],u=s[1],d=Cq(a);if(1===u)return t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(a,"TexShape[0]));\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(1===c)return t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(a,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(t)return"\n      float ".concat(r,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");return"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),s=n[1]*n[2],i=n[2],{newShape:o,keptDims:l}=pv(n),c=o;if(c.length<n.length){const n=Aq(e,c),a=["row","col","depth"];return"\n        ".concat(bq(n,t),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(_q(a,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(s,", ").concat(i,", 1)));\n        ").concat(Eq(e),"\n      }\n    ");const u=e.shapeInfo.texShape,d=u[0],h=u[1],p=e.shapeInfo.flatOffset;if(h===s&&null==p)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        int stride1 = ").concat(a,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(d,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      ");if(h===i&&null==p)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(a,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(d,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");const f=Cq(a);if(t)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(a,"Shape[1] * ").concat(a,"Shape[2];\n      int stride1 = ").concat(a,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n      return sampleTexture(").concat(a,", uv);\n    }\n    ");return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(s," + col * ").concat(i," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),s=n[3],i=n[2]*s,o=n[1]*i,{newShape:l,keptDims:c}=pv(n);if(l.length<n.length){const n=Aq(e,l),a=["row","col","depth","depth2"];return"\n      ".concat(bq(n,t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(_q(a,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(o,", ").concat(i,", ").concat(s,", 1)));\n        ").concat(Eq(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1],f="int stride2 = ".concat(a,"Shape[3];"),m="int stride1 = ".concat(a,"Shape[2] * stride2;"),g="int stride0 = ".concat(a,"Shape[1] * stride1;");if(p===o&&null==u)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(s,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(p===s&&null==u)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(a,"Shape[1] * ").concat(a,"Shape[2], ").concat(a,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const x=Cq(a);if(t)return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index + ").concat(x,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(i," +\n          depth * ").concat(s," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index + ").concat(x,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t[4],s=t[3]*r,i=t[2]*s,o=t[1]*i,{newShape:l,keptDims:c}=pv(t);if(l.length<t.length){const t=Aq(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(bq(t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(a,"(").concat(_q(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(o,", ").concat(i,", ").concat(s,", ").concat(r,")) +\n          depth3;\n        ").concat(Eq(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===o&&null==u)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(s,", ").concat(r,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===r&&null==u)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=Cq(n);return"\n    float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(i," + depth * ").concat(s," +\n          depth2 * ").concat(r," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:r,keptDims:s}=pv(t);if(r.length<t.length){const t=Aq(e,r),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(bq(t),"\n      float ").concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(a,"(").concat(_q(n,s),");\n      }\n    ")}const i=t[5],o=t[4]*i,l=t[3]*o,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(o,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(Eq(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===u&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(o,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===i&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=Cq(n);return"\n    float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(o," + depth3 * ").concat(i," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function wq(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),a=hq();return"\n    vec4 ".concat(n,"() {\n      return ").concat(a.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e.shapeInfo.texShape,s=hq();if(t)return"\n    vec4 ".concat(a,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return"\n    vec4 ".concat(a,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),s=e.shapeInfo.texShape,i=s[0],o=s[1],l=hq();if(null!=s&&iv(n,s))return t?"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(a,", uv);\n      }\n    "):"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(i,".0);\n\n        return ").concat(l.texture2D,"(").concat(a,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(r,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ");const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),s=e.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const a=[1,2],s=Aq(e,n.slice(1)),i=["b","row","col"];return"\n        ".concat(wq(s,t),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(_q(i,a),");\n        }\n      ")}const o=hq();if(t)return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(o.texture2D,"(").concat(a,", uv);\n    }\n  ");const l=i[0],c=i[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(d,", ").concat(u,", b, row, col);\n      return ").concat(o.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=hq();if(t)return"\n    vec4 ".concat(a,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ");const s=e.shapeInfo.logicalShape,i=s.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[i-1]/2);let h=d*Math.ceil(s[i-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)");for(let m=2;m<i-1;m++)p="int b".concat(m,", ")+p,h*=s[i-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(a,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const kq="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Nq="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jq="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Sq="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Cq(e){return"offset".concat(e)}function Eq(e){const t=e.name,n=sv(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Tq(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Iq(e,t,n){const{newShape:a,keptDims:r}=pv(t),s=t.length,i=e&&3===s&&1===t[0],o=i?t.slice(1):a,l=!e&&s>1&&!iv(t,n)&&a.length<s||i;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:r}}function Aq(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function _q(e,t){return t.map(t=>e[t]).join(", ")}function Oq(e,t,n,a){const r=n.map((e,n)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}}),s=r.map(e=>e.shapeInfo),i={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},o=yq(r,i,t),l=function(e,t){const n=QG(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(BG(e,()=>e.shaderSource(n,t)),BG(e,()=>e.compileShader(n)),Dv().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw HG(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,o),c=e.createProgram(l);return Dv().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:i},Rq(e,t,c)))}function Rq(e,t,n){const a=[],r=[];let s,i,o,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===Dv().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of t.variableNames){const r={name:d,uniform:e.getUniformLocation(n,d,u),offset:e.getUniformLocation(n,"offset".concat(d),u)};t.enableShapeUniforms&&(r.shape=e.getUniformLocation(n,"".concat(d,"Shape"),u),r.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),u)),a.push(r)}if(t.enableShapeUniforms&&(s=e.getUniformLocation(n,"outShape",u),o=e.getUniformLocation(n,"outShapeStrides",u),i=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const d of t.customUniforms)r.push(e.getUniformLocation(n,d.name,u));return{variablesLocations:a,customUniformLocations:r,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:i}}function Pq(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((e,n)=>{const a=e.logicalShape,r=t[n],s=r.shape;if(!iv(a,s))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(s," must match"));if(e.isUniform&&r.isUniform)return;const i=e.texShape,o=r.isUniform?null:r.texData.texShape;if(!iv(i,o))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(o," must match"))})}function Mq(e){return Dv().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class Dq{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=RG.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=hq();this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?fq(["r","c","d"],e):pq(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class Fq{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=RG.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=hq();this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?fq(["r","c","d"],e):pq(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class Lq{constructor(e){this.variableNames=["A"],this.outTexUsage=PG.DOWNLOAD;const t=hq();this.outputShape=e,this.userCode="\n      ".concat(xq,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class zq{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=PG.DOWNLOAD;const t=hq();this.outputShape=e,this.userCode="\n      ".concat(xq,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const Bq={R:0,G:1,B:2,A:3};class Uq{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=hq();this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)");let s="";for(let i=0;i<n.length;i++){const e=n[i];s+="\n          if(offset == ".concat(i,") {\n            result = values[").concat(Bq[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":gq(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(s,"\n        }\n        ").concat(a.output," = vec4(").concat(r,", 0., 0., 0.);\n      }\n    ")}}class Wq{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=hq();this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length);let a="",r="result";t&&(r="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let t=0;t<=1;t++){const r=2*s+t;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(s," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(s,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(r,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(r,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(r,"] = values[2];\n            } else {\n              result[").concat(r,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":gq(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(n.output," = ").concat(r,";\n        }\n    ")}}function Vq(e){const t=hq();return function(e,t){const n=QG(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(BG(e,()=>e.shaderSource(n,t)),BG(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Hq(e){return function(e,t){const n=QG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return BG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),BG(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Gq(e){return function(e,t){const n=QG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return BG(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),BG(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}function qq(e,t,n,a,r,s){!function(e,t){const n=Dv().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const a="[".concat(e,"x").concat(t,"]"),r="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+r+".")}}(t,n);const i=function(e){return QG(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),o=e.TEXTURE_2D;return BG(e,()=>e.bindTexture(o,i)),BG(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),BG(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),BG(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),BG(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===Dv().getNumber("WEBGL_VERSION")?BG(e,()=>e.texImage2D(o,0,a,t,n,0,r,s,null)):BG(e,()=>e.texStorage2D(o,1,a,t,n)),BG(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:i,texShape:[n,t]}}function Kq(e){return e.internalFormatFloat}function Xq(e){return e.internalFormatHalfFloat}function Yq(e){return e.downloadTextureFormat}function $q(e){return e.internalFormatPackedFloat}function Qq(e){return e.internalFormatPackedHalfFloat}function Jq(e,t,n,a,r,s,i,o){const l=e,c=new Float32Array(function(e,t){const[n,a]=LG(e,t);return n*a*4}(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}class Zq{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Dv().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){AG[e]=t}(t,e)):this.gl=OG(t),e=this.gl,2===Dv().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>BG(t,()=>t.createVertexArray()),this.bindVertexArray=e=>BG(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>BG(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>BG(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>BG(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>BG(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>BG(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>BG(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Dv().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=WG(this.gl,e),iq(this.gl,t))this.textureHalfFloatExtension=WG(this.gl,t);else if(Dv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),iq(this.gl,a))this.colorBufferHalfFloatExtension=WG(this.gl,a);else if(Dv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",iq(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!iq(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=Hq(this.gl),this.indexBuffer=Gq(this.gl),this.framebuffer=function(e){return QG(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=zG(this.gl,this.textureHalfFloatExtension)}get debug(){return Dv().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;BG(e,()=>e.finish()),BG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),BG(e,()=>e.deleteFramebuffer(this.framebuffer)),BG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),BG(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),BG(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,s]=DG(t,n);return qq(e,r,s,Kq(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,s]=DG(t,n);return qq(e,r,s,Xq(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,s]=DG(t,n);return qq(e,r,s,Yq(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){BG(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===Dv().getNumber("WEBGL_VERSION")?BG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):BG(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===Dv().getNumber("WEBGL_VERSION")?BG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):BG(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),BG(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,a){this.throwIfDisposed(),function(e,t,n,a,r,s){let i,o,l;BG(e,()=>e.bindTexture(e.TEXTURE_2D,t)),r instanceof Uint8Array?(i=new Uint8Array(n*a*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*a*4),o=e.FLOAT,l=s.internalFormatPackedFloat),i.set(r),2===Dv().getNumber("WEBGL_VERSION")?BG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,a,e.RGBA,o,i)):BG(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,o,i)),BG(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,s]=LG(t,n);return qq(e,r,s,Qq(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,s]=LG(t,n);return qq(e,r,s,$q(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(YG(this.gl,this.framebuffer),this.outputTexture=null),BG(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,a){const[r,s]=DG(t,n),i=new Uint8Array(t*n*4);return BG(e,()=>e.readPixels(0,0,r,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,a,r,s){return Jq(this.gl,e,0,0,0,r,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const a=e,r=new Float32Array(n);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const a=function(e,t,n){const a=e.createBuffer();BG(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));const r=16*t*n;return BG(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,r,e.STREAM_READ)),BG(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),BG(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Dv().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,r=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=a.clientWaitSync(r,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=r}else Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const a=new Float32Array(t*n*4);return BG(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a)),a}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=Vq(t));const n=function(e){return QG(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);BG(t,()=>t.attachShader(n,this.vertexShader)),BG(t,()=>t.attachShader(n,e)),function(e,t){if(BG(e,()=>e.linkProgram(t)),!Dv().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const a=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&GG(t,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;BG(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function(e,t,n){BG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),qG(e,t,"clipSpacePos",n,3,20,0)&&qG(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(BG(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&GG(this.gl,this.program),BG(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return QG(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),BG(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),KG(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[a,r]=LG(t,n);this.setOutputMatrixTextureDriver(e,a,r)}setOutputMatrixWriteRegion(e,t,n,a){this.setOutputMatrixWriteRegionDriver(n,e,a,t)}setOutputPackedMatrixWriteRegion(e,t,n,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&GG(this.gl,this.program),$G(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}BG(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),BG(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=WG(this.gl,2===Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await uv(()=>this.disposed||this.isQueryAvailable(e,Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),a=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),a&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Dv().platform&&(n=Dv().platform.setTimeoutCustom.bind(Dv().platform)),uv(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),XG(this.gl,e,this.framebuffer),this.debug&&$G(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(XG(this.gl,this.outputTexture,this.framebuffer),this.debug&&$G(this.gl)):YG(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const a=this.gl;XG(a,e,this.framebuffer),this.debug&&$G(a),this.outputTexture=e,BG(a,()=>a.viewport(0,0,t,n)),BG(a,()=>a.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,a){this.throwIfDisposed(),BG(this.gl,()=>this.gl.scissor(e,t,n,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:eK,XI:tK,Nk:nK,f6:aK,ct:rK,YG:sK,hH:iK,z3:oK,sG:lK,uM:cK,vS:uK,qB:dK,GG:hK,rq:pK,lg:fK,WR:mK,cu:gK,GE:xK,px:vK,jC:yK,He:bK,hE:wK,BF:kK,Dk:NK,cl:jK,_B:SK,ub:CK,_f:EK,Ku:TK,qy:IK,Zy:AK,bu:_K,zv:OK,dH:RK,HS:PK,yH:MK,l3:DK,z9:FK,x6:LK,_m:zK,eW:BK,GK:UK,SP:WK,yr:VK,dl:HK,Dw:GK,xT:qK,_X:KK,wz:XK}=s;function YK(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>"".concat(e,".").concat(t))}function $K(e,t){return 1===t?[e]:YK(e,t)}class QK{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Mq(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=$K("rc",this.rank),t=Tq(this.rank),n=this.getOutOfBoundsCondition(e),a=this.getSetup(e),r=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(a,"\n\n            setOutput(vec4(").concat(r,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let a=0;a<=1;a++){let r="".concat(0===n?"r":"rp1",", ").concat(0===a?"c":"cp1");for(let t=2;t<this.rank;t++)r="".concat(e[e.length-1-t],",")+r;t.push(r)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(a,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class JK{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length);let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2===1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?mq(["r","c","d"],"inputShape"):pq(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":gq(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class ZK{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const a=tX(t,n),r=nX(e,a,n);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const s=eX(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const e=this.freeTextures[r].pop();return this.usedTextures[r].push(e),e}let i;return a===MG.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===MG.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===MG.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===MG.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===MG.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(i),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),i}releaseTexture(e,t,n,a){if(null==this.freeTextures)return;const r=tX(n,a),s=nX(t,r,a);s in this.freeTextures||(this.freeTextures[s]=[]);const i=eX(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,a),o=Dv().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[s],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function eX(e,t,n,a,r){const s=function(e,t){switch(e){case MG.PACKED_2X2_FLOAT32:return $q(t);case MG.PACKED_2X2_FLOAT16:return Qq(t);case MG.UNPACKED_FLOAT32:return Kq(t);case MG.UNPACKED_FLOAT16:return Xq(t);case MG.PACKED_4X1_UNSIGNED_BYTE:return Yq(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,a);let i;if(r){const[t,n]=LG(e[0],e[1]);i=t*n}else{const[t,n]=DG(e[0],e[1]);i=t*n}const o=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,s);return i*o}function tX(e,t){if(e===PG.UPLOAD)return MG.PACKED_2X2_FLOAT32;if(e===PG.RENDER||null==e)return function(e){return Dv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?MG.PACKED_2X2_FLOAT32:MG.UNPACKED_FLOAT32:e?MG.PACKED_2X2_FLOAT16:MG.UNPACKED_FLOAT16}(t);if(e===PG.DOWNLOAD||e===PG.PIXELS)return MG.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function nX(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class aX{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const rX="if (isnan(x)) return x;",sX="return abs(x);";const iX=rX+"\n  return (x < 0.0) ? 0.0 : x;\n",oX=rX+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",lX="return x;";class cX{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class uX{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length);const t=e.length,n=$K("rc",t),a=Tq(t),r=function(e,t){if(1===e)return"rc";let n="";for(let a=0;a<e;a++)n+=t[a],a<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),i=t<=1?"rc":"vec2(".concat(s.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(r,");\n\n        setOutput(getChannel(packedInput, ").concat(i,"));\n      }\n    ")}}const dX=BI,hX={};const pX=Dv().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class fX extends $x{nextDataId(){return fX.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Dv().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof Zq)t=e;else{const n=OG(Dv().getNumber("WEBGL_VERSION"),e);t=new Zq(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=OG(Dv().getNumber("WEBGL_VERSION"));t=new Zq(e),this.binaryCache=((n=Dv().getNumber("WEBGL_VERSION"))in hX||(hX[n]={}),hX[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new ZK(this.gpgpu),this.numMBBeforeWarning=null==Dv().global.screen?1024:Dv().global.screen.height*Dv().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Yx(this,SN())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,a,r,s){const i=this.makeTensorInfo(t,n),o=this.texData.get(i.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[a,r]},o.texShape=[a,r];const l=tq(t),c=new Uq(l,!1,s),u=this.runWebGLProgram(c,[i],n,[[a,r]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(i),u.dataId}write(e,t,n){if((Dv().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Dv().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:n,values:e,usage:PG.UPLOAD,refCount:1}),a}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,a,r){if(Dv().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:a,values:t,usage:PG.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:a,complexTensorInfos:r,slice:s,shape:i,isPacked:o}=t;if(null!=s){let t;t=o?new cX(i,lX):new aX(i,lX);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=Sk()),"complex64"===a){u=rI(this.readSync(r.real.dataId),this.readSync(r.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Sk()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:a,slice:r,dtype:s,complexTensorInfos:i,isPacked:o}=t;if(null!=r){let t;t=o?new cX(a,lX):new aX(a,lX);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:s}],s),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if(Dv().getBool("DEBUG")&&!Dv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Dv().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==s&&Dv().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...FG(a))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);c=rI(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=sv(a);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;BG(e,()=>e.deleteBuffer(u))}const d=this.convertAndCacheOnCPU(e,c),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(e=>e(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&SN().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:a,shape:r,slice:s,dtype:i,isPacked:o,texture:l}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=s){let n;n=o?new cX(r,lX):new aX(r,lX);const a=this.runWebGLProgram(n,[{dataId:e,shape:r,dtype:i}],i),s=this.readToGPU(a,t);return this.disposeIntermediateTensorInfo(a),s}if(null==l)throw null!=a?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=SN().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:u},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>Ek(e));return fj(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return fj(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!UG(n)){if(Dv().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:a}=this.texData.get(e),r=sv(t);if(Dv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),a=this.texData.get(n.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(a.texture.texture,...FG(t)).subarray(0,r);return this.disposeIntermediateTensorInfo(n),s}const s=Dv().getBool("WEBGL_PACK")&&!0===a,i=s?tq(t):t,o=s?new zq(i):new Lq(i),l=this.runWebGLProgram(o,[{shape:i,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=n,a=!0):this.activeTimers.push(n),this.activeTimers=n,e();const r=Ik(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),s=Ik(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,a&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(r);i.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),i.getExtraProfileInfo=()=>e.map((e,t)=>({name:s[t],ms:e})).map(e=>"".concat(e.name,": ").concat(e.ms)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Sk(),endMs:null}}endTimer(e){return Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Sk(),e)}async getQueryTime(e){if(Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:a,usage:r,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(a,n),this.textureManager.releaseTexture(t,a,r,s)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pX;return Dv().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&sv(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Jw("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return dX(e.shape,t)}packedUnaryOp(e,t,n){const a=new cX(e.shape,t),r=this.compileAndRun(a,[e],n);return SN().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=RK(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,sX,e.dtype);const t=new aX(e.shape,sX),n=this.compileAndRun(t,[e]);return SN().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&vv(n[0])){const r=n.map(e=>Ck(e));a=this.write(r,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}makeOutput(e,t,n){return SN().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new uX(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new QK(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[ZG(e.shape),...eq(e.shape)],a={dtype:e.dtype,shape:n,dataId:e.dataId},r=[ZG(t),...eq(t)],s=new JK(r,n),i=[n],o=this.runWebGLProgram(s,[a],e.dtype,i,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:a,shape:r,dtype:s}=n;if(null!=t){nv(sv(r)<=t[0]*t[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const i=tq(r);let o;o=a?new Fq(i):new Dq(i);const l=[null!=t?t:FG(i)];return{dtype:s,shape:r,dataId:this.runWebGLProgram(o,[{shape:i,dtype:s,dataId:e}],s,l,!0,t).dataId}}runWebGLProgram(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(i.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===RG.DENSE){const t=null!=s?s:FG(e.outputShape);o.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===sv(i.shape))return o.values=fv(i.dtype,0),i;const l=[],c=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&sv(t.shape)<=Dv().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!aq(n.shape,t.shape)){const e=t,a=t.shape;t.shape=n.shape,t=this.packedReshape(t,a),l.push(t),n=this.texData.get(t.dataId),e.shape=a}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);const u={shape:i.shape,texData:o,isUniform:!1},d=function(e,t,n){let a="";t.concat(n).forEach(t=>{const r=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const s=t.texData.texShape,{useSqueezeShape:i,uniformShape:o,keptDims:l}=Iq(e.packedInputs,t.shape,s);let c="",u="",d="";if(1===o.length&&e.packedInputs){const e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==o.length||e.packedInputs){if(o.length>2&&!e.packedInputs){const e=Nv(o);d="".concat(e[0]===s[1],"_").concat(e[e.length-1]===s[1])}}else u="".concat(o[0]>1,"_").concat(o[1]>1);const h=t.shape.length,p=2===o.length&&iv(t.shape,s),f=1===sv(t.shape),m=zj(t.shape,n.shape),g=!e.packedInputs&&h===n.shape.length&&iv(s,n.texData.texShape),x=e.packedInputs||o.length>2?"":"".concat(s[0]>1,"_").concat(s[1]>1);a+="".concat(h,"_").concat(g,"_").concat(i?l:"","_").concat(o.length,"_").concat(f,"_").concat(m,"_").concat(p,"_").concat(c,"_").concat(u,"_").concat(d,"_").concat(x,"_").concat(r)}else{const e=t.isUniform?"uniform":t.texData.texShape;a+="".concat(t.shape,"_").concat(e,"_").concat(r)}});const r=e.userCode;let s=e.constructor.name;return s+="_"+a+"_"+r+"".concat(Dv().getNumber("WEBGL_VERSION")),s}(e,c,u),h=this.getAndSaveBinary(d,()=>Oq(this.gpgpu,e,c,u)),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),Dv().get("ENGINE_COMPILE_ONLY")||function(e,t,n,a,r){t.program.enableShapeUniforms||(Pq(t.inShapeInfos,n),Pq([t.outShapeInfo],[a]));const s=a.texData.texture,i=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):e.setOutputMatrixTexture(s.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Dv().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const a=n[l],{uniform:r,offset:s,shape:i,texShape:o}=t.variablesLocations[l];if(i){const{uniformShape:n}=Iq(t.program.packedInputs,a.shape,a.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(o&&e.gl.uniform2i(o,a.texData.texShape[0],a.texData.texShape[1]),null!=r)if(a.isUniform)if(sv(a.shape)<2)e.gl.uniform1f(r,a.uniformValues[0]);else{let t=a.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(r,t)}else null!=a.texData.slice&&null!=s&&e.gl.uniform1i(s,a.texData.slice.flatOffset),e.setInputMatrixTexture(a.texData.texture.texture,r,l)}const o=t.outShapeLocation;if(o)switch(a.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(a.shape))}if(t.outShapeStridesLocation){const n=Nv(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&r)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],a=t.customUniformLocations[l],s=r[l];if("float"===n.type)e.gl.uniform1fv(a,s);else if("vec2"===n.type)e.gl.uniform2fv(a,s);else if("vec3"===n.type)e.gl.uniform3fv(a,s);else if("vec4"===n.type)e.gl.uniform4fv(a,s);else if("int"===n.type)e.gl.uniform1iv(a,s);else if("ivec2"===n.type)e.gl.uniform2iv(a,s);else if("ivec3"===n.type)e.gl.uniform3iv(a,s);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(a,s)}}e.executeProgram()}(this.gpgpu,h,c,u,a),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=Dv().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=Sk();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Dv().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===r){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,a,r)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Dv().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=EN(()=>{if(!Dv().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Dv().getBool("DEBUG");Dv().set("DEBUG",!1);const t=this.abs(Sj(1e-8)).dataSync()[0];if(Dv().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:a,values:r,texture:s,usage:i,isPacked:o}=t;if(null!=s)return;const l=null!=this.activeTimers;let c;l&&(c=Sk());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Dv().getNumber("WEBGL_MAX_TEXTURE_SIZE"),a=Dv().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(a===1/0&&Dv().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(a=n/2),t&&(n*=2,a*=2,e=e.map((t,n)=>n>=e.length-2?ev(e[n]):e[n]),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=pv(e);e=t.newShape}let r=sv(e),s=null;e.length<=1&&r<=n?s=[1,r]:2===e.length&&e[0]<=n&&e[1]<=n?s=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);const i=null!=s&&Math.max(...s)>a&&Math.min(...s)<=(t?2:1)&&Math.min(...s)>0;if(null==s||i)if(t){const t=ZG(e);let n=2,a=2;e.length&&([n,a]=eq(e)),r=t*(n/2)*(a/2),s=lv(r).map(e=>2*e)}else s=lv(r);return s}(n,o),t.texShape=u),null!=r){const e=tq(n);let s,i=u[1],d=u[0];const h=r instanceof Uint8Array||r instanceof Uint8ClampedArray;!o&&h||([i,d]=LG(u[0],u[1])),s=o?new Wq(e,h):new Uq(e,h);const p=h?[d,i]:u,f=this.makeTensorInfo(p,a),m=this.texData.get(f.dataId);m.usage=h?PG.PIXELS:PG.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,d,r);const g=[[d,i]],x=!0,v=this.runWebGLProgram(s,[f],a,g,x),y=this.texData.get(v.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,Dv().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=Sk()-c)}else{const e=this.acquireTexture(u,i,a,o);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:a}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,a)),n.values}acquireTexture(e,t,n,a){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,a)}computeBytes(e,t){return e[0]*e[1]*xv(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await AT(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw HG(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:a,nanLoc:r,outShapeLocation:s,outShapeStridesLocation:i,outTexShapeLocation:o}=Rq(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=a,e.nanLoc=r,e.outShapeLocation=s,e.outShapeStridesLocation=i,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:a,height:r,width:s,channels:i}=e,o=SN().backend;if(!o.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=o.writeTexture(a,t,n,r,s,i);return SN().makeTensorFromDataId(l,t,n,o)}}fX.nextDataId=0;pN()&&AN("webgl",()=>new fX,2);const mX="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class gX{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Uj(t,n),this.enableShapeUniforms=Mq(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const xX="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class vX{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Uj(t,n);const r=this.outputShape.length;this.enableShapeUniforms=Mq(r);let s="";if(a)if(0===r||1===sv(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=Tq(r);if(s="\n          ".concat(e," coords = getOutputCoords();\n        "),1===r)this.enableShapeUniforms?s+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":s+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=$K("coords",r);this.enableShapeUniforms?s+="\n            bool nextRowOutOfBounds =\n              (".concat(e[r-2]," + 1) >= outShape[").concat(r," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[r-1]," + 1) >= outShape[").concat(r," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):s+="\n            bool nextRowOutOfBounds =\n              (".concat(e[r-2]," + 1) >= ").concat(this.outputShape[r-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[r-1]," + 1) >= ").concat(this.outputShape[r-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(s,"\n\n        setOutput(result);\n      }\n    ")}}function yX(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const bX={kernelName:nb,backendName:"webgl",kernelFunc:yX};function wX(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,s=n.makeTensorInfo(a.shape,"complex64"),i=n.texData.get(s.dataId),o=yX({inputs:{x:a},backend:n}),l=yX({inputs:{x:r},backend:n});return i.complexTensorInfos={real:o,imag:l},s}const kX={kernelName:py,backendName:"webgl",kernelFunc:wX},NX="return (a < 0.) ? b * a : a;",jX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const SX={kernelName:lb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:s}=a,i=n.makeTensorInfo([],"float32",Nk(s,"float32")),o=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vX(jX,r.shape,i.shape):new gX(NX,r.shape,i.shape),l=n.runWebGLProgram(o,[r,i],"float32");return n.disposeIntermediateTensorInfo(i),l}},CX="return (a < 0.) ? b * a : a;",EX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const TX={kernelName:Vb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,s=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vX(EX,a.shape,r.shape):new gX(CX,a.shape,r.shape);return n.runWebGLProgram(s,[a,r],"float32")}},IX="if (isnan(x)) return x;";function AX(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:a,dtype:r}=e;return e=>{let{inputs:s,backend:i}=e;const{x:o}=s,l=i,c=r||o.dtype;if(l.shouldExecuteOnCPU([o])&&null!=a){const e=l.texData.get(o.dataId),t=a(e.values,c);return l.makeTensorInfo(o.shape,c,t)}let u;return u=Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new cX(o.shape,n):new aX(o.shape,t),l.runWebGLProgram(u,[o],c)}}function _X(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:a=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}=e;return e=>{let{inputs:o,backend:l}=e;const{a:c,b:u}=o,d=l;if(r&&"complex64"===c.dtype){const e=d.texData.get(c.dataId),n=d.texData.get(u.dataId),[a,r]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,a]=e,r={dataId:n.dataId,dtype:n.dtype,shape:c.shape},s={dataId:a.dataId,dtype:a.dtype,shape:u.shape},i=new gX(t,c.shape,u.shape);return d.runWebGLProgram(i,[r,s],Qk(n.dtype,a.dtype))}),s=wX({inputs:{real:a,imag:r},backend:d});return d.disposeIntermediateTensorInfo(a),d.disposeIntermediateTensorInfo(r),s}const h=i||Qk(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||d.shouldExecuteOnCPU([c,u]))&&null!=s){const e=d.texData.get(c.dataId).values,t=d.texData.get(u.dataId).values,n="string"===c.dtype?LI(e):e,a="string"===c.dtype?LI(t):t,[r,i]=s(c.shape,u.shape,n,a,h),o=d.makeTensorInfo(i,h);return d.texData.get(o.dataId).values=r,o}let p;return p=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new vX(n,c.shape,u.shape,a):new gX(t,c.shape,u.shape),d.runWebGLProgram(p,[c,u],h)}}function OX(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":iX;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":oX;if("prelu"===e)return t?EX:CX;if("leakyrelu"===e)return t?jX:NX;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class RX{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=Mq(this.outputShape.length);const c=a?e[1]:e[2],u=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";i&&(m=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(i,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(i,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(i,"\n        }"),g="result = activation(result);");const x=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",y="rc.x";e[0]<t[0]?v="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(y="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(y,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(x,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const PX="return areal * breal - aimag * bimag;",MX="return areal * bimag + aimag * breal;";class DX{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Uj(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const FX="return a * b;";function LX(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,s=Qk(a.dtype,r.dtype);if("complex64"===a.dtype){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),s=new DX(PX,a.shape,r.shape),i=new DX(MX,a.shape,r.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape}],l=n.runWebGLProgram(s,o,"float32"),c=n.runWebGLProgram(i,o,"float32"),u=wX({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([a,r])){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),[i,o]=kK(a.shape,r.shape,e.values,t.values,s),l=n.makeTensorInfo(o,s);return n.texData.get(l.dataId).values=i,l}let i;return i=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vX(FX,a.shape,r.shape):new gX(FX,a.shape,r.shape),n.runWebGLProgram(i,[a,r],s)}const zX={kernelName:Ob,backendName:"webgl",kernelFunc:LX};function BX(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:s}=a,i=n,o=sv(r.shape),l=dv(s,o),c=sv(l);nv(o===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(r.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements.");const u=i.texData.get(r.dataId);return!u.isPacked||aq(r.shape,l)||null!==u.texture&&aq(u.shape,l)?(i.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype}):function(e,t,n){const a=[ZG(e.shape),...eq(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},s=[ZG(t),...eq(t)],i=new JK(s,a),o=[a],l=n.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(r,l,i)}const UX={kernelName:Jb,backendName:"webgl",kernelFunc:BX};class WX{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:s}=e;this.outputShape=[a,s];const i=4*Math.floor(n/4),o=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(ov(e)?e.toPrecision(2):e,", ones);")}let c="";r%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===o,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===o,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===o,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class VX{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:s}=e;this.outputShape=[a,s];let i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let d="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(o,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(o,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";r%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(i,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(i,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}}function HX(e,t,n,a){const r=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],a=zT(n);t.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return t}(e.shape);let s=e;for(let i=0;i<r.length;i++){const{inSize:o,windowSize:l,outSize:c}=r[i];let u,d;u="mean"===n?0===i?new WX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},o):new WX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c}):new VX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},n),d=s,s=a.runWebGLProgram(u,[s],t),d.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(d)}return s}class GX{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[t[s]];this.outputShape=n,this.rank=n.length;const a=Tq(this.rank),r=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t);for(let r=0;r<e.length;r++)a[e[r]]=n[r];return a.join()}(t);this.userCode="\n    void main() {\n      ".concat(a," resRC = getOutputCoords();\n      setOutput(getA(").concat(r,"));\n    }\n    ")}}class qX{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const a=Tq(this.rank),r=YK("rc",this.rank),s=new Array(this.rank);for(let c=0;c<t.length;c++)s[t[c]]=r[c];const i="vec2(".concat(s.slice(-2).join(),")"),o="++".concat(r[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(s.join(),"), ").concat(i,")");this.userCode="\n    void main() {\n      ".concat(a," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(o,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(r[this.rank-1],";\n      if(++").concat(r[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(o,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function KX(e,t,n){const a=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qX(e.shape,t):new GX(e.shape,t);return n.runWebGLProgram(a,[e],e.dtype)}function XX(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a;return function(e,t,n,a){const r=t,s=e.shape.length,i=hv(r,e.shape);let o=i;const l=AC(o,s),c=null!=l;let u=e;c&&(u=KX(e,l,a),o=OC(o.length,s)),IC("sum",o,s);const[d,h]=EC(u.shape,o);let p=d;n&&(p=TC(d,i));const f=sv(h),m=BX({inputs:{x:u},attrs:{shape:[sv(e.shape)/f,f]},backend:a}),g=HX(m,Jk(e.dtype),"sum",a),x=BX({inputs:{x:g},attrs:{shape:p},backend:a});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(g),c&&a.disposeIntermediateTensorInfo(u),x}(r,s,i,n)}const YX={kernelName:yw,backendName:"webgl",kernelFunc:XX};function $X(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{perm:s}=a,i=n,o=r.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=r.shape[s[u]];let c;if(i.shouldExecuteOnCPU([r])){const e=i.texData.get(r.dataId).values,t=KK(e,r.shape,r.dtype,s,l);c=i.makeTensorInfo(l,r.dtype);i.texData.get(c.dataId).values=t}else c=KX(r,s,i);return c}const QX={kernelName:Uw,backendName:"webgl",kernelFunc:$X};function JX(e){let{a:t,b:n,transposeA:a,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,d=n.shape.length,h=a?t.shape[u-2]:t.shape[u-1],p=r?n.shape[d-1]:n.shape[d-2],f=a?t.shape[u-1]:t.shape[u-2],m=r?n.shape[d-2]:n.shape[d-1],g=t.shape.slice(0,-2),x=n.shape.slice(0,-2),v=sv(g),y=sv(x),b=Uj(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);nv(h===p,()=>"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match."));const w=a?[v,h,f]:[v,f,h],k=r?[y,m,p]:[y,p,m],N=BX({inputs:{x:t},backend:s,attrs:{shape:w}}),j=BX({inputs:{x:n},backend:s,attrs:{shape:k}}),S=[N,j],C=Math.max(v,y),E=a?N.shape[1]:N.shape[2],T=null!=i,I=null!=o,A="leakyrelu"===c,_=null!=c?OX(c,!0):null;let O;if((1===f||1===m)&&E>1e3&&!1===(T||I||A||null!=_)){let e=N,t=j;a&&(e=$X({inputs:{x:N},backend:s,attrs:{perm:[0,2,1]}}),S.push(e)),r&&(t=$X({inputs:{x:j},backend:s,attrs:{perm:[0,2,1]}}),S.push(t));const n=1===m;let i=e;1!==m&&(i=BX({inputs:{x:e},backend:s,attrs:{shape:[C,E,1]}}),S.push(i));const o=1===m?2:1;let l=t;n&&(l=BX({inputs:{x:t},backend:s,attrs:{shape:[C,1,E]}}),S.push(l));const c=LX({inputs:{a:i,b:l},backend:s});O=XX({inputs:{x:c},backend:s,attrs:{axis:o,keepDims:!0}}),S.push(c)}else{const e=Qk(t.dtype,n.dtype),c=new RX(w,k,[C,f,m],a,r,T,_,I,A),u=[N,j];if(null!=i&&u.push(i),I&&u.push(o),A){const e=s.makeTensorInfo([],"float32",Nk(l,"float32"));u.push(e),S.push(e)}O=s.runWebGLProgram(c,u,e)}const R=BX({inputs:{x:O},backend:s,attrs:{shape:b}});S.push(O);for(const P of S)s.disposeIntermediateTensorInfo(P);return R}const ZX={kernelName:Yw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=a;return JX({a:r,b:s,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}},eY="return abs(x);";const tY={kernelName:Uv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){const e=n.texData.get(a.dataId),t=RK(e.values);return n.makeTensorInfo(a.shape,a.dtype,t)}let r;return r=Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new cX(a.shape,eY):new aX(a.shape,eY),n.runWebGLProgram(r,[a],a.dtype)}},nY=AX({opSnippet:rX+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),aY={kernelName:Wv,backendName:"webgl",kernelFunc:nY},rY=AX({opSnippet:rX+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),sY={kernelName:Vv,backendName:"webgl",kernelFunc:rY},iY="return a + b;",oY=_X({opSnippet:iY,packedOpSnippet:iY,supportsComplex:!0,cpuKernelImpl:eK}),lY={kernelName:Hv,backendName:"webgl",kernelFunc:oY};class cY{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))});const a=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}class uY{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))});const a=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}const dY={kernelName:Gv,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,r=n;if(1===r.length)return yX({inputs:{x:r[0]},backend:a});if(r.length>Dv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(r.length/2),n=e({inputs:r.slice(0,t),backend:a}),s=e({inputs:r.slice(t),backend:a});return e({inputs:[n,s],backend:a})}const s=r.map(e=>e.dtype).reduce((e,t)=>Qk(e,t)),i=r.map(e=>e.shape),o=Dv().getBool("WEBGL_PACK")?new uY(r[0].shape,i):new cY(r[0].shape,i);return a.runWebGLProgram(o,r,s)}};const hY={kernelName:qv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a,o=r.shape.length,l=hv(s,r.shape);let c=l;const u=AC(c,o);let d=r;null!=u&&(d=$X({inputs:{x:r},backend:n,attrs:{perm:u}}),c=OC(c.length,o)),IC("all",c,o);const[h,p]=EC(d.shape,c),f=BX({inputs:{x:d},backend:n,attrs:{shape:[-1,sv(p)]}}),m=HX(f,f.dtype,"all",n);let g;if(i){g=BX({inputs:{x:m},backend:n,attrs:{shape:TC(h,l)}})}else g=BX({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}};const pY={kernelName:Kv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a,o=r.shape.length,l=hv(s,r.shape);let c=l;const u=AC(c,o);let d=r;null!=u&&(d=$X({inputs:{x:r},backend:n,attrs:{perm:u}}),c=OC(c.length,o)),IC("any",c,o);const[h,p]=EC(d.shape,c),f=BX({inputs:{x:d},backend:n,attrs:{shape:[-1,sv(p)]}}),m=HX(f,f.dtype,"any",n);let g;if(i){g=BX({inputs:{x:m},backend:n,attrs:{shape:TC(h,l)}})}else g=BX({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}};class fY{constructor(e,t,n){this.variableNames=["A"];const{windowSize:a,batchSize:r,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[r,s];const i="max"===t?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(o,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(i," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class mY{constructor(e,t,n,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,nv(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));const r=e[e.length-1],s=Math.ceil(r/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),a||this.variableNames.push("bestIndicesA");const i=this.outputShape,o=i.length,l=Tq(o),c=$K("coords",o);let u,d;if(1===s){d=o+1;const e=Tq(d);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[o-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[o-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[o-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[o-2],";")}else d=o,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[o-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[o-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[o-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[o-2],";");const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],f=h.map(e=>"int "+e),m=$K("sourceLocR",d-1).concat("inIdx.r"),g=$K("sourceLocG",d-1).concat("inIdx.g"),x=$K("sourceLocB",d-1).concat("inIdx.b"),v=$K("sourceLocA",d-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",b=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),k=a?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(k,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[o-1]," < ").concat(i[o-1]-1,";\n        bool hasNextRow = ").concat(c[o-2]," < ").concat(i[o-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(b,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(y,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function gY(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.shape[0],s=t.shape[1];null!=a&&(r=a.shape[0],s=a.shape[1]);const i=zT(s),o={windowSize:i,inSize:s,batchSize:r,outSize:Math.ceil(s/i)},l=new fY(o,n,null==a),c=[t];null!=a&&c.push(a);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const d=gY(e,t,n,u);return e.disposeIntermediateTensorInfo(u),d}function xY(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=null!=a?a.shape:t.shape,s=zT(r[r.length-1]),i=new mY(r,s,n,null==a),o=null==a?[t]:[t,a],l=e.runWebGLProgram(i,o,"int32");if(l.shape.length===t.shape.length){const a=xY(e,t,n,l);return e.disposeIntermediateTensorInfo(l),a}return l}function vY(e,t,n,a){const r=[n];if(IC("arg"+a.charAt(0).toUpperCase()+a.slice(1),r,t.shape.length),!Dv().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],s=e.texData.get(t.dataId);let i=t;null!==s&&s.isPacked&&(i=e.unpackTensor(t),n.push(i));const[o,l]=EC(i.shape,r),c=sv(l),u=BX({inputs:{x:i},backend:e,attrs:{shape:[-1,c]}});n.push(u);const d=gY(e,u,a);n.push(d);const h=BX({inputs:{x:d},backend:e,attrs:{shape:o}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return xY(e,t,a)}const yY={kernelName:Xv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s}=a;let i=hv(s,r.shape);const o=AC(i,r.shape.length);let l=r;const c=[];null!=o&&(l=$X({inputs:{x:r},backend:n,attrs:{perm:o}}),c.push(l),i=OC(i.length,l.shape.length)),IC("argMax",[i[0]],l.shape.length);const u=vY(n,l,i[0],"max");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}};const bY={kernelName:Yv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s}=a;let i=hv(s,r.shape);const o=AC(i,r.shape.length);let l=r;const c=[];null!=o&&(l=$X({inputs:{x:r},backend:n,attrs:{perm:o}}),c.push(l),i=OC(i.length,l.shape.length)),IC("argMin",[i[0]],l.shape.length);const u=vY(n,l,i[0],"min");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}},wY=AX({opSnippet:rX+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),kY={kernelName:$v,backendName:"webgl",kernelFunc:wY},NY=AX({opSnippet:rX+"return log(x + sqrt(x * x + 1.0));"}),jY={kernelName:Qv,backendName:"webgl",kernelFunc:NY},SY=AX({opSnippet:rX+"\n  return atan(x);\n"}),CY={kernelName:Jv,backendName:"webgl",kernelFunc:SY},EY=_X({opSnippet:mX+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+xX+"\n  return result;\n"}),TY={kernelName:ey,backendName:"webgl",kernelFunc:EY},IY=AX({opSnippet:rX+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),AY={kernelName:Zv,backendName:"webgl",kernelFunc:IY};class _Y{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let x="0.0";if(f||(x="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?r?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / max(count, 1.0)");const y=4*Math.floor(s/4),b=s%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(y,";\n          if (").concat(1===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}class OY{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let y="0.0";if(v||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(i,", ").concat(o,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(x,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?r?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / max(count, 1.0)");const w=4*Math.floor(s/4),k=s%4,N="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(i,", ").concat(o,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(x,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(N,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(N,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(N,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(N,"\n            }\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}const RY={kernelName:ty,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;uq(r,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=a;nv(MS(i,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const c=SS(r.shape,s,i,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&iv(c.inShape,c.outShape))return yX({inputs:{x:r},backend:n});const u=new _Y(c,"avg",!1);return n.runWebGLProgram(u,[r],"float32")}};const PY={kernelName:ay,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=a,u=CS(r.shape,s,i,[1,1,1],o,l,c),d=new OY(u,"avg",!1);return n.runWebGLProgram(d,[r],"float32")}};class MY{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n            wR += ").concat(s,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(i,") {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class DY{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(r,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const FY={kernelName:ry,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s}=t,i=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=a,d=CS(i.shape,o,l,[1,1,1],c,u),h=new DY(d);return n.runWebGLProgram(h,[r],i.dtype)}};const LY={kernelName:ny,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s}=t,i=s;uq([r,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=a,u=SS(i.shape,o,l,1,c),d=new MY(u);return n.runWebGLProgram(d,[r],i.dtype)}};const zY={kernelName:sy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:s}=t,{transposeA:i,transposeB:o}=a;return JX({a:r,b:s,transposeA:i,transposeB:o,backend:n})}};class BY{constructor(e,t,n,a,r,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Uj(e,t),Uj(e,n);let i="0.0";null!=a&&(Uj(e,a),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="1.0";null!=r&&(Uj(e,r),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(i,";\n        float scale = ").concat(o,";\n        float inv = scale * inversesqrt(variance + float(").concat(s,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class UY{constructor(e,t,n,a,r,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Uj(e,t),Uj(e,n);let i="vec4(0.0)";null!=a&&(Uj(e,a),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=r&&(Uj(e,r),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(i,";\n        vec4 scale = ").concat(o,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(s,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const WY={kernelName:Qy,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,mean:s,variance:i,offset:o,scale:l}=t;nv(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),nv(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),nv(null==l||s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=a;null==c&&(c=.001);const u=[r,s,i];let d=null;null!=o&&(d=o.shape,u.push(o));let h=null;null!=l&&(h=l.shape,u.push(l));const p=Dv().getBool("WEBGL_PACK_NORMALIZATION")?new UY(r.shape,s.shape,i.shape,d,h,c):new BY(r.shape,s.shape,i.shape,d,h,c);return n.runWebGLProgram(p,u,u[0].dtype)}};class VY{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Tq(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return HY.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let a;const r=e.map((e,t)=>"sourceLoc.".concat(HY[t]," = start[").concat(t,"] + coords.").concat(HY[t],";"));a="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(r.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(a,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const HY=["x","y","z","w","u","v"];class GY{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Tq(this.rank),n=$K("coords",this.rank),a=$K("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),s="getChannel(getSource(".concat(a.join(),"), ").concat(r,")"),i="\n      result.x = ".concat(s,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(s,";\n        --").concat(a[this.rank-1],";\n      }\n    "),o=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(s,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(s,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((e,t)=>"start[".concat(t,"]")).join(),");"):e.map((e,t)=>"".concat(a[t]," = ").concat(n[t]," + start[").concat(t,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(i,"\n        ").concat(o,"\n        setOutput(result);\n      }\n    ")}}function qY(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:s,size:i}=a,[o,l]=vS(r,s,i);if(rS(r,o,l),0===sv(l))return n.makeTensorInfo(l,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||"string"===r.dtype){const e=n.texData.get(r.dataId),t=PK(e.values,o,l,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,t)}const{isPacked:c}=n.texData.get(r.dataId),u=gS(r.shape,o,l);if(c||!u){const e=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GY(l):new VY(l),t=[o];return n.runWebGLProgram(e,[r],r.dtype,t)}return n.uploadToGPU(r.dataId),function(e,t,n,a){const r=a.texData.get(e.dataId),s=a.makeTensorInfo(n,e.dtype),i=a.texData.get(s.dataId);Object.assign(i,r),i.refCount=1,i.shape=n,i.dtype=e.dtype;let o=xS(t,Nv(e.shape));r.slice&&(o+=r.slice.flatOffset),i.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};const l=a.dataRefCount.get(i.slice.origDataId)||1;return a.dataRefCount.set(i.slice.origDataId,l+1),s}(r,o,l,n)}const KY={kernelName:hw,backendName:"webgl",kernelFunc:qY},XY={kernelName:iy,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:s,crops:i}=a;nv(r.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((e,t)=>e*t),l=UT(r.shape,s,o),c=WT(l.length,s.length),u=VT(r.shape,s,o),d=HT(i,s.length),h=GT(u,i,s.length),p=[],f=BX({inputs:{x:r},backend:n,attrs:{shape:l}}),m=$X({inputs:{x:f},backend:n,attrs:{perm:c}}),g=BX({inputs:{x:m},backend:n,attrs:{shape:u}}),x=qY({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),x}};const YY={kernelName:oy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:s}=t,{size:i}=a,o=n.readSync(r.dataId),l=n.readSync(s.dataId),c=tK(o,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}};const $Y={kernelName:ly,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,s=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Dv().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([a,r])||1===i){const e=n.texData.get(a.dataId).values,t=n.texData.get(r.dataId).values,[s,i]=aK(a.shape,r.shape,e,t,a.dtype),o=n.makeTensorInfo(i,a.dtype);return n.texData.get(o.dataId).values=s,o}let o;return o=s?new vX("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",a.shape,r.shape,!1):new gX("\n  return float(int(a.r) & int(b.r));\n",a.shape,r.shape),n.runWebGLProgram(o,[a,r],a.dtype)}};const QY={kernelName:cy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,s=n.readSync(a.dataId),i=n.readSync(r.dataId),o=Uj(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},JY=_X({opSnippet:"return float(a != b);",cpuKernelImpl:jK,dtype:"bool"}),ZY={kernelName:Pb,backendName:"webgl",kernelFunc:JY};function e$(e){const{inputs:t,backend:n}=e,{input:a}=t;return yX({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.real},backend:n})}const t$={kernelName:Yb,backendName:"webgl",kernelFunc:e$};const n$={kernelName:uy,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a,attrs:r}=t,{x:s}=n,{dtype:i}=r;if("complex64"===i){if("complex64"===s.dtype)return yX({inputs:{x:s},backend:a});const t=GC(s.shape),n=e({inputs:{x:s},backend:a,attrs:{dtype:"float32"}}),r=wX({inputs:{real:n,imag:t},backend:a});return t.dispose(),a.disposeIntermediateTensorInfo(n),r}if("complex64"===s.dtype){const t=e$({inputs:{input:s},backend:a}),n=e({inputs:{x:t},backend:a,attrs:{dtype:i}});return a.disposeIntermediateTensorInfo(t),n}if(!gv(s.dtype,i)){const e=yX({inputs:{x:s},backend:a});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(a.shouldExecuteOnCPU([s])){const e=a.texData.get(s.dataId).values,[t,n,r]=rK(e,s.shape,s.dtype,i);return a.makeTensorInfo(t,n,r)}if("int32"===i)return function(e,t){const n=new aX(e.shape,"return float(int(x));"),a=t.runWebGLProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(s,a);if("bool"===i){const e=a.makeTensorInfo([],"bool",fv("bool",1)),t=JY({inputs:{a:s,b:e},backend:a});return a.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(s.dtype," to ").concat(i))}},a$="return ceil(x);",r$=AX({opSnippet:a$,packedOpSnippet:a$,cpuKernelImpl:sK}),s$={kernelName:dy,backendName:"webgl",kernelFunc:r$};class i${constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class o${constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const l$={kernelName:hy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:s,clipValueMax:i}=a;let o;o=Dv().getBool("WEBGL_PACK_CLIP")?new o$(r.shape):new i$(r.shape);const l=[[s],[i]];return n.runWebGLProgram(o,[r],r.dtype,l)}};class c${constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function u$(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const d$={kernelName:fy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=n.texData.get(a.dataId),s=new c$(a.shape),i=[u$(a,r.complexTensorInfos.real),u$(a,r.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}};class h${constructor(e){this.outputShape=[],this.outputShape=OT(e,1),this.variableNames=e.map((e,t)=>"T".concat(t));const t=new Array(e.length-1);t[0]=e[0][1];for(let s=1;s<t.length;s++)t[s]=t[s-1]+e[s][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let s=1;s<t.length;s++){const e=t[s-1];n.push("else if (yC < ".concat(t[s],") ")+"setOutput(getT".concat(s,"(yR, yC-").concat(e,"));"))}const a=t.length,r=t[t.length-1];n.push("else setOutput(getT".concat(a,"(yR, yC-").concat(r,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class p${constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=OT(e,t);const n=this.outputShape,a=n.length,r=Tq(a),s=$K("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((e,t)=>"T".concat(t));const o=new Array(e.length-1);o[0]=e[0][t];for(let f=1;f<o.length;f++)o[f]=o[f-1]+e[f][t];const l=i[t],c=i.slice(-2),u=i.join();let d="if (".concat(l," < ").concat(o[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<o.length;f++){const e=o[f-1];d+="\n        if (".concat(l," < ").concat(o[f],"  && ").concat(l," >= ").concat(o[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(f$(i,l,e),"),\n            vec2(").concat(f$(c,l,e),"));\n        }")}const h=o.length,p=o[o.length-1];d+="\n        return getChannel(\n          getT".concat(h,"(").concat(f$(i,l,p),"),\n          vec2(").concat(f$(c,l,p),"));"),this.userCode="\n      float getValue(".concat(i.map(e=>"int "+e),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(r," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(s,"), 0., 0., 0.);\n\n        ").concat(s[a-1]," = ").concat(s[a-1]," + 1;\n        if (").concat(s[a-1]," < ").concat(n[a-1],") {\n          result.g = getValue(").concat(s,");\n        }\n\n        ").concat(s[a-2]," = ").concat(s[a-2]," + 1;\n        if (").concat(s[a-2]," < ").concat(n[a-2],") {\n          result.a = getValue(").concat(s,");\n        }\n\n        ").concat(s[a-1]," = ").concat(s[a-1]," - 1;\n        if (").concat(s[a-2]," < ").concat(n[a-2]," &&\n            ").concat(s[a-1]," < ").concat(n[a-1],") {\n          result.b = getValue(").concat(s,");\n        }\n        setOutput(result);\n      }\n    ")}}function f$(e,t,n){const a=e.indexOf(t),r=e.map((e,t)=>t===a?"".concat(e," - ").concat(n):e);return r.join()}function m$(e){const{inputs:t,backend:n}=e,{input:a}=t;return yX({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.imag},backend:n})}const g$={kernelName:rb,backendName:"webgl",kernelFunc:m$};function x$(e,t,n){const a=e[0].dtype;if("complex64"===a){const a=e.map(e=>e$({inputs:{input:e},backend:n})),r=e.map(e=>m$({inputs:{input:e},backend:n})),s=x$(a,t,n),i=x$(r,t,n),o=wX({inputs:{real:s,imag:i},backend:n});return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),r.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}let r=n.shouldExecuteOnCPU(e);if("string"===a&&(r=!0),r){const r=e.map(e=>{const a=sv(e.shape.slice(t));return BX({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})}),s=r.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),i=OT(r.map(e=>e.shape),1),o=1===r[0].shape[0],l=iK(s,i,a,o),c=OT(e.map(e=>e.shape),t),u=n.makeTensorInfo(c,a,l);return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}const s=e.filter(e=>sv(e.shape)>0),i=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(1===s.length){const t=i?new aX(e[0].shape,lX):new cX(e[0].shape,lX);return n.runWebGLProgram(t,e,a)}const o=Dv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const e=[];for(let r=0;r<s.length;r+=o){const a=s.slice(r,r+o);e.push(x$(a,t,n))}const a=x$(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return a}if(i){const e=new p$(s.map(e=>e.shape),t);return n.runWebGLProgram(e,s,a)}const{tensors2D:l,outShape:c}=function(e,t,n){const a=OT(e.map(e=>e.shape),t),r=e.map(e=>BX({inputs:{x:e},attrs:{shape:[-1,sv(e.shape.slice(t))]},backend:n}));return{tensors2D:r,outShape:a}}(s,t,n),u=new h$(l.map(e=>e.shape)),d=n.runWebGLProgram(u,l,a);l.forEach(e=>n.disposeIntermediateTensorInfo(e));const h=BX({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function v$(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,s=hv(r,t[0].shape)[0],i=t.map(e=>e.shape);_T(i,s);const o=OT(t.map(e=>e.shape),s);if(0===sv(o))return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(e=>sv(e.shape)>0);return 1===l.length?yX({inputs:{x:l[0]},backend:n}):x$(l,s,n)}const y$={kernelName:my,backendName:"webgl",kernelFunc:v$};class b${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,x=m?2:3,v=m?3:1;let y="",b="";n&&(y=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),b="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(y,"\n\n      const ivec2 strides = ivec2(").concat(o,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(s,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(x,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")}}class w${constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,a=e.padInfo.left,r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(r,", ").concat(s,", ").concat(i,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(o,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class k${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Mq(this.outputShape.length);const s=e.padInfo.left,i=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)d+="\n           vec4 xTexelC".concat(2*m,";\n           int xTexelC").concat(2*m,"Ready;\n           vec4 xTexelC").concat(2*m+1,";\n           int xTexelC").concat(2*m+1,"Ready;\n           vec4 xC").concat(m,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<c;m++)d+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){const t=2*m;if(d+="\n           xC = xCCorner + ".concat(t*o,";\n           "),1===i){if(t<c&&(s%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===o&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){const e=s%2===0?ev(o):o;o%2===0&&s%2===1||o%2!==0&&s%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=o>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(s%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let h="",p="";n&&(h=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):r?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class N${constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Mq(this.outputShape.length);const{dataFormat:n}=t,a=hq(),r="channelsLast"===n,s=r?1:2,i=r?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(o,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(s,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(i,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(r,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(a.output," = result;\n      }\n    ")}}function j$(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function S$(e){let{x:t,filter:n,convInfo:a,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}=e;const c=t.shape,u=r.texData.get(t.dataId),d=a.inChannels,h=c[0]*c[1]*c[2],p=a.outChannels,f="channelsLast"===a.dataFormat,m=!1;let g;const x=[];if(null!=i){const e=j$(i.shape,f);null!=e&&(i=BX({inputs:{x:i},backend:r,attrs:{shape:e}}),x.push(i))}if(null!=s){const e=j$(s.shape,f);null!=e&&(s=BX({inputs:{x:s},backend:r,attrs:{shape:e}}),x.push(s))}if(!((1===h||1===p)&&d>1e3)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&iv(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),d={dataId:t.dataId,shape:[1,e,a.inChannels],dtype:t.dtype},h=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,nv(aq(u.shape,d.shape),()=>"packed reshape ".concat(u.shape," to ").concat(d.shape," isn't free"));const p=BX({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(p);const f=JX({a:d,b:p,backend:r,transposeA:false,transposeB:m,bias:s,activation:l,preluActivationWeights:i,leakyreluAlpha:o}),v=r.texData.get(f.dataId);nv(v.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=h,v.shape=a.outShape,g=yX({inputs:{x:f},backend:r}),g.shape=a.outShape,x.push(f)}else{const e=a.outHeight*a.outWidth,c=BX({inputs:{x:t},backend:r,attrs:{shape:f?[a.batchSize,e,a.inChannels]:[a.batchSize,a.inChannels,e]}}),u=BX({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}}),d=JX({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:m,backend:r,bias:s,activation:l,preluActivationWeights:i,leakyreluAlpha:o});g=BX({inputs:{x:d},backend:r,attrs:{shape:a.outShape}}),x.push(c),x.push(u),x.push(d)}for(const v of x)r.disposeIntermediateTensorInfo(v);return g}function C$(e){let{x:t,filter:n,convInfo:a,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:d,outWidth:h,outHeight:p,dataFormat:f}=a,m="channelsLast"===f,g=c*u*d,x=p*h,v=[a.batchSize,g,x],y=[];if(null!=i){const e=j$(i.shape,m);null!=e&&(i=BX({inputs:{x:i},backend:r,attrs:{shape:e}}),y.push(i))}if(null!=s){const e=j$(s.shape,m);null!=e&&(s=BX({inputs:{x:s},backend:r,attrs:{shape:e}}),y.push(s))}const b=BX({inputs:{x:n},backend:r,attrs:{shape:[1,g,sv(n.shape)/g]}});y.push(b);const w=new N$(v,a),k=[t.shape,[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inChannels],[a.filterWidth*a.inChannels],[a.outWidth]],N=r.runWebGLProgram(w,[t],"float32",k),j=BX({inputs:{x:N},backend:r,attrs:{shape:v}});y.push(N),y.push(j);const S=null!=s,C=null!=i,E="leakyrelu"===l,T=l?OX(l,!0):null,I=new RX(m?j.shape:b.shape,m?b.shape:j.shape,m?[a.batchSize,x,a.outChannels]:[a.batchSize,a.outChannels,x],!0,!1,S,T,C,E),A=m?[j,b]:[b,j];if(s&&A.push(s),C&&A.push(i),E){const e=r.makeTensorInfo([],"float32",Nk(o,"float32"));A.push(e),y.push(e)}const _=r.runWebGLProgram(I,A,"float32"),O=BX({inputs:{x:_},backend:r,attrs:{shape:a.outShape}});y.push(_);for(const R of y)r.disposeIntermediateTensorInfo(R);return O}const E$={kernelName:gy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=a,d=FS(l),h=ES(r.shape,s.shape,i,c,o,u,!1,d);let p;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&Dv().getBool("WEBGL_EXP_CONV")){const e=new k$(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(e,[r,s],"float32",t)}else if(Dv().getBool("WEBGL_CONV_IM2COL"))p=C$({x:r,filter:s,convInfo:h,backend:n});else{const e=new b$(h);p=n.runWebGLProgram(e,[r,s],"float32")}else p=S$({x:r,filter:s,convInfo:h,backend:n});const f=BX({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class T${constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,s="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(s?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class I${constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,s="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=s?1:2,c=s?2:3,u=s?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(s,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class A${constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.padInfo.front,s=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(r,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(s,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(i,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class _${constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(o,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(r,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const O$={kernelName:xy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=a,d=FS(l),h=ES(r.shape,u,i,1,o,c,!1,d),p=new T$(h);return n.runWebGLProgram(p,[r,s],"float32")}};class R${constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Mq(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,a=t-1-e.padInfo.top,r=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(r,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const P$={kernelName:vy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=a,d=FS(c),h=ES(i,s.shape,o,1,l,u,!1,d);if(Dv().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[h.strideHeight,h.strideWidth]],t=new R$(h);return n.runWebGLProgram(t,[r,s],"float32",e)}{const e=new I$(h);return n.runWebGLProgram(e,[r,s],"float32")}}};const M$={kernelName:yy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dilations:l}=a,c=TS(r.shape,s.shape,i,l,o),u=new w$(c);return n.runWebGLProgram(u,[r,s],"float32")}};const D$={kernelName:by,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:s}=t,{strides:i,pad:o,filterShape:l}=a,c=TS(r.shape,l,i,1,o),u=new A$(c);return n.runWebGLProgram(u,[r,s],"float32")}};const F$={kernelName:wy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:s}=t,{pad:i,strides:o,inputShape:l}=a,c=TS(l,s.shape,o,1,i),u=new _$(c);return n.runWebGLProgram(u,[r,s],"float32")}},L$=AX({opSnippet:IX+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(xX,"\n  return result;\n")}),z$={kernelName:ky,backendName:"webgl",kernelFunc:L$},B$=AX({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),U$={kernelName:Ny,backendName:"webgl",kernelFunc:B$};class W${constructor(e,t,n,a,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,i,o,l]=e,[c]=t,[u,d]=n;this.outputShape=[c,u,d,l];const h="bilinear"===a?1:0,[p,f]=["".concat(i-1,".0"),"".concat(o-1,".0")],[m,g,x]=u>1?["".concat((i-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,y,b]=d>1?["".concat((o-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(y,";\n\n        float in_y = ").concat(x,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n        float in_x = ").concat(b,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const V$={kernelName:Cy,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:c}=a,u=new W$(r.shape,s.shape,o,l,c);return n.runWebGLProgram(u,[r,s,i],"float32")}};var H$;!function(e){e.Prod="*",e.Sum="+"}(H$||(H$={}));class G${constructor(e,t,n,a){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,s=this.op===H$.Prod?"1.0":"0.0",i=n?s:"getX(".concat(q$(r,"coords",this.op),")"),o=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=a?"end != ".concat(o-1):"end != 0",c=a?"end + 1":"end - 1"):(l=a?"end + pow2 < ".concat(o):"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Tq(r)," coords = getOutputCoords();\n        int end = ").concat(K$(r,"coords",this.op),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(K$(r,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(q$(r,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function q$(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function K$(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function X$(e,t,n,a,r,s){const i=t.shape.length,o=AC([a],i);let l=t;null!=o&&(l=$X({inputs:{x:t},backend:n,attrs:{perm:o}}));const c=OC(1,i)[0];if(c!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(a));const u=l.shape[c];let d=yX({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const t=new G$(e,l.shape,!1,s),a=[[h]],r=d;d=n.runWebGLProgram(t,[d],d.dtype,a),n.disposeIntermediateTensorInfo(r)}if(r){const t=new G$(e,l.shape,r,s),a=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(a)}if(null!=o){const e=$X({inputs:{x:d},backend:n,attrs:{perm:_C(o)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}const Y$={kernelName:jy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,exclusive:i,reverse:o}=a;return X$(H$.Prod,r,n,s,i,o)}};const $$={kernelName:Sy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,exclusive:i,reverse:o}=a;return X$(H$.Sum,r,n,s,i,o)}};const Q$={kernelName:Ey,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:s}=t,{size:i,binaryOutput:o}=a;if(1===r.shape.length){const e=n.readSync(r.dataId),t=n.readSync(s.dataId),a=tK(e,t,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,a)}if(2===r.shape.length){const e=n.bufferSync(r),t=n.bufferSync(s),a=nK(e,t,i,o);return n.makeTensorInfo(a.shape,s.dtype,a.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};class J${constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const Z$={kernelName:Ty,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:s,dataFormat:i}=a,o=r.shape[0],l=("NHWC"===i?r.shape[1]:r.shape[2])*s,c=("NHWC"===i?r.shape[2]:r.shape[3])*s,u=("NHWC"===i?r.shape[3]:r.shape[1])/(s*s),d=new J$("NHWC"===i?[o,l,c,u]:[o,u,l,c],s,i);return n.runWebGLProgram(d,[r],r.dtype)}};class eQ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Mq(this.outputShape.length);const s=e.filterHeight,i=e.filterWidth,o=e.outChannels/e.inChannels;let l="",c="";n&&(l=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(s,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}}class tQ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Mq(this.outputShape.length);const s=e.outChannels/e.inChannels,i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");h+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let g=0;g<u;g++)h+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(d+1)/2;g++){const e=2*g;if(h+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===o){if(e<u&&(i%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),h+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=i%2===0?ev(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),h+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):h+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(i%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(h+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(h+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(h+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(p=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const nQ={kernelName:Iy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=a;let u=l;null==u&&(u=[1,1]),nv(MS(i,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(u,"'"));const d=ES(r.shape,s.shape,i,u,o,c,!0);let h;h=Dv().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new tQ(d):new eQ(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[r,s],"float32",p)}};class aQ{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(s," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class rQ{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(o,"; dm++) {\n              int d2 = d1 * ").concat(o," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const sQ={kernelName:Ay,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=a,d=ES(r.shape,u,i,o,l,c,!0),h=new aQ(d);return n.runWebGLProgram(h,[r,s],"float32")}};const iQ={kernelName:_y,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=a,d=ES(u,s.shape,i,o,l,c,!0),h=new rQ(d);return n.runWebGLProgram(h,[r,s],"float32")}};class oQ{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const lQ={kernelName:Oy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=[...a.shape,...a.shape],s=sv(a.shape),i=BX({inputs:{x:a},backend:n,attrs:{shape:[s]}}),o=new oQ(s),l=n.runWebGLProgram(o,[i],i.dtype),c=BX({inputs:{x:l},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}};class cQ{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:a,strideHeight:r,strideWidth:s,filterHeight:i,filterWidth:o,dilationHeight:l,dilationWidth:c}=e,{top:u,left:d}=a;this.userCode="\n      const ivec2 strides = ivec2(".concat(r,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(i,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(o,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const uQ={kernelName:Ry,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s}=t,{strides:i,pad:o,dilations:l}=a,c=jS(r.shape,s.shape,i,o,"NHWC",l);let u;const d=new cQ(c);u=n.runWebGLProgram(d,[r,s],"float32");const h=BX({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}};const dQ={kernelName:Ly,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,s=t,{allDims:i,summedDims:o,idDims:l}=gI(r,s.length);vI(i.length,l,s);const{path:c,steps:u}=yI(o,l),d=u.length;let h=null,p=i.length;const f=[];for(let m=0;m<d;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:a}=xI(p,l[e]);let r;bI(t)?r=s[e]:(r=$X({inputs:{x:s[e]},backend:n,attrs:{perm:t}}),f.push(r));const i=r.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);iv(r.shape,i)||(r=BX({inputs:{x:r},backend:n,attrs:{shape:i}}),f.push(r)),null===h?h=r:(h=LX({inputs:{a:r,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=XX({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}},hQ=AX({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),pQ={kernelName:zy,backendName:"webgl",kernelFunc:hQ},fQ={kernelName:By,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:a,y:r}=t,s=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vX("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",a.shape,r.shape):new gX("return (b >= 0.0) ? a : a * (b + 1.0);",a.shape,r.shape);return n.runWebGLProgram(s,[a,r],a.dtype)}},mQ=_X({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:oK}),gQ={kernelName:Wy,backendName:"webgl",kernelFunc:mQ},xQ=AX({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(JT,";\n  float a1 = ").concat(ZT,";\n  float a2 = ").concat(eI,";\n  float a3 = ").concat(tI,";\n  float a4 = ").concat(nI,";\n  float a5 = ").concat(aI,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),vQ={kernelName:Uy,backendName:"webgl",kernelFunc:xQ},yQ=AX({opSnippet:IX+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:lK,dtype:"float32"}),bQ={kernelName:Vy,backendName:"webgl",kernelFunc:yQ};function wQ(e){const{inputs:t,attrs:n,backend:a}=e,{dim:r}=n,{input:s}=t,i=s.shape.length,o=s.shape.slice();let l=r;return r<0&&(nv(-(i+1)<=r,()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")),l=i+r+1),o.splice(l,0,1),BX({inputs:{x:s},backend:a,attrs:{shape:o}})}const kQ={kernelName:Hy,backendName:"webgl",kernelFunc:wQ},NQ="return exp(x) - 1.0;",jQ=AX({opSnippet:NQ,packedOpSnippet:NQ,cpuKernelImpl:cK}),SQ={kernelName:Gy,backendName:"webgl",kernelFunc:jQ};class CQ{constructor(e,t,n){this.variableNames=["real","imag"];const a=t[1];this.outputShape=t;const r=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=n?"".concat(a,".0"):"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(r,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function EQ(e,t,n){const a=n.texData.get(e.dataId),r=sv(e.shape),s=e.shape[e.shape.length-1],i=BX({inputs:{x:e},backend:n,attrs:{shape:[r/s,s]}}),o=i.shape,l=new CQ("real",o,t),c=new CQ("imag",o,t),u=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:o},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:o}],d=n.runWebGLProgram(l,u,"float32"),h=n.runWebGLProgram(c,u,"float32"),p=wX({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const f=BX({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),f}const TQ={kernelName:qy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return EQ(a,!1,n)}};class IQ{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function AQ(e){const{backend:t,attrs:n}=e,{shape:a,value:r}=n;let{dtype:s}=n;if(s=s||bv(r),"string"===s){const e=mv(s,sv(a));return e.fill(r),t.makeTensorInfo(a,s,e)}{const e=new IQ(a,r),n=[[r]];return t.runWebGLProgram(e,[],s,n)}}const _Q={kernelName:Ky,backendName:"webgl",kernelFunc:AQ};class OQ{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const RQ={kernelName:Xy,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:a}=t,r=n,s=new OQ(a.shape);return r.runWebGLProgram(s,[a],a.dtype)}},PQ="return floor(x);",MQ=AX({opSnippet:PQ,packedOpSnippet:PQ,cpuKernelImpl:uK}),DQ={kernelName:Yy,backendName:"webgl",kernelFunc:MQ},FQ=_X({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),LQ={kernelName:$y,backendName:"webgl",kernelFunc:FQ};class zQ{constructor(e){this.variableNames=["A"];const t=hq(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(a,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class BQ{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=hq(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(a,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const UQ={kernelName:Kw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e;let{pixels:r}=t;const{numChannels:s}=a,i="undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement,o="undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement,[l,c]=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],u=[c,l],d=[c,l,s];if(o||i){const e=Dv().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=WQ&&e===VQ||(VQ=e,WQ=document.createElement("canvas").getContext("2d",{willReadFrequently:VQ})),WQ.canvas.width=l,WQ.canvas.height=c,WQ.drawImage(r,0,0,l,c),r=WQ.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=PG.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),r);const p=Dv().getBool("WEBGL_PACK")?new BQ(d):new zQ(d),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}};let WQ,VQ=Dv().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const HQ={kernelName:$w,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=a,m=FS(u),g=ES(r.shape,s.shape,l,d,c,h,!1,m);let x;const v=[],y=null!=i,b=null!=o,w="leakyrelu"===p,k=()=>{const e=[r,s],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=BX({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(y&&e.push(t(i,u)),b&&e.push(t(o,u)),w){const t=n.makeTensorInfo([],"float32",Nk(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&Dv().getBool("WEBGL_EXP_CONV")){const e=p?OX(p,!0):null,t=new k$(g,y,e,b,w),a=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],r=k();x=n.runWebGLProgram(t,r,"float32",a)}else if(Dv().getBool("WEBGL_CONV_IM2COL"))x=C$({x:r,filter:s,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{const e=p?OX(p,!1):null,t=new b$(g,y,e,b,w),a=k();x=n.runWebGLProgram(t,a,"float32")}else x=S$({x:r,filter:s,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:o,leakyreluAlpha:f});const N=BX({inputs:{x:x},backend:n,attrs:{shape:g.outShape}});return v.push(x),v.forEach(e=>n.disposeIntermediateTensorInfo(e)),N}};const GQ={kernelName:Qw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=a,f=[];let m=u;null==m&&(m=[1,1]),nv(MS(l,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(m,"'"));const g=ES(r.shape,s.shape,l,m,c,d,!0),x=Dv().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=h?OX(h,x):null,y=[r,s],b=null!=i,w=null!=o,k="leakyrelu"===h;if(b&&y.push(i),w&&y.push(o),k){const e=n.makeTensorInfo([],"float32",Nk(p,"float32"));y.push(e),f.push(e)}let N;N=x?new tQ(g,b,v,w,k):new eQ(g,b,v,w,k);const j=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],S=n.runWebGLProgram(N,y,"float32",j);return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),S}};class qQ{constructor(e,t,n,a){this.sliceDim=e,this.strides=t,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=n;const r=Tq(n.length);let s="\n    int index;";for(let i=0;i<this.sliceDim;i++)s+="\n          index = round(getIndices(coords[0], ".concat(i,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[i],";\n          flattenIndex += index * ").concat(this.strides[i],";");this.userCode="\n         void main() {\n          ".concat(r," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(s,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const KQ={kernelName:Zy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,s=r.shape,i=s[s.length-1],o=sv(a.shape),[l,c,u,d]=qT(a,r),h=BX({inputs:{x:r},backend:n,attrs:{shape:[c,i]}}),p=BX({inputs:{x:a},backend:n,attrs:{shape:[sv(a.shape)/u,u]}});if(n.shouldExecuteOnCPU([a,r])||"string"===a.dtype){const e=n.readSync(r.dataId),t=n.bufferSync(a),s=dK(e,t,a.dtype,c,i,u,d,a.shape,o);return n.makeTensorInfo(l,a.dtype,s.values)}const f=new qQ(i,d,[c,u],a.shape),m=n.runWebGLProgram(f,[p,h],p.dtype),g=BX({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class XQ{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=Tq(this.rank),a=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let a=0;a<e.length;a++)2===a?n.push("index"):n.push("".concat(t[a]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}}function YQ(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:s}=t,{axis:i,batchDims:o}=a,l=hv(i,r.shape)[0];if(Dv().get("DEBUG")){const e=n.readSync(s.dataId),t=r.shape[l];for(let n=0;n<e.length;++n){const a=e[n];nv(a<=t-1&&a>=0,()=>"GatherV2: the index value ".concat(a," is not in [0, ").concat(t-1,"]"))}}const c=FI(r,s,l,o),u=sv(s.shape),d=[],h=BX({inputs:{x:r},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=BX({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([r,s])||"string"===r.dtype){const e=n.bufferSync(p),t=n.bufferSync(h),a=hK(t,e,f);return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c.outputShape,a.dtype,a.values)}const m=new XQ(h.shape,f),g=n.runWebGLProgram(m,[h,p],h.dtype);d.push(g);const x=BX({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),x}const $Q={kernelName:Jy,backendName:"webgl",kernelFunc:YQ},QQ=_X({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:pK,dtype:"bool"}),JQ={kernelName:eb,backendName:"webgl",kernelFunc:QQ},ZQ=_X({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:fK}),eJ={kernelName:tb,backendName:"webgl",kernelFunc:ZQ};const tJ={kernelName:ab,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return EQ(a,!0,n)}},nJ=AX({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),aJ={kernelName:sb,backendName:"webgl",kernelFunc:nJ},rJ=AX({opSnippet:"return float(isinf(x));",dtype:"bool"}),sJ={kernelName:ib,backendName:"webgl",kernelFunc:rJ},iJ=AX({opSnippet:"return float(isnan(x));",dtype:"bool"}),oJ={kernelName:ob,backendName:"webgl",kernelFunc:iJ},lJ=_X({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:mK,dtype:"bool"}),cJ={kernelName:cb,backendName:"webgl",kernelFunc:lJ},uJ=_X({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:gK,dtype:"bool"}),dJ={kernelName:ub,backendName:"webgl",kernelFunc:uJ};const hJ={kernelName:db,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:s}=n,i=xK(a,r,s);return t.makeTensorInfo([i.length],"float32",i)}},pJ=AX({opSnippet:IX+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:vK}),fJ={kernelName:hb,backendName:"webgl",kernelFunc:pJ},mJ=AX({opSnippet:IX+"\n  return log(1.0 + x);\n"}),gJ={kernelName:pb,backendName:"webgl",kernelFunc:mJ},xJ=_X({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),vJ={kernelName:fb,backendName:"webgl",kernelFunc:xJ},yJ=AX({opSnippet:"return float(!(x >= 1.0));"}),bJ={kernelName:mb,backendName:"webgl",kernelFunc:yJ},wJ=_X({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),kJ={kernelName:gb,backendName:"webgl",kernelFunc:wJ};class NJ{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[];const s=t,i=e[3]-1;let o;this.outputShape=e;const l="float(".concat(n,") + float(").concat(a,") * sum");o=.5===r?"inversesqrt(".concat(l,")"):1===r?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(i,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")}}class jJ{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=t,i=e[3]-1;let o;this.outputShape=e;const l="float(".concat(n,") + float(").concat(a,") * sum");o=.5===r?"inversesqrt(".concat(l,")"):1===r?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(i,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")}}const SJ={kernelName:xb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=a,c=Dv().getBool("WEBGL_PACK_NORMALIZATION")?new jJ(r.shape,s,i,o,l):new NJ(r.shape,s,i,o,l);return n.runWebGLProgram(c,[r],r.dtype)}};class CJ{constructor(e,t,n,a,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=a,this.beta=r,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(r,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(r,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const EJ={kernelName:vb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=a,d=new CJ(r.shape,o,l,c,u);return n.runWebGLProgram(d,[r,s,i],r.dtype)}};function TJ(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:s,keepDims:i}=a,o=r.shape.length,l=hv(s,r.shape);let c=l;const u=AC(c,o),d=null!=u,h=n.shouldExecuteOnCPU([r]);let p=r;if(d){if(h){const e=n.texData.get(p.dataId).values,t=new Array(o);for(let n=0;n<t.length;n++)t[n]=r.shape[u[n]];const a=KK(e,r.shape,r.dtype,u,t);p=n.makeTensorInfo(t,r.dtype);n.texData.get(p.dataId).values=a}else p=KX(r,u,n);c=OC(c.length,o)}IC("max",c,o);const[f,m]=EC(p.shape,c);let g,x=f;if(i&&(x=TC(f,l)),h){const e=n.texData.get(p.dataId).values,t=yK(e,sv(m),x,r.dtype);g=n.makeTensorInfo(x,r.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,a){const r=sv(t),s=BX({inputs:{x:e},attrs:{shape:[sv(e.shape)/r,r]},backend:a}),i=HX(s,e.dtype,"max",a),o=BX({inputs:{x:i},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(i),o}(p,m,x,n);return d&&n.disposeIntermediateTensorInfo(p),g}const IJ={kernelName:yb,backendName:"webgl",kernelFunc:TJ},AJ=_X({opSnippet:mX+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+xX+"\n  return result;\n",cpuKernelImpl:bK}),_J={kernelName:bb,backendName:"webgl",kernelFunc:AJ};const OJ={kernelName:wb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;uq(r,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=a;nv(MS(i,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const c=SS(r.shape,s,i,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&iv(c.inShape,c.outShape))return yX({inputs:{x:r},backend:n});const u=new _Y(c,"max",!1);return n.runWebGLProgram(u,[r],r.dtype)}};const RJ={kernelName:Nb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:s,strides:i,pad:o,dataFormat:l,dimRoundingMode:c}=a,u=CS(r.shape,s,i,[1,1,1],o,c,l),d=new OY(u,"max",!1);return n.runWebGLProgram(d,[r],r.dtype)}};class PJ{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,a=e.dilationHeight,r=e.effectiveFilterHeight,s=e.effectiveFilterWidth,i=r-1-e.padInfo.top,o=s-1-e.padInfo.left,l=r*s-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(r,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(s," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class MJ{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.dilationDepth,s=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=o-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=o*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(o,";\n           wD += ").concat(r,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(s,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(i,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const DJ={kernelName:jb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s}=t,i=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=a,d=CS(i.shape,o,l,[1,1,1],c,u),h=new OY(d,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),f=new MJ(d),m=n.runWebGLProgram(f,[r,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};const FJ={kernelName:kb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:s,output:i}=t,o=s;uq([s,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=a,h=SS(o.shape,l,c,1,u,d),p=new _Y(h,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new PJ(h),g=n.runWebGLProgram(m,[r,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}};const LJ={kernelName:Sb,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:l}=n,c=a;nv(4===r.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,"."));const u=[1,1];nv(MS(i,u),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(u,"'"));const d=SS(r.shape,s,i,u,o),[h,p]=function(e,t,n,a){let r=new _Y(n,"max",!1);const s=a.runWebGLProgram(r,[e],"float32");return r=new _Y(n,"max",!0,!0,t),[s,a.runWebGLProgram(r,[e],"float32")]}(r,l,d,c);return[h,p]}};const zJ={kernelName:Cb,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{keepDims:s,axis:i}=n,o=a,l=r.shape.length,c=hv(i,r.shape);let u=c;const d=AC(u,l),h=null!=d,p=o.shouldExecuteOnCPU([r]),f=[];let m=r;if(h){if(p){const e=o.texData.get(m.dataId).values,t=new Array(l);for(let a=0;a<t.length;a++)t[a]=r.shape[d[a]];const n=KK(e,r.shape,r.dtype,d,t);m=o.makeTensorInfo(t,r.dtype);o.texData.get(m.dataId).values=n}else m=KX(r,d,o);f.push(m),u=OC(u.length,l)}IC("sum",u,l);const[g,x]=EC(m.shape,u);let v=g;s&&(v=TC(g,c));const y=function(e,t,n,a){const r=sv(t),s=BX({inputs:{x:e},attrs:{shape:[sv(e.shape)/r,r]},backend:a}),i=HX(s,"float32","mean",a),o=BX({inputs:{x:i},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(i),o}(m,x,v,o);for(const b of f)o.disposeIntermediateTensorInfo(b);return y}};const BJ={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a,o=r.shape.length,l=hv(s,r.shape);let c=l;const u=AC(c,o);let d=r;null!=u&&(d=$X({inputs:{x:r},backend:n,attrs:{perm:u}}),c=OC(c.length,r.shape.length)),IC("min",c,o);const[h,p]=EC(d.shape,c),f=BX({inputs:{x:d},backend:n,attrs:{shape:[-1,sv(p)]}}),m=HX(f,f.dtype,"min",n);let g;if(i){g=BX({inputs:{x:m},backend:n,attrs:{shape:TC(h,l)}})}else g=BX({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}},UJ=_X({opSnippet:mX+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+xX+"\n  return result;\n",cpuKernelImpl:wK}),WJ={kernelName:Tb,backendName:"webgl",kernelFunc:UJ};class VJ{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const a=e.length,r=Tq(a),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===n?0:1;this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(s,");\n      ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(r," coords = outC - start;\n        setOutput(getX(").concat(o,"));\n      }\n    "):"\n        int start = ".concat(s,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class HJ{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const a=e.length,r=Tq(a),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=$K("rc",a),l=$K("source",a),c="".concat(o[a-1]," < ").concat(this.outputShape[a-1]),u=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),d="reflect"===n?0:1;let h="";if(1===a){const e="\n        ".concat(r," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(r," source = rc;\n        ").concat(r," lt = ").concat(r,"(lessThan(source, start));\n        ").concat(r," gte = ").concat(r,"(greaterThanEqual(source, end));\n        ").concat(r," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(o[a-2]," += 1;\n        if(").concat(o[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(o[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(s,");\n      const ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const GJ={kernelName:Ib,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r}=t,{paddings:s,mode:i}=a,o=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HJ(r.shape,s,i):new VJ(r.shape,s,i);return n.runWebGLProgram(o,[r],r.dtype)}},qJ=_X({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+xX+"\n  return result;\n"}),KJ={kernelName:Ab,backendName:"webgl",kernelFunc:qJ};class XJ{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const YJ=_X({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),$J={kernelName:Fy,backendName:"webgl",kernelFunc:YJ},QJ="return a - b;",JJ=_X({opSnippet:QJ,packedOpSnippet:QJ,supportsComplex:!0,cpuKernelImpl:HK}),ZJ={kernelName:Mw,backendName:"webgl",kernelFunc:JJ};function eZ(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:s}=a,i=hv([s],r.shape),o=TJ({inputs:{x:r},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=TC(o.shape,i),c=BX({inputs:{x:o},backend:n,attrs:{shape:l}}),u=JJ({inputs:{a:r,b:c},backend:n}),d=yQ({inputs:{x:u},backend:n}),h=XX({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),p=BX({inputs:{x:h},backend:n,attrs:{shape:l}}),f=YJ({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}const tZ={kernelName:kw,backendName:"webgl",kernelFunc:eZ};const nZ={kernelName:_b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:s,seed:i,normalized:o}=a,l=o?r:eZ({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new XJ(c,u,s),h=[[i]],p=n.runWebGLProgram(d,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),p}},aZ=rX+"\n  return -x;\n";const rZ={kernelName:Rb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])){const e=n.texData.get(a.dataId),[t,r]=NK(e.values,a.shape,a.dtype);return n.makeTensorInfo(r,a.dtype,t)}let r;return r=Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new cX(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new aX(a.shape,aZ),n.runWebGLProgram(r,[a],a.dtype)}},sZ=JE;const iZ={kernelName:Mb,backendName:"webgl",kernelFunc:function(e){Jw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=a,c=n.readSync(r.dataId),u=n.readSync(s.dataId),{selectedIndices:d}=sZ(c,u,i,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},oZ=ZE;const lZ={kernelName:Db,backendName:"webgl",kernelFunc:function(e){Jw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=a,u=n.readSync(r.dataId),d=n.readSync(s.dataId),{selectedIndices:h,validOutputs:p}=oZ(u,d,i,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},cZ=eT;const uZ={kernelName:Fb,backendName:"webgl",kernelFunc:function(e){Jw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=a,u=n.readSync(r.dataId),d=n.readSync(s.dataId),h=i,p=o,f=l,m=c,{selectedIndices:g,selectedScores:x}=cZ(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}};class dZ{constructor(e,t,n,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const hZ={kernelName:zb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:s,depth:i,onValue:o,offValue:l}=a,c=sv(r.shape),u=new dZ(c,i,o,l),d=BX({inputs:{x:r},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],s);n.disposeIntermediateTensorInfo(d);const p=BX({inputs:{x:h},backend:n,attrs:{shape:[...r.shape,i]}});return n.disposeIntermediateTensorInfo(h),p}};function pZ(e){const{inputs:t,backend:n}=e,{x:a}=t;if("complex64"===a.dtype){const e=e$({inputs:{input:a},backend:n}),t=pZ({inputs:{x:e},backend:n}),r=m$({inputs:{input:a},backend:n}),s=pZ({inputs:{x:r},backend:n}),i=wX({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s),i}return AQ({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}const fZ={kernelName:Gw,backendName:"webgl",kernelFunc:pZ};const mZ={kernelName:Lb,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=e$({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),s=m$({inputs:{input:r},backend:a}),i=pZ({inputs:{x:s},backend:a}),o=wX({inputs:{real:n,imag:i},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(i),o}return AQ({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};const gZ={kernelName:Bb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return wQ({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const s=t[0].shape,i=t[0].dtype;t.forEach(e=>{av(s,e.shape,"All tensors passed to stack must have matching shapes"),nv(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(e=>{const t=wQ({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t}),c=v$({inputs:l,backend:n,attrs:{axis:r}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}};class xZ{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const a=e.length,r=Tq(a),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(s,");\n      ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(r," coords = outC - start;\n          setOutput(getX(").concat(o,"));\n        }\n      }\n    "):"\n        int start = ".concat(s,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class vZ{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const a=e.length,r=Tq(a),s=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),o=$K("rc",a),l=$K("source",a),c="".concat(o[a-1]," < ").concat(this.outputShape[a-1]),u=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(r," rc = outputLoc;"),"".concat(o[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(o[a-2]," += 1;\n       if(").concat(o[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(o[a-1]," += 1;\n         if(").concat(c,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===a?2:4;f<m;f++)p+="\n        ".concat(d[f],"\n        if (").concat(h,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(r," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(s,");\n      const ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const yZ=e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:s,constantValue:i}=a;if(0===sv(r.shape)){const e=s.map((e,t)=>e[0]+r.shape[t]+e[1]);return AQ({backend:n,attrs:{shape:e,value:i,dtype:r.dtype}})}const o=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vZ(r.shape,s,i):new xZ(r.shape,s,i),l=[[i]];return n.runWebGLProgram(o,[r],r.dtype,l)},bZ={kernelName:Ub,backendName:"webgl",kernelFunc:yZ},wZ=_X({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+xX+"\n  return result;\n"}),kZ={kernelName:Wb,backendName:"webgl",kernelFunc:wZ};const NZ={kernelName:Hb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:s,keepDims:i}=a,o=r.shape.length,l=[],c=hv(s,r.shape);let u=c;const d=AC(u,o);let h,p=r;if(null!=d&&(p=$X({inputs:{x:r},backend:n,attrs:{perm:d}}),u=OC(u.length,o),l.push(p)),IC("prod",u,o),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:a,outDtype:r}=SK(p.shape,p.dtype,e,u);h=n.makeTensorInfo(a,r,t)}else{const[e,t]=EC(p.shape,u),a=sv(t),s=BX({inputs:{x:p},backend:n,attrs:{shape:[-1,a]}}),i=HX(s,Jk(r.dtype),"prod",n);h=BX({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(s),l.push(i)}if(i){l.push(h);const e=TC(h.shape,c);h=BX({inputs:{x:h},backend:n,attrs:{shape:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}};const jZ={kernelName:Gb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{paramsNestedSplits:r,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:o}=a,l=r.map(e=>n.readSync(e.dataId)),c=r.map(e=>e.shape),u=n.readSync(s.dataId),d=n.readSync(i.dataId),[h,p,f]=CK(l,c,u,s.shape,s.dtype,d,i.shape,o),m=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,s.dtype,p);return m.concat([g])}};const SZ={kernelName:qb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:a,limits:r,deltas:s}=t,i=n.readSync(a.dataId),o=n.readSync(r.dataId),l=n.readSync(s.dataId),[c,u]=EK(i,a.shape,a.dtype,o,r.shape,l,s.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],a.dtype,u)]}};const CZ={kernelName:Kb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{shape:r,values:s,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=a,c=n.readSync(r.dataId),u=n.readSync(s.dataId),d=n.readSync(i.dataId),h=o.map(e=>n.readSync(e.dataId)),p=o.map(e=>e.shape),[f,m]=TK(c,r.shape,u,s.shape,s.dtype,d,i.shape,h,p,l);return n.makeTensorInfo(f,s.dtype,m)}},EZ=e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:s,dtype:i}=n,o=IK(a,r,s,i);return t.makeTensorInfo([o.length],i,o)},TZ={kernelName:Xb,backendName:"webgl",kernelFunc:EZ},IZ=AX({opSnippet:"return 1.0 / x;"}),AZ={kernelName:$b,backendName:"webgl",kernelFunc:IZ},_Z=AX({opSnippet:rX+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),OZ={kernelName:Qb,backendName:"webgl",kernelFunc:_Z},RZ=AX({opSnippet:rX+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),PZ={kernelName:aw,backendName:"webgl",kernelFunc:RZ};class MZ{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const c=[a&&t>1?i-1:i,a&&n>1?o-1:o],u=[a&&t>1?t-1:t,a&&n>1?n-1:n];let d;d=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class DZ{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const c=[a&&t>1?i-1:i,a&&n>1?o-1:o],u=[a&&t>1?t-1:t,a&&n>1?n-1:n];let d;d=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const FZ={kernelName:tw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:s,halfPixelCenters:i,size:o}=a,[l,c]=o,u=Dv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new DZ(r.shape,l,c,s,i):new MZ(r.shape,l,c,s,i);return n.runWebGLProgram(u,[r],"float32")}};class LZ{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,s,i]=e,o=[n&&s>1?a-1:a,n&&i>1?r-1:r],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],c=o[0]/l[0],u=o[1]/l[1],d=1/c,h=1/u,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(s,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(a-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(r-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const zZ={kernelName:nw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:s}=t,{alignCorners:i}=a,o=new LZ(s.shape,r.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}};class BZ{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const c=[a&&t>1?i-1:i,a&&n>1?o-1:o],u=[a&&t>1?t-1:t,a&&n>1?n-1:n],d=a?"0.5":"0.0";let h;h=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class UZ{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const c=[a&&t>1?i-1:i,a&&n>1?o-1:o],u=[a&&t>1?t-1:t,a&&n>1?n-1:n],d=a?"0.5":"0.0";let h;h=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const WZ={kernelName:Zb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:s,halfPixelCenters:i,size:o}=a,[l,c]=o,u=Dv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UZ(r.shape,l,c,s,i):new BZ(r.shape,l,c,s,i);return n.runWebGLProgram(u,[r],r.dtype)}};class VZ{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,s,i]=e,o=[n&&s>1?a-1:a,n&&i>1?r-1:r],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],c=o[0]/l[0],u=o[1]/l[1],d=1/c,h=1/u,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(s,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(o[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(o[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const HZ={kernelName:ew,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:s}=t,{alignCorners:i}=a,o=new VZ(s.shape,r.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}};class GZ{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const a=e.map((n,a)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(a)).join(","),r=Tq(n);this.userCode="\n      void main() {\n        ".concat(r," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}class qZ{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const a=$K("rc",n),r="".concat(a[n-1]," + 1 < ").concat(this.outputShape[n-1]),s="".concat(a[n-2]," + 1 < ").concat(this.outputShape[n-2]),i=Tq(n);function o(n){const a=e.map((a,r)=>function(n,a){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(a[n]," - 1"):"".concat(a[n])}(r,n)),r=a.join(","),s=a.slice(-2).join(",");return"getChannel(getX(".concat(r,"), vec2(").concat(s,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(r,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(i," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return o(e)}(a.slice()),";\n          if(").concat(r,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(a.slice()),";\n          }\n          if(").concat(s,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(a.slice()),";\n            if(").concat(r,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const KZ={kernelName:rw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:s}=a,i=r.shape.length,o=hv(s,r.shape);if(0===i)return yX({inputs:{x:r},backend:n});const l=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qZ(r.shape,o):new GZ(r.shape,o);return n.runWebGLProgram(l,[r],r.dtype)}};class XZ{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],a=e[2];this.outputShape=e;let r="";r="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(r,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const YZ={kernelName:Xw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,{radians:s,fillValue:i,center:o}=n,l=a,c=new XZ(r.shape,i),[u,d]=BT(o,r.shape[1],r.shape[2]),h=[[u,d,Math.sin(s),Math.cos(s)]];return l.runWebGLProgram(c,[r],r.dtype,h)}},$Z=AX({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),QZ={kernelName:sw,backendName:"webgl",kernelFunc:$Z},JZ=AX({opSnippet:"return inversesqrt(x);",cpuKernelImpl:AK}),ZZ={kernelName:iw,backendName:"webgl",kernelFunc:JZ};class e0{constructor(e,t,n,a,r,s){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const o=Tq(r.length),l=Tq(s.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===a?d="i":2===a&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";i&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(o," strides = ").concat(o,"(").concat(r,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class t0{constructor(e,t,n,a,r,s){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const o=Tq(r.length),l=Tq(s.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===a?d="i":2===a&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";i&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(o," strides = ").concat(o,"(").concat(r,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const n0={kernelName:ow,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:s}=t,{shape:i}=a,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=YT(0,r,i),h=[d/c,c];if(0===d)return n.makeTensorInfo(i,r.dtype);const p=BX({inputs:{x:r},backend:n,attrs:{shape:[l,o]}}),f=BX({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=Dv().getBool("WEBGL_PACK")?new t0(l,o,p.shape.length,f.shape.length,u,h):new e0(l,o,p.shape.length,f.shape.length,u,h);const x=n.runWebGLProgram(g,[f,p,m],f.dtype),v=BX({inputs:{x:x},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(m),v}};class a0{constructor(e,t,n,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const r="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),s=2===Dv().getNumber("WEBGL_VERSION")?"while (left < right) {":r,i="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(s,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(i," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const r0={kernelName:cw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:s}=t,{side:i}=a,o=new a0(r.shape[0],r.shape[1],s.shape[1],i),l=[[r.shape[1]]];return n.runWebGLProgram(o,[r,s],"int32",l)}};class s0{constructor(e,t,n){let a,r;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)r="resRC",a="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],i=[];for(let a=0;a<t.length;a++)i.push("".concat(n[a])),a<e&&s.push("".concat(n[a]));a=s.join(),r=i.join()}const s=Tq(n);this.userCode="\n      void main() {\n        ".concat(s," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(r,"));\n        } else {\n          setOutput(getB(").concat(r,"));\n        }\n      }\n    ")}}const i0={kernelName:uw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:s}=t,i=new s0(a.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(i,[a,r,s],Qk(r.dtype,s.dtype))}},o0=AX({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat($T,";\n  float scale = ").concat(QT,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),l0={kernelName:dw,backendName:"webgl",kernelFunc:o0},c0=AX({opSnippet:IX+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:OK}),u0={kernelName:gw,backendName:"webgl",kernelFunc:c0},d0=AX({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),h0={kernelName:mw,backendName:"webgl",kernelFunc:d0},p0=AX({opSnippet:IX+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(xX,"\n  return result;\n")}),f0={kernelName:pw,backendName:"webgl",kernelFunc:p0},m0=AX({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),g0={kernelName:fw,backendName:"webgl",kernelFunc:m0},x0=AX({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),v0={kernelName:xw,backendName:"webgl",kernelFunc:x0},y0={kernelName:bw,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:s,paddings:i}=a;nv(r.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((e,t)=>e*t),l=[[0,0]];l.push(...i);for(let x=1+s.length;x<r.shape.length;++x)l.push([0,0]);const c=[],u=yZ({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),d=UT(u.shape,s,o,!1),h=WT(d.length,s.length,!1),p=VT(u.shape,s,o,!1),f=BX({inputs:{x:u},backend:n,attrs:{shape:d}}),m=$X({inputs:{x:f},backend:n,attrs:{perm:h}}),g=BX({inputs:{x:m},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}};const b0={kernelName:Nw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(s.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(r.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const o=n.readSync(a.dataId),l=n.readSync(r.dataId),c=n.readSync(s.dataId),u=n.readSync(i.dataId)[0],[d,h,p,f,m]=MK(o,a.shape,a.dtype,l,r.dtype,c,u);return[n.makeTensorInfo(h,a.dtype,d),n.makeTensorInfo([h[0]],r.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};const w0={kernelName:jw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:s}=t;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(r.shape));if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(s.shape));const i=Array.from(n.readSync(r.dataId)),o=n.readSync(a.dataId),l=Array.from(n.readSync(s.dataId)),[c,u,d]=DK(o,a.shape,a.dtype,i,l);return[n.makeTensorInfo(u,a.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}};const k0={kernelName:Sw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:s}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(r.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(s.shape));const i=n.readSync(a.dataId),o=n.readSync(r.dataId),l=n.readSync(s.dataId),[c,u]=FK(i,a.shape,a.dtype,o,l,!0);return n.makeTensorInfo(u,a.dtype,c)}};const N0={kernelName:Cw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:s}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(r.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(s.shape));const i=n.readSync(a.dataId),o=n.readSync(r.dataId),l=n.readSync(s.dataId),[c,u]=FK(i,a.shape,a.dtype,o,l);return n.makeTensorInfo(u,a.dtype,c)}};const j0={kernelName:Ew,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:s,defaultValue:i}=t,{outputShape:o}=a,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=YT(0,r,o),p=!1;if("string"===s.dtype){const e=n.bufferSync(r),t=n.bufferSync(s),a=Ek(n.readSync(i.dataId)[0]),f=_K(e,t,o,h,u,c,l,d,a,p);return n.makeTensorInfo(o,f.dtype,f.values)}const f=new e0(c,l,r.shape.length,s.shape.length,d,[h,1],p),m=n.runWebGLProgram(f,[s,r,i],s.dtype),g=BX({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),g}};const S0={kernelName:ww,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:s,axis:i}=a,o=hv(i,r.shape)[0],l=kI(r,s,o),c=r.shape.length,u=new Array(c).fill(0),d=r.shape.slice();return l.map(e=>{const t=[...d];t[o]=e;const a=qY({inputs:{x:r},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,a})}},C0="return sqrt(x);",E0=AX({opSnippet:C0,packedOpSnippet:C0,cpuKernelImpl:LK}),T0={kernelName:vw,backendName:"webgl",kernelFunc:E0},I0={kernelName:Iw,backendName:"webgl",kernelFunc:AX({opSnippet:"return x * x;"})},A0="return (a - b) * (a - b);",_0=_X({opSnippet:A0,packedOpSnippet:A0}),O0={kernelName:Tw,backendName:"webgl",kernelFunc:_0};const R0={kernelName:Aw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;if("string"!==r.dtype)throw new Error("Input must be of datatype string");const s=LI(n.readSync(r.dataId)),i=zK(s,"string",a);return n.makeTensorInfo(r.shape,"string",i)}};const P0={kernelName:qw,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,s=rX+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new aX(r.shape,s);return a.runWebGLProgram(i,[r],r.dtype)}};class M0{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const a=n.length,r=Tq(n.length),s=Tq(n.length);let i="";if(1===a)i="coords * strides + begin";else{let e=0;i=n.map((t,a)=>(e++,1===n.length?"coords * strides[".concat(a,"] + begin[").concat(a,"]"):"coords[".concat(e-1,"] * strides[").concat(a,"] + begin[").concat(a,"]"))).join(",")}this.userCode="\n      ".concat(r," begin = ").concat(r,"(").concat(e,");\n      ").concat(r," strides = ").concat(r,"(").concat(t,");\n\n      void main() {\n        ").concat(s," coords = getOutputCoords();\n        setOutput(getX(").concat(i,"));\n      }\n    ")}}const D0={kernelName:_w,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=a,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:v,end:y,strides:b}=yS(r.shape,s,i,o,l,c,u,d,h);let w;if(m)w=BX({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||x){nv(r.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(r.shape.length));const e=iS(v,y,b),t=qY({inputs:{x:r},backend:n,attrs:{begin:v,size:e}});w=BX({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([r])){const e=n.readSync(r.dataId),t=fj(r.shape,r.dtype,e),a=BK(p,t,b,v);w=n.makeTensorInfo(f,r.dtype,a.values)}else{const e=new M0(v,b,p);w=n.runWebGLProgram(e,[r],r.dtype)}}const k=BX({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const F0={kernelName:Ow,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=a,{data:u,dataSplits:d}=t,h=n.readSync(u.dataId),p=n.readSync(d.dataId),[f,m]=UK(h,p,r,s,i,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const L0={kernelName:Rw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error("Input must be a vector, got shape: ".concat(s.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const o=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[c,u,d]=WK(o,l,r),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const z0={kernelName:Pw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),o=VK(i,r);return n.makeTensorInfo(s.shape,"int32",o)}},B0=AX({opSnippet:"return tan(x);"}),U0={kernelName:Dw,backendName:"webgl",kernelFunc:B0},W0=AX({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),V0={kernelName:Fw,backendName:"webgl",kernelFunc:W0};const H0={kernelName:lw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{tensor:r,indices:s,updates:i}=t,{}=a,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=YT(0,s,r.shape),h=[d/c,c];if(0===d)return n.makeTensorInfo(r.shape,s.dtype);const p=BX({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),f=BX({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=BX({inputs:{x:r},backend:n,attrs:{shape:h}}),g=new e0(l,o,p.shape.length,f.shape.length,u,h,!1,!0),x=n.runWebGLProgram(g,[f,p,m],m.dtype),v=BX({inputs:{x:x},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),v}};class G0{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[s]*t[s];this.outputShape=n,this.rank=n.length;const a=Tq(this.rank),r=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[];for(let r=0;r<e.length;r++)a.push("imod(".concat(n[r],", ").concat(e[r],")"));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        setOutput(getA(").concat(r,"));\n      }\n    ")}}function q0(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:s}=a;if("string"===r.dtype||r.shape.length>5){const e=n.readSync(r.dataId),t="string"===r.dtype?e.map(e=>Ek(e)):e,a=fj(r.shape,r.dtype,t),i=GK(a,s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new G0(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const K0={kernelName:Lw,backendName:"webgl",kernelFunc:q0};class X0{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Y0{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function $0(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Q0(e){let t=1;for(;t<e;)t*=2;return t}const J0={kernelName:zw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:s,sorted:i}=a,o=Dv().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Dv().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=r.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([r])||u<o||s>l){const e=n.readSync(r.dataId),[t,a]=qK(e,c,r.dtype,s,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(a.shape,a.dtype,a.values)]}if(0===s)return c[c.length-1]=0,[n.makeTensorInfo(c,r.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[r,AQ({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(r.dataId),h=null!==d&&d.isPacked,p=h?n.unpackTensor(r):r,f=sv(c)/u,m=BX({inputs:{x:p},attrs:{shape:[f,u]},backend:n});h&&$0(n,p);const g=Q0(s),x=Q0(u);let v=null;const y=()=>null===v?[m,m]:[m,v],b=(e,t,a)=>{const r=y(),s=new X0(a),i=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],o=v;v=n.runWebGLProgram(s,r,"int32",i),$0(n,o)};for(let S=1;S<g;S*=2){const e=2*S;for(let t=S;t>=1;t/=2)b(e,t,[f,x])}for(let S=x;S>g;S/=2){const e=y(),t=new Y0([f,S/2]),a=[[u],[null===v?1:0],[g]],r=v;v=n.runWebGLProgram(t,e,"int32",a),$0(n,r);const s=g/2,i=2*s;for(let n=s;n>=1;n/=2)b(i,n,v.shape)}let w=v;v=qY({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,s]}}),$0(n,w);let k=YQ({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});$0(n,m);const N=c.slice(0,-1);N.push(s),w=v,v=BX({inputs:{x:v},attrs:{shape:N},backend:n}),$0(n,w);const j=k;return k=BX({inputs:{x:k},attrs:{shape:N},backend:n}),$0(n,j),[k,v]}};class Z0{constructor(e,t,n,a,r,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const i="nearest"===n?1:2;let o;switch(a){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(o," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(r,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(r,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(i," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const e1={kernelName:Bw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=a,[u,d,h,p]=r.shape,[f,m]=null!=c?c:[d,h],g=new Z0(d,h,i,o,l,[u,f,m,p]);return n.runWebGLProgram(g,[r,s],"float32")}};const t1={kernelName:Ww,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:s}=t;uq(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=a.readSync(s.dataId),{outputValues:o,outputShape:l,indices:c}=XK(i,r,s.shape,s.dtype);return[a.makeTensorInfo(l,s.dtype,o),a.makeTensorInfo([c.length],"int32",c)]}};const n1={kernelName:Vw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:s}=a;s<0&&(s+=r.shape.length);const i=r,o=i.shape.length,l=r.shape[s],c=new Array(o-1);let u=0;for(let m=0;m<o;m++)m!==s&&(c[u++]=i.shape[m]);const d=[],h=new Array(o).fill(0),p=i.shape.slice();p[s]=1;const f=new Array(l);for(let m=0;m<f.length;m++){h[s]=m;const e=qY({inputs:{x:i},backend:n,attrs:{begin:h,size:p}}),t=BX({inputs:{x:e},backend:n,attrs:{shape:c}});f[m]=t,d.push(e)}return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};class a1{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,a=e.batchSize,r=e.inSize,s=e.numSegments,i=s*Math.ceil(r/n);this.outputShape=[a,i];const o=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";r%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      "));let d="";r%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(s,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(s,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(o,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(o,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const r1={kernelName:Hw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:s}=t,{numSegments:i}=a,o=r.shape.length,l=[];let c=0;const u=AC([c],o);let d=r;null!=u&&(d=$X({inputs:{x:r},backend:n,attrs:{perm:u}}),l.push(d),c=OC(1,o)[0]);const h=DI(d.shape,c,i),p=sv([d.shape[c]]),f=BX({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=Jk(r.dtype),g=(e,t,a,r,s)=>{const i=e.shape[0],o=e.shape[1],c=MI(o,s),u=new a1({windowSize:c,inSize:o,batchSize:i,numSegments:s},t),d=n.compileAndRun(u,[e,a],r);if(l.push(d),d.shape[1]===s)return d;const h=EZ({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),p=q0({inputs:{x:h},backend:n,attrs:{reps:[o/c]}});l.push(h),l.push(p);return g(d,t,p,r,s)},x=BX({inputs:{x:g(f,"unsortedSegmentSum",s,m,i)},backend:n,attrs:{shape:h}});let v=x;if(null!=u){l.push(x);const e=_C(u);v=$X({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},s1=[ZX,tY,aY,sY,lY,dY,hY,pY,yY,bY,kY,jY,CY,TY,AY,RY,PY,FY,LY,zY,WY,XY,YY,$Y,QY,n$,s$,l$,kX,d$,y$,E$,O$,P$,M$,D$,F$,z$,U$,V$,Y$,$$,Q$,Z$,nQ,sQ,iQ,lQ,uQ,dQ,pQ,fQ,gQ,vQ,bQ,kQ,SQ,TQ,_Q,RQ,DQ,LQ,UQ,HQ,GQ,KQ,$Q,JQ,eJ,bX,tJ,g$,aJ,sJ,oJ,SX,cJ,dJ,hJ,fJ,gJ,vJ,bJ,kJ,SJ,EJ,IJ,_J,OJ,RJ,DJ,FJ,LJ,zJ,BJ,WJ,GJ,KJ,nZ,zX,rZ,iZ,lZ,uZ,ZY,hZ,mZ,gZ,bZ,kZ,TX,NZ,jZ,SZ,CZ,TZ,t$,$J,AZ,OZ,PZ,UX,FZ,zZ,WZ,HZ,KZ,YZ,QZ,ZZ,n0,r0,i0,l0,u0,h0,f0,g0,KY,tZ,v0,y0,b0,w0,k0,N0,j0,S0,T0,I0,O0,R0,P0,D0,F0,L0,z0,ZJ,YX,U0,V0,H0,K0,J0,e1,QX,t1,n1,r1,fZ];for(const n of s1)sk(n);const i1=e=>{let{onMoodChange:t,onMoodDetected:n}=e;const a=(0,o.useRef)(null),r=(0,o.useRef)(null),s=(0,o.useRef)(null),i=(0,o.useRef)(null),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)(null),[y,b]=(0,o.useState)(!1),[w,k]=(0,o.useState)({state:"FOCUSED",confidence:98.2,recommendation:"Use detailed analysis view. Execute trades with standard confirmation.",rawExpression:"NEUTRAL"}),[N,j]=(0,o.useState)(0),[S,C]=(0,o.useState)([]);(0,o.useEffect)(()=>((async()=>{try{await cN.ready(),g(!0),console.log("TensorFlow.js ready")}catch(CEe){console.error("TensorFlow initialization error:",CEe),v("Failed to initialize AI model")}})(),()=>{var e,t;i.current&&(null===(e=(t=i.current).dispose)||void 0===e||e.call(t))}),[]);const E=(0,o.useCallback)(async()=>{p(!0),v(null);try{const e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}});a.current&&(a.current.srcObject=e,await a.current.play(),d(!0),c(!0),I())}catch(CEe){console.error("Webcam error:",CEe),v("NotAllowedError"===CEe.name?"Camera access denied. Please allow camera permissions.":"Unable to access camera."),d(!1)}p(!1)},[]),T=(0,o.useCallback)(()=>{if(a.current&&a.current.srcObject){a.current.srcObject.getTracks().forEach(e=>e.stop()),a.current.srcObject=null}s.current&&cancelAnimationFrame(s.current),c(!1),b(!1),j(0)},[]),I=(0,o.useCallback)(()=>{let e=performance.now(),r=0;const i=async()=>{if(!a.current||!l)return;const o=performance.now();r++,o-e>=1e3&&(j(r),r=0,e=o);const c=Math.random()>.1;if(b(c),c){const e=Array.from({length:68},(e,t)=>({x:30+t%10*10+5*Math.random(),y:20+12*Math.floor(t/10)+5*Math.random()}));C(e);const{expression:a,confidence:r}=(e=>{if(!e||e.length<68)return{expression:"NEUTRAL",confidence:.5};const t=Math.random();let n="NEUTRAL",a=.7+.25*Math.random();return t>.85?(n="HAPPY",a=.8+.18*Math.random()):t>.7?(n="FOCUSED",a=.85+.12*Math.random()):t>.6?(n="SURPRISED",a=.75+.2*Math.random()):t>.5&&(n="NEUTRAL",a=.9+.08*Math.random()),{expression:n,confidence:a}})(e),s=((e,t)=>{const n={NEUTRAL:{state:"FOCUSED",recommendation:"Optimal state for analytical trading. Execute with standard confirmation."},HAPPY:{state:"CONFIDENT",recommendation:"Positive outlook detected. Good for strategic decisions."},SAD:{state:"CAUTIOUS",recommendation:"Low energy detected. Consider reducing position sizes."},ANGRY:{state:"STRESSED",recommendation:"Elevated stress. Enable additional trade confirmations."},FEARFUL:{state:"STRESSED",recommendation:"Anxiety detected. Avoid impulsive trades. Take a break."},DISGUSTED:{state:"FATIGUED",recommendation:"Negative sentiment. Review positions before trading."},SURPRISED:{state:"ALERT",recommendation:"Heightened awareness. Good for quick market reactions."}};return m(m({},n[e]||n.NEUTRAL),{},{confidence:100*t,rawExpression:e})})(a,r);k(s),n&&n(s),t&&t(s.state)}s.current=requestAnimationFrame(()=>{setTimeout(i,100)})};i()},[l,t,n]);(0,o.useEffect)(()=>()=>{T()},[T]);const A={FOCUSED:"teal",CONFIDENT:"emerald",STRESSED:"rose",FATIGUED:"amber",CAUTIOUS:"amber",ALERT:"indigo"}[w.state]||"slate";return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"tensorflow-facial-recognition",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Rm,{size:14,className:f?"text-teal-400":"text-slate-600"}),(0,zt.jsxs)("span",{className:"text-xs font-mono text-slate-500",children:["TensorFlow.js ",f?"Ready":"Loading..."]}),N>0&&(0,zt.jsxs)("span",{className:"text-xs font-mono text-teal-400 ml-auto",children:[N," FPS"]})]}),(0,zt.jsxs)(uu.div,{className:"relative aspect-[4/3] max-w-[200px] rounded-xl overflow-hidden border-2 ".concat(y?"border-teal-500/50":"border-white/20"," bg-black/60"),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,zt.jsx)("video",{ref:a,className:"absolute inset-0 w-full h-full object-cover ".concat(l?"":"hidden"),playsInline:!0,muted:!0}),(0,zt.jsx)("canvas",{ref:r,className:"absolute inset-0 w-full h-full pointer-events-none"}),l&&y&&(0,zt.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 200 150",children:[(0,zt.jsx)("ellipse",{cx:"100",cy:"75",rx:"55",ry:"65",fill:"none",stroke:"rgba(20, 184, 166, 0.4)",strokeWidth:"1"}),S.slice(0,30).map((e,t)=>(0,zt.jsx)("circle",{cx:e.x+50,cy:e.y+10,r:"1.5",fill:"rgba(20, 184, 166, 0.6)"},t)),(0,zt.jsx)("ellipse",{cx:"75",cy:"55",rx:"15",ry:"8",fill:"none",stroke:"rgba(20, 184, 166, 0.3)",strokeWidth:"0.5"}),(0,zt.jsx)("ellipse",{cx:"125",cy:"55",rx:"15",ry:"8",fill:"none",stroke:"rgba(20, 184, 166, 0.3)",strokeWidth:"0.5"}),(0,zt.jsx)("path",{d:"M 70 100 Q 100 115 130 100",fill:"none",stroke:"rgba(20, 184, 166, 0.3)",strokeWidth:"0.5"}),(0,zt.jsx)(uu.line,{x1:"45",y1:"10",x2:"155",y2:"10",stroke:"rgba(20, 184, 166, 0.5)",strokeWidth:"2",initial:{y1:10,y2:10},animate:{y1:[10,140,10],y2:[10,140,10]},transition:{duration:2,repeat:1/0,ease:"linear"}})]}),!l&&(0,zt.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-slate-900/80 to-slate-800/80",children:[(0,zt.jsx)(Gx,{size:48,className:"text-slate-600 mb-2"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"AI Vision Ready"})]}),h&&(0,zt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60",children:(0,zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-teal-500 border-t-transparent"})}),l&&y&&(0,zt.jsx)("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:(0,zt.jsxs)("span",{className:"font-mono text-xs text-teal-400",children:[w.confidence.toFixed(0),"%"]})}),l&&y&&(0,zt.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,zt.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded px-2 py-1 text-center",children:(0,zt.jsx)("span",{className:"font-mono text-xs text-white",children:w.rawExpression})})}),(0,zt.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 ".concat(y?"border-teal-500":"border-white/30")}),(0,zt.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 ".concat(y?"border-teal-500":"border-white/30")}),(0,zt.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 ".concat(y?"border-teal-500":"border-white/30")}),(0,zt.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 ".concat(y?"border-teal-500":"border-white/30")})]}),(0,zt.jsxs)(Tx,{onClick:l?T:E,variant:l?"teal":"white",size:"sm",disabled:h||!f,className:"w-full max-w-[200px]","data-testid":"ai-camera-toggle",children:[l?(0,zt.jsx)(qx,{size:16}):(0,zt.jsx)(Kx,{size:16}),l?"Stop AI Vision":"Start AI Vision"]}),x&&(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-rose-400 text-xs max-w-[200px]",children:[(0,zt.jsx)(Xx,{size:14}),(0,zt.jsx)("span",{children:x})]}),(0,zt.jsx)(vx,{accent:A,className:"max-w-[320px]",children:(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"AI Expression:"}),(0,zt.jsx)("span",{className:"font-mono font-semibold text-".concat(A,"-400"),children:w.state})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Confidence:"}),(0,zt.jsxs)("span",{className:"font-mono text-white",children:[w.confidence.toFixed(1),"%"]})]}),(0,zt.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"AI Recommendation:"}),(0,zt.jsx)("p",{className:"text-sm text-slate-300",children:w.recommendation})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-white/5",children:[(0,zt.jsx)(Ox,{variant:y?"active":"default",pulse:y,children:y?"Face Detected":"No Face"}),(0,zt.jsxs)(Ox,{variant:f?"success":"warning",children:[(0,zt.jsx)(Rm,{size:10}),f?"AI Active":"Loading"]})]})]})})]})},o1=Nm("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),l1=Nm("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),c1=Nm("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),u1=Nm("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),d1=e=>{let{onGesture:t}=e;const[n,a]=(0,o.useState)(null),[r,s]=(0,o.useState)("Left Hand"),[i,l]=(0,o.useState)(2),[c,u]=(0,o.useState)(!0),d=[{name:"PINCH",icon:o1,action:"Zoom In",color:"teal"},{name:"SWIPE_LEFT",icon:l1,action:"Previous",color:"indigo"},{name:"SWIPE_RIGHT",icon:Hm,action:"Next",color:"indigo"},{name:"THUMBS_UP",icon:c1,action:"Approve Trade",color:"emerald"},{name:"THUMBS_DOWN",icon:u1,action:"Reject Trade",color:"rose"}];return(0,zt.jsx)("div",{"data-testid":"gesture-recognition-panel",children:(0,zt.jsx)(vx,{title:"Gesture Recognition",icon:"\u270b",accent:"white",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Hand Detected:"}),(0,zt.jsx)(Ox,{variant:"active",pulse:!0,children:r})]}),(0,zt.jsx)(an,{mode:"wait",children:n&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-2",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Last Gesture:"}),(0,zt.jsxs)("span",{className:"font-mono text-sm ".concat("teal"===n.color?"text-teal-400":"emerald"===n.color?"text-emerald-400":"rose"===n.color?"text-rose-400":"text-indigo-400"),children:[n.name.replace("_"," ")," (",i,"s ago)"]})]})},n.name)}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Ready For:"}),(0,zt.jsx)("span",{className:"font-mono text-sm text-slate-300",children:"Swipe / Thumbs"})]}),(0,zt.jsx)("div",{className:"flex gap-2 pt-2 border-t border-white/5",children:d.map(e=>{const r=e.icon;return(0,zt.jsx)(uu.button,{onClick:()=>{a(e),l(0),t&&t(e)},className:"p-2 rounded-lg border transition-all ".concat((null===n||void 0===n?void 0:n.name)===e.name?"bg-teal-500/20 border-teal-500/50 text-teal-400":"bg-white/5 border-white/10 text-slate-500 hover:text-white hover:border-white/20"),whileHover:{scale:1.1},whileTap:{scale:.9},"data-testid":"gesture-btn-".concat(e.name.toLowerCase()),children:(0,zt.jsx)(r,{size:18})},e.name)})})]})})})},h1=Nm("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),p1=Nm("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),f1=Nm("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),m1=Nm("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),g1="".concat("https://tradehub-380.preview.emergentagent.com","/api"),x1=e=>{let{tradeRequest:t,onConsensusComplete:n}=e;const[a,r]=(0,o.useState)([{name:"Data Analyst",vote:null,confidence:0,reasoning:"",status:"idle"},{name:"Risk Manager",vote:null,confidence:0,reasoning:"",status:"idle"},{name:"Strategist",vote:null,confidence:0,reasoning:"",status:"idle"}]),[s,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),u=async()=>{const e=["approve","approve","neutral"],t=["Technical indicators show positive momentum. RSI at 58, MACD bullish crossover.","Position size within risk parameters. Portfolio exposure acceptable at 12%.","Aligned with current market thesis. Sector rotation favors this position."];for(let n=0;n<3;n++)await new Promise(e=>setTimeout(e,700)),r(a=>a.map((a,r)=>r===n?m(m({},a),{},{vote:e[n],confidence:.75+.2*Math.random(),reasoning:t[n],status:"complete"}):a));await new Promise(e=>setTimeout(e,300)),i({decision:"RECOMMEND EXECUTION",confidence:.87})};return(0,zt.jsx)("div",{"data-testid":"agent-consensus-panel",children:(0,zt.jsx)(vx,{title:"Agent Consensus",icon:"\ud83e\udd16",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[a.map((e,t)=>{return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3",children:[(0,zt.jsxs)(Ox,{variant:"approve"===e.vote?"success":"reject"===e.vote?"danger":e.vote?"warning":"default",className:"min-w-[120px] justify-center",children:[(n=e.vote,a=e.status,"thinking"===a?(0,zt.jsx)(h1,{className:"animate-spin text-slate-500",size:18}):"approve"===n?(0,zt.jsx)(p1,{className:"text-emerald-400",size:18}):"reject"===n?(0,zt.jsx)(f1,{className:"text-rose-400",size:18}):"neutral"===n?(0,zt.jsx)(m1,{className:"text-amber-400",size:18}):(0,zt.jsx)("div",{className:"w-[18px] h-[18px] rounded-full border border-slate-600"})),(0,zt.jsx)("span",{className:"ml-1",children:e.name})]}),(0,zt.jsx)("span",{className:"text-sm text-slate-400 flex-1 truncate",children:"thinking"===e.status?"Analyzing...":"approve"===e.vote?"Positive Signal":"reject"===e.vote?"Risk Flagged":"neutral"===e.vote?"Needs Review":"Awaiting..."})]},e.name);var n,a}),(0,zt.jsx)(an,{children:s&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"pt-4 border-t border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-2",children:"Final Consensus:"}),(0,zt.jsx)("p",{className:"font-heading text-lg font-bold uppercase ".concat(s.decision.includes("RECOMMEND")?"text-emerald-400":s.decision.includes("REJECT")?"text-rose-400":"text-amber-400"),children:s.decision}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500 mt-1",children:["Overall Confidence: ",(100*s.confidence).toFixed(0),"%"]})]})}),(0,zt.jsx)(Tx,{onClick:async()=>{c(!0),i(null),r(e=>e.map(e=>m(m({},e),{},{vote:null,confidence:0,reasoning:"",status:"thinking"})));try{const e=(await Mh.post("".concat(g1,"/agents/consensus"),{action:(null===t||void 0===t?void 0:t.action)||"BUY",symbol:(null===t||void 0===t?void 0:t.symbol)||"AAPL",quantity:(null===t||void 0===t?void 0:t.quantity)||1e3,current_price:(null===t||void 0===t?void 0:t.price)||248.5,market_context:"Standard market conditions with moderate volatility"})).data;for(let t=0;t<e.agents.length;t++)await new Promise(e=>setTimeout(e,500)),r(n=>n.map((n,a)=>a===t?m(m({},n),{},{vote:e.agents[t].vote,confidence:e.agents[t].confidence,reasoning:e.agents[t].reasoning,status:"complete"}):n));await new Promise(e=>setTimeout(e,300)),i({decision:e.final_decision,confidence:e.overall_confidence}),n&&n(e)}catch(e){console.error("Consensus error:",e),u()}c(!1)},disabled:l,variant:"teal",className:"w-full mt-4","data-testid":"request-consensus-btn",children:l?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(h1,{className:"animate-spin",size:16}),"Analyzing..."]}):"Request Consensus"})]})})})},v1=Nm("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),y1=Nm("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),b1=Nm("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),w1="".concat("https://tradehub-380.preview.emergentagent.com","/api"),k1=e=>{let{symbol:t="AAPL",action:n="BUY"}=e;const[a,r]=(0,o.useState)(null),[s,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),u=async()=>{i(!0),c(!0);try{const e=await Mh.post("".concat(w1,"/oracle/query"),{query_type:"similar_trades",symbol:t,action:n,context:"Current market conditions"});r(e.data)}catch(e){console.error("Oracle query error:",e),r({similar_instances:5,success_rate:78,avg_pnl:4250,risk_level:"MODERATE",recommendation:"Historical data suggests favorable conditions for this trade.",historical_data:[{date:"2024-11-15",result:"profitable",pnl:3200},{date:"2024-10-22",result:"profitable",pnl:5100},{date:"2024-09-08",result:"loss",pnl:-1200}]})}i(!1)};return(0,zt.jsx)("div",{"data-testid":"oracle-memory-panel",children:(0,zt.jsx)(vx,{title:"Oracle Memory",icon:"\ud83d\udd2e",accent:"indigo",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[!l&&(0,zt.jsxs)(Tx,{onClick:u,variant:"indigo",className:"w-full","data-testid":"query-oracle-btn",children:[(0,zt.jsx)(v1,{size:16}),"Query Historical Data"]}),s&&(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center py-8",children:[(0,zt.jsx)(h1,{className:"animate-spin text-indigo-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400 font-mono",children:"Searching oracle memory..."})]}),(0,zt.jsx)(an,{children:a&&!s&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"Similar Past Situations"}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold text-white",children:[a.similar_instances," ",(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"instances found"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"Historical Success Rate"}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold ".concat(a.success_rate>=70?"text-emerald-400":a.success_rate>=50?"text-amber-400":"text-rose-400"),children:[a.success_rate,"% ",(0,zt.jsx)("span",{className:"text-sm",children:"(profitable)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"Average P&L"}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold ".concat(a.avg_pnl>=0?"text-emerald-400":"text-rose-400"),children:[a.avg_pnl>=0?"+":"","$",a.avg_pnl.toLocaleString()," ",(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"avg gain"})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-white/5",children:[(0,zt.jsx)(y1,{size:14,className:"LOW"===a.risk_level?"text-emerald-400":"MODERATE"===a.risk_level?"text-amber-400":"text-rose-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono uppercase text-slate-500",children:"Risk Level:"}),(0,zt.jsx)("span",{className:"font-mono text-sm ".concat("LOW"===a.risk_level?"text-emerald-400":"MODERATE"===a.risk_level?"text-amber-400":"text-rose-400"),children:a.risk_level})]}),(0,zt.jsxs)(Tx,{onClick:u,variant:"ghost",size:"sm",className:"w-full mt-2","data-testid":"query-oracle-again-btn",children:[(0,zt.jsx)(b1,{size:14}),"Query Again"]})]})})]})})})};var N1=n(7820),j1=n.n(N1),S1=n(7770),C1=n.n(S1);function E1(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),n=Math.round(e*t)/t;return Object.is(n,-0)?0:n}function T1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((e,t,a)=>{var r=n[a-1];return"string"===typeof r?e+r+t:void 0!==r?e+E1(r)+t:e+t},"")}var I1=e=>0===e?0:e>0?1:-1,A1=e=>"number"==typeof e&&e!=+e,_1=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,O1=e=>("number"===typeof e||e instanceof Number)&&!A1(e),R1=e=>O1(e)||"string"===typeof e,P1=0,M1=e=>{var t=++P1;return"".concat(e||"").concat(t)},D1=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!O1(e)&&"string"!==typeof e)return a;if(_1(e)){if(null==t)return a;var s=e.indexOf("%");n=t*parseFloat(e.slice(0,s))/100}else n=+e;return A1(n)&&(n=a),r&&null!=t&&n>t&&(n=t),n},F1=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++){if(n[String(e[a])])return!0;n[String(e[a])]=!0}return!1};function L1(e,t,n){return O1(e)&&O1(t)?E1(e+n*(t-e)):t}function z1(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):C1()(e,t))===n)}var B1=e=>null===e||"undefined"===typeof e,U1=e=>B1(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function W1(e){return null!=e}function V1(){}var H1=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>a[s++]))}},G1=(e,t,n)=>{var{width:a="100%",height:r="100%",aspect:s,maxHeight:i}=n,o=_1(a)?e:Number(a),l=_1(r)?t:Number(r);return s&&s>0&&(o?l=o/s:l&&(o=l*s),i&&null!=l&&l>i&&(l=i)),{calculatedWidth:o,calculatedHeight:l}},q1={width:0,height:0,overflow:"visible"},K1={width:0,overflowX:"visible"},X1={height:0,overflowY:"visible"},Y1={},$1=e=>{var{width:t,height:n}=e,a=_1(t),r=_1(n);return a&&r?q1:a?K1:r?X1:Y1};function Q1(e){return Number.isFinite(e)}function J1(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function Z1(){return Z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Z1.apply(null,arguments)}function e2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function t2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e2(Object(n),!0).forEach(function(t){n2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function n2(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a2=(0,o.createContext)({width:-1,height:-1});function r2(e){var{children:t,width:n,height:a}=e,r=(0,o.useMemo)(()=>({width:n,height:a}),[n,a]);return function(e){return J1(e.width)&&J1(e.height)}(r)?o.createElement(a2.Provider,{value:r},t):null}var s2=()=>(0,o.useContext)(a2),i2=(0,o.forwardRef)((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:r,height:s,minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:f,style:m={}}=e,g=(0,o.useRef)(null),x=(0,o.useRef)();x.current=f,(0,o.useImperativeHandle)(t,()=>g.current);var[v,y]=(0,o.useState)({containerWidth:a.width,containerHeight:a.height}),b=(0,o.useCallback)((e,t)=>{y(n=>{var a=Math.round(e),r=Math.round(t);return n.containerWidth===a&&n.containerHeight===r?n:{containerWidth:a,containerHeight:r}})},[]);(0,o.useEffect)(()=>{if(null==g.current||"undefined"===typeof ResizeObserver)return V1;var e=e=>{var t,{width:n,height:a}=e[0].contentRect;b(n,a),null===(t=x.current)||void 0===t||t.call(x,n,a)};d>0&&(e=j1()(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:a}=g.current.getBoundingClientRect();return b(n,a),t.observe(g.current),()=>{t.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:k}=v;H1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:N,calculatedHeight:j}=G1(w,k,{width:r,height:s,aspect:n,maxHeight:c});return H1(null!=N&&N>0||null!=j&&j>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,j,r,s,i,l,n),o.createElement("div",{id:h?"".concat(h):void 0,className:eg("recharts-responsive-container",p),style:t2(t2({},m),{},{width:r,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:g},o.createElement("div",{style:$1({width:r,height:s})},o.createElement(r2,{width:N,height:j},u)))}),o2=(0,o.forwardRef)((e,t)=>{var n=s2();if(J1(n.width)&&J1(n.height))return e.children;var{width:a,height:r}=function(e){var{width:t,height:n,aspect:a}=e,r=t,s=n;return void 0===r&&void 0===s?(r="100%",s="100%"):void 0===r?r=a&&a>0?void 0:"100%":void 0===s&&(s=a&&a>0?void 0:"100%"),{width:r,height:s}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:i}=G1(void 0,void 0,{width:a,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return O1(s)&&O1(i)?o.createElement(r2,{width:s,height:i},e.children):o.createElement(i2,Z1({},e,{width:a,height:r,ref:t}))}),l2=Symbol.for("immer-nothing"),c2=Symbol.for("immer-draftable"),u2=Symbol.for("immer-state");function d2(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var h2=Object,p2=h2.getPrototypeOf,f2="constructor",m2="prototype",g2="configurable",x2="enumerable",v2="writable",y2="value",b2=e=>!!e&&!!e[u2];function w2(e){var t;return!!e&&(j2(e)||A2(e)||!!e[c2]||!(null===(t=e[f2])||void 0===t||!t[c2])||_2(e)||O2(e))}var k2=h2[m2][f2].toString(),N2=new WeakMap;function j2(e){if(!e||!R2(e))return!1;const t=p2(e);if(null===t||t===h2[m2])return!0;const n=h2.hasOwnProperty.call(t,f2)&&t[f2];if(n===Object)return!0;if(!P2(n))return!1;let a=N2.get(n);return void 0===a&&(a=Function.toString.call(n),N2.set(n,a)),a===k2}function S2(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===C2(e)){(n?Reflect.ownKeys(e):h2.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,a)=>t(a,n,e))}function C2(e){const t=e[u2];return t?t.type_:A2(e)?1:_2(e)?2:O2(e)?3:0}var E2=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:C2(e))?e.has(t):h2[m2].hasOwnProperty.call(e,t)},T2=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:C2(e))?e.get(t):e[t]},I2=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C2(e);2===a?e.set(t,n):3===a?e.add(n):e[t]=n};var A2=Array.isArray,_2=e=>e instanceof Map,O2=e=>e instanceof Set,R2=e=>"object"===typeof e,P2=e=>"function"===typeof e,M2=e=>"boolean"===typeof e;var D2=e=>e.copy_||e.base_,F2=e=>e.modified_?e.copy_:e.base_;function L2(e,t){if(_2(e))return new Map(e);if(O2(e))return new Set(e);if(A2(e))return Array[m2].slice.call(e);const n=j2(e);if(!0===t||"class_only"===t&&!n){const t=h2.getOwnPropertyDescriptors(e);delete t[u2];let n=Reflect.ownKeys(t);for(let a=0;a<n.length;a++){const r=n[a],s=t[r];!1===s[v2]&&(s[v2]=!0,s[g2]=!0),(s.get||s.set)&&(t[r]={[g2]:!0,[v2]:!0,[x2]:s[x2],[y2]:e[r]})}return h2.create(p2(e),t)}{const t=p2(e);if(null!==t&&n)return m({},e);const a=h2.create(t);return h2.assign(a,e)}}function z2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return U2(e)||b2(e)||!w2(e)||(C2(e)>1&&h2.defineProperties(e,{set:B2,add:B2,clear:B2,delete:B2}),h2.freeze(e),t&&S2(e,(e,t)=>{z2(t,!0)},!1)),e}var B2={[y2]:function(){d2(2)}};function U2(e){return null===e||!R2(e)||h2.isFrozen(e)}var W2="MapSet",V2="Patches",H2="ArrayMethods",G2={};function q2(e){const t=G2[e];return t||d2(0),t}var K2,X2=e=>!!G2[e];var Y2=()=>K2;function $2(e,t){t&&(e.patchPlugin_=q2(V2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Q2(e){J2(e),e.drafts_.forEach(e4),e.drafts_=null}function J2(e){e===K2&&(K2=e.parent_)}var Z2=e=>K2={drafts_:[],parent_:K2,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:X2(W2)?q2(W2):void 0,arrayMethodsPlugin_:X2(H2)?q2(H2):void 0};function e4(e){const t=e[u2];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function t4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(void 0!==e&&e!==n){n[u2].modified_&&(Q2(t),d2(4)),w2(e)&&(e=n4(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[u2].base_,e,t)}else e=n4(t,n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&z2(t,n)}(t,e,!0),Q2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==l2?e:void 0}function n4(e,t){if(U2(t))return t;const n=t[u2];if(!n){return l4(t,e.handledSet_,e)}if(!r4(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:t}=n;if(t)for(;t.length>0;){t.pop()(e)}o4(n,e)}return n.copy_}function a4(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var r4=(e,t)=>e.scope_===t,s4=[];function i4(e,t,n,a){var r;const s=D2(e),i=e.type_;if(void 0!==a){if(T2(s,a,i)===t)return void I2(s,a,n,i)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;S2(s,(e,n)=>{if(b2(n)){const a=t.get(n)||[];a.push(e),t.set(n,a)}})}const o=null!==(r=e.draftLocations_.get(t))&&void 0!==r?r:s4;for(const l of o)I2(s,l,n,i)}function o4(e,t){var n,a;if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(null!==(n=null===(a=e.assigned_)||void 0===a?void 0:a.size)&&void 0!==n?n:0)>0)){const{patchPlugin_:n}=t;if(n){const a=n.getPath(e);a&&n.generatePatches_(e,a,t)}a4(e)}}function l4(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||b2(e)||t.has(e)||!w2(e)||U2(e)||(t.add(e),S2(e,(a,r)=>{if(b2(r)){const t=r[u2];if(r4(t,n)){const n=F2(t);I2(e,a,n,e.type_),a4(t)}}else w2(r)&&l4(r,t,n)})),e}var c4={get(e,t){if(t===u2)return e;let n=e.scope_.arrayMethodsPlugin_;const a=1===e.type_&&"string"===typeof t;if(a&&null!==n&&void 0!==n&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const r=D2(e);if(!E2(r,t,e.type_))return function(e,t,n){var a;const r=h4(t,n);return r?y2 in r?r[y2]:null===(a=r.get)||void 0===a?void 0:a.call(e.draft_):void 0}(e,r,t);const s=r[t];if(e.finalized_||!w2(s))return s;if(a&&e.operationMethod&&null!==n&&void 0!==n&&n.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return s;if(s===d4(e.base_,t)){f4(e);const n=1===e.type_?+t:t,a=m4(e.scope_,s,e,n);return e.copy_[n]=a}return s},has:(e,t)=>t in D2(e),ownKeys:e=>Reflect.ownKeys(D2(e)),set(e,t,n){const a=h4(D2(e),t);if(null!==a&&void 0!==a&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const a=d4(D2(e),t),i=null===a||void 0===a?void 0:a[u2];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(((r=n)===(s=a)?0!==r||1/r===1/s:r!==r&&s!==s)&&(void 0!==n||E2(e.base_,t,e.type_)))return!0;f4(e),p4(e)}var r,s;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),function(e,t,n){const{scope_:a}=e;if(b2(n)){const r=n[u2];r4(r,a)&&r.callbacks_.push(function(){f4(e);const a=F2(r);i4(e,n,a,t)})}else w2(n)&&e.callbacks_.push(function(){const r=D2(e);var s;T2(r,t,e.type_)===n&&a.drafts_.length>1&&!0===(null!==(s=e.assigned_.get(t))&&void 0!==s&&s)&&e.copy_&&l4(T2(e.copy_,t,e.type_),a.handledSet_,a)})}(e,t,n)),!0},deleteProperty:(e,t)=>(f4(e),void 0!==d4(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),p4(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=D2(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{[v2]:!0,[g2]:1!==e.type_||"length"!==t,[x2]:a[x2],[y2]:n[t]}:a},defineProperty(){d2(11)},getPrototypeOf:e=>p2(e.base_),setPrototypeOf(){d2(12)}},u4={};function d4(e,t){const n=e[u2];return(n?D2(n):e)[t]}function h4(e,t){if(!(t in e))return;let n=p2(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=p2(n)}}function p4(e){e.modified_||(e.modified_=!0,e.parent_&&p4(e.parent_))}function f4(e){e.copy_||(e.assigned_=new Map,e.copy_=L2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}S2(c4,(e,t)=>{u4[e]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),u4.deleteProperty=function(e,t){return u4.set.call(this,e,t,void 0)},u4.set=function(e,t,n){return c4.set.call(this,e[0],t,n,e[0])};function m4(e,t,n,a){var r,s;const[i,o]=_2(t)?q2(W2).proxyMap_(t,n):O2(t)?q2(W2).proxySet_(t,n):function(e,t){const n=A2(e),a={type_:n?1:0,scope_:t?t.scope_:Y2(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=a,s=c4;n&&(r=[a],s=u4);const{revoke:i,proxy:o}=Proxy.revocable(r,s);return a.draft_=o,a.revoke_=i,[o,a]}(t,n);return(null!==(r=null===n||void 0===n?void 0:n.scope_)&&void 0!==r?r:Y2()).drafts_.push(i),o.callbacks_=null!==(s=null===n||void 0===n?void 0:n.callbacks_)&&void 0!==s?s:[],o.key_=a,n&&void 0!==a?function(e,t,n){e.callbacks_.push(function(a){var r,s;const i=t;if(!i||!r4(i,a))return;null===(r=a.mapSetPlugin_)||void 0===r||r.fixSetContents(i);const o=F2(i);i4(e,null!==(s=i.draft_)&&void 0!==s?s:i,o,n),o4(i,a)})}(n,o,a):o.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(o);const{patchPlugin_:n}=e;o.modified_&&n&&n.generatePatches_(o,[],e)}),i}function g4(e){return b2(e)||d2(10),x4(e)}function x4(e){if(!w2(e)||U2(e))return e;const t=e[u2];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=L2(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=L2(e,!0);return S2(n,(e,t)=>{I2(n,e,x4(t))},a),t&&(t.finalized_=!1),n}var v4=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,n)=>{if(P2(e)&&!P2(t)){const n=t;t=e;const a=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return a.produce(e,e=>t.call(this,e,...s))}}let a;if(P2(t)||d2(6),void 0===n||P2(n)||d2(7),w2(e)){const r=Z2(this),s=m4(r,e,void 0);let i=!0;try{a=t(s),i=!1}finally{i?Q2(r):J2(r)}return $2(r,n),t4(a,r)}if(!e||!R2(e)){if(a=t(e),void 0===a&&(a=e),a===l2&&(a=void 0),this.autoFreeze_&&z2(a,!0),n){const t=[],r=[];q2(V2).generateReplacementPatches_(e,a,{patches_:t,inversePatches_:r}),n(t,r)}return a}d2(1)},this.produceWithPatches=(e,n)=>{if(P2(e))return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];return t.produceWithPatches(n,t=>e(t,...r))};let a,r;const s=this.produce(e,n,(e,t)=>{a=e,r=t});return[s,a,r]},M2(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),M2(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),M2(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){w2(e)||d2(8),b2(e)&&(e=g4(e));const t=Z2(this),n=m4(t,e,void 0);return n[u2].isManual_=!0,J2(t),n}finishDraft(e,t){const n=e&&e[u2];n&&n.isManual_||d2(9);const{scope_:a}=n;return $2(a,t),t4(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}n>-1&&(t=t.slice(n+1));const a=q2(V2).applyPatches_;return b2(e)?a(e,t):this.produce(e,e=>a(e,t))}},y4=v4.produce;function b4(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var w4=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),k4=()=>Math.random().toString(36).substring(7).split("").join("."),N4={INIT:"@@redux/INIT".concat(k4()),REPLACE:"@@redux/REPLACE".concat(k4()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(k4())};function j4(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function S4(e,t,n){if("function"!==typeof e)throw new Error(b4(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(b4(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(b4(1));return n(S4)(e,t)}let a=e,r=t,s=new Map,i=s,o=0,l=!1;function c(){i===s&&(i=new Map,s.forEach((e,t)=>{i.set(t,e)}))}function u(){if(l)throw new Error(b4(3));return r}function d(e){if("function"!==typeof e)throw new Error(b4(4));if(l)throw new Error(b4(5));let t=!0;c();const n=o++;return i.set(n,e),function(){if(t){if(l)throw new Error(b4(6));t=!1,c(),i.delete(n),s=null}}}function h(e){if(!j4(e))throw new Error(b4(7));if("undefined"===typeof e.type)throw new Error(b4(8));if("string"!==typeof e.type)throw new Error(b4(17));if(l)throw new Error(b4(9));try{l=!0,r=a(r,e)}finally{l=!1}return(s=i).forEach(e=>{e()}),e}h({type:N4.INIT});const p={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(b4(10));a=e,h({type:N4.REPLACE})},[w4]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(b4(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[w4](){return this}}}};return p}function C4(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const a=t[s];0,"function"===typeof e[a]&&(n[a]=e[a])}const a=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:N4.INIT}))throw new Error(b4(12));if("undefined"===typeof n(void 0,{type:N4.PROBE_UNKNOWN_ACTION()}))throw new Error(b4(13))})}(n)}catch(jEe){r=jEe}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(r)throw r;let s=!1;const i={};for(let r=0;r<a.length;r++){const o=a[r],l=n[o],c=e[o],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(b4(14))}i[o]=u,s=s||u!==c}return s=s||a.length!==Object.keys(e).length,s?i:e}}function E4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function T4(e){return j4(e)&&"type"in e&&"string"===typeof e.type}function I4(e){return t=>{let{dispatch:n,getState:a}=t;return t=>r=>"function"===typeof r?r(n,a,e):t(r)}}var A4=I4(),_4=I4;const O4=["reducerPath"];var R4="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?E4:E4.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function P4(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(T3(0));return m(m({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>T4(t)&&t.type===e,n}var M4=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function D4(e){return w2(e)?y4(e,()=>{}):e}function F4(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var L4="RTK_autoBatch",z4=()=>e=>({payload:e,meta:{[L4]:!0}}),B4=e=>t=>{setTimeout(t,e)},U4=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let a=!0,r=!1,s=!1;const i=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:B4(10):"callback"===e.type?e.queueNotification:B4(e.timeout),l=()=>{s=!1,r&&(r=!1,i.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>a&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{var t;return a=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[L4]),r=!a,r&&(s||(s=!0,o(l))),n.dispatch(e)}finally{a=!0}}})}};function W4(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:r=!0}=null!==e&&void 0!==e?e:{};let s=new M4;return t&&("boolean"===typeof t?s.push(A4):s.push(_4(t.extraArgument))),s},{reducer:n,middleware:a,devTools:r=!0,duplicateMiddlewareCheck:s=!0,preloadedState:i,enhancers:o}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!j4(n))throw new Error(T3(1));l=C4(n)}c="function"===typeof a?a(t):t();let u=E4;r&&(u=R4(m({trace:!1},"object"===typeof r&&r)));const d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,a)=>{const r=e(n,a);let s=()=>{throw new Error(b4(15))};const i={getState:r.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return s(e,...n)}},o=t.map(e=>e(i));return s=E4(...o)(r.dispatch),m(m({},r),{},{dispatch:s})}}(...c),h=(e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let a=new M4(e);return n&&a.push(U4("object"===typeof n?n:void 0)),a})(d);return S4(l,i,u(..."function"===typeof o?o(h):h()))}function V4(e){const t={},n=[];let a;const r={addCase(e,n){const a="string"===typeof e?e:e.type;if(!a)throw new Error(T3(28));if(a in t)throw new Error(T3(29));return t[a]=n,r},addAsyncThunk:(e,a)=>(a.pending&&(t[e.pending.type]=a.pending),a.rejected&&(t[e.rejected.type]=a.rejected),a.fulfilled&&(t[e.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:e.settled,reducer:a.settled}),r),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(a=e,r)};return e(r),[t,n,a]}var H4=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var G4=Symbol.for("rtk-slice-createasyncthunk");function q4(e,t){return"".concat(e,"/").concat(t)}function K4(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[G4];return function(e){const{name:t,reducerPath:a=t}=e;if(!t)throw new Error(T3(11));const r=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return m({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(r),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(T3(12));if(n in i.sliceCaseReducersByType)throw new Error(T3(13));return i.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],a]="function"===typeof e.extraReducers?V4(e.extraReducers):[e.extraReducers],r=m(m({},t),i.sliceCaseReducersByType);return function(e,t){let n,[a,r,s]=V4(t);if("function"===typeof e)n=()=>D4(e());else{const t=D4(e);n=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,i=[a[t.type],...r.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===i.filter(e=>!!e).length&&(i=[s]),i.reduce((e,n)=>{if(n){if(b2(e)){const a=n(e,t);return void 0===a?e:a}if(w2(e))return y4(e,e=>n(e,t));{const a=n(e,t);if(void 0===a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}}return e},e)}return i.getInitialState=n,i}(e.initialState,e=>{for(let t in r)e.addCase(t,r[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);a&&e.addDefaultCase(a)})}s.forEach(a=>{const s=r[a],i={reducerName:a,type:q4(t,a),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let a,r,{type:s,reducerName:i,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(T3(17));a=t.reducer,r=t.prepare}else a=t;n.addCase(s,a).exposeCaseReducer(i,a).exposeAction(i,r?P4(s,r):P4(s))}(i,s,o):function(e,t,n,a){let{type:r,reducerName:s}=e;if(!a)throw new Error(T3(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=t,h=a(r,i,d);n.exposeAction(s,h),o&&n.addCase(h.fulfilled,o);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);u&&n.addMatcher(h.settled,u);n.exposeCaseReducer(s,{fulfilled:o||$4,pending:l||$4,rejected:c||$4,settled:u||$4})}(i,s,o,n)});const c=e=>e,d=new Map,h=new WeakMap;let p;function f(e,t){return p||(p=l()),p(e,t)}function g(){return p||(p=l()),p.getInitialState()}function x(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function a(e){let r=e[t];return"undefined"===typeof r&&n&&(r=F4(h,a,g)),r}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const a=F4(d,n,()=>new WeakMap);return F4(a,t,()=>{const a={};for(const[s,i]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;a[s]=X4(i,t,()=>F4(h,t,g),n)}return a})}return{reducerPath:t,getSelectors:r,get selectors(){return r(a)},selectSlice:a}}const v=m(m({name:t,reducer:f,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:g},x(a)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,r=u(t,O4);const s=null!==n&&void 0!==n?n:a;return e.inject({reducerPath:s,reducer:f},r),m(m({},v),x(s,!0))}});return v}}function X4(e,t,n,a){function r(r){let s=t(r);"undefined"===typeof s&&a&&(s=n());for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e(s,...o)}return r.unwrapped=e,r}var Y4=K4();function $4(){}var Q4="listener",J4="completed",Z4="cancelled",e3="task-".concat(Z4),t3="task-".concat(J4),n3="".concat(Q4,"-").concat(Z4),a3="".concat(Q4,"-").concat(J4),r3=class{constructor(e){p(this,"name","TaskAbortError"),p(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(Z4," (reason: ").concat(e,")")}},s3=(e,t)=>{if("function"!==typeof e)throw new TypeError(T3(32))},i3=()=>{},o3=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i3;return e.catch(t),e},l3=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),c3=e=>{if(e.aborted)throw new r3(e.reason)};function u3(e,t){let n=i3;return new Promise((a,r)=>{const s=()=>r(new r3(e.reason));e.aborted?s():(n=l3(e,s),t.finally(()=>n()).then(a,r))}).finally(()=>{n=i3})}var d3=e=>t=>o3(u3(e,t).then(t=>(c3(e),t))),h3=e=>{const t=d3(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:p3}=Object,f3={},m3="listenerMiddleware",g3=(e,t)=>(n,a)=>{s3(n);const r=new AbortController;var s;s=r,l3(e,()=>s.abort(e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof r3?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{c3(e),c3(r.signal);const t=await n({pause:d3(r.signal),delay:h3(r.signal),signal:r.signal});return c3(r.signal),t},()=>r.abort(t3));return null!==a&&void 0!==a&&a.autoJoin&&t.push(i.catch(i3)),{result:d3(e)(i),cancel(){r.abort(e3)}}},x3=(e,t)=>(n,a)=>o3((async(n,a)=>{c3(t);let r=()=>{};const s=[new Promise((t,a)=>{let s=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});r=()=>{s(),a()}})];null!=a&&s.push(new Promise(e=>setTimeout(e,a,null)));try{const e=await u3(t,Promise.race(s));return c3(t),e}finally{r()}})(n,a)),v3=e=>{let{type:t,actionCreator:n,matcher:a,predicate:r,effect:s}=e;if(t)r=P4(t).match;else if(n)t=n.type,r=n.match;else if(a)r=a;else if(!r)throw new Error(T3(21));return s3(s),{predicate:r,type:t,effect:s}},y3=p3(e=>{const{type:t,predicate:n,effect:a}=v3(e);return{id:H4(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(T3(22))}}},{withTypes:()=>y3}),b3=(e,t)=>{const{type:n,effect:a,predicate:r}=v3(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===r)&&e.effect===a)},w3=e=>{e.pending.forEach(e=>{e.abort(n3)})},k3=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},N3=p3(P4("".concat(m3,"/add")),{withTypes:()=>N3}),j3=P4("".concat(m3,"/removeAll")),S3=p3(P4("".concat(m3,"/remove")),{withTypes:()=>S3}),C3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(m3,"/error"),...t)},E3=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,n=new Map,{extra:a,onError:r=C3}=e;s3(r);const s=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&w3(e)}))(null!==(n=b3(t,e))&&void 0!==n?n:y3(e))};p3(s,{withTypes:()=>s});const i=e=>{const n=b3(t,e);return n&&(n.unsubscribe(),e.cancelActive&&w3(n)),!!n};p3(i,{withTypes:()=>i});const o=async(e,i,o,l)=>{const c=new AbortController,u=x3(s,c.signal),d=[];try{e.pending.add(c),(e=>{var t;const a=null!==(t=n.get(e))&&void 0!==t?t:0;n.set(e,a+1)})(e),await Promise.resolve(e.effect(i,p3({},o,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:h3(c.signal),pause:d3(c.signal),extra:a,signal:c.signal,fork:g3(c.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==c&&(e.abort(n3),n.delete(e))})},cancel:()=>{c.abort(n3),e.pending.delete(c)},throwIfCancelled:()=>{c3(c.signal)}})))}catch(h){h instanceof r3||k3(r,h,{raisedBy:"effect"})}finally{await Promise.all(d),c.abort(a3),(e=>{var t;const a=null!==(t=n.get(e))&&void 0!==t?t:1;1===a?n.delete(e):n.set(e,a-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())w3(e);e.clear()})(t,n);return{middleware:e=>n=>a=>{if(!T4(a))return n(a);if(N3.match(a))return s(a.payload);if(j3.match(a))return void l();if(S3.match(a))return i(a.payload);let c=e.getState();const u=()=>{if(c===f3)throw new Error(T3(23));return c};let d;try{if(d=n(a),t.size>0){const n=e.getState(),s=Array.from(t.values());for(const t of s){let s=!1;try{s=t.predicate(a,n,c)}catch(h){s=!1,k3(r,h,{raisedBy:"predicate"})}s&&o(t,a,e,u)}}}finally{c=f3}return d},startListening:s,stopListening:i,clearListeners:l}};Symbol.for("rtk-state-proxy-original");function T3(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function I3(e,t){if(t){var n=Number.parseInt(t,10);if(!A1(n))return null===e||void 0===e?void 0:e[n]}}var A3=Y4({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),_3=A3.reducer,{createEventEmitter:O3}=A3.actions;n(7237);function R3(e){e()}var P3={notify(){},get:()=>[]};function M3(e,t){let n,a=P3,r=0,s=!1;function i(){c.onStateChange&&c.onStateChange()}function o(){r++,n||(n=t?t.addNestedSub(i):e.subscribe(i),a=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){R3(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let a=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){a&&null!==e&&(a=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function l(){r--,n&&0===r&&(n(),n=void 0,a.clear(),a=P3)}const c={addNestedSub:function(e){o();const t=a.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:i,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>a};return c}var D3=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),F3=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),L3=(()=>D3||F3?o.useLayoutEffect:o.useEffect)();function z3(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function B3(e,t){if(z3(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!z3(e[n[r]],t[n[r]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var U3=Symbol.for("react-redux-context"),W3="undefined"!==typeof globalThis?globalThis:{};function V3(){var e;if(!o.createContext)return{};const t=null!==(e=W3[U3])&&void 0!==e?e:W3[U3]=new Map;let n=t.get(o.createContext);return n||(n=o.createContext(null),t.set(o.createContext,n)),n}var H3=V3();var G3=function(e){const{children:t,context:n,serverState:a,store:r}=e,s=o.useMemo(()=>{const e=M3(r);return{store:r,subscription:e,getServerState:a?()=>a:void 0}},[r,a]),i=o.useMemo(()=>r.getState(),[r]);L3(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,i]);const l=n||H3;return o.createElement(l.Provider,{value:s},t)};var q3=Symbol.for("immer-nothing"),K3=Symbol.for("immer-draftable"),X3=Symbol.for("immer-state");function Y3(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var $3=Object.getPrototypeOf;function Q3(e){return!!e&&!!e[X3]}function J3(e){var t;return!!e&&(t5(e)||Array.isArray(e)||!!e[K3]||!(null===(t=e.constructor)||void 0===t||!t[K3])||i5(e)||o5(e))}var Z3=Object.prototype.constructor.toString(),e5=new WeakMap;function t5(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!==typeof n)return!1;let a=e5.get(n);return void 0===a&&(a=Function.toString.call(n),e5.set(n,a)),a===Z3}function n5(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===a5(e)){(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,a)=>t(a,n,e))}function a5(e){const t=e[X3];return t?t.type_:Array.isArray(e)?1:i5(e)?2:o5(e)?3:0}function r5(e,t){return 2===a5(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function s5(e,t,n){const a=a5(e);2===a?e.set(t,n):3===a?e.add(n):e[t]=n}function i5(e){return e instanceof Map}function o5(e){return e instanceof Set}function l5(e){return e.copy_||e.base_}function c5(e,t){if(i5(e))return new Map(e);if(o5(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=t5(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[X3];let n=Reflect.ownKeys(t);for(let a=0;a<n.length;a++){const r=n[a],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create($3(e),t)}{const t=$3(e);if(null!==t&&n)return m({},e);const a=Object.create(t);return Object.assign(a,e)}}function u5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h5(e)||Q3(e)||!J3(e)||(a5(e)>1&&Object.defineProperties(e,{set:d5,add:d5,clear:d5,delete:d5}),Object.freeze(e),t&&Object.values(e).forEach(e=>u5(e,!0))),e}var d5={value:function(){Y3(2)}};function h5(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var p5,f5={};function m5(e){const t=f5[e];return t||Y3(0),t}function g5(){return p5}function x5(e,t){t&&(m5("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function v5(e){y5(e),e.drafts_.forEach(w5),e.drafts_=null}function y5(e){e===p5&&(p5=e.parent_)}function b5(e){return p5={drafts_:[],parent_:p5,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function w5(e){const t=e[X3];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function k5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[X3].modified_&&(v5(t),Y3(4)),J3(e)&&(e=N5(t,e),t.parent_||S5(t,e)),t.patches_&&m5("Patches").generateReplacementPatches_(n[X3].base_,e,t.patches_,t.inversePatches_)):e=N5(t,n,[]),v5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==q3?e:void 0}function N5(e,t,n){if(h5(t))return t;const a=e.immer_.shouldUseStrictIteration(),r=t[X3];if(!r)return n5(t,(a,s)=>j5(e,r,t,a,s,n),a),t;if(r.scope_!==e)return t;if(!r.modified_)return S5(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let s=t,i=!1;3===r.type_&&(s=new Set(t),t.clear(),i=!0),n5(s,(a,s)=>j5(e,r,t,a,s,n,i),a),S5(e,t,!1),n&&e.patches_&&m5("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function j5(e,t,n,a,r,s,i){if(null==r)return;if("object"!==typeof r&&!i)return;const o=h5(r);if(!o||i){if(Q3(r)){const i=N5(e,r,s&&t&&3!==t.type_&&!r5(t.assigned_,a)?s.concat(a):void 0);if(s5(n,a,i),!Q3(i))return;e.canAutoFreeze_=!1}else i&&n.add(r);if(J3(r)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[a]===r&&o)return;N5(e,r),t&&t.scope_.parent_||"symbol"===typeof a||!(i5(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))||S5(e,r)}}}function S5(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&u5(t,n)}var C5={get(e,t){if(t===X3)return e;const n=l5(e);if(!r5(n,t))return function(e,t,n){var a;const r=I5(t,n);return r?"value"in r?r.value:null===(a=r.get)||void 0===a?void 0:a.call(e.draft_):void 0}(e,n,t);const a=n[t];return e.finalized_||!J3(a)?a:a===T5(e.base_,t)?(_5(e),e.copy_[t]=O5(a,e)):a},has:(e,t)=>t in l5(e),ownKeys:e=>Reflect.ownKeys(l5(e)),set(e,t,n){const a=I5(l5(e),t);if(null!==a&&void 0!==a&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const a=T5(l5(e),t),i=null===a||void 0===a?void 0:a[X3];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(s=a)?0!==r||1/r===1/s:r!==r&&s!==s)&&(void 0!==n||r5(e.base_,t)))return!0;_5(e),A5(e)}var r,s;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==T5(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,_5(e),A5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=l5(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty(){Y3(11)},getPrototypeOf:e=>$3(e.base_),setPrototypeOf(){Y3(12)}},E5={};function T5(e,t){const n=e[X3];return(n?l5(n):e)[t]}function I5(e,t){if(!(t in e))return;let n=$3(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=$3(n)}}function A5(e){e.modified_||(e.modified_=!0,e.parent_&&A5(e.parent_))}function _5(e){e.copy_||(e.copy_=c5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}n5(C5,(e,t)=>{E5[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),E5.deleteProperty=function(e,t){return E5.set.call(this,e,t,void 0)},E5.set=function(e,t,n){return C5.set.call(this,e[0],t,n,e[0])};function O5(e,t){const n=i5(e)?m5("MapSet").proxyMap_(e,t):o5(e)?m5("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:g5(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=a,s=C5;n&&(r=[a],s=E5);const{revoke:i,proxy:o}=Proxy.revocable(r,s);return a.draft_=o,a.revoke_=i,o}(e,t);return(t?t.scope_:g5()).drafts_.push(n),n}function R5(e){if(!J3(e)||h5(e))return e;const t=e[X3];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=c5(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=c5(e,!0);return n5(n,(e,t)=>{s5(n,e,R5(t))},a),t&&(t.finalized_=!1),n}var P5=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const a=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return a.produce(e,e=>t.call(this,e,...s))}}let a;if("function"!==typeof t&&Y3(6),void 0!==n&&"function"!==typeof n&&Y3(7),J3(e)){const r=b5(this),s=O5(e,void 0);let i=!0;try{a=t(s),i=!1}finally{i?v5(r):y5(r)}return x5(r,n),k5(a,r)}if(!e||"object"!==typeof e){if(a=t(e),void 0===a&&(a=e),a===q3&&(a=void 0),this.autoFreeze_&&u5(a,!0),n){const t=[],r=[];m5("Patches").generateReplacementPatches_(e,a,t,r),n(t,r)}return a}Y3(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];return t.produceWithPatches(n,t=>e(t,...r))};let a,r;const s=this.produce(e,n,(e,t)=>{a=e,r=t});return[s,a,r]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){J3(e)||Y3(8),Q3(e)&&(e=function(e){Q3(e)||Y3(10);return R5(e)}(e));const t=b5(this),n=O5(e,void 0);return n[X3].isManual_=!0,y5(t),n}finishDraft(e,t){const n=e&&e[X3];n&&n.isManual_||Y3(9);const{scope_:a}=n;return x5(a,t),k5(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}n>-1&&(t=t.slice(n+1));const a=m5("Patches").applyPatches_;return Q3(e)?a(e,t):this.produce(e,e=>a(e,t))}};P5.produce;var M5={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},D5=Y4({name:"tooltip",initialState:{itemInteraction:{click:M5,hover:M5},axisInteraction:{click:M5,hover:M5},keyboardInteraction:M5,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:z4()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,r=g4(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=a)},prepare:z4()},removeTooltipEntrySettings:{reducer(e,t){var n=g4(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:z4()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:F5,replaceTooltipEntrySettings:L5,removeTooltipEntrySettings:z5,setTooltipSettingsState:B5,setActiveMouseOverItemIndex:U5,mouseLeaveItem:W5,mouseLeaveChart:V5,setActiveClickItemIndex:H5,setMouseOverAxisIndex:G5,setMouseClickAxisIndex:q5,setSyncInteraction:K5,setKeyboardInteraction:X5}=D5.actions,Y5=D5.reducer,$5=Y4({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;null!=n&&(e.dataStartIndex=n),null!=a&&(e.dataEndIndex=a)}}}),{setChartData:Q5,setDataStartEndIndexes:J5,setComputedData:Z5}=$5.actions,e6=$5.reducer,t6=Y4({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,r,s;e.margin.top=null!==(n=t.payload.top)&&void 0!==n?n:0,e.margin.right=null!==(a=t.payload.right)&&void 0!==a?a:0,e.margin.bottom=null!==(r=t.payload.bottom)&&void 0!==r?r:0,e.margin.left=null!==(s=t.payload.left)&&void 0!==s?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:n6,setLayout:a6,setChartSize:r6,setScale:s6}=t6.actions,i6=t6.reducer;function o6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var l6=e=>Array.isArray(e)?e:[e];function c6(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var u6="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function d6(){return{s:0,v:void 0,o:null,p:null}}function h6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:a}=t;let r,s=0;function i(){let t=n;const{length:i}=arguments;for(let e=0,n=i;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const a=e.get(n);void 0===a?(t=d6(),e.set(n,t)):t=a}else{let e=t.p;null===e&&(t.p=e=new Map);const a=e.get(n);void 0===a?(t=d6(),e.set(n,t)):t=a}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),s++,a){var c,u,d;const e=null!==(c=null===(u=r)||void 0===u||null===(d=u.deref)||void 0===d?void 0:d.call(u))&&void 0!==c?c:r;null!=e&&a(e,l)&&(l=e,0!==s&&s--);r="object"===typeof l&&null!==l||"function"===typeof l?new u6(l):l}return o.s=1,o.v=l,l}return i.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function p6(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const r="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let a,s=0,i=0,o={},l=t.pop();"object"===typeof l&&(o=l,l=t.pop()),o6(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=m(m({},r),o),{memoize:u,memoizeOptions:d=[],argsMemoize:h=h6,argsMemoizeOptions:p=[],devModeChecks:f={}}=c,g=l6(d),x=l6(p),v=c6(t),y=u(function(){return s++,l.apply(null,arguments)},...g);const b=h(function(){i++;const e=function(e,t){const n=[],{length:a}=e;for(let r=0;r<a;r++)n.push(e[r].apply(null,t));return n}(v,arguments);return a=y.apply(null,e),a},...x);return Object.assign(b,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:h})};return Object.assign(s,{withTypes:()=>s}),s}var f6=p6(h6),m6=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f6;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),a=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((e,t,a)=>(e[n[a]]=t,e),{})});return a},{withTypes:()=>m6}),g6=n(8443),x6=(0,o.createContext)(null),v6=e=>e,y6=()=>{var e=(0,o.useContext)(x6);return e?e.store.dispatch:v6},b6=()=>{},w6=()=>b6,k6=(e,t)=>e===t;function N6(e){var t=(0,o.useContext)(x6);return(0,g6.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:w6,t?t.store.getState:b6,t?t.store.getState:b6,t?e:b6,k6)}var j6=n(3821),S6=n.n(j6),C6=e=>e.legend.settings;f6([e=>e.legend.payload,C6],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?S6()(a,n):a});function E6(e,t){if((r=e.length)>1)for(var n,a,r,s=1,i=e[t[0]],o=i.length;s<r;++s)for(a=i,i=e[t[s]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}Array.prototype.slice;function T6(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function I6(e){return function(){return e}}function A6(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _6(e,t){return e[t]}function O6(e){const t=[];return t.key=e,t}function R6(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function P6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function M6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P6(Object(n),!0).forEach(function(t){D6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F6(e,t,n){return B1(e)||B1(t)?n:R1(t)?C1()(e,t,n):"function"===typeof t?t(e):n}var L6=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,z6=1e-4,B6={sign:e=>{var t,n=e.length;if(!(n<=0)){var a=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==a||a<=0))for(var r=0;r<a;++r)for(var s=0,i=0,o=0;o<n;++o){var l=e[o],c=null===l||void 0===l?void 0:l[r];if(null!=c){var u=c[1],d=c[0],h=A1(u)?d:u;h>=0?(c[0]=s,c[1]=s+h,s=u):(c[0]=i,c[1]=i+h,i=u)}}}},expand:function(e,t){if((a=e.length)>0){for(var n,a,r,s=0,i=e[0].length;s<i;++s){for(r=n=0;n<a;++n)r+=e[n][s][1]||0;if(r)for(n=0;n<a;++n)e[n][s][1]/=r}E6(e,t)}},none:E6,silhouette:function(e,t){if((n=e.length)>0){for(var n,a=0,r=e[t[0]],s=r.length;a<s;++a){for(var i=0,o=0;i<n;++i)o+=e[i][a][1]||0;r[a][1]+=r[a][0]=-o/2}E6(e,t)}},wiggle:function(e,t){if((r=e.length)>0&&(a=(n=e[t[0]]).length)>0){for(var n,a,r,s=0,i=1;i<a;++i){for(var o=0,l=0,c=0;o<r;++o){for(var u=e[t[o]],d=u[i][1]||0,h=(d-(u[i-1][1]||0))/2,p=0;p<o;++p){var f=e[t[p]];h+=(f[i][1]||0)-(f[i-1][1]||0)}l+=d,c+=h*d}n[i-1][1]+=n[i-1][0]=s,l&&(s-=c/l)}n[i-1][1]+=n[i-1][0]=s,E6(e,t)}},positive:e=>{var t,n=e.length;if(!(n<=0)){var a=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==a||a<=0))for(var r=0;r<a;++r)for(var s=0,i=0;i<n;++i){var o=e[i],l=null===o||void 0===o?void 0:o[r];if(null!=l){var c=A1(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}}},U6=(e,t,n)=>{var a,r=null!==(a=B6[n])&&void 0!==a?a:E6,s=function(){var e=I6([]),t=A6,n=E6,a=_6;function r(r){var s,i,o=Array.from(e.apply(this,arguments),O6),l=o.length,c=-1;for(const e of r)for(s=0,++c;s<l;++s)(o[s][c]=[0,+a(e,o[s].key,c,r)]).data=e;for(s=0,i=T6(t(o));s<l;++s)o[i[s]].index=s;return n(o,i),o}return r.keys=function(t){return arguments.length?(e="function"===typeof t?t:I6(Array.from(t)),r):e},r.value=function(e){return arguments.length?(a="function"===typeof e?e:I6(+e),r):a},r.order=function(e){return arguments.length?(t=null==e?A6:"function"===typeof e?e:I6(Array.from(e)),r):t},r.offset=function(e){return arguments.length?(n=null==e?E6:e,r):n},r}().keys(t).value((e,t)=>Number(F6(e,t,0))).order(A6).offset(r),i=s(e);return i.forEach((n,a)=>{n.forEach((n,r)=>{var s=F6(e[r],t[a],0);Array.isArray(s)&&2===s.length&&O1(s[0])&&O1(s[1])&&(n[0]=s[0],n[1]=s[1])})}),i};function W6(e){return null==e?void 0:String(e)}function V6(e){var{axis:t,ticks:n,bandSize:a,entry:r,index:s,dataKey:i}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!B1(r[t.dataKey])){var o=z1(n,"value",r[t.dataKey]);if(o)return o.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var l=F6(r,B1(i)?t.dataKey:i);return B1(l)?null:t.scale(l)}var H6=e=>{var{axis:t,ticks:n,offset:a,bandSize:r,entry:s,index:i}=e;if("category"===t.type)return n[i]?n[i].coordinate+a:null;var o=F6(s,t.dataKey,t.scale.domain()[i]);return B1(o)?null:t.scale(o)-r/2+a},G6=(e,t,n)=>{var a;if(null!=e)return a=Object.keys(e).reduce((a,r)=>{var s=e[r];if(!s)return a;var{stackedData:i}=s,o=i.reduce((e,a)=>{var r=(e=>{var t=e.flat(2).filter(O1);return[Math.min(...t),Math.max(...t)]})(R6(a,t,n));return Q1(r[0])&&Q1(r[1])?[Math.min(e[0],r[0]),Math.max(e[1],r[1])]:e},[1/0,-1/0]);return[Math.min(o[0],a[0]),Math.max(o[1],a[1])]},[1/0,-1/0]),[a[0]===1/0?0:a[0],a[1]===-1/0?0:a[1]]},q6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,K6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X6=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var r=S6()(t,e=>e.coordinate),s=1/0,i=1,o=r.length;i<o;i++){var l=r[i],c=r[i-1];s=Math.min(((null===l||void 0===l?void 0:l.coordinate)||0)-((null===c||void 0===c?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function Y6(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:r,name:s}=e;return M6(M6({},t),{},{dataKey:n,payload:a,value:r,name:s})}function $6(e,t){return e?String(e):"string"===typeof t?t:void 0}var Q6=e=>e.layout.width,J6=e=>e.layout.height,Z6=e=>e.layout.scale,e8=e=>e.layout.margin,t8=f6(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),n8=f6(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),a8="data-recharts-item-index",r8="data-recharts-item-id";function s8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s8(Object(n),!0).forEach(function(t){o8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o8(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l8=f6([Q6,J6,e8,e=>e.brush.height,function(e){return n8(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return n8(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return t8(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return t8(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},C6,e=>e.legend.size],(e,t,n,a,r,s,i,o,l,c)=>{var u={left:(n.left||0)+r,right:(n.right||0)+s},d=i8(i8({},{top:(n.top||0)+i,bottom:(n.bottom||0)+o}),u),h=d.bottom;d.bottom+=a,d=((e,t,n)=>{if(t&&n){var{width:a,height:r}=n,{align:s,verticalAlign:i,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===i)&&"center"!==s&&O1(e[s]))return M6(M6({},e),{},{[s]:e[s]+(a||0)});if(("horizontal"===o||"vertical"===o&&"center"===s)&&"middle"!==i&&O1(e[i]))return M6(M6({},e),{},{[i]:e[i]+(r||0)})}return e})(d,l,c);var p=e-d.left-d.right,f=t-d.top-d.bottom;return i8(i8({brushBottom:h},d),{},{width:Math.max(p,0),height:Math.max(f,0)})}),c8=f6(l8,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),u8=f6(Q6,J6,(e,t)=>({x:0,y:0,width:e,height:t})),d8=(0,o.createContext)(null),h8=()=>null!=(0,o.useContext)(d8),p8=e=>e.brush,f8=f6([p8,l8,e8],(e,t,n)=>({height:e.height,x:O1(e.x)?e.x:t.left,y:O1(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:O1(e.width)?e.width:t.width}));function m8(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var g8=()=>{var e,t=h8(),n=N6(c8),a=N6(f8),r=null===(e=N6(p8))||void 0===e?void 0:e.padding;return t&&a&&r?{width:a.width-r.left-r.right,height:a.height-r.top-r.bottom,x:r.left,y:r.top}:n},x8={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},v8=e=>e.layout.layoutType,y8=()=>N6(v8),b8=e=>{var t=y6(),n=h8(),{width:a,height:r}=e,s=s2(),i=a,l=r;return s&&(i=s.width>0?s.width:a,l=s.height>0?s.height:r),(0,o.useEffect)(()=>{!n&&J1(i)&&J1(l)&&t(r6({width:i,height:l}))},[t,n,i,l]),null},w8=n(9859),k8=n.n(w8);function N8(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function j8(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class S8 extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I8;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(C8(this,e))}has(e){return super.has(C8(this,e))}set(e,t){return super.set(E8(this,e),t)}delete(e){return super.delete(T8(this,e))}}Set;function C8(e,t){let{_intern:n,_key:a}=e;const r=a(t);return n.has(r)?n.get(r):t}function E8(e,t){let{_intern:n,_key:a}=e;const r=a(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function T8(e,t){let{_intern:n,_key:a}=e;const r=a(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function I8(e){return null!==e&&"object"===typeof e?e.valueOf():e}const A8=Symbol("implicit");function _8(){var e=new S8,t=[],n=[],a=A8;function r(r){let s=e.get(r);if(void 0===s){if(a!==A8)return a;e.set(r,s=t.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new S8;for(const a of n)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(e){return arguments.length?(n=Array.from(e),r):n.slice()},r.unknown=function(e){return arguments.length?(a=e,r):a},r.copy=function(){return _8(t,n).unknown(a)},N8.apply(r,arguments),r}function O8(){var e,t,n=_8().unknown(void 0),a=n.domain,r=n.range,s=0,i=1,o=!1,l=0,c=0,u=.5;function d(){var n=a().length,d=i<s,h=d?i:s,p=d?s:i;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++a<r;)s[a]=e+a*n;return s}(n).map(function(t){return h+e*t});return r(d?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(a(e),d()):a()},n.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,d()):[s,i]},n.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,d()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return O8(a(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},N8.apply(d(),arguments)}function R8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return R8(t())},e}function P8(){return R8(O8.apply(null,arguments).paddingInner(1))}const M8=Math.sqrt(50),D8=Math.sqrt(10),F8=Math.sqrt(2);function L8(e,t,n){const a=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(a)),s=a/Math.pow(10,r),i=s>=M8?10:s>=D8?5:s>=F8?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?L8(e,t,2*n):[o,l,c]}function z8(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const a=t<e,[r,s,i]=a?L8(t,e,n):L8(e,t,n);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(a)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(r+c)/-i;else for(let c=0;c<o;++c)l[c]=(r+c)*i;return l}function B8(e,t,n){return L8(e=+e,t=+t,n=+n)[2]}function U8(e,t,n){n=+n;const a=(t=+t)<(e=+e),r=a?B8(t,e,n):B8(e,t,n);return(a?-1:1)*(r<0?1/-r:r)}function W8(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function V8(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function H8(e){let t,n,a;function r(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<s){if(0!==t(a,a))return s;do{const t=r+s>>>1;n(e[t],a)<0?r=t+1:s=t}while(r<s)}return r}return 2!==e.length?(t=W8,n=(t,n)=>W8(e(t),n),a=(t,n)=>e(t)-n):(t=e===W8||e===V8?e:G8,n=e,a=e),{left:r,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=r(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>n&&a(e[s-1],t)>-a(e[s],t)?s-1:s},right:function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<s){if(0!==t(a,a))return s;do{const t=r+s>>>1;n(e[t],a)<=0?r=t+1:s=t}while(r<s)}return r}}}function G8(){return 0}function q8(e){return null===e?NaN:+e}const K8=H8(W8),X8=K8.right,Y8=(K8.left,H8(q8).center,X8);function $8(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Q8(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function J8(){}var Z8=.7,e7=1/Z8,t7="\\s*([+-]?\\d+)\\s*",n7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",a7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r7=/^#([0-9a-f]{3,8})$/,s7=new RegExp("^rgb\\(".concat(t7,",").concat(t7,",").concat(t7,"\\)$")),i7=new RegExp("^rgb\\(".concat(a7,",").concat(a7,",").concat(a7,"\\)$")),o7=new RegExp("^rgba\\(".concat(t7,",").concat(t7,",").concat(t7,",").concat(n7,"\\)$")),l7=new RegExp("^rgba\\(".concat(a7,",").concat(a7,",").concat(a7,",").concat(n7,"\\)$")),c7=new RegExp("^hsl\\(".concat(n7,",").concat(a7,",").concat(a7,"\\)$")),u7=new RegExp("^hsla\\(".concat(n7,",").concat(a7,",").concat(a7,",").concat(n7,"\\)$")),d7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function h7(){return this.rgb().formatHex()}function p7(){return this.rgb().formatRgb()}function f7(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=r7.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?m7(t):3===n?new v7(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?g7(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?g7(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=s7.exec(e))?new v7(t[1],t[2],t[3],1):(t=i7.exec(e))?new v7(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=o7.exec(e))?g7(t[1],t[2],t[3],t[4]):(t=l7.exec(e))?g7(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=c7.exec(e))?j7(t[1],t[2]/100,t[3]/100,1):(t=u7.exec(e))?j7(t[1],t[2]/100,t[3]/100,t[4]):d7.hasOwnProperty(e)?m7(d7[e]):"transparent"===e?new v7(NaN,NaN,NaN,0):null}function m7(e){return new v7(e>>16&255,e>>8&255,255&e,1)}function g7(e,t,n,a){return a<=0&&(e=t=n=NaN),new v7(e,t,n,a)}function x7(e,t,n,a){return 1===arguments.length?((r=e)instanceof J8||(r=f7(r)),r?new v7((r=r.rgb()).r,r.g,r.b,r.opacity):new v7):new v7(e,t,n,null==a?1:a);var r}function v7(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function y7(){return"#".concat(N7(this.r)).concat(N7(this.g)).concat(N7(this.b))}function b7(){const e=w7(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(k7(this.r),", ").concat(k7(this.g),", ").concat(k7(this.b)).concat(1===e?")":", ".concat(e,")"))}function w7(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function k7(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function N7(e){return((e=k7(e))<16?"0":"")+e.toString(16)}function j7(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new C7(e,t,n,a)}function S7(e){if(e instanceof C7)return new C7(e.h,e.s,e.l,e.opacity);if(e instanceof J8||(e=f7(e)),!e)return new C7;if(e instanceof C7)return e;var t=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,r=Math.min(t,n,a),s=Math.max(t,n,a),i=NaN,o=s-r,l=(s+r)/2;return o?(i=t===s?(n-a)/o+6*(n<a):n===s?(a-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,i*=60):o=l>0&&l<1?0:i,new C7(i,o,l,e.opacity)}function C7(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function E7(e){return(e=(e||0)%360)<0?e+360:e}function T7(e){return Math.max(0,Math.min(1,e||0))}function I7(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function A7(e,t,n,a,r){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*n+(1+3*e+3*s-3*i)*a+i*r)/6}$8(J8,f7,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:h7,formatHex:h7,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return S7(this).formatHsl()},formatRgb:p7,toString:p7}),$8(v7,x7,Q8(J8,{brighter(e){return e=null==e?e7:Math.pow(e7,e),new v7(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Z8:Math.pow(Z8,e),new v7(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new v7(k7(this.r),k7(this.g),k7(this.b),w7(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:y7,formatHex:y7,formatHex8:function(){return"#".concat(N7(this.r)).concat(N7(this.g)).concat(N7(this.b)).concat(N7(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:b7,toString:b7})),$8(C7,function(e,t,n,a){return 1===arguments.length?S7(e):new C7(e,t,n,null==a?1:a)},Q8(J8,{brighter(e){return e=null==e?e7:Math.pow(e7,e),new C7(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Z8:Math.pow(Z8,e),new C7(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,r=2*n-a;return new v7(I7(e>=240?e-240:e+120,r,a),I7(e,r,a),I7(e<120?e+240:e-120,r,a),this.opacity)},clamp(){return new C7(E7(this.h),T7(this.s),T7(this.l),w7(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=w7(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(E7(this.h),", ").concat(100*T7(this.s),"%, ").concat(100*T7(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const _7=e=>()=>e;function O7(e,t){return function(n){return e+n*t}}function R7(e){return 1===(e=+e)?P7:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}(t,n,e):_7(isNaN(t)?n:t)}}function P7(e,t){var n=t-e;return n?O7(e,n):_7(isNaN(e)?t:e)}const M7=function e(t){var n=R7(t);function a(e,t){var a=n((e=x7(e)).r,(t=x7(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),i=P7(e.opacity,t.opacity);return function(t){return e.r=a(t),e.g=r(t),e.b=s(t),e.opacity=i(t),e+""}}return a.gamma=e,a}(1);function D7(e){return function(t){var n,a,r=t.length,s=new Array(r),i=new Array(r),o=new Array(r);for(n=0;n<r;++n)a=x7(t[n]),s[n]=a.r||0,i[n]=a.g||0,o[n]=a.b||0;return s=e(s),i=e(i),o=e(o),a.opacity=1,function(e){return a.r=s(e),a.g=i(e),a.b=o(e),a+""}}}D7(function(e){var t=e.length-1;return function(n){var a=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[a],s=e[a+1],i=a>0?e[a-1]:2*r-s,o=a<t-1?e[a+2]:2*s-r;return A7((n-a/t)*t,i,r,s,o)}}),D7(function(e){var t=e.length;return function(n){var a=Math.floor(((n%=1)<0?++n:n)*t),r=e[(a+t-1)%t],s=e[a%t],i=e[(a+1)%t],o=e[(a+2)%t];return A7((n-a/t)*t,r,s,i,o)}});function F7(e,t){var n,a=t?t.length:0,r=e?Math.min(a,e.length):0,s=new Array(r),i=new Array(a);for(n=0;n<r;++n)s[n]=G7(e[n],t[n]);for(;n<a;++n)i[n]=t[n];return function(e){for(n=0;n<r;++n)i[n]=s[n](e);return i}}function L7(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function z7(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function B7(e,t){var n,a={},r={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?a[n]=G7(e[n],t[n]):r[n]=t[n];return function(e){for(n in a)r[n]=a[n](e);return r}}var U7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W7=new RegExp(U7.source,"g");function V7(e,t){var n,a,r,s=U7.lastIndex=W7.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(n=U7.exec(e))&&(a=W7.exec(t));)(r=a.index)>s&&(r=t.slice(s,r),o[i]?o[i]+=r:o[++i]=r),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i:i,x:z7(n,a)})),s=W7.lastIndex;return s<t.length&&(r=t.slice(s),o[i]?o[i]+=r:o[++i]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,a=0;a<t;++a)o[(n=l[a]).i]=n.x(e);return o.join("")})}function H7(e,t){t||(t=[]);var n,a=e?Math.min(t.length,e.length):0,r=t.slice();return function(s){for(n=0;n<a;++n)r[n]=e[n]*(1-s)+t[n]*s;return r}}function G7(e,t){var n,a,r=typeof t;return null==t||"boolean"===r?_7(t):("number"===r?z7:"string"===r?(n=f7(t))?(t=n,M7):V7:t instanceof f7?M7:t instanceof Date?L7:(a=t,!ArrayBuffer.isView(a)||a instanceof DataView?Array.isArray(t)?F7:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?B7:z7:H7))(e,t)}function q7(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function K7(e){return+e}var X7=[0,1];function Y7(e){return e}function $7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Q7(e,t,n){var a=e[0],r=e[1],s=t[0],i=t[1];return r<a?(a=$7(r,a),s=n(i,s)):(a=$7(a,r),s=n(s,i)),function(e){return s(a(e))}}function J7(e,t,n){var a=Math.min(e.length,t.length)-1,r=new Array(a),s=new Array(a),i=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<a;)r[i]=$7(e[i],e[i+1]),s[i]=n(t[i],t[i+1]);return function(t){var n=Y8(e,t,1,a)-1;return s[n](r[n](t))}}function Z7(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function e9(){var e,t,n,a,r,s,i=X7,o=X7,l=G7,c=Y7;function u(){var e=Math.min(i.length,o.length);return c!==Y7&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),a=e>2?J7:Q7,r=s=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=a(i.map(e),o,l)))(e(c(t)))}return d.invert=function(n){return c(t((s||(s=a(o,i.map(e),z7)))(n)))},d.domain=function(e){return arguments.length?(i=Array.from(e,K7),u()):i.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=q7,u()},d.clamp=function(e){return arguments.length?(c=!!e||Y7,u()):c!==Y7},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,a){return e=n,t=a,u()}}function t9(){return e9()(Y7,Y7)}var n9,a9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r9(e){if(!(t=a9.exec(e)))throw new Error("invalid format: "+e);var t;return new s9({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function s9(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function i9(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function o9(e){return(e=i9(Math.abs(e)))?e[1]:NaN}function l9(e,t){var n=i9(e,t);if(!n)return e+"";var a=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+a:a.length>r+1?a.slice(0,r+1)+"."+a.slice(r+1):a+new Array(r-a.length+2).join("0")}r9.prototype=s9.prototype,s9.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const c9={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>l9(100*e,t),r:l9,s:function(e,t){var n=i9(e,t);if(!n)return e+"";var a=n[0],r=n[1],s=r-(n9=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,i=a.length;return s===i?a:s>i?a+new Array(s-i+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+i9(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function u9(e){return e}var d9,h9,p9,f9=Array.prototype.map,m9=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function g9(e){var t,n,a=void 0===e.grouping||void 0===e.thousands?u9:(t=f9.call(e.grouping,Number),n=e.thousands+"",function(e,a){for(var r=e.length,s=[],i=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>a&&(o=Math.max(1,a-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>a));)o=t[i=(i+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?u9:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(f9.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=r9(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,x=e.trim,v=e.type;"n"===v?(m=!0,v="g"):c9[v]||(void 0===g&&(g=12),x=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===h?r:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?s:/[%p]/.test(v)?l:"",w=c9[v],k=/[defgprs%]/.test(v);function N(e){var r,s,l,h=y,N=b;if("c"===v)N=w(e)+N,e="";else{var j=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,n=e.length,a=1,r=-1;a<n;++a)switch(e[a]){case".":r=t=a;break;case"0":0===r&&(r=a),t=a;break;default:if(!+e[a])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),j&&0===+e&&"+"!==d&&(j=!1),h=(j?"("===d?d:c:"-"===d||"("===d?"":d)+h,N=("s"===v?m9[8+n9/3]:"")+N+(j&&"("===d?")":""),k)for(r=-1,s=e.length;++r<s;)if(48>(l=e.charCodeAt(r))||l>57){N=(46===l?i+e.slice(r+1):e.slice(r))+N,e=e.slice(0,r);break}}m&&!p&&(e=a(e,1/0));var S=h.length+e.length+N.length,C=S<f?new Array(f-S+1).join(t):"";switch(m&&p&&(e=a(C+e,C.length?f-N.length:1/0),C=""),n){case"<":e=h+e+N+C;break;case"=":e=h+C+e+N;break;case"^":e=C.slice(0,S=C.length>>1)+h+e+N+C.slice(S);break;default:e=C+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:d,formatPrefix:function(e,t){var n=d(((e=r9(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(o9(t)/3))),r=Math.pow(10,-a),s=m9[8+a/3];return function(e){return n(r*e)+s}}}}function x9(e,t,n,a){var r,s=U8(e,t,n);switch((a=r9(null==a?",f":a)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=a.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(o9(t)/3)))-o9(Math.abs(e)))}(s,i))||(a.precision=r),p9(a,i);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,o9(t)-o9(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(a.precision=r-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(r=function(e){return Math.max(0,-o9(Math.abs(e)))}(s))||(a.precision=r-2*("%"===a.type))}return h9(a)}function v9(e){var t=e.domain;return e.ticks=function(e){var n=t();return z8(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var a=t();return x9(a[0],a[a.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var a,r,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],u=10;for(c<l&&(r=l,l=c,c=r,r=i,i=o,o=r);u-- >0;){if((r=B8(l,c,n))===a)return s[i]=l,s[o]=c,t(s);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}a=r}return e},e}function y9(){var e=t9();return e.copy=function(){return Z7(e,y9())},N8.apply(e,arguments),v9(e)}function b9(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,K7),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return b9(e).unknown(t)},e=arguments.length?Array.from(e,K7):[0,1],v9(n)}function w9(e,t){var n,a=0,r=(e=e.slice()).length-1,s=e[a],i=e[r];return i<s&&(n=a,a=r,r=n,n=s,s=i,i=n),e[a]=t.floor(s),e[r]=t.ceil(i),e}function k9(e){return Math.log(e)}function N9(e){return Math.exp(e)}function j9(e){return-Math.log(-e)}function S9(e){return-Math.exp(-e)}function C9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function E9(e){return(t,n)=>-e(-t,n)}function T9(e){const t=e(k9,N9),n=t.domain;let a,r,s=10;function i(){return a=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),r=function(e){return 10===e?C9:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(a=E9(a),r=E9(r),e(j9,S9)):e(k9,N9),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(n(e),i()):n()},t.ticks=e=>{const t=n();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,u,d=a(i),h=a(o);const p=null==e?10:+e;let f=[];if(!(s%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),i>0){for(;d<=h;++d)for(c=1;c<s;++c)if(u=d<0?c/r(-d):c*r(d),!(u<i)){if(u>o)break;f.push(u)}}else for(;d<=h;++d)for(c=s-1;c>=1;--c)if(u=d>0?c/r(-d):c*r(d),!(u<i)){if(u>o)break;f.push(u)}2*f.length<p&&(f=z8(i,o,p))}else f=z8(d,h,Math.min(h-d,p)).map(r);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!==typeof n&&(s%1||null!=(n=r9(n)).precision||(n.trim=!0),n=h9(n)),e===1/0)return n;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/r(Math.round(a(e)));return t*s<s-.5&&(t*=s),t<=i?n(e):""}},t.nice=()=>n(w9(n(),{floor:e=>r(Math.floor(a(e))),ceil:e=>r(Math.ceil(a(e)))})),t}function I9(){const e=T9(e9()).domain([1,10]);return e.copy=()=>Z7(e,I9()).base(e.base()),N8.apply(e,arguments),e}function A9(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _9(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function O9(e){var t=1,n=e(A9(t),_9(t));return n.constant=function(n){return arguments.length?e(A9(t=+n),_9(t)):t},v9(n)}function R9(){var e=O9(e9());return e.copy=function(){return Z7(e,R9()).constant(e.constant())},N8.apply(e,arguments)}function P9(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function M9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function D9(e){return e<0?-e*e:e*e}function F9(e){var t=e(Y7,Y7),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Y7,Y7):.5===n?e(M9,D9):e(P9(n),P9(1/n)):n},v9(t)}function L9(){var e=F9(e9());return e.copy=function(){return Z7(e,L9()).exponent(e.exponent())},N8.apply(e,arguments),e}function z9(){return L9.apply(null,arguments).exponent(.5)}function B9(e){return Math.sign(e)*e*e}function U9(){var e,t=t9(),n=[0,1],a=!1;function r(n){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(r)?e:a?Math.round(r):r}return r.invert=function(e){return t.invert(B9(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain()},r.range=function(e){return arguments.length?(t.range((n=Array.from(e,K7)).map(B9)),r):n.slice()},r.rangeRound=function(e){return r.range(e).round(!0)},r.round=function(e){return arguments.length?(a=!!e,r):a},r.clamp=function(e){return arguments.length?(t.clamp(e),r):t.clamp()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return U9(t.domain(),n).round(a).clamp(t.clamp()).unknown(e)},N8.apply(r,arguments),v9(r)}function W9(e,t){let n;if(void 0===t)for(const a of e)null!=a&&(n<a||void 0===n&&a>=a)&&(n=a);else{let a=-1;for(let r of e)null!=(r=t(r,++a,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function V9(e,t){let n;if(void 0===t)for(const a of e)null!=a&&(n>a||void 0===n&&a>=a)&&(n=a);else{let a=-1;for(let r of e)null!=(r=t(r,++a,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function H9(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W8;if(e===W8)return G9;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||0===a?a:(0===e(n,n))-(0===e(t,t))}}function G9(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function q9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(r=void 0===r?G9:H9(r);a>n;){if(a-n>600){const s=a-n+1,i=t-n+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);q9(e,t,Math.max(n,Math.floor(t-i*l/s+c)),Math.min(a,Math.floor(t+(s-i)*l/s+c)),r)}const s=e[t];let i=n,o=a;for(K9(e,n,t),r(e[a],s)>0&&K9(e,n,a);i<o;){for(K9(e,i,o),++i,--o;r(e[i],s)<0;)++i;for(;r(e[o],s)>0;)--o}0===r(e[n],s)?K9(e,n,o):(++o,K9(e,o,a)),o<=t&&(n=o+1),t<=o&&(a=o-1)}return e}function K9(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function X9(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(a=+a)>=a&&(yield a)}}(e,n)),(a=e.length)&&!isNaN(t=+t)){if(t<=0||a<2)return V9(e);if(t>=1)return W9(e);var a,r=(a-1)*t,s=Math.floor(r),i=W9(q9(e,s).subarray(0,s+1));return i+(V9(e.subarray(s+1))-i)*(r-s)}}function Y9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q8;if((a=e.length)&&!isNaN(t=+t)){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,r=(a-1)*t,s=Math.floor(r),i=+n(e[s],s,e);return i+(+n(e[s+1],s+1,e)-i)*(r-s)}}function $9(){var e,t=[],n=[],a=[];function r(){var e=0,r=Math.max(1,n.length);for(a=new Array(r-1);++e<r;)a[e-1]=Y9(t,e/r);return s}function s(t){return null==t||isNaN(t=+t)?e:n[Y8(a,t)]}return s.invertExtent=function(e){var r=n.indexOf(e);return r<0?[NaN,NaN]:[r>0?a[r-1]:t[0],r<a.length?a[r]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(W8),r()},s.range=function(e){return arguments.length?(n=Array.from(e),r()):n.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return a.slice()},s.copy=function(){return $9().domain(t).range(n).unknown(e)},N8.apply(s,arguments)}function Q9(){var e,t=0,n=1,a=1,r=[.5],s=[0,1];function i(t){return null!=t&&t<=t?s[Y8(r,t,0,a)]:e}function o(){var e=-1;for(r=new Array(a);++e<a;)r[e]=((e+1)*n-(e-a)*t)/(a+1);return i}return i.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,o()):[t,n]},i.range=function(e){return arguments.length?(a=(s=Array.from(e)).length-1,o()):s.slice()},i.invertExtent=function(e){var i=s.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,r[0]]:i>=a?[r[a-1],n]:[r[i-1],r[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return r.slice()},i.copy=function(){return Q9().domain([t,n]).range(s).unknown(e)},N8.apply(v9(i),arguments)}function J9(){var e,t=[.5],n=[0,1],a=1;function r(r){return null!=r&&r<=r?n[Y8(t,r,0,a)]:e}return r.domain=function(e){return arguments.length?(t=Array.from(e),a=Math.min(t.length,n.length-1),r):t.slice()},r.range=function(e){return arguments.length?(n=Array.from(e),a=Math.min(t.length,n.length-1),r):n.slice()},r.invertExtent=function(e){var a=n.indexOf(e);return[t[a-1],t[a]]},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return J9().domain(t).range(n).unknown(e)},N8.apply(r,arguments)}d9=g9({thousands:",",grouping:[3],currency:["$",""]}),h9=d9.format,p9=d9.formatPrefix;const Z9=1e3,eee=6e4,tee=36e5,nee=864e5,aee=6048e5,ree=2592e6,see=31536e6,iee=new Date,oee=new Date;function lee(e,t,n,a){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=t=>(e(t=new Date(+t)),t),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=e=>{const t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),r.range=(n,a,s)=>{const i=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<a)||!(s>0))return i;let o;do{i.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<a);return i},r.filter=n=>lee(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,a)=>{if(e>=e)if(a<0)for(;++a<=0;)for(;t(e,-1),!n(e););else for(;--a>=0;)for(;t(e,1),!n(e););}),n&&(r.count=(t,a)=>(iee.setTime(+t),oee.setTime(+a),e(iee),e(oee),Math.floor(n(iee,oee))),r.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(a?t=>a(t)%e===0:t=>r.count(0,t)%e===0):r:null)),r}const cee=lee(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cee.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?lee(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):cee:null);cee.range;const uee=lee(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Z9)},(e,t)=>(t-e)/Z9,e=>e.getUTCSeconds()),dee=(uee.range,lee(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Z9)},(e,t)=>{e.setTime(+e+t*eee)},(e,t)=>(t-e)/eee,e=>e.getMinutes())),hee=(dee.range,lee(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*eee)},(e,t)=>(t-e)/eee,e=>e.getUTCMinutes())),pee=(hee.range,lee(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Z9-e.getMinutes()*eee)},(e,t)=>{e.setTime(+e+t*tee)},(e,t)=>(t-e)/tee,e=>e.getHours())),fee=(pee.range,lee(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*tee)},(e,t)=>(t-e)/tee,e=>e.getUTCHours())),mee=(fee.range,lee(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eee)/nee,e=>e.getDate()-1)),gee=(mee.range,lee(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nee,e=>e.getUTCDate()-1)),xee=(gee.range,lee(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nee,e=>Math.floor(e/nee)));xee.range;function vee(e){return lee(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eee)/aee)}const yee=vee(0),bee=vee(1),wee=vee(2),kee=vee(3),Nee=vee(4),jee=vee(5),See=vee(6);yee.range,bee.range,wee.range,kee.range,Nee.range,jee.range,See.range;function Cee(e){return lee(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/aee)}const Eee=Cee(0),Tee=Cee(1),Iee=Cee(2),Aee=Cee(3),_ee=Cee(4),Oee=Cee(5),Ree=Cee(6),Pee=(Eee.range,Tee.range,Iee.range,Aee.range,_ee.range,Oee.range,Ree.range,lee(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Mee=(Pee.range,lee(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Dee=(Mee.range,lee(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Dee.every=e=>isFinite(e=Math.floor(e))&&e>0?lee(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;Dee.range;const Fee=lee(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Fee.every=e=>isFinite(e=Math.floor(e))&&e>0?lee(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;Fee.range;function Lee(e,t,n,a,r,s){const i=[[uee,1,Z9],[uee,5,5e3],[uee,15,15e3],[uee,30,3e4],[s,1,eee],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,tee],[r,3,108e5],[r,6,216e5],[r,12,432e5],[a,1,nee],[a,2,1728e5],[n,1,aee],[t,1,ree],[t,3,7776e6],[e,1,see]];function o(t,n,a){const r=Math.abs(n-t)/a,s=H8(e=>{let[,,t]=e;return t}).right(i,r);if(s===i.length)return e.every(U8(t/see,n/see,a));if(0===s)return cee.every(Math.max(U8(t,n,a),1));const[o,l]=i[r/i[s-1][2]<i[s][2]/r?s-1:s];return o.every(l)}return[function(e,t,n){const a=t<e;a&&([e,t]=[t,e]);const r=n&&"function"===typeof n.range?n:o(e,t,n),s=r?r.range(e,+t+1):[];return a?s.reverse():s},o]}const[zee,Bee]=Lee(Fee,Mee,Eee,xee,fee,hee),[Uee,Wee]=Lee(Dee,Pee,yee,mee,pee,dee);function Vee(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hee(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gee(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var qee,Kee,Xee,Yee={"-":"",_:" ",0:"0"},$ee=/^\s*\d+/,Qee=/^%/,Jee=/[\\^$*+?|[\]().{}]/g;function Zee(e,t,n){var a=e<0?"-":"",r=(a?-e:e)+"",s=r.length;return a+(s<n?new Array(n-s+1).join(t)+r:r)}function ete(e){return e.replace(Jee,"\\$&")}function tte(e){return new RegExp("^(?:"+e.map(ete).join("|")+")","i")}function nte(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function ate(e,t,n){var a=$ee.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function rte(e,t,n){var a=$ee.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function ste(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function ite(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function ote(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function lte(e,t,n){var a=$ee.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function cte(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function ute(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function dte(e,t,n){var a=$ee.exec(t.slice(n,n+1));return a?(e.q=3*a[0]-3,n+a[0].length):-1}function hte(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function pte(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function fte(e,t,n){var a=$ee.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function mte(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function gte(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function xte(e,t,n){var a=$ee.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function vte(e,t,n){var a=$ee.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function yte(e,t,n){var a=$ee.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function bte(e,t,n){var a=Qee.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function wte(e,t,n){var a=$ee.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function kte(e,t,n){var a=$ee.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function Nte(e,t){return Zee(e.getDate(),t,2)}function jte(e,t){return Zee(e.getHours(),t,2)}function Ste(e,t){return Zee(e.getHours()%12||12,t,2)}function Cte(e,t){return Zee(1+mee.count(Dee(e),e),t,3)}function Ete(e,t){return Zee(e.getMilliseconds(),t,3)}function Tte(e,t){return Ete(e,t)+"000"}function Ite(e,t){return Zee(e.getMonth()+1,t,2)}function Ate(e,t){return Zee(e.getMinutes(),t,2)}function _te(e,t){return Zee(e.getSeconds(),t,2)}function Ote(e){var t=e.getDay();return 0===t?7:t}function Rte(e,t){return Zee(yee.count(Dee(e)-1,e),t,2)}function Pte(e){var t=e.getDay();return t>=4||0===t?Nee(e):Nee.ceil(e)}function Mte(e,t){return e=Pte(e),Zee(Nee.count(Dee(e),e)+(4===Dee(e).getDay()),t,2)}function Dte(e){return e.getDay()}function Fte(e,t){return Zee(bee.count(Dee(e)-1,e),t,2)}function Lte(e,t){return Zee(e.getFullYear()%100,t,2)}function zte(e,t){return Zee((e=Pte(e)).getFullYear()%100,t,2)}function Bte(e,t){return Zee(e.getFullYear()%1e4,t,4)}function Ute(e,t){var n=e.getDay();return Zee((e=n>=4||0===n?Nee(e):Nee.ceil(e)).getFullYear()%1e4,t,4)}function Wte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zee(t/60|0,"0",2)+Zee(t%60,"0",2)}function Vte(e,t){return Zee(e.getUTCDate(),t,2)}function Hte(e,t){return Zee(e.getUTCHours(),t,2)}function Gte(e,t){return Zee(e.getUTCHours()%12||12,t,2)}function qte(e,t){return Zee(1+gee.count(Fee(e),e),t,3)}function Kte(e,t){return Zee(e.getUTCMilliseconds(),t,3)}function Xte(e,t){return Kte(e,t)+"000"}function Yte(e,t){return Zee(e.getUTCMonth()+1,t,2)}function $te(e,t){return Zee(e.getUTCMinutes(),t,2)}function Qte(e,t){return Zee(e.getUTCSeconds(),t,2)}function Jte(e){var t=e.getUTCDay();return 0===t?7:t}function Zte(e,t){return Zee(Eee.count(Fee(e)-1,e),t,2)}function ene(e){var t=e.getUTCDay();return t>=4||0===t?_ee(e):_ee.ceil(e)}function tne(e,t){return e=ene(e),Zee(_ee.count(Fee(e),e)+(4===Fee(e).getUTCDay()),t,2)}function nne(e){return e.getUTCDay()}function ane(e,t){return Zee(Tee.count(Fee(e)-1,e),t,2)}function rne(e,t){return Zee(e.getUTCFullYear()%100,t,2)}function sne(e,t){return Zee((e=ene(e)).getUTCFullYear()%100,t,2)}function ine(e,t){return Zee(e.getUTCFullYear()%1e4,t,4)}function one(e,t){var n=e.getUTCDay();return Zee((e=n>=4||0===n?_ee(e):_ee.ceil(e)).getUTCFullYear()%1e4,t,4)}function lne(){return"+0000"}function cne(){return"%"}function une(e){return+e}function dne(e){return Math.floor(+e/1e3)}function hne(e){return new Date(e)}function pne(e){return e instanceof Date?+e:+new Date(+e)}function fne(e,t,n,a,r,s,i,o,l,c){var u=t9(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),v=c("%b %d"),y=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?f:i(e)<e?m:s(e)<e?g:a(e)<e?r(e)<e?x:v:n(e)<e?y:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,pne)):h().map(hne)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(w9(n,e)):u},u.copy=function(){return Z7(u,fne(e,t,n,a,r,s,i,o,l,c))},u}function mne(){return N8.apply(fne(Uee,Wee,Dee,Pee,yee,mee,pee,dee,uee,Kee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gne(){return N8.apply(fne(zee,Bee,Fee,Mee,Eee,gee,fee,hee,uee,Xee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xne(){var e,t,n,a,r,s=0,i=1,o=Y7,l=!1;function c(t){return null==t||isNaN(t=+t)?r:o(0===n?.5:(t=(a(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,a;return arguments.length?([n,a]=t,o=e(n,a),c):[o(0),o(1)]}}return c.domain=function(r){return arguments.length?([s,i]=r,e=a(s=+s),t=a(i=+i),n=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(G7),c.rangeRound=u(q7),c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return a=r,e=r(s),t=r(i),n=e===t?0:1/(t-e),c}}function vne(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yne(){var e=v9(xne()(Y7));return e.copy=function(){return vne(e,yne())},j8.apply(e,arguments)}function bne(){var e=T9(xne()).domain([1,10]);return e.copy=function(){return vne(e,bne()).base(e.base())},j8.apply(e,arguments)}function wne(){var e=O9(xne());return e.copy=function(){return vne(e,wne()).constant(e.constant())},j8.apply(e,arguments)}function kne(){var e=F9(xne());return e.copy=function(){return vne(e,kne()).exponent(e.exponent())},j8.apply(e,arguments)}function Nne(){return kne.apply(null,arguments).exponent(.5)}function jne(){var e=[],t=Y7;function n(n){if(null!=n&&!isNaN(n=+n))return t((Y8(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(W8),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,a)=>X9(e,a/t))},n.copy=function(){return jne(t).domain(e)},j8.apply(n,arguments)}function Sne(){var e,t,n,a,r,s,i,o=0,l=.5,c=1,u=1,d=Y7,h=!1;function p(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(u*e<u*t?a:r),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,a,r;return arguments.length?([n,a,r]=t,d=function(e,t){void 0===t&&(t=e,e=G7);for(var n=0,a=t.length-1,r=t[0],s=new Array(a<0?0:a);n<a;)s[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(a-1,Math.floor(e*=a)));return s[t](e-t)}}(e,[n,a,r]),p):[d(0),d(.5),d(1)]}}return p.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),n=s(c=+c),a=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(G7),p.rangeRound=f(q7),p.unknown=function(e){return arguments.length?(i=e,p):i},function(i){return s=i,e=i(o),t=i(l),n=i(c),a=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function Cne(){var e=v9(Sne()(Y7));return e.copy=function(){return vne(e,Cne())},j8.apply(e,arguments)}function Ene(){var e=T9(Sne()).domain([.1,1,10]);return e.copy=function(){return vne(e,Ene()).base(e.base())},j8.apply(e,arguments)}function Tne(){var e=O9(Sne());return e.copy=function(){return vne(e,Tne()).constant(e.constant())},j8.apply(e,arguments)}function Ine(){var e=F9(Sne());return e.copy=function(){return vne(e,Ine()).exponent(e.exponent())},j8.apply(e,arguments)}function Ane(){return Ine.apply(null,arguments).exponent(.5)}!function(e){qee=function(e){var t=e.dateTime,n=e.date,a=e.time,r=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=tte(r),u=nte(r),d=tte(s),h=nte(s),p=tte(i),f=nte(i),m=tte(o),g=nte(o),x=tte(l),v=nte(l),y={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Nte,e:Nte,f:Tte,g:zte,G:Ute,H:jte,I:Ste,j:Cte,L:Ete,m:Ite,M:Ate,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:une,s:dne,S:_te,u:Ote,U:Rte,V:Mte,w:Dte,W:Fte,x:null,X:null,y:Lte,Y:Bte,Z:Wte,"%":cne},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Vte,e:Vte,f:Xte,g:sne,G:one,H:Hte,I:Gte,j:qte,L:Kte,m:Yte,M:$te,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:une,s:dne,S:Qte,u:Jte,U:Zte,V:tne,w:nne,W:ane,x:null,X:null,y:rne,Y:ine,Z:lne,"%":cne},w={a:function(e,t,n){var a=p.exec(t.slice(n));return a?(e.w=f.get(a[0].toLowerCase()),n+a[0].length):-1},A:function(e,t,n){var a=d.exec(t.slice(n));return a?(e.w=h.get(a[0].toLowerCase()),n+a[0].length):-1},b:function(e,t,n){var a=x.exec(t.slice(n));return a?(e.m=v.get(a[0].toLowerCase()),n+a[0].length):-1},B:function(e,t,n){var a=m.exec(t.slice(n));return a?(e.m=g.get(a[0].toLowerCase()),n+a[0].length):-1},c:function(e,n,a){return j(e,t,n,a)},d:pte,e:pte,f:yte,g:cte,G:lte,H:mte,I:mte,j:fte,L:vte,m:hte,M:gte,p:function(e,t,n){var a=c.exec(t.slice(n));return a?(e.p=u.get(a[0].toLowerCase()),n+a[0].length):-1},q:dte,Q:wte,s:kte,S:xte,u:rte,U:ste,V:ite,w:ate,W:ote,x:function(e,t,a){return j(e,n,t,a)},X:function(e,t,n){return j(e,a,t,n)},y:cte,Y:lte,Z:ute,"%":bte};function k(e,t){return function(n){var a,r,s,i=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(r=Yee[a=e.charAt(++o)])?a=e.charAt(++o):r="e"===a?" ":"0",(s=t[a])&&(a=s(n,r)),i.push(a),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(n){var a,r,s=Gee(1900,void 0,1);if(j(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(a=Hee(Gee(s.y,0,1))).getUTCDay(),a=r>4||0===r?Tee.ceil(a):Tee(a),a=gee.offset(a,7*(s.V-1)),s.y=a.getUTCFullYear(),s.m=a.getUTCMonth(),s.d=a.getUTCDate()+(s.w+6)%7):(r=(a=Vee(Gee(s.y,0,1))).getDay(),a=r>4||0===r?bee.ceil(a):bee(a),a=mee.offset(a,7*(s.V-1)),s.y=a.getFullYear(),s.m=a.getMonth(),s.d=a.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Hee(Gee(s.y,0,1)).getUTCDay():Vee(Gee(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Hee(s)):Vee(s)}}function j(e,t,n,a){for(var r,s,i=0,o=t.length,l=n.length;i<o;){if(a>=l)return-1;if(37===(r=t.charCodeAt(i++))){if(r=t.charAt(i++),!(s=w[r in Yee?t.charAt(i++):r])||(a=s(e,n,a))<0)return-1}else if(r!=n.charCodeAt(a++))return-1}return a}return y.x=k(n,y),y.X=k(a,y),y.c=k(t,y),b.x=k(n,b),b.X=k(a,b),b.c=k(t,b),{format:function(e){var t=k(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),Kee=qee.format,qee.parse,Xee=qee.utcFormat,qee.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var _ne=e=>e.chartData,One=f6([_ne],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Rne=(e,t,n,a)=>a?One(e):_ne(e),Pne=(e,t,n)=>n?One(e):_ne(e);function Mne(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(Q1(t)&&Q1(n))return!0}return!1}function Dne(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Fne(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,a,[r,s]=e;if(Q1(r))n=r;else if("function"===typeof r)return;if(Q1(s))a=s;else if("function"===typeof s)return;var i=[n,a];if(Mne(i))return i}}var Lne=n(8210),zne=n.n(Lne),Bne=e=>e,Une={"@@functional/placeholder":!0},Wne=e=>e===Une,Vne=e=>function t(){return 0===arguments.length||1===arguments.length&&Wne(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Hne=(e,t)=>1===e?t:Vne(function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=a.filter(e=>e!==Une).length;return s>=e?t(...a):Hne(e-s,Vne(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=a.map(e=>Wne(e)?n.shift():e);return t(...s,...n)}))}),Gne=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},qne=(e=>Hne(e.length,e))((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e));function Kne(e){return 0===e?1:Math.floor(new(zne())(e).abs().log(10).toNumber())+1}function Xne(e,t,n){for(var a=new(zne())(e),r=0,s=[];a.lt(t)&&r<1e5;)s.push(a.toNumber()),a=a.add(n),r++;return s}var Yne=e=>{var[t,n]=e,[a,r]=[t,n];return t>n&&([a,r]=[n,t]),[a,r]},$ne=(e,t,n)=>{if(e.lte(0))return new(zne())(0);var a=Kne(e.toNumber()),r=new(zne())(10).pow(a),s=e.div(r),i=1!==a?.05:.1,o=new(zne())(Math.ceil(s.div(i).toNumber())).add(n).mul(i).mul(r);return t?new(zne())(o.toNumber()):new(zne())(Math.ceil(o.toNumber()))},Qne=(e,t,n)=>{var a=new(zne())(1),r=new(zne())(e);if(!r.isint()&&n){var s=Math.abs(e);s<1?(a=new(zne())(10).pow(Kne(e)-1),r=new(zne())(Math.floor(r.div(a).toNumber())).mul(a)):s>1&&(r=new(zne())(Math.floor(e)))}else 0===e?r=new(zne())(Math.floor((t-1)/2)):n||(r=new(zne())(Math.floor(e)));var i=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Bne;var a=t.reverse(),r=a[0],s=a.slice(1);return function(){return s.reduce((e,t)=>t(e),r(...arguments))}}(qne(e=>r.add(new(zne())(e-i).mul(a)).toNumber()),Gne);return o(0,t)},Jne=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(zne())(0),tickMin:new(zne())(0),tickMax:new(zne())(0)};var s,i=$ne(new(zne())(t).sub(e).div(n-1),a,r);s=e<=0&&t>=0?new(zne())(0):(s=new(zne())(e).add(t).div(2)).sub(new(zne())(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new(zne())(t).sub(s).div(i).toNumber()),c=o+l+1;return c>n?Jne(e,t,n,a,r+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:i,tickMin:s.sub(new(zne())(o).mul(i)),tickMax:s.add(new(zne())(l).mul(i))})},Zne=e=>e.rootProps.maxBarSize,eae=e=>e.rootProps.barCategoryGap,tae=e=>e.rootProps.stackOffset,nae=e=>e.rootProps.reverseStackOrder,aae=e=>e.options.chartName,rae=e=>e.rootProps.syncId,sae=e=>e.rootProps.syncMethod,iae=e=>e.options.eventEmitter;function oae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function lae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oae(Object(n),!0).forEach(function(t){cae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uae=Math.PI/180,dae=e=>180*e/Math.PI,hae=(e,t,n,a)=>({x:e+Math.cos(-uae*a)*n,y:t+Math.sin(-uae*a)*n}),pae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},fae=(e,t)=>{var{x:n,y:a}=e,{cx:r,cy:s}=t,i=((e,t)=>{var{x:n,y:a}=e,{x:r,y:s}=t;return Math.sqrt((n-r)**2+(a-s)**2)})({x:n,y:a},{x:r,y:s});if(i<=0)return{radius:i,angle:0};var o=(n-r)/i,l=Math.acos(o);return a>s&&(l=2*Math.PI-l),{radius:i,angle:dae(l),angleInRadian:l}},mae=(e,t)=>{var{startAngle:n,endAngle:a}=t,r=Math.floor(n/360),s=Math.floor(a/360);return e+360*Math.min(r,s)},gae=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:r,angle:s}=fae({x:n,y:a},t),{innerRadius:i,outerRadius:o}=t;if(r<i||r>o)return null;if(0===r)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),r=Math.floor(n/360),s=Math.min(a,r);return{startAngle:t-360*s,endAngle:n-360*s}})(t),d=s;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?lae(lae({},t),{},{radius:r,angle:mae(d,t)}):null},xae={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},vae=!0,yae=0,bae=!1,wae="auto",kae=!0,Nae="category",jae=(xae.axis,!1),Sae=!0,Cae=0,Eae="auto",Tae=!0,Iae=5,Aae="number",_ae=(xae.axis,(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t}),Oae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:yae,includeHidden:!1,name:void 0,reversed:bae,scale:wae,tick:kae,tickCount:void 0,ticks:void 0,type:Nae,unit:void 0},Rae={allowDataOverflow:jae,allowDecimals:!1,allowDuplicatedCategory:Sae,dataKey:void 0,domain:void 0,id:Cae,includeHidden:!1,name:void 0,reversed:!1,scale:Eae,tick:Tae,tickCount:Iae,ticks:void 0,type:Aae,unit:void 0},Pae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:vae,dataKey:void 0,domain:void 0,id:yae,includeHidden:!1,name:void 0,reversed:!1,scale:wae,tick:kae,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Mae={allowDataOverflow:jae,allowDecimals:!1,allowDuplicatedCategory:Sae,dataKey:void 0,domain:void 0,id:Cae,includeHidden:!1,name:void 0,reversed:!1,scale:Eae,tick:Tae,tickCount:Iae,ticks:void 0,type:"category",unit:void 0},Dae=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?Pae:Oae,Fae=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?Mae:Rae,Lae=e=>e.polarOptions,zae=f6([Q6,J6,l8],pae),Bae=f6([Lae,zae],(e,t)=>{if(null!=e)return D1(e.innerRadius,t,0)}),Uae=f6([Lae,zae],(e,t)=>{if(null!=e)return D1(e.outerRadius,t,.8*t)}),Wae=f6([Lae],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),Vae=(f6([Dae,Wae],_ae),f6([zae,Bae,Uae],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),Hae=(f6([Fae,Vae],_ae),f6([v8,Lae,Bae,Uae,Q6,J6],(e,t,n,a,r,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=a){var{cx:i,cy:o,startAngle:l,endAngle:c}=t;return{cx:D1(i,r,r/2),cy:D1(o,s,s/2),innerRadius:n,outerRadius:a,startAngle:l,endAngle:c,clockWise:!1}}})),Gae=(e,t)=>t,qae=(e,t,n)=>n;function Kae(e){return null===e||void 0===e?void 0:e.id}function Xae(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:r,dataKey:s}=n,i=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:a;if(null!=n&&0!==n.length){var o=Kae(e);n.forEach((t,n)=>{var a,l=null==s||r?n:String(F6(t,s,null)),c=F6(t,e.dataKey,0);a=i.has(l)?i.get(l):{},Object.assign(a,{[o]:c}),i.set(l,a)})}}),Array.from(i.values())}function Yae(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var $ae=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function Qae(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var Jae=e=>{var t=v8(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},Zae=e=>e.tooltip.settings.axisId;function ere(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ere(Object(n),!0).forEach(function(t){nre(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ere(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nre(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var are=[0,"auto"],rre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sre=(e,t)=>e.cartesianAxis.xAxis[t],ire=(e,t)=>{var n=sre(e,t);return null==n?rre:n},ore={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:are,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},lre=(e,t)=>e.cartesianAxis.yAxis[t],cre=(e,t)=>{var n=lre(e,t);return null==n?ore:n},ure={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},dre=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?ure:n},hre=(e,t,n)=>{switch(t){case"xAxis":return ire(e,n);case"yAxis":return cre(e,n);case"zAxis":return dre(e,n);case"angleAxis":return Dae(e,n);case"radiusAxis":return Fae(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},pre=(e,t,n)=>{switch(t){case"xAxis":return ire(e,n);case"yAxis":return cre(e,n);case"angleAxis":return Dae(e,n);case"radiusAxis":return Fae(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},fre=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function mre(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var gre=e=>e.graphicalItems.cartesianItems,xre=f6([Gae,qae],mre),vre=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),yre=f6([gre,hre,xre],vre,{memoizeOptions:{resultEqualityCheck:Qae}}),bre=f6([yre],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(Yae)),wre=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),kre=f6([yre],wre),Nre=e=>e.map(e=>e.data).filter(Boolean).flat(1),jre=f6([yre],Nre,{memoizeOptions:{resultEqualityCheck:Qae}}),Sre=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:r}=t;return e.length>0?e:n.slice(a,r+1)},Cre=f6([jre,Rne],Sre),Ere=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:F6(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:F6(e,t)}))):e.map(e=>({value:e})),Tre=f6([Cre,hre,yre],Ere);function Ire(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Are(e){if(R1(e)||e instanceof Date){var t=Number(e);if(Q1(t))return t}}function _re(e){if(Array.isArray(e)){var t=[Are(e[0]),Are(e[1])];return Mne(t)?t:void 0}var n=Are(e);if(null!=n)return[n,n]}function Ore(e){return e.map(Are).filter(W1)}var Rre=e=>{var t=Jae(e),n=Zae(e);return pre(e,t,n)},Pre=f6([Rre],e=>null===e||void 0===e?void 0:e.dataKey),Mre=f6([bre,Rne,Rre],Xae),Dre=(e,t,n,a)=>{var r=t.reduce((e,t)=>{if(null==t.stackId)return e;var n=e[t.stackId];return null==n&&(n=[]),n.push(t),e[t.stackId]=n,e},{});return Object.fromEntries(Object.entries(r).map(t=>{var[r,s]=t,i=a?[...s].reverse():s,o=i.map(Kae);return[r,{stackedData:U6(e,o,n),graphicalItems:i}]}))},Fre=f6([Mre,bre,tae,nae],Dre),Lre=(e,t,n,a)=>{var{dataStartIndex:r,dataEndIndex:s}=t;if(null==a&&"zAxis"!==n){var i=G6(e,r,s);if(null==i||0!==i[0]||0!==i[1])return i}},zre=f6([hre],e=>e.allowDataOverflow),Bre=e=>{var t;if(null==e||!("domain"in e))return are;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var n=Ore(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:are},Ure=f6([hre],Bre),Wre=f6([Ure,zre],Fne),Vre=f6([Fre,_ne,Gae,Wre],Lre,{memoizeOptions:{resultEqualityCheck:$ae}}),Hre=e=>e.errorBars,Gre=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.filter(Boolean);if(0!==a.length){var r=a.flat();return[Math.min(...r),Math.max(...r)]}},qre=(e,t,n,a,r)=>{var s,i;if(n.length>0&&e.forEach(e=>{n.forEach(n=>{var o,l,c=null===(o=a[n.id])||void 0===o?void 0:o.filter(e=>Ire(r,e)),u=F6(e,null!==(l=t.dataKey)&&void 0!==l?l:n.dataKey),d=function(e,t,n){return!n||"number"!==typeof t||A1(t)?[]:n.length?Ore(n.flatMap(n=>{var a,r,s=F6(e,n.dataKey);if(Array.isArray(s)?[a,r]=s:a=r=s,Q1(a)&&Q1(r))return[t-a,t+r]})):[]}(e,u,c);if(d.length>=2){var h=Math.min(...d),p=Math.max(...d);(null==s||h<s)&&(s=h),(null==i||p>i)&&(i=p)}var f=_re(u);null!=f&&(s=null==s?f[0]:Math.min(s,f[0]),i=null==i?f[1]:Math.max(i,f[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var n=_re(F6(e,t.dataKey));null!=n&&(s=null==s?n[0]:Math.min(s,n[0]),i=null==i?n[1]:Math.max(i,n[1]))}),Q1(s)&&Q1(i))return[s,i]},Kre=f6([Cre,hre,kre,Hre,Gae],qre,{memoizeOptions:{resultEqualityCheck:$ae}});function Xre(e){var{value:t}=e;if(R1(t)||t instanceof Date)return t}var Yre=e=>e.referenceElements.dots,$re=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),Qre=f6([Yre,Gae,qae],$re),Jre=e=>e.referenceElements.areas,Zre=f6([Jre,Gae,qae],$re),ese=e=>e.referenceElements.lines,tse=f6([ese,Gae,qae],$re),nse=(e,t)=>{if(null!=e){var n=Ore(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},ase=f6(Qre,Gae,nse),rse=(e,t)=>{if(null!=e){var n=Ore(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},sse=f6([Zre,Gae],rse);var ise=(e,t)=>{if(null!=e){var n=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return Ore([e.x]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==n||0===n.length?[]:Ore(n)}(e):function(e){var t;if(null!=e.y)return Ore([e.y]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==n||0===n.length?[]:Ore(n)}(e));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},ose=f6([tse,Gae],ise),lse=f6(ase,ose,sse,(e,t,n)=>Gre(e,n,t)),cse=(e,t,n,a,r,s,i,o)=>null!=n?n:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var a=e(t,n);if(Mne(a))return Dne(a,t,n)}catch(SEe){}if(Array.isArray(e)&&2===e.length){var r,s,[i,o]=e;if("auto"===i)null!=t&&(r=Math.min(...t));else if(O1(i))r=i;else if("function"===typeof i)try{null!=t&&(r=i(null===t||void 0===t?void 0:t[0]))}catch(p){}else if("string"===typeof i&&q6.test(i)){var l=q6.exec(i);if(null==l||null==l[1]||null==t)r=void 0;else{var c=+l[1];r=t[0]-c}}else r=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(s=Math.max(...t));else if(O1(o))s=o;else if("function"===typeof o)try{null!=t&&(s=o(null===t||void 0===t?void 0:t[1]))}catch(f){}else if("string"===typeof o&&K6.test(o)){var u=K6.exec(o);if(null==u||null==u[1]||null==t)s=void 0;else{var d=+u[1];s=t[1]+d}}else s=null===t||void 0===t?void 0:t[1];var h=[r,s];if(Mne(h))return null==t?h:Dne(h,t,n)}}}(t,"vertical"===i&&"xAxis"===o||"horizontal"===i&&"yAxis"===o?Gre(a,s,r):Gre(s,r),e.allowDataOverflow),use=f6([hre,Ure,Wre,Vre,Kre,lse,v8,Gae],cse,{memoizeOptions:{resultEqualityCheck:$ae}}),dse=[0,1],hse=(e,t,n,a,r,s,i)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==i){var o,{dataKey:l,type:c}=e,u=L6(t,s);return u&&null==l?k8()(0,null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0):"category"===c?((e,t,n)=>{var a=e.map(Xre).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&F1(a))?k8()(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))})(a,e,u):"expand"===r?dse:i}},pse=f6([hre,v8,Cre,Tre,tae,Gae,use],hse),fse=(e,t,n,a,r)=>{if(null!=e){var{scale:s,type:o}=e;if("auto"===s)return"radial"===t&&"radiusAxis"===r?"band":"radial"===t&&"angleAxis"===r?"linear":"category"===o&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":"category"===o?"band":"linear";if("string"===typeof s){var l="scale".concat(U1(s));return l in i?l:"point"}}},mse=f6([hre,v8,fre,aae,Gae],fse);function gse(e,t,n,a){if(null!=n&&null!=a){if("function"===typeof e.scale)return e.scale.copy().domain(n).range(a);var r=function(e){if(null!=e){if(e in i)return i[e]();var t="scale".concat(U1(e));return t in i?i[t]():void 0}}(t);if(null!=r){var s=r.domain(n).range(a);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,a=e.range(),r=Math.min(a[0],a[1])-z6,s=Math.max(a[0],a[1])+z6,i=e(t[0]),o=e(t[n-1]);(i<r||i>s||o<r||o>s)&&e.domain([t[0],t[n-1]])}})(s),s}}}var xse=(e,t,n)=>{var a=Bre(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(a)&&("auto"===a[0]||"auto"===a[1])&&Mne(e)?function(e){var[t,n]=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(a,2),[i,o]=Yne([t,n]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...Gne(0,a-1).map(()=>1/0)]:[...Gne(0,a-1).map(()=>-1/0),o];return t>n?l.reverse():l}if(i===o)return Qne(i,a,r);var{step:c,tickMin:u,tickMax:d}=Jne(i,o,s,r,0),h=Xne(u,d.add(new(zne())(.1).mul(c)),c);return t>n?h.reverse():h}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&Mne(e)?function(e,t){var[n,a]=e,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[s,i]=Yne([n,a]);if(s===-1/0||i===1/0)return[n,a];if(s===i)return[s];var o=Math.max(t,2),l=$ne(new(zne())(i).sub(s).div(o-1),r,0),c=[...Xne(new(zne())(s),new(zne())(i),l),i];return!1===r&&(c=c.map(e=>Math.round(e))),n>a?c.reverse():c}(e,t.tickCount,t.allowDecimals):void 0},vse=f6([pse,pre,mse],xse),yse=(e,t,n,a)=>{if("angleAxis"!==a&&"number"===(null===e||void 0===e?void 0:e.type)&&Mne(t)&&Array.isArray(n)&&n.length>0){var r=t[0],s=n[0],i=t[1],o=n[n.length-1];return[Math.min(r,s),Math.max(i,o)]}return t},bse=f6([hre,pse,vse,Gae],yse),wse=f6(Tre,hre,(e,t)=>{if(t&&"number"===t.type){var n=1/0,a=Array.from(Ore(e.map(e=>e.value))).sort((e,t)=>e-t),r=a[0],s=a[a.length-1];if(null==r||null==s)return 1/0;var i=s-r;if(0===i)return 1/0;for(var o=0;o<a.length-1;o++){var l=a[o],c=a[o+1];if(null!=l&&null!=c){var u=c-l;n=Math.min(n,u)}}return n/i}}),kse=f6(wse,v8,eae,l8,(e,t,n,a,r)=>r,(e,t,n,a,r)=>{if(!Q1(e))return 0;var s="vertical"===t?a.height:a.width;if("gap"===r)return e*s/2;if("no-gap"===r){var i=D1(n,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),Nse=f6(ire,(e,t,n)=>{var a=ire(e,t);return null==a||"string"!==typeof a.padding?0:kse(e,"xAxis",t,n,a.padding)},(e,t)=>{var n,a;if(null==e)return{left:0,right:0};var{padding:r}=e;return"string"===typeof r?{left:t,right:t}:{left:(null!==(n=r.left)&&void 0!==n?n:0)+t,right:(null!==(a=r.right)&&void 0!==a?a:0)+t}}),jse=f6(cre,(e,t,n)=>{var a=cre(e,t);return null==a||"string"!==typeof a.padding?0:kse(e,"yAxis",t,n,a.padding)},(e,t)=>{var n,a;if(null==e)return{top:0,bottom:0};var{padding:r}=e;return"string"===typeof r?{top:t,bottom:t}:{top:(null!==(n=r.top)&&void 0!==n?n:0)+t,bottom:(null!==(a=r.bottom)&&void 0!==a?a:0)+t}}),Sse=f6([l8,Nse,f8,p8,(e,t,n)=>n],(e,t,n,a,r)=>{var{padding:s}=a;return r?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),Cse=f6([l8,v8,jse,f8,p8,(e,t,n)=>n],(e,t,n,a,r,s)=>{var{padding:i}=r;return s?[a.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Ese=(e,t,n,a)=>{var r;switch(t){case"xAxis":return Sse(e,n,a);case"yAxis":return Cse(e,n,a);case"zAxis":return null===(r=dre(e,n))||void 0===r?void 0:r.range;case"angleAxis":return Wae(e);case"radiusAxis":return Vae(e,n);default:return}},Tse=f6([hre,Ese],_ae),Ise=f6([hre,mse,bse,Tse],gse);f6([yre,Hre,Gae],(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>Ire(n,e)));function Ase(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var _se=(e,t)=>t,Ose=(e,t,n)=>n,Rse=f6(t8,_se,Ose,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Ase)),Pse=f6(n8,_se,Ose,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Ase)),Mse=(e,t)=>({width:e.width,height:t.height}),Dse=f6(l8,ire,Mse),Fse=f6(J6,l8,Rse,_se,Ose,(e,t,n,a,r)=>{var s,i={};return n.forEach(n=>{var o=Mse(t,n);null==s&&(s=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,a,e));var l="top"===a&&!r||"bottom"===a&&r;i[n.id]=s-Number(l)*o.height,s+=(l?-1:1)*o.height}),i}),Lse=f6(Q6,l8,Pse,_se,Ose,(e,t,n,a,r)=>{var s,i={};return n.forEach(n=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==s&&(s=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,a,e));var l="left"===a&&!r||"right"===a&&r;i[n.id]=s-Number(l)*o.width,s+=(l?-1:1)*o.width}),i}),zse=f6([l8,ire,(e,t)=>{var n=ire(e,t);if(null!=n)return Fse(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,a)=>{if(null!=t){var r=null===n||void 0===n?void 0:n[a];return null==r?{x:e.left,y:0}:{x:e.left,y:r}}}),Bse=f6([l8,cre,(e,t)=>{var n=cre(e,t);if(null!=n)return Lse(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,a)=>{if(null!=t){var r=null===n||void 0===n?void 0:n[a];return null==r?{x:0,y:e.top}:{x:r,y:e.top}}}),Use=f6(l8,cre,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),Wse=(e,t,n)=>{switch(t){case"xAxis":return Dse(e,n).width;case"yAxis":return Use(e,n).height;default:return}},Vse=(e,t,n,a)=>{if(null!=n){var{allowDuplicatedCategory:r,type:s,dataKey:i}=n,o=L6(e,a),l=t.map(e=>e.value);return i&&o&&"category"===s&&r&&F1(l)?l:void 0}},Hse=f6([v8,Tre,hre,Gae],Vse),Gse=(e,t,n,a)=>{if(null!=n&&null!=n.dataKey){var{type:r,scale:s}=n;return!L6(e,a)||"number"!==r&&"auto"===s?void 0:t.map(e=>e.value)}},qse=f6([v8,Tre,pre,Gae],Gse),Kse=(f6([v8,(e,t,n)=>{switch(t){case"xAxis":return ire(e,n);case"yAxis":return cre(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},mse,Ise,Hse,qse,Ese,vse,Gae],(e,t,n,a,r,s,i,o,l)=>{if(null!=t){var c=L6(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:r,isCategorical:c,niceTicks:o,range:i,realScaleType:n,scale:a}}}),f6([v8,pre,mse,Ise,vse,Ese,Hse,qse,Gae],(e,t,n,a,r,s,i,o,l)=>{if(null!=t&&null!=a){var c=L6(e,l),{type:u,ticks:d,tickCount:h}=t,p="scaleBand"===n&&"function"===typeof a.bandwidth?a.bandwidth()/2:2,f="category"===u&&a.bandwidth?a.bandwidth()/p:0;f="angleAxis"===l&&null!=s&&s.length>=2?2*I1(s[0]-s[1])*f:f;var m=d||r;return m?m.map((e,t)=>{var n=i?i.indexOf(e):e;return{index:t,coordinate:a(n)+f,value:e,offset:f}}).filter(e=>Q1(e.coordinate)):c&&o?o.map((e,t)=>({coordinate:a(e)+f,value:e,index:t,offset:f})).filter(e=>Q1(e.coordinate)):a.ticks?a.ticks(h).map(e=>({coordinate:a(e)+f,value:e,offset:f})):a.domain().map((e,t)=>({coordinate:a(e)+f,value:i?i[e]:e,index:t,offset:f}))}})),Xse=f6([v8,pre,Ise,Ese,Hse,qse,Gae],(e,t,n,a,r,s,i)=>{if(null!=t&&null!=n&&null!=a&&a[0]!==a[1]){var o=L6(e,i),{tickCount:l}=t,c=0;return c="angleAxis"===i&&(null===a||void 0===a?void 0:a.length)>=2?2*I1(a[0]-a[1])*c:c,o&&s?s.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:r?r[e]:e,index:t,offset:c}))}}),Yse=f6(hre,Ise,(e,t)=>{if(null!=e&&null!=t)return tre(tre({},e),{},{scale:t})}),$se=f6([hre,mse,pse,Tse],gse),Qse=(f6((e,t,n)=>dre(e,n),$se,(e,t)=>{if(null!=e&&null!=t)return tre(tre({},e),{},{scale:t})}),f6([v8,t8,n8],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),Jse=e=>e.options.defaultTooltipEventType,Zse=e=>e.options.validateTooltipEventTypes;function eie(e,t,n){if(null==e)return t;var a=e?"axis":"item";return null==n?t:n.includes(a)?a:t}function tie(e,t){return eie(t,Jse(e),Zse(e))}var nie=(e,t)=>{var n,a=Number(t);if(!A1(a)&&null!=t)return a>=0?null===e||void 0===e||null===(n=e[a])||void 0===n?void 0:n.value:void 0};function aie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function rie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aie(Object(n),!0).forEach(function(t){sie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iie=(e,t,n,a)=>{if(null==t)return M5;var r=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==r)return M5;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var s=!0===e.settings.active;if(null!=r.index){if(s)return rie(rie({},r),{},{active:!0})}else if(null!=a)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return rie(rie({},M5),{},{coordinate:r.coordinate})};function oie(e,t){var n=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}(e),a=t[0],r=t[1];if(void 0===n)return!1;var s=Math.min(a,r),i=Math.max(a,r);return n>=s&&n<=i}var lie=(e,t,n,a)=>{var r=null===e||void 0===e?void 0:e.index;if(null==r)return null;var s=Number(r);if(!Q1(s))return r;var i=1/0;t.length>0&&(i=t.length-1);var o=Math.max(0,Math.min(s,i)),l=t[o];return null==l||function(e,t,n){if(null==n||null==t)return!0;var a=F6(e,t);return null==a||!Mne(n)||oie(a,n)}(l,n,a)?String(o):null},cie=(e,t,n,a,r,s,i,o)=>{if(null!=s&&null!=o){var l=i[0],c=null==l?void 0:o(l.positions,s);if(null!=c)return c;var u=null===r||void 0===r?void 0:r[Number(s)];if(u)return"horizontal"===n?{x:u.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:u.coordinate}}},uie=(e,t,n,a)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];var r;if(null==(r="hover"===n?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=a){var s=e.tooltipItemPayloads[0];return null!=s?[s]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.graphicalItemId)===r})},die=e=>e.options.tooltipPayloadSearcher,hie=e=>e.tooltip;function pie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function fie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pie(Object(n),!0).forEach(function(t){mie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gie=(e,t,n,a,r,s,i)=>{if(null!=t&&null!=s){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n;return e.reduce((e,n)=>{var d,h,p,{dataDefinedOnItem:f,settings:m}=n,g=function(e,t){return null!=e?e:t}(f,o),x=Array.isArray(g)?R6(g,c,u):g,v=null!==(d=null===m||void 0===m?void 0:m.dataKey)&&void 0!==d?d:a,y=null===m||void 0===m?void 0:m.nameKey;(h=a&&Array.isArray(x)&&!Array.isArray(x[0])&&"axis"===i?z1(x,a,r):s(x,t,l,y),Array.isArray(h))?h.forEach(t=>{var n=fie(fie({},m),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(Y6({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:F6(t.payload,t.dataKey),name:t.name}))}):e.push(Y6({tooltipEntrySettings:m,dataKey:v,payload:h,value:F6(h,v),name:null!==(p=F6(h,y))&&void 0!==p?p:null===m||void 0===m?void 0:m.name}));return e},[])}},xie=f6([Rre,v8,fre,aae,Jae],fse),vie=f6([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),yie=f6([Jae,Zae],mre),bie=f6([vie,Rre,yie],vre,{memoizeOptions:{resultEqualityCheck:Qae}}),wie=f6([bie],e=>e.filter(Yae)),kie=f6([bie],Nre,{memoizeOptions:{resultEqualityCheck:Qae}}),Nie=f6([kie,_ne],Sre),jie=f6([wie,_ne,Rre],Xae),Sie=f6([Nie,Rre,bie],Ere),Cie=f6([Rre],Bre),Eie=f6([Rre],e=>e.allowDataOverflow),Tie=f6([Cie,Eie],Fne),Iie=f6([bie],e=>e.filter(Yae)),Aie=f6([jie,Iie,tae,nae],Dre),_ie=f6([Aie,_ne,Jae,Tie],Lre),Oie=f6([bie],wre),Rie=f6([Nie,Rre,Oie,Hre,Jae],qre,{memoizeOptions:{resultEqualityCheck:$ae}}),Pie=f6([Yre,Jae,Zae],$re),Mie=f6([Pie,Jae],nse),Die=f6([Jre,Jae,Zae],$re),Fie=f6([Die,Jae],rse),Lie=f6([ese,Jae,Zae],$re),zie=f6([Lie,Jae],ise),Bie=f6([Mie,zie,Fie],Gre),Uie=f6([Rre,Cie,Tie,_ie,Rie,Bie,v8,Jae],cse),Wie=f6([Rre,v8,Nie,Sie,tae,Jae,Uie],hse),Vie=f6([Wie,Rre,xie],xse),Hie=f6([Rre,Wie,Vie,Jae],yse),Gie=e=>{var t=Jae(e),n=Zae(e);return Ese(e,t,n,!1)},qie=f6([Rre,Gie],_ae),Kie=f6([Rre,xie,Hie,qie],gse),Xie=f6([v8,Sie,Rre,Jae],Vse),Yie=f6([v8,Sie,Rre,Jae],Gse),$ie=f6([v8,Rre,xie,Kie,Gie,Xie,Yie,Jae],(e,t,n,a,r,s,i,o)=>{if(t){var{type:l}=t,c=L6(e,o);if(a){var u="scaleBand"===n&&a.bandwidth?a.bandwidth()/2:2,d="category"===l&&a.bandwidth?a.bandwidth()/u:0;return d="angleAxis"===o&&null!=r&&(null===r||void 0===r?void 0:r.length)>=2?2*I1(r[0]-r[1])*d:d,c&&i?i.map((e,t)=>({coordinate:a(e)+d,value:e,index:t,offset:d})):a.domain().map((e,t)=>({coordinate:a(e)+d,value:s?s[e]:e,index:t,offset:d}))}}}),Qie=f6([Jse,Zse,e=>e.tooltip.settings],(e,t,n)=>eie(n.shared,e,t)),Jie=e=>e.tooltip.settings.trigger,Zie=e=>e.tooltip.settings.defaultIndex,eoe=f6([hie,Qie,Jie,Zie],iie),toe=f6([eoe,Nie,Pre,Wie],lie),noe=f6([$ie,toe],nie),aoe=f6([eoe],e=>{if(e)return e.dataKey}),roe=f6([eoe],e=>{if(e)return e.graphicalItemId}),soe=f6([hie,Qie,Jie,Zie],uie),ioe=f6([Q6,J6,v8,l8,$ie,Zie,soe,die],cie),ooe=f6([eoe,ioe],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),loe=f6([eoe],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.active)&&void 0!==t&&t}),coe=f6([soe,toe,_ne,Pre,noe,die,Qie],gie),uoe=f6([coe],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function doe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function hoe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?doe(Object(n),!0).forEach(function(t){poe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):doe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function poe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var foe=(e,t,n,a,r)=>{var s,i=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0;if(i<=1||null==e)return 0;if("angleAxis"===a&&null!=r&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var o=0;o<i;o++){var l,c,u,d,h,p=o>0?null===(l=n[o-1])||void 0===l?void 0:l.coordinate:null===(c=n[i-1])||void 0===c?void 0:c.coordinate,f=null===(u=n[o])||void 0===u?void 0:u.coordinate,m=o>=i-1?null===(d=n[0])||void 0===d?void 0:d.coordinate:null===(h=n[o+1])||void 0===h?void 0:h.coordinate,g=void 0;if(null!=p&&null!=f&&null!=m)if(I1(f-p)!==I1(m-f)){var x=[];if(I1(m-f)===I1(r[1]-r[0])){g=m;var v=f+r[1]-r[0];x[0]=Math.min(v,(v+p)/2),x[1]=Math.max(v,(v+p)/2)}else{g=p;var y=m+r[1]-r[0];x[0]=Math.min(f,(y+f)/2),x[1]=Math.max(f,(y+f)/2)}var b,w=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>w[0]&&e<=w[1]||e>=x[0]&&e<=x[1])return null===(b=n[o])||void 0===b?void 0:b.index}else{var k,N=Math.min(p,m),j=Math.max(p,m);if(e>(N+f)/2&&e<=(j+f)/2)return null===(k=n[o])||void 0===k?void 0:k.index}}else if(t)for(var S=0;S<i;S++){var C=t[S];if(null!=C){var E=t[S+1],T=t[S-1];if(0===S&&null!=E&&e<=(C.coordinate+E.coordinate)/2)return C.index;if(S===i-1&&null!=T&&e>(C.coordinate+T.coordinate)/2)return C.index;if(S>0&&S<i-1&&null!=T&&null!=E&&e>(C.coordinate+T.coordinate)/2&&e<=(C.coordinate+E.coordinate)/2)return C.index}}return-1},moe=()=>N6(aae),goe=(e,t)=>t,xoe=(e,t,n)=>n,voe=(e,t,n,a)=>a,yoe=f6($ie,e=>S6()(e,e=>e.coordinate)),boe=f6([hie,goe,xoe,voe],iie),woe=f6([boe,Nie,Pre,Wie],lie),koe=f6([hie,goe,xoe,voe],uie),Noe=f6([Q6,J6,v8,l8,$ie,voe,koe,die],cie),joe=f6([boe,Noe],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),Soe=f6([$ie,woe],nie),Coe=f6([koe,woe,_ne,Pre,Soe,die,goe],gie),Eoe=f6([boe,woe],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),Toe=(e,t,n,a,r,s,i)=>{if(e&&a&&r&&s&&n){var o=gae(e,n);if(o){var l=((e,t)=>"centric"===t?e.angle:e.radius)(o,t),c=foe(l,i,s,a,r),u=((e,t,n,a)=>{var r=t.find(e=>e&&e.index===n);if(r){if("centric"===e){var s=r.coordinate,{radius:i}=a;return hoe(hoe(hoe({},a),hae(a.cx,a.cy,i,s)),{},{angle:s,radius:i})}var o=r.coordinate,{angle:l}=a;return hoe(hoe(hoe({},a),hae(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,s,c,o);return{activeIndex:String(c),activeCoordinate:u}}}},Ioe=f6([(e,t)=>t,v8,Hae,Jae,qie,$ie,yoe,l8],(e,t,n,a,r,s,i,o)=>{if(e&&t&&a&&r&&s)return"horizontal"===t||"vertical"===t?((e,t,n,a,r,s,i)=>{if(e&&n&&a&&r&&function(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}(e,i)){var o=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=foe(o,s,r,n,a),c=((e,t,n,a)=>{var r=t.find(e=>e&&e.index===n);if(r){if("horizontal"===e)return{x:r.coordinate,y:a.chartY};if("vertical"===e)return{x:a.chartX,y:r.coordinate}}return{x:0,y:0}})(t,r,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,a,r,s,i,o):Toe(e,t,n,a,r,s,i)}),Aoe=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},_oe=P4("mouseClick"),Ooe=E3();Ooe.startListening({actionCreator:_oe,effect:(e,t)=>{var n=e.payload,a=Ioe(t.getState(),Aoe(n));null!=(null===a||void 0===a?void 0:a.activeIndex)&&t.dispatch(q5({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Roe=P4("mouseMove"),Poe=E3(),Moe=null;function Doe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function Foe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Loe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Foe(Object(n),!0).forEach(function(t){zoe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Foe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zoe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Poe.startListening({actionCreator:Roe,effect:(e,t)=>{var n=e.payload;null!==Moe&&cancelAnimationFrame(Moe);var a=Aoe(n);Moe=requestAnimationFrame(()=>{var e=t.getState();if("axis"===tie(e,e.tooltip.settings.shared)){var n=Ioe(e,a);null!=(null===n||void 0===n?void 0:n.activeIndex)?t.dispatch(G5({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate})):t.dispatch(V5())}Moe=null})}});var Boe=Y4({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:z4()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;void 0!==e.xAxis[n.id]&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:z4()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:z4()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:z4()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;void 0!==e.yAxis[n.id]&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:z4()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:z4()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:z4()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;void 0!==e.zAxis[n.id]&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:z4()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:z4()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,r=e.yAxis[n];if(r){var s=r.widthHistory||[];if(3===s.length&&s[0]===s[2]&&a===s[1]&&a!==r.width&&Math.abs(a-s[0])<=1)return;var i=[...s,a].slice(-3);e.yAxis[n]=Loe(Loe({},e.yAxis[n]),{},{width:a,widthHistory:i})}}}}),{addXAxis:Uoe,replaceXAxis:Woe,removeXAxis:Voe,addYAxis:Hoe,replaceYAxis:Goe,removeYAxis:qoe,addZAxis:Koe,replaceZAxis:Xoe,removeZAxis:Yoe,updateYAxisWidth:$oe}=Boe.actions,Qoe=Boe.reducer,Joe=Y4({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:z4()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,r=g4(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=a)},prepare:z4()},removeCartesianGraphicalItem:{reducer(e,t){var n=g4(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:z4()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:z4()},removePolarGraphicalItem:{reducer(e,t){var n=g4(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:z4()}}}),{addCartesianGraphicalItem:Zoe,replaceCartesianGraphicalItem:ele,removeCartesianGraphicalItem:tle,addPolarGraphicalItem:nle,removePolarGraphicalItem:ale}=Joe.actions,rle=Joe.reducer,sle=Y4({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=g4(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=g4(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=g4(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:ile,removeDot:ole,addArea:lle,removeArea:cle,addLine:ule,removeLine:dle}=sle.actions,hle=sle.reducer,ple={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fle=Y4({name:"brush",initialState:ple,reducers:{setBrushSettings:(e,t)=>null==t.payload?ple:t.payload}}),{setBrushSettings:mle}=fle.actions,gle=fle.reducer,xle=Y4({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:z4()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,r=g4(e).payload.indexOf(n);r>-1&&(e.payload[r]=a)},prepare:z4()},removeLegendPayload:{reducer(e,t){var n=g4(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:z4()}}}),{setLegendSize:vle,setLegendSettings:yle,addLegendPayload:ble,replaceLegendPayload:wle,removeLegendPayload:kle}=xle.actions,Nle=xle.reducer,jle={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Sle=Y4({name:"rootProps",initialState:jle,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:jle.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Cle=Sle.reducer,{updateOptions:Ele}=Sle.actions,Tle=Y4({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Ile,removeRadiusAxis:Ale,addAngleAxis:_le,removeAngleAxis:Ole}=Tle.actions,Rle=Tle.reducer,Ple=Y4({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Mle}=Ple.actions,Dle=Ple.reducer,Fle=P4("keyDown"),Lle=P4("focus"),zle=E3();zle.startListening({actionCreator:Fle,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:a}=n.tooltip,r=e.payload;if("ArrowRight"===r||"ArrowLeft"===r||"Enter"===r){var s=lie(a,Nie(n),Pre(n),Wie(n)),i=null==s?-1:Number(s);if(Number.isFinite(i)&&!(i<0)){var o=$ie(n);if("Enter"!==r){var l=i+("ArrowRight"===r?1:-1)*("left-to-right"===Qse(n)?1:-1);if(!(null==o||l>=o.length||l<0)){var c=Noe(n,"axis","hover",String(l));t.dispatch(X5({active:!0,activeIndex:l.toString(),activeCoordinate:c}))}}else{var u=Noe(n,"axis","hover",String(a.index));t.dispatch(X5({active:!a.active,activeIndex:a.index,activeCoordinate:u}))}}}}}}),zle.startListening({actionCreator:Lle,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&null==a.index){var r=Noe(n,"axis","hover",String("0"));t.dispatch(X5({active:!0,activeIndex:"0",activeCoordinate:r}))}}}});var Ble=P4("externalEvent"),Ule=E3(),Wle=new Map;Ule.startListening({actionCreator:Ble,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(null!=n){a.persist();var r=a.type,s=Wle.get(r);void 0!==s&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var e=t.getState(),s={activeCoordinate:ooe(e),activeDataKey:aoe(e),activeIndex:toe(e),activeLabel:noe(e),activeTooltipIndex:toe(e),isTooltipActive:loe(e)};n(s,a)}finally{Wle.delete(r)}});Wle.set(r,i)}}});var Vle=f6([hie],e=>e.tooltipItemPayloads),Hle=f6([Vle,die,(e,t)=>t,(e,t,n)=>n],(e,t,n,a)=>{var r=e.find(e=>e.settings.graphicalItemId===a);if(null!=r){var{positions:s}=r;if(null!=s)return t(s,n)}}),Gle=P4("touchMove"),qle=E3();qle.startListening({actionCreator:Gle,effect:(e,t)=>{var n=e.payload;if(null!=n.touches&&0!==n.touches.length){var a=t.getState(),r=tie(a,a.tooltip.settings.shared);if("axis"===r){var s=n.touches[0];if(null==s)return;var i=Ioe(a,Aoe({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));null!=(null===i||void 0===i?void 0:i.activeIndex)&&t.dispatch(G5({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if("item"===r){var o,l=n.touches[0];if(null==document.elementFromPoint||null==l)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(a8),d=null!==(o=c.getAttribute(r8))&&void 0!==o?o:void 0,h=bie(a).find(e=>e.id===d);if(null==u||null==h||null==d)return;var{dataKey:p}=h,f=Hle(a,u,d);t.dispatch(U5({activeDataKey:p,activeIndex:u,activeCoordinate:f,activeGraphicalItemId:d}))}}}});var Kle=Y4({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:r}=t.payload;e[n]&&(e[n]=e[n].map(e=>e.dataKey===a.dataKey&&e.direction===a.direction?r:e))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==a.dataKey||e.direction!==a.direction))}}}),{addErrorBar:Xle,replaceErrorBar:Yle,removeErrorBar:$le}=Kle.actions,Qle=Kle.reducer,Jle=!0,Zle=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function ece(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ece(Object(n),!0).forEach(function(t){nce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ece(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ace={zIndexMap:Object.values(xae).reduce((e,t)=>tce(tce({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},rce=new Set(Object.values(xae));var sce=Y4({name:"zIndex",initialState:ace,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:z4()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!function(e){return rce.has(e)}(n)&&delete e.zIndexMap[n])},prepare:z4()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:r?void 0:a,panoramaElement:r?a:void 0}},prepare:z4()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:z4()}}}),{registerZIndexPortal:ice,unregisterZIndexPortal:oce,registerZIndexPortalElement:lce,unregisterZIndexPortalElement:cce}=sce.actions,uce=C4({brush:gle,cartesianAxis:Qoe,chartData:e6,errorBars:Qle,graphicalItems:rle,layout:i6,legend:Nle,options:_3,polarAxis:Rle,polarOptions:Dle,referenceElements:hle,rootProps:Cle,tooltip:Y5,zIndex:sce.reducer});function dce(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,r=h8(),s=(0,o.useRef)(null);if(r)return n;null==s.current&&(s.current=function(e){return W4({reducer:uce,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([Ooe.middleware,Poe.middleware,zle.middleware,Ule.middleware,qle.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(U4({type:"raf"}))},devTools:Jle&&{serialize:{replacer:Doe},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,a));var i=x6;return o.createElement(G3,{context:i,store:s.current},n)}var hce=e=>{var{chartData:t}=e,n=y6(),a=h8();return(0,o.useEffect)(()=>a?()=>{}:(n(Q5(t)),()=>{n(Q5(void 0))}),[t,n,a]),null},pce=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function fce(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function mce(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(pce.has(a)){if(null==e[a]&&null==t[a])continue;if(!B3(e[a],t[a]))return!1}else if(!fce(e[a],t[a]))return!1;return!0}function gce(e){var{layout:t,margin:n}=e,a=y6(),r=h8();return(0,o.useEffect)(()=>{r||(a(a6(t)),a(n6(n)))},[a,r,t,n]),null}var xce=(0,o.memo)(gce,mce);function vce(e){var t=y6();return(0,o.useEffect)(()=>{t(Ele(e))},[t,e]),null}var yce=()=>{var e;return null===(e=N6(e=>e.rootProps.accessibilityLayer))||void 0===e||e},bce=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function wce(e){return"string"===typeof e&&bce.includes(e)}var kce=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function Nce(e){return"string"===typeof e&&kce.has(e)}function jce(e){return"string"===typeof e&&e.startsWith("data-")}function Sce(e){if("object"!==typeof e||null===e)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Nce(n)||jce(n))&&(t[n]=e[n]);return t}function Cce(e){return null==e?null:(0,o.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?Sce(e.props):"object"!==typeof e||Array.isArray(e)?null:Sce(e)}function Ece(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Nce(n)||jce(n)||wce(n))&&(t[n]=e[n]);return t}var Tce=["children","width","height","viewBox","className","style","title","desc"];function Ice(){return Ice=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ice.apply(null,arguments)}var Ace=(0,o.forwardRef)((e,t)=>{var{children:n,width:a,height:r,viewBox:s,className:i,style:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Tce),h=s||{width:a,height:r,x:0,y:0},p=eg("recharts-surface",i);return o.createElement("svg",Ice({},Ece(d),{className:p,width:a,height:r,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),o.createElement("title",null,c),o.createElement("desc",null,u),n)}),_ce=f6(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(null!=t){var a=e[t];if(null!=a)return n?a.panoramaElement:a.element}}),Oce=f6(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(xae));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}}});function Rce(e){var{zIndex:t,isPanorama:n}=e,a=(0,o.useRef)(null),r=y6();return(0,o.useLayoutEffect)(()=>(a.current&&r(lce({zIndex:t,element:a.current,isPanorama:n})),()=>{r(cce({zIndex:t,isPanorama:n}))}),[r,t,n]),o.createElement("g",{tabIndex:-1,ref:a})}function Pce(e){var{children:t,isPanorama:n}=e,a=N6(Oce);if(!a||0===a.length)return t;var r=a.filter(e=>e<0),s=a.filter(e=>e>0);return o.createElement(o.Fragment,null,r.map(e=>o.createElement(Rce,{key:e,zIndex:e,isPanorama:n})),t,s.map(e=>o.createElement(Rce,{key:e,zIndex:e,isPanorama:n})))}var Mce=["children"];function Dce(){return Dce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dce.apply(null,arguments)}var Fce={width:"100%",height:"100%",display:"block"},Lce=(0,o.forwardRef)((e,t)=>{var n=N6(Q6),a=N6(J6),r=yce();if(!J1(n)||!J1(a))return null;var s,i,{children:l,otherAttributes:c,title:u,desc:d}=e;return null!=c&&(s="number"===typeof c.tabIndex?c.tabIndex:r?0:void 0,i="string"===typeof c.role?c.role:r?"application":void 0),o.createElement(Ace,Dce({},c,{title:u,desc:d,role:i,tabIndex:s,width:n,height:a,style:Fce,ref:t}),l)}),zce=e=>{var{children:t}=e,n=N6(f8);if(!n)return null;var{width:a,height:r,y:s,x:i}=n;return o.createElement(Ace,{width:a,height:r,x:i,y:s},t)},Bce=(0,o.forwardRef)((e,t)=>{var{children:n}=e,a=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Mce);return h8()?o.createElement(zce,null,o.createElement(Pce,{isPanorama:!0},n)):o.createElement(Lce,Dce({ref:t},a),o.createElement(Pce,{isPanorama:!1},n))});var Uce=new(n(7283)),Wce="recharts.syncEvent.tooltip",Vce="recharts.syncEvent.brush";function Hce(e){return e.tooltip.syncInteraction}var Gce=["x","y"];function qce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Kce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qce(Object(n),!0).forEach(function(t){Xce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yce(){var e=N6(rae),t=N6(iae),n=y6(),a=N6(sae),r=N6($ie),s=y8(),i=g8(),l=N6(e=>e.rootProps.className);(0,o.useEffect)(()=>{if(null==e)return V1;var o=(o,l,c)=>{var u;if(t!==c&&e===o)if("index"!==a){if(null!=r){var d;if("function"===typeof a){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},p=a(r,h);d=r[p]}else"value"===a&&(d=r.find(e=>String(e.value)===l.payload.label));var{coordinate:f}=l.payload;if(null!=d&&!1!==l.payload.active&&null!=f&&null!=i){var{x:m,y:g}=f,x=Math.min(m,i.x+i.width),v=Math.min(g,i.y+i.height),y={x:"horizontal"===s?d.coordinate:x,y:"horizontal"===s?v:d.coordinate},b=K5({active:l.payload.active,coordinate:y,dataKey:l.payload.dataKey,index:String(d.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId});n(b)}else n(K5({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(i&&null!==l&&void 0!==l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var w=l.payload.coordinate,{x:k,y:N}=w,j=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(w,Gce),{x:S,y:C,width:E,height:T}=l.payload.sourceViewBox,I=Kce(Kce({},j),{},{x:i.x+(E?(k-S)/E:0)*i.width,y:i.y+(T?(N-C)/T:0)*i.height});n(Kce(Kce({},l),{},{payload:Kce(Kce({},l.payload),{},{coordinate:I})}))}else n(l)};return Uce.on(Wce,o),()=>{Uce.off(Wce,o)}},[l,n,t,e,a,r,s,i])}function $ce(){var e=y6();(0,o.useEffect)(()=>{e(O3())},[e]),Yce(),function(){var e=N6(rae),t=N6(iae),n=y6();(0,o.useEffect)(()=>{if(null==e)return V1;var a=(a,r,s)=>{t!==s&&e===a&&n(J5(r))};return Uce.on(Vce,a),()=>{Uce.off(Vce,a)}},[n,t,e])}()}function Qce(e,t,n,a,r,s){var i=N6(n=>((e,t,n)=>{if(null!=t){var a=hie(e);return"axis"===t?"hover"===n?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:"hover"===n?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}})(n,e,t)),l=N6(iae),c=N6(rae),u=N6(sae),d=N6(Hce),h=null===d||void 0===d?void 0:d.active,p=g8();(0,o.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=K5({active:s,coordinate:n,dataKey:i,index:r,label:"number"===typeof a?String(a):a,sourceViewBox:p,graphicalItemId:void 0});Uce.emit(Wce,c,e,l)}},[h,n,i,r,a,l,c,u,s,p])}var Jce=(0,o.createContext)(null),Zce=(0,o.createContext)(null);function eue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eue(Object(n),!0).forEach(function(t){nue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aue(){return aue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},aue.apply(null,arguments)}var rue=()=>($ce(),null);function sue(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var iue=(0,o.forwardRef)((e,t)=>{var n,a,r=(0,o.useRef)(null),[s,i]=(0,o.useState)({containerWidth:sue(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:sue(null===(a=e.style)||void 0===a?void 0:a.height)}),l=(0,o.useCallback)((e,t)=>{i(n=>{var a=Math.round(e),r=Math.round(t);return n.containerWidth===a&&n.containerHeight===r?n:{containerWidth:a,containerHeight:r}})},[]),c=(0,o.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:n,height:a}=e.getBoundingClientRect();l(n,a);var s=new ResizeObserver(e=>{var{width:t,height:n}=e[0].contentRect;l(t,n)});s.observe(e),r.current=s}},[t,l]);return(0,o.useEffect)(()=>()=>{var e=r.current;null!=e&&e.disconnect()},[l]),o.createElement(o.Fragment,null,o.createElement(b8,{width:s.containerWidth,height:s.containerHeight}),o.createElement("div",aue({ref:c},e)))}),oue=(0,o.forwardRef)((e,t)=>{var{width:n,height:a}=e,[r,s]=(0,o.useState)({containerWidth:sue(n),containerHeight:sue(a)}),i=(0,o.useCallback)((e,t)=>{s(n=>{var a=Math.round(e),r=Math.round(t);return n.containerWidth===a&&n.containerHeight===r?n:{containerWidth:a,containerHeight:r}})},[]),l=(0,o.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:n,height:a}=e.getBoundingClientRect();i(n,a)}},[t,i]);return o.createElement(o.Fragment,null,o.createElement(b8,{width:r.containerWidth,height:r.containerHeight}),o.createElement("div",aue({ref:l},e)))}),lue=(0,o.forwardRef)((e,t)=>{var{width:n,height:a}=e;return o.createElement(o.Fragment,null,o.createElement(b8,{width:n,height:a}),o.createElement("div",aue({ref:t},e)))}),cue=(0,o.forwardRef)((e,t)=>{var{width:n,height:a}=e;return _1(n)||_1(a)?o.createElement(oue,aue({},e,{ref:t})):o.createElement(lue,aue({},e,{ref:t}))});var uue=(0,o.forwardRef)((e,t)=>{var{children:n,className:a,height:r,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:f,onTouchMove:m,onTouchStart:g,style:x,width:v,responsive:y,dispatchTouchEvents:b=!0}=e,w=(0,o.useRef)(null),k=y6(),[N,j]=(0,o.useState)(null),[S,C]=(0,o.useState)(null),E=function(){var e=y6(),[t,n]=(0,o.useState)(null),a=N6(Z6);return(0,o.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;Q1(n)&&n!==a&&e(s6(n))}},[t,e,a]),n}(),T=s2(),I=(null===T||void 0===T?void 0:T.width)>0?T.width:v,A=(null===T||void 0===T?void 0:T.height)>0?T.height:r,_=(0,o.useCallback)(e=>{E(e),"function"===typeof t&&t(e),j(e),C(e),null!=e&&(w.current=e)},[E,t,j,C]),O=(0,o.useCallback)(e=>{k(_oe(e)),k(Ble({handler:s,reactEvent:e}))},[k,s]),R=(0,o.useCallback)(e=>{k(Roe(e)),k(Ble({handler:u,reactEvent:e}))},[k,u]),P=(0,o.useCallback)(e=>{k(V5()),k(Ble({handler:d,reactEvent:e}))},[k,d]),M=(0,o.useCallback)(e=>{k(Roe(e)),k(Ble({handler:h,reactEvent:e}))},[k,h]),D=(0,o.useCallback)(()=>{k(Lle())},[k]),F=(0,o.useCallback)(e=>{k(Fle(e.key))},[k]),L=(0,o.useCallback)(e=>{k(Ble({handler:i,reactEvent:e}))},[k,i]),z=(0,o.useCallback)(e=>{k(Ble({handler:l,reactEvent:e}))},[k,l]),B=(0,o.useCallback)(e=>{k(Ble({handler:c,reactEvent:e}))},[k,c]),U=(0,o.useCallback)(e=>{k(Ble({handler:p,reactEvent:e}))},[k,p]),W=(0,o.useCallback)(e=>{k(Ble({handler:g,reactEvent:e}))},[k,g]),V=(0,o.useCallback)(e=>{b&&k(Gle(e)),k(Ble({handler:m,reactEvent:e}))},[k,b,m]),H=(0,o.useCallback)(e=>{k(Ble({handler:f,reactEvent:e}))},[k,f]),G=function(e){return!0===e?iue:cue}(y);return o.createElement(Jce.Provider,{value:N},o.createElement(Zce.Provider,{value:S},o.createElement(G,{width:null!==I&&void 0!==I?I:null===x||void 0===x?void 0:x.width,height:null!==A&&void 0!==A?A:null===x||void 0===x?void 0:x.height,className:eg("recharts-wrapper",a),style:tue({position:"relative",cursor:"default",width:I,height:A},x),onClick:O,onContextMenu:L,onDoubleClick:z,onFocus:D,onKeyDown:F,onMouseDown:B,onMouseEnter:R,onMouseLeave:P,onMouseMove:M,onMouseUp:U,onTouchEnd:H,onTouchMove:V,onTouchStart:W,ref:_},o.createElement(rue,null),n)))}),due=f6([l8],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),hue=f6([due,Q6,J6],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),pue=()=>N6(hue),fue=(0,o.createContext)(void 0),mue=e=>{var{children:t}=e,[n]=(0,o.useState)("".concat(M1("recharts"),"-clip")),a=pue();if(null==a)return null;var{x:r,y:s,width:i,height:l}=a;return o.createElement(fue.Provider,{value:n},o.createElement("defs",null,o.createElement("clipPath",{id:n},o.createElement("rect",{x:r,y:s,height:l,width:i}))),t)},gue=["width","height","responsive","children","className","style","compact","title","desc"];var xue=(0,o.forwardRef)((e,t)=>{var{width:n,height:a,responsive:r,children:s,className:i,style:l,compact:c,title:u,desc:d}=e,h=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,gue),p=Sce(h);return c?o.createElement(o.Fragment,null,o.createElement(b8,{width:n,height:a}),o.createElement(Bce,{otherAttributes:p,title:u,desc:d},s)):o.createElement(uue,{className:i,style:l,width:n,height:a,responsive:null!==r&&void 0!==r&&r,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},o.createElement(Bce,{otherAttributes:p,title:u,desc:d,ref:t},o.createElement(mue,null,s)))});function vue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function yue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bue(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vue(Object(n),!0).forEach(function(t){yue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),a=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==a[t]&&(e[t]=a[t]),e),n)}function wue(){return wue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wue.apply(null,arguments)}var kue={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Nue=(0,o.forwardRef)(function(e,t){var n,a=bue(e.categoricalChartProps,kue),{chartName:r,defaultTooltipEventType:s,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:r,defaultTooltipEventType:s,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,eventEmitter:void 0};return o.createElement(dce,{preloadedState:{options:u},reduxStoreName:null!==(n=c.id)&&void 0!==n?n:r},o.createElement(hce,{chartData:c.data}),o.createElement(xce,{layout:a.layout,margin:a.margin}),o.createElement(vce,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),o.createElement(xue,wue({},a,{ref:t})))}),jue=["axis"],Sue=(0,o.forwardRef)((e,t)=>o.createElement(Nue,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jue,tooltipPayloadSearcher:I3,categoricalChartProps:e,ref:t})),Cue=["children","className"];function Eue(){return Eue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eue.apply(null,arguments)}var Tue=o.forwardRef((e,t)=>{var{children:n,className:a}=e,r=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Cue),s=eg("recharts-layer",a);return o.createElement("g",Eue({className:s},Ece(r),{ref:t}),n)});function Iue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aue(Object(n),!0).forEach(function(t){Oue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rue=_ue({},{cacheSize:2e3,enableCache:!0}),Pue=new class{constructor(e){Iue(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;null!=n&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(Rue.cacheSize),Mue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Due="recharts_measurement_span";var Fue=(e,t)=>{try{var n=document.getElementById(Due);n||((n=document.createElement("span")).setAttribute("id",Due),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Mue,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch(SEe){return{width:0,height:0}}},Lue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||Zle)return{width:0,height:0};if(!Rue.enableCache)return Fue(e,t);var n=function(e,t){var n=t.fontSize||"",a=t.fontFamily||"",r=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(o)}(e,t),a=Pue.get(n);if(a)return a;var r=Fue(e,t);return Pue.set(n,r),r};var zue=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bue=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Uue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Wue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Vue={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Hue=["cm","mm","pt","pc","in","Q","px"];var Gue="NaN";class que{static parse(e){var t,[,n,a]=null!==(t=Wue.exec(e))&&void 0!==t?t:[];return null==n?que.NaN:new que(parseFloat(n),null!==a&&void 0!==a?a:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,A1(e)&&(this.unit=""),""===t||Uue.test(t)||(this.num=NaN,this.unit=""),function(e){return Hue.includes(e)}(t)&&(this.num=function(e,t){return e*Vue[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new que(NaN,""):new que(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new que(NaN,""):new que(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new que(NaN,""):new que(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new que(NaN,""):new que(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return A1(this.num)}}function Kue(e){if(null==e||e.includes(Gue))return Gue;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,r,s]=null!==(n=zue.exec(t))&&void 0!==n?n:[],i=que.parse(null!==a&&void 0!==a?a:""),o=que.parse(null!==s&&void 0!==s?s:""),l="*"===r?i.multiply(o):i.divide(o);if(l.isNaN())return Gue;t=t.replace(zue,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=Bue.exec(t))&&void 0!==c?c:[],p=que.parse(null!==u&&void 0!==u?u:""),f=que.parse(null!==h&&void 0!==h?h:""),m="+"===d?p.add(f):p.subtract(f);if(m.isNaN())return Gue;t=t.replace(Bue,m.toString())}return t}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(que,"NaN",new que(NaN,""));var Xue=/\(([^()]*)\)/;function Yue(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=Xue.exec(n));){var[,a]=t;n=n.replace(Xue,Kue(a))}return n}(t),t=Kue(t)}function $ue(e){var t=function(e){try{return Yue(e)}catch(SEe){return Gue}}(e.slice(5,-1));return t===Gue?"":t}var Que=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Jue=["dx","dy","angle","className","breakAll"];function Zue(){return Zue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zue.apply(null,arguments)}function ede(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var tde=/[ \f\n\r\t\v\u2028\u2029]+/,nde=e=>{var{children:t,breakAll:n,style:a}=e;try{var r=[];return B1(t)||(r=n?t.toString().split(""):t.toString().split(tde)),{wordsWithComputedWidth:r.map(e=>({word:e,width:Lue(e,a).width})),spaceWidth:n?0:Lue("\xa0",a).width}}catch(SEe){return null}};function ade(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var rde=(e,t,n,a)=>e.reduce((e,r)=>{var{word:s,width:i}=r,o=e[e.length-1];if(o&&null!=i&&(null==t||a||o.width+i+n<Number(t)))o.words.push(s),o.width+=i+n;else{var l={words:[s],width:i};e.push(l)}return e},[]),sde=e=>e.reduce((e,t)=>e.width>t.width?e:t),ide=(e,t,n,a,r,s,i,o)=>{var l=e.slice(0,t),c=nde({breakAll:n,style:a,children:l+"\u2026"});if(!c)return[!1,[]];var u=rde(c.wordsWithComputedWidth,s,i,o);return[u.length>r||sde(u).width>Number(s),u]},ode=e=>[{words:B1(e)?[]:e.toString().split(tde),width:void 0}],lde=e=>{var{width:t,scaleToFit:n,children:a,style:r,breakAll:s,maxLines:i}=e;if((t||n)&&!Zle){var o=nde({breakAll:s,children:a,style:r});if(!o)return ode(a);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,n,a,r)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,c=O1(s),u=String(i),d=rde(t,a,n,r);if(!c||r)return d;if(!(d.length>s||sde(d).width>Number(a)))return d;for(var h,p=0,f=u.length-1,m=0;p<=f&&m<=u.length-1;){var g=Math.floor((p+f)/2),x=g-1,[v,y]=ide(u,x,l,o,s,a,n,r),[b]=ide(u,g,l,o,s,a,n,r);if(v||b||(p=g+1),v&&b&&(f=g-1),!v&&b){h=y;break}m++}return h||d})({breakAll:s,children:a,maxLines:i,style:r},l,c,t,Boolean(n))}return ode(a)},cde="#808080",ude={angle:0,breakAll:!1,capHeight:"0.71em",fill:cde,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},dde=(0,o.forwardRef)((e,t)=>{var n=bue(e,ude),{x:a,y:r,lineHeight:s,capHeight:i,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=n,h=ede(n,Que),p=(0,o.useMemo)(()=>lde({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:f,dy:m,angle:g,className:x,breakAll:v}=h,y=ede(h,Jue);if(!R1(a)||!R1(r)||0===p.length)return null;var b,w=Number(a)+(O1(f)?f:0),k=Number(r)+(O1(m)?m:0);if(!Q1(w)||!Q1(k))return null;switch(d){case"start":b=$ue("calc(".concat(i,")"));break;case"middle":b=$ue("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:b=$ue("calc(".concat(p.length-1," * -").concat(s,")"))}var N=[];if(c){var j=p[0].width,{width:S}=h;N.push("scale(".concat(O1(S)&&O1(j)?S/j:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(w,", ").concat(k,")")),N.length&&(y.transform=N.join(" ")),o.createElement("text",Zue({},Ece(y),{ref:t,x:w,y:k,className:eg("recharts-text",x),textAnchor:u,fill:l.includes("url")?cde:l}),p.map((e,t)=>{var n=e.words.join(v?"":" ");return o.createElement("tspan",{x:w,dy:0===t?b:s,key:"".concat(n,"-").concat(t)},n)}))});dde.displayName="Text";var hde=n(7950);function pde(e){var{zIndex:t,children:n}=e,a=void 0!==y8()&&void 0!==t&&0!==t,r=h8(),s=y6();(0,o.useLayoutEffect)(()=>a?(s(ice({zIndex:t})),()=>{s(oce({zIndex:t}))}):V1,[s,t,a]);var i=N6(e=>_ce(e,t,r));return a?i?(0,hde.createPortal)(n,i):null:n}var fde=["labelRef"],mde=["content"];function gde(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function vde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xde(Object(n),!0).forEach(function(t){yde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bde(){return bde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bde.apply(null,arguments)}var wde=(0,o.createContext)(null),kde=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:r,width:s,height:i,children:l}=e,c=(0,o.useMemo)(()=>({x:t,y:n,upperWidth:a,lowerWidth:r,width:s,height:i}),[t,n,a,r,s,i]);return o.createElement(wde.Provider,{value:c},l)},Nde=()=>{var e=(0,o.useContext)(wde),t=g8();return e||m8(t)},jde=(0,o.createContext)(null),Sde=()=>{var e=(0,o.useContext)(jde),t=N6(Hae);return e||t},Cde=e=>null!=e&&"function"===typeof e,Ede=(e,t,n,a,r)=>{var s,i,{offset:l,className:c}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:f,endAngle:m,clockWise:g}=r,x=(h+p)/2,v=((e,t)=>I1(t-e)*Math.min(Math.abs(t-e),360))(f,m),y=v>=0?1:-1;switch(t){case"insideStart":s=f+y*l,i=g;break;case"insideEnd":s=m-y*l,i=!g;break;case"end":s=m+y*l,i=g;break;default:throw new Error("Unsupported position ".concat(t))}i=v<=0?i:!i;var b=hae(u,d,x,s),w=hae(u,d,x,s+359*(i?1:-1)),k="M".concat(b.x,",").concat(b.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(i?0:1,",\n    ").concat(w.x,",").concat(w.y),N=B1(e.id)?M1("recharts-radial-line-"):e.id;return o.createElement("text",bde({},a,{dominantBaseline:"central",className:eg("recharts-radial-bar-label",c)}),o.createElement("defs",null,o.createElement("path",{id:N,d:k})),o.createElement("textPath",{xlinkHref:"#".concat(N)},n))},Tde=e=>"cx"in e&&O1(e.cx),Ide={angle:0,offset:5,zIndex:xae.label,position:"middle",textBreakAll:!1};function Ade(e){var t,n,a,r=bue(e,Ide),{viewBox:s,position:i,value:l,children:c,content:u,className:d="",textBreakAll:h,labelRef:p}=r,f=Sde(),m=Nde();if(!(t=null==s?"center"===i?m:null!==f&&void 0!==f?f:m:Tde(s)?s:m8(s))||B1(l)&&B1(c)&&!(0,o.isValidElement)(u)&&"function"!==typeof u)return null;var g=vde(vde({},r),{},{viewBox:t});if((0,o.isValidElement)(u)){var{labelRef:x}=g,v=gde(g,fde);return(0,o.cloneElement)(u,v)}if("function"===typeof u){var{content:y}=g,b=gde(g,mde);if(n=(0,o.createElement)(u,b),(0,o.isValidElement)(n))return n}else n=(e=>{var{value:t,formatter:n}=e,a=B1(e.children)?t:e.children;return"function"===typeof n?n(a):a})(r);var w=Ece(r);if(Tde(t)){if("insideStart"===i||"insideEnd"===i||"end"===i)return Ede(r,i,n,w,t);a=((e,t,n)=>{var{cx:a,cy:r,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===n){var{x:u,y:d}=hae(a,r,i+t,c);return{x:u,y:d,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:a,y:r,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:a,y:r,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:a,y:r,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:f}=hae(a,r,h,c);return{x:p,y:f,textAnchor:"middle",verticalAnchor:"middle"}})(t,r.offset,r.position)}else a=((e,t)=>{var n,{parentViewBox:a,offset:r,position:s}=e;null==a||Tde(a)||(n=a);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u}=t,d=i,h=i+(l-c)/2,p=(d+h)/2,f=(l+c)/2,m=d+l/2,g=u>=0?1:-1,x=g*r,v=g>0?"end":"start",y=g>0?"start":"end",b=l>=0?1:-1,w=b*r,k=b>0?"end":"start",N=b>0?"start":"end";if("top"===s)return vde(vde({},{x:d+l/2,y:o-x,textAnchor:"middle",verticalAnchor:v}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===s)return vde(vde({},{x:h+c/2,y:o+u+x,textAnchor:"middle",verticalAnchor:y}),n?{height:Math.max(n.y+n.height-(o+u),0),width:c}:{});if("left"===s){var j={x:p-w,y:o+u/2,textAnchor:k,verticalAnchor:"middle"};return vde(vde({},j),n?{width:Math.max(j.x-n.x,0),height:u}:{})}if("right"===s){var S={x:p+f+w,y:o+u/2,textAnchor:N,verticalAnchor:"middle"};return vde(vde({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:u}:{})}var C=n?{width:f,height:u}:{};return"insideLeft"===s?vde({x:p+w,y:o+u/2,textAnchor:N,verticalAnchor:"middle"},C):"insideRight"===s?vde({x:p+f-w,y:o+u/2,textAnchor:k,verticalAnchor:"middle"},C):"insideTop"===s?vde({x:d+l/2,y:o+x,textAnchor:"middle",verticalAnchor:y},C):"insideBottom"===s?vde({x:h+c/2,y:o+u-x,textAnchor:"middle",verticalAnchor:v},C):"insideTopLeft"===s?vde({x:d+w,y:o+x,textAnchor:N,verticalAnchor:y},C):"insideTopRight"===s?vde({x:d+l-w,y:o+x,textAnchor:k,verticalAnchor:y},C):"insideBottomLeft"===s?vde({x:h+w,y:o+u-x,textAnchor:N,verticalAnchor:v},C):"insideBottomRight"===s?vde({x:h+c-w,y:o+u-x,textAnchor:k,verticalAnchor:v},C):s&&"object"===typeof s&&(O1(s.x)||_1(s.x))&&(O1(s.y)||_1(s.y))?vde({x:i+D1(s.x,f),y:o+D1(s.y,u),textAnchor:"end",verticalAnchor:"end"},C):vde({x:m,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)})(r,t);return o.createElement(pde,{zIndex:r.zIndex},o.createElement(dde,bde({ref:p,className:eg("recharts-label",d)},w,a,{textAnchor:ade(w.textAnchor)?w.textAnchor:a.textAnchor,breakAll:h}),n))}Ade.displayName="Label";var _de=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return!0===e?o.createElement(Ade,bde({key:"label-implicit"},a)):R1(e)?o.createElement(Ade,bde({key:"label-implicit",value:e},a)):(0,o.isValidElement)(e)?e.type===Ade?(0,o.cloneElement)(e,vde({key:"label-implicit"},a)):o.createElement(Ade,bde({key:"label-implicit",content:e},a)):Cde(e)?o.createElement(Ade,bde({key:"label-implicit",content:e},a)):e&&"object"===typeof e?o.createElement(Ade,bde({},e,{key:"label-implicit"},a)):null};function Ode(e){var{label:t,labelRef:n}=e,a=Nde();return _de(t,a,n)||null}var Rde=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Pde=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,o.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var a={};return Object.keys(n).forEach(e=>{wce(e)&&(a[e]=t||(t=>n[e](n,t)))}),a},Mde=(e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var a=null;return Object.keys(e).forEach(r=>{var s=e[r];wce(r)&&"function"===typeof s&&(a||(a={}),a[r]=((e,t,n)=>a=>(e(t,n,a),null))(s,t,n))}),a};function Dde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Fde{static create(e){return new Fde(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var r=this.bandwidth?this.bandwidth():0;return this.scale(e)+r}if(t){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],a=t[t.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}Dde(Fde,"EPS",1e-4);function Lde(e,t){if(t<1)return[];if(1===t)return e;for(var n=[],a=0;a<e.length;a+=t){var r=e[a];void 0!==r&&n.push(r)}return n}function zde(e,t,n){return function(e){var{width:t,height:n}=e,a=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),r=a*Math.PI/180,s=Math.atan(n/t),i=r>s&&r<Math.PI-s?n/Math.sin(r):t/Math.cos(r);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},n)}function Bde(e,t,n,a,r){if(e*t<e*a||e*t>e*r)return!1;var s=n();return e*(t-e*s/2-a)>=0&&e*(t+e*s/2-r)<=0}function Ude(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Wde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ude(Object(n),!0).forEach(function(t){Vde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ude(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hde(e,t,n){var a,{tick:r,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!s||!s.length||!r)return[];if(O1(c)||Zle)return null!==(a=function(e,t){return Lde(e,t+1)}(s,O1(c)?c:0))&&void 0!==a?a:[];var p=[],f="top"===l||"bottom"===l?"width":"height",m=d&&"width"===f?Lue(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(e,a)=>{var r="function"===typeof u?u(e.value,a):e.value;return"width"===f?zde(Lue(r,{fontSize:t,letterSpacing:n}),m,h):Lue(r,{fontSize:t,letterSpacing:n})[f]},x=s.length>=2?I1(s[1].coordinate-s[0].coordinate):1,v=function(e,t,n){var a="width"===n,{x:r,y:s,width:i,height:o}=e;return 1===t?{start:a?r:s,end:a?r+i:s+o}:{start:a?r+i:s+o,end:a?r:s}}(i,x,f);return"equidistantPreserveStart"===c?function(e,t,n,a,r){for(var s,i=(a||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var t=null===a||void 0===a?void 0:a[c];if(void 0===t)return{v:Lde(a,u)};var s,i=c,h=()=>(void 0===s&&(s=n(t,i)),s),p=t.coordinate,f=0===c||Bde(e,p,h,d,l);f||(c=0,d=o,u+=1),f&&(d=p+e*(h()/2+r),c+=u)};u<=i.length;)if(s=h())return s.v;return[]}(x,v,g,s,o):"equidistantPreserveEnd"===c?function(e,t,n,a,r){var s=(a||[]).slice().length;if(0===s)return[];for(var{start:i,end:o}=t,l=1;l<=s;l++){for(var c=(s-1)%l,u=i,d=!0,h=function(){var t,s=a[p],i=p,l=()=>(void 0===t&&(t=n(s,i)),t),h=s.coordinate,f=p===c||Bde(e,h,l,u,o);if(!f)return d=!1,1;f&&(u=h+e*(l()/2+r))},p=c;p<s&&!h();p+=l);if(d){for(var f=[],m=c;m<s;m+=l)f.push(a[m]);return f}}return[]}(x,v,g,s,o):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,n,a,r,s){var i=(a||[]).slice(),o=i.length,{start:l,end:c}=t;if(s){var u=a[o-1],d=n(u,o-1),h=e*(u.coordinate+e*d/2-c);i[o-1]=u=Wde(Wde({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),null!=u.tickCoord&&Bde(e,u.tickCoord,()=>d,l,c)&&(c=u.tickCoord-e*(d/2+r),i[o-1]=Wde(Wde({},u),{},{isShow:!0}))}for(var p=s?o-1:o,f=function(t){var a,s=i[t],o=()=>(void 0===a&&(a=n(s,t)),a);if(0===t){var u=e*(s.coordinate-e*o()/2-l);i[t]=s=Wde(Wde({},s),{},{tickCoord:u<0?s.coordinate-u*e:s.coordinate})}else i[t]=s=Wde(Wde({},s),{},{tickCoord:s.coordinate});null!=s.tickCoord&&Bde(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+r),i[t]=Wde(Wde({},s),{},{isShow:!0}))},m=0;m<p;m++)f(m);return i}(x,v,g,s,o,"preserveStartEnd"===c):function(e,t,n,a,r){for(var s=(a||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,c=function(t){var a,c=s[t],u=()=>(void 0===a&&(a=n(c,t)),a);if(t===i-1){var d=e*(c.coordinate+e*u()/2-l);s[t]=c=Wde(Wde({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else s[t]=c=Wde(Wde({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&Bde(e,c.tickCoord,u,o,l)&&(l=c.tickCoord-e*(u()/2+r),s[t]=Wde(Wde({},c),{},{isShow:!0}))},u=i-1;u>=0;u--)c(u);return s}(x,v,g,s,o),p.filter(e=>e.isShow))}var Gde=["axisLine","width","height","className","hide","ticks","axisType"];function qde(){return qde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qde.apply(null,arguments)}function Kde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Xde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kde(Object(n),!0).forEach(function(t){Yde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $de={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:xae.axis};function Qde(e){var{x:t,y:n,width:a,height:r,orientation:s,mirror:i,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=Xde(Xde(Xde({},c),Sce(l)),{},{fill:"none"});if("top"===s||"bottom"===s){var d=+("top"===s&&!i||"bottom"===s&&i);u=Xde(Xde({},u),{},{x1:t,y1:n+d*r,x2:t+a,y2:n+d*r})}else{var h=+("left"===s&&!i||"right"===s&&i);u=Xde(Xde({},u),{},{x1:t+h*a,y1:n,x2:t+h*a,y2:n+r})}return o.createElement("line",qde({},u,{className:eg("recharts-cartesian-axis-line",C1()(l,"className"))}))}function Jde(e){var t,{option:n,tickProps:a,value:r}=e,s=eg(a.className,"recharts-cartesian-axis-tick-value");if(o.isValidElement(n))t=o.cloneElement(n,Xde(Xde({},a),{},{className:s}));else if("function"===typeof n)t=n(Xde(Xde({},a),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";"boolean"!==typeof n&&(i=eg(i,null===n||void 0===n?void 0:n.className)),t=o.createElement(dde,qde({},a,{className:i}),r)}return t}var Zde=(0,o.forwardRef)((e,t)=>{var{ticks:n=[],tick:a,tickLine:r,stroke:s,tickFormatter:i,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:p,y:f,width:m,height:g,tickSize:x,tickMargin:v,fontSize:y,letterSpacing:b,getTicksConfig:w,events:k,axisType:N}=e,j=Hde(Xde(Xde({},w),{},{ticks:n}),y,b),S=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(d,h),C=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(d,h),E=Sce(w),T=Cce(a),I={};"object"===typeof r&&(I=r);var A=Xde(Xde({},E),{},{fill:"none"},I),_=j.map(e=>Xde({entry:e},function(e,t,n,a,r,s,i,o,l){var c,u,d,h,p,f,m=o?-1:1,g=e.tickSize||i,x=O1(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":c=u=e.coordinate,f=(d=(h=n+ +!o*r)-m*g)-m*l,p=x;break;case"left":d=h=e.coordinate,p=(c=(u=t+ +!o*a)-m*g)-m*l,f=x;break;case"right":d=h=e.coordinate,p=(c=(u=t+ +o*a)+m*g)+m*l,f=x;break;default:c=u=e.coordinate,f=(d=(h=n+ +o*r)+m*g)+m*l,p=x}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:p,y:f}}}(e,p,f,m,g,d,x,h,v))),O=_.map(e=>{var{entry:t,line:n}=e;return o.createElement(Tue,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},r&&o.createElement("line",qde({},A,n,{className:eg("recharts-cartesian-axis-tick-line",C1()(r,"className"))})))}),R=_.map((e,t)=>{var{entry:n,tick:r}=e,d=Xde(Xde(Xde(Xde({textAnchor:S,verticalAnchor:C},E),{},{stroke:"none",fill:s},T),r),{},{index:t,payload:n,visibleTicksCount:j.length,tickFormatter:i,padding:c},u);return o.createElement(Tue,qde({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(n.value,"-").concat(n.coordinate,"-").concat(n.tickCoord)},Mde(k,n,t)),a&&o.createElement(Jde,{option:a,tickProps:d,value:"".concat("function"===typeof i?i(n.value,t):n.value).concat(l||"")}))});return o.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},R.length>0&&o.createElement(pde,{zIndex:xae.label},o.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},R)),O.length>0&&o.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},O))}),ehe=(0,o.forwardRef)((e,t)=>{var{axisLine:n,width:a,height:r,className:s,hide:i,ticks:l,axisType:c}=e,u=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Gde),[d,h]=(0,o.useState)(""),[p,f]=(0,o.useState)(""),m=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:r=0,tickMargin:s=0}=e,i=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var o=n?n.getBoundingClientRect().width:0,l=i+(r+s)+o+(n?a:0);return Math.round(l)}return 0})({ticks:m.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,o.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=t;var n=t[0];if(n){var a=window.getComputedStyle(n),r=a.fontSize,s=a.letterSpacing;r===d&&s===p||(h(r),f(s))}}},[d,p]);return i||null!=a&&a<=0||null!=r&&r<=0?null:o.createElement(pde,{zIndex:e.zIndex},o.createElement(Tue,{className:eg("recharts-cartesian-axis",s)},o.createElement(Qde,{x:e.x,y:e.y,width:a,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Sce(e)}),o.createElement(Zde,{ref:g,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),o.createElement(kde,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},o.createElement(Ode,{label:e.label,labelRef:e.labelRef}),e.children)))}),the=o.forwardRef((e,t)=>{var n=bue(e,$de);return o.createElement(ehe,qde({},n,{ref:t}))});the.displayName="CartesianAxis";var nhe=["domain","range"],ahe=["domain","range"];function rhe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function she(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function ihe(e,t){if(e===t)return!0;var{domain:n,range:a}=e,r=rhe(e,nhe),{domain:s,range:i}=t,o=rhe(t,ahe);return!!she(n,s)&&(!!she(a,i)&&mce(r,o))}var ohe=["dangerouslySetInnerHTML","ticks","scale"],lhe=["id","scale"];function che(){return che=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},che.apply(null,arguments)}function uhe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dhe(e){var t=y6(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(Uoe(e)):n.current!==e&&t(Woe({prev:n.current,next:e})),n.current=e},[e,t]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(Voe(n.current)),n.current=null)},[t]),null}var hhe=e=>{var{xAxisId:t,className:n}=e,a=N6(u8),r=h8(),s="xAxis",i=N6(e=>Kse(e,s,t,r)),l=N6(e=>Dse(e,t)),c=N6(e=>zse(e,t)),u=N6(e=>sre(e,t));if(null==l||null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:p}=e,f=uhe(e,ohe),{id:m,scale:g}=u,x=uhe(u,lhe);return o.createElement(the,che({},f,x,{x:c.x,y:c.y,width:l.width,height:l.height,className:eg("recharts-".concat(s," ").concat(s),n),viewBox:a,ticks:i,axisType:s}))},phe={allowDataOverflow:rre.allowDataOverflow,allowDecimals:rre.allowDecimals,allowDuplicatedCategory:rre.allowDuplicatedCategory,angle:rre.angle,axisLine:$de.axisLine,height:rre.height,hide:!1,includeHidden:rre.includeHidden,interval:rre.interval,minTickGap:rre.minTickGap,mirror:rre.mirror,orientation:rre.orientation,padding:rre.padding,reversed:rre.reversed,scale:rre.scale,tick:rre.tick,tickCount:rre.tickCount,tickLine:$de.tickLine,tickSize:$de.tickSize,type:rre.type,xAxisId:0},fhe=e=>{var t=bue(e,phe);return o.createElement(o.Fragment,null,o.createElement(dhe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),o.createElement(hhe,t))},mhe=o.memo(fhe,ihe);mhe.displayName="XAxis";var ghe=["dangerouslySetInnerHTML","ticks","scale"],xhe=["id","scale"];function vhe(){return vhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vhe.apply(null,arguments)}function yhe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bhe(e){var t=y6(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(Hoe(e)):n.current!==e&&t(Goe({prev:n.current,next:e})),n.current=e},[e,t]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(qoe(n.current)),n.current=null)},[t]),null}var whe=e=>{var{yAxisId:t,className:n,width:a,label:r}=e,s=(0,o.useRef)(null),i=(0,o.useRef)(null),l=N6(u8),c=h8(),u=y6(),d="yAxis",h=N6(e=>Use(e,t)),p=N6(e=>Bse(e,t)),f=N6(e=>Kse(e,d,t,c)),m=N6(e=>lre(e,t));if((0,o.useLayoutEffect)(()=>{if("auto"===a&&h&&!Cde(r)&&!(0,o.isValidElement)(r)&&null!=m){var e=s.current;if(e){var n=e.getCalculatedWidth();Math.round(h.width)!==Math.round(n)&&u($oe({id:t,width:n}))}}},[f,h,u,r,t,a,m]),null==h||null==p||null==m)return null;var{dangerouslySetInnerHTML:g,ticks:x,scale:v}=e,y=yhe(e,ghe),{id:b,scale:w}=m,k=yhe(m,xhe);return o.createElement(the,vhe({},y,k,{ref:s,labelRef:i,x:p.x,y:p.y,tickTextProps:"auto"===a?{width:void 0}:{width:a},width:h.width,height:h.height,className:eg("recharts-".concat(d," ").concat(d),n),viewBox:l,ticks:f,axisType:d}))},khe={allowDataOverflow:ore.allowDataOverflow,allowDecimals:ore.allowDecimals,allowDuplicatedCategory:ore.allowDuplicatedCategory,angle:ore.angle,axisLine:$de.axisLine,hide:!1,includeHidden:ore.includeHidden,interval:ore.interval,minTickGap:ore.minTickGap,mirror:ore.mirror,orientation:ore.orientation,padding:ore.padding,reversed:ore.reversed,scale:ore.scale,tick:ore.tick,tickCount:ore.tickCount,tickLine:$de.tickLine,tickSize:$de.tickSize,type:ore.type,width:ore.width,yAxisId:0},Nhe=e=>{var t=bue(e,khe);return o.createElement(o.Fragment,null,o.createElement(bhe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),o.createElement(whe,t))},jhe=o.memo(Nhe,ihe);function She(){return She=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},She.apply(null,arguments)}function Che(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ehe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Che(Object(n),!0).forEach(function(t){The(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Che(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function The(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ihe(e){return Array.isArray(e)&&R1(e[0])&&R1(e[1])?e.join(" ~ "):e}jhe.displayName="YAxis";var Ahe=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:r={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=e,f=Ehe({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=Ehe({margin:0},r),g=!B1(d),x=g?d:"",v=eg("recharts-default-tooltip",c),y=eg("recharts-tooltip-label",u);g&&h&&void 0!==s&&null!==s&&(x=h(d,s));var b=p?{role:"status","aria-live":"assertive"}:{};return o.createElement("div",She({className:v,style:f},b),o.createElement("p",{className:y,style:m},o.isValidElement(x)?x:"".concat(x)),(()=>{if(s&&s.length){var e=(l?S6()(s,l):s).map((e,n)=>{if("none"===e.type)return null;var r=e.formatter||i||Ihe,{value:l,name:c}=e,u=l,d=c;if(r){var h=r(l,c,e,n,s);if(Array.isArray(h))[u,d]=h;else{if(null==h)return null;u=h}}var p=Ehe({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a);return o.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},R1(d)?o.createElement("span",{className:"recharts-tooltip-item-name"},d):null,R1(d)?o.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,o.createElement("span",{className:"recharts-tooltip-item-value"},u),o.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return o.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},_he="recharts-tooltip-wrapper",Ohe={visibility:"hidden"};function Rhe(e){var{coordinate:t,translateX:n,translateY:a}=e;return eg(_he,{["".concat(_he,"-right")]:O1(n)&&t&&O1(t.x)&&n>=t.x,["".concat(_he,"-left")]:O1(n)&&t&&O1(t.x)&&n<t.x,["".concat(_he,"-bottom")]:O1(a)&&t&&O1(t.y)&&a>=t.y,["".concat(_he,"-top")]:O1(a)&&t&&O1(t.y)&&a<t.y})}function Phe(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(s&&O1(s[a]))return s[a];var u=n[a]-o-(r>0?r:0),d=n[a]+r;if(t[a])return i[a]?u:d;var h=l[a];return null==h?0:i[a]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+o>h+c?Math.max(u,h):Math.max(d,h)}function Mhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Dhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mhe(Object(n),!0).forEach(function(t){Fhe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mhe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fhe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lhe extends o.PureComponent{constructor(){super(...arguments),Fhe(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fhe(this,"handleKeyDown",e=>{var t,n,a,r;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(a=null===(r=this.props.coordinate)||void 0===r?void 0:r.y)&&void 0!==a?a:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:a,children:r,coordinate:s,hasPayload:i,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:p,wrapperStyle:f,lastBoundingBox:m,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:v,cssProperties:y}=function(e){var t,n,a,{allowEscapeViewBox:r,coordinate:s,offsetTopLeft:i,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=e;return t=c.height>0&&c.width>0&&s?function(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=Phe({allowEscapeViewBox:r,coordinate:s,key:"x",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),translateY:a=Phe({allowEscapeViewBox:r,coordinate:s,key:"y",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:u}):Ohe,{cssProperties:t,cssClasses:Rhe({translateX:n,translateY:a,coordinate:s})}}({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:p}),b=x?{}:Dhe(Dhe({transition:l&&e?"transform ".concat(n,"ms ").concat(a):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),w=Dhe(Dhe({},b),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},f);return o.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:w,ref:g},r)}}var zhe=n(4332),Bhe=n.n(zhe);var Uhe,Whe,Vhe,Hhe,Ghe,qhe,Khe,Xhe,Yhe,$he,Qhe,Jhe,Zhe,epe;function tpe(){}function npe(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ape(e){this._context=e}function rpe(e){this._context=e}function spe(e){this._context=e}ape.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:npe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:npe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},rpe.prototype={areaStart:tpe,areaEnd:tpe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:npe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},spe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:npe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class ipe{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function ope(e){this._context=e}function lpe(e){this._context=e}function cpe(e){return new lpe(e)}function upe(e){return e<0?-1:1}function dpe(e,t,n){var a=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(a||r<0&&-0),i=(n-e._y1)/(r||a<0&&-0),o=(s*r+i*a)/(a+r);return(upe(s)+upe(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function hpe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ppe(e,t,n){var a=e._x0,r=e._y0,s=e._x1,i=e._y1,o=(s-a)/3;e._context.bezierCurveTo(a+o,r+o*t,s-o,i-o*n,s,i)}function fpe(e){this._context=e}function mpe(e){this._context=new gpe(e)}function gpe(e){this._context=e}function xpe(e){this._context=e}function vpe(e){var t,n,a=e.length-1,r=new Array(a),s=new Array(a),i=new Array(a);for(r[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,s[a-1]=7,i[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)n=r[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(r[a-1]=i[a-1]/s[a-1],t=a-2;t>=0;--t)r[t]=(i[t]-r[t+1])/s[t];for(s[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function ype(e,t){this._context=e,this._t=t}function bpe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}ope.prototype={areaStart:tpe,areaEnd:tpe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},lpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},fpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ppe(this,this._t0,hpe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ppe(this,hpe(this,n=dpe(this,e,t)),n);break;default:ppe(this,this._t0,n=dpe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(mpe.prototype=Object.create(fpe.prototype)).point=function(e,t){fpe.prototype.point.call(this,t,e)},gpe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,r,s){this._context.bezierCurveTo(t,e,a,n,s,r)}},xpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var a=vpe(e),r=vpe(t),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(a[0][s],r[0][s],a[1][s],r[1][s],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},ype.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const wpe=Math.PI,kpe=2*wpe,Npe=1e-6,jpe=kpe-Npe;function Spe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Cpe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Spe:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return Spe;const n=10**t;return function(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(Uhe||(Uhe=bpe(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Whe||(Whe=bpe(["Z"]))))}lineTo(e,t){this._append(Vhe||(Vhe=bpe(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,a){this._append(Hhe||(Hhe=bpe(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+a)}bezierCurveTo(e,t,n,a,r,s){this._append(Ghe||(Ghe=bpe(["C",",",",",",",",",",",""])),+e,+t,+n,+a,this._x1=+r,this._y1=+s)}arcTo(e,t,n,a,r){if(e=+e,t=+t,n=+n,a=+a,(r=+r)<0)throw new Error("negative radius: ".concat(r));let s=this._x1,i=this._y1,o=n-e,l=a-t,c=s-e,u=i-t,d=c*c+u*u;if(null===this._x1)this._append(qhe||(qhe=bpe(["M",",",""])),this._x1=e,this._y1=t);else if(d>Npe)if(Math.abs(u*o-l*c)>Npe&&r){let h=n-s,p=a-i,f=o*o+l*l,m=h*h+p*p,g=Math.sqrt(f),x=Math.sqrt(d),v=r*Math.tan((wpe-Math.acos((f+d-m)/(2*g*x)))/2),y=v/x,b=v/g;Math.abs(y-1)>Npe&&this._append(Xhe||(Xhe=bpe(["L",",",""])),e+y*c,t+y*u),this._append(Yhe||(Yhe=bpe(["A",",",",0,0,",",",",",""])),r,r,+(u*h>c*p),this._x1=e+b*o,this._y1=t+b*l)}else this._append(Khe||(Khe=bpe(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,a,r,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error("negative radius: ".concat(n));let i=n*Math.cos(a),o=n*Math.sin(a),l=e+i,c=t+o,u=1^s,d=s?a-r:r-a;null===this._x1?this._append($he||($he=bpe(["M",",",""])),l,c):(Math.abs(this._x1-l)>Npe||Math.abs(this._y1-c)>Npe)&&this._append(Qhe||(Qhe=bpe(["L",",",""])),l,c),n&&(d<0&&(d=d%kpe+kpe),d>jpe?this._append(Jhe||(Jhe=bpe(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-i,t-o,n,n,u,this._x1=l,this._y1=c):d>Npe&&this._append(Zhe||(Zhe=bpe(["A",",",",0,",",",",",",",""])),n,n,+(d>=wpe),u,this._x1=e+n*Math.cos(r),this._y1=t+n*Math.sin(r)))}rect(e,t,n,a){this._append(epe||(epe=bpe(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+a,-n)}toString(){return this._}}function Epe(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new Cpe(t)}function Tpe(e){return e[0]}function Ipe(e){return e[1]}function Ape(e,t){var n=I6(!0),a=null,r=cpe,s=null,i=Epe(o);function o(o){var l,c,u,d=(o=T6(o)).length,h=!1;for(null==a&&(s=r(u=i())),l=0;l<=d;++l)!(l<d&&n(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(u)return s=null,u+""||null}return e="function"===typeof e?e:void 0===e?Tpe:I6(e),t="function"===typeof t?t:void 0===t?Ipe:I6(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:I6(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:I6(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:I6(!!e),o):n},o.curve=function(e){return arguments.length?(r=e,null!=a&&(s=r(a)),o):r},o.context=function(e){return arguments.length?(null==e?a=s=null:s=r(a=e),o):a},o}function _pe(e,t,n){var a=null,r=I6(!0),s=null,i=cpe,o=null,l=Epe(c);function c(c){var u,d,h,p,f,m=(c=T6(c)).length,g=!1,x=new Array(m),v=new Array(m);for(null==s&&(o=i(f=l())),u=0;u<=m;++u){if(!(u<m&&r(p=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(x[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(x[u]=+e(p,u,c),v[u]=+t(p,u,c),o.point(a?+a(p,u,c):x[u],n?+n(p,u,c):v[u]))}if(f)return o=null,f+""||null}function u(){return Ape().defined(r).curve(i).context(s)}return e="function"===typeof e?e:void 0===e?Tpe:I6(+e),t="function"===typeof t?t:I6(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Ipe:I6(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:I6(+t),a=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:I6(+t),c):e},c.x1=function(e){return arguments.length?(a=null==e?null:"function"===typeof e?e:I6(+e),c):a},c.y=function(e){return arguments.length?(t="function"===typeof e?e:I6(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:I6(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:I6(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(a).y(t)},c.defined=function(e){return arguments.length?(r="function"===typeof e?e:I6(!!e),c):r},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}function Ope(){return Ope=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ope.apply(null,arguments)}function Rpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ppe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rpe(Object(n),!0).forEach(function(t){Mpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rpe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dpe={curveBasisClosed:function(e){return new rpe(e)},curveBasisOpen:function(e){return new spe(e)},curveBasis:function(e){return new ape(e)},curveBumpX:function(e){return new ipe(e,!0)},curveBumpY:function(e){return new ipe(e,!1)},curveLinearClosed:function(e){return new ope(e)},curveLinear:cpe,curveMonotoneX:function(e){return new fpe(e)},curveMonotoneY:function(e){return new mpe(e)},curveNatural:function(e){return new xpe(e)},curveStep:function(e){return new ype(e,.5)},curveStepAfter:function(e){return new ype(e,1)},curveStepBefore:function(e){return new ype(e,0)}},Fpe=e=>Q1(e.x)&&Q1(e.y),Lpe=e=>null!=e.base&&Fpe(e.base)&&Fpe(e),zpe=e=>e.x,Bpe=e=>e.y,Upe=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:r,connectNulls:s=!1}=e,i=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(U1(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Dpe[n]||cpe:Dpe["".concat(n).concat("vertical"===t?"Y":"X")]})(t,r),o=s?n.filter(Fpe):n;if(Array.isArray(a)){var l=n.map((e,t)=>Ppe(Ppe({},e),{},{base:a[t]}));return("vertical"===r?_pe().y(Bpe).x1(zpe).x0(e=>e.base.x):_pe().x(zpe).y1(Bpe).y0(e=>e.base.y)).defined(Lpe).curve(i)(s?l.filter(Lpe):l)}return("vertical"===r&&O1(a)?_pe().y(Bpe).x1(zpe).x0(a):O1(a)?_pe().x(zpe).y1(Bpe).y0(a):Ape().x(zpe).y(Bpe)).defined(Fpe).curve(i)(o)},Wpe=e=>{var{className:t,points:n,path:a,pathRef:r}=e,s=y8();if((!n||!n.length)&&!a)return null;var i={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},l=n&&n.length?Upe(i):a;return o.createElement("path",Ope({},Sce(e),Pde(e),{className:eg("recharts-curve",t),d:null===l?void 0:l,ref:r}))},Vpe=["x","y","top","left","width","height","className"];function Hpe(){return Hpe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hpe.apply(null,arguments)}function Gpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function qpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kpe=(e,t,n,a,r,s)=>"M".concat(e,",").concat(r,"v").concat(a,"M").concat(s,",").concat(t,"h").concat(n),Xpe=e=>{var{x:t=0,y:n=0,top:a=0,left:r=0,width:s=0,height:i=0,className:l}=e,c=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Vpe),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gpe(Object(n),!0).forEach(function(t){qpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gpe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:a,left:r,width:s,height:i},c);return O1(t)&&O1(n)&&O1(s)&&O1(i)&&O1(a)&&O1(r)?o.createElement("path",Hpe({},Ece(u),{className:eg("recharts-cross",l),d:Kpe(t,n,s,i,a,r)})):null};function Ype(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function $pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ype(Object(n),!0).forEach(function(t){Qpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ype(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jpe=(e,t,n)=>e.map(e=>{return"".concat((a=e,a.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var a}).join(","),Zpe=(e,t)=>Object.keys(t).reduce((n,a)=>$pe($pe({},n),{},{[a]:e(a,t[a])}),{});function efe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?efe(Object(n),!0).forEach(function(t){nfe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):efe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nfe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var afe=(e,t,n)=>e+(t-e)*n,rfe=e=>{var{from:t,to:n}=e;return t!==n},sfe=(e,t,n)=>{var a=Zpe((t,n)=>{if(rfe(n)){var[a,r]=e(n.from,n.to,n.velocity);return tfe(tfe({},n),{},{from:a,velocity:r})}return n},t);return n<1?Zpe((e,t)=>rfe(t)&&null!=a[e]?tfe(tfe({},t),{},{velocity:afe(t.velocity,a[e].velocity,n),from:afe(t.from,a[e].from,n)}):t,t):sfe(e,a,n-1)};function ife(e,t,n,a,r,s){var i,o=a.reduce((n,a)=>tfe(tfe({},n),{},{[a]:{from:e[a],velocity:0,to:t[a]}}),{}),l=null,c=a=>{i||(i=a);var u=(a-i)/n.dt;o=sfe(n,o,u),r(tfe(tfe(tfe({},e),t),Zpe((e,t)=>t.from,o))),i=a,Object.values(o).filter(rfe).length&&(l=s.setTimeout(c))};return()=>(l=s.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}const ofe=(e,t,n,a,r,s)=>{var i,o,l=(i=e,o=t,[Object.keys(i),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==n?()=>(r(tfe(tfe({},e),t)),()=>{}):!0===n.isStepper?ife(e,t,n,l,r,s):function(e,t,n,a,r,s,i){var o,l=null,c=r.reduce((n,a)=>{var r=e[a],s=t[a];return null==r||null==s?n:tfe(tfe({},n),{},{[a]:[r,s]})},{}),u=r=>{o||(o=r);var d=(r-o)/a,h=Zpe((e,t)=>afe(...t,n(d)),c);if(s(tfe(tfe(tfe({},e),t),h)),d<1)l=i.setTimeout(u);else{var p=Zpe((e,t)=>afe(...t,n(1)),c);s(tfe(tfe(tfe({},e),t),p))}};return()=>(l=i.setTimeout(u),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,n,a,l,r,s)};var lfe=1e-4,cfe=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ufe=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),dfe=(e,t)=>n=>{var a=cfe(e,t);return ufe(a,n)},hfe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var a=(e=>{var t,n=e.split("(");if(2!==n.length||"cubic-bezier"!==n[0])return null;var a=null===(t=n[1])||void 0===t||null===(t=t.split(")")[0])||void 0===t?void 0:t.split(",");if(null==a||4!==a.length)return null;var r=a.map(e=>parseFloat(e));return[r[0],r[1],r[2],r[3]]})(t[0]);if(a)return a}return 4===t.length?t:[0,0,1,1]},pfe=(e,t,n,a)=>{var r,s,i=dfe(e,n),o=dfe(t,a),l=(r=e,s=n,e=>{var t=[...cfe(r,s).map((e,t)=>e*t).slice(1),0];return ufe(t,e)}),c=e=>e>1?1:e<0?0:e,u=e=>{for(var t=e>1?1:e,n=t,a=0;a<8;++a){var r=i(n)-t,s=l(n);if(Math.abs(r-t)<lfe||s<lfe)return o(n);n=c(n-r/s)}return o(n)};return u.isStepper=!1,u},ffe=function(){return pfe(...hfe(...arguments))},mfe=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ffe(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:a=17}=e,r=(e,r,s)=>{var i=s+(-(e-r)*t-s*n)*a/1e3,o=s*a/1e3+e;return Math.abs(o-r)<lfe&&Math.abs(i)<lfe?[r,0]:[o,i]};return r.isStepper=!0,r.dt=a,r}();default:if("cubic-bezier"===e.split("(")[0])return ffe(e)}return"function"===typeof e?e:null};class gfe{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),a=null,r=s=>{s-n>=t?e(s):"function"===typeof requestAnimationFrame&&(a=requestAnimationFrame(r))};return a=requestAnimationFrame(r),()=>{null!=a&&cancelAnimationFrame(a)}}}function xfe(){return function(e){var t=()=>null,n=!1,a=null,r=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var i=s,[o,...l]=i;return"number"===typeof o?void(a=e.setTimeout(r.bind(null,l),o)):(r(o),void(a=e.setTimeout(r.bind(null,l))))}"string"===typeof s&&t(s),"object"===typeof s&&t(s),"function"===typeof s&&s()}};return{stop:()=>{n=!0},start:e=>{n=!1,a&&(a(),a=null),r(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new gfe)}var vfe=(0,o.createContext)(xfe);var yfe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},bfe={t:0},wfe={t:1};function kfe(e){var t=bue(e,yfe),{isActive:n,canBegin:a,duration:r,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d="auto"===n?!Zle:n,h=function(e,t){var n=(0,o.useContext)(vfe);return(0,o.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}(t.animationId,t.animationManager),[p,f]=(0,o.useState)(d?bfe:wfe),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{d||f(wfe)},[d]),(0,o.useEffect)(()=>{if(!d||!a)return V1;var e=ofe(bfe,wfe,mfe(s),r,f,h.getTimeoutController());return h.start([c,i,()=>{m.current=e()},r,l]),()=>{h.stop(),m.current&&m.current(),l()}},[d,a,r,s,i,c,l,h]),u(p.t)}function Nfe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,o.useRef)(M1(t)),a=(0,o.useRef)(e);return a.current!==e&&(n.current=M1(t),a.current=e),n.current}var jfe,Sfe,Cfe,Efe,Tfe,Ife,Afe,_fe,Ofe,Rfe,Pfe=["radius"],Mfe=["radius"];function Dfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ffe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dfe(Object(n),!0).forEach(function(t){Lfe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dfe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lfe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zfe(){return zfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zfe.apply(null,arguments)}function Bfe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ufe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Wfe,Vfe,Hfe,Gfe,qfe,Kfe,Xfe,Yfe=(e,t,n,a,r)=>{var s,i=E1(n),o=E1(a),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,u=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0;if(l>0&&r instanceof Array){for(var h=[0,0,0,0],p=0;p<4;p++)h[p]=r[p]>l?l:r[p];s=T1(jfe||(jfe=Ufe(["M",",",""])),e,t+c*h[0]),h[0]>0&&(s+=T1(Sfe||(Sfe=Ufe(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,e+u*h[0],t)),s+=T1(Cfe||(Cfe=Ufe(["L ",",",""])),e+n-u*h[1],t),h[1]>0&&(s+=T1(Efe||(Efe=Ufe(["A ",",",",0,0,",",\n        ",",",""])),h[1],h[1],d,e+n,t+c*h[1])),s+=T1(Tfe||(Tfe=Ufe(["L ",",",""])),e+n,t+a-c*h[2]),h[2]>0&&(s+=T1(Ife||(Ife=Ufe(["A ",",",",0,0,",",\n        ",",",""])),h[2],h[2],d,e+n-u*h[2],t+a)),s+=T1(Afe||(Afe=Ufe(["L ",",",""])),e+u*h[3],t+a),h[3]>0&&(s+=T1(_fe||(_fe=Ufe(["A ",",",",0,0,",",\n        ",",",""])),h[3],h[3],d,e,t+a-c*h[3])),s+="Z"}else if(l>0&&r===+r&&r>0){var f=Math.min(l,r);s=T1(Ofe||(Ofe=Ufe(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+c*f,f,f,d,e+u*f,t,e+n-u*f,t,f,f,d,e+n,t+c*f,e+n,t+a-c*f,f,f,d,e+n-u*f,t+a,e+u*f,t+a,f,f,d,e,t+a-c*f)}else s=T1(Rfe||(Rfe=Ufe(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return s},$fe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qfe=e=>{var t=bue(e,$fe),n=(0,o.useRef)(null),[a,r]=(0,o.useState)(-1);(0,o.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&r(e)}catch(SEe){}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:g}=t,x=(0,o.useRef)(l),v=(0,o.useRef)(c),y=(0,o.useRef)(s),b=(0,o.useRef)(i),w=Nfe((0,o.useMemo)(()=>({x:s,y:i,width:l,height:c,radius:u}),[s,i,l,c,u]),"rectangle-");if(s!==+s||i!==+i||l!==+l||c!==+c||0===l||0===c)return null;var k=eg("recharts-rectangle",d);if(!g){var N=Ece(t),{radius:j}=N,S=Bfe(N,Pfe);return o.createElement("path",zfe({},S,{x:E1(s),y:E1(i),width:E1(l),height:E1(c),radius:"number"===typeof u?u:void 0,className:k,d:Yfe(s,i,l,c,u)}))}var C=x.current,E=v.current,T=y.current,I=b.current,A="0px ".concat(-1===a?1:a,"px"),_="".concat(a,"px 0px"),O=Jpe(["strokeDasharray"],p,"string"===typeof h?h:$fe.animationEasing);return o.createElement(kfe,{animationId:w,key:w,canBegin:a>0,duration:p,easing:h,isActive:g,begin:f},e=>{var a,r=L1(C,l,e),d=L1(E,c,e),h=L1(T,s,e),p=L1(I,i,e);n.current&&(x.current=r,v.current=d,y.current=h,b.current=p),a=m?e>0?{transition:O,strokeDasharray:_}:{strokeDasharray:A}:{strokeDasharray:_};var f=Ece(t),{radius:g}=f,w=Bfe(f,Mfe);return o.createElement("path",zfe({},w,{radius:"number"===typeof u?u:void 0,className:k,d:Yfe(h,p,r,d,u),ref:n,style:Ffe(Ffe({},a),t.style)}))})};function Jfe(e){var{cx:t,cy:n,radius:a,startAngle:r,endAngle:s}=e;return{points:[hae(t,n,a,r),hae(t,n,a,s)],cx:t,cy:n,radius:a,startAngle:r,endAngle:s}}function Zfe(){return Zfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zfe.apply(null,arguments)}function eme(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var tme=e=>{var{cx:t,cy:n,radius:a,angle:r,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,c=o*(i?1:-1)+a,u=Math.asin(o/c)/uae,d=l?r:r+s*u,h=l?r-s*u:r;return{center:hae(t,n,c,d),circleTangency:hae(t,n,a,d),lineTangency:hae(t,n,c*Math.cos(u*uae),h),theta:u}},nme=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:r,startAngle:s,endAngle:i}=e,o=((e,t)=>I1(t-e)*Math.min(Math.abs(t-e),359.999))(s,i),l=s+o,c=hae(t,n,r,s),u=hae(t,n,r,l),d=T1(Wfe||(Wfe=eme(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,r,r,+(Math.abs(o)>180),+(s>l),u.x,u.y);if(a>0){var h=hae(t,n,a,s),p=hae(t,n,a,l);d+=T1(Vfe||(Vfe=eme(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),p.x,p.y,a,a,+(Math.abs(o)>180),+(s<=l),h.x,h.y)}else d+=T1(Hfe||(Hfe=eme(["L ",","," Z"])),t,n);return d},ame={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rme=e=>{var t=bue(e,ame),{cx:n,cy:a,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(s<r||u===d)return null;var p,f=eg("recharts-sector",h),m=s-r,g=D1(i,m,0,!0);return p=g>0&&Math.abs(u-d)<360?(e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:r,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:c}=e,u=I1(c-l),{circleTangency:d,lineTangency:h,theta:p}=tme({cx:t,cy:n,radius:r,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),{circleTangency:f,lineTangency:m,theta:g}=tme({cx:t,cy:n,radius:r,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),x=o?Math.abs(l-c):Math.abs(l-c)-p-g;if(x<0)return i?T1(Gfe||(Gfe=eme(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),h.x,h.y,s,s,2*s,s,s,2*-s):nme({cx:t,cy:n,innerRadius:a,outerRadius:r,startAngle:l,endAngle:c});var v=T1(qfe||(qfe=eme(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),h.x,h.y,s,s,+(u<0),d.x,d.y,r,r,+(x>180),+(u<0),f.x,f.y,s,s,+(u<0),m.x,m.y);if(a>0){var{circleTangency:y,lineTangency:b,theta:w}=tme({cx:t,cy:n,radius:a,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:k,lineTangency:N,theta:j}=tme({cx:t,cy:n,radius:a,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),S=o?Math.abs(l-c):Math.abs(l-c)-w-j;if(S<0&&0===s)return"".concat(v,"L").concat(t,",").concat(n,"Z");v+=T1(Kfe||(Kfe=eme(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),N.x,N.y,s,s,+(u<0),k.x,k.y,a,a,+(S>180),+(u>0),y.x,y.y,s,s,+(u<0),b.x,b.y)}else v+=T1(Xfe||(Xfe=eme(["L",",","Z"])),t,n);return v})({cx:n,cy:a,innerRadius:r,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):nme({cx:n,cy:a,innerRadius:r,outerRadius:s,startAngle:u,endAngle:d}),o.createElement("path",Zfe({},Ece(t),{className:f,d:p}))};function sme(e,t,n){if("horizontal"===e)return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if("vertical"===e)return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(Rde(t)){if("centric"===e){var{cx:a,cy:r,innerRadius:s,outerRadius:i,angle:o}=t,l=hae(a,r,s,o),c=hae(a,r,i,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return Jfe(t)}}function ime(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ome(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ime(Object(n),!0).forEach(function(t){lme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ime(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lme(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cme=()=>{var e=N6(Rre),t=N6($ie),n=N6(Kie);return X6(e&&n?ome(ome({},e),{},{scale:n}):void 0,t)};function ume(){return ume=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ume.apply(null,arguments)}function dme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function hme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dme(Object(n),!0).forEach(function(t){pme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dme(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pme(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fme(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return(0,o.isValidElement)(t)?(0,o.cloneElement)(t,a):(0,o.createElement)(n,a)}function mme(e){var t,n,a,r,{coordinate:s,payload:i,index:l,offset:c,tooltipAxisBandSize:u,layout:d,cursor:h,tooltipEventType:p,chartName:f}=e,m=s,g=i,x=l;if(!h||!m||"ScatterChart"!==f&&"axis"!==p)return null;if("ScatterChart"===f)n=m,a=Xpe,r=xae.cursorLine;else if("BarChart"===f)n=function(e,t,n,a){var r=a/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-r:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-r,width:"horizontal"===e?a:n.width-1,height:"horizontal"===e?n.height-1:a}}(d,m,c,u),a=Qfe,r=xae.cursorRectangle;else if("radial"===d&&Rde(m)){var{cx:v,cy:y,radius:b,startAngle:w,endAngle:k}=Jfe(m);n={cx:v,cy:y,startAngle:w,endAngle:k,innerRadius:b,outerRadius:b},a=rme,r=xae.cursorLine}else n={points:sme(d,m,c)},a=Wpe,r=xae.cursorLine;var N="object"===typeof h&&"className"in h?h.className:void 0,j=hme(hme(hme(hme({stroke:"#ccc",pointerEvents:"none"},c),n),Cce(h)),{},{payload:g,payloadIndex:x,className:eg("recharts-tooltip-cursor",N)});return o.createElement(pde,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:r},o.createElement(fme,{cursor:h,cursorComp:a,cursorProps:j}))}function gme(e){var t=cme(),n=(()=>{var e;return null!==(e=N6(l8))&&void 0!==e?e:x8})(),a=y8(),r=moe();return null==t||null==n||null==a||null==r?null:o.createElement(mme,ume({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:r}))}function xme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function vme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xme(Object(n),!0).forEach(function(t){yme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xme(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yme(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bme(e){return e.dataKey}var wme=[],kme={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Nme(e){var t,n,a=bue(e,kme),{active:r,allowEscapeViewBox:s,animationDuration:i,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:f,reverseDirection:m,useTranslate3d:g,wrapperStyle:x,cursor:v,shared:y,trigger:b,defaultIndex:w,portal:k,axisId:N}=a,j=y6(),S="number"===typeof w?String(w):w;(0,o.useEffect)(()=>{j(B5({shared:y,trigger:b,axisId:N,active:r,defaultIndex:S}))},[j,y,b,N,r,S]);var C=g8(),E=yce(),T=function(e){return N6(t=>tie(t,e))}(y),{activeIndex:I,isActive:A}=null!==(t=N6(e=>Eoe(e,T,b,S)))&&void 0!==t?t:{},_=N6(e=>Coe(e,T,b,S)),O=N6(e=>Soe(e,T,b,S)),R=N6(e=>joe(e,T,b,S)),P=_,M=(0,o.useContext)(Jce),D=null!==(n=null!==r&&void 0!==r?r:A)&&void 0!==n&&n,[F,L]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,o.useState)({height:0,left:0,top:0,width:0}),a=(0,o.useCallback)(e=>{if(null!=e){var a=e.getBoundingClientRect(),r={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(r.height-t.height)>1||Math.abs(r.left-t.left)>1||Math.abs(r.top-t.top)>1||Math.abs(r.width-t.width)>1)&&n({height:r.height,left:r.left,top:r.top,width:r.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}([P,D]),z="axis"===T?O:void 0;Qce(T,b,R,z,I,D);var B=null!==k&&void 0!==k?k:M;if(null==B||null==C||null==T)return null;var U=null!==P&&void 0!==P?P:wme;D||(U=wme),u&&U.length&&(U=function(e,t,n){return!0===t?Bhe()(e,n):"function"===typeof t?Bhe()(e,t):e}(U.filter(e=>null!=e.value&&(!0!==e.hide||a.includeHidden)),p,bme));var W=U.length>0,V=o.createElement(Lhe,{allowEscapeViewBox:s,animationDuration:i,animationEasing:l,isAnimationActive:d,active:D,coordinate:R,hasPayload:W,offset:h,position:f,reverseDirection:m,useTranslate3d:g,viewBox:C,wrapperStyle:x,lastBoundingBox:F,innerRef:L,hasPortalFromProps:Boolean(k)},function(e,t){return o.isValidElement(e)?o.cloneElement(e,t):"function"===typeof e?o.createElement(e,t):o.createElement(Ahe,t)}(c,vme(vme({},a),{},{payload:U,label:z,active:D,activeIndex:I,coordinate:R,accessibilityLayer:E})));return o.createElement(o.Fragment,null,(0,hde.createPortal)(V,B),D&&o.createElement(gme,{cursor:v,tooltipEventType:T,coordinate:R,payload:U,index:I}))}var jme=e=>null;jme.displayName="Cell";var Sme=n(356),Cme=n.n(Sme),Eme=["valueAccessor"],Tme=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ime(){return Ime=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ime.apply(null,arguments)}function Ame(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _me=e=>Array.isArray(e.value)?Cme()(e.value):e.value,Ome=(0,o.createContext)(void 0),Rme=Ome.Provider,Pme=(0,o.createContext)(void 0),Mme=Pme.Provider;function Dme(e){var{valueAccessor:t=_me}=e,n=Ame(e,Eme),{dataKey:a,clockWise:r,id:s,textBreakAll:i,zIndex:l}=n,c=Ame(n,Tme),u=(0,o.useContext)(Ome),d=(0,o.useContext)(Pme),h=u||d;return h&&h.length?o.createElement(pde,{zIndex:null!==l&&void 0!==l?l:xae.label},o.createElement(Tue,{className:"recharts-label-list"},h.map((e,r)=>{var l,u=B1(a)?t(e,r):F6(e&&e.payload,a),d=B1(s)?{}:{id:"".concat(s,"-").concat(r)};return o.createElement(Ade,Ime({key:"label-".concat(r)},Ece(e),c,d,{fill:null!==(l=n.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:u,textBreakAll:i,viewBox:e.viewBox,index:r,zIndex:0}))}))):null}function Fme(e){var{label:t}=e;return t?!0===t?o.createElement(Dme,{key:"labelList-implicit"}):o.isValidElement(t)||Cde(t)?o.createElement(Dme,{key:"labelList-implicit",content:t}):"object"===typeof t?o.createElement(Dme,Ime({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}Dme.displayName="LabelList";var Lme=n(2086),zme=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",Bme=null,Ume=null,Wme=e=>{if(e===Bme&&Array.isArray(Ume))return Ume;var t=[];return o.Children.forEach(e,e=>{B1(e)||((0,Lme.isFragment)(e)?t=t.concat(Wme(e.props.children)):t.push(e))}),Ume=t,Bme=e,t};function Vme(e,t){var n=[],a=[];return a=Array.isArray(t)?t.map(e=>zme(e)):[zme(t)],Wme(e).forEach(e=>{var t=C1()(e,"type.displayName")||C1()(e,"type.name");t&&-1!==a.indexOf(t)&&n.push(e)}),n}var Hme=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),Gme="Invariant failed";var qme,Kme,Xme,Yme,$me,Qme=n(9397),Jme=n.n(Qme);function Zme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ege(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zme(Object(n),!0).forEach(function(t){tge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zme(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nge(){return nge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nge.apply(null,arguments)}function age(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var rge=(e,t,n,a,r)=>{var s,i=n-a;return s=T1(qme||(qme=age(["M ",",",""])),e,t),s+=T1(Kme||(Kme=age(["L ",",",""])),e+n,t),s+=T1(Xme||(Xme=age(["L ",",",""])),e+n-i/2,t+r),s+=T1(Yme||(Yme=age(["L ",",",""])),e+n-i/2-a,t+r),s+=T1($me||($me=age(["L ",","," Z"])),e,t)},sge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ige=e=>{var t=bue(e,sge),{x:n,y:a,upperWidth:r,lowerWidth:s,height:i,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,p=(0,o.useRef)(null),[f,m]=(0,o.useState)(-1),g=(0,o.useRef)(r),x=(0,o.useRef)(s),v=(0,o.useRef)(i),y=(0,o.useRef)(n),b=(0,o.useRef)(a),w=Nfe(e,"trapezoid-");if((0,o.useEffect)(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&m(e)}catch(SEe){}},[]),n!==+n||a!==+a||r!==+r||s!==+s||i!==+i||0===r&&0===s||0===i)return null;var k=eg("recharts-trapezoid",l);if(!h)return o.createElement("g",null,o.createElement("path",nge({},Ece(t),{className:k,d:rge(n,a,r,s,i)})));var N=g.current,j=x.current,S=v.current,C=y.current,E=b.current,T="0px ".concat(-1===f?1:f,"px"),I="".concat(f,"px 0px"),A=Jpe(["strokeDasharray"],u,c);return o.createElement(kfe,{animationId:w,key:w,canBegin:f>0,duration:u,easing:c,isActive:h,begin:d},e=>{var l=L1(N,r,e),c=L1(j,s,e),u=L1(S,i,e),d=L1(C,n,e),h=L1(E,a,e);p.current&&(g.current=l,x.current=c,v.current=u,y.current=d,b.current=h);var f=e>0?{transition:A,strokeDasharray:I}:{strokeDasharray:T};return o.createElement("path",nge({},Ece(t),{className:k,d:rge(d,h,l,c,u),ref:p,style:ege(ege({},f),t.style)}))})};Math.abs,Math.atan2;const oge=Math.cos,lge=(Math.max,Math.min,Math.sin),cge=Math.sqrt,uge=Math.PI,dge=2*uge;const hge={draw(e,t){const n=cge(t/uge);e.moveTo(n,0),e.arc(0,0,n,0,dge)}},pge={draw(e,t){const n=cge(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},fge=cge(1/3),mge=2*fge,gge={draw(e,t){const n=cge(t/mge),a=n*fge;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},xge={draw(e,t){const n=cge(t),a=-n/2;e.rect(a,a,n,n)}},vge=lge(uge/10)/lge(7*uge/10),yge=lge(dge/10)*vge,bge=-oge(dge/10)*vge,wge={draw(e,t){const n=cge(.8908130915292852*t),a=yge*n,r=bge*n;e.moveTo(0,-n),e.lineTo(a,r);for(let s=1;s<5;++s){const t=dge*s/5,i=oge(t),o=lge(t);e.lineTo(o*n,-i*n),e.lineTo(i*a-o*r,o*a+i*r)}e.closePath()}},kge=cge(3),Nge={draw(e,t){const n=-cge(t/(3*kge));e.moveTo(0,2*n),e.lineTo(-kge*n,-n),e.lineTo(kge*n,-n),e.closePath()}},jge=-.5,Sge=cge(3)/2,Cge=1/cge(12),Ege=3*(Cge/2+1),Tge={draw(e,t){const n=cge(t/Ege),a=n/2,r=n*Cge,s=a,i=n*Cge+n,o=-s,l=i;e.moveTo(a,r),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(jge*a-Sge*r,Sge*a+jge*r),e.lineTo(jge*s-Sge*i,Sge*s+jge*i),e.lineTo(jge*o-Sge*l,Sge*o+jge*l),e.lineTo(jge*a+Sge*r,jge*r-Sge*a),e.lineTo(jge*s+Sge*i,jge*i-Sge*s),e.lineTo(jge*o+Sge*l,jge*l-Sge*o),e.closePath()}};cge(3),cge(3);var Ige=["type","size","sizeType"];function Age(){return Age=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Age.apply(null,arguments)}function _ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Oge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_ge(Object(n),!0).forEach(function(t){Rge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_ge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pge={symbolCircle:hge,symbolCross:pge,symbolDiamond:gge,symbolSquare:xge,symbolStar:wge,symbolTriangle:Nge,symbolWye:Tge},Mge=Math.PI/180,Dge=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,r=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Ige),s=Oge(Oge({},r),{},{type:t,size:n,sizeType:a}),i="circle";"string"===typeof t&&(i=t);var{className:l,cx:c,cy:u}=s,d=Ece(s);return O1(c)&&O1(u)&&O1(n)?o.createElement("path",Age({},d,{className:eg("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:(()=>{var e=(e=>{var t="symbol".concat(U1(e));return Pge[t]||hge})(i),t=function(e,t){let n=null,a=Epe(r);function r(){let r;if(n||(n=r=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:I6(e||hge),t="function"===typeof t?t:I6(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:I6(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:I6(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(e).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var a=18*Mge;return 1.25*e*e*(Math.tan(a)-Math.tan(2*a)*Math.tan(a)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,a,i)),r=t();if(null!==r)return r})()})):null};Dge.registerSymbol=(e,t)=>{Pge["symbol".concat(U1(e))]=t};var Fge=["option","shapeType","activeClassName"];function Lge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function zge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lge(Object(n),!0).forEach(function(t){Bge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uge(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return o.createElement(Qfe,n);case"trapezoid":return o.createElement(ige,n);case"sector":return o.createElement(rme,n);case"symbols":if(function(e){return"symbols"===e}(t))return o.createElement(Dge,n);break;case"curve":return o.createElement(Wpe,n);default:return null}}function Wge(e){var t,{option:n,shapeType:a,activeClassName:r="recharts-active-shape"}=e,s=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Fge);if((0,o.isValidElement)(n))t=(0,o.cloneElement)(n,zge(zge({},s),function(e){return(0,o.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)t=n(s,s.index);else if(Jme()(n)&&"boolean"!==typeof n){var i=function(e,t){return zge(zge({},t),e)}(n,s);t=o.createElement(Uge,{shapeType:a,elementProps:i})}else{var l=s;t=o.createElement(Uge,{shapeType:a,elementProps:l})}return s.isActive?o.createElement(Tue,{className:r},t):t}function Vge(){return Vge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vge.apply(null,arguments)}function Hge(e){return o.createElement(Wge,Vge({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Gge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n,a)=>{if(O1(e))return e;var r=O1(n)||B1(n);return r?e(n,a):(r||function(e){if(!e)throw new Error(Gme)}(!1,"minPointSize callback function received a value with type of ".concat(typeof n,". Currently only numbers or null/undefined are supported.")),t)}},qge=(e,t,n)=>{var a=y6();return(r,s)=>i=>{null===e||void 0===e||e(r,s,i),a(U5({activeIndex:String(s),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}},Kge=e=>{var t=y6();return(n,a)=>r=>{null===e||void 0===e||e(n,a,r),t(W5())}},Xge=(e,t,n)=>{var a=y6();return(r,s)=>i=>{null===e||void 0===e||e(r,s,i),a(H5({activeIndex:String(s),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}};function Yge(e){var{tooltipEntrySettings:t}=e,n=y6(),a=h8(),r=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{a||(null===r.current?n(F5(t)):r.current!==t&&n(L5({prev:r.current,next:t})),r.current=t)},[t,n,a]),(0,o.useLayoutEffect)(()=>()=>{r.current&&(n(z5(r.current)),r.current=null)},[n]),null}var $ge=["children"];var Qge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Jge=(0,o.createContext)(Qge);function Zge(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,$ge);return o.createElement(Jge.Provider,{value:n},t)}function exe(e,t){var n,a,r=N6(t=>ire(t,e)),s=N6(e=>cre(e,t)),i=null!==(n=null===r||void 0===r?void 0:r.allowDataOverflow)&&void 0!==n?n:rre.allowDataOverflow,o=null!==(a=null===s||void 0===s?void 0:s.allowDataOverflow)&&void 0!==a?a:ore.allowDataOverflow;return{needClip:i||o,needClipX:i,needClipY:o}}function txe(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,r=pue(),{needClipX:s,needClipY:i,needClip:l}=exe(t,n);if(!l||!r)return null;var{x:c,y:u,width:d,height:h}=r;return o.createElement("clipPath",{id:"clipPath-".concat(a)},o.createElement("rect",{x:s?c:c-d/2,y:i?u:u-h/2,width:s?d:2*d,height:i?h:2*h}))}var nxe=(e,t,n)=>{var a=null!==n&&void 0!==n?n:e;if(!B1(a))return D1(a,t,0)};function axe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function rxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?axe(Object(n),!0).forEach(function(t){sxe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):axe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sxe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ixe(e,t){var n,a;return null!==(n=null===(a=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===a?void 0:a.xAxisId)&&void 0!==n?n:0}function oxe(e,t){var n,a;return null!==(n=null===(a=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===a?void 0:a.yAxisId)&&void 0!==n?n:0}var lxe,cxe=f6([gre,(e,t)=>t],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),uxe=f6([cxe],e=>null===e||void 0===e?void 0:e.maxBarSize),dxe=f6([v8,gre,ixe,oxe,(e,t,n)=>n],(e,t,n,a,r)=>t.filter(t=>"horizontal"===e?t.xAxisId===n:t.yAxisId===a).filter(e=>e.isPanorama===r).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),hxe=f6([dxe,e=>e.rootProps.barSize,(e,t)=>{var n=v8(e),a=ixe(e,t),r=oxe(e,t);if(null!=a&&null!=r)return"horizontal"===n?Wse(e,"xAxis",a):Wse(e,"yAxis",r)}],(e,t,n)=>{var a=e.filter(Yae),r=e.filter(e=>null==e.stackId),s=a.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{}),i=Object.entries(s).map(e=>{var[a,r]=e;return{stackId:a,dataKeys:r.map(e=>e.dataKey),barSize:nxe(t,n,r[0].barSize)}});return[...i,...r.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:nxe(t,n,e.barSize)}))]}),pxe=(e,t,n)=>{var a,r,s=v8(e),i=ixe(e,t),o=oxe(e,t);if(null!=i&&null!=o)return"horizontal"===s?(a=Yse(e,"xAxis",i,n),r=Xse(e,"xAxis",i,n)):(a=Yse(e,"yAxis",o,n),r=Xse(e,"yAxis",o,n)),X6(a,r)},fxe=f6([hxe,Zne,e=>e.rootProps.barGap,eae,(e,t,n)=>{var a,r,s=cxe(e,t);if(null!=s){var i=ixe(e,t),o=oxe(e,t);if(null!=i&&null!=o){var l,c,u=v8(e),d=Zne(e),{maxBarSize:h}=s,p=B1(h)?d:h;return"horizontal"===u?(l=Yse(e,"xAxis",i,n),c=Xse(e,"xAxis",i,n)):(l=Yse(e,"yAxis",o,n),c=Xse(e,"yAxis",o,n)),null!==(a=null!==(r=X6(l,c,!0))&&void 0!==r?r:p)&&void 0!==a?a:0}}},pxe,uxe],(e,t,n,a,r,s,i)=>{var o=B1(i)?t:i,l=function(e,t,n,a,r){var s=a.length;if(!(s<1)){var i,o=D1(e,n,0,!0),l=[];if(Q1(a[0].barSize)){var c=!1,u=n/s,d=a.reduce((e,t)=>e+(t.barSize||0),0);(d+=(s-1)*o)>=n&&(d-=(s-1)*o,o=0),d>=n&&u>0&&(c=!0,d=s*(u*=.9));var h={offset:((n-d)/2|0)-o,size:0};i=a.reduce((e,t)=>{var n,a=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?u:null!==(n=t.barSize)&&void 0!==n?n:0}}];return h=a[a.length-1].position,a},l)}else{var p=D1(t,n,0,!0);n-2*p-(s-1)*o<=0&&(o=0);var f=(n-2*p-(s-1)*o)/s;f>1&&(f>>=0);var m=Q1(r)?Math.min(f,r):f;i=a.reduce((e,t,n)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(f+o)*n+(f-m)/2,size:m}}],l)}return i}}(n,a,r!==s?r:s,e,o);return r!==s&&null!=l&&(l=l.map(e=>rxe(rxe({},e),{},{position:rxe(rxe({},e.position),{},{offset:e.position.offset-r/2})}))),l}),mxe=f6([fxe,cxe],(e,t)=>{if(null!=e&&null!=t){var n=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=n)return n.position}}),gxe=f6([(e,t,n)=>{var a=v8(e),r=ixe(e,t),s=oxe(e,t);if(null!=r&&null!=s)return"horizontal"===a?Fre(e,"yAxis",s,n):Fre(e,"xAxis",r,n)},cxe],(e,t)=>{var n=Kae(t);if(e&&null!=n&&null!=t){var{stackId:a}=t;if(null!=a){var r=e[a];if(r){var{stackedData:s}=r;if(s)return s.find(e=>e.key===n)}}}}),xxe=f6([l8,u8,(e,t,n)=>{var a=ixe(e,t);if(null!=a)return Yse(e,"xAxis",a,n)},(e,t,n)=>{var a=oxe(e,t);if(null!=a)return Yse(e,"yAxis",a,n)},(e,t,n)=>{var a=ixe(e,t);if(null!=a)return Xse(e,"xAxis",a,n)},(e,t,n)=>{var a=oxe(e,t);if(null!=a)return Xse(e,"yAxis",a,n)},mxe,v8,Pne,pxe,gxe,cxe,(e,t,n,a)=>a],(e,t,n,a,r,s,i,o,l,c,u,d,h)=>{var{chartData:p,dataStartIndex:f,dataEndIndex:m}=l;if(null!=d&&null!=i&&null!=t&&("horizontal"===o||"vertical"===o)&&null!=n&&null!=a&&null!=r&&null!=s&&null!=c){var g,{data:x}=d;if(null!=(g=null!=x&&x.length>0?x:null===p||void 0===p?void 0:p.slice(f,m+1)))return function(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:r,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:p,parentViewBox:f,dataStartIndex:m}=e,g="horizontal"===t?o:i,x=u?g.scale.domain():null,v=(e=>{var{numericAxis:t}=e,n=t.scale.domain();if("number"===t.type){var a=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return a<=0&&r>=0?0:r<0?r:a}return n[0]})({numericAxis:g}),y=g.scale(v);return d.map((e,d)=>{var g,b,w,k,N,j;if(u){var S=u[d+m];if(null==S)return null;g=((e,t)=>{if(!t||2!==t.length||!O1(t[0])||!O1(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!O1(e[0])||e[0]<n)&&(r[0]=n),(!O1(e[1])||e[1]>a)&&(r[1]=a),r[0]>a&&(r[0]=a),r[1]<n&&(r[1]=n),r})(S,x)}else g=F6(e,n),Array.isArray(g)||(g=[v,g]);var C=Gge(a,$xe)(g[1],d);if("horizontal"===t){var E,[T,I]=[o.scale(g[0]),o.scale(g[1])];b=H6({axis:i,ticks:l,bandSize:s,offset:r.offset,entry:e,index:d}),w=null!==(E=null!==I&&void 0!==I?I:T)&&void 0!==E?E:void 0,k=r.size;var A=T-I;if(N=A1(A)?0:A,j={x:b,y:h.top,width:k,height:h.height},Math.abs(C)>0&&Math.abs(N)<Math.abs(C)){var _=I1(N||C)*(Math.abs(C)-Math.abs(N));w-=_,N+=_}}else{var[O,R]=[i.scale(g[0]),i.scale(g[1])];if(b=O,w=H6({axis:o,ticks:c,bandSize:s,offset:r.offset,entry:e,index:d}),k=R-O,N=r.size,j={x:h.left,y:w,width:h.width,height:N},Math.abs(C)>0&&Math.abs(k)<Math.abs(C))k+=I1(k||C)*(Math.abs(C)-Math.abs(k))}return null==b||null==w||null==k||null==N?null:Lxe(Lxe({},e),{},{stackedBarStart:y,x:b,y:w,width:k,height:N,value:u?g:g[1],payload:e,background:j,tooltipPosition:{x:b+k/2,y:w+N/2},parentViewBox:f},p&&p[d]&&p[d].props)}).filter(Boolean)}({layout:o,barSettings:d,pos:i,parentViewBox:t,bandSize:c,xAxis:n,yAxis:a,xAxisTicks:r,yAxisTicks:s,stackedData:u,displayedData:g,offset:e,cells:h,dataStartIndex:f})}});function vxe(e){var{legendPayload:t}=e,n=y6(),a=h8(),r=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{a||(null===r.current?n(ble(t)):r.current!==t&&n(wle({prev:r.current,next:t})),r.current=t)},[n,a,t]),(0,o.useLayoutEffect)(()=>()=>{r.current&&(n(kle(r.current)),r.current=null)},[n]),null}function yxe(e){var{legendPayload:t}=e,n=y6(),a=N6(v8),r=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{"centric"!==a&&"radial"!==a||(null===r.current?n(ble(t)):r.current!==t&&n(wle({prev:r.current,next:t})),r.current=t)},[n,a,t]),(0,o.useLayoutEffect)(()=>()=>{r.current&&(n(kle(r.current)),r.current=null)},[n]),null}var bxe=null!==(lxe=l["useId".toString()])&&void 0!==lxe?lxe:()=>{var[e]=o.useState(()=>M1("uid-"));return e};var wxe=(0,o.createContext)(void 0),kxe=e=>{var{id:t,type:n,children:a}=e,r=function(e,t){var n=bxe();return t||(e?"".concat(e,"-").concat(n):n)}("recharts-".concat(n),t);return o.createElement(wxe.Provider,{value:r},a(r))};var Nxe=e=>{var t=y6(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(Zoe(e)):n.current!==e&&t(ele({prev:n.current,next:e})),n.current=e},[t,e]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(tle(n.current)),n.current=null)},[t]),null},jxe=(0,o.memo)(Nxe);function Sxe(e){var t=y6();return(0,o.useLayoutEffect)(()=>(t(nle(e)),()=>{t(ale(e))}),[t,e]),null}function Cxe(e,t){return e&&"object"===typeof e&&"zIndex"in e&&"number"===typeof e.zIndex&&Q1(e.zIndex)?e.zIndex:t}var Exe=["index"];function Txe(){return Txe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Txe.apply(null,arguments)}var Ixe=(0,o.createContext)(void 0),Axe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),_xe=e=>{var{index:t}=e,n=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Exe),a=(e=>{var t=(0,o.useContext)(Ixe);if(null!=t){var{stackId:n}=t;return"url(#".concat(Axe(n,e),")")}})(t);return o.createElement(Tue,Txe({className:"recharts-bar-stack-layer",clipPath:a},n))},Oxe=["onMouseEnter","onMouseLeave","onClick"],Rxe=["value","background","tooltipPosition"],Pxe=["id"],Mxe=["onMouseEnter","onClick","onMouseLeave"];function Dxe(){return Dxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dxe.apply(null,arguments)}function Fxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Lxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fxe(Object(n),!0).forEach(function(t){zxe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zxe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bxe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Uxe=e=>{var{dataKey:t,name:n,fill:a,legendType:r,hide:s}=e;return[{inactive:s,dataKey:t,type:r,color:a,value:$6(n,t),payload:e}]},Wxe=o.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:r,name:s,hide:i,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:r,dataKey:t,nameKey:void 0,name:$6(s,t),hide:i,type:c,color:r,unit:l,graphicalItemId:u}};return o.createElement(Yge,{tooltipEntrySettings:d})});function Vxe(e){var t=N6(toe),{data:n,dataKey:a,background:r,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=Bxe(s,Oxe),d=qge(i,a,s.id),h=Kge(l),p=Xge(c,a,s.id);if(!r||null==n)return null;var f=Cce(r);return o.createElement(pde,{zIndex:Cxe(r,xae.barBackground)},n.map((e,n)=>{var{value:s,background:i,tooltipPosition:l}=e,c=Bxe(e,Rxe);if(!i)return null;var m=d(e,n),g=h(e,n),x=p(e,n),v=Lxe(Lxe(Lxe(Lxe(Lxe({option:r,isActive:String(n)===t},c),{},{fill:"#eee"},i),f),Mde(u,e,n)),{},{onMouseEnter:m,onMouseLeave:g,onClick:x,dataKey:a,index:n,className:"recharts-bar-background-rectangle"});return o.createElement(Hge,Dxe({key:"background-bar-".concat(n)},v))}))}function Hxe(e){var{showLabels:t,children:n,rects:a}=e,r=null===a||void 0===a?void 0:a.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return Lxe(Lxe({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return o.createElement(Rme,{value:t?r:void 0},n)}function Gxe(e){var{shape:t,activeBar:n,baseProps:a,entry:r,index:s,dataKey:i}=e,l=N6(toe),c=N6(aoe),u=n&&String(s)===l&&(null==c||i===c),d=u?n:t;return u?o.createElement(pde,{zIndex:xae.activeBar},o.createElement(Hge,Dxe({},a,{name:String(a.name)},r,{isActive:u,option:d,index:s,dataKey:i}))):o.createElement(Hge,Dxe({},a,{name:String(a.name)},r,{isActive:u,option:d,index:s,dataKey:i}))}function qxe(e){var{shape:t,baseProps:n,entry:a,index:r,dataKey:s}=e;return o.createElement(Hge,Dxe({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:r,dataKey:s}))}function Kxe(e){var t,{data:n,props:a}=e,r=null!==(t=Sce(a))&&void 0!==t?t:{},{id:s}=r,i=Bxe(r,Pxe),{shape:l,dataKey:c,activeBar:u}=a,{onMouseEnter:d,onClick:h,onMouseLeave:p}=a,f=Bxe(a,Mxe),m=qge(d,c,s),g=Kge(p),x=Xge(h,c,s);return n?o.createElement(o.Fragment,null,n.map((e,t)=>o.createElement(_xe,Dxe({index:t,key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},Mde(f,e,t),{onMouseEnter:m(e,t),onMouseLeave:g(e,t),onClick:x(e,t)}),u?o.createElement(Gxe,{shape:l,activeBar:u,baseProps:i,entry:e,index:t,dataKey:c}):o.createElement(qxe,{shape:l,baseProps:i,entry:e,index:t,dataKey:c})))):null}function Xxe(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:r,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=n.current,p=Nfe(t,"recharts-bar-"),[f,m]=(0,o.useState)(!1),g=!f,x=(0,o.useCallback)(()=>{"function"===typeof u&&u(),m(!1)},[u]),v=(0,o.useCallback)(()=>{"function"===typeof d&&d(),m(!0)},[d]);return o.createElement(Hxe,{showLabels:g,rects:a},o.createElement(kfe,{animationId:p,begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:p},e=>{var s=1===e?a:null===a||void 0===a?void 0:a.map((t,n)=>{var a=h&&h[n];if(a)return Lxe(Lxe({},t),{},{x:L1(a.x,t.x,e),y:L1(a.y,t.y,e),width:L1(a.width,t.width,e),height:L1(a.height,t.height,e)});if("horizontal"===r){var s=L1(0,t.height,e),i=L1(t.stackedBarStart,t.y,e);return Lxe(Lxe({},t),{},{y:i,height:s})}var o=L1(0,t.width,e),l=L1(t.stackedBarStart,t.x,e);return Lxe(Lxe({},t),{},{width:o,x:l})});return e>0&&(n.current=null!==s&&void 0!==s?s:null),null==s?null:o.createElement(Tue,null,o.createElement(Kxe,{props:t,data:s}))}),o.createElement(Fme,{label:t.label}),t.children)}function Yxe(e){var t=(0,o.useRef)(null);return o.createElement(Xxe,{previousRectanglesRef:t,props:e})}var $xe=0,Qxe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:F6(e,t)}};class Jxe extends o.PureComponent{render(){var{hide:e,data:t,dataKey:n,className:a,xAxisId:r,yAxisId:s,needClip:i,background:l,id:c}=this.props;if(e||null==t)return null;var u=eg("recharts-bar",a),d=c;return o.createElement(Tue,{className:u,id:c},i&&o.createElement("defs",null,o.createElement(txe,{clipPathId:d,xAxisId:r,yAxisId:s})),o.createElement(Tue,{className:"recharts-bar-rectangles",clipPath:i?"url(#clipPath-".concat(d,")"):void 0},o.createElement(Vxe,{data:t,dataKey:n,background:l,allOtherBarProps:this.props}),o.createElement(Yxe,this.props)))}}var Zxe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:$xe,xAxisId:0,yAxisId:0,zIndex:xae.bar};function eve(e){var t,{xAxisId:n,yAxisId:a,hide:r,legendType:s,minPointSize:i,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=e,{needClip:p}=exe(n,a),f=y8(),m=h8(),g=Vme(e.children,jme),x=N6(t=>xxe(t,e.id,m,g));if("vertical"!==f&&"horizontal"!==f)return null;var v=null===x||void 0===x?void 0:x[0];return t=null==v||null==v.height||null==v.width?0:"vertical"===f?v.height/2:v.width/2,o.createElement(Zge,{xAxisId:n,yAxisId:a,data:x,dataPointFormatter:Qxe,errorBarOffset:t},o.createElement(Jxe,Dxe({},e,{layout:f,needClip:p,data:x,xAxisId:n,yAxisId:a,hide:r,legendType:s,minPointSize:i,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function tve(e){var t=bue(e,Zxe),n=(e=>{var t=(0,o.useContext)(Ixe);return null!=t?t.stackId:null!=e?W6(e):void 0})(t.stackId),a=h8();return o.createElement(kxe,{id:t.id,type:"bar"},e=>o.createElement(o.Fragment,null,o.createElement(vxe,{legendPayload:Uxe(t)}),o.createElement(Wxe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(jxe,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),o.createElement(pde,{zIndex:t.zIndex},o.createElement(eve,Dxe({},t,{id:e})))))}var nve=o.memo(tve,mce);function ave(){return ave=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ave.apply(null,arguments)}nve.displayName="Bar";var rve=e=>{var{cx:t,cy:n,r:a,className:r}=e,s=eg("recharts-dot",r);return O1(t)&&O1(n)&&O1(a)?o.createElement("circle",ave({},Sce(e),Pde(e),{className:s,cx:t,cy:n,r:a})):null},sve=["points"];function ive(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ove(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ive(Object(n),!0).forEach(function(t){lve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ive(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cve(){return cve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cve.apply(null,arguments)}function uve(e){var{option:t,dotProps:n,className:a}=e;if((0,o.isValidElement)(t))return(0,o.cloneElement)(t,n);if("function"===typeof t)return t(n);var r=eg(a,"boolean"!==typeof t?t.className:""),s=null!==n&&void 0!==n?n:{},{points:i}=s,l=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(s,sve);return o.createElement(rve,cve({},l,{className:r}))}function dve(e){var{points:t,dot:n,className:a,dotClassName:r,dataKey:s,baseProps:i,needClip:l,clipPathId:c,zIndex:u=xae.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var d=Hme(n),h=function(e){return null==e?null:(0,o.isValidElement)(e)?Ece(e.props):"object"!==typeof e||Array.isArray(e)?null:Ece(e)}(n),p=t.map((e,a)=>{var l,c,u=ove(ove(ove({r:3},i),h),{},{index:a,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:s,value:e.value,payload:e.payload,points:t});return o.createElement(uve,{key:"dot-".concat(a),option:n,dotProps:u,className:r})}),f={};return l&&null!=c&&(f.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),o.createElement(pde,{zIndex:u},o.createElement(Tue,cve({className:a},f),p))}function hve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function pve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hve(Object(n),!0).forEach(function(t){fve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mve=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:r,dataKey:s,clipPath:i}=e;if(!1===r||null==t.x||null==t.y)return null;var l,c=pve(pve(pve({},{index:n,dataKey:s,cx:t.x,cy:t.y,r:4,fill:null!==a&&void 0!==a?a:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),Cce(r)),Pde(r));return l=(0,o.isValidElement)(r)?(0,o.cloneElement)(r,c):"function"===typeof r?r(c):o.createElement(rve,c),o.createElement(Tue,{className:"recharts-active-dot",clipPath:i},l)};function gve(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:r,clipPath:s,zIndex:i=xae.activeDot}=e,l=N6(toe),c=N6(uoe);if(null==t||null==c)return null;var u=t.find(e=>c.includes(e.payload));return B1(u)?null:o.createElement(pde,{zIndex:i},o.createElement(mve,{point:u,childIndex:Number(l),mainColor:n,dataKey:r,activeDot:a,clipPath:s}))}var xve=(e,t,n,a)=>Yse(e,"xAxis",t,a),vve=(e,t,n,a)=>Xse(e,"xAxis",t,a),yve=(e,t,n,a)=>Yse(e,"yAxis",n,a),bve=(e,t,n,a)=>Xse(e,"yAxis",n,a),wve=f6([v8,xve,yve,vve,bve],(e,t,n,a,r)=>L6(e,"xAxis")?X6(t,a,!1):X6(n,r,!1));function kve(e){return"line"===e.type}var Nve=f6([gre,(e,t,n,a,r)=>r],(e,t)=>e.filter(kve).find(e=>e.id===t)),jve=f6([v8,xve,yve,vve,bve,Nve,wve,Rne],(e,t,n,a,r,s,i,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(null!=s&&null!=t&&null!=n&&null!=a&&null!=r&&0!==a.length&&0!==r.length&&null!=i&&("horizontal"===e||"vertical"===e)){var d,{dataKey:h,data:p}=s;if(null!=(d=null!=p&&p.length>0?p:null===l||void 0===l?void 0:l.slice(c,u+1)))return function(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:r,yAxisTicks:s,dataKey:i,bandSize:o,displayedData:l}=e;return l.map((e,l)=>{var c=F6(e,i);if("horizontal"===t)return{x:V6({axis:n,ticks:r,bandSize:o,entry:e,index:l}),y:B1(c)?null:a.scale(c),value:c,payload:e};var u=B1(c)?null:n.scale(c),d=V6({axis:a,ticks:s,bandSize:o,entry:e,index:l});return null==u||null==d?null:{x:u,y:d,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:r,dataKey:h,bandSize:i,displayedData:d})}});function Sve(e){var t=Cce(e);if(null!=t){var{r:n,strokeWidth:a}=t,r=Number(n),s=Number(a);return(Number.isNaN(r)||r<0)&&(r=3),(Number.isNaN(s)||s<0)&&(s=2),{r:r,strokeWidth:s}}return{r:3,strokeWidth:2}}var Cve=["id"],Eve=["type","layout","connectNulls","needClip","shape"],Tve=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Ive(){return Ive=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ive.apply(null,arguments)}function Ave(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ave(Object(n),!0).forEach(function(t){Ove(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ave(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ove(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rve(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Pve=e=>{var{dataKey:t,name:n,stroke:a,legendType:r,hide:s}=e;return[{inactive:s,dataKey:t,type:r,color:a,value:$6(n,t),payload:e}]},Mve=o.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:r,fill:s,name:i,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:s,dataKey:t,nameKey:void 0,name:$6(i,t),hide:l,type:u,color:a,unit:c,graphicalItemId:d}};return o.createElement(Yge,{tooltipEntrySettings:h})}),Dve=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Fve(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],r=0;r<t;++r)a=[...a,...n];return a}function Lve(e){var{clipPathId:t,points:n,props:a}=e,{dot:r,dataKey:s,needClip:i}=a,{id:l}=a,c=Sce(Rve(a,Cve));return o.createElement(dve,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:i,clipPathId:t})}function zve(e){var{showLabels:t,children:n,points:a}=e,r=(0,o.useMemo)(()=>null===a||void 0===a?void 0:a.map(e=>{var t,n,a={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _ve(_ve({},a),{},{value:e.value,payload:e.payload,viewBox:a,parentViewBox:void 0,fill:void 0})}),[a]);return o.createElement(Rme,{value:t?r:void 0},n)}function Bve(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:r,props:s}=e,{type:i,layout:l,connectNulls:c,needClip:u,shape:d}=s,h=_ve(_ve({},Ece(Rve(s,Eve))),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:a,type:i,layout:l,connectNulls:c,strokeDasharray:null!==r&&void 0!==r?r:s.strokeDasharray});return o.createElement(o.Fragment,null,(null===a||void 0===a?void 0:a.length)>1&&o.createElement(Wge,Ive({shapeType:"curve",option:d},h,{pathRef:n})),o.createElement(Lve,{points:a,clipPathId:t,props:s}))}function Uve(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:r,longestAnimatedLengthRef:s}=e,{points:i,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:f,height:m,onAnimationEnd:g,onAnimationStart:x}=n,v=r.current,y=Nfe(i,"recharts-line-"),b=(0,o.useRef)(y),[w,k]=(0,o.useState)(!1),N=!w,j=(0,o.useCallback)(()=>{"function"===typeof g&&g(),k(!1)},[g]),S=(0,o.useCallback)(()=>{"function"===typeof x&&x(),k(!0)},[x]),C=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(SEe){return 0}}(a.current),E=(0,o.useRef)(0);b.current!==y&&(E.current=s.current,b.current=y);var T=E.current;return o.createElement(zve,{points:i,showLabels:N},n.children,o.createElement(kfe,{animationId:y,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:j,onAnimationStart:S,key:y},e=>{var u,d=L1(T,C+T,e),h=Math.min(d,C);if(c)if(l){var g="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));u=((e,t,n)=>{var a=n.reduce((e,t)=>e+t);if(!a)return Dve(t,e);for(var r=Math.floor(e/a),s=e%a,i=t-e,o=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){o=[...n.slice(0,l),s-c];break}var u=o.length%2===0?[0,i]:[i];return[...Fve(n,r),...o,...u].map(e=>"".concat(e,"px")).join(", ")})(h,C,g)}else u=Dve(C,h);else u=null==l?void 0:String(l);if(e>0&&C>0&&(r.current=i,s.current=Math.max(s.current,h)),v){var x=v.length/i.length,y=1===e?i:i.map((t,n)=>{var a=Math.floor(n*x);if(v[a]){var r=v[a];return _ve(_ve({},t),{},{x:L1(r.x,t.x,e),y:L1(r.y,t.y,e)})}return _ve(_ve({},t),{},p?{x:L1(2*f,t.x,e),y:L1(m/2,t.y,e)}:{x:t.x,y:t.y})});return r.current=y,o.createElement(Bve,{props:n,points:y,clipPathId:t,pathRef:a,strokeDasharray:u})}return o.createElement(Bve,{props:n,points:i,clipPathId:t,pathRef:a,strokeDasharray:u})}),o.createElement(Fme,{label:n.label}))}function Wve(e){var{clipPathId:t,props:n}=e,a=(0,o.useRef)(null),r=(0,o.useRef)(0),s=(0,o.useRef)(null);return o.createElement(Uve,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:r,pathRef:s})}var Vve=(e,t)=>{var n,a;return{x:null!==(n=e.x)&&void 0!==n?n:void 0,y:null!==(a=e.y)&&void 0!==a?a:void 0,value:e.value,errorVal:F6(e.payload,t)}};class Hve extends o.Component{render(){var{hide:e,dot:t,points:n,className:a,xAxisId:r,yAxisId:s,top:i,left:l,width:c,height:u,id:d,needClip:h,zIndex:p}=this.props;if(e)return null;var f=eg("recharts-line",a),m=d,{r:g,strokeWidth:x}=Sve(t),v=Hme(t),y=2*g+x,b=h?"url(#clipPath-".concat(v?"":"dots-").concat(m,")"):void 0;return o.createElement(pde,{zIndex:p},o.createElement(Tue,{className:f},h&&o.createElement("defs",null,o.createElement(txe,{clipPathId:m,xAxisId:r,yAxisId:s}),!v&&o.createElement("clipPath",{id:"clipPath-dots-".concat(m)},o.createElement("rect",{x:l-y/2,y:i-y/2,width:c+y,height:u+y}))),o.createElement(Zge,{xAxisId:r,yAxisId:s,data:n,dataPointFormatter:Vve,errorBarOffset:0},o.createElement(Wve,{props:this.props,clipPathId:m}))),o.createElement(gve,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:b}))}}var Gve={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:xae.line,type:"linear"};function qve(e){var t=bue(e,Gve),{activeDot:n,animateNewValues:a,animationBegin:r,animationDuration:s,animationEasing:i,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:f,yAxisId:m,id:g}=t,x=Rve(t,Tve),{needClip:v}=exe(f,m),y=pue(),b=y8(),w=h8(),k=N6(e=>jve(e,f,m,w,g));if("horizontal"!==b&&"vertical"!==b||null==k||null==y)return null;var{height:N,width:j,x:S,y:C}=y;return o.createElement(Hve,Ive({},x,{id:g,connectNulls:l,dot:c,activeDot:n,animateNewValues:a,animationBegin:r,animationDuration:s,animationEasing:i,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:f,yAxisId:m,points:k,layout:b,height:N,width:j,left:S,top:C,needClip:v}))}function Kve(e){var t=bue(e,Gve),n=h8();return o.createElement(kxe,{id:t.id,type:"line"},e=>o.createElement(o.Fragment,null,o.createElement(vxe,{legendPayload:Pve(t)}),o.createElement(Mve,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(jxe,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),o.createElement(qve,Ive({},t,{id:e}))))}var Xve=o.memo(Kve,mce);Xve.displayName="Line";const Yve="".concat("https://tradehub-380.preview.emergentagent.com","/api"),$ve=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.02;const a=[];let r=.95*e;for(let s=0;s<t;s++){const e=r,i=r*(1+(Math.random()-.5)*n*2),o=Math.max(e,i)*(1+.01*Math.random()),l=Math.min(e,i)*(1-.01*Math.random()),c=1e6*Math.random()+5e5,u=Math.abs(i-e),d=o-Math.max(e,i),h=Math.min(e,i)-l;a.push({time:s,date:new Date(Date.now()-36e5*(t-s)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),open:Math.round(100*e)/100,high:Math.round(100*o)/100,low:Math.round(100*l)/100,close:Math.round(100*i)/100,volume:Math.round(c),bullish:i>e,bodySize:u,upperWick:d,lowerWick:h}),r=i}for(let s=0;s<a.length;s++){if(s>=6){const e=a.slice(s-6,s+1).reduce((e,t)=>e+t.close,0);a[s].sma7=Math.round(e/7*100)/100}if(s>=20){const e=a.slice(s-20,s+1).reduce((e,t)=>e+t.close,0);a[s].sma21=Math.round(e/21*100)/100}if(s>=14){const e=[],t=[];for(let o=s-13;o<=s;o++){const n=a[o].close-a[o].open;n>0?e.push(n):t.push(Math.abs(n))}const n=e.length?e.reduce((e,t)=>e+t,0)/14:0,r=t.length?t.reduce((e,t)=>e+t,0)/14:0,i=0===r?100:n/r;a[s].rsi=Math.round(100-100/(1+i))}}return a},Qve=e=>{const{x:t,y:n,width:a,height:r,payload:s}=e;if(!s)return null;const{open:i,close:o,high:l,low:c,bullish:u}=s,d=u?"#10b981":"#f43f5e",h=Math.max(.6*a,4),p=l-c,f=e=>0===p?n:n+r-(e-c)/p*r,m=f(Math.max(i,o)),g=f(Math.min(i,o)),x=Math.max(g-m,1);return(0,zt.jsxs)("g",{children:[(0,zt.jsx)("line",{x1:t+a/2,y1:f(l),x2:t+a/2,y2:f(c),stroke:d,strokeWidth:1}),(0,zt.jsx)("rect",{x:t+(a-h)/2,y:m,width:h,height:x,fill:d,stroke:d,strokeWidth:1,rx:1})]})},Jve=e=>{var t,n;let{symbol:a="BTC",title:r="Bitcoin / USD"}=e;const[s,i]=(0,o.useState)([]),[l,c]=(0,o.useState)(!0),[u,d]=(0,o.useState)(0),[h,p]=(0,o.useState)(0),[f,g]=(0,o.useState)({sma7:!0,sma21:!0,volume:!0}),[x,v]=(0,o.useState)("1H");(0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(Yve,"/market/").concat(a)),t=e.data.price;d(t),p(e.data.change_percent);const n=$ve(t,50,"BTC"===a?.015:.02);i(n)}catch(e){console.error("Error fetching chart data:",e);const t=$ve("BTC"===a?9e4:3e3,50);i(t),d("BTC"===a?9e4:3e3)}c(!1)};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[a]);const y=h>=0,b=(null===(t=s[s.length-1])||void 0===t?void 0:t.rsi)||50,w=b>70?"Overbought":b<30?"Oversold":"Neutral",k=e=>{let{active:t,payload:n}=e;if(t&&n&&n.length&&n[0].payload){var a,r,s,i;const e=n[0].payload;return(0,zt.jsxs)("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg px-4 py-3 text-xs font-mono",children:[(0,zt.jsx)("p",{className:"text-slate-400 mb-2",children:e.date}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Open:"}),(0,zt.jsxs)("span",{className:"text-white",children:["$",null===(a=e.open)||void 0===a?void 0:a.toLocaleString()]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"High:"}),(0,zt.jsxs)("span",{className:"text-emerald-400",children:["$",null===(r=e.high)||void 0===r?void 0:r.toLocaleString()]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"Low:"}),(0,zt.jsxs)("span",{className:"text-rose-400",children:["$",null===(s=e.low)||void 0===s?void 0:s.toLocaleString()]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"Close:"}),(0,zt.jsxs)("span",{className:e.bullish?"text-emerald-400":"text-rose-400",children:["$",null===(i=e.close)||void 0===i?void 0:i.toLocaleString()]}),e.rsi&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"RSI:"}),(0,zt.jsx)("span",{className:e.rsi>70?"text-rose-400":e.rsi<30?"text-emerald-400":"text-white",children:e.rsi})]})]})]})}return null};return(0,zt.jsx)("div",{"data-testid":"candlestick-chart",children:(0,zt.jsxs)(vx,{className:"h-full",accent:y?"teal":"rose",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h3",{className:"font-heading text-xl font-bold uppercase text-white",children:a}),(0,zt.jsxs)(Ox,{variant:y?"success":"danger",children:[y?(0,zt.jsx)(jm,{size:12}):(0,zt.jsx)(Mx,{size:12}),y?"+":"",h.toFixed(2),"%"]})]}),(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:r})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold text-white tabular-nums",children:["$",u.toLocaleString("en-US",{minimumFractionDigits:2})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2 justify-end mt-1",children:(0,zt.jsxs)(Ox,{variant:b>70?"danger":b<30?"success":"default",children:["RSI: ",b," (",w,")"]})})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsx)("div",{className:"flex gap-1",children:["1H","4H","1D","1W"].map(e=>(0,zt.jsx)("button",{onClick:()=>v(e),className:"px-2 py-1 rounded text-xs font-mono transition-all ".concat(x===e?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"text-slate-500 hover:text-white"),children:e},e))}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)("button",{onClick:()=>g(e=>m(m({},e),{},{sma7:!e.sma7})),className:"px-2 py-1 rounded text-xs font-mono ".concat(f.sma7?"text-teal-400":"text-slate-600"),children:"SMA7"}),(0,zt.jsx)("button",{onClick:()=>g(e=>m(m({},e),{},{sma21:!e.sma21})),className:"px-2 py-1 rounded text-xs font-mono ".concat(f.sma21?"text-amber-400":"text-slate-600"),children:"SMA21"})]})]}),(0,zt.jsx)("div",{className:"h-[280px] w-full",children:l?(0,zt.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,zt.jsx)("div",{className:"animate-pulse text-slate-500 font-mono",children:"Loading chart..."})}):(0,zt.jsx)(o2,{width:"100%",height:"100%",children:(0,zt.jsxs)(Sue,{data:s,margin:{top:10,right:10,left:0,bottom:0},children:[(0,zt.jsx)(mhe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},interval:"preserveStartEnd"}),(0,zt.jsx)(jhe,{domain:["auto","auto"],axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k"),width:50,orientation:"right"}),(0,zt.jsx)(Nme,{content:(0,zt.jsx)(k,{})}),f.volume&&(0,zt.jsx)(nve,{dataKey:"volume",fill:"rgba(99, 102, 241, 0.2)",yAxisId:"volume"}),(0,zt.jsx)(nve,{dataKey:"high",shape:(0,zt.jsx)(Qve,{}),isAnimationActive:!1}),f.sma7&&(0,zt.jsx)(Xve,{type:"monotone",dataKey:"sma7",stroke:"#14b8a6",strokeWidth:1.5,dot:!1,connectNulls:!0}),f.sma21&&(0,zt.jsx)(Xve,{type:"monotone",dataKey:"sma21",stroke:"#f59e0b",strokeWidth:1.5,dot:!1,connectNulls:!0})]})})}),(0,zt.jsx)("div",{className:"mt-3 pt-3 border-t border-white/5",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500",children:"Detected Patterns:"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[s.length>0&&(null===(n=s[s.length-1])||void 0===n?void 0:n.bullish)&&(0,zt.jsx)(Ox,{variant:"success",children:"Bullish Engulfing"}),b>70&&(0,zt.jsx)(Ox,{variant:"warning",children:"RSI Overbought"}),b<30&&(0,zt.jsx)(Ox,{variant:"success",children:"RSI Oversold"})]})]})})]})})},Zve=Nm("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),eye=e=>{let{voiceActive:t,gestureReady:n,mood:a,riskLevel:r="LOW"}=e;return(0,zt.jsxs)(uu.div,{className:"flex items-center justify-center gap-4 flex-wrap",initial:{opacity:0,y:20},animate:{opacity:1,y:0},"data-testid":"status-bar",children:[(0,zt.jsxs)(Ox,{variant:t?"active":"default",pulse:t,"data-testid":"voice-status",children:[(0,zt.jsx)(Ux,{size:14}),"Voice: ",t?"Active":"Inactive"]}),(0,zt.jsxs)(Ox,{variant:n?"active":"default","data-testid":"gesture-status",children:[(0,zt.jsx)(Zve,{size:14}),"Gesture Ready"]}),(0,zt.jsxs)(Ox,{variant:"FOCUSED"===a||"CONFIDENT"===a?"active":"STRESSED"===a?"danger":"FATIGUED"===a?"warning":"default","data-testid":"mood-status",children:[(0,zt.jsx)(Rm,{size:14}),"Mood: ",a||"FOCUSED"]}),(0,zt.jsxs)(Ox,{variant:"LOW"===r?"success":"MODERATE"===r?"warning":"danger","data-testid":"risk-status",children:[(0,zt.jsx)(Dm,{size:14}),"Risk: ",r]})]})},tye=Nm("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),nye=Nm("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),aye=Nm("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),rye=Nm("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),sye=e=>{let{onVoice:t,onGesture:n,onMood:a,onOracle:r,onMessage:s,voiceActive:i}=e;const[l,c]=(0,o.useState)(!0),u=[{id:"voice",icon:Ux,label:"Voice",onClick:t,variant:"teal"},{id:"gesture",icon:Zve,label:"Gesture",onClick:n,variant:"indigo"},{id:"mood",icon:tye,label:"Mood",onClick:a,variant:"white"},{id:"oracle",icon:v1,label:"Oracle",onClick:r,variant:"indigo"},{id:"message",icon:$m,label:"Message",onClick:s,variant:"teal"}];return(0,zt.jsxs)(uu.div,{className:"fixed bottom-0 left-0 right-0 z-50",initial:{y:100},animate:{y:0},transition:{delay:.3,type:"spring",stiffness:100},"data-testid":"control-panel",children:[(0,zt.jsx)("div",{className:"flex justify-center mb-1",children:(0,zt.jsx)("button",{onClick:()=>c(!l),className:"px-4 py-1 rounded-t-lg bg-black/60 backdrop-blur-xl border border-b-0 border-white/10 text-slate-400 hover:text-white transition-colors","data-testid":"control-panel-toggle",children:l?(0,zt.jsx)(nye,{size:16}):(0,zt.jsx)(aye,{size:16})})}),(0,zt.jsx)(an,{children:l&&(0,zt.jsx)(uu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"bg-black/80 backdrop-blur-2xl border-t border-white/10",children:(0,zt.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0 pr-3 border-r border-white/10",children:[(0,zt.jsx)("span",{className:"h-2 w-2 rounded-full flex-shrink-0 ".concat(i?"bg-emerald-400 animate-pulse":"bg-slate-600")}),(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500 whitespace-nowrap",children:i?"Active":"Standby"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.map(e=>(0,zt.jsxs)("button",{onClick:e.onClick,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-mono transition-all whitespace-nowrap ".concat("teal"===e.variant?"bg-teal-500/10 text-teal-400 border border-teal-500/30 hover:bg-teal-500/20":"indigo"===e.variant?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/30 hover:bg-indigo-500/20":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10 hover:text-white"),"data-testid":"ctrl-".concat(e.id,"-btn"),children:[(0,zt.jsx)(e.icon,{size:14}),(0,zt.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id))}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0 pl-3 border-l border-white/10",children:[(0,zt.jsx)(rye,{size:14,className:"text-emerald-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-emerald-400 whitespace-nowrap",children:"Online"})]})]})})})}),!l&&(0,zt.jsx)("div",{className:"h-1 bg-gradient-to-r from-teal-500/50 via-indigo-500/50 to-teal-500/50"})]})},iye=Nm("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),oye=Nm("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),lye=Nm("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cye=Nm("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),uye=Nm("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),dye=Nm("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),hye=Nm("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),pye=Nm("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),fye="".concat("https://tradehub-380.preview.emergentagent.com","/api"),mye=e=>{let{onClose:t}=e;const{user:n}=Lh(),[a,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)({name:(null===n||void 0===n?void 0:n.name)||"Guest User",email:(null===n||void 0===n?void 0:n.email)||"guest@oracleiqtrader.com",phone:"",timezone:"America/New_York",tradingExperience:"intermediate",riskTolerance:"moderate",preferredAssets:["stocks","crypto"]}),[l,c]=(0,o.useState)({totalTrades:0,winRate:0,totalPnL:0,memberSince:(new Date).toISOString()});(0,o.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await fetch("".concat(fye,"/alpaca/account")),t=await e.json();c(e=>m(m({},e),{},{totalPnL:t.portfolio_value-1e5||27432.52}))}catch(jEe){console.error("Error fetching stats:",jEe)}};return(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:(0,zt.jsx)(uu.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(iye,{className:"text-teal-400"}),"Profile"]}),(0,zt.jsx)("button",{onClick:t,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:(0,zt.jsx)(Qm,{size:20,className:"text-slate-400"})})]}),(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[(0,zt.jsxs)("div",{className:"flex flex-col items-center",children:[(0,zt.jsxs)("div",{className:"relative",children:[null!==n&&void 0!==n&&n.picture?(0,zt.jsx)("img",{src:n.picture,alt:n.name,className:"w-24 h-24 rounded-full border-2 border-teal-500/50"}):(0,zt.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-teal-500 to-purple-500 flex items-center justify-center",children:(0,zt.jsx)(iye,{size:40,className:"text-white"})}),(0,zt.jsx)("button",{className:"absolute bottom-0 right-0 p-2 rounded-full bg-teal-500 hover:bg-teal-400 transition-colors",children:(0,zt.jsx)(Kx,{size:14,className:"text-white"})})]}),(0,zt.jsx)("p",{className:"mt-3 text-lg font-semibold text-white",children:s.name}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:s.email})]}),(0,zt.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)(jm,{className:"text-emerald-400 mb-2",size:20}),(0,zt.jsxs)("p",{className:"text-2xl font-bold text-white",children:["$",l.totalPnL>=0?"+":"",l.totalPnL.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total P&L"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)(Sm,{className:"text-purple-400 mb-2",size:20}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:"127"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Trades"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)(uye,{className:"text-amber-400 mb-2",size:20}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:"68%"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Win Rate"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)(Dm,{className:"text-teal-400 mb-2",size:20}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:"Pro"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Account Tier"})]})]})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Profile Details"}),(0,zt.jsxs)("button",{onClick:()=>a?void r(!1):r(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(a?"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[a?(0,zt.jsx)(dye,{size:16}):(0,zt.jsx)(hye,{size:16}),a?"Save":"Edit"]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Full Name"}),(0,zt.jsx)("input",{type:"text",value:s.name,onChange:e=>i(m(m({},s),{},{name:e.target.value})),disabled:!a,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white disabled:opacity-50 focus:outline-none focus:border-teal-500/50"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Email"}),(0,zt.jsx)("input",{type:"email",value:s.email,disabled:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white opacity-50"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Timezone"}),(0,zt.jsxs)("select",{value:s.timezone,onChange:e=>i(m(m({},s),{},{timezone:e.target.value})),disabled:!a,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white disabled:opacity-50 focus:outline-none focus:border-teal-500/50",children:[(0,zt.jsx)("option",{value:"America/New_York",children:"Eastern (ET)"}),(0,zt.jsx)("option",{value:"America/Chicago",children:"Central (CT)"}),(0,zt.jsx)("option",{value:"America/Denver",children:"Mountain (MT)"}),(0,zt.jsx)("option",{value:"America/Los_Angeles",children:"Pacific (PT)"}),(0,zt.jsx)("option",{value:"Europe/London",children:"London (GMT)"}),(0,zt.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Trading Experience"}),(0,zt.jsxs)("select",{value:s.tradingExperience,onChange:e=>i(m(m({},s),{},{tradingExperience:e.target.value})),disabled:!a,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white disabled:opacity-50 focus:outline-none focus:border-teal-500/50",children:[(0,zt.jsx)("option",{value:"beginner",children:"Beginner (0-1 years)"}),(0,zt.jsx)("option",{value:"intermediate",children:"Intermediate (1-3 years)"}),(0,zt.jsx)("option",{value:"advanced",children:"Advanced (3-5 years)"}),(0,zt.jsx)("option",{value:"expert",children:"Expert (5+ years)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Risk Tolerance"}),(0,zt.jsxs)("select",{value:s.riskTolerance,onChange:e=>i(m(m({},s),{},{riskTolerance:e.target.value})),disabled:!a,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white disabled:opacity-50 focus:outline-none focus:border-teal-500/50",children:[(0,zt.jsx)("option",{value:"conservative",children:"Conservative"}),(0,zt.jsx)("option",{value:"moderate",children:"Moderate"}),(0,zt.jsx)("option",{value:"aggressive",children:"Aggressive"})]})]})]})]}),(0,zt.jsxs)("div",{className:"mt-8 pt-6 border-t border-white/10",children:[(0,zt.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(pye,{className:"text-amber-400",size:20}),"Security"]}),(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:"Two-Factor Authentication"}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"Add an extra layer of security"})]}),(0,zt.jsx)("button",{className:"px-4 py-2 rounded-lg bg-teal-500/20 text-teal-400 hover:bg-teal-500/30 transition-colors",children:"Enable"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:"API Keys"}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"Manage your API access"})]}),(0,zt.jsx)("button",{className:"px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors",children:"Manage"})]})]})]})]})})})},gye=Nm("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),xye=Nm("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),vye="".concat("https://tradehub-380.preview.emergentagent.com","/api"),yye=e=>{var t;let{onClose:n}=e;const{user:a}=Lh(),{theme:r,setTheme:s}=Vh(),[i,l]=(0,o.useState)("general"),[c,u]=(0,o.useState)({theme:r||"dark",language:"en",timezone:"America/New_York",emailNotifications:!0,pushNotifications:!0,priceAlerts:!0,tradeExecutions:!0,newsAlerts:!1,weeklyReport:!0,defaultOrderType:"market",confirmOrders:!0,soundEffects:!0,showPnL:!0,defaultLeverage:1,maxPositionSize:10,stopLossDefault:5,takeProfitDefault:10,dailyLossLimit:5,publicProfile:!1,showInLeaderboard:!0,shareTradeHistory:!1}),d=[{id:"general",label:"General",icon:lye},{id:"notifications",label:"Notifications",icon:wx},{id:"trading",label:"Trading",icon:Wm},{id:"risk",label:"Risk Management",icon:Dm},{id:"privacy",label:"Privacy",icon:zm},{id:"api",label:"API Keys",icon:pye}],h=e=>{let{enabled:t,onChange:n,label:a}=e;return(0,zt.jsx)("button",{onClick:()=>n(!t),className:"relative w-12 h-6 rounded-full transition-colors ".concat(t?"bg-teal-500":"bg-slate-600"),children:(0,zt.jsx)(uu.div,{className:"absolute top-1 w-4 h-4 bg-white rounded-full shadow",animate:{left:t?28:4},transition:{type:"spring",stiffness:500,damping:30}})})};return(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:(0,zt.jsx)(uu.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:(0,zt.jsx)(vx,{className:"p-0 overflow-hidden",children:(0,zt.jsxs)("div",{className:"flex h-[80vh]",children:[(0,zt.jsxs)("div",{className:"w-56 bg-black/30 border-r border-white/10 p-4",children:[(0,zt.jsxs)("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,zt.jsx)(lye,{className:"text-teal-400",size:24}),"Settings"]}),(0,zt.jsx)("nav",{className:"space-y-1",children:d.map(e=>(0,zt.jsxs)("button",{onClick:()=>l(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(i===e.id?"bg-teal-500/20 text-teal-400":"text-slate-400 hover:bg-white/5 hover:text-white"),children:[(0,zt.jsx)(e.icon,{size:18}),(0,zt.jsx)("span",{children:e.label})]},e.id))})]}),(0,zt.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,zt.jsx)("h3",{className:"text-lg font-semibold text-white",children:null===(t=d.find(e=>e.id===i))||void 0===t?void 0:t.label}),(0,zt.jsx)("button",{onClick:n,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:(0,zt.jsx)(Qm,{size:20,className:"text-slate-400"})})]}),(0,zt.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(()=>{switch(i){case"general":return(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-3",children:"Theme"}),(0,zt.jsx)("div",{className:"flex gap-3",children:["dark","light","system"].map(e=>(0,zt.jsxs)("button",{onClick:()=>u(m(m({},c),{},{theme:e})),className:"flex items-center gap-2 px-4 py-3 rounded-lg border transition-colors ".concat(c.theme===e?"bg-teal-500/20 border-teal-500/50 text-teal-400":"bg-white/5 border-white/10 text-slate-400 hover:border-white/20"),children:["dark"===e&&(0,zt.jsx)(gye,{size:18}),"light"===e&&(0,zt.jsx)(xye,{size:18}),"system"===e&&(0,zt.jsx)(Nx,{size:18}),(0,zt.jsx)("span",{className:"capitalize",children:e})]},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-3",children:"Language"}),(0,zt.jsxs)("select",{value:c.language,onChange:e=>u(m(m({},c),{},{language:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-teal-500/50",children:[(0,zt.jsx)("option",{value:"en",children:"English"}),(0,zt.jsx)("option",{value:"es",children:"Espa\xf1ol"}),(0,zt.jsx)("option",{value:"fr",children:"Fran\xe7ais"}),(0,zt.jsx)("option",{value:"de",children:"Deutsch"}),(0,zt.jsx)("option",{value:"zh",children:"\u4e2d\u6587"}),(0,zt.jsx)("option",{value:"ja",children:"\u65e5\u672c\u8a9e"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-3",children:"Timezone"}),(0,zt.jsxs)("select",{value:c.timezone,onChange:e=>u(m(m({},c),{},{timezone:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-teal-500/50",children:[(0,zt.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,zt.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,zt.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,zt.jsx)("option",{value:"Europe/London",children:"London (GMT)"}),(0,zt.jsx)("option",{value:"Europe/Paris",children:"Paris (CET)"}),(0,zt.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"}),(0,zt.jsx)("option",{value:"Asia/Singapore",children:"Singapore (SGT)"})]})]})]});case"notifications":return(0,zt.jsx)("div",{className:"space-y-4",children:[{key:"emailNotifications",label:"Email Notifications",desc:"Receive updates via email"},{key:"pushNotifications",label:"Push Notifications",desc:"Browser and mobile alerts"},{key:"priceAlerts",label:"Price Alerts",desc:"Get notified when prices hit targets"},{key:"tradeExecutions",label:"Trade Executions",desc:"Notifications for filled orders"},{key:"newsAlerts",label:"News Alerts",desc:"Breaking news affecting your positions"},{key:"weeklyReport",label:"Weekly Report",desc:"Weekly performance summary"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:e.label}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:e.desc})]}),(0,zt.jsx)(h,{enabled:c[e.key],onChange:t=>u(m(m({},c),{},{[e.key]:t}))})]},e.key))});case"trading":return(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"block text-sm text-slate-400 mb-3",children:"Default Order Type"}),(0,zt.jsx)("div",{className:"flex gap-3",children:["market","limit","stop"].map(e=>(0,zt.jsx)("button",{onClick:()=>u(m(m({},c),{},{defaultOrderType:e})),className:"flex-1 px-4 py-3 rounded-lg border transition-colors capitalize ".concat(c.defaultOrderType===e?"bg-teal-500/20 border-teal-500/50 text-teal-400":"bg-white/5 border-white/10 text-slate-400 hover:border-white/20"),children:e},e))})]}),[{key:"confirmOrders",label:"Confirm Orders",desc:"Show confirmation before placing orders"},{key:"soundEffects",label:"Sound Effects",desc:"Play sounds for trade executions"},{key:"showPnL",label:"Show P&L",desc:"Display profit/loss on positions"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:e.label}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:e.desc})]}),(0,zt.jsx)(h,{enabled:c[e.key],onChange:t=>u(m(m({},c),{},{[e.key]:t}))})]},e.key))]});case"risk":return(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 mb-2",children:[(0,zt.jsx)(y1,{size:18}),(0,zt.jsx)("span",{className:"font-medium",children:"Risk Management"})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:"These settings help protect your capital. Adjust carefully."})]}),[{key:"maxPositionSize",label:"Max Position Size",desc:"Maximum % of portfolio per trade",suffix:"%"},{key:"stopLossDefault",label:"Default Stop Loss",desc:"Automatic stop loss percentage",suffix:"%"},{key:"takeProfitDefault",label:"Default Take Profit",desc:"Automatic take profit percentage",suffix:"%"},{key:"dailyLossLimit",label:"Daily Loss Limit",desc:"Stop trading after this % loss",suffix:"%"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:e.label}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:e.desc})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("input",{type:"number",value:c[e.key],onChange:t=>u(m(m({},c),{},{[e.key]:parseInt(t.target.value)||0})),className:"w-20 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-right focus:outline-none focus:border-teal-500/50",min:"1",max:"100"}),(0,zt.jsx)("span",{className:"text-slate-400",children:e.suffix})]})]},e.key))]});case"privacy":return(0,zt.jsx)("div",{className:"space-y-4",children:[{key:"publicProfile",label:"Public Profile",desc:"Allow others to view your profile"},{key:"showInLeaderboard",label:"Show in Leaderboard",desc:"Appear in trading leaderboards"},{key:"shareTradeHistory",label:"Share Trade History",desc:"Allow followers to see your trades"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:e.label}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:e.desc})]}),(0,zt.jsx)(h,{enabled:c[e.key],onChange:t=>u(m(m({},c),{},{[e.key]:t}))})]},e.key))});case"api":return(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:"Alpaca Trading"}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"Paper & live trading"})]}),(0,zt.jsx)("span",{className:"px-3 py-1 rounded-full bg-amber-500/20 text-amber-400 text-sm",children:"Not Connected"})]}),(0,zt.jsx)("button",{className:"w-full px-4 py-3 rounded-lg bg-teal-500/20 text-teal-400 hover:bg-teal-500/30 transition-colors",children:"Connect Alpaca"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:"Alpha Vantage"}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"Stock market data"})]}),(0,zt.jsx)("span",{className:"px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-400 text-sm",children:"Connected"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Key: ****FYXZ"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:"Binance"}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:"Crypto trading"})]}),(0,zt.jsx)("span",{className:"px-3 py-1 rounded-full bg-amber-500/20 text-amber-400 text-sm",children:"Not Connected"})]}),(0,zt.jsx)("button",{className:"w-full px-4 py-3 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors",children:"Connect Binance"})]})]});default:return null}})()}),(0,zt.jsxs)("div",{className:"p-6 border-t border-white/10 flex justify-end gap-3",children:[(0,zt.jsx)("button",{onClick:n,className:"px-6 py-3 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors",children:"Cancel"}),(0,zt.jsxs)("button",{onClick:async()=>{try{await fetch("".concat(vye,"/notifications/preferences"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m({user_id:(null===a||void 0===a?void 0:a.user_id)||"demo_user"},c))}),c.theme!==r&&s(c.theme),n()}catch(jEe){console.error("Error saving settings:",jEe)}},className:"px-6 py-3 rounded-lg bg-teal-500 text-white hover:bg-teal-400 transition-colors flex items-center gap-2",children:[(0,zt.jsx)(Um,{size:18}),"Save Changes"]})]})]})]})})})})},bye=e=>{let{onNavigate:t}=e;const{user:n,logout:a,isAuthenticated:r}=Lh(),[s,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1);return r&&n?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"relative group",children:[(0,zt.jsxs)(uu.button,{className:"flex items-center gap-3 px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:border-teal-500/30 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":"user-menu-btn",children:[n.picture?(0,zt.jsx)("img",{src:n.picture,alt:n.name,className:"w-8 h-8 rounded-full border border-white/20"}):(0,zt.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-500/20 flex items-center justify-center",children:(0,zt.jsx)(iye,{size:16,className:"text-teal-400"})}),(0,zt.jsxs)("div",{className:"text-left hidden md:block",children:[(0,zt.jsx)("p",{className:"text-sm font-medium text-white truncate max-w-[120px]",children:n.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono truncate max-w-[120px]",children:n.email})]})]}),(0,zt.jsx)("div",{className:"absolute right-0 top-full mt-2 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,zt.jsxs)("div",{className:"bg-black/90 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden shadow-2xl",children:[(0,zt.jsxs)("div",{className:"px-4 py-3 border-b border-white/5",children:[(0,zt.jsx)("p",{className:"text-sm font-medium text-white",children:n.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:n.email})]}),(0,zt.jsxs)("div",{className:"py-2",children:[(0,zt.jsxs)("button",{onClick:()=>i(!0),className:"w-full flex items-center gap-3 px-4 py-2 text-slate-400 hover:text-white hover:bg-white/5 transition-colors","data-testid":"profile-btn",children:[(0,zt.jsx)(iye,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Profile"})]}),(0,zt.jsxs)("button",{onClick:()=>null===t||void 0===t?void 0:t("portfolio"),className:"w-full flex items-center gap-3 px-4 py-2 text-slate-400 hover:text-white hover:bg-white/5 transition-colors","data-testid":"portfolio-btn",children:[(0,zt.jsx)(oye,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Portfolio"})]}),(0,zt.jsxs)("button",{onClick:()=>c(!0),className:"w-full flex items-center gap-3 px-4 py-2 text-slate-400 hover:text-white hover:bg-white/5 transition-colors","data-testid":"settings-btn",children:[(0,zt.jsx)(lye,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Settings"})]})]}),(0,zt.jsx)("div",{className:"border-t border-white/5 py-2",children:(0,zt.jsxs)("button",{onClick:a,className:"w-full flex items-center gap-3 px-4 py-2 text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 transition-colors","data-testid":"logout-btn",children:[(0,zt.jsx)(cye,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Sign Out"})]})})]})})]}),(0,zt.jsx)(an,{children:s&&(0,zt.jsx)(mye,{onClose:()=>i(!1)})}),(0,zt.jsx)(an,{children:l&&(0,zt.jsx)(yye,{onClose:()=>c(!1)})})]}):null},wye=Nm("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),kye=Nm("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Nye=Nm("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),jye=("".concat("https://tradehub-380.preview.emergentagent.com","/api"),[{id:"trader_1",name:"CryptoWhale",avatar:"\ud83d\udc0b",winRate:78.5,totalPnL:145230,followers:12543,riskLevel:"MODERATE",monthlyReturn:24.5,trades:156,speciality:"Crypto Swing Trading",verified:!0},{id:"trader_2",name:"TechBull",avatar:"\ud83d\udc02",winRate:72.3,totalPnL:89450,followers:8921,riskLevel:"LOW",monthlyReturn:18.2,trades:243,speciality:"Tech Stocks",verified:!0},{id:"trader_3",name:"QuantMaster",avatar:"\ud83e\udd16",winRate:81.2,totalPnL:234500,followers:15678,riskLevel:"HIGH",monthlyReturn:32.8,trades:89,speciality:"Algorithmic Trading",verified:!0},{id:"trader_4",name:"SteadyEddie",avatar:"\ud83c\udfaf",winRate:68.9,totalPnL:56780,followers:5432,riskLevel:"LOW",monthlyReturn:12.4,trades:312,speciality:"Value Investing",verified:!1}]),Sye=e=>{let{trader:t,onCopy:n,isCopying:a}=e;return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:(0,zt.jsxs)(vx,{accent:"white",className:"hover:border-teal-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500/20 to-indigo-500/20 flex items-center justify-center text-2xl border border-white/10",children:t.avatar}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white",children:t.name}),t.verified&&(0,zt.jsx)(Dm,{size:14,className:"text-teal-400"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:t.speciality})]})]}),(0,zt.jsx)(Ox,{variant:"LOW"===t.riskLevel?"success":"HIGH"===t.riskLevel?"danger":"warning",children:t.riskLevel})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,zt.jsxs)("div",{className:"text-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold text-emerald-400",children:[t.winRate,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Monthly"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold ".concat(t.monthlyReturn>=0?"text-emerald-400":"text-rose-400"),children:["+",t.monthlyReturn,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Total P&L"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold text-white",children:["$",(t.totalPnL/1e3).toFixed(0),"k"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-slate-500 text-xs font-mono",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(wye,{size:12}),t.followers.toLocaleString()]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(jm,{size:12}),t.trades," trades"]})]}),(0,zt.jsxs)(Tx,{onClick:()=>n(t),variant:a?"teal":"white",size:"sm","data-testid":"copy-trader-".concat(t.id),children:[a?(0,zt.jsx)(Um,{size:14}):(0,zt.jsx)(kye,{size:14}),a?"Copying":"Copy"]})]})]})})},Cye=e=>{let{onClose:t}=e;const[n,a]=(0,o.useState)(jye),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)("all"),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(1e3),p=e=>{r.includes(e.id)?s(t=>t.filter(t=>t!==e.id)):u(e)},f=n.filter(e=>"all"===i||("low-risk"===i?"LOW"===e.riskLevel:"high-return"===i?e.monthlyReturn>20:"verified"!==i||e.verified));return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"social-trading-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(wye,{className:"text-teal-400"}),"Social Trading"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Copy top traders and mirror their strategies"})]}),t&&(0,zt.jsx)(Tx,{onClick:t,variant:"ghost",size:"sm",children:(0,zt.jsx)(Qm,{size:16})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,zt.jsxs)(vx,{accent:"teal",className:"text-center",children:[(0,zt.jsx)(uye,{className:"text-teal-400 mx-auto mb-2",size:24}),(0,zt.jsx)("p",{className:"text-2xl font-mono font-bold text-white",children:n.length}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Top Traders"})]}),(0,zt.jsxs)(vx,{accent:"white",className:"text-center",children:[(0,zt.jsx)(wye,{className:"text-indigo-400 mx-auto mb-2",size:24}),(0,zt.jsx)("p",{className:"text-2xl font-mono font-bold text-white",children:n.reduce((e,t)=>e+t.followers,0).toLocaleString()}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Total Followers"})]}),(0,zt.jsxs)(vx,{accent:"white",className:"text-center",children:[(0,zt.jsx)(jm,{className:"text-emerald-400 mx-auto mb-2",size:24}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold text-emerald-400",children:[(n.reduce((e,t)=>e+t.monthlyReturn,0)/n.length).toFixed(1),"%"]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Avg Monthly Return"})]}),(0,zt.jsxs)(vx,{accent:"white",className:"text-center",children:[(0,zt.jsx)(kye,{className:"text-amber-400 mx-auto mb-2",size:24}),(0,zt.jsx)("p",{className:"text-2xl font-mono font-bold text-white",children:r.length}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Traders Copied"})]})]}),(0,zt.jsx)("div",{className:"flex gap-2",children:["all","low-risk","high-return","verified"].map(e=>(0,zt.jsx)(Tx,{onClick:()=>l(e),variant:i===e?"teal":"ghost",size:"sm",children:"all"===e?"All Traders":"low-risk"===e?"Low Risk":"high-return"===e?"High Return":"Verified"},e))}),(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(e=>(0,zt.jsx)(Sye,{trader:e,onCopy:p,isCopying:r.includes(e.id)},e.id))}),(0,zt.jsx)(an,{children:c&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>u(null),children:(0,zt.jsx)(uu.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{accent:"teal",children:[(0,zt.jsxs)("h3",{className:"font-heading text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Nye,{className:"text-teal-400"}),"Copy ",c.name]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Amount to Allocate (USD)"}),(0,zt.jsx)("input",{type:"number",value:d,onChange:e=>h(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white font-mono focus:border-teal-500/50 focus:outline-none",min:100,step:100})]}),(0,zt.jsx)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/30",children:(0,zt.jsx)("p",{className:"text-xs text-amber-400 font-mono",children:"\u26a0\ufe0f Copy trading involves risk. Past performance is not indicative of future results."})}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsx)(Tx,{onClick:()=>u(null),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(Tx,{onClick:()=>{c&&(s(e=>[...e,c.id]),u(null))},variant:"teal",className:"flex-1","data-testid":"confirm-copy-btn",children:[(0,zt.jsx)(Um,{size:16}),"Start Copying"]})]})]})]})})})})]})};var Eye=["axis"],Tye=(0,o.forwardRef)((e,t)=>o.createElement(Nue,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Eye,tooltipPayloadSearcher:I3,categoricalChartProps:e,ref:t})),Iye=(e,t,n)=>Yse(e,"xAxis",ixe(e,t),n),Aye=(e,t,n)=>Xse(e,"xAxis",ixe(e,t),n),_ye=(e,t,n)=>Yse(e,"yAxis",oxe(e,t),n),Oye=(e,t,n)=>Xse(e,"yAxis",oxe(e,t),n),Rye=f6([v8,Iye,_ye,Aye,Oye],(e,t,n,a,r)=>L6(e,"xAxis")?X6(t,a,!1):X6(n,r,!1)),Pye=f6([gre,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),Mye=e=>{var t=v8(e);return L6(t,"xAxis")?"yAxis":"xAxis"},Dye=f6([Pye,(e,t,n)=>Fre(e,Mye(e),((e,t)=>"yAxis"===Mye(e)?oxe(e,t):ixe(e,t))(e,t),n)],(e,t)=>{var n;if(null!=e&&null!=t){var{stackId:a}=e,r=Kae(e);if(null!=a&&null!=r){var s=null===(n=t[a])||void 0===n?void 0:n.stackedData,i=null===s||void 0===s?void 0:s.find(e=>e.key===r);if(null!=i)return i.map(e=>[e[0],e[1]])}}}),Fye=f6([v8,Iye,_ye,Aye,Oye,Dye,Pne,Rye,Pye,e=>e.rootProps.baseValue],(e,t,n,a,r,s,i,o,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=i;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=a&&null!=r&&0!==a.length&&0!==r.length&&null!=o){var p,{data:f}=l;if(null!=(p=f&&f.length>0?f:null===u||void 0===u?void 0:u.slice(d,h+1)))return function(e){var t,{areaSettings:{connectNulls:n,baseValue:a,dataKey:r},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:p,bandSize:f}=e,m=s&&s.length,g=sbe(i,o,a,l,c),x="horizontal"===i,v=!1,y=u.map((e,t)=>{var a,i,o;if(m)o=s[d+t];else{var u=F6(e,r);Array.isArray(u)?(o=u,v=!0):o=[g,u]}var y=null!==(a=null===(i=o)||void 0===i?void 0:i[1])&&void 0!==a?a:null,b=null==y||m&&!n&&null==F6(e,r);return x?{x:V6({axis:l,ticks:h,bandSize:f,entry:e,index:t}),y:b?null:c.scale(y),value:o,payload:e}:{x:b?null:l.scale(y),y:V6({axis:c,ticks:p,bandSize:f,entry:e,index:t}),value:o,payload:e}});t=m||v?y.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return x?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):x?c.scale(g):l.scale(g);return{points:y,baseLine:t,isRange:v}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:r,dataStartIndex:d,areaSettings:l,stackedData:s,displayedData:p,chartBaseValue:c,bandSize:o})}}),Lye=["id"],zye=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Bye(){return Bye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bye.apply(null,arguments)}function Uye(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Vye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wye(Object(n),!0).forEach(function(t){Hye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gye(e,t){return e&&"none"!==e?e:t}var qye=e=>{var{dataKey:t,name:n,stroke:a,fill:r,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:Gye(a,r),value:$6(n,t),payload:e}]},Kye=o.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:r,fill:s,name:i,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:s,dataKey:t,nameKey:void 0,name:$6(i,t),hide:l,type:u,color:Gye(a,s),unit:c,graphicalItemId:d}};return o.createElement(Yge,{tooltipEntrySettings:h})});function Xye(e){var{clipPathId:t,points:n,props:a}=e,{needClip:r,dot:s,dataKey:i}=a,l=Sce(a);return o.createElement(dve,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:i,baseProps:l,needClip:r,clipPathId:t})}function Yye(e){var{showLabels:t,children:n,points:a}=e,r=a.map(e=>{var t,n,a={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Vye(Vye({},a),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:a,fill:void 0})});return o.createElement(Rme,{value:t?r:void 0},n)}function $ye(e){var{points:t,baseLine:n,needClip:a,clipPathId:r,props:s}=e,{layout:i,type:l,stroke:c,connectNulls:u,isRange:d}=s,{id:h}=s,p=Uye(s,Lye),f=Sce(p),m=Ece(p);return o.createElement(o.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&o.createElement(Tue,{clipPath:a?"url(#clipPath-".concat(r,")"):void 0},o.createElement(Wpe,Bye({},m,{id:h,points:t,connectNulls:u,type:l,baseLine:n,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==c&&o.createElement(Wpe,Bye({},f,{className:"recharts-area-curve",layout:i,type:l,connectNulls:u,fill:"none",points:t})),"none"!==c&&d&&o.createElement(Wpe,Bye({},f,{className:"recharts-area-curve",layout:i,type:l,connectNulls:u,fill:"none",points:n}))),o.createElement(Xye,{points:t,props:p,clipPathId:r}))}function Qye(e){var t,n,{alpha:a,baseLine:r,points:s,strokeWidth:i}=e,l=null===(t=s[0])||void 0===t?void 0:t.y,c=null===(n=s[s.length-1])||void 0===n?void 0:n.y;if(!Q1(l)||!Q1(c))return null;var u=a*Math.abs(l-c),d=Math.max(...s.map(e=>e.x||0));return O1(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(e=>e.x||0),d)),O1(d)?o.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(i?parseInt("".concat(i),10):1),height:Math.floor(u)}):null}function Jye(e){var t,n,{alpha:a,baseLine:r,points:s,strokeWidth:i}=e,l=null===(t=s[0])||void 0===t?void 0:t.x,c=null===(n=s[s.length-1])||void 0===n?void 0:n.x;if(!Q1(l)||!Q1(c))return null;var u=a*Math.abs(l-c),d=Math.max(...s.map(e=>e.y||0));return O1(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(e=>e.y||0),d)),O1(d)?o.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(i?parseInt("".concat(i),10):1))}):null}function Zye(e){var{alpha:t,layout:n,points:a,baseLine:r,strokeWidth:s}=e;return"vertical"===n?o.createElement(Qye,{alpha:t,points:a,baseLine:r,strokeWidth:s}):o.createElement(Jye,{alpha:t,points:a,baseLine:r,strokeWidth:s})}function ebe(e){var{needClip:t,clipPathId:n,props:a,previousPointsRef:r,previousBaselineRef:s}=e,{points:i,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:p,onAnimationEnd:f}=a,m=Nfe((0,o.useMemo)(()=>({points:i,baseLine:l}),[i,l]),"recharts-area-"),g=(()=>{var e=y8();if("horizontal"===e||"vertical"===e)return e})(),[x,v]=(0,o.useState)(!1),y=!x,b=(0,o.useCallback)(()=>{"function"===typeof f&&f(),v(!1)},[f]),w=(0,o.useCallback)(()=>{"function"===typeof p&&p(),v(!0)},[p]);if(null==g)return null;var k=r.current,N=s.current;return o.createElement(Yye,{showLabels:y,points:i},a.children,o.createElement(kfe,{animationId:m,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:b,onAnimationStart:w,key:m},e=>{if(k){var u,d=k.length/i.length,h=1===e?i:i.map((t,n)=>{var a=Math.floor(n*d);if(k[a]){var r=k[a];return Vye(Vye({},t),{},{x:L1(r.x,t.x,e),y:L1(r.y,t.y,e)})}return t});return u=O1(l)?L1(N,l,e):B1(l)||A1(l)?L1(N,0,e):l.map((t,n)=>{var a=Math.floor(n*d);if(Array.isArray(N)&&N[a]){var r=N[a];return Vye(Vye({},t),{},{x:L1(r.x,t.x,e),y:L1(r.y,t.y,e)})}return t}),e>0&&(r.current=h,s.current=u),o.createElement($ye,{points:h,baseLine:u,needClip:t,clipPathId:n,props:a})}return e>0&&(r.current=i,s.current=l),o.createElement(Tue,null,c&&o.createElement("defs",null,o.createElement("clipPath",{id:"animationClipPath-".concat(n)},o.createElement(Zye,{alpha:e,points:i,baseLine:l,layout:g,strokeWidth:a.strokeWidth}))),o.createElement(Tue,{clipPath:"url(#animationClipPath-".concat(n,")")},o.createElement($ye,{points:i,baseLine:l,needClip:t,clipPathId:n,props:a})))}),o.createElement(Fme,{label:a.label}))}function tbe(e){var{needClip:t,clipPathId:n,props:a}=e,r=(0,o.useRef)(null),s=(0,o.useRef)();return o.createElement(ebe,{needClip:t,clipPathId:n,props:a,previousPointsRef:r,previousBaselineRef:s})}class nbe extends o.PureComponent{render(){var{hide:e,dot:t,points:n,className:a,top:r,left:s,needClip:i,xAxisId:l,yAxisId:c,width:u,height:d,id:h,baseLine:p,zIndex:f}=this.props;if(e)return null;var m=eg("recharts-area",a),g=h,{r:x,strokeWidth:v}=Sve(t),y=Hme(t),b=2*x+v,w=i?"url(#clipPath-".concat(y?"":"dots-").concat(g,")"):void 0;return o.createElement(pde,{zIndex:f},o.createElement(Tue,{className:m},i&&o.createElement("defs",null,o.createElement(txe,{clipPathId:g,xAxisId:l,yAxisId:c}),!y&&o.createElement("clipPath",{id:"clipPath-dots-".concat(g)},o.createElement("rect",{x:s-b/2,y:r-b/2,width:u+b,height:d+b}))),o.createElement(tbe,{needClip:i,clipPathId:g,props:this.props})),o.createElement(gve,{points:n,mainColor:Gye(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:w}),this.props.isRange&&Array.isArray(p)&&o.createElement(gve,{points:p,mainColor:Gye(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:w}))}}var abe={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:xae.area};function rbe(e){var t,n=bue(e,abe),{activeDot:a,animationBegin:r,animationDuration:s,animationEasing:i,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:p,legendType:f,stroke:m,xAxisId:g,yAxisId:x}=n,v=Uye(n,zye),y=y8(),b=moe(),{needClip:w}=exe(g,x),k=h8(),{points:N,isRange:j,baseLine:S}=null!==(t=N6(t=>Fye(t,e.id,k)))&&void 0!==t?t:{},C=pue();if("horizontal"!==y&&"vertical"!==y||null==C)return null;if("AreaChart"!==b&&"ComposedChart"!==b)return null;var{height:E,width:T,x:I,y:A}=C;return N&&N.length?o.createElement(nbe,Bye({},v,{activeDot:a,animationBegin:r,animationDuration:s,animationEasing:i,baseLine:S,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:E,hide:h,layout:y,isAnimationActive:"auto"===p?!Zle:p,isRange:j,legendType:f,needClip:w,points:N,stroke:m,width:T,left:I,top:A,xAxisId:g,yAxisId:x})):null}var sbe=(e,t,n,a,r)=>{var s=null!==n&&void 0!==n?n:t;if(O1(s))return s;var i="horizontal"===e?r:a,o=i.scale.domain();if("number"===i.type){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return"dataMin"===s?c:"dataMax"===s||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return"dataMin"===s?o[0]:"dataMax"===s?o[1]:o[0]};function ibe(e){var t=bue(e,abe),n=h8();return o.createElement(kxe,{id:t.id,type:"area"},e=>o.createElement(o.Fragment,null,o.createElement(vxe,{legendPayload:qye(t)}),o.createElement(Kye,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(jxe,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:W6(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),o.createElement(rbe,Bye({},t,{id:e}))))}var obe=o.memo(ibe,mce);function lbe(e){var t=y6();return(0,o.useEffect)(()=>{t(Mle(e))},[t,e]),null}obe.displayName="Area";var cbe=["layout"];function ube(){return ube=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ube.apply(null,arguments)}var dbe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},hbe=(0,o.forwardRef)(function(e,t){var n,a=bue(e.categoricalChartProps,dbe),{layout:r}=a,s=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(a,cbe),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,d={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return o.createElement(dce,{preloadedState:{options:d},reduxStoreName:null!==(n=a.id)&&void 0!==n?n:i},o.createElement(hce,{chartData:a.data}),o.createElement(xce,{layout:r,margin:a.margin}),o.createElement(vce,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),o.createElement(lbe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),o.createElement(xue,ube({},s,{ref:t})))});function pbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function fbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pbe(Object(n),!0).forEach(function(t){mbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pbe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mbe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gbe=["item"],xbe=fbe(fbe({},dbe),{},{layout:"centric",startAngle:0,endAngle:360}),vbe=(0,o.forwardRef)((e,t)=>{var n=bue(e,xbe);return o.createElement(hbe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:gbe,tooltipPayloadSearcher:I3,categoricalChartProps:n,ref:t})}),ybe=e=>e.graphicalItems.polarItems,bbe=f6([Gae,qae],mre),wbe=f6([ybe,hre,bbe],vre),kbe=f6([wbe],Nre),Nbe=f6([kbe,One],Sre),jbe=f6([Nbe,hre,wbe],Ere),Sbe=(f6([Nbe,hre,wbe],(e,t,n)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var a;return{value:F6(e,null!==(a=t.dataKey)&&void 0!==a?a:n.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:F6(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),()=>{}),Cbe=f6([Nbe,hre,wbe,Hre,Gae],qre),Ebe=f6([hre,Ure,Wre,Sbe,Cbe,Sbe,v8,Gae],cse),Tbe=f6([hre,v8,Nbe,jbe,tae,Gae,Ebe],hse),Ibe=f6([Tbe,hre,mse],xse);f6([hre,Tbe,Ibe,Gae],yse);function Abe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Abe(Object(n),!0).forEach(function(t){Obe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Abe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Obe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rbe=f6([ybe,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),Pbe=[],Mbe=(e,t,n)=>0===(null===n||void 0===n?void 0:n.length)?Pbe:n,Dbe=f6([One,Rbe,Mbe],(e,t,n)=>{var a,{chartData:r}=e;if(null!=t&&((a=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:r)&&a.length||null==n||(a=n.map(e=>_be(_be({},t.presentationProps),e.props))),null!=a))return a}),Fbe=f6([Dbe,Rbe,Mbe],(e,t,n)=>{if(null!=e&&null!=t)return e.map((e,a)=>{var r,s,i=F6(e,t.nameKey,t.name);return s=null!==n&&void 0!==n&&null!==(r=n[a])&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.fill?n[a].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:$6(i,t.dataKey),color:s,payload:e,type:t.legendType}})}),Lbe=f6([Dbe,Rbe,Mbe,l8],(e,t,n,a)=>{if(null!=t&&null!=e)return function(e){var t,n,a,{pieSettings:r,displayedData:s,cells:i,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:u,dataKey:d,nameKey:h,tooltipType:p}=r,f=Math.abs(r.minAngle),m=Jbe(c,u),g=Math.abs(m),x=s.length<=1?0:null!==(t=r.paddingAngle)&&void 0!==t?t:0,v=s.filter(e=>0!==F6(e,d,0)).length,y=g-v*f-(g>=360?v:v-1)*x,b=s.reduce((e,t)=>{var n=F6(t,d,0);return e+(O1(n)?n:0)},0);b>0&&(n=s.map((e,t)=>{var n,s=F6(e,d,0),u=F6(e,h,t),g=Qbe(r,o,e),v=(O1(s)?s:0)/b,w=Hbe(Hbe({},e),i&&i[t]&&i[t].props),k=(n=t?a.endAngle+I1(m)*x*(0!==s?1:0):c)+I1(m)*((0!==s?f:0)+v*y),N=(n+k)/2,j=(g.innerRadius+g.outerRadius)/2,S=[{name:u,value:s,payload:w,dataKey:d,type:p,graphicalItemId:r.id}],C=hae(g.cx,g.cy,j,N);return a=Hbe(Hbe(Hbe(Hbe({},r.presentationProps),{},{percent:v,cornerRadius:"string"===typeof l?parseFloat(l):l,name:u,tooltipPayload:S,midAngle:N,middleRadius:j,tooltipPosition:C},w),g),{},{value:s,dataKey:d,startAngle:n,endAngle:k,payload:w,paddingAngle:I1(m)*x})}));return n}({offset:a,pieSettings:t,displayedData:e,cells:n})}),zbe=["key"],Bbe=["onMouseEnter","onClick","onMouseLeave"],Ube=["id"],Wbe=["id"];function Vbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Hbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vbe(Object(n),!0).forEach(function(t){Gbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vbe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gbe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qbe(){return qbe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qbe.apply(null,arguments)}function Kbe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xbe(e){var t=(0,o.useMemo)(()=>Vme(e.children,jme),[e.children]),n=N6(n=>Fbe(n,e.id,t));return null==n?null:o.createElement(yxe,{legendPayload:n})}var Ybe=o.memo(e=>{var{dataKey:t,nameKey:n,sectors:a,stroke:r,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:a.map(e=>e.tooltipPayload),positions:a.map(e=>e.tooltipPosition),settings:{stroke:r,strokeWidth:s,fill:i,dataKey:t,nameKey:n,name:$6(l,t),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return o.createElement(Yge,{tooltipEntrySettings:h})}),$be=(e,t)=>e>t?"start":e<t?"end":"middle",Qbe=(e,t,n)=>{var{top:a,left:r,width:s,height:i}=t,o=pae(s,i),l=r+D1(e.cx,s,s/2),c=a+D1(e.cy,i,i/2),u=D1(e.innerRadius,o,0),d=((e,t,n)=>D1("function"===typeof t?t(e):t,n,.8*n))(n,e.outerRadius,o);return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:e.maxRadius||Math.sqrt(s*s+i*i)/2}},Jbe=(e,t)=>I1(t-e)*Math.min(Math.abs(t-e),360);function Zbe(e){var{sectors:t,props:n,showLabels:a}=e,{label:r,labelLine:s,dataKey:i}=n;if(!a||!r||!t)return null;var l=Sce(n),c=Cce(r),u=Cce(s),d="object"===typeof r&&"offsetRadius"in r&&"number"===typeof r.offsetRadius&&r.offsetRadius||20,h=t.map((e,t)=>{var n=(e.startAngle+e.endAngle)/2,a=hae(e.cx,e.cy,e.outerRadius+d,n),h=Hbe(Hbe(Hbe(Hbe({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:$be(a.x,e.cx)},a),p=Hbe(Hbe(Hbe(Hbe({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:t,points:[hae(e.cx,e.cy,e.outerRadius,n),a],key:"line"});return o.createElement(pde,{zIndex:xae.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},o.createElement(Tue,null,s&&((e,t)=>{if(o.isValidElement(e))return o.cloneElement(e,t);if("function"===typeof e)return e(t);var n=eg("recharts-pie-label-line","boolean"!==typeof e?e.className:""),{key:a}=t,r=Kbe(t,zbe);return o.createElement(Wpe,qbe({},r,{type:"linear",className:n}))})(s,p),((e,t,n)=>{if(o.isValidElement(e))return o.cloneElement(e,t);var a=n;if("function"===typeof e&&(a=e(t),o.isValidElement(a)))return a;var r,s=eg("recharts-pie-label-text",(r=e)&&"object"===typeof r&&"className"in r&&"string"===typeof r.className?r.className:"");return o.createElement(dde,qbe({},t,{alignmentBaseline:"middle",className:s}),a)})(r,h,F6(e,i))))});return o.createElement(Tue,{className:"recharts-pie-labels"},h)}function ewe(e){var{sectors:t,props:n,showLabels:a}=e,{label:r}=n;return"object"===typeof r&&null!=r&&"position"in r?o.createElement(Fme,{label:r}):o.createElement(Zbe,{sectors:t,props:n,showLabels:a})}function twe(e){var{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:r,shape:s,id:i}=e,l=N6(toe),c=N6(aoe),u=N6(roe),{onMouseEnter:d,onClick:h,onMouseLeave:p}=r,f=Kbe(r,Bbe),m=qge(d,r.dataKey,i),g=Kge(p),x=Xge(h,r.dataKey,i);return null==t||0===t.length?null:o.createElement(o.Fragment,null,t.map((e,d)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==t.length)return null;var h=null==u||u===i,p=String(d)===l&&(null==c||r.dataKey===c)&&h,v=n&&p?n:l?a:null,y=Hbe(Hbe({},e),{},{stroke:e.stroke,tabIndex:-1,[a8]:d,[r8]:i});return o.createElement(Tue,qbe({key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(d),tabIndex:-1,className:"recharts-pie-sector"},Mde(f,e,d),{onMouseEnter:m(e,d),onMouseLeave:g(e,d),onClick:x(e,d)}),o.createElement(Wge,qbe({option:null!==s&&void 0!==s?s:v,index:d,shapeType:"sector",isActive:p},y)))}))}function nwe(e){var{showLabels:t,sectors:n,children:a}=e,r=(0,o.useMemo)(()=>t&&n?n.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[n,t]);return o.createElement(Mme,{value:t?r:void 0},a)}function awe(e){var{props:t,previousSectorsRef:n,id:a}=e,{sectors:r,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=t,f=Nfe(t,"recharts-pie-"),m=n.current,[g,x]=(0,o.useState)(!1),v=(0,o.useCallback)(()=>{"function"===typeof p&&p(),x(!1)},[p]),y=(0,o.useCallback)(()=>{"function"===typeof h&&h(),x(!0)},[h]);return o.createElement(nwe,{showLabels:!g,sectors:r},o.createElement(kfe,{animationId:f,begin:i,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:v,key:f},e=>{var s=[],i=r&&r[0],l=null===i||void 0===i?void 0:i.startAngle;return null===r||void 0===r||r.forEach((t,n)=>{var a=m&&m[n],r=n>0?C1()(t,"paddingAngle",0):0;if(a){var i=L1(a.endAngle-a.startAngle,t.endAngle-t.startAngle,e),o=Hbe(Hbe({},t),{},{startAngle:l+r,endAngle:l+i+r});s.push(o),l=o.endAngle}else{var{endAngle:c,startAngle:u}=t,d=L1(0,c-u,e),h=Hbe(Hbe({},t),{},{startAngle:l+r,endAngle:l+d+r});s.push(h),l=h.endAngle}}),n.current=s,o.createElement(Tue,null,o.createElement(twe,{sectors:s,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:a}))}),o.createElement(ewe,{showLabels:!g,sectors:r,props:t}),t.children)}var rwe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:xae.area};function swe(e){var{id:t}=e,n=Kbe(e,Ube),{hide:a,className:r,rootTabIndex:s}=e,i=(0,o.useMemo)(()=>Vme(e.children,jme),[e.children]),l=N6(e=>Lbe(e,t,i)),c=(0,o.useRef)(null),u=eg("recharts-pie",r);return a||null==l?(c.current=null,o.createElement(Tue,{tabIndex:s,className:u})):o.createElement(pde,{zIndex:e.zIndex},o.createElement(Ybe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),o.createElement(Tue,{tabIndex:s,className:u},o.createElement(awe,{props:Hbe(Hbe({},n),{},{sectors:l}),previousSectorsRef:c,id:t})))}function iwe(e){var t=bue(e,rwe),{id:n}=t,a=Kbe(t,Wbe),r=Sce(a);return o.createElement(kxe,{id:n,type:"pie"},e=>o.createElement(o.Fragment,null,o.createElement(Sxe,{type:"pie",id:e,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),o.createElement(Xbe,qbe({},a,{id:e})),o.createElement(swe,qbe({},a,{id:e}))))}iwe.displayName="Pie";const owe=Nm("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),lwe=Nm("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),cwe=Nm("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),uwe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),dwe=["#14b8a6","#6366f1","#f59e0b","#f43f5e","#8b5cf6","#ec4899"],hwe=e=>{let{isPaperTrading:t=!1}=e;const[n,a]=(0,o.useState)(null),[r,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)("1M"),[c,u]=(0,o.useState)([]);if((0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(uwe,"/portfolio/summary"),{withCredentials:!0});a(e.data);const t=[];let n=.85*e.data.total_value;for(let a=30;a>=0;a--){n*=1+.03*(Math.random()-.45),t.push({day:a,date:new Date(Date.now()-24*a*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Math.round(n),pnl:100*Math.round((n-.85*e.data.total_value)/100)})}u(t)}catch(e){console.error("Error fetching portfolio:",e),a({total_value:t?1e5:345678,daily_pnl:t?2340:8945,daily_pnl_percent:t?2.34:2.65,positions:[{symbol:"BTC",quantity:2.5,value:223500,price:89400},{symbol:"ETH",quantity:25,value:74750,price:2990},{symbol:"AAPL",quantity:500,value:124e3,price:248},{symbol:"NVDA",quantity:200,value:29e3,price:145}],cash_balance:t?5e4:75e3})}s(!1)};e();const n=setInterval(e,3e4);return()=>clearInterval(n)},[t]),r||!n)return(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-teal-500 border-t-transparent"})});const d=n.positions.reduce((e,t)=>e+t.value,0),h=n.positions.map(e=>({name:e.symbol,value:e.value,percent:(e.value/d*100).toFixed(1)}));h.push({name:"Cash",value:n.cash_balance,percent:(n.cash_balance/n.total_value*100).toFixed(1)});const p=e=>{let{active:t,payload:n}=e;var a;return t&&n&&n.length?(0,zt.jsxs)("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg px-3 py-2",children:[(0,zt.jsxs)("p",{className:"text-white font-mono text-sm",children:["$",null===(a=n[0].value)||void 0===a?void 0:a.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-slate-500 font-mono text-xs",children:n[0].payload.date})]}):null};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"portfolio-analytics",children:[(0,zt.jsx)("div",{className:"flex items-center justify-between",children:(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Sm,{className:"text-teal-400"}),"Portfolio Analytics",t&&(0,zt.jsx)(Ox,{variant:"warning",children:"PAPER TRADING"})]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Track your performance and allocation"})]})}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,zt.jsxs)(vx,{accent:"teal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)(Mm,{className:"text-teal-400",size:20}),(0,zt.jsx)(Ox,{variant:"active",children:"LIVE"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold text-white",children:["$",n.total_value.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"Total Value"})]}),(0,zt.jsxs)(vx,{accent:n.daily_pnl>=0?"teal":"rose",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[n.daily_pnl>=0?(0,zt.jsx)(owe,{className:"text-emerald-400",size:20}):(0,zt.jsx)(lwe,{className:"text-rose-400",size:20}),(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500",children:"24H"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold ".concat(n.daily_pnl>=0?"text-emerald-400":"text-rose-400"),children:[n.daily_pnl>=0?"+":"","$",n.daily_pnl.toLocaleString()]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["Daily P&L (",n.daily_pnl_percent>=0?"+":"",n.daily_pnl_percent.toFixed(2),"%)"]})]}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)(Tm,{className:"text-indigo-400",size:20}),(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500",children:n.positions.length})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold text-white",children:["$",d.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"Invested"})]}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)(Sm,{className:"text-amber-400",size:20}),(0,zt.jsx)(cwe,{size:14,className:"text-slate-500"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold text-white",children:["$",n.cash_balance.toLocaleString()]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["Cash (",(n.cash_balance/n.total_value*100).toFixed(1),"%)"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,zt.jsx)("div",{className:"col-span-2",children:(0,zt.jsxs)(vx,{accent:"teal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold text-white",children:"Performance"}),(0,zt.jsx)("div",{className:"flex gap-1",children:["1W","1M","3M","1Y"].map(e=>(0,zt.jsx)("button",{onClick:()=>l(e),className:"px-2 py-1 rounded text-xs font-mono ".concat(i===e?"bg-teal-500/20 text-teal-400":"text-slate-500 hover:text-white"),children:e},e))})]}),(0,zt.jsx)("div",{className:"h-[200px]",children:(0,zt.jsx)(o2,{width:"100%",height:"100%",children:(0,zt.jsxs)(Tye,{data:c,children:[(0,zt.jsx)("defs",{children:(0,zt.jsxs)("linearGradient",{id:"portfolioGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,zt.jsx)("stop",{offset:"0%",stopColor:"#14b8a6",stopOpacity:.3}),(0,zt.jsx)("stop",{offset:"100%",stopColor:"#14b8a6",stopOpacity:0})]})}),(0,zt.jsx)(mhe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},interval:"preserveStartEnd"}),(0,zt.jsx)(jhe,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k"),width:50}),(0,zt.jsx)(Nme,{content:(0,zt.jsx)(p,{})}),(0,zt.jsx)(obe,{type:"monotone",dataKey:"value",stroke:"#14b8a6",strokeWidth:2,fill:"url(#portfolioGradient)"})]})})})]})}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Cm,{size:18,className:"text-indigo-400"}),"Allocation"]}),(0,zt.jsx)("div",{className:"h-[180px]",children:(0,zt.jsx)(o2,{width:"100%",height:"100%",children:(0,zt.jsxs)(vbe,{children:[(0,zt.jsx)(iwe,{data:h,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:h.map((e,t)=>(0,zt.jsx)(jme,{fill:dwe[t%dwe.length]},e.name))}),(0,zt.jsx)(Nme,{formatter:e=>"$".concat(e.toLocaleString()),contentStyle:{background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"}})]})})}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:h.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,zt.jsx)("div",{className:"w-2 h-2 rounded-full",style:{background:dwe[t%dwe.length]}}),(0,zt.jsx)("span",{className:"text-slate-400 font-mono",children:e.name}),(0,zt.jsxs)("span",{className:"text-white font-mono ml-auto",children:[e.percent,"%"]})]},e.name))})]})]}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold text-white mb-4",children:"Open Positions"}),(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("th",{className:"text-left text-xs font-mono text-slate-500 pb-3",children:"Asset"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Quantity"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Price"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Value"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Allocation"})]})}),(0,zt.jsx)("tbody",{children:n.positions.map((e,t)=>(0,zt.jsxs)(uu.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,zt.jsx)("td",{className:"py-3",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold",style:{background:dwe[t%dwe.length]+"20",color:dwe[t%dwe.length]},children:e.symbol.slice(0,2)}),(0,zt.jsx)("span",{className:"font-mono font-semibold text-white",children:e.symbol})]})}),(0,zt.jsx)("td",{className:"text-right font-mono text-white",children:e.quantity}),(0,zt.jsxs)("td",{className:"text-right font-mono text-slate-400",children:["$",e.price.toLocaleString()]}),(0,zt.jsxs)("td",{className:"text-right font-mono font-semibold text-white",children:["$",e.value.toLocaleString()]}),(0,zt.jsx)("td",{className:"text-right",children:(0,zt.jsxs)(Ox,{variant:"default",children:[(e.value/n.total_value*100).toFixed(1),"%"]})})]},e.symbol))})]})})]})]})},pwe=(0,o.createContext)(null),fwe=e=>{let{children:t,initialBalance:n=1e5}=e;const[a,r]=(0,o.useState)(!0),[s,i]=(0,o.useState)(n),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)(0);(0,o.useEffect)(()=>{const e=localStorage.getItem("paperTrading");if(e){const t=JSON.parse(e);i(t.balance||n),c(t.positions||[]),d(t.trades||[]),p(t.totalPnL||0)}},[n]),(0,o.useEffect)(()=>{localStorage.setItem("paperTrading",JSON.stringify({balance:s,positions:l,trades:u,totalPnL:h}))},[s,l,u,h]);const f={isPaperMode:a,setIsPaperMode:r,balance:s,positions:l,trades:u,totalPnL:h,executeTrade:(e,t,n,a)=>{const r=n*a,o={id:Date.now(),action:e,symbol:t,quantity:n,price:a,cost:r,timestamp:(new Date).toISOString()};if("BUY"===e){if(r>s)return{success:!1,error:"Insufficient funds"};i(e=>e-r),c(e=>{const s=e.find(e=>e.symbol===t);if(s){const r=s.quantity+n,i=(s.avgPrice*s.quantity+a*n)/r;return e.map(e=>e.symbol===t?m(m({},e),{},{quantity:r,avgPrice:i,value:r*a}):e)}return[...e,{symbol:t,quantity:n,avgPrice:a,value:r}]})}else if("SELL"===e){const e=l.find(e=>e.symbol===t);if(!e||e.quantity<n)return{success:!1,error:"Insufficient position"};const s=(a-e.avgPrice)*n;i(e=>e+r),p(e=>e+s),c(r=>{const s=e.quantity-n;return 0===s?r.filter(e=>e.symbol!==t):r.map(e=>e.symbol===t?m(m({},e),{},{quantity:s,value:s*a}):e)}),o.pnl=s}return d(e=>[o,...e].slice(0,50)),{success:!0,trade:o}},resetAccount:()=>{i(n),c([]),d([]),p(0),localStorage.removeItem("paperTrading")}};return(0,zt.jsx)(pwe.Provider,{value:f,children:t})},mwe=Nm("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),gwe=Nm("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),xwe=Nm("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),vwe=Nm("bell-ring",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]),ywe=Nm("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),bwe=e=>{let{currentPrices:t={}}=e;const[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!0),[d,h]=(0,o.useState)({symbol:"BTC",condition:"above",price:1e5,enabled:!0});(0,o.useEffect)(()=>{const e=localStorage.getItem("priceAlerts");e&&a(JSON.parse(e))},[]),(0,o.useEffect)(()=>{localStorage.setItem("priceAlerts",JSON.stringify(n))},[n]),(0,o.useEffect)(()=>{n.forEach(e=>{if(!e.enabled)return;const n=t[e.symbol];if(!n)return;if(("above"===e.condition?n>=e.price:n<=e.price)&&!r.includes(e.id)){if(s(t=>[...t,e.id]),c){new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleWwsLGOb5+vhSwoOTIzf").play().catch(()=>{})}"Notification"in window&&"granted"===Notification.permission&&new Notification("Price Alert: ".concat(e.symbol),{body:"".concat(e.symbol," is now ").concat(e.condition," $").concat(e.price.toLocaleString()),icon:"/favicon.ico"})}})},[t,n,r,c]),(0,o.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"price-alerts-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(wx,{className:"text-amber-400",size:20}),"Price Alerts"]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>u(!c),className:"p-2 rounded-lg transition-colors ".concat(c?"text-teal-400 bg-teal-500/10":"text-slate-500 bg-white/5"),"data-testid":"toggle-alert-sound",children:c?(0,zt.jsx)(mwe,{size:16}):(0,zt.jsx)(gwe,{size:16})}),(0,zt.jsxs)(Tx,{onClick:()=>l(!0),variant:"teal",size:"sm","data-testid":"add-alert-btn",children:[(0,zt.jsx)(xwe,{size:14}),"Add Alert"]})]})]}),(0,zt.jsx)(an,{children:n.filter(e=>r.includes(e.id)).map(e=>(0,zt.jsx)(uu.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/30",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(vwe,{className:"text-amber-400 animate-pulse",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"font-mono font-semibold text-amber-400",children:[e.symbol," Alert Triggered!"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-400",children:["Price ",e.condition," $",e.price.toLocaleString()]})]})]}),(0,zt.jsx)("button",{onClick:()=>(e=>{s(t=>t.filter(t=>t!==e))})(e.id),className:"p-2 text-slate-500 hover:text-white transition-colors",children:(0,zt.jsx)(Qm,{size:16})})]})},"triggered-".concat(e.id)))}),(0,zt.jsx)(vx,{accent:"white",children:0===n.length?(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,zt.jsx)(wx,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,zt.jsx)("p",{className:"text-sm font-mono",children:"No alerts set"}),(0,zt.jsx)("p",{className:"text-xs",children:'Click "Add Alert" to create one'})]}):(0,zt.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors ".concat(e.enabled?"bg-white/5":"bg-white/2 opacity-50"," ").concat(r.includes(e.id)?"ring-1 ring-amber-500/50":""),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("button",{onClick:()=>(e=>{a(t=>t.map(t=>t.id===e?m(m({},t),{},{enabled:!t.enabled}):t))})(e.id),className:"w-8 h-8 rounded-lg flex items-center justify-center transition-colors ".concat(e.enabled?"bg-teal-500/20 text-teal-400":"bg-white/5 text-slate-600"),children:e.enabled?(0,zt.jsx)(Um,{size:14}):(0,zt.jsx)(Qm,{size:14})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"font-mono font-semibold text-white",children:e.symbol}),(0,zt.jsxs)(Ox,{variant:"above"===e.condition?"success":"danger",children:["above"===e.condition?(0,zt.jsx)(jm,{size:10}):(0,zt.jsx)(Mx,{size:10}),e.condition]})]}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500",children:["$",e.price.toLocaleString(),t[e.symbol]&&(0,zt.jsxs)("span",{className:"ml-2 text-slate-600",children:["(now: $",t[e.symbol].toLocaleString(),")"]})]})]})]}),(0,zt.jsx)("button",{onClick:()=>(e=>{a(t=>t.filter(t=>t.id!==e)),s(t=>t.filter(t=>t!==e))})(e.id),className:"p-2 text-slate-500 hover:text-rose-400 transition-colors","data-testid":"delete-alert-".concat(e.id),children:(0,zt.jsx)(ywe,{size:14})})]},e.id))})}),(0,zt.jsx)(an,{children:i&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>l(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{accent:"teal",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(xwe,{className:"text-teal-400"}),"New Price Alert"]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex gap-2 flex-wrap",children:["BTC","ETH","SOL","AAPL","NVDA","SPY"].map(e=>(0,zt.jsx)("button",{onClick:()=>h(t=>m(m({},t),{},{symbol:e})),className:"px-3 py-2 rounded-lg text-xs font-mono transition-all ".concat(d.symbol===e?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:e},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Condition"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)("button",{onClick:()=>h(e=>m(m({},e),{},{condition:"above"})),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-mono transition-all ".concat("above"===d.condition?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:[(0,zt.jsx)(jm,{size:14}),"Above"]}),(0,zt.jsxs)("button",{onClick:()=>h(e=>m(m({},e),{},{condition:"below"})),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-mono transition-all ".concat("below"===d.condition?"bg-rose-500/20 text-rose-400 border border-rose-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:[(0,zt.jsx)(Mx,{size:14}),"Below"]})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Target Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:d.price,onChange:e=>h(t=>m(m({},t),{},{price:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white font-mono focus:border-teal-500/50 focus:outline-none",min:0,step:"BTC"===d.symbol?1e3:"ETH"===d.symbol?100:1})]}),(0,zt.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,zt.jsx)(Tx,{onClick:()=>l(!1),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(Tx,{onClick:()=>{const e=m(m({},d),{},{id:Date.now(),createdAt:(new Date).toISOString()});a(t=>[...t,e]),l(!1),h({symbol:"BTC",condition:"above",price:1e5,enabled:!0})},variant:"teal",className:"flex-1","data-testid":"confirm-add-alert",children:[(0,zt.jsx)(Um,{size:16}),"Create Alert"]})]})]})]})})})})]})},wwe=Nm("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),kwe=e=>{let{currentPrices:t={},onExecuteOrder:n}=e;const[a,r]=(0,o.useState)("limit"),[s,i]=(0,o.useState)("BUY"),[l,c]=(0,o.useState)("BTC"),[u,d]=(0,o.useState)(.1),[h,p]=(0,o.useState)(0),[f,m]=(0,o.useState)(0),[g,x]=(0,o.useState)(0),[v,y]=(0,o.useState)(5),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)([]),j=t[l]||0,S=[{id:"limit",label:"Limit",icon:Am,desc:"Execute at specific price"},{id:"stop-loss",label:"Stop Loss",icon:y1,desc:"Sell when price drops to"},{id:"take-profit",label:"Take Profit",icon:jm,desc:"Sell when price rises to"},{id:"trailing-stop",label:"Trailing Stop",icon:cwe,desc:"Dynamic stop loss"}];o.useEffect(()=>{j>0&&(p(Math.round(j*("BUY"===s?.98:1.02))),m(Math.round(.95*j)),x(Math.round(1.1*j)))},[j,l,s]);const C=()=>u*("limit"===a?h:j);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"advanced-orders-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Em,{className:"text-indigo-400",size:20}),"Advanced Orders"]}),(0,zt.jsxs)(Ox,{variant:"info",children:[(0,zt.jsx)(wwe,{size:10}),k.length," pending"]})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:S.map(e=>(0,zt.jsxs)("button",{onClick:()=>r(e.id),className:"p-3 rounded-xl text-left transition-all ".concat(a===e.id?"bg-indigo-500/20 border border-indigo-500/30 text-indigo-400":"bg-white/5 border border-white/10 text-slate-400 hover:border-white/20"),"data-testid":"order-type-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:18,className:"mb-1"}),(0,zt.jsx)("p",{className:"font-mono text-sm font-semibold",children:e.label}),(0,zt.jsx)("p",{className:"text-xs opacity-60",children:e.desc})]},e.id))}),(0,zt.jsx)(vx,{accent:"indigo",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)(Tx,{onClick:()=>i("BUY"),variant:"BUY"===s?"teal":"ghost",className:"flex-1",children:[(0,zt.jsx)(jm,{size:16}),"BUY"]}),(0,zt.jsxs)(Tx,{onClick:()=>i("SELL"),variant:"SELL"===s?"rose":"ghost",className:"flex-1",children:[(0,zt.jsx)(Mx,{size:16}),"SELL"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex gap-2 flex-wrap",children:["BTC","ETH","AAPL","NVDA","SPY"].map(e=>(0,zt.jsx)("button",{onClick:()=>c(e),className:"px-3 py-2 rounded-lg text-xs font-mono transition-all ".concat(l===e?"bg-indigo-500/20 text-indigo-400 border border-indigo-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:e},e))}),j>0&&(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500 mt-1",children:["Current: $",j.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Quantity"}),(0,zt.jsx)("input",{type:"number",value:u,onChange:e=>d(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",step:"BTC"===l?.01:"ETH"===l?.1:1,min:0})]}),"limit"===a&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Limit Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:h,onChange:e=>p(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",min:0}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-600 mt-1",children:["BUY"===s?"Order executes when price drops to":"Order executes when price rises to"," this level"]})]}),"stop-loss"===a&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Stop Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:f,onChange:e=>m(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",min:0}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-rose-400/60 mt-1",children:["\u26a0\ufe0f Position will be sold if price drops to $",f.toLocaleString()]})]}),"take-profit"===a&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Take Profit Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:g,onChange:e=>x(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",min:0}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-emerald-400/60 mt-1",children:["\u2713 Position will be sold if price rises to $",g.toLocaleString()]})]}),"trailing-stop"===a&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Trailing Stop (%)"}),(0,zt.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,zt.jsx)("input",{type:"range",value:v,onChange:e=>y(Number(e.target.value)),className:"flex-1",min:1,max:20,step:.5}),(0,zt.jsxs)("span",{className:"font-mono text-white w-16 text-right",children:[v,"%"]})]}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-amber-400/60 mt-1",children:["Stop price will trail ",v,"% below highest price"]})]}),(0,zt.jsx)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Order Value:"}),(0,zt.jsxs)("span",{className:"font-mono font-semibold text-white",children:["$",C().toLocaleString(void 0,{maximumFractionDigits:2})]})]})}),(0,zt.jsxs)(Tx,{onClick:()=>w(!0),variant:"BUY"===s?"teal":"rose",className:"w-full","data-testid":"place-order-btn",children:[(0,zt.jsx)(Em,{size:16}),"Place ",a.replace("-"," ").toUpperCase()," Order"]})]})}),k.length>0&&(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white mb-3",children:"Pending Orders"}),(0,zt.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(Ox,{variant:"BUY"===e.side?"success":"danger",children:e.side}),(0,zt.jsx)("span",{className:"font-mono font-semibold text-white",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["x",e.quantity]})]}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500 mt-1",children:[e.type,": ",e.limitPrice&&"@ $".concat(e.limitPrice.toLocaleString()),e.stopPrice&&"Stop @ $".concat(e.stopPrice.toLocaleString()),e.takeProfitPrice&&"TP @ $".concat(e.takeProfitPrice.toLocaleString()),e.trailingPercent&&"Trailing ".concat(e.trailingPercent,"%")]})]}),(0,zt.jsx)("button",{onClick:()=>(e=>{N(t=>t.filter(t=>t.id!==e))})(e.id),className:"p-2 text-slate-500 hover:text-rose-400 transition-colors",children:(0,zt.jsx)(Qm,{size:16})})]},e.id))})]}),(0,zt.jsx)(an,{children:b&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>w(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{accent:"BUY"===s?"teal":"rose",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4",children:["Confirm ",a.replace("-"," ")," Order"]}),(0,zt.jsxs)("div",{className:"space-y-2 mb-4 font-mono text-sm",children:[(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Side:"}),(0,zt.jsx)("span",{className:"BUY"===s?"text-emerald-400":"text-rose-400",children:s})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Symbol:"}),(0,zt.jsx)("span",{className:"text-white",children:l})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Quantity:"}),(0,zt.jsx)("span",{className:"text-white",children:u})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Type:"}),(0,zt.jsx)("span",{className:"text-white",children:a})]}),(0,zt.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Est. Value:"}),(0,zt.jsxs)("span",{className:"text-white",children:["$",C().toLocaleString()]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsx)(Tx,{onClick:()=>w(!1),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(Tx,{onClick:()=>{const e={id:Date.now(),type:a,side:s,symbol:l,quantity:u,limitPrice:"limit"===a?h:null,stopPrice:["stop-loss","trailing-stop"].includes(a)?f:null,takeProfitPrice:"take-profit"===a?g:null,trailingPercent:"trailing-stop"===a?v:null,status:"pending",createdAt:(new Date).toISOString(),currentPrice:j};N(t=>[...t,e]),w(!1),n&&n(e)},variant:"BUY"===s?"teal":"rose",className:"flex-1",children:[(0,zt.jsx)(Um,{size:16}),"Confirm"]})]})]})})})})]})},Nwe=Nm("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),jwe=Nm("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),Swe=Nm("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Cwe=Nm("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ewe=[{id:1,title:"Bitcoin Surges Past $90,000 Amid Institutional Buying",source:"CryptoNews",time:"2 min ago",sentiment:"bullish",category:"crypto",impact:"high",symbols:["BTC"]},{id:2,title:"Federal Reserve Signals Potential Rate Cut in Q1 2025",source:"MarketWatch",time:"15 min ago",sentiment:"bullish",category:"macro",impact:"high",symbols:["SPY","BTC","ETH"]},{id:3,title:"Ethereum 2.0 Staking Reaches New All-Time High",source:"DeFi Pulse",time:"32 min ago",sentiment:"bullish",category:"crypto",impact:"medium",symbols:["ETH"]},{id:4,title:"Apple Reports Record Q4 Revenue, Stock Up 3%",source:"CNBC",time:"1 hour ago",sentiment:"bullish",category:"stocks",impact:"medium",symbols:["AAPL"]},{id:5,title:"SEC Delays Decision on Spot ETF Applications",source:"Reuters",time:"2 hours ago",sentiment:"bearish",category:"regulatory",impact:"medium",symbols:["BTC","ETH"]},{id:6,title:"NVIDIA Unveils Next-Gen AI Chips, Shares Rally",source:"TechCrunch",time:"3 hours ago",sentiment:"bullish",category:"stocks",impact:"high",symbols:["NVDA"]},{id:7,title:"DeFi Protocol Reports Security Vulnerability",source:"The Block",time:"4 hours ago",sentiment:"bearish",category:"crypto",impact:"low",symbols:["ETH"]},{id:8,title:"Global Markets Rally on Positive Economic Data",source:"Bloomberg",time:"5 hours ago",sentiment:"bullish",category:"macro",impact:"medium",symbols:["SPY"]}],Twe=e=>{let{filterSymbol:t=null}=e;const[n,a]=(0,o.useState)(Ewe),[r,s]=(0,o.useState)("all"),[i,l]=(0,o.useState)(!1),c=n.filter(e=>!(t&&!e.symbols.includes(t))&&("all"===r||("bullish"===r?"bullish"===e.sentiment:"bearish"===r?"bearish"===e.sentiment:"high-impact"!==r||"high"===e.impact)));return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"news-feed-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(jwe,{className:"text-amber-400",size:20}),"Live News Feed"]}),(0,zt.jsxs)(Tx,{onClick:()=>{l(!0),setTimeout(()=>{const e=[...Ewe].sort(()=>Math.random()-.5).map((e,t)=>m(m({},e),{},{id:Date.now()+t,time:0===t?"Just now":"".concat(5*(t+1)," min ago")}));a(e),l(!1)},1e3)},variant:"ghost",size:"sm",disabled:i,"data-testid":"refresh-news-btn",children:[(0,zt.jsx)(Swe,{size:14,className:i?"animate-spin":""}),"Refresh"]})]}),(0,zt.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:["all","bullish","bearish","high-impact"].map(e=>(0,zt.jsx)("button",{onClick:()=>s(e),className:"px-3 py-1.5 rounded-lg text-xs font-mono whitespace-nowrap transition-all ".concat(r===e?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-white/5 text-slate-500 border border-white/10 hover:text-white"),children:"all"===e?"All News":"bullish"===e?"\ud83d\udcc8 Bullish":"bearish"===e?"\ud83d\udcc9 Bearish":"\ud83d\udd25 High Impact"},e))}),(0,zt.jsxs)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:[(0,zt.jsx)(an,{children:c.map((e,t)=>{return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},children:(0,zt.jsx)(vx,{accent:"bullish"===e.sentiment?"teal":"bearish"===e.sentiment?"rose":"white",className:"hover:border-white/20 transition-all cursor-pointer group",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("h4",{className:"font-medium text-white group-hover:text-teal-400 transition-colors flex items-start gap-2",children:[(a=e.sentiment,"bullish"===a?(0,zt.jsx)(jm,{size:12,className:"text-emerald-400"}):"bearish"===a?(0,zt.jsx)(Mx,{size:12,className:"text-rose-400"}):null),(0,zt.jsx)("span",{className:"flex-1",children:e.title}),(0,zt.jsx)(Cwe,{size:14,className:"text-slate-600 group-hover:text-teal-400 flex-shrink-0 mt-1"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(Im,{size:10}),e.source]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(wwe,{size:10}),e.time]})]}),(n=e.impact,"high"===n?(0,zt.jsxs)(Ox,{variant:"danger",children:[(0,zt.jsx)(Nwe,{size:10}),"High"]}):"medium"===n?(0,zt.jsx)(Ox,{variant:"warning",children:"Medium"}):(0,zt.jsx)(Ox,{variant:"default",children:"Low"}))]}),(0,zt.jsx)("div",{className:"flex gap-1",children:e.symbols.map(e=>(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-mono bg-white/5 text-slate-400",children:e},e))})]})})},e.id);var n,a})}),0===c.length&&(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,zt.jsx)(jwe,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,zt.jsx)("p",{className:"text-sm font-mono",children:"No news matching filters"})]})]}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white mb-3 text-sm",children:"Market Sentiment"}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 w-32",children:(0,zt.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 h-2 rounded-full transition-all",style:{width:"".concat(n.filter(e=>"bullish"===e.sentiment).length/n.length*100,"%")}})})}),(0,zt.jsxs)("div",{className:"flex gap-4 text-xs font-mono",children:[(0,zt.jsxs)("span",{className:"text-emerald-400",children:[Math.round(n.filter(e=>"bullish"===e.sentiment).length/n.length*100),"% Bullish"]}),(0,zt.jsxs)("span",{className:"text-rose-400",children:[Math.round(n.filter(e=>"bearish"===e.sentiment).length/n.length*100),"% Bearish"]})]})]})]})]})},Iwe=e=>{let{currentPrices:t={},onTrade:n}=e;const[a,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)([{id:"momentum",name:"Momentum Strategy",description:"Buy when RSI < 30, Sell when RSI > 70",enabled:!1,symbols:["BTC","ETH"],riskLevel:"medium",maxPositionSize:.5,trades:0,pnl:0},{id:"mean-reversion",name:"Mean Reversion",description:"Trade price deviations from moving average",enabled:!1,symbols:["AAPL","NVDA"],riskLevel:"low",maxPositionSize:1e3,trades:0,pnl:0},{id:"breakout",name:"Breakout Trader",description:"Enter on price breakouts from range",enabled:!1,symbols:["BTC","ETH","SOL"],riskLevel:"high",maxPositionSize:.25,trades:0,pnl:0},{id:"dca",name:"Dollar Cost Average",description:"Regular interval buying regardless of price",enabled:!1,symbols:["BTC"],riskLevel:"low",maxPositionSize:.01,interval:"1h",trades:0,pnl:0}]),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)({maxDailyTrades:10,maxDailyLoss:500,paperMode:!0,notifications:!0}),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)({trades:0,pnl:0,wins:0,losses:0});(0,o.useEffect)(()=>{if(!a)return;const e=setInterval(()=>{const e=s.filter(e=>e.enabled);if(0!==e.length&&!(f.trades>=u.maxDailyTrades))if(f.pnl<=-u.maxDailyLoss)r(!1);else if(Math.random()>.7){const a=e[Math.floor(Math.random()*e.length)],r=a.symbols[Math.floor(Math.random()*a.symbols.length)],s=Math.random()>.5?"BUY":"SELL",o=t[r]||1e3,l=a.maxPositionSize,u=(Math.random()-.4)*o*l*.02,d={id:Date.now(),strategy:a.name,symbol:r,side:s,quantity:l,price:o,pnl:Math.round(100*u)/100,timestamp:(new Date).toISOString()};c(e=>[d,...e].slice(0,20)),g(e=>({trades:e.trades+1,pnl:e.pnl+d.pnl,wins:d.pnl>0?e.wins+1:e.wins,losses:d.pnl<0?e.losses+1:e.losses})),i(e=>e.map(e=>e.id===a.id?m(m({},e),{},{trades:e.trades+1,pnl:e.pnl+d.pnl}):e)),n&&n(d)}},5e3);return()=>clearInterval(e)},[a,s,t,f,u,n]);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"auto-trading-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(qm,{className:"text-indigo-400",size:20}),"Auto Trading",u.paperMode&&(0,zt.jsx)(Ox,{variant:"warning",children:"PAPER"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(Tx,{onClick:()=>p(!0),variant:"ghost",size:"sm",children:(0,zt.jsx)(lye,{size:14})}),(0,zt.jsxs)(Tx,{onClick:()=>r(!a),variant:a?"rose":"teal",size:"sm","data-testid":"toggle-auto-trading",children:[a?(0,zt.jsx)(Ym,{size:14}):(0,zt.jsx)(Gm,{size:14}),a?"Stop":"Start"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,zt.jsxs)(vx,{accent:"white",className:"text-center py-3",children:[(0,zt.jsx)(rye,{size:16,className:"text-indigo-400 mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-white",children:f.trades}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Trades"})]}),(0,zt.jsxs)(vx,{accent:f.pnl>=0?"teal":"rose",className:"text-center py-3",children:[(0,zt.jsx)(Wm,{size:16,className:f.pnl>=0?"text-emerald-400":"text-rose-400"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold ".concat(f.pnl>=0?"text-emerald-400":"text-rose-400"),children:[f.pnl>=0?"+":"","$",f.pnl.toFixed(2)]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"P&L"})]}),(0,zt.jsxs)(vx,{accent:"white",className:"text-center py-3",children:[(0,zt.jsx)(jm,{size:16,className:"text-emerald-400 mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-emerald-400",children:f.wins}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Wins"})]}),(0,zt.jsxs)(vx,{accent:"white",className:"text-center py-3",children:[(0,zt.jsx)(Mx,{size:16,className:"text-rose-400 mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-rose-400",children:f.losses}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Losses"})]})]}),(0,zt.jsxs)(vx,{accent:"indigo",children:[(0,zt.jsxs)("h4",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Am,{size:16,className:"text-indigo-400"}),"Trading Strategies"]}),(0,zt.jsx)("div",{className:"space-y-3",children:s.map(e=>{return(0,zt.jsxs)("div",{className:"p-3 rounded-lg transition-all ".concat(e.enabled?"bg-indigo-500/10 border border-indigo-500/30":"bg-white/5 border border-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>(e=>{i(t=>t.map(t=>t.id===e?m(m({},t),{},{enabled:!t.enabled}):t))})(e.id),className:"w-8 h-8 rounded-lg flex items-center justify-center transition-colors ".concat(e.enabled?"bg-indigo-500/30 text-indigo-400":"bg-white/5 text-slate-600"),"data-testid":"toggle-strategy-".concat(e.id),children:e.enabled?(0,zt.jsx)(Um,{size:14}):(0,zt.jsx)(Qm,{size:14})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-mono font-semibold text-white text-sm",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono text-sm ".concat(e.pnl>=0?"text-emerald-400":"text-rose-400"),children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.trades," trades"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsx)("div",{className:"flex gap-1",children:e.symbols.map(e=>(0,zt.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-white/5 text-slate-400",children:e},e))}),(0,zt.jsxs)("span",{className:"flex items-center gap-1 ".concat((t=e.riskLevel,"low"===t?"text-emerald-400":"medium"===t?"text-amber-400":"text-rose-400")),children:[(0,zt.jsx)(Dm,{size:10}),e.riskLevel," risk"]})]})]},e.id);var t})})]}),l.length>0&&(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white mb-3",children:"Recent Auto Trades"}),(0,zt.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:l.slice(0,5).map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 text-sm",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(Ox,{variant:"BUY"===e.side?"success":"danger",children:e.side}),(0,zt.jsx)("span",{className:"font-mono text-white",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["x",e.quantity]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono ".concat(e.pnl>=0?"text-emerald-400":"text-rose-400"),children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),(0,zt.jsx)("p",{className:"text-xs text-slate-600",children:e.strategy})]})]},e.id))})]}),(0,zt.jsx)(an,{children:h&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>p(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{accent:"indigo",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(lye,{className:"text-indigo-400"}),"Auto Trading Settings"]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Max Daily Trades"}),(0,zt.jsx)("input",{type:"number",value:u.maxDailyTrades,onChange:e=>d(t=>m(m({},t),{},{maxDailyTrades:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono",min:1,max:100})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Max Daily Loss ($)"}),(0,zt.jsx)("input",{type:"number",value:u.maxDailyLoss,onChange:e=>d(t=>m(m({},t),{},{maxDailyLoss:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono",min:0})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("span",{className:"text-sm text-white",children:"Paper Trading Mode"}),(0,zt.jsx)("button",{onClick:()=>d(e=>m(m({},e),{},{paperMode:!e.paperMode})),className:"w-12 h-6 rounded-full transition-colors ".concat(u.paperMode?"bg-amber-500":"bg-slate-600"),children:(0,zt.jsx)("div",{className:"w-5 h-5 rounded-full bg-white transition-transform ".concat(u.paperMode?"translate-x-6":"translate-x-0.5")})})]}),(0,zt.jsxs)(Tx,{onClick:()=>p(!1),variant:"indigo",className:"w-full",children:[(0,zt.jsx)(Um,{size:16}),"Save Settings"]})]})]})})})}),!u.paperMode&&(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/30 flex items-start gap-2",children:[(0,zt.jsx)(y1,{size:16,className:"text-rose-400 flex-shrink-0 mt-0.5"}),(0,zt.jsxs)("p",{className:"text-xs text-rose-400",children:[(0,zt.jsx)("strong",{children:"Live Trading Active"})," - Real funds will be used. Enable Paper Mode for risk-free testing."]})]})]})},Awe=Nm("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),_we=Nm("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Owe=Nm("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Rwe=Nm("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Pwe=e=>{let{currentPrices:t={}}=e;const[n,a]=(0,o.useState)({address:"0x742d35Cc6634C0532925a3b844Bc9e7595f2bD08",totalBalance:0,holdings:[{symbol:"BTC",balance:2.5,network:"Bitcoin"},{symbol:"ETH",balance:15.75,network:"Ethereum"},{symbol:"SOL",balance:100,network:"Solana"},{symbol:"USDT",balance:25e3,network:"Ethereum",isStable:!0}],transactions:[{id:1,type:"receive",symbol:"ETH",amount:2.5,from:"0x1234...5678",timestamp:"2 hours ago"},{id:2,type:"send",symbol:"BTC",amount:.5,to:"0x8765...4321",timestamp:"1 day ago"},{id:3,type:"receive",symbol:"USDT",amount:5e3,from:"0xabcd...efgh",timestamp:"3 days ago"}]}),[r,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)({symbol:"ETH",amount:0,address:""});(0,o.useEffect)(()=>{const e=n.holdings.reduce((e,n)=>{const a=n.isStable?1:t[n.symbol]||0;return e+n.balance*a},0);a(t=>m(m({},t),{},{totalBalance:e}))},[t,n.holdings]);const p=()=>{navigator.clipboard.writeText(n.address),u(!0),setTimeout(()=>u(!1),2e3)};return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"user-wallet-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Sm,{className:"text-teal-400",size:20}),"My Wallet"]}),(0,zt.jsx)(Ox,{variant:"active",pulse:!0,children:"Connected"})]}),(0,zt.jsxs)(vx,{accent:"teal",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500 mb-1",children:"Total Balance"}),(0,zt.jsxs)("p",{className:"text-4xl font-mono font-bold text-white",children:["$",n.totalBalance.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-3 p-2 rounded-lg bg-white/5 cursor-pointer hover:bg-white/10 transition-colors",onClick:p,children:[(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-400 truncate max-w-[200px]",children:n.address}),c?(0,zt.jsx)(Um,{size:14,className:"text-emerald-400"}):(0,zt.jsx)(kye,{size:14,className:"text-slate-500"})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,zt.jsxs)(Tx,{onClick:()=>s(!0),variant:"white",className:"flex-1","data-testid":"send-btn",children:[(0,zt.jsx)(owe,{size:16}),"Send"]}),(0,zt.jsxs)(Tx,{onClick:()=>l(!0),variant:"teal",className:"flex-1","data-testid":"receive-btn",children:[(0,zt.jsx)(Awe,{size:16}),"Receive"]})]})]}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsxs)("h4",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(xwe,{size:16,className:"text-indigo-400"}),"Holdings"]}),(0,zt.jsx)("div",{className:"space-y-2",children:n.holdings.map(e=>{const n=e.isStable?1:t[e.symbol]||0,a=e.balance*n;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500/20 to-indigo-500/20 flex items-center justify-center font-mono font-bold text-teal-400",children:e.symbol.slice(0,2)}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-mono font-semibold text-white",children:e.symbol}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.network})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"font-mono font-semibold text-white",children:e.balance}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["$",a.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]},e.symbol)})})]}),(0,zt.jsxs)(vx,{accent:"white",children:[(0,zt.jsxs)("h4",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(_we,{size:16,className:"text-amber-400"}),"Recent Transactions"]}),(0,zt.jsx)("div",{className:"space-y-2",children:n.transactions.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat("receive"===e.type?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"),children:"receive"===e.type?(0,zt.jsx)(Awe,{size:16}):(0,zt.jsx)(owe,{size:16})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"text-sm text-white",children:["receive"===e.type?"Received":"Sent"," ",e.symbol]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"receive"===e.type?"From: ".concat(e.from):"To: ".concat(e.to)})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono ".concat("receive"===e.type?"text-emerald-400":"text-rose-400"),children:["receive"===e.type?"+":"-",e.amount," ",e.symbol]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.timestamp})]})]},e.id))})]}),r&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>s(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{accent:"rose",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(owe,{className:"text-rose-400"}),"Send Crypto"]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Asset"}),(0,zt.jsx)("div",{className:"flex gap-2 flex-wrap",children:n.holdings.map(e=>(0,zt.jsx)("button",{onClick:()=>h(t=>m(m({},t),{},{symbol:e.symbol})),className:"px-3 py-2 rounded-lg text-xs font-mono ".concat(d.symbol===e.symbol?"bg-rose-500/20 text-rose-400 border border-rose-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:e.symbol},e.symbol))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Amount"}),(0,zt.jsx)("input",{type:"number",value:d.amount,onChange:e=>h(t=>m(m({},t),{},{amount:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono",placeholder:"0.00",min:0})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Recipient Address"}),(0,zt.jsx)("input",{type:"text",value:d.address,onChange:e=>h(t=>m(m({},t),{},{address:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono text-sm",placeholder:"0x..."})]}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsx)(Tx,{onClick:()=>s(!1),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(Tx,{onClick:()=>{a(e=>m(m({},e),{},{holdings:e.holdings.map(e=>e.symbol===d.symbol?m(m({},e),{},{balance:e.balance-d.amount}):e),transactions:[{id:Date.now(),type:"send",symbol:d.symbol,amount:d.amount,to:d.address.slice(0,6)+"..."+d.address.slice(-4),timestamp:"Just now"},...e.transactions]})),s(!1),h({symbol:"ETH",amount:0,address:""})},variant:"rose",className:"flex-1","data-testid":"confirm-send-btn",children:[(0,zt.jsx)(Owe,{size:16}),"Send"]})]})]})]})})}),i&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>l(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(vx,{accent:"teal",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Awe,{className:"text-teal-400"}),"Receive Crypto"]}),(0,zt.jsxs)("div",{className:"text-center space-y-4",children:[(0,zt.jsx)("div",{className:"w-48 h-48 mx-auto bg-white rounded-xl p-3",children:(0,zt.jsx)("div",{className:"w-full h-full bg-black/90 rounded-lg flex items-center justify-center",children:(0,zt.jsx)(Rwe,{size:80,className:"text-white"})})}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 cursor-pointer hover:bg-white/10 transition-colors",onClick:p,children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Your Address"}),(0,zt.jsx)("p",{className:"text-sm font-mono text-white break-all",children:n.address})]}),(0,zt.jsxs)(Tx,{onClick:p,variant:"teal",className:"w-full",children:[c?(0,zt.jsx)(Um,{size:16}):(0,zt.jsx)(kye,{size:16}),c?"Copied!":"Copy Address"]})]})]})})})]})},Mwe=Nm("radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]),Dwe=Nm("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Fwe=Nm("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Lwe=Nm("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),zwe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),Bwe=()=>{const{t:e}=sf(),[t,n]=(0,o.useState)([]),[a,r]=(0,o.useState)("all"),[s,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!1),u=(0,o.useRef)(null),d=(0,o.useRef)(null);(0,o.useEffect)(()=>{d.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleWCKmJuXh3FXRkJKTmp+jZqek4d3aF5XTklKUVximqe2ta6fj4V9d3NwbmppamtsbnR8g46XoKetr7Cwra2sqKeimpeWlJSTk5WXmaGnrbK3u77Awb+9u7m4t7a2tbW0tbW2t7m7vcDDxsjKy8rJyMbEwb67ubm5urq7vL2+wMLDxcbHyMnJycnJyMjHxsTCwL68uri3tre3t7i5ury+wcPFx8nKy8zMzMvLycjGxMLAvry6ubm4uLi4uLm6u73AwsPGx8rLzM3Nzc3MzMrJx8XDwb+9u7q5ubm5ubi5uru9v8LFx8nLzc7Oz8/OzcvJx8XDwb+9u7q5uLi4uLi5uru9wMPGycvNz9DR0dDPzsrIxsTCwL68uri4uLi4uLm6u73Aw8bJy83Pz9DQ0M/OzMrIxcPBv727ubm5ubm5uru9wMPGysvOz9HQ0dDQz87MysfFw8C+u7m4uLi4uLq7vb/Cxcj")},[]),(0,o.useEffect)(()=>{const e=()=>{const t="https://tradehub-380.preview.emergentagent.com".replace("https://","wss://").replace("http://","ws://");u.current=new WebSocket("".concat(t,"/ws/crawler")),u.current.onopen=()=>{c(!0),console.log("Crawler WebSocket connected")},u.current.onmessage=e=>{const t=JSON.parse(e.data);var a;"crawler_signal"===t.type&&(n(e=>[t.data,...e].slice(0,50)),!s||"critical"!==t.data.urgency&&"high"!==t.data.urgency||null===(a=d.current)||void 0===a||a.play().catch(()=>{}))},u.current.onclose=()=>{c(!1),setTimeout(e,5e3)},u.current.onerror=()=>{c(!1)}};return e(),()=>{u.current&&u.current.close()}},[s]),(0,o.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(zwe,"/crawler/signals?limit=30"));if(e.ok){const t=await e.json();n(t)}}catch(e){console.error("Error fetching signals:",e)}})()},[]);const h=t.filter(e=>"all"===a||e.signal_type===a),p=e=>{switch(e){case"whale":return"\ud83d\udc0b";case"news":return"\ud83d\udcf0";case"social":return"\ud83d\udcf1";case"orderbook":return"\ud83d\udcca";default:return"\ud83d\udce1"}},f=e=>{switch(e){case"critical":return"text-red-400 bg-red-500/20 border-red-500/30";case"high":return"text-orange-400 bg-orange-500/20 border-orange-500/30";case"medium":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";default:return"text-slate-400 bg-slate-500/20 border-slate-500/30"}},m=e=>{const t=new Date(e),n=new Date,a=Math.floor((n-t)/1e3);return a<60?"".concat(a,"s ago"):a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):t.toLocaleDateString()};return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"trade-crawler-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Mwe,{className:"text-teal-400",size:20}),e("crawler.title")]}),(0,zt.jsx)(Ox,{variant:l?"active":"danger",pulse:l,children:e(l?"status.live":"status.offline")})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>i(!s),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors","data-testid":"crawler-sound-toggle",children:s?(0,zt.jsx)(mwe,{size:16}):(0,zt.jsx)(gwe,{size:16})}),(0,zt.jsx)(Tx,{onClick:()=>window.location.reload(),variant:"white",size:"sm",children:(0,zt.jsx)(Swe,{size:14})})]})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[{id:"all",label:"All",icon:Dwe},{id:"whale",label:e("crawler.whales"),icon:null,emoji:"\ud83d\udc0b"},{id:"news",label:e("crawler.news"),icon:null,emoji:"\ud83d\udcf0"},{id:"social",label:e("crawler.social"),icon:Fwe},{id:"orderbook",label:e("crawler.orderbook"),icon:Lwe}].map(e=>(0,zt.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-mono whitespace-nowrap transition-all ".concat(a===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"),"data-testid":"filter-".concat(e.id),children:[e.emoji?(0,zt.jsx)("span",{children:e.emoji}):e.icon&&(0,zt.jsx)(e.icon,{size:12}),e.label]},e.id))}),(0,zt.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto pr-1",children:(0,zt.jsx)(an,{mode:"popLayout",children:0===h.length?(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,zt.jsx)(Mwe,{className:"mx-auto mb-2 opacity-50",size:32}),(0,zt.jsx)("p",{className:"text-sm",children:e("crawler.noSignals")})]}):h.map((e,t)=>{var n,a,r,s,i,o;return(0,zt.jsx)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"p-3 rounded-xl bg-black/40 backdrop-blur-sm border border-white/10 hover:border-teal-500/30 transition-all",children:(0,zt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zt.jsx)("div",{className:"text-2xl",children:p(e.signal_type)}),(0,zt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-mono uppercase border ".concat(f(e.urgency)),children:e.urgency}),(0,zt.jsx)("span",{className:"text-xs font-mono text-teal-400",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[(0,zt.jsx)(wwe,{size:10}),m(e.timestamp)]})]}),(0,zt.jsx)("p",{className:"text-sm text-white/90 break-words",children:e.message}),e.action_suggested&&(0,zt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,zt.jsx)(Wm,{size:12,className:"text-yellow-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-yellow-400",children:e.action_suggested})]})]}),(0,zt.jsx)("div",{className:"flex-shrink-0",children:"bullish"===(null===(n=e.data)||void 0===n?void 0:n.sentiment)||null!==(a=e.action_suggested)&&void 0!==a&&a.includes("LONG")||null!==(r=e.action_suggested)&&void 0!==r&&r.includes("ACCUMULATION")?(0,zt.jsx)(jm,{className:"text-emerald-400",size:18}):"bearish"===(null===(s=e.data)||void 0===s?void 0:s.sentiment)||null!==(i=e.action_suggested)&&void 0!==i&&i.includes("SHORT")||null!==(o=e.action_suggested)&&void 0!==o&&o.includes("SELL")?(0,zt.jsx)(Mx,{className:"text-red-400",size:18}):(0,zt.jsx)(y1,{className:"text-yellow-400",size:18})})]})},e.id||t)})})})]})},Uwe=e=>{let{variant:t="default"}=e;const{i18n:n}=sf(),[a,r]=(0,o.useState)(!1),s=Tf.find(e=>e.code===n.language)||Tf[0];return(0,zt.jsxs)("div",{className:"relative","data-testid":"language-selector",children:[(0,zt.jsxs)("button",{onClick:()=>r(!a),className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-all ".concat("compact"===t?"bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white":"bg-white/5 hover:bg-white/10 border border-white/10 text-slate-300"),children:[(0,zt.jsx)(Im,{size:14}),(0,zt.jsx)("span",{className:"text-sm font-mono",children:s.flag}),"compact"!==t&&(0,zt.jsx)("span",{className:"text-xs font-mono hidden sm:inline",children:s.code.toUpperCase()}),(0,zt.jsx)(nye,{size:12,className:"transition-transform ".concat(a?"rotate-180":"")})]}),(0,zt.jsx)(an,{children:a&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 z-50 min-w-[160px] py-2 rounded-xl bg-black/90 backdrop-blur-xl border border-white/10 shadow-2xl",children:Tf.map(e=>(0,zt.jsxs)("button",{onClick:()=>{return t=e.code,n.changeLanguage(t),void r(!1);var t},className:"w-full flex items-center gap-3 px-4 py-2 text-left transition-colors ".concat(n.language===e.code?"bg-teal-500/20 text-teal-400":"text-slate-300 hover:bg-white/5 hover:text-white"),"data-testid":"lang-".concat(e.code),children:[(0,zt.jsx)("span",{className:"text-lg",children:e.flag}),(0,zt.jsx)("span",{className:"text-sm font-mono flex-1",children:e.name}),n.language===e.code&&(0,zt.jsx)(Um,{size:14,className:"text-teal-400"})]},e.code))})]})})]})},Wwe=Nm("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Vwe=Nm("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),Hwe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),Gwe=()=>{const{t:e}=sf(),[t,n]=(0,o.useState)(null),[a,r]=(0,o.useState)(null),s=async(e,t)=>{n("".concat(e,"-").concat(t)),r(null);try{const n="csv"===t?"".concat(Hwe,"/export/").concat(e,"/csv"):"".concat(Hwe,"/export/").concat(e,"/pdf"),a=await fetch(n,{credentials:"include"});if(!a.ok)throw new Error("Export failed");const s=await a.blob(),i=window.URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download="".concat(e,"_").concat((new Date).toISOString().split("T")[0],".").concat(t),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(i),document.body.removeChild(o),r({type:"success",message:"".concat(t.toUpperCase()," downloaded!")})}catch(a){r({type:"error",message:a.message})}finally{n(null)}},i=[{id:"trades",title:e("export.downloadHistory"),icon:_we,description:"All executed trades with P&L",formats:["csv","pdf"]},{id:"alerts",title:e("alerts.title"),icon:Wwe,description:"All price alerts history",formats:["csv"]}];return(0,zt.jsx)(vx,{title:e("common.export"),icon:"\ud83d\udce5",accent:"teal","data-testid":"export-panel",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[i.map(n=>(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/30 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-teal-500/20",children:(0,zt.jsx)(n.icon,{className:"text-teal-400",size:18})}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsx)("h4",{className:"text-sm font-semibold text-white",children:n.title}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:n.description})]})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[n.formats.includes("csv")&&(0,zt.jsxs)(Tx,{onClick:()=>s(n.id,"csv"),variant:"white",size:"sm",disabled:null!==t,"data-testid":"export-".concat(n.id,"-csv"),children:[t==="".concat(n.id,"-csv")?(0,zt.jsx)(h1,{size:14,className:"animate-spin"}):(0,zt.jsx)(Vwe,{size:14}),e("export.exportCSV")]}),n.formats.includes("pdf")&&(0,zt.jsxs)(Tx,{onClick:()=>s(n.id,"pdf"),variant:"teal",size:"sm",disabled:null!==t,"data-testid":"export-".concat(n.id,"-pdf"),children:[t==="".concat(n.id,"-pdf")?(0,zt.jsx)(h1,{size:14,className:"animate-spin"}):(0,zt.jsx)(Wwe,{size:14}),e("export.exportPDF")]})]})]},n.id)),a&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 rounded-lg ".concat("success"===a.type?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:["success"===a.type?(0,zt.jsx)(p1,{size:16}):(0,zt.jsx)(f1,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:a.message})]})]})})},qwe=Nm("minimize-2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Kwe=Nm("maximize-2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Xwe=Nm("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ywe={leftEyeOpen:1,rightEyeOpen:1,mouthOpen:0,smileAmount:0,eyebrowRaise:0,headTiltX:0,headTiltY:0,lookX:0,lookY:0,emotion:"neutral",confidence:0},$we=e=>{let{onFaceData:t,className:a=""}=e;const r=(0,o.useRef)(null),s=(0,o.useRef)(null),i=(0,o.useRef)(null),l=(0,o.useRef)(null),c=(0,o.useRef)(null),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(Ywe),k=(0,o.useCallback)(async()=>{p(!0),m(null);try{const{FaceMesh:e}=await n.e(87).then(n.t.bind(n,7087,23)),{Camera:t}=await n.e(943).then(n.t.bind(n,1943,23)),a=new e({locateFile:e=>"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/".concat(e)});a.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),a.onResults(N),l.current=a;const s=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});if(r.current){r.current.srcObject=s;const e=new t(r.current,{onFrame:async()=>{l.current&&r.current&&await l.current.send({image:r.current})},width:640,height:480});await e.start(),c.current=e,d(!0)}}catch(CEe){console.error("FaceMesh init error:",CEe),m(CEe.message||"Failed to initialize face tracking")}finally{p(!1)}},[]),N=(0,o.useCallback)(e=>{if(!e.multiFaceLandmarks||0===e.multiFaceLandmarks.length)return void y(!1);y(!0);const n=e.multiFaceLandmarks[0],a=n[159],r=n[145],i=n[386],o=n[374],l=100*Math.abs(a.y-r.y),c=100*Math.abs(i.y-o.y),u=n[13],d=n[14],h=100*Math.abs(u.y-d.y),p=n[61],f=n[291],m=100*Math.abs(f.x-p.x),x=Math.max(0,(m-15)/10),v=n[107],b=n[336],k=n[159],N=n[386],j=(v.y-k.y+(b.y-N.y))/2*-50,S=n[4],C=n[168],E=30*(S.x-.5),T=50*(S.y-C.y-.05),I=n[468],A=(n[473],I?50*(I.x-n[33].x):0),_=I?50*(I.y-n[159].y):0;let O="neutral",R=.7;x>2&&l>3&&c>3?(O="happy",R=Math.min(.95,.7+.05*x)):h>5&&j>2?(O="excited",R=.8):j<-1&&x<1?(O="concerned",R=.75):(l<2||c<2)&&(O="focused",R=.7);const P={leftEyeOpen:Math.min(1,l/5),rightEyeOpen:Math.min(1,c/5),mouthOpen:Math.min(1,h/10),smileAmount:Math.min(1,x/5),eyebrowRaise:Math.max(-1,Math.min(1,j/5)),headTiltX:E,headTiltY:T,lookX:A,lookY:_,emotion:O,confidence:R};if(w(P),t&&t(P),s.current&&g){const e=s.current.getContext("2d");e.clearRect(0,0,s.current.width,s.current.height),e.strokeStyle="rgba(20, 184, 166, 0.5)",e.lineWidth=.5;[159,145,386,374,61,291,13,14,107,336,4,168].forEach(t=>{const a=n[t];e.beginPath(),e.arc(640*a.x,480*a.y,3,0,2*Math.PI),e.fillStyle="rgba(20, 184, 166, 0.8)",e.fill()})}},[t,g]),j=(0,o.useCallback)(()=>{var e;c.current&&(c.current.stop(),c.current=null),l.current&&(l.current.close(),l.current=null),null!==(e=r.current)&&void 0!==e&&e.srcObject&&(r.current.srcObject.getTracks().forEach(e=>e.stop()),r.current.srcObject=null),i.current&&cancelAnimationFrame(i.current),d(!1),y(!1),w(Ywe)},[]),S=(0,o.useCallback)(()=>{u?j():k()},[u,k,j]);return(0,o.useEffect)(()=>()=>{j()},[j]),(0,zt.jsxs)("div",{className:"relative ".concat(a),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)(Tx,{onClick:S,variant:u?"danger":"cyan",size:"sm",disabled:h,children:[h?(0,zt.jsx)(Swe,{size:16,className:"animate-spin"}):u?(0,zt.jsx)(qx,{size:16}):(0,zt.jsx)(Kx,{size:16}),u?"Stop":"Start"," Face Tracking"]}),u&&(0,zt.jsxs)(Tx,{onClick:()=>x(!g),variant:"white",size:"sm",children:[g?(0,zt.jsx)(Xwe,{size:16}):(0,zt.jsx)(zm,{size:16}),g?"Hide":"Show"," Camera"]})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2",children:u&&(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-mono ".concat(v?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"),children:[v?(0,zt.jsx)(Um,{size:12}):(0,zt.jsx)(Xx,{size:12}),v?"Face Detected":"No Face"]})})]}),(0,zt.jsx)(an,{children:f&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-3 p-3 rounded-lg bg-red-500/20 border border-red-500/30 text-red-400 text-sm",children:[(0,zt.jsx)(Xx,{size:14,className:"inline mr-2"}),f]})}),(0,zt.jsx)(an,{children:g&&u&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"relative overflow-hidden rounded-xl border border-white/10 mb-4",children:[(0,zt.jsx)("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto transform scale-x-[-1]",style:{maxHeight:"200px",objectFit:"cover"}}),(0,zt.jsx)("canvas",{ref:s,width:640,height:480,className:"absolute inset-0 w-full h-full transform scale-x-[-1] pointer-events-none"}),(0,zt.jsx)("div",{className:"absolute bottom-2 left-2 right-2 flex gap-2 flex-wrap",children:v&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-teal-400 font-mono",children:["\ud83d\ude0a ",(100*b.smileAmount).toFixed(0),"%"]}),(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-blue-400 font-mono",children:["\ud83d\udc41\ufe0f ",(100*b.leftEyeOpen).toFixed(0),"%"]}),(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-purple-400 font-mono",children:["\ud83d\udc44 ",(100*b.mouthOpen).toFixed(0),"%"]}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-amber-400 font-mono",children:b.emotion})]})})]})}),!g&&u&&(0,zt.jsx)("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"hidden"}),u&&v&&(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-4 gap-2 text-center",children:[(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Eyes"}),(0,zt.jsxs)("div",{className:"text-sm font-mono text-teal-400",children:[((b.leftEyeOpen+b.rightEyeOpen)/2*100).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Smile"}),(0,zt.jsxs)("div",{className:"text-sm font-mono text-green-400",children:[(100*b.smileAmount).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Brows"}),(0,zt.jsxs)("div",{className:"text-sm font-mono text-amber-400",children:[b.eyebrowRaise>0?"+":"",(100*b.eyebrowRaise).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Emotion"}),(0,zt.jsx)("div",{className:"text-sm font-mono text-purple-400 capitalize",children:b.emotion})]})]})]})},Qwe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),Jwe=e=>{let{emotion:t,speaking:n,confidence:a,webcamFace:r=null}=e;const[s,i]=(0,o.useState)(0);(0,o.useEffect)(()=>{const e=setInterval(()=>{i(e=>e+1)},50);return()=>clearInterval(e)},[]);const l={excited:"#22c55e",happy:"#10b981",concerned:"#f59e0b",neutral:"#14b8a6",focused:"#3b82f6"},c=l[(null===r||void 0===r?void 0:r.emotion)||t]||l.neutral,u=.05*s,d=Math.sin(2.5*u),h=r?r.leftEyeOpen<.3||r.rightEyeOpen<.3:d>.97,p=.02*Math.sin(.8*u),f=r?r.headTiltX:2*Math.sin(.3*u),m=r?Math.max(1,6*r.leftEyeOpen):h?1:"excited"===t?6:"concerned"===t?3:5,g=r?8*r.mouthOpen:n?4+3*Math.sin(12*u):0,x=r?-12*r.smileAmount:"happy"===t||"excited"===t?-8:"concerned"===t?4:0,v=r?-5*r.eyebrowRaise:"excited"===t?-2:"concerned"===t?3:0,y=r?.5*r.lookX:2*Math.sin(.5*u),b=r?.5*r.lookY:0;(0,o.useMemo)(()=>(()=>{const e=[];for(let t=0;t<=8;t++)for(let n=0;n<=6;n++){const a=20+n/6*60,r=15+t/8*90,s=Math.sqrt(Math.pow(a-50,2)+Math.pow(r-55,2)),i=Math.max(0,1-s/50);i>.1&&e.push({x:a,y:r,opacity:i})}return e})(),[]);return(0,zt.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:[(0,zt.jsx)("div",{className:"absolute inset-0 opacity-30",style:{background:"radial-gradient(ellipse at center, ".concat(c,"40 0%, transparent 60%)")}}),(0,zt.jsx)("div",{className:"absolute top-6 left-6 font-mono font-bold text-5xl",style:{color:c,textShadow:"0 0 20px ".concat(c,"80")},children:a}),(0,zt.jsxs)("svg",{viewBox:"0 0 100 120",className:"w-full h-full max-w-[400px] max-h-[450px]",style:{transform:"rotate(".concat(f,"deg) scale(").concat(1+p,")")},children:[(0,zt.jsxs)("defs",{children:[(0,zt.jsxs)("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,zt.jsx)("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),(0,zt.jsxs)("feMerge",{children:[(0,zt.jsx)("feMergeNode",{in:"coloredBlur"}),(0,zt.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,zt.jsxs)("filter",{id:"pointGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,zt.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,zt.jsxs)("feMerge",{children:[(0,zt.jsx)("feMergeNode",{in:"coloredBlur"}),(0,zt.jsx)("feMergeNode",{in:"coloredBlur"}),(0,zt.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.3",children:[[20,35,50,65,80,95].map((e,t)=>(0,zt.jsx)("path",{d:"M 15 ".concat(e," Q 50 ").concat(e+2*Math.sin(u+t)," 85 ").concat(e),fill:"none",stroke:c,strokeWidth:"0.5"},"h".concat(t))),[25,37.5,50,62.5,75].map((e,t)=>(0,zt.jsx)("path",{d:"M ".concat(e," 15 Q ").concat(e+2*Math.sin(u+t)," 55 ").concat(e," 100"),fill:"none",stroke:c,strokeWidth:"0.5"},"v".concat(t)))]}),(0,zt.jsx)("ellipse",{cx:"50",cy:"55",rx:"32",ry:"42",fill:"none",stroke:c,strokeWidth:"1.5",filter:"url(#glow)",opacity:"0.9"}),(0,zt.jsx)("ellipse",{cx:"50",cy:"55",rx:"28",ry:"38",fill:"none",stroke:c,strokeWidth:"0.8",filter:"url(#glow)",opacity:"0.5"}),(0,zt.jsx)("path",{d:"M 25 30 Q 50 ".concat(25+2*Math.sin(u)," 75 30"),fill:"none",stroke:c,strokeWidth:"0.8",filter:"url(#glow)",opacity:"0.6"}),(0,zt.jsx)("g",{filter:"url(#glow)",children:(0,zt.jsx)("path",{d:"M 28 ".concat(38+v," Q 35 ").concat(33+v," 44 ").concat(36+v),fill:"none",stroke:c,strokeWidth:"2",strokeLinecap:"round"})}),(0,zt.jsx)("g",{filter:"url(#glow)",children:(0,zt.jsx)("path",{d:"M 56 ".concat(36+v," Q 65 ").concat(33+v," 72 ").concat(38+v),fill:"none",stroke:c,strokeWidth:"2",strokeLinecap:"round"})}),(0,zt.jsxs)("g",{filter:"url(#glow)",children:[(0,zt.jsx)("ellipse",{cx:"36",cy:"48",rx:"8",ry:m,fill:"none",stroke:c,strokeWidth:"1.5"}),(0,zt.jsx)("circle",{cx:36+y,cy:48+b,r:"2.5",fill:c}),(0,zt.jsx)("circle",{cx:"34",cy:"46",r:"1",fill:"white",opacity:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",children:[(0,zt.jsx)("ellipse",{cx:"64",cy:"48",rx:"8",ry:m,fill:"none",stroke:c,strokeWidth:"1.5"}),(0,zt.jsx)("circle",{cx:64+y,cy:48+b,r:"2.5",fill:c}),(0,zt.jsx)("circle",{cx:"62",cy:"46",r:"1",fill:"white",opacity:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.8",children:[(0,zt.jsx)("path",{d:"M 50 42 L 50 60",fill:"none",stroke:c,strokeWidth:"1"}),(0,zt.jsx)("path",{d:"M 44 63 Q 47 67 50 65 Q 53 67 56 63",fill:"none",stroke:c,strokeWidth:"1"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",children:[(0,zt.jsx)("path",{d:"M 38 ".concat(78+x," Q 44 ").concat(75+x-g," 50 ").concat(76+x-g," Q 56 ").concat(75+x-g," 62 ").concat(78+x),fill:"none",stroke:c,strokeWidth:"1.5"}),(0,zt.jsx)("path",{d:"M 38 ".concat(78+x," Q 50 ").concat(82+x+g," 62 ").concat(78+x),fill:"none",stroke:c,strokeWidth:"1.5"}),n&&(0,zt.jsx)("ellipse",{cx:"50",cy:78+x,rx:"8",ry:.8*g,fill:"".concat(c,"20"),stroke:c,strokeWidth:"0.5"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.5",children:[(0,zt.jsx)("path",{d:"M 22 55 Q 28 60 30 70",fill:"none",stroke:c,strokeWidth:"0.8"}),(0,zt.jsx)("path",{d:"M 78 55 Q 72 60 70 70",fill:"none",stroke:c,strokeWidth:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.6",children:[(0,zt.jsx)("path",{d:"M 25 70 Q 35 90 50 95",fill:"none",stroke:c,strokeWidth:"0.8"}),(0,zt.jsx)("path",{d:"M 75 70 Q 65 90 50 95",fill:"none",stroke:c,strokeWidth:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#pointGlow)",children:[[[50,13],[30,18],[70,18],[20,35],[80,35],[18,55],[82,55],[20,75],[80,75],[30,90],[70,90],[50,97]].map((e,t)=>{let[n,a]=e;return(0,zt.jsx)("circle",{cx:n,cy:a,r:"2",fill:c},"fc".concat(t))}),[[28,48],[36,43],[44,48],[36,53],[56,48],[64,43],[72,48],[64,53]].map((e,t)=>{let[n,a]=e;return(0,zt.jsx)("circle",{cx:n,cy:a,r:"1.5",fill:c},"ep".concat(t))}),[[50,42],[50,52],[50,60],[44,63],[56,63]].map((e,t)=>{let[n,a]=e;return(0,zt.jsx)("circle",{cx:n,cy:a,r:"1.5",fill:c},"np".concat(t))}),[[38,78+x],[44,76+x],[50,76+x],[56,76+x],[62,78+x],[50,82+x]].map((e,t)=>{let[n,a]=e;return(0,zt.jsx)("circle",{cx:n,cy:a,r:"1.5",fill:c},"mp".concat(t))}),[[28,38+v],[36,34+v],[44,36+v],[56,36+v],[64,34+v],[72,38+v]].map((e,t)=>{let[n,a]=e;return(0,zt.jsx)("circle",{cx:n,cy:a,r:"1.5",fill:c},"eb".concat(t))})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.4",children:[(0,zt.jsx)("line",{x1:"50",y1:"13",x2:"50",y2:"42",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"30",y1:"18",x2:"36",y2:"43",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"70",y1:"18",x2:"64",y2:"43",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"36",y1:"53",x2:"44",y2:"63",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"64",y1:"53",x2:"56",y2:"63",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"50",y1:"65",x2:"50",y2:76+x,stroke:c,strokeWidth:"0.5"})]})]}),(0,zt.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((e,t)=>(0,zt.jsx)("div",{className:"absolute w-1 h-1 rounded-full",style:{backgroundColor:c,boxShadow:"0 0 6px ".concat(c),left:"".concat(30+20*Math.sin(u+.8*t)+5*t,"%"),top:"".concat(40+15*Math.cos(u+.5*t)+3*t,"%"),opacity:.3+.2*Math.sin(2*u+t)}},t))})]})},Zwe=e=>{let{marketData:t={},onInsight:n,onTradeCommand:a}=e;const{t:r}=sf(),[s,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)("neutral"),[g,x]=(0,o.useState)(""),[v,y]=(0,o.useState)(68),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)(null),[j,S]=(0,o.useState)(!1),C=(0,o.useRef)(null),E=(0,o.useCallback)(async e=>{try{const t=await fetch("".concat(Qwe,"/avatar/announce-trade"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();x(e.message),m(e.emotion),e.audio&&!l&&C.current&&(C.current.src="data:audio/mp3;base64,".concat(e.audio),p(!0),C.current.play().catch(console.error),C.current.onended=()=>p(!1))}}catch(t){console.error("Trade announcement error:",t)}},[l]);(0,o.useEffect)(()=>{n&&n({announceTrade:E})},[E,n]),(0,o.useEffect)(()=>{const e=t.btc_change||0;e>3?(m("excited"),y(Math.min(95,Math.round(68+3*Math.abs(e))))):e<-3?(m("concerned"),y(Math.max(40,Math.round(68-3*Math.abs(e))))):e>0?(m("happy"),y(Math.round(68+2*e))):(m("neutral"),y(68))},[t]);const T=(0,o.useCallback)(async()=>{if(!b){w(!0);try{const e=await fetch("".concat(Qwe,"/avatar/insight"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"",emotion:f,market_context:t})});if(!e.ok)throw new Error("Failed to generate insight");const a=await e.json();if(x(a.message),m(a.emotion),a.audio&&!l){const e="data:audio/mp3;base64,".concat(a.audio);C.current&&(C.current.src=e,p(!0),C.current.play().catch(console.error),C.current.onended=()=>p(!1))}n&&n(a)}catch(e){console.error("Insight error:",e),x("Unable to generate insight at this time.")}finally{w(!1)}}},[f,t,l,b,n]),I=(0,o.useCallback)(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void x("Voice recognition not supported in this browser.");if(u)return void d(!1);const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onstart=()=>{d(!0),x('Listening... Say a command like "Buy 1 BTC"')},e.onend=()=>d(!1),e.onresult=async e=>{const n=e.results[0][0].transcript;x('Processing: "'.concat(n,'"'));try{const e=await fetch("".concat(Qwe,"/voice/command"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n,context:t})});if(e.ok){const t=await e.json();x(t.response),t.audio&&!l&&C.current&&(C.current.src="data:audio/mp3;base64,".concat(t.audio),p(!0),C.current.play().catch(console.error),C.current.onended=()=>p(!1)),t.action_data&&a&&a(t.action_data)}}catch(r){console.error("Voice command error:",r),x("Sorry, I had trouble processing that command.")}},e.onerror=e=>{console.error("Speech recognition error:",e.error),d(!1),"no-speech"===e.error?x("I didn't hear anything. Try again!"):x("Voice recognition error. Please try again.")},e.start()},[u,t,l,a]),A={excited:(0,zt.jsx)(jm,{className:"text-emerald-400",size:16}),happy:(0,zt.jsx)(jm,{className:"text-emerald-400",size:16}),concerned:(0,zt.jsx)(Mx,{className:"text-amber-400",size:16}),neutral:(0,zt.jsx)(rye,{className:"text-teal-400",size:16}),focused:(0,zt.jsx)(Rm,{className:"text-blue-400",size:16})};return(0,zt.jsxs)("div",{className:"".concat(s?"fixed inset-4 z-50":"relative"),"data-testid":"trading-avatar",children:[(0,zt.jsx)("audio",{ref:C,className:"hidden"}),(0,zt.jsxs)("div",{className:"h-full min-h-[450px] rounded-2xl overflow-hidden bg-black/95 backdrop-blur-xl border-2 shadow-lg ".concat({excited:"border-emerald-500/50 shadow-emerald-500/20",happy:"border-emerald-500/50 shadow-emerald-500/20",concerned:"border-amber-500/50 shadow-amber-500/20",neutral:"border-teal-500/50 shadow-teal-500/20",focused:"border-blue-500/50 shadow-blue-500/20"}[f]," transition-all duration-500"),children:[(0,zt.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:[(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsxs)(Ox,{variant:h?"active":"default",pulse:h,children:[A[f],(0,zt.jsx)("span",{className:"text-xs font-mono uppercase",children:f})]})}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>S(!j),className:"p-2 rounded-lg transition-colors ".concat(j?"bg-teal-500/20 text-teal-400":"bg-white/10 text-white hover:bg-white/20"),"data-testid":"avatar-webcam-btn",title:"Face Mirror Mode",children:(0,zt.jsx)(Kx,{size:16})}),(0,zt.jsx)("button",{onClick:()=>c(!l),className:"p-2 rounded-lg transition-colors ".concat(l?"bg-red-500/20 text-red-400":"bg-white/10 text-white hover:bg-white/20"),"data-testid":"avatar-mute-btn",children:l?(0,zt.jsx)(gwe,{size:16}):(0,zt.jsx)(mwe,{size:16})}),(0,zt.jsx)("button",{onClick:()=>i(!s),className:"p-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors","data-testid":"avatar-expand-btn",children:s?(0,zt.jsx)(qwe,{size:16}):(0,zt.jsx)(Kwe,{size:16})})]})]}),(0,zt.jsx)("div",{className:"w-full h-full pt-16 pb-32",children:(0,zt.jsx)(Jwe,{emotion:f,speaking:h,confidence:v,webcamFace:k})}),(0,zt.jsx)(an,{children:j&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"absolute top-16 right-4 w-72 z-20 p-4 rounded-xl bg-black/80 backdrop-blur-lg border border-white/10",children:[(0,zt.jsxs)("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Kx,{size:16,className:"text-teal-400"}),"Face Mirror Mode"]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:"Your facial expressions will be mirrored onto the avatar in real-time."}),(0,zt.jsx)($we,{onFaceData:N})]})}),(0,zt.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 p-4 bg-gradient-to-t from-black/90 to-transparent",children:[(0,zt.jsx)(an,{mode:"wait",children:g&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-xl bg-black/60 backdrop-blur-sm border border-white/10 text-sm text-white/90 text-center",children:g})}),(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,zt.jsx)(Tx,{onClick:I,variant:u?"teal":"white",size:"sm","data-testid":"avatar-mic-btn",children:u?(0,zt.jsx)(Ux,{size:18,className:"animate-pulse"}):(0,zt.jsx)(Wx,{size:18})}),(0,zt.jsxs)(Tx,{onClick:T,variant:"teal",disabled:b,"data-testid":"avatar-speak-btn",children:[b?(0,zt.jsx)(h1,{size:18,className:"animate-spin"}):(0,zt.jsx)(Rm,{size:18}),(0,zt.jsx)("span",{className:"ml-2",children:b?"Thinking...":"Get Insight"})]})]})]})]})]})},eke=e=>{let{variant:t="default"}=e;const{theme:n,currentTheme:a,setTheme:r,toggleTheme:s}=Vh(),[i,l]=(0,o.useState)(!1),c={dark:gye,light:xye,matrix:Nx},u=c[n]||gye;return"simple"===t?(0,zt.jsx)("button",{onClick:s,className:"flex items-center gap-2 p-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-all","data-testid":"theme-toggle-simple",children:(0,zt.jsx)(u,{size:14})}):(0,zt.jsxs)("div",{className:"relative","data-testid":"theme-toggle",children:[(0,zt.jsxs)("button",{onClick:()=>l(!i),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 text-slate-300 transition-all",children:[(0,zt.jsx)(u,{size:14}),(0,zt.jsx)("span",{className:"text-xs font-mono hidden sm:inline",children:a.name}),(0,zt.jsx)(nye,{size:12,className:"transition-transform ".concat(i?"rotate-180":"")})]}),(0,zt.jsx)(an,{children:i&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 z-50 min-w-[140px] py-2 rounded-xl bg-black/90 backdrop-blur-xl border border-white/10 shadow-2xl",children:Object.values(Uh).map(e=>{const t=c[e.id];return(0,zt.jsxs)("button",{onClick:()=>{r(e.id),l(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-left transition-colors ".concat(n===e.id?"bg-teal-500/20 text-teal-400":"text-slate-300 hover:bg-white/5 hover:text-white"),"data-testid":"theme-".concat(e.id),children:[(0,zt.jsx)(t,{size:14}),(0,zt.jsx)("span",{className:"text-sm font-mono flex-1",children:e.name}),n===e.id&&(0,zt.jsx)(Um,{size:14,className:"text-teal-400"})]},e.id)})})]})})]})},tke=Nm("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),nke=()=>{const{t:e}=sf(),[t,n]=(0,o.useState)("default"),[a,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)(null),[l,c]=(0,o.useState)({priceAlerts:!0,whaleAlerts:!0,newsAlerts:!1,soundEnabled:!0});(0,o.useEffect)(()=>{const e="Notification"in window&&"serviceWorker"in navigator;r(e),e&&(n(Notification.permission),navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered:",e),i(e)}).catch(e=>{console.error("Service Worker registration failed:",e)}))},[]);const u=(0,o.useCallback)(async()=>{if(a)try{const e=await Notification.requestPermission();n(e),"granted"===e&&new Notification("OracleIQTrader",{body:"Push notifications enabled! You will receive trading alerts.",icon:"/logo192.png",tag:"welcome"})}catch(e){console.error("Permission request failed:",e)}},[a]),d=(0,o.useCallback)(function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("granted"!==t)return;const r=new Notification(e,m({body:n,icon:"/logo192.png",badge:"/logo192.png",tag:a.tag||"alert",requireInteraction:a.requireInteraction||!1},a));return r.onclick=()=>{window.focus(),r.close()},r},[t]),h={granted:{color:"text-emerald-400",bg:"bg-emerald-500/20",icon:Um,label:"Enabled"},denied:{color:"text-red-400",bg:"bg-red-500/20",icon:Qm,label:"Blocked"},default:{color:"text-amber-400",bg:"bg-amber-500/20",icon:y1,label:"Not Set"}}[t];return a?(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"notification-manager",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/30 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(h.bg),children:(0,zt.jsx)(wx,{className:h.color,size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-sm font-semibold text-white",children:"Push Notifications"}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,zt.jsx)(h.icon,{size:12,className:h.color}),(0,zt.jsx)("span",{className:"text-xs font-mono ".concat(h.color),children:h.label})]})]})]}),"granted"!==t&&(0,zt.jsx)(Tx,{onClick:u,variant:"teal",size:"sm",disabled:"denied"===t,"data-testid":"enable-notifications-btn",children:"denied"===t?"Blocked in Browser":"Enable"})]}),"denied"===t&&(0,zt.jsx)("div",{className:"mt-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-xs text-red-400",children:(0,zt.jsx)("p",{children:"Notifications are blocked. To enable, click the lock icon in your browser's address bar and allow notifications."})})]}),"granted"===t&&(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(lye,{size:14}),"Notification Preferences"]}),[{key:"priceAlerts",label:"Price Alerts",desc:"When target prices are hit",icon:"\ud83d\udcb0"},{key:"whaleAlerts",label:"Whale Alerts",desc:"Large transactions detected",icon:"\ud83d\udc0b"},{key:"newsAlerts",label:"Breaking News",desc:"High-impact market news",icon:"\ud83d\udcf0"},{key:"soundEnabled",label:"Sound",desc:"Play sound with alerts",icon:"\ud83d\udd0a"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-lg",children:e.icon}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:e.label}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.desc})]})]}),(0,zt.jsx)("button",{onClick:()=>{return t=e.key,void c(e=>m(m({},e),{},{[t]:!e[t]}));var t},className:"relative w-10 h-5 rounded-full transition-colors ".concat(l[e.key]?"bg-teal-500":"bg-slate-600"),"data-testid":"toggle-".concat(e.key),children:(0,zt.jsx)(uu.div,{className:"absolute top-0.5 w-4 h-4 rounded-full bg-white shadow",animate:{left:l[e.key]?"22px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]},e.key)),(0,zt.jsx)("div",{className:"pt-3",children:(0,zt.jsxs)(Tx,{onClick:()=>{d("\ud83d\ude80 BTC Alert!","Bitcoin just crossed $95,000! Your target price was hit.",{tag:"test-alert",requireInteraction:!0})},variant:"white",size:"sm",className:"w-full","data-testid":"test-notification-btn",children:[(0,zt.jsx)(Bm,{size:14}),"Send Test Notification"]})})]})]}):(0,zt.jsx)(vx,{title:"Push Notifications",icon:"\ud83d\udd14",accent:"amber",children:(0,zt.jsxs)("div",{className:"text-center py-6 text-slate-500",children:[(0,zt.jsx)(tke,{className:"mx-auto mb-2 opacity-50",size:32}),(0,zt.jsx)("p",{className:"text-sm",children:"Push notifications are not supported in this browser."})]})})},ake=Nm("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),rke=Nm("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ske="".concat("https://tradehub-380.preview.emergentagent.com","/api"),ike=()=>{var e,t,n,a,r;const{t:s}=sf(),[i,l]=(0,o.useState)((new Date).toISOString().split("T")[0]),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)("daily"),[y,b]=(0,o.useState)(""),w=o.useRef(null),k=(0,o.useCallback)(async()=>{g(!0);try{const e="".concat(ske,"/journal/daily-summary?date=").concat(i),t=await fetch(e,{method:"GET",headers:{Accept:"application/json"}});if(t.ok){const e=await t.json();u(e)}else console.error("Response not OK:",t.status,t.statusText),u(null)}catch(e){console.error("Error fetching daily summary:",e),u(null)}finally{g(!1)}},[i]),N=(0,o.useCallback)(async()=>{g(!0);try{const e=await fetch("".concat(ske,"/journal/weekly-summary"));if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching weekly summary:",e)}finally{g(!1)}},[]);(0,o.useEffect)(()=>{"daily"===x?k():N()},[x,k,N]);const j=e=>{const t=new Date(i);t.setDate(t.getDate()+e),l(t.toISOString().split("T")[0])};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"trading-journal",children:[(0,zt.jsx)("audio",{ref:w,className:"hidden"}),(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Lwe,{className:"text-amber-400"}),"Trading Journal"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Track your performance and learn from every trade"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>v("daily"),className:"px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat("daily"===x?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400"),children:"Daily"}),(0,zt.jsx)("button",{onClick:()=>v("weekly"),className:"px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat("weekly"===x?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400"),children:"Weekly"})]})]}),"daily"===x?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,zt.jsx)("button",{onClick:()=>j(-1),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors",children:(0,zt.jsx)(ake,{size:20})}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)(rke,{size:16,className:"text-teal-400"}),(0,zt.jsx)("input",{type:"date",value:i,onChange:e=>l(e.target.value),className:"bg-transparent text-white font-mono text-sm outline-none"})]}),(0,zt.jsx)("button",{onClick:()=>j(1),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors",disabled:i>=(new Date).toISOString().split("T")[0],children:(0,zt.jsx)(Jm,{size:20})})]}),m&&(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-teal-500 border-t-transparent rounded-full"}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading journal data..."})]}),!m&&c&&(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Am,{size:16,className:"text-teal-400"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"TRADES"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:c.trades_count}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[c.wins,"W / ",c.losses,"L"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(cwe,{size:16,className:"text-blue-400"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"WIN RATE"})]}),(0,zt.jsxs)("p",{className:"text-2xl font-bold text-white",children:[c.win_rate,"%"]}),(0,zt.jsx)("div",{className:"w-full h-1 rounded-full bg-slate-700 mt-2",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-teal-500 to-emerald-500",style:{width:"".concat(c.win_rate,"%")}})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10 col-span-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Mm,{size:16,className:c.total_pnl>=0?"text-emerald-400":"text-red-400"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"TOTAL P&L"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-bold ".concat(c.total_pnl>=0?"text-emerald-400":"text-red-400"),children:[c.total_pnl>=0?"+":"","$",c.total_pnl.toLocaleString()]})]})]}),(0,zt.jsxs)(vx,{title:"AI Insights",icon:"\ud83e\udde0",accent:"purple",children:[(0,zt.jsx)("div",{className:"p-4 rounded-xl ".concat({excited:"text-emerald-400 bg-emerald-500/20",happy:"text-emerald-400 bg-emerald-500/20",concerned:"text-amber-400 bg-amber-500/20",neutral:"text-slate-400 bg-slate-500/20"}[c.emotion]," mb-4"),children:(0,zt.jsx)("p",{className:"text-sm",children:c.ai_insights})}),c.audio&&(0,zt.jsxs)(Tx,{onClick:async()=>{var e;if(p)return null===(e=w.current)||void 0===e||e.pause(),void f(!1);try{const e=await fetch("".concat(ske,"/journal/daily-summary?date=").concat(i,"&include_audio=true"));if(e.ok){const t=await e.json();t.audio&&w.current&&(w.current.src="data:audio/mp3;base64,".concat(t.audio),w.current.play(),f(!0),w.current.onended=()=>f(!1))}}catch(t){console.error("Error playing audio summary:",t)}},variant:"teal",className:"w-full",disabled:p,children:[p?(0,zt.jsx)(Ym,{size:16}):(0,zt.jsx)(Gm,{size:16}),p?"Playing...":"Play Audio Summary"]})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[c.best_trade&&(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(uye,{className:"text-emerald-400",size:18}),(0,zt.jsx)("span",{className:"text-sm font-semibold text-emerald-400",children:"Best Trade"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(e=c.best_trade.action)||void 0===e?void 0:e.toUpperCase()," ",c.best_trade.symbol]}),(0,zt.jsxs)("span",{className:"text-emerald-400 font-bold",children:["+$",null===(t=c.best_trade.profit_loss)||void 0===t?void 0:t.toLocaleString()]})]})]}),c.worst_trade&&c.worst_trade.profit_loss<0&&(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(y1,{className:"text-red-400",size:18}),(0,zt.jsx)("span",{className:"text-sm font-semibold text-red-400",children:"Worst Trade"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(n=c.worst_trade.action)||void 0===n?void 0:n.toUpperCase()," ",c.worst_trade.symbol]}),(0,zt.jsxs)("span",{className:"text-red-400 font-bold",children:["$",null===(a=c.worst_trade.profit_loss)||void 0===a?void 0:a.toLocaleString()]})]})]})]}),(0,zt.jsxs)(vx,{title:"Journal Note",icon:"\ud83d\udcdd",accent:"amber",children:[(0,zt.jsx)("textarea",{value:y,onChange:e=>b(e.target.value),placeholder:"Add your thoughts about today's trading...",className:"w-full h-24 p-3 rounded-lg bg-black/40 border border-white/10 text-white text-sm resize-none outline-none focus:border-teal-500/50"}),(0,zt.jsxs)(Tx,{onClick:async()=>{if(y.trim())try{await fetch("".concat(ske,"/journal/add-note?date=").concat(i,"&note=").concat(encodeURIComponent(y)),{method:"POST"}),b("")}catch(e){console.error("Error saving note:",e)}},variant:"white",size:"sm",className:"mt-3",children:[(0,zt.jsx)(Wwe,{size:14}),"Save Note"]})]})]}),!m&&!c&&(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[(0,zt.jsx)(Lwe,{size:48,className:"mb-4 opacity-50"}),(0,zt.jsx)("p",{className:"text-lg",children:"No trading data for this date"}),(0,zt.jsx)("p",{className:"text-sm mt-2",children:"Select a date with trading activity"})]})]}):d&&(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"TOTAL P&L"}),(0,zt.jsxs)("p",{className:"text-2xl font-bold ".concat(d.total_pnl>=0?"text-emerald-400":"text-red-400"),children:[d.total_pnl>=0?"+":"","$",d.total_pnl.toLocaleString()]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"TOTAL TRADES"}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:d.total_trades})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"WIN RATE"}),(0,zt.jsxs)("p",{className:"text-2xl font-bold text-white",children:[d.overall_win_rate,"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"AI INSIGHT"}),(0,zt.jsx)("p",{className:"text-xs text-slate-300",children:d.ai_insights})]})]}),(0,zt.jsx)(vx,{title:"7-Day Performance",icon:"\ud83d\udcca",accent:"blue",children:(0,zt.jsx)("div",{className:"flex items-end justify-between h-40 gap-2",children:null===(r=d.daily_summaries)||void 0===r?void 0:r.slice().reverse().map((e,t)=>{const n=Math.max(...d.daily_summaries.map(e=>Math.abs(e.pnl))),a=n>0?Math.abs(e.pnl)/n*100:0,r=e.pnl>=0;return(0,zt.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,zt.jsx)("div",{className:"w-full flex flex-col items-center justify-end h-28",children:(0,zt.jsx)(uu.div,{initial:{height:0},animate:{height:"".concat(Math.max(a,5),"%")},className:"w-full rounded-t ".concat(r?"bg-emerald-500":"bg-red-500")})}),(0,zt.jsx)("span",{className:"text-[10px] text-slate-500 font-mono",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})}),(0,zt.jsxs)("span",{className:"text-xs font-mono ".concat(r?"text-emerald-400":"text-red-400"),children:[r?"+":"","$",e.pnl.toFixed(0)]})]},t)})})})]})]})},oke=Nm("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),lke=Nm("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),cke="".concat("https://tradehub-380.preview.emergentagent.com","/api"),uke=()=>{var e,t,n;const{t:a}=sf(),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(null),[c,u]=(0,o.useState)("total_value"),[d,h]=(0,o.useState)(!0),[p,f]=(0,o.useState)("");(0,o.useEffect)(()=>{g()},[c]);const g=async()=>{h(!0);try{const e=await fetch("".concat(cke,"/portfolios/public?sort_by=").concat(c));if(e.ok){const t=await e.json();s(t.portfolios)}}catch(e){console.error("Error fetching portfolios:",e)}finally{h(!1)}},x=async e=>{try{await fetch("".concat(cke,"/portfolios/follow/").concat(e),{method:"POST"}),s(t=>t.map(t=>t.id===e?m(m({},t),{},{followers:t.followers+1}):t))}catch(t){console.error("Error following portfolio:",t)}},v=r.filter(e=>e.username.toLowerCase().includes(p.toLowerCase()));return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"portfolio-leaderboard",children:[(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Xm,{className:"text-yellow-400"}),"Leaderboard"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Top traders and their portfolios"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)(b1,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),(0,zt.jsx)("input",{type:"text",placeholder:"Search traders...",value:p,onChange:e=>f(e.target.value),className:"pl-9 pr-4 py-2 rounded-lg bg-black/40 border border-white/10 text-sm text-white outline-none focus:border-teal-500/50"})]}),(0,zt.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-3 py-2 rounded-lg bg-black/40 border border-white/10 text-sm text-white outline-none",children:[(0,zt.jsx)("option",{value:"total_value",children:"Total Value"}),(0,zt.jsx)("option",{value:"daily_pnl",children:"Daily P&L"}),(0,zt.jsx)("option",{value:"win_rate",children:"Win Rate"}),(0,zt.jsx)("option",{value:"followers",children:"Followers"})]})]})]}),d?(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-teal-500 border-t-transparent rounded-full"}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading leaderboard..."})]}):(0,zt.jsx)("div",{className:"overflow-hidden rounded-2xl bg-black/40 border border-white/10",children:(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/10",children:[(0,zt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-mono text-slate-500",children:"RANK"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-mono text-slate-500",children:"TRADER"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"VALUE"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"DAILY P&L"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"WIN RATE"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"FOLLOWERS"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-center text-xs font-mono text-slate-500",children:"ACTIONS"})]})}),(0,zt.jsx)("tbody",{children:0===v.length?(0,zt.jsx)("tr",{children:(0,zt.jsxs)("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-400",children:[(0,zt.jsx)(Xm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No traders found"})]})}):v.map((e,t)=>{var n,a;return(0,zt.jsxs)(uu.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,zt.jsx)("td",{className:"px-4 py-4",children:(0,zt.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-white/5",children:(a=e.rank,1===a?(0,zt.jsx)(oke,{className:"text-yellow-400",size:20}):2===a?(0,zt.jsx)(lke,{className:"text-slate-300",size:20}):3===a?(0,zt.jsx)(lke,{className:"text-amber-600",size:20}):(0,zt.jsxs)("span",{className:"text-slate-500 font-mono text-sm",children:["#",a]}))})}),(0,zt.jsx)("td",{className:"px-4 py-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center text-white font-bold",children:e.username[0]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-white font-semibold",children:e.username}),e.verified&&(0,zt.jsx)(Fm,{className:"text-yellow-400 fill-yellow-400",size:14})]}),(0,zt.jsx)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:null===(n=e.top_holdings)||void 0===n?void 0:n.slice(0,3).join(" \u2022 ")})]})]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("span",{className:"text-white font-mono",children:["$",e.total_value.toLocaleString()]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("div",{className:"flex items-center justify-end gap-1 ".concat(e.daily_pnl>=0?"text-emerald-400":"text-red-400"),children:[e.daily_pnl>=0?(0,zt.jsx)(owe,{size:14}):(0,zt.jsx)(lwe,{size:14}),(0,zt.jsxs)("span",{className:"font-mono",children:[e.daily_pnl>=0?"+":"","$",Math.abs(e.daily_pnl).toLocaleString()]}),(0,zt.jsxs)("span",{className:"text-xs",children:["(",e.daily_pnl_percent,"%)"]})]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,zt.jsxs)("span",{className:"text-white font-mono",children:[e.win_rate,"%"]}),(0,zt.jsx)("div",{className:"w-12 h-1.5 rounded-full bg-slate-700",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-teal-500",style:{width:"".concat(e.win_rate,"%")}})})]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("div",{className:"flex items-center justify-end gap-1 text-slate-400",children:[(0,zt.jsx)(wye,{size:14}),(0,zt.jsx)("span",{className:"font-mono",children:e.followers.toLocaleString()})]})}),(0,zt.jsx)("td",{className:"px-4 py-4",children:(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("".concat(cke,"/portfolios/").concat(e));if(t.ok){const e=await t.json();l(e)}}catch(t){console.error("Error fetching portfolio:",t)}})(e.id),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors",title:"View Portfolio",children:(0,zt.jsx)(zm,{size:16})}),(0,zt.jsx)("button",{onClick:()=>x(e.id),className:"p-2 rounded-lg bg-teal-500/20 text-teal-400 hover:bg-teal-500/30 transition-colors",title:"Follow",children:(0,zt.jsx)(Nye,{size:16})})]})})]},e.id)})})]})})}),(0,zt.jsx)(an,{children:i&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>l(null),children:(0,zt.jsxs)(uu.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto rounded-2xl bg-black/90 border border-white/10 p-6",onClick:e=>e.stopPropagation(),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold",children:i.username[0]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h3",{className:"text-xl font-bold text-white",children:i.username}),i.verified&&(0,zt.jsx)(Fm,{className:"text-yellow-400 fill-yellow-400",size:18})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:i.bio}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[(0,zt.jsxs)("span",{children:[null===(e=i.followers)||void 0===e?void 0:e.toLocaleString()," followers"]}),(0,zt.jsxs)("span",{children:[i.following," following"]}),(0,zt.jsxs)("span",{children:["Joined ",i.joined_date]})]})]})]}),(0,zt.jsxs)(Tx,{onClick:()=>x(i.id),variant:"teal",size:"sm",children:[(0,zt.jsx)(Nye,{size:14}),"Follow"]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Total Value"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:["$",null===(t=i.total_value)||void 0===t?void 0:t.toLocaleString()]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"All-Time Return"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:["+",i.all_time_return,"%"]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:[i.win_rate,"%"]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Risk/Reward"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:[i.risk_reward_ratio,":1"]})]})]}),(0,zt.jsxs)("div",{className:"mb-6",children:[(0,zt.jsx)("h4",{className:"text-sm font-semibold text-white mb-3",children:"Holdings"}),(0,zt.jsx)("div",{className:"space-y-2",children:null===(n=i.holdings)||void 0===n?void 0:n.map((e,t)=>{var n,a;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"font-mono text-teal-400",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:[e.allocation,"%"]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-sm text-white",children:["$",null===(n=e.value)||void 0===n?void 0:n.toLocaleString()]}),(0,zt.jsxs)("p",{className:"text-xs ".concat(e.pnl>=0?"text-emerald-400":"text-red-400"),children:[e.pnl>=0?"+":"","$",null===(a=e.pnl)||void 0===a?void 0:a.toLocaleString()]})]})]},t)})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-teal-500/10 border border-teal-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(kye,{className:"text-teal-400",size:18}),(0,zt.jsx)("span",{className:"font-semibold text-teal-400",children:"Copy Trading"})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Automatically copy this trader's positions proportionally to your portfolio size."}),(0,zt.jsx)(Tx,{variant:"teal",className:"w-full",children:"Enable Copy Trading"})]})]})})})]})},dke=Nm("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),hke=Nm("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),pke="".concat("https://tradehub-380.preview.emergentagent.com","/api"),fke=()=>{var e,t,n,a,r,s,i,l,c;const{t:u}=sf(),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)("BTC"),[m,g]=(0,o.useState)(null),[x,v]=(0,o.useState)(!0);(0,o.useEffect)(()=>{y(),b(p)},[p]);const y=async()=>{try{const e=await fetch("".concat(pke,"/social/trending"));if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching trending:",e)}finally{v(!1)}},b=async e=>{try{const t=await fetch("".concat(pke,"/social/sentiment/").concat(e));if(t.ok){const e=await t.json();g(e)}}catch(t){console.error("Error fetching sentiment:",t)}},w=e=>e>=.7?"text-emerald-400":e>=.55?"text-teal-400":e>=.45?"text-slate-400":e>=.3?"text-amber-400":"text-red-400",k=e=>e>=75?"text-emerald-400":e>=55?"text-teal-400":e>=45?"text-slate-400":e>=25?"text-amber-400":"text-red-400";return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"social-signals",children:[(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Km,{className:"text-blue-400"}),"Social Signals"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Real-time social media sentiment analysis"})]}),(0,zt.jsxs)(Tx,{onClick:y,variant:"white",size:"sm",children:[(0,zt.jsx)(Swe,{size:14}),"Refresh"]})]}),x&&(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-blue-500 border-t-transparent rounded-full"}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading social signals..."})]}),!x&&(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d&&(0,zt.jsx)(vx,{title:"Fear & Greed Index",icon:"\ud83c\udfad",accent:"purple",children:(0,zt.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,zt.jsxs)("div",{className:"relative w-32 h-32",children:[(0,zt.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 100 100",children:[(0,zt.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),(0,zt.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"url(#fearGreedGradient)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:"".concat(2.51*d.fear_greed_index," 251")}),(0,zt.jsx)("defs",{children:(0,zt.jsxs)("linearGradient",{id:"fearGreedGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,zt.jsx)("stop",{offset:"0%",stopColor:"#ef4444"}),(0,zt.jsx)("stop",{offset:"50%",stopColor:"#f59e0b"}),(0,zt.jsx)("stop",{offset:"100%",stopColor:"#22c55e"})]})})]}),(0,zt.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,zt.jsx)("span",{className:"text-3xl font-bold ".concat(k(d.fear_greed_index)),children:d.fear_greed_index})})]}),(0,zt.jsx)("span",{className:"mt-2 text-lg font-semibold ".concat(k(d.fear_greed_index)),children:d.fear_greed_label}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 mt-1",children:["Updated ",new Date(d.updated_at).toLocaleTimeString()]})]})}),(0,zt.jsx)("div",{className:"lg:col-span-2",children:(0,zt.jsx)(vx,{title:"Trending Topics",icon:"\ud83d\udd25",accent:"orange",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===d||void 0===d||null===(e=d.trending)||void 0===e?void 0:e.map((e,t)=>{var n,a;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-3 rounded-xl border ".concat((a=e.sentiment_score,a>=.7?"bg-emerald-500/20 border-emerald-500/30":a>=.55?"bg-teal-500/20 border-teal-500/30":a>=.45?"bg-slate-500/20 border-slate-500/30":a>=.3?"bg-amber-500/20 border-amber-500/30":"bg-red-500/20 border-red-500/30")," cursor-pointer hover:scale-[1.02] transition-transform"),onClick:()=>{const t=e.topic.replace("#","").toUpperCase();["BTC","BITCOIN","ETH","ETHEREUM","SOL","SOLANA"].includes(t)&&f("BITCOIN"===t?"BTC":"ETHEREUM"===t?"ETH":"SOLANA"===t?"SOL":t)},children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(dke,{size:16,className:"text-slate-500"}),(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.topic}),"bullish"===e.sentiment?(0,zt.jsx)(jm,{size:14,className:"text-emerald-400"}):"bearish"===e.sentiment?(0,zt.jsx)(Mx,{size:14,className:"text-red-400"}):null]}),(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsxs)("span",{className:"text-xs font-mono ".concat(e.change_24h>=0?"text-emerald-400":"text-red-400"),children:[e.change_24h>=0?"+":"",e.change_24h,"%"]})})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,zt.jsxs)("span",{children:[e.mentions.toLocaleString()," mentions"]}),(0,zt.jsx)("div",{className:"flex items-center gap-1",children:(0,zt.jsxs)("span",{className:w(e.sentiment_score),children:[(100*e.sentiment_score).toFixed(0),"% sentiment"]})})]}),(0,zt.jsx)("div",{className:"mt-2 space-y-1",children:null===(n=e.sample_tweets)||void 0===n?void 0:n.slice(0,1).map((e,t)=>(0,zt.jsxs)("p",{className:"text-xs text-slate-400 truncate",children:['"',e,'"']},t))})]},e.topic)})})})})]}),m&&(0,zt.jsxs)(vx,{title:"".concat(m.symbol," Sentiment Analysis"),icon:"\ud83d\udcca",accent:"blue",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,zt.jsxs)("div",{className:"flex flex-col items-center p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"text-4xl font-bold ".concat(w(m.sentiment_score)),children:[(100*m.sentiment_score).toFixed(0),"%"]}),(0,zt.jsx)("span",{className:"text-sm font-semibold mt-1 ".concat(w(m.sentiment_score)),children:m.sentiment_label}),(0,zt.jsx)("div",{className:"w-full h-2 rounded-full bg-slate-700 mt-3",children:(0,zt.jsx)("div",{className:"h-full rounded-full transition-all ".concat(m.sentiment_score>=.5?"bg-emerald-500":"bg-red-500"),style:{width:"".concat(100*m.sentiment_score,"%")}})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)(rye,{size:16,className:"text-teal-400"}),(0,zt.jsx)("span",{className:"text-sm text-slate-500",children:"24h Mentions"})]}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white mb-1",children:null===(t=m.mentions_24h)||void 0===t?void 0:t.toLocaleString()}),(0,zt.jsxs)("div",{className:"text-xs ".concat(m.mentions_change>=0?"text-emerald-400":"text-red-400"),children:[m.mentions_change>=0?"+":"",m.mentions_change,"% from yesterday"]}),(0,zt.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-slate-400",children:[(0,zt.jsx)(hke,{size:12})," Twitter"]}),(0,zt.jsx)("span",{className:"text-white",children:null===(n=m.sources)||void 0===n||null===(a=n.twitter)||void 0===a?void 0:a.toLocaleString()})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-slate-400",children:[(0,zt.jsx)(Km,{size:12})," Reddit"]}),(0,zt.jsx)("span",{className:"text-white",children:null===(r=m.sources)||void 0===r||null===(s=r.reddit)||void 0===s?void 0:s.toLocaleString()})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-slate-400",children:[(0,zt.jsx)(wye,{size:12})," Telegram"]}),(0,zt.jsx)("span",{className:"text-white",children:null===(i=m.sources)||void 0===i||null===(l=i.telegram)||void 0===l?void 0:l.toLocaleString()})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)(wye,{size:16,className:"text-purple-400"}),(0,zt.jsx)("span",{className:"text-sm text-slate-500",children:"Key Influencers"})]}),(0,zt.jsx)("div",{className:"space-y-3",children:null===(c=m.key_influencers)||void 0===c?void 0:c.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-sm text-white",children:e.name}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:[(e.followers/1e3).toFixed(0),"K"]})]}),"bullish"===e.sentiment?(0,zt.jsx)(c1,{size:14,className:"text-emerald-400"}):"bearish"===e.sentiment?(0,zt.jsx)(u1,{size:14,className:"text-red-400"}):(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:"Neutral"})]},t))})]})]}),(0,zt.jsx)("div",{className:"mt-4 flex items-center gap-2 justify-center",children:["BTC","ETH","SOL","AAPL","NVDA"].map(e=>(0,zt.jsx)("button",{onClick:()=>f(e),className:"px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat(p===e?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]})]})},mke=Nm("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),gke=Nm("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),xke=Nm("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),vke="https://tradehub-380.preview.emergentagent.com/api",yke=()=>{var e,t;const{t:n}=sf(),[a,r]=(0,o.useState)(null),[s,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)({symbol:"BTC",side:"buy",quantity:.01,orderType:"market",stopLoss:"",takeProfit:""}),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(null),f=(0,o.useCallback)(async()=>{i(!0);try{const e=await fetch("".concat(vke,"/playground/account"),{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();r(t)}}catch(e){console.error("Error fetching account:",e)}finally{i(!1)}},[]),g=async()=>{if(null!==a&&void 0!==a&&a.id)try{const e=await fetch("".concat(vke,"/playground/account/").concat(a.id));if(e.ok){const t=await e.json();r(t)}}catch(e){console.error("Error refreshing account:",e)}};(0,o.useEffect)(()=>{f()},[f]),(0,o.useEffect)(()=>{const e=setInterval(g,3e4);return()=>clearInterval(e)},[null===a||void 0===a?void 0:a.id]);const x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e||0),v=e=>"".concat(e>=0?"+":"").concat((e||0).toFixed(2),"%");return s?(0,zt.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,zt.jsx)(Swe,{className:"animate-spin text-teal-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading playground..."})]}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"trading-playground",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Trading Playground"}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Practice trading with $100,000 virtual money"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)(Tx,{onClick:g,variant:"white",size:"sm",children:[(0,zt.jsx)(Swe,{size:16}),"Refresh"]}),(0,zt.jsxs)(Tx,{onClick:async()=>{if(null!==a&&void 0!==a&&a.id&&window.confirm("Reset account to $100,000? All positions will be closed."))try{const e=await fetch("".concat(vke,"/playground/reset/").concat(a.id,"?initial_balance=100000"),{method:"POST"});if(e.ok){const t=await e.json();r(t.account),p({type:"success",text:"Account reset successfully!"})}}catch(e){p({type:"error",text:"Failed to reset account"})}},variant:"danger",size:"sm",children:[(0,zt.jsx)(mke,{size:16}),"Reset Account"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(vx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-teal-500/20",children:(0,zt.jsx)(Sm,{size:20,className:"text-teal-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Cash Balance"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-white",children:x(null===a||void 0===a?void 0:a.current_balance)})]})]})}),(0,zt.jsx)(vx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/20",children:(0,zt.jsx)(Cm,{size:20,className:"text-blue-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Equity"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-white",children:x(null===a||void 0===a?void 0:a.total_equity)})]})]})}),(0,zt.jsx)(vx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat((null===a||void 0===a?void 0:a.total_pnl)>=0?"bg-green-500/20":"bg-red-500/20"),children:(null===a||void 0===a?void 0:a.total_pnl)>=0?(0,zt.jsx)(jm,{size:20,className:"text-green-400"}):(0,zt.jsx)(Mx,{size:20,className:"text-red-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total P&L"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold ".concat((null===a||void 0===a?void 0:a.total_pnl)>=0?"text-green-400":"text-red-400"),children:x(null===a||void 0===a?void 0:a.total_pnl)})]})]})}),(0,zt.jsx)(vx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat((null===a||void 0===a?void 0:a.total_pnl_percent)>=0?"bg-green-500/20":"bg-red-500/20"),children:(0,zt.jsx)(Mm,{size:20,className:(null===a||void 0===a?void 0:a.total_pnl_percent)>=0?"text-green-400":"text-red-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Return"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold ".concat((null===a||void 0===a?void 0:a.total_pnl_percent)>=0?"text-green-400":"text-red-400"),children:v(null===a||void 0===a?void 0:a.total_pnl_percent)})]})]})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,zt.jsx)(vx,{title:"Place Order",icon:"\ud83d\udcca",accent:"cyan",className:"lg:col-span-1",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:["BTC","ETH","SOL","XRP","ADA","DOGE","AVAX","LINK"].map(e=>(0,zt.jsx)("button",{onClick:()=>c(t=>m(m({},t),{},{symbol:e})),className:"px-3 py-1.5 rounded-lg text-sm font-mono transition-colors ".concat(l.symbol===e?"bg-teal-500/30 text-teal-400 border border-teal-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Side"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)("button",{onClick:()=>c(e=>m(m({},e),{},{side:"buy"})),className:"flex-1 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ".concat("buy"===l.side?"bg-green-500/30 text-green-400 border border-green-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(gke,{size:18}),"BUY"]}),(0,zt.jsxs)("button",{onClick:()=>c(e=>m(m({},e),{},{side:"sell"})),className:"flex-1 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ".concat("sell"===l.side?"bg-red-500/30 text-red-400 border border-red-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(xke,{size:18}),"SELL"]})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Quantity"}),(0,zt.jsx)("input",{type:"number",value:l.quantity,onChange:e=>c(t=>m(m({},t),{},{quantity:parseFloat(e.target.value)||0})),className:"w-full px-4 py-3 rounded-lg bg-black/40 border border-white/10 text-white font-mono outline-none focus:border-teal-500/50",step:"0.01",min:"0.001"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("label",{className:"text-xs text-slate-500 mb-1 block flex items-center gap-1",children:[(0,zt.jsx)(Dm,{size:12}),"Stop Loss (optional)"]}),(0,zt.jsx)("input",{type:"number",value:l.stopLoss,onChange:e=>c(t=>m(m({},t),{},{stopLoss:e.target.value})),placeholder:"Price to cut losses",className:"w-full px-4 py-2 rounded-lg bg-black/40 border border-white/10 text-white font-mono text-sm outline-none focus:border-red-500/50"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("label",{className:"text-xs text-slate-500 mb-1 block flex items-center gap-1",children:[(0,zt.jsx)(Am,{size:12}),"Take Profit (optional)"]}),(0,zt.jsx)("input",{type:"number",value:l.takeProfit,onChange:e=>c(t=>m(m({},t),{},{takeProfit:e.target.value})),placeholder:"Price to take profit",className:"w-full px-4 py-2 rounded-lg bg-black/40 border border-white/10 text-white font-mono text-sm outline-none focus:border-green-500/50"})]}),(0,zt.jsx)(an,{children:h&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"p-3 rounded-lg text-sm ".concat("success"===h.type?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:h.text})}),(0,zt.jsx)(Tx,{onClick:async()=>{if(null!==a&&void 0!==a&&a.id){d(!0),p(null);try{const t=new URLSearchParams({account_id:a.id,symbol:l.symbol,side:l.side,order_type:l.orderType,quantity:l.quantity.toString()});l.stopLoss&&t.append("stop_loss",l.stopLoss),l.takeProfit&&t.append("take_profit",l.takeProfit);const n=await fetch("".concat(vke,"/playground/order?").concat(t),{method:"POST"}),r=await n.json();var e;if(r.success)p({type:"success",text:"Order ".concat((null===(e=r.order)||void 0===e?void 0:e.status)||"placed","!")}),await g();else p({type:"error",text:r.error||"Order failed"})}catch(t){p({type:"error",text:"Failed to place order"})}finally{d(!1)}}},variant:"buy"===l.side?"cyan":"danger",size:"lg",className:"w-full",disabled:u,children:u?(0,zt.jsx)(Swe,{size:18,className:"animate-spin"}):(0,zt.jsxs)(zt.Fragment,{children:["buy"===l.side?(0,zt.jsx)(gke,{size:18}):(0,zt.jsx)(xke,{size:18}),l.side.toUpperCase()," ",l.quantity," ",l.symbol]})})]})}),(0,zt.jsx)(vx,{title:"Open Positions",icon:"\ud83d\udcc8",accent:"green",className:"lg:col-span-2",children:(null===a||void 0===a||null===(e=a.positions)||void 0===e?void 0:e.length)>0?(0,zt.jsx)("div",{className:"space-y-3",children:a.positions.map((e,t)=>{var n,a,r;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("long"===e.side?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:null===(n=e.side)||void 0===n?void 0:n.toUpperCase()}),(0,zt.jsx)("span",{className:"text-white font-bold",children:e.symbol}),(0,zt.jsx)("span",{className:"text-slate-400 text-sm font-mono",children:e.quantity})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"font-mono font-bold ".concat(e.unrealized_pnl>=0?"text-green-400":"text-red-400"),children:x(e.unrealized_pnl)}),(0,zt.jsx)("p",{className:"text-xs font-mono ".concat(e.unrealized_pnl_percent>=0?"text-green-400":"text-red-400"),children:v(e.unrealized_pnl_percent)})]})]}),(0,zt.jsxs)("div",{className:"mt-2 flex gap-4 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{children:["Entry: $",null===(a=e.entry_price)||void 0===a?void 0:a.toFixed(2)]}),(0,zt.jsxs)("span",{children:["Current: $",null===(r=e.current_price)||void 0===r?void 0:r.toFixed(2)]}),e.stop_loss&&(0,zt.jsxs)("span",{className:"text-red-400",children:["SL: $",e.stop_loss]}),e.take_profit&&(0,zt.jsxs)("span",{className:"text-green-400",children:["TP: $",e.take_profit]})]})]},e.id||t)})}):(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[(0,zt.jsx)(Cm,{size:48,className:"mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No open positions"}),(0,zt.jsx)("p",{className:"text-sm mt-1",children:"Place your first trade!"})]})})]}),(0,zt.jsx)(vx,{title:"Recent Trades",icon:"\ud83d\udcdc",accent:"purple",children:(null===a||void 0===a||null===(t=a.trade_history)||void 0===t?void 0:t.length)>0?(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"text-left text-xs text-slate-500 border-b border-white/10",children:[(0,zt.jsx)("th",{className:"pb-2",children:"Symbol"}),(0,zt.jsx)("th",{className:"pb-2",children:"Side"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Quantity"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Price"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Value"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Fees"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Time"})]})}),(0,zt.jsx)("tbody",{children:a.trade_history.slice(-10).reverse().map((e,t)=>{var n,a,r,s;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-2 font-mono text-white",children:e.symbol}),(0,zt.jsx)("td",{className:"py-2",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("buy"===e.side?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:null===(n=e.side)||void 0===n?void 0:n.toUpperCase()})}),(0,zt.jsx)("td",{className:"py-2 text-right font-mono text-slate-300",children:e.quantity}),(0,zt.jsxs)("td",{className:"py-2 text-right font-mono text-slate-300",children:["$",null===(a=e.price)||void 0===a?void 0:a.toFixed(2)]}),(0,zt.jsxs)("td",{className:"py-2 text-right font-mono text-slate-300",children:["$",null===(r=e.value)||void 0===r?void 0:r.toFixed(2)]}),(0,zt.jsxs)("td",{className:"py-2 text-right font-mono text-slate-500",children:["$",null===(s=e.fees)||void 0===s?void 0:s.toFixed(4)]}),(0,zt.jsx)("td",{className:"py-2 text-right text-xs text-slate-500",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id||t)})})]})}):(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[(0,zt.jsx)(_we,{size:32,className:"mb-2 opacity-50"}),(0,zt.jsx)("p",{className:"text-sm",children:"No trades yet"})]})})]})},bke="https://tradehub-380.preview.emergentagent.com/api",wke=e=>{var t,n,a,r,s,i;let{accountId:l}=e;const[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)([]),[g,x]=(0,o.useState)(null),[v,y]=(0,o.useState)(!0),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)({strategy:"moderate",tradingPairs:["BTC","ETH","SOL"]}),j=(0,o.useCallback)(async()=>{try{const t=await fetch("".concat(bke,"/bot/user/bots"));if(t.ok){var e;const n=await t.json();h(n.bots||[]),(null===(e=n.bots)||void 0===e?void 0:e.length)>0&&!c&&u(n.bots[0])}}catch(t){console.error("Error fetching bots:",t)}finally{y(!1)}},[c]),S=async e=>{try{const t=await fetch("".concat(bke,"/bot/").concat(e,"/performance"));if(t.ok){const e=await t.json();x(e)}}catch(t){console.error("Error fetching performance:",t)}},C=async e=>{try{const t=await fetch("".concat(bke,"/bot/").concat(e,"/signals"));if(t.ok){const e=await t.json();f(e.signals||[])}}catch(t){console.error("Error fetching signals:",t)}},E=async(e,t)=>{try{const n=await fetch("".concat(bke,"/bot/").concat(e,"/mode?mode=").concat(t),{method:"POST"});if(n.ok){await n.json();u(e=>e?m(m({},e),{},{mode:t,is_active:"paused"!==t}):null)}}catch(n){console.error("Error setting bot mode:",n)}};(0,o.useEffect)(()=>{j()},[j]),(0,o.useEffect)(()=>{if(c){S(c.id),C(c.id);const e=setInterval(()=>{S(c.id),C(c.id)},1e4);return()=>clearInterval(e)}},[null===c||void 0===c?void 0:c.id]);const T=e=>{switch(e){case"strong_buy":return"text-green-400 bg-green-500/20";case"buy":return"text-green-300 bg-green-500/10";case"strong_sell":return"text-red-400 bg-red-500/20";case"sell":return"text-red-300 bg-red-500/10";default:return"text-slate-400 bg-slate-500/20"}};return v?(0,zt.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,zt.jsx)(Swe,{className:"animate-spin text-teal-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading bot..."})]}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"autonomous-bot",children:[(0,zt.jsx)("div",{className:"flex items-center justify-between",children:(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(qm,{className:"text-teal-400"}),"AI Trading Bot"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Autonomous trading with AI-powered analysis"})]})}),c?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(vx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Status"}),(0,zt.jsx)("p",{className:"font-semibold ".concat(c.is_active?"text-green-400":"text-slate-400"),children:c.is_active?"Active":"Paused"})]}),(0,zt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(c.is_active?"bg-green-400 animate-pulse":"bg-slate-500")})]})}),(0,zt.jsxs)(vx,{className:"p-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Mode"}),(0,zt.jsx)("p",{className:"px-2 py-0.5 rounded text-sm inline-block mt-1 ".concat((e=>{switch(e){case"full_auto":return"bg-green-500/20 text-green-400 border-green-500/50";case"semi_auto":return"bg-amber-500/20 text-amber-400 border-amber-500/50";default:return"bg-slate-500/20 text-slate-400 border-slate-500/50"}})(c.mode)),children:null===(t=c.mode)||void 0===t?void 0:t.replace("_"," ").toUpperCase()})]}),(0,zt.jsxs)(vx,{className:"p-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Trades"}),(0,zt.jsx)("p",{className:"text-xl font-mono font-bold text-white",children:(null===g||void 0===g?void 0:g.total_trades)||0})]}),(0,zt.jsxs)(vx,{className:"p-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-xl font-mono font-bold text-teal-400",children:[((null===g||void 0===g?void 0:g.win_rate)||0).toFixed(1),"%"]})]})]}),(0,zt.jsxs)(vx,{title:"Bot Controls",icon:"\u2699\ufe0f",accent:"purple",children:[(0,zt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,zt.jsxs)(Tx,{onClick:()=>E(c.id,"full_auto"),variant:"full_auto"===c.mode?"cyan":"white",size:"sm",children:[(0,zt.jsx)(Wm,{size:16}),"Full Auto"]}),(0,zt.jsxs)(Tx,{onClick:()=>E(c.id,"semi_auto"),variant:"semi_auto"===c.mode?"cyan":"white",size:"sm",children:[(0,zt.jsx)(Rm,{size:16}),"Semi-Auto"]}),(0,zt.jsxs)(Tx,{onClick:()=>E(c.id,"paused"),variant:"paused"===c.mode?"danger":"white",size:"sm",children:[(0,zt.jsx)(Ym,{size:16}),"Pause"]}),(0,zt.jsx)("div",{className:"flex-1"}),(0,zt.jsxs)(Tx,{onClick:async()=>{if(c)try{const e=await fetch("".concat(bke,"/bot/").concat(c.id,"/analyze?symbol=BTC"),{method:"POST"});if(e.ok){const t=await e.json();t.signal&&f(e=>[t.signal,...e])}}catch(e){console.error("Error triggering analysis:",e)}},variant:"white",size:"sm",children:[(0,zt.jsx)(rye,{size:16}),"Analyze Now"]})]}),(0,zt.jsxs)("div",{className:"mt-4 p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Dm,{size:14,className:"text-amber-400"}),"Risk Settings"]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Max Trade Size"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:[null===(n=c.risk_settings)||void 0===n?void 0:n.max_trade_size_percent,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Daily Loss Limit"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:[null===(a=c.risk_settings)||void 0===a?void 0:a.daily_loss_limit_percent,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Stop Loss"}),(0,zt.jsxs)("p",{className:"text-red-400 font-mono",children:[null===(r=c.risk_settings)||void 0===r?void 0:r.stop_loss_percent,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Take Profit"}),(0,zt.jsxs)("p",{className:"text-green-400 font-mono",children:[null===(s=c.risk_settings)||void 0===s?void 0:s.take_profit_percent,"%"]})]})]})]})]}),"semi_auto"===c.mode&&(0,zt.jsx)(vx,{title:"Pending Signals",icon:"\ud83d\udce1",accent:"amber",children:p.length>0?(0,zt.jsx)("div",{className:"space-y-3",children:p.map(e=>{var t,n,a,r,s,i;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-white font-bold",children:e.symbol}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-semibold ".concat(T(e.signal)),children:null===(t=e.signal)||void 0===t?void 0:t.replace("_"," ").toUpperCase()}),(0,zt.jsxs)("span",{className:"text-slate-400 text-sm",children:[(100*e.confidence).toFixed(0),"% confidence"]})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("".concat(bke,"/bot/signal/").concat(e,"/approve"),{method:"POST"})).ok&&(f(t=>t.filter(t=>t.id!==e)),c&&S(c.id))}catch(t){console.error("Error approving signal:",t)}})(e.id),className:"p-2 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30",children:(0,zt.jsx)(p1,{size:18})}),(0,zt.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("".concat(bke,"/bot/signal/").concat(e,"/reject"),{method:"POST"})).ok&&f(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Error rejecting signal:",t)}})(e.id),className:"p-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30",children:(0,zt.jsx)(f1,{size:18})})]})]}),(0,zt.jsx)("div",{className:"space-y-1",children:null===(n=e.reasoning)||void 0===n?void 0:n.slice(0,3).map((e,t)=>(0,zt.jsxs)("p",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,zt.jsx)("span",{className:"text-teal-400",children:"\u2022"})," ",e]},t))}),"hold"!==e.action&&(0,zt.jsxs)("div",{className:"mt-3 flex gap-4 text-xs",children:[(0,zt.jsxs)("span",{className:"text-slate-500",children:["Action: ",(0,zt.jsx)("span",{className:"buy"===e.action?"text-green-400":"text-red-400",children:null===(a=e.action)||void 0===a?void 0:a.toUpperCase()})]}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["Qty: ",(0,zt.jsx)("span",{className:"text-white",children:null===(r=e.quantity)||void 0===r?void 0:r.toFixed(4)})]}),e.stop_loss&&(0,zt.jsxs)("span",{className:"text-slate-500",children:["SL: ",(0,zt.jsxs)("span",{className:"text-red-400",children:["$",null===(s=e.stop_loss)||void 0===s?void 0:s.toFixed(0)]})]}),e.take_profit&&(0,zt.jsxs)("span",{className:"text-slate-500",children:["TP: ",(0,zt.jsxs)("span",{className:"text-green-400",children:["$",null===(i=e.take_profit)||void 0===i?void 0:i.toFixed(0)]})]})]})]},e.id)})}):(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,zt.jsx)(rye,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,zt.jsx)("p",{children:"No pending signals"}),(0,zt.jsx)("p",{className:"text-sm mt-1",children:"Bot is analyzing the market..."})]})}),(0,zt.jsx)(vx,{title:"Recent Analysis",icon:"\ud83d\udcca",accent:"blue",children:(null===g||void 0===g||null===(i=g.recent_signals)||void 0===i?void 0:i.length)>0?(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full text-sm",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"text-left text-xs text-slate-500 border-b border-white/10",children:[(0,zt.jsx)("th",{className:"pb-2",children:"Symbol"}),(0,zt.jsx)("th",{className:"pb-2",children:"Signal"}),(0,zt.jsx)("th",{className:"pb-2",children:"Action"}),(0,zt.jsx)("th",{className:"pb-2",children:"Confidence"}),(0,zt.jsx)("th",{className:"pb-2",children:"Status"}),(0,zt.jsx)("th",{className:"pb-2",children:"Time"})]})}),(0,zt.jsx)("tbody",{children:g.recent_signals.map(e=>{var t;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-2 font-mono text-white",children:e.symbol}),(0,zt.jsx)("td",{className:"py-2",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(T(e.signal)),children:null===(t=e.signal)||void 0===t?void 0:t.replace("_"," ")})}),(0,zt.jsx)("td",{className:"py-2 capitalize text-slate-300",children:e.action}),(0,zt.jsxs)("td",{className:"py-2 font-mono text-teal-400",children:[(100*e.confidence).toFixed(0),"%"]}),(0,zt.jsx)("td",{className:"py-2",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("executed"===e.status?"bg-green-500/20 text-green-400":"rejected"===e.status?"bg-red-500/20 text-red-400":"bg-slate-500/20 text-slate-400"),children:e.status})}),(0,zt.jsx)("td",{className:"py-2 text-xs text-slate-500",children:new Date(e.created_at).toLocaleTimeString()})]},e.id)})})]})}):(0,zt.jsx)("p",{className:"text-center py-4 text-slate-400",children:"No recent signals"})})]}):(0,zt.jsx)(vx,{title:"Create Trading Bot",icon:"\ud83e\udd16",accent:"cyan",children:(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-sm text-slate-400 mb-2 block",children:"Trading Strategy"}),(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{id:"conservative",name:"Conservative",icon:Dm,desc:"Low risk, steady gains"},{id:"moderate",name:"Moderate",icon:Tm,desc:"Balanced approach"},{id:"aggressive",name:"Aggressive",icon:Wm,desc:"Higher risk/reward"}].map(e=>(0,zt.jsxs)("button",{onClick:()=>N(t=>m(m({},t),{},{strategy:e.id})),className:"p-4 rounded-xl border transition-all ".concat(k.strategy===e.id?"border-teal-500/50 bg-teal-500/10":"border-white/10 bg-white/5 hover:bg-white/10"),children:[(0,zt.jsx)(e.icon,{className:"mx-auto mb-2 ".concat(k.strategy===e.id?"text-teal-400":"text-slate-400"),size:24}),(0,zt.jsx)("p",{className:"font-semibold ".concat(k.strategy===e.id?"text-white":"text-slate-300"),children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.desc})]},e.id))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-sm text-slate-400 mb-2 block",children:"Trading Pairs"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:["BTC","ETH","SOL","XRP","ADA","DOGE","AVAX","LINK"].map(e=>(0,zt.jsx)("button",{onClick:()=>{N(t=>m(m({},t),{},{tradingPairs:t.tradingPairs.includes(e)?t.tradingPairs.filter(t=>t!==e):[...t.tradingPairs,e]}))},className:"px-3 py-1.5 rounded-lg text-sm font-mono transition-colors ".concat(k.tradingPairs.includes(e)?"bg-teal-500/30 text-teal-400 border border-teal-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]}),(0,zt.jsx)(Tx,{onClick:async()=>{if(l){w(!0);try{const e=new URLSearchParams({account_id:l,strategy:k.strategy});k.tradingPairs.forEach(t=>e.append("trading_pairs",t));const t=await fetch("".concat(bke,"/bot/create?").concat(e),{method:"POST"});if(t.ok){const e=await t.json();u(e),h(t=>[...t,e])}}catch(e){console.error("Error creating bot:",e)}finally{w(!1)}}else alert("Please create a playground account first")},variant:"cyan",size:"lg",className:"w-full",disabled:b,children:b?(0,zt.jsx)(Swe,{className:"animate-spin",size:18}):(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(qm,{size:18}),"Create Trading Bot"]})})]})})]})},kke=Nm("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),Nke=Nm("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),jke="https://tradehub-380.preview.emergentagent.com/api",Ske=()=>{var e,t;const[n,a]=(0,o.useState)({tutorials:[],lessons:[],scenarios:[]}),[r,s]=(0,o.useState)(null),[i,l]=(0,o.useState)("tutorials"),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0),p=(0,o.useCallback)(async()=>{try{const e=await fetch("".concat(jke,"/training/content"));if(e.ok){const t=await e.json();a(t)}}catch(e){console.error("Error fetching content:",e)}},[]),f=(0,o.useCallback)(async()=>{try{const e=await fetch("".concat(jke,"/training/progress"));if(e.ok){const t=await e.json();s(t)}}catch(e){console.error("Error fetching progress:",e)}finally{h(!1)}},[]);(0,o.useEffect)(()=>{p(),f()},[p,f]);const m=(e,t)=>{var n,a,s;return!!r&&("tutorial"===e?null===(n=r.completed_tutorials)||void 0===n?void 0:n.includes(t):"lesson"===e?null===(a=r.completed_lessons)||void 0===a?void 0:a.includes(t):"scenario"===e&&(null===(s=r.completed_scenarios)||void 0===s?void 0:s.some(e=>e.scenario_id===t)))},g=e=>{switch(e){case"beginner":return"text-green-400 bg-green-500/20";case"intermediate":return"text-amber-400 bg-amber-500/20";case"advanced":return"text-red-400 bg-red-500/20";case"expert":return"text-purple-400 bg-purple-500/20";default:return"text-slate-400 bg-slate-500/20"}},x=e=>{switch(e){case"basics":return kke;case"technical_analysis":return Tm;case"risk_management":return Am;case"psychology":return Wm;default:return Nke}};return d?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-teal-500 border-t-transparent rounded-full"})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"training-center",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(kke,{className:"text-teal-400"}),"Training Center"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Learn to trade like a pro"})]}),r&&(0,zt.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center",children:(0,zt.jsx)("span",{className:"text-white font-bold",children:r.current_level})}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Level"})]}),(0,zt.jsxs)("div",{className:"flex-1 min-w-[120px]",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"XP"}),(0,zt.jsx)("span",{className:"text-teal-400",children:r.total_xp})]}),(0,zt.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-teal-500 to-cyan-400",style:{width:"".concat(Math.min(100,r.total_xp%500/5),"%")}})})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)(Xm,{className:"text-amber-400 mx-auto",size:24}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[(null===(e=r.badges)||void 0===e?void 0:e.length)||0," Badges"]})]})]})]}),(null===r||void 0===r?void 0:r.skills)&&(0,zt.jsx)(vx,{title:"Your Skills",icon:"\ud83d\udcaa",accent:"cyan",children:(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(r.skills).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsxs)("div",{className:"relative w-16 h-16 mx-auto",children:[(0,zt.jsxs)("svg",{className:"w-full h-full -rotate-90",children:[(0,zt.jsx)("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4"}),(0,zt.jsx)("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"url(#skillGradient)",strokeWidth:"4",strokeDasharray:"".concat(1.76*n," 176"),strokeLinecap:"round"}),(0,zt.jsx)("defs",{children:(0,zt.jsxs)("linearGradient",{id:"skillGradient",children:[(0,zt.jsx)("stop",{offset:"0%",stopColor:"#14b8a6"}),(0,zt.jsx)("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),(0,zt.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-white font-mono text-sm",children:n})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mt-2 capitalize",children:t.replace("_"," ")})]},t)})})}),(0,zt.jsx)("div",{className:"flex gap-2 border-b border-white/10 pb-2",children:[{id:"tutorials",label:"Tutorials",icon:Gm},{id:"lessons",label:"Lessons",icon:Nke},{id:"scenarios",label:"Scenarios",icon:Am}].map(e=>(0,zt.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(i===e.id?"bg-teal-500/20 text-teal-400":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))}),(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,zt.jsxs)(an,{mode:"wait",children:["tutorials"===i&&n.tutorials.map((e,t)=>{var n;const a=m("tutorial",e.id),r=x(e.category);return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},children:(0,zt.jsxs)("div",{className:"p-4 rounded-xl border transition-all cursor-pointer ".concat(a?"bg-green-500/5 border-green-500/30":"bg-white/5 border-white/10 hover:border-teal-500/50"),onClick:()=>u({type:"tutorial",data:e}),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(a?"bg-green-500/20":"bg-teal-500/20"),children:a?(0,zt.jsx)(p1,{className:"text-green-400",size:20}):(0,zt.jsx)(r,{className:"text-teal-400",size:20})}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g(e.difficulty)),children:e.difficulty})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-amber-400",children:[(0,zt.jsx)(Fm,{size:14}),(0,zt.jsxs)("span",{className:"text-xs",children:[(null===(n=e.rewards)||void 0===n?void 0:n.xp)||100," XP"]})]})]}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-3",children:e.description}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[(0,zt.jsx)(wwe,{size:12}),e.estimated_time_minutes," min"]}),(0,zt.jsx)(Jm,{className:"text-slate-500",size:16})]})]})},e.id)}),"lessons"===i&&n.lessons.map((e,t)=>{var n;const a=m("lesson",e.id),r=x(e.category);return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,zt.jsxs)("div",{className:"p-4 rounded-xl border transition-all cursor-pointer ".concat(a?"bg-green-500/5 border-green-500/30":"bg-white/5 border-white/10 hover:border-teal-500/50"),onClick:()=>u({type:"lesson",data:e}),children:[(0,zt.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(a?"bg-green-500/20":"bg-blue-500/20"),children:a?(0,zt.jsx)(p1,{className:"text-green-400",size:20}):(0,zt.jsx)(r,{className:"text-blue-400",size:20})}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g(e.difficulty)),children:e.difficulty})]})}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-3",children:e.description}),(null===(n=e.key_concepts)||void 0===n?void 0:n.length)>0&&(0,zt.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.key_concepts.slice(0,3).map(e=>(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs bg-white/10 text-slate-300",children:e},e))}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[(0,zt.jsx)(wwe,{size:12}),e.estimated_time_minutes," min"]}),(0,zt.jsx)(Jm,{className:"text-slate-500",size:16})]})]})},e.id)}),"scenarios"===i&&n.scenarios.map((e,t)=>{var n;const a=m("scenario",e.id),s=null===r||void 0===r||null===(n=r.completed_scenarios)||void 0===n?void 0:n.find(t=>t.scenario_id===e.id);return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,zt.jsxs)("div",{className:"p-4 rounded-xl border transition-all cursor-pointer ".concat(a?"bg-green-500/5 border-green-500/30":"bg-white/5 border-white/10 hover:border-teal-500/50"),onClick:()=>u({type:"scenario",data:e}),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(a?"bg-green-500/20":"bg-purple-500/20"),children:a?(0,zt.jsx)(p1,{className:"text-green-400",size:20}):(0,zt.jsx)(Am,{className:"text-purple-400",size:20})}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g(e.difficulty)),children:e.difficulty})]}),s&&(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-amber-400",children:[(0,zt.jsx)(uye,{size:14}),(0,zt.jsxs)("span",{className:"text-xs",children:[s.score,"/100"]})]})]}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-3",children:e.description}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"text-slate-500",children:["Target: ",(0,zt.jsxs)("span",{className:"text-green-400",children:["+",e.target_profit_percent,"%"]})]}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["Max DD: ",(0,zt.jsxs)("span",{className:"text-red-400",children:[e.max_drawdown_percent,"%"]})]})]})]})},e.id)})]})}),(0,zt.jsx)(an,{children:c&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:()=>u(null),children:(0,zt.jsxs)(uu.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto rounded-2xl bg-slate-900 border border-white/10 p-6",onClick:e=>e.stopPropagation(),children:[(0,zt.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:c.data.title}),(0,zt.jsx)("p",{className:"text-slate-400 mb-4",children:c.data.description}),"lesson"===c.type&&c.data.content&&(0,zt.jsx)("div",{className:"prose prose-invert prose-sm max-w-none mb-4",children:(0,zt.jsx)("pre",{className:"whitespace-pre-wrap text-slate-300 text-sm bg-black/40 p-4 rounded-lg",children:c.data.content})}),"tutorial"===c.type&&c.data.steps&&(0,zt.jsx)("div",{className:"space-y-3 mb-4",children:c.data.steps.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsxs)("p",{className:"text-teal-400 text-sm font-semibold",children:["Step ",e.order,": ",e.title]}),(0,zt.jsx)("p",{className:"text-slate-300 text-sm mt-1",children:e.content})]},e.id))}),"scenario"===c.type&&(0,zt.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-black/40",children:[(0,zt.jsxs)("p",{className:"text-sm text-slate-400",children:["Starting Balance: ",(0,zt.jsxs)("span",{className:"text-white",children:["$",c.data.initial_balance]})]}),(0,zt.jsxs)("p",{className:"text-sm text-slate-400",children:["Time Limit: ",(0,zt.jsxs)("span",{className:"text-white",children:[c.data.time_limit_minutes," minutes"]})]})]}),(null===(t=c.data.hints)||void 0===t?void 0:t.length)>0&&(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,zt.jsx)("p",{className:"text-amber-400 text-sm font-semibold mb-2",children:"\ud83d\udca1 Hints"}),c.data.hints.map((e,t)=>(0,zt.jsxs)("p",{className:"text-slate-300 text-sm",children:["\u2022 ",e]},t))]})]}),(0,zt.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,zt.jsx)(Tx,{onClick:()=>u(null),variant:"white",size:"sm",children:"Close"}),!m(c.type,c.data.id)&&(0,zt.jsxs)(Tx,{onClick:async()=>{"tutorial"===c.type?await(async e=>{try{const t=await fetch("".concat(jke,"/training/tutorial/").concat(e,"/complete"),{method:"POST"});if(t.ok){const e=await t.json();return await f(),e}}catch(t){console.error("Error completing tutorial:",t)}})(c.data.id):"lesson"===c.type&&await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{(await fetch("".concat(jke,"/training/lesson/").concat(e,"/complete?quiz_score=").concat(t),{method:"POST"})).ok&&await f()}catch(n){console.error("Error completing lesson:",n)}}(c.data.id),u(null)},variant:"cyan",size:"sm",children:[(0,zt.jsx)(p1,{size:16}),"Mark Complete"]})]})]})})})]})},Cke="https://tradehub-380.preview.emergentagent.com/api",Eke=()=>{var e,t,n,a,r,s,i,l,c,u,d,h,p,f,m,g,x,v,y,b,w,k,N,j,S,C,E,T,I,A,_,O,R,P,M,D,F,L,z;const[B,U]=(0,o.useState)("BTC"),[W,V]=(0,o.useState)("24h"),[H,G]=(0,o.useState)(null),[q,K]=(0,o.useState)(!1),[X,Y]=(0,o.useState)(null),$=(0,o.useCallback)(async()=>{K(!0);try{const e=await fetch("".concat(Cke,"/ml/predict/comprehensive/").concat(B,"?horizon=").concat(W));if(e.ok){const t=await e.json();G(t)}}catch(e){console.error("Error fetching prediction:",e)}finally{K(!1)}},[B,W]);(0,o.useEffect)(()=>{$(),(async()=>{try{const e=await fetch("".concat(Cke,"/ml/accuracy"));if(e.ok){const t=await e.json();Y(t)}}catch(e){console.error("Error fetching accuracy:",e)}})()},[$]);return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"ml-predictions",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(Rm,{className:"text-purple-400"}),"AI Market Predictions"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"ML-powered price, volatility, and trend analysis"})]}),(0,zt.jsxs)(Tx,{onClick:$,variant:"white",size:"sm",disabled:q,children:[(0,zt.jsx)(Swe,{size:16,className:q?"animate-spin":""}),"Refresh"]})]}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex gap-2",children:["BTC","ETH","SOL","XRP","ADA","DOGE"].map(e=>(0,zt.jsx)("button",{onClick:()=>U(e),className:"px-3 py-1.5 rounded-lg text-sm font-mono transition-colors ".concat(B===e?"bg-purple-500/30 text-purple-400 border border-purple-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Time Horizon"}),(0,zt.jsx)("div",{className:"flex gap-2",children:[{id:"1h",label:"1 Hour"},{id:"4h",label:"4 Hours"},{id:"24h",label:"24 Hours"},{id:"1w",label:"1 Week"}].map(e=>(0,zt.jsx)("button",{onClick:()=>V(e.id),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat(W===e.id?"bg-blue-500/30 text-blue-400 border border-blue-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e.label},e.id))})]})]}),q?(0,zt.jsxs)("div",{className:"flex items-center justify-center py-16",children:[(0,zt.jsx)(Rm,{className:"animate-pulse text-purple-400",size:48}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Analyzing market data..."})]}):H?(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,zt.jsxs)(vx,{className:"lg:col-span-2 p-6",children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"text-3xl font-bold text-white",children:B}),(0,zt.jsxs)("p",{className:"text-slate-400",children:[W," Forecast"]})]}),(0,zt.jsxs)("div",{className:"px-4 py-2 rounded-xl border ".concat((e=>{switch(e){case"strong_buy":return"bg-green-500/30 text-green-400 border-green-500/50";case"buy":return"bg-green-500/20 text-green-400 border-green-500/30";case"strong_sell":return"bg-red-500/30 text-red-400 border-red-500/50";case"sell":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}})(H.recommendation)),children:[(0,zt.jsx)("p",{className:"text-xs opacity-70",children:"Recommendation"}),(0,zt.jsx)("p",{className:"text-lg font-bold capitalize",children:null===(e=H.recommendation)||void 0===e?void 0:e.replace("_"," ")})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Sentiment"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat((e=>{switch(e){case"bullish":return"text-green-400";case"bearish":return"text-red-400";default:return"text-slate-400"}})(H.overall_sentiment)),children:H.overall_sentiment})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Confidence"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-white",children:[(100*H.overall_confidence).toFixed(1),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Risk Level"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat((e=>{switch(e){case"low":return"text-green-400";case"medium":return"text-amber-400";case"high":return"text-red-400";default:return"text-slate-400"}})(H.risk_level)),children:H.risk_level})]})]}),H.entry_price&&(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10 mb-6",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Am,{size:16,className:"text-teal-400"}),"Suggested Trade Setup"]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Entry"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:["$",null===(t=H.entry_price)||void 0===t?void 0:t.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Stop Loss"}),(0,zt.jsxs)("p",{className:"text-red-400 font-mono",children:["$",null===(n=H.stop_loss)||void 0===n?void 0:n.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Take Profit"}),(0,zt.jsxs)("p",{className:"text-green-400 font-mono",children:["$",null===(a=H.take_profit)||void 0===a?void 0:a.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Position Size"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:[H.position_size_suggestion,"%"]})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-purple-400 mb-2 flex items-center gap-2",children:[(0,zt.jsx)(Rm,{size:16}),"AI Analysis"]}),(0,zt.jsx)("p",{className:"text-slate-300 text-sm",children:H.ai_analysis})]}),(null===(r=H.key_factors)||void 0===r?void 0:r.length)>0&&(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsx)("h4",{className:"text-xs text-slate-500 mb-2",children:"Key Factors"}),(0,zt.jsx)("div",{className:"space-y-1",children:H.key_factors.map((e,t)=>(0,zt.jsxs)("p",{className:"text-sm text-slate-400 flex items-center gap-2",children:[(0,zt.jsx)(Jm,{size:14,className:"text-teal-400"}),e]},t))})]}),(null===(s=H.risks)||void 0===s?void 0:s.length)>0&&(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsxs)("h4",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:[(0,zt.jsx)(y1,{size:12,className:"text-amber-400"}),"Risks"]}),(0,zt.jsx)("div",{className:"space-y-1",children:H.risks.map((e,t)=>(0,zt.jsxs)("p",{className:"text-sm text-amber-400/80 flex items-center gap-2",children:[(0,zt.jsx)("span",{children:"\u2022"})," ",e]},t))})]})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)(vx,{title:"Price Direction",icon:"\ud83d\udcc8",accent:"green",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsx)("span",{className:"text-2xl font-bold capitalize ".concat("up"===(null===(i=H.price_direction)||void 0===i?void 0:i.direction)?"text-green-400":"down"===(null===(l=H.price_direction)||void 0===l?void 0:l.direction)?"text-red-400":"text-slate-400"),children:"up"===(null===(c=H.price_direction)||void 0===c?void 0:c.direction)?(0,zt.jsx)(jm,{size:32}):"down"===(null===(u=H.price_direction)||void 0===u?void 0:u.direction)?(0,zt.jsx)(Mx,{size:32}):(0,zt.jsx)(rye,{size:32})}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Expected Change"}),(0,zt.jsxs)("p",{className:"text-xl font-mono ".concat((null===(d=H.price_direction)||void 0===d?void 0:d.predicted_change_percent)>0?"text-green-400":"text-red-400"),children:[(null===(h=H.price_direction)||void 0===h?void 0:h.predicted_change_percent)>0?"+":"",null===(p=H.price_direction)||void 0===p||null===(f=p.predicted_change_percent)||void 0===f?void 0:f.toFixed(1),"%"]})]})]}),(0,zt.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,zt.jsx)("div",{className:"h-full rounded-full ".concat("up"===(null===(m=H.price_direction)||void 0===m?void 0:m.direction)?"bg-green-500":"down"===(null===(g=H.price_direction)||void 0===g?void 0:g.direction)?"bg-red-500":"bg-slate-500"),style:{width:"".concat(100*((null===(x=H.price_direction)||void 0===x?void 0:x.confidence)||0),"%")}})}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[(100*((null===(v=H.price_direction)||void 0===v?void 0:v.confidence)||0)).toFixed(0),"% confidence"]})]}),(0,zt.jsxs)(vx,{title:"Volatility Forecast",icon:"\ud83d\udcca",accent:"amber",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)("span",{className:"text-lg font-bold capitalize ".concat("extreme"===(null===(y=H.volatility)||void 0===y?void 0:y.level)||"high"===(null===(b=H.volatility)||void 0===b?void 0:b.level)?"text-red-400":"moderate"===(null===(w=H.volatility)||void 0===w?void 0:w.level)?"text-amber-400":"text-green-400"),children:null===(k=H.volatility)||void 0===k||null===(N=k.level)||void 0===N?void 0:N.replace("_"," ")}),(0,zt.jsxs)("span",{className:"text-sm text-slate-400",children:["\xb1",null===(j=H.volatility)||void 0===j||null===(S=j.expected_range_percent)||void 0===S?void 0:S.toFixed(1),"%"]})]}),null===(C=H.volatility)||void 0===C||null===(E=C.factors)||void 0===E?void 0:E.map((e,t)=>(0,zt.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["\u2022 ",e]},t))]}),(0,zt.jsxs)(vx,{title:"Trend Analysis",icon:"\ud83d\udcc9",accent:"blue",className:"p-4",children:[(0,zt.jsx)("p",{className:"text-lg font-bold capitalize ".concat(null!==(T=H.trend)&&void 0!==T&&null!==(I=T.direction)&&void 0!==I&&I.includes("bullish")?"text-green-400":null!==(A=H.trend)&&void 0!==A&&null!==(_=A.direction)&&void 0!==_&&_.includes("bearish")?"text-red-400":"text-slate-400"),children:null===(O=H.trend)||void 0===O||null===(R=O.direction)||void 0===R?void 0:R.replace("_"," ")}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:"Strength:"}),(0,zt.jsx)("div",{className:"flex-1 h-2 rounded-full bg-white/10",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-blue-500",style:{width:"".concat(100*((null===(P=H.trend)||void 0===P?void 0:P.strength)||0),"%")}})}),(0,zt.jsxs)("span",{className:"text-xs text-slate-400",children:[(100*((null===(M=H.trend)||void 0===M?void 0:M.strength)||0)).toFixed(0),"%"]})]})]}),X&&(0,zt.jsx)(vx,{title:"Model Accuracy",icon:"\ud83c\udfaf",accent:"purple",className:"p-4",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Price Direction"}),(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(D=X.price_direction)||void 0===D?void 0:D.accuracy,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Volatility"}),(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(F=X.volatility)||void 0===F?void 0:F.accuracy,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Trend"}),(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(L=X.trend)||void 0===L?void 0:L.accuracy,"%"]})]}),(0,zt.jsxs)("div",{className:"pt-2 border-t border-white/10 flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400 font-semibold",children:"Overall"}),(0,zt.jsxs)("span",{className:"text-teal-400 font-mono font-bold",children:[null===(z=X.overall)||void 0===z?void 0:z.accuracy,"%"]})]})]})})]})]}):null,(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20 text-sm text-amber-400/80",children:[(0,zt.jsx)(y1,{size:16,className:"inline mr-2"}),(0,zt.jsx)("strong",{children:"Disclaimer:"})," AI predictions are for informational purposes only and should not be considered financial advice. Past performance does not guarantee future results. Always do your own research."]})]})},Tke="https://tradehub-380.preview.emergentagent.com/api",Ike=()=>{var e;const[t,n]=(0,o.useState)([]),[a,r]=(0,o.useState)(null),[s,i]=(0,o.useState)([]),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)("active"),[f,m]=(0,o.useState)(!0),[g,x]=(0,o.useState)(!1),v=(0,o.useCallback)(async()=>{m(!0);try{const e=await fetch("".concat(Tke,"/competition/active"));if(e.ok){const t=await e.json();n(t.competitions||[])}}catch(e){console.error("Error fetching competitions:",e)}finally{m(!1)}},[]),y=async e=>{try{const t=await fetch("".concat(Tke,"/competition/").concat(e,"/leaderboard"));if(t.ok){const e=await t.json();i(e.leaderboard||[])}}catch(t){console.error("Error fetching leaderboard:",t)}},b=async e=>{try{await fetch("".concat(Tke,"/competition/create/themed?theme=").concat(e),{method:"POST"}),await v()}catch(t){console.error("Error:",t)}};(0,o.useEffect)(()=>{v(),(async()=>{try{const e=await fetch("".concat(Tke,"/competition/user/stats"));if(e.ok){const t=await e.json();c(t)}}catch(e){console.error("Error fetching user stats:",e)}})(),(async()=>{try{const e=await fetch("".concat(Tke,"/competition/global/leaderboard?limit=20"));if(e.ok){const t=await e.json();d(t.leaderboard||[])}}catch(e){console.error("Error:",e)}})()},[v]),(0,o.useEffect)(()=>{a&&y(a.id)},[null===a||void 0===a?void 0:a.id]);const w=e=>{switch(e){case"daily":return(0,zt.jsx)(Nwe,{className:"text-orange-400",size:20});case"weekly":return(0,zt.jsx)(Xm,{className:"text-amber-400",size:20});case"themed":return(0,zt.jsx)(Fm,{className:"text-purple-400",size:20});default:return(0,zt.jsx)(uye,{className:"text-teal-400",size:20})}},k=e=>{switch(e){case"diamond":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/50";case"platinum":return"bg-slate-300/20 text-slate-300 border-slate-300/50";case"gold":return"bg-amber-500/20 text-amber-400 border-amber-500/50";case"silver":return"bg-slate-400/20 text-slate-400 border-slate-400/50";default:return"bg-orange-700/20 text-orange-400 border-orange-700/50"}},N=e=>1===e?(0,zt.jsx)(oke,{className:"text-amber-400",size:20}):2===e?(0,zt.jsx)(lke,{className:"text-slate-300",size:20}):3===e?(0,zt.jsx)(lke,{className:"text-orange-400",size:20}):(0,zt.jsx)("span",{className:"text-slate-400 font-mono",children:e}),j=e=>{const t=new Date(e)-new Date;if(t<=0)return"Ended";const n=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4);if(n>24){const e=Math.floor(n/24);return"".concat(e,"d ").concat(n%24,"h")}return"".concat(n,"h ").concat(a,"m")};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"trading-competitions",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(Xm,{className:"text-amber-400"}),"Trading Competitions"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Compete with traders worldwide"})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)(Tx,{onClick:async()=>{try{await fetch("".concat(Tke,"/competition/create/daily"),{method:"POST"}),await v()}catch(e){console.error("Error:",e)}},variant:"white",size:"sm",children:[(0,zt.jsx)(Nwe,{size:16}),"New Daily"]}),(0,zt.jsxs)(Tx,{onClick:()=>b("moon_mission"),variant:"cyan",size:"sm",children:[(0,zt.jsx)(Wm,{size:16}),"Moon Mission"]})]})]}),l&&(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"px-3 py-1.5 rounded-lg border ".concat(k(l.tier)),children:(0,zt.jsx)("span",{className:"text-xs uppercase font-bold",children:l.tier})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"text-white font-semibold",children:[l.tier_points," Points"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-400",children:[l.competitions_won," wins \u2022 ",l.total_podium_finishes," podiums"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:l.competitions_entered}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Entered"})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:(null===(e=l.badges_earned)||void 0===e?void 0:e.length)||0}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Badges"})]})]})]})}),(0,zt.jsx)("div",{className:"flex gap-2 border-b border-white/10 pb-2",children:[{id:"active",label:"Active Competitions",icon:Gm},{id:"global",label:"Global Leaderboard",icon:Xm}].map(e=>(0,zt.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(h===e.id?"bg-teal-500/20 text-teal-400":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))}),"active"===h?(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,zt.jsx)("div",{className:"lg:col-span-2 space-y-4",children:f?(0,zt.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,zt.jsx)(Swe,{className:"animate-spin text-teal-400",size:32})}):t.length>0?t.map(e=>{var t,n;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl border transition-all cursor-pointer ".concat((null===a||void 0===a?void 0:a.id)===e.id?"bg-teal-500/10 border-teal-500/50":"bg-white/5 border-white/10 hover:border-white/20"),onClick:()=>r(e),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[w(e.type),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"text-white font-semibold",children:e.name}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:e.description})]})]}),(0,zt.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat("active"===e.status?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"),children:e.status})]}),(0,zt.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,zt.jsxs)("span",{className:"text-slate-400 flex items-center gap-1",children:[(0,zt.jsx)(wye,{size:14}),e.participant_count," traders"]}),(0,zt.jsxs)("span",{className:"text-slate-400 flex items-center gap-1",children:[(0,zt.jsx)(wwe,{size:14}),j(e.end_time)]}),(0,zt.jsxs)("span",{className:"text-green-400 flex items-center gap-1",children:["$",null===(t=e.starting_balance)||void 0===t?void 0:t.toLocaleString()]})]}),(0,zt.jsxs)(Tx,{onClick:t=>{t.stopPropagation(),(async e=>{x(!0);try{(await fetch("".concat(Tke,"/competition/").concat(e,"/join"),{method:"POST"})).ok&&(await v(),await y(e))}catch(t){console.error("Error joining:",t)}finally{x(!1)}})(e.id)},variant:"cyan",size:"sm",disabled:g,children:[g?(0,zt.jsx)(Swe,{size:14,className:"animate-spin"}):(0,zt.jsx)(Gm,{size:14}),"Join"]})]}),(null===(n=e.prizes)||void 0===n?void 0:n.length)>0&&(0,zt.jsx)("div",{className:"mt-3 pt-3 border-t border-white/10 flex gap-3",children:e.prizes.slice(0,3).map((e,t)=>(0,zt.jsxs)("span",{className:"text-xs text-slate-400",children:[0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":"\ud83e\udd49"," ",e.xp_reward," XP"]},t))})]},e.id)}):(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,zt.jsx)(Xm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No active competitions"}),(0,zt.jsx)("p",{className:"text-sm mt-1",children:"Create a new challenge to get started!"})]})}),(0,zt.jsx)(vx,{title:"Leaderboard",icon:"\ud83c\udfc6",accent:"amber",children:a?(0,zt.jsx)("div",{className:"space-y-2",children:s.length>0?s.slice(0,10).map((e,t)=>{var n;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg ".concat(t<3?"bg-gradient-to-r from-amber-500/10 to-transparent":"bg-white/5"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 flex justify-center",children:N(e.rank)}),(0,zt.jsx)("span",{className:"text-white text-sm font-medium",children:e.username})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-sm font-mono ".concat(e.pnl_percent>=0?"text-green-400":"text-red-400"),children:[e.pnl_percent>=0?"+":"",null===(n=e.pnl_percent)||void 0===n?void 0:n.toFixed(2),"%"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.total_trades," trades"]})]})]},e.user_id)}):(0,zt.jsx)("p",{className:"text-center py-8 text-slate-400 text-sm",children:"No entries yet"})}):(0,zt.jsx)("p",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a competition"})})]}):(0,zt.jsx)(vx,{title:"Global Rankings",icon:"\ud83c\udf0d",accent:"purple",children:(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"text-left text-xs text-slate-500 border-b border-white/10",children:[(0,zt.jsx)("th",{className:"pb-3 w-12",children:"Rank"}),(0,zt.jsx)("th",{className:"pb-3",children:"Trader"}),(0,zt.jsx)("th",{className:"pb-3 text-center",children:"Tier"}),(0,zt.jsx)("th",{className:"pb-3 text-right",children:"Points"}),(0,zt.jsx)("th",{className:"pb-3 text-right",children:"Wins"}),(0,zt.jsx)("th",{className:"pb-3 text-right",children:"Podiums"})]})}),(0,zt.jsx)("tbody",{children:u.map(e=>{var t,n;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-3",children:(0,zt.jsx)("div",{className:"flex justify-center",children:N(e.rank)})}),(0,zt.jsxs)("td",{className:"py-3 text-white font-medium",children:["Trader #",null===(t=e.user_id)||void 0===t?void 0:t.slice(-6)]}),(0,zt.jsx)("td",{className:"py-3 text-center",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs border ".concat(k(e.tier)),children:null===(n=e.tier)||void 0===n?void 0:n.toUpperCase()})}),(0,zt.jsx)("td",{className:"py-3 text-right font-mono text-teal-400",children:e.tier_points}),(0,zt.jsx)("td",{className:"py-3 text-right font-mono text-amber-400",children:e.competitions_won}),(0,zt.jsx)("td",{className:"py-3 text-right font-mono text-slate-400",children:e.podium_finishes})]},e.user_id)})})]})})}),(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{theme:"bear_market",icon:"\ud83d\udc3b",name:"Bear Market Survival",desc:"Lowest drawdown wins"},{theme:"moon_mission",icon:"\ud83d\ude80",name:"Moon Mission",desc:"Maximum returns"},{theme:"steady_hands",icon:"\u270b",name:"Steady Hands",desc:"Best Sharpe ratio"},{theme:"speed_trader",icon:"\u26a1",name:"Speed Trader",desc:"4-hour blitz"}].map(e=>(0,zt.jsxs)("button",{onClick:()=>b(e.theme),className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-purple-500/50 transition-all text-left group",children:[(0,zt.jsx)("span",{className:"text-2xl",children:e.icon}),(0,zt.jsx)("h4",{className:"text-white font-semibold mt-2 group-hover:text-purple-400 transition-colors",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.desc})]},e.theme))})]})},Ake=()=>{const[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)("all"),[i,l]=(0,o.useState)(!0),[c,u]=(0,o.useState)(!0),[d,h]=(0,o.useState)(null),p=(0,o.useCallback)(async()=>{l(!0);try{const e=[{title:"Breaking: Bitcoin ETF Sees Record Inflows",symbol:"BTC",sentiment:"bullish",impact:"high",category:"ETF"},{title:"Federal Reserve Signals Potential Rate Pause",symbol:"MARKET",sentiment:"bullish",impact:"high",category:"Macro"},{title:"Ethereum Staking Reaches New Milestone",symbol:"ETH",sentiment:"bullish",impact:"medium",category:"Network"},{title:"SEC Announces New Crypto Compliance Guidelines",symbol:"CRYPTO",sentiment:"bearish",impact:"high",category:"Regulatory"},{title:"Major Tech Company Adds Bitcoin to Balance Sheet",symbol:"BTC",sentiment:"bullish",impact:"high",category:"Adoption"},{title:"Solana Network Processes Record Transactions",symbol:"SOL",sentiment:"bullish",impact:"medium",category:"Network"},{title:"Crypto Exchange Reports Quarterly Earnings Beat",symbol:"MARKET",sentiment:"bullish",impact:"medium",category:"Earnings"},{title:"DeFi Protocol Suffers Flash Loan Attack",symbol:"ETH",sentiment:"bearish",impact:"medium",category:"Security"},{title:"Central Bank Digital Currency Pilot Launches",symbol:"MARKET",sentiment:"neutral",impact:"medium",category:"CBDC"},{title:"Mining Difficulty Hits All-Time High",symbol:"BTC",sentiment:"bullish",impact:"low",category:"Mining"},{title:"Layer 2 Solutions See Surge in Adoption",symbol:"ETH",sentiment:"bullish",impact:"medium",category:"Technology"},{title:"Whale Alert: Large BTC Transfer to Exchange",symbol:"BTC",sentiment:"bearish",impact:"medium",category:"Whale"}].map((e,t)=>m(m({id:"news-".concat(Date.now(),"-").concat(t)},e),{},{timestamp:new Date(Date.now()-1e3*t*60*Math.floor(60*Math.random())).toISOString(),source:"Benzinga",url:"#",summary:"This is a developing story affecting ".concat(e.symbol," markets. Stay tuned for updates.")}));t(e);const r=e.filter(e=>"high"===e.impact&&c);if(r.length>n.length){const e=r.slice(0,3);a(e)}h(new Date)}catch(e){console.error("Error fetching news:",e)}finally{l(!1)}},[c,n.length]);(0,o.useEffect)(()=>{p();const e=setInterval(p,3e4);return()=>clearInterval(e)},[p]);const f=e=>{switch(e){case"bullish":return"text-green-400 bg-green-500/20 border-green-500/30";case"bearish":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-slate-400 bg-slate-500/20 border-slate-500/30"}},g=e=>{switch(e){case"high":return"text-red-400";case"medium":return"text-amber-400";default:return"text-slate-400"}},x="all"===r?e:e.filter(e=>e.sentiment===r||e.impact===r),v=e=>{const t=new Date(e),n=new Date-t;return n<6e4?"Just now":n<36e5?"".concat(Math.floor(n/6e4),"m ago"):n<864e5?"".concat(Math.floor(n/36e5),"h ago"):t.toLocaleDateString()};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"benzinga-news",children:[(0,zt.jsx)(an,{children:n.length>0&&c&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-2",children:n.map(e=>(0,zt.jsx)(uu.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},className:"p-4 rounded-xl border backdrop-blur-xl ".concat("bullish"===e.sentiment?"bg-green-500/10 border-green-500/30":"bearish"===e.sentiment?"bg-red-500/10 border-red-500/30":"bg-amber-500/10 border-amber-500/30"),children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-black/30",children:(0,zt.jsx)(wx,{className:"".concat("bullish"===e.sentiment?"text-green-400":"bearish"===e.sentiment?"text-red-400":"text-amber-400"," animate-pulse"),size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-red-500/30 text-red-400 font-semibold",children:"BREAKING"}),(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:e.symbol})]}),(0,zt.jsx)("h4",{className:"text-white font-semibold",children:e.title})]})]}),(0,zt.jsx)("button",{onClick:()=>{return t=e.id,void a(e=>e.filter(e=>e.id!==t));var t},className:"text-slate-400 hover:text-white transition-colors",children:"\xd7"})]})},e.id))})}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(jwe,{className:"text-orange-400"}),"Market News & Alerts"]}),(0,zt.jsxs)("p",{className:"text-slate-400 text-sm flex items-center gap-2",children:["Real-time news powered by Benzinga",(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-amber-500/20 text-amber-400",children:"PLACEHOLDER"})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("button",{onClick:()=>u(!c),className:"p-2 rounded-lg transition-colors ".concat(c?"bg-teal-500/20 text-teal-400":"bg-white/5 text-slate-400"),title:c?"Disable alerts":"Enable alerts",children:(0,zt.jsx)(mwe,{size:20})}),(0,zt.jsxs)(Tx,{onClick:p,variant:"white",size:"sm",disabled:i,children:[(0,zt.jsx)(Swe,{size:16,className:i?"animate-spin":""}),"Refresh"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-green-500/10 to-transparent border border-green-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(jm,{className:"text-green-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-green-400",children:"Bullish"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"bullish"===e.sentiment).length})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-red-500/10 to-transparent border border-red-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(Mx,{className:"text-red-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-red-400",children:"Bearish"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"bearish"===e.sentiment).length})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-transparent border border-amber-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(y1,{className:"text-amber-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-amber-400",children:"High Impact"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"high"===e.impact).length})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-slate-500/10 to-transparent border border-slate-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(wwe,{className:"text-slate-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:"Last Update"})]}),(0,zt.jsx)("p",{className:"text-lg font-mono text-white",children:d?v(d.toISOString()):"-"})]})]}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,zt.jsx)("button",{onClick:()=>s("all"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("all"===r?"bg-teal-500/30 text-teal-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:"All"}),(0,zt.jsxs)("button",{onClick:()=>s("bullish"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("bullish"===r?"bg-green-500/30 text-green-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(jm,{size:14,className:"inline mr-1"})," Bullish"]}),(0,zt.jsxs)("button",{onClick:()=>s("bearish"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("bearish"===r?"bg-red-500/30 text-red-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(Mx,{size:14,className:"inline mr-1"})," Bearish"]}),(0,zt.jsxs)("button",{onClick:()=>s("high"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("high"===r?"bg-amber-500/30 text-amber-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(Wm,{size:14,className:"inline mr-1"})," High Impact"]})]}),(0,zt.jsx)("div",{className:"space-y-3",children:i?(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)(Swe,{className:"animate-spin text-orange-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading news..."})]}):x.length>0?x.map((e,t)=>{return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all",children:(0,zt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat((n=e.category,{ETF:"bg-blue-500/20 text-blue-400",Macro:"bg-purple-500/20 text-purple-400",Regulatory:"bg-red-500/20 text-red-400",Network:"bg-teal-500/20 text-teal-400",Adoption:"bg-green-500/20 text-green-400",Security:"bg-orange-500/20 text-orange-400",CBDC:"bg-cyan-500/20 text-cyan-400",Mining:"bg-amber-500/20 text-amber-400",Technology:"bg-indigo-500/20 text-indigo-400",Whale:"bg-pink-500/20 text-pink-400",Earnings:"bg-emerald-500/20 text-emerald-400"}[n]||"bg-slate-500/20 text-slate-400")),children:e.category}),(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded text-xs border ".concat(f(e.sentiment)),children:["bullish"===e.sentiment&&(0,zt.jsx)(jm,{size:12,className:"inline mr-1"}),"bearish"===e.sentiment&&(0,zt.jsx)(Mx,{size:12,className:"inline mr-1"}),e.sentiment]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:e.symbol})]}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1 hover:text-teal-400 cursor-pointer transition-colors",children:e.title}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:e.summary}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(jwe,{size:12}),e.source]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(wwe,{size:12}),v(e.timestamp)]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1 ".concat(g(e.impact)),children:[(0,zt.jsx)(y1,{size:12}),e.impact," impact"]})]})]}),(0,zt.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:(0,zt.jsx)(Cwe,{size:16})})]})},e.id);var n}):(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,zt.jsx)(jwe,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No news matching filters"})]})}),(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20",children:(0,zt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zt.jsx)(y1,{className:"text-amber-400 shrink-0",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-amber-400 font-semibold",children:"Benzinga API Integration Pending"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"This component displays simulated news data. To enable real Benzinga news feeds, please provide your Benzinga API key. The integration structure is ready for immediate activation once credentials are configured."})]})]})})]})},_ke=Nm("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Oke=()=>{const[e,t]=(0,o.useState)({binance:{apiKey:"",secretKey:"",connected:!1,testnet:!0},coinbase:{apiKey:"",secretKey:"",connected:!1,testnet:!0},kraken:{apiKey:"",secretKey:"",connected:!1,testnet:!0}}),[n,a]=(0,o.useState)({}),[r,s]=(0,o.useState)({}),[i,l]=(0,o.useState)({}),[c,u]=(0,o.useState)("binance"),[d,h]=(0,o.useState)(!0),p=[{id:"binance",name:"Binance",logo:"\ud83d\udfe1",color:"#F0B90B",description:"Largest crypto exchange by volume",docsUrl:"https://binance-docs.github.io/apidocs/",keyTypes:[{id:"hmac",name:"HMAC (System Generated)",recommended:!0},{id:"ed25519",name:"Ed25519 (Self Generated)",recommended:!1}]},{id:"coinbase",name:"Coinbase",logo:"\ud83d\udd35",color:"#0052FF",description:"US-based regulated exchange",docsUrl:"https://docs.cdp.coinbase.com/",keyTypes:[{id:"api",name:"API Key + Secret",recommended:!0}]},{id:"kraken",name:"Kraken",logo:"\ud83d\udfe3",color:"#5741D9",description:"Security-focused exchange",docsUrl:"https://docs.kraken.com/rest/",keyTypes:[{id:"api",name:"API Key + Private Key",recommended:!0}]}],f=(e,n,a)=>{t(t=>m(m({},t),{},{[e]:m(m({},t[e]),{},{[n]:a})}))};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"exchange-settings",children:[(0,zt.jsx)("div",{className:"flex items-center justify-between",children:(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(pye,{className:"text-amber-400"}),"Exchange API Keys"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"Connect your exchange accounts for live trading"})]})}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-transparent border border-amber-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-amber-500/20",children:(0,zt.jsx)(_ke,{className:"text-amber-400",size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"text-white font-semibold",children:"Network Mode"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:d?"Using Testnet (Paper Trading)":"Using Mainnet (Real Funds)"})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-sm ".concat(d?"text-slate-500":"text-white"),children:"Mainnet"}),(0,zt.jsx)("button",{onClick:()=>h(!d),className:"relative w-14 h-7 rounded-full transition-colors ".concat(d?"bg-teal-500":"bg-red-500"),children:(0,zt.jsx)(uu.div,{className:"absolute top-1 w-5 h-5 rounded-full bg-white shadow-md",animate:{left:d?"4px":"32px"},transition:{type:"spring",stiffness:500,damping:30}})}),(0,zt.jsx)("span",{className:"text-sm ".concat(d?"text-white":"text-slate-500"),children:"Testnet"})]})]}),!d&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-2",children:[(0,zt.jsx)(y1,{className:"text-red-400 shrink-0",size:18}),(0,zt.jsxs)("p",{className:"text-sm text-red-300",children:[(0,zt.jsx)("strong",{children:"Warning:"})," Mainnet mode uses real funds. All trades will execute on live markets. Make sure you understand the risks before trading."]})]})]}),(0,zt.jsx)("div",{className:"space-y-4",children:p.map(t=>{const o=e[t.id],h=c===t.id;return(0,zt.jsxs)(uu.div,{className:"rounded-xl border overflow-hidden",style:{borderColor:o.connected?"".concat(t.color,"40"):"rgba(255,255,255,0.1)",backgroundColor:"rgba(255,255,255,0.02)"},children:[(0,zt.jsxs)("button",{onClick:()=>u(h?null:t.id),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{backgroundColor:"".concat(t.color,"20")},children:t.logo}),(0,zt.jsxs)("div",{className:"text-left",children:[(0,zt.jsxs)("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[t.name,o.connected&&(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-green-500/20 text-green-400",children:[(0,zt.jsx)(Rx,{size:12})," Connected"]})]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm",children:t.description})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"".concat(t.color,"20"),color:t.color},children:d?"TESTNET":"MAINNET"}),h?(0,zt.jsx)(aye,{className:"text-slate-400",size:20}):(0,zt.jsx)(nye,{className:"text-slate-400",size:20})]})]}),(0,zt.jsx)(an,{children:h&&(0,zt.jsx)(uu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,zt.jsxs)("div",{className:"p-4 pt-0 space-y-4 border-t border-white/5",children:[t.keyTypes.length>1&&(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Key Type"}),(0,zt.jsx)("div",{className:"flex gap-2",children:t.keyTypes.map(e=>(0,zt.jsxs)("button",{className:"flex-1 p-3 rounded-lg border text-left transition-colors ".concat(e.recommended?"bg-teal-500/10 border-teal-500/30 text-teal-400":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.recommended&&(0,zt.jsx)("div",{className:"text-xs text-teal-400/70 mt-1",children:"Recommended"})]},e.id))})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("label",{className:"text-xs text-slate-400 uppercase tracking-wider flex items-center justify-between",children:["API Key",(0,zt.jsxs)("a",{href:t.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-teal-400 hover:text-teal-300 flex items-center gap-1",children:["Get API Key ",(0,zt.jsx)(Cwe,{size:12})]})]}),(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("input",{type:"text",value:o.apiKey,onChange:e=>f(t.id,"apiKey",e.target.value),placeholder:"Enter your API key",className:"w-full p-3 pr-20 rounded-lg bg-black/30 border border-white/10 text-white font-mono text-sm focus:border-teal-500/50 focus:outline-none"}),(0,zt.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:o.apiKey&&(0,zt.jsx)("button",{onClick:()=>{return e=o.apiKey,void navigator.clipboard.writeText(e);var e},className:"p-1.5 rounded hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:"Copy",children:(0,zt.jsx)(kye,{size:14})})})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Secret Key"}),(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("input",{type:n[t.id]?"text":"password",value:o.secretKey,onChange:e=>f(t.id,"secretKey",e.target.value),placeholder:"Enter your secret key",className:"w-full p-3 pr-20 rounded-lg bg-black/30 border border-white/10 text-white font-mono text-sm focus:border-teal-500/50 focus:outline-none"}),(0,zt.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:(0,zt.jsx)("button",{onClick:()=>{return e=t.id,void a(t=>m(m({},t),{},{[e]:!t[e]}));var e},className:"p-1.5 rounded hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:n[t.id]?"Hide":"Show",children:n[t.id]?(0,zt.jsx)(Xwe,{size:14}):(0,zt.jsx)(zm,{size:14})})})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,zt.jsx)(Tx,{onClick:()=>(async t=>{s(e=>m(m({},e),{},{[t]:!0}));try{await new Promise(e=>setTimeout(e,2e3));const n=e[t];n.apiKey&&n.secretKey?f(t,"connected",!0):f(t,"connected",!1)}catch(n){console.error("Connection test failed:",n),f(t,"connected",!1)}finally{s(e=>m(m({},e),{},{[t]:!1}))}})(t.id),variant:"white",size:"sm",disabled:r[t.id]||!o.apiKey||!o.secretKey,children:r[t.id]?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(Swe,{size:14,className:"animate-spin"})," Testing..."]}):(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(Rx,{size:14})," Test Connection"]})}),(0,zt.jsx)(Tx,{onClick:()=>(async e=>{l(t=>m(m({},t),{},{[e]:!0}));try{await new Promise(e=>setTimeout(e,1e3))}catch(t){console.error("Failed to save credentials:",t)}finally{l(t=>m(m({},t),{},{[e]:!1}))}})(t.id),variant:"teal",size:"sm",disabled:i[t.id]||!o.apiKey||!o.secretKey,children:i[t.id]?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(Swe,{size:14,className:"animate-spin"})," Saving..."]}):(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(Vm,{size:14})," Save Securely"]})}),(o.apiKey||o.secretKey)&&(0,zt.jsx)("button",{onClick:()=>{return e=t.id,void(window.confirm("Are you sure you want to remove ".concat(e," credentials?"))&&(f(e,"apiKey",""),f(e,"secretKey",""),f(e,"connected",!1)));var e},className:"p-2 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",title:"Remove credentials",children:(0,zt.jsx)(ywe,{size:16})})]}),o.connected&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-green-500/10 border border-green-500/30 flex items-center gap-2",children:[(0,zt.jsx)(p1,{className:"text-green-400",size:18}),(0,zt.jsxs)("span",{className:"text-green-400 text-sm font-medium",children:["Successfully connected to ",t.name," ",d?"Testnet":"Mainnet"]})]})]})})})]},t.id)})}),(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-teal-500/10 border border-teal-500/20",children:(0,zt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zt.jsx)(Dm,{className:"text-teal-400 shrink-0 mt-0.5",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-teal-400 font-semibold",children:"Security Information"}),(0,zt.jsxs)("ul",{className:"text-sm text-slate-400 mt-2 space-y-1 list-disc list-inside",children:[(0,zt.jsx)("li",{children:"API keys are encrypted and stored securely on your device"}),(0,zt.jsx)("li",{children:"We never transmit or store your secret keys on external servers"}),(0,zt.jsx)("li",{children:"For maximum security, enable IP whitelist and withdrawal restrictions on your exchange"}),(0,zt.jsx)("li",{children:'Use "Read Only" or "Trade Only" permissions when possible'})]})]})]})}),(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-4",children:p.map(e=>(0,zt.jsxs)("a",{href:e.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-colors text-center group",children:[(0,zt.jsx)("div",{className:"text-2xl mb-2",children:e.logo}),(0,zt.jsxs)("div",{className:"text-white font-medium text-sm",children:[e.name," Docs"]}),(0,zt.jsxs)("div",{className:"text-slate-500 text-xs flex items-center justify-center gap-1 mt-1 group-hover:text-teal-400 transition-colors",children:["View Documentation ",(0,zt.jsx)(Cwe,{size:10})]})]},e.id))})]})},Rke=Nm("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Pke=Nm("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Mke=Nm("radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Dke="https://tradehub-380.preview.emergentagent.com".replace("https://","wss://").replace("http://","ws://"),Fke=e=>{let{tournamentId:t,onClose:n}=e;const[a,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)(0),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!1),g=(0,o.useRef)(null),x=(0,o.useRef)(null);(0,o.useEffect)(()=>(v(),()=>{g.current&&g.current.close()}),[t]),(0,o.useEffect)(()=>{x.current&&!f&&x.current.scrollIntoView({behavior:"smooth"})},[l,f]);const v=()=>{try{const e=new WebSocket("".concat(Dke,"/ws/tournament/").concat(t));e.onopen=()=>{r(!0),console.log("Spectator WebSocket connected")},e.onmessage=e=>{const t=JSON.parse(e.data);y(t)},e.onclose=()=>{r(!1),setTimeout(v,3e3)},e.onerror=e=>{console.error("WebSocket error:",e)},g.current=e}catch(e){console.error("WebSocket connection error:",e)}},y=e=>{switch(e.type){case"welcome":i(e.spectators),e.recent_trades&&c(e.recent_trades);break;case"spectator_update":i(e.count);break;case"trade":f||(c(t=>[...t.slice(-49),e.data]),h&&b(e.data.side))}},b=e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),a=t.createGain();n.connect(a),a.connect(t.destination),n.frequency.value="buy"===e?800:400,n.type="sine",a.gain.value=.1,n.start(),n.stop(t.currentTime+.1)},w=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-[#050505]/95 backdrop-blur-xl overflow-hidden",children:[(0,zt.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-black/80 backdrop-blur-xl border-b border-white/5 z-10",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/20 border border-red-500/30",children:[(0,zt.jsx)(Mke,{size:14,className:"text-red-400 animate-pulse"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-red-400",children:"LIVE"})]}),(0,zt.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(zm,{size:20,className:"text-teal-400"}),"Spectator Mode"]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,zt.jsx)(wye,{size:16}),(0,zt.jsxs)("span",{className:"text-sm",children:[s," watching"]})]}),(0,zt.jsx)("button",{onClick:()=>m(!f),className:"p-2 rounded-lg transition-colors ".concat(f?"bg-amber-500/20 text-amber-400":"bg-white/5 text-white"),children:f?(0,zt.jsx)(Gm,{size:18}):(0,zt.jsx)(Ym,{size:18})}),(0,zt.jsx)("button",{onClick:()=>p(!h),className:"p-2 rounded-lg transition-colors ".concat(h?"bg-teal-500/20 text-teal-400":"bg-white/5 text-slate-400"),children:h?(0,zt.jsx)(mwe,{size:18}):(0,zt.jsx)(gwe,{size:18})}),(0,zt.jsx)("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-white/10 text-white text-sm hover:bg-white/20 transition-colors",children:"Exit"})]})]})}),(0,zt.jsxs)("div",{className:"pt-16 h-full overflow-hidden flex",children:[(0,zt.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,zt.jsxs)(vx,{title:"Live Trades",icon:(0,zt.jsx)(rye,{className:"text-teal-400"}),accent:"teal",className:"h-full flex flex-col",children:[(0,zt.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:[(0,zt.jsx)(an,{initial:!1,children:l.map((e,t)=>(0,zt.jsx)(uu.div,{initial:{opacity:0,x:-50,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50},transition:{type:"spring",stiffness:500,damping:30},className:"p-3 rounded-lg border ".concat("buy"===e.side?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"),children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("buy"===e.side?"bg-emerald-500/20":"bg-red-500/20"),children:"buy"===e.side?(0,zt.jsx)(jm,{className:"text-emerald-400",size:20}):(0,zt.jsx)(Mx,{className:"text-red-400",size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.trader_name}),e.trader_rank<=3&&(0,zt.jsx)(oke,{size:14,className:"text-amber-400"}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["#",e.trader_rank]})]}),(0,zt.jsxs)("p",{className:"text-sm text-slate-400",children:[(0,zt.jsx)("span",{className:"buy"===e.side?"text-emerald-400":"text-red-400",children:e.side.toUpperCase()})," ",e.quantity," ",e.symbol," @ ",w(e.price)]})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono font-semibold ".concat(e.pnl>=0?"text-emerald-400":"text-red-400"),children:[e.pnl>=0?"+":"",w(e.pnl)]}),(0,zt.jsxs)("p",{className:"text-xs ".concat(e.pnl_percent>=0?"text-emerald-400":"text-red-400"),children:[e.pnl_percent>=0?"+":"",e.pnl_percent.toFixed(2),"%"]})]})]})},e.id||t))}),(0,zt.jsx)("div",{ref:x})]}),f&&(0,zt.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,zt.jsx)("div",{className:"px-6 py-3 rounded-xl bg-amber-500/20 border border-amber-500/30 text-amber-400 font-semibold",children:"Feed Paused"})})]})}),(0,zt.jsxs)("div",{className:"w-80 p-4 space-y-4 overflow-y-auto",children:[(0,zt.jsx)(vx,{accent:a?"teal":"red",className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(a?"bg-teal-400 animate-pulse":"bg-red-400")}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:a?"Connected":"Reconnecting..."})]})}),(0,zt.jsx)(vx,{title:"Session Stats",accent:"purple",className:"p-4",children:(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Trades Seen"}),(0,zt.jsx)("span",{className:"text-white font-mono",children:l.length})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Buy Orders"}),(0,zt.jsx)("span",{className:"text-emerald-400 font-mono",children:l.filter(e=>"buy"===e.side).length})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Sell Orders"}),(0,zt.jsx)("span",{className:"text-red-400 font-mono",children:l.filter(e=>"sell"===e.side).length})]})]})}),(0,zt.jsx)(vx,{title:"Most Active",accent:"amber",className:"p-4",children:(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(l.reduce((e,t)=>(e[t.trader_name]=(e[t.trader_name]||0)+1,e),{})).sort((e,t)=>t[1]-e[1]).slice(0,5).map((e,t)=>{let[n,a]=e;return(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:t+1}),(0,zt.jsx)("span",{className:"text-white text-sm",children:n})]}),(0,zt.jsxs)("span",{className:"text-amber-400 text-sm",children:[a," trades"]})]},n)})})}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 text-xs text-slate-500",children:[(0,zt.jsx)("p",{className:"mb-2 font-semibold text-slate-400",children:"Legend"}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)("div",{className:"w-3 h-3 rounded bg-emerald-500/50"}),(0,zt.jsx)("span",{children:"Buy Order"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"w-3 h-3 rounded bg-red-500/50"}),(0,zt.jsx)("span",{children:"Sell Order"})]})]})]})]})]})},Lke="".concat("https://tradehub-380.preview.emergentagent.com","/api"),zke=()=>{const[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)(null),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(!0),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await fetch("".concat(Lke,"/tournament/active")),n=await e.json();t(n),n.length>0&&(a(n[0]),f(n[0].id)),l(!1)}catch(e){console.error("Error fetching tournaments:",e),l(!1)}},f=async e=>{try{const t=await fetch("".concat(Lke,"/tournament/").concat(e,"/leaderboard?limit=50")),n=await t.json();s(n)}catch(t){console.error("Error fetching leaderboard:",t)}},m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),g=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%");return i?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"tournament-center",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Xm,{className:"text-amber-400",size:28}),"Trading Tournament"]}),(0,zt.jsx)("p",{className:"text-slate-400 mt-1",children:"Compete with traders worldwide for prizes"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[n&&(0,zt.jsxs)("button",{onClick:()=>h(!0),className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 text-purple-400 font-semibold hover:bg-purple-500/30 transition-all flex items-center gap-2","data-testid":"spectator-mode-btn",children:[(0,zt.jsx)(zm,{size:18}),(0,zt.jsx)("span",{className:"hidden sm:inline",children:"Watch Live"}),(0,zt.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]}),!c&&n&&(0,zt.jsxs)("button",{onClick:()=>u(!0),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold hover:shadow-lg hover:shadow-amber-500/25 transition-all flex items-center gap-2","data-testid":"join-tournament-btn",children:[(0,zt.jsx)(Wm,{size:18}),"Join Tournament"]})]})]}),n&&(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)(vx,{accent:"amber",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Mm,{className:"text-amber-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Prize Pool"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:m(n.total_prize_pool||175)}),(0,zt.jsx)("p",{className:"text-xs text-amber-400 mt-1",children:"Pro Credits"})]}),(0,zt.jsxs)(vx,{accent:"blue",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(wye,{className:"text-blue-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Participants"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:n.participant_count||0}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["/ ",n.max_participants||1e3," max"]})]}),(0,zt.jsxs)(vx,{accent:"teal",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Am,{className:"text-teal-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Starting Balance"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:m(n.starting_balance||1e5)}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Virtual money"})]}),(0,zt.jsxs)(vx,{accent:"purple",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(wwe,{className:"text-purple-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Status"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white capitalize",children:n.status}),(0,zt.jsx)("p",{className:"text-xs text-purple-400 mt-1",children:"Weekly challenge"})]})]}),(0,zt.jsx)(vx,{title:"\ud83c\udfc6 Prizes",accent:"amber",children:(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-500/20 to-amber-500/5 border border-amber-500/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center",children:(0,zt.jsx)(oke,{className:"text-black",size:20})}),(0,zt.jsx)("span",{className:"font-bold text-amber-400",children:"1st Place"})]}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-white",children:[(0,zt.jsx)(Fm,{size:14,className:"text-amber-400"})," 100 Pro Credits"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(uye,{size:14,className:"text-amber-400"})," Champion Badge"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(Xm,{size:14,className:"text-amber-400"}),' "Weekly Champion" Title']})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-slate-400/20 to-slate-400/5 border border-slate-400/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-400 flex items-center justify-center",children:(0,zt.jsx)(lke,{className:"text-black",size:20})}),(0,zt.jsx)("span",{className:"font-bold text-slate-300",children:"2nd Place"})]}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-white",children:[(0,zt.jsx)(Fm,{size:14,className:"text-slate-400"})," 50 Pro Credits"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(uye,{size:14,className:"text-slate-400"})," Runner Up Badge"]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-700/20 to-amber-700/5 border border-amber-700/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-700 flex items-center justify-center",children:(0,zt.jsx)(uye,{className:"text-white",size:20})}),(0,zt.jsx)("span",{className:"font-bold text-amber-600",children:"3rd Place"})]}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-white",children:[(0,zt.jsx)(Fm,{size:14,className:"text-amber-700"})," 25 Pro Credits"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(uye,{size:14,className:"text-amber-700"})," Third Place Badge"]})]})]})]})}),(0,zt.jsx)(vx,{title:"\ud83d\udcca Leaderboard",icon:(0,zt.jsx)(Tm,{className:"text-teal-400"}),accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-4 py-2 text-xs font-mono text-slate-500 border-b border-white/5",children:[(0,zt.jsx)("div",{className:"col-span-1",children:"Rank"}),(0,zt.jsx)("div",{className:"col-span-4",children:"Trader"}),(0,zt.jsx)("div",{className:"col-span-2 text-right",children:"P&L %"}),(0,zt.jsx)("div",{className:"col-span-2 text-right",children:"Balance"}),(0,zt.jsx)("div",{className:"col-span-2 text-right",children:"Trades"}),(0,zt.jsx)("div",{className:"col-span-1 text-right",children:"Win %"})]}),r.map((e,t)=>{var n;const a=1===(r=e.rank)?{icon:oke,color:"text-amber-400",bg:"bg-amber-500/20"}:2===r?{icon:lke,color:"text-slate-300",bg:"bg-slate-400/20"}:3===r?{icon:uye,color:"text-amber-700",bg:"bg-amber-700/20"}:{icon:null,color:"text-slate-500",bg:"bg-slate-700/50"};var r;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"grid grid-cols-12 gap-2 px-4 py-3 rounded-lg ".concat(e.rank<=3?a.bg:"bg-white/5 hover:bg-white/10"," transition-colors"),children:[(0,zt.jsx)("div",{className:"col-span-1 flex items-center gap-2",children:a.icon?(0,zt.jsx)(a.icon,{size:16,className:a.color}):(0,zt.jsx)("span",{className:"text-slate-500 font-mono text-sm",children:e.rank})}),(0,zt.jsxs)("div",{className:"col-span-4 flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.username}),e.rank_change>0&&(0,zt.jsxs)("span",{className:"flex items-center text-xs text-emerald-400",children:[(0,zt.jsx)(Rke,{size:12})," ",e.rank_change]}),e.rank_change<0&&(0,zt.jsxs)("span",{className:"flex items-center text-xs text-red-400",children:[(0,zt.jsx)(Pke,{size:12})," ",Math.abs(e.rank_change)]})]}),(0,zt.jsx)("div",{className:"col-span-2 text-right font-mono font-semibold ".concat(e.pnl_percent>=0?"text-emerald-400":"text-red-400"),children:g(e.pnl_percent)}),(0,zt.jsx)("div",{className:"col-span-2 text-right font-mono text-white",children:m(e.current_balance)}),(0,zt.jsx)("div",{className:"col-span-2 text-right text-slate-400",children:e.total_trades}),(0,zt.jsxs)("div",{className:"col-span-1 text-right text-slate-400",children:[null===(n=e.win_rate)||void 0===n?void 0:n.toFixed(0),"%"]})]},t)})]})}),(0,zt.jsx)(vx,{title:"\ud83d\udccb Rules",accent:"blue",children:(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Trading Rules"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{children:"\u2022 Start with $100,000 virtual balance"}),(0,zt.jsx)("li",{children:"\u2022 Trade BTC, ETH, SOL, XRP, ADA, DOGE"}),(0,zt.jsx)("li",{children:"\u2022 Maximum 25% of portfolio in single position"}),(0,zt.jsx)("li",{children:"\u2022 Minimum 3 trades required to qualify"}),(0,zt.jsx)("li",{children:"\u2022 No leverage (1x only)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Scoring"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{children:"\u2022 Ranked by total return percentage"}),(0,zt.jsx)("li",{children:"\u2022 Ties broken by number of winning trades"}),(0,zt.jsx)("li",{children:"\u2022 Results finalized 1 hour after end"}),(0,zt.jsx)("li",{children:"\u2022 Prizes distributed within 24 hours"})]})]})]})}),(0,zt.jsx)(an,{children:d&&n&&(0,zt.jsx)(Fke,{tournamentId:n.id,onClose:()=>h(!1)})})]})},Bke=Nm("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Uke=Nm("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);"undefined"===typeof window||!window.document||window.document.createElement;function Wke(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a){if(null===e||void 0===e||e(a),!1===n||!a.defaultPrevented)return null===t||void 0===t?void 0:t(a)}}const Vke=["scope","children"];function Hke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const t=n.map(e=>o.createContext(e));return function(n){const a=(null===n||void 0===n?void 0:n[e])||t;return o.useMemo(()=>({["__scope".concat(e)]:m(m({},n),{},{[e]:a})}),[n,a])}};return a.scopeName=e,[function(t,a){const r=o.createContext(a),s=n.length;n=[...n,a];const i=t=>{var n;const{scope:a,children:i}=t,l=u(t,Vke),c=(null===a||void 0===a||null===(n=a[e])||void 0===n?void 0:n[s])||r,d=o.useMemo(()=>l,Object.values(l));return(0,zt.jsx)(c.Provider,{value:d,children:i})};return i.displayName=t+"Provider",[i,function(n,i){var l;const c=(null===i||void 0===i||null===(l=i[e])||void 0===l?void 0:l[s])||r,u=o.useContext(c);if(u)return u;if(void 0!==a)return a;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},Gke(a,...t)]}function Gke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t[0];if(1===t.length)return a;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const n=e.reduce((e,n)=>{let{useScope:a,scopeName:r}=n;const s=a(t)["__scope".concat(r)];return m(m({},e),s)},{});return o.useMemo(()=>({["__scope".concat(a.scopeName)]:n}),[n])}};return r.scopeName=a.scopeName,r}function qke(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Kke(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Xke(e,t){return e.get(Kke(e,t))}function Yke(e,t,n){return e.set(Kke(e,t),n),n}function $ke(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Qke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const a=t.map(t=>{const a=$ke(t,e);return n||"function"!=typeof a||(n=!0),a});if(n)return()=>{for(let e=0;e<a.length;e++){const n=a[e];"function"==typeof n?n():$ke(t[e],null)}}}}function Jke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useCallback(Qke(...t),t)}const Zke=["children"],eNe=["children"];function tNe(e){const t=nNe(e),n=o.forwardRef((e,n)=>{const{children:a}=e,r=u(e,Zke),s=o.Children.toArray(a),i=s.find(sNe);if(i){const e=i.props.children,a=s.map(t=>t===i?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return(0,zt.jsx)(t,m(m({},r),{},{ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,a):null}))}return(0,zt.jsx)(t,m(m({},r),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}function nNe(e){const t=o.forwardRef((e,t)=>{const{children:n}=e,a=u(e,eNe);if(o.isValidElement(n)){const e=function(e){var t,n;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,r=a&&"isReactWarning"in a&&a.isReactWarning;if(r)return e.ref;if(a=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const n=m({},t);for(const a in t){const r=e[a],s=t[a];/^on[A-Z]/.test(a)?r&&s?n[a]=function(){const e=s(...arguments);return r(...arguments),e}:r&&(n[a]=r):"style"===a?n[a]=m(m({},r),s):"className"===a&&(n[a]=[r,s].filter(Boolean).join(" "))}return m(m({},e),n)}(a,n.props);return n.type!==o.Fragment&&(r.ref=t?Qke(t,e):e),o.cloneElement(n,r)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var aNe=Symbol("radix.slottable");var rNe;function sNe(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===aNe}const iNe=["scope","children"];function oNe(e){const t=e+"CollectionProvider",[n,a]=Hke(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:n}=e,a=o.useRef(null),s=o.useRef(new Map).current;return(0,zt.jsx)(r,{scope:t,itemMap:s,collectionRef:a,children:n})};i.displayName=t;const l=e+"CollectionSlot",c=tNe(l),d=o.forwardRef((e,t)=>{const{scope:n,children:a}=e,r=Jke(t,s(l,n).collectionRef);return(0,zt.jsx)(c,{ref:r,children:a})});d.displayName=l;const h=e+"CollectionItemSlot",p="data-radix-collection-item",f=tNe(h),g=o.forwardRef((e,t)=>{const{scope:n,children:a}=e,r=u(e,iNe),i=o.useRef(null),l=Jke(t,i),c=s(h,n);return o.useEffect(()=>(c.itemMap.set(i,m({ref:i},r)),()=>{c.itemMap.delete(i)})),(0,zt.jsx)(f,m(m({},{[p]:""}),{},{ref:l,children:a}))});return g.displayName=h,[{Provider:i,Slot:d,ItemSlot:g},function(t){const n=s(e+"CollectionConsumer",t),a=o.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),a=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return a},[n.collectionRef,n.itemMap]);return a},a]}var lNe=new WeakMap;rNe=new WeakMap,Map;function cNe(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,a=uNe(t),r=a>=0?a:n+a;return r<0||r>=n?-1:r}(e,t);return-1===n?void 0:e[n]}function uNe(e){return e!==e||0===e?0:Math.trunc(e)}var dNe=null!==globalThis&&void 0!==globalThis&&globalThis.document?o.useLayoutEffect:()=>{},hNe=l[" useId ".trim().toString()]||(()=>{}),pNe=0;function fNe(e){const[t,n]=o.useState(hNe());return dNe(()=>{e||n(e=>null!==e&&void 0!==e?e:String(pNe++))},[e]),e||(t?"radix-".concat(t):"")}const mNe=["children"],gNe=["children"];function xNe(e){const t=vNe(e),n=o.forwardRef((e,n)=>{const{children:a}=e,r=u(e,mNe),s=o.Children.toArray(a),i=s.find(bNe);if(i){const e=i.props.children,a=s.map(t=>t===i?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return(0,zt.jsx)(t,m(m({},r),{},{ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,a):null}))}return(0,zt.jsx)(t,m(m({},r),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}function vNe(e){const t=o.forwardRef((e,t)=>{const{children:n}=e,a=u(e,gNe);if(o.isValidElement(n)){const e=function(e){var t,n;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,r=a&&"isReactWarning"in a&&a.isReactWarning;if(r)return e.ref;if(a=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const n=m({},t);for(const a in t){const r=e[a],s=t[a];/^on[A-Z]/.test(a)?r&&s?n[a]=function(){const e=s(...arguments);return r(...arguments),e}:r&&(n[a]=r):"style"===a?n[a]=m(m({},r),s):"className"===a&&(n[a]=[r,s].filter(Boolean).join(" "))}return m(m({},e),n)}(a,n.props);return n.type!==o.Fragment&&(r.ref=t?Qke(t,e):e),o.cloneElement(n,r)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var yNe=Symbol("radix.slottable");function bNe(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===yNe}const wNe=["asChild"];var kNe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=xNe("Primitive.".concat(t)),a=o.forwardRef((e,a)=>{const{asChild:r}=e,s=u(e,wNe),i=r?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,zt.jsx)(i,m(m({},s),{},{ref:a}))});return a.displayName="Primitive.".concat(t),m(m({},e),{},{[t]:a})},{});var NNe=l[" useInsertionEffect ".trim().toString()]||dNe;function jNe(e){let{prop:t,defaultProp:n,onChange:a=()=>{},caller:r}=e;const[s,i,l]=function(e){let{defaultProp:t,onChange:n}=e;const[a,r]=o.useState(t),s=o.useRef(a),i=o.useRef(n);return NNe(()=>{i.current=n},[n]),o.useEffect(()=>{var e;s.current!==a&&(null===(e=i.current)||void 0===e||e.call(i,a),s.current=a)},[a,s]),[a,r,i]}({defaultProp:n,onChange:a}),c=void 0!==t,u=c?t:s;{const e=o.useRef(void 0!==t);o.useEffect(()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(r," is changing from ").concat(e," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=c},[c,r])}const d=o.useCallback(e=>{if(c){const a=function(e){return"function"===typeof e}(e)?e(t):e;var n;if(a!==t)null===(n=l.current)||void 0===n||n.call(l,a)}else i(e)},[c,t,i,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var SNe=o.createContext(void 0);function CNe(e){const t=o.useContext(SNe);return e||t||"ltr"}const ENe=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],TNe=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var INe="rovingFocusGroup.onEntryFocus",ANe={bubbles:!1,cancelable:!0},_Ne="RovingFocusGroup",[ONe,RNe,PNe]=oNe(_Ne),[MNe,DNe]=Hke(_Ne,[PNe]),[FNe,LNe]=MNe(_Ne),zNe=o.forwardRef((e,t)=>(0,zt.jsx)(ONe.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,zt.jsx)(ONe.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,zt.jsx)(BNe,m(m({},e),{},{ref:t}))})}));zNe.displayName=_Ne;var BNe=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:r=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1}=e,p=u(e,ENe),f=o.useRef(null),g=Jke(t,f),x=CNe(s),[v,y]=jNe({prop:i,defaultProp:null!==l&&void 0!==l?l:null,onChange:c,caller:_Ne}),[b,w]=o.useState(!1),k=function(e){const t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>function(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return null===(e=t.current)||void 0===e?void 0:e.call(t,...a)},[])}(d),N=RNe(n),j=o.useRef(!1),[S,C]=o.useState(0);return o.useEffect(()=>{const e=f.current;if(e)return e.addEventListener(INe,k),()=>e.removeEventListener(INe,k)},[k]),(0,zt.jsx)(FNe,{scope:n,orientation:a,dir:x,loop:r,currentTabStopId:v,onItemFocus:o.useCallback(e=>y(e),[y]),onItemShiftTab:o.useCallback(()=>w(!0),[]),onFocusableItemAdd:o.useCallback(()=>C(e=>e+1),[]),onFocusableItemRemove:o.useCallback(()=>C(e=>e-1),[]),children:(0,zt.jsx)(kNe.div,m(m({tabIndex:b||0===S?-1:0,"data-orientation":a},p),{},{ref:g,style:m({outline:"none"},e.style),onMouseDown:Wke(e.onMouseDown,()=>{j.current=!0}),onFocus:Wke(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(INe,ANe);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=N().filter(e=>e.focusable);HNe([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),h)}}j.current=!1}),onBlur:Wke(e.onBlur,()=>w(!1))}))})}),UNe="RovingFocusGroupItem",WNe=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:r=!1,tabStopId:s,children:i}=e,l=u(e,TNe),c=fNe(),d=s||c,h=LNe(UNe,n),p=h.currentTabStopId===d,f=RNe(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:v}=h;return o.useEffect(()=>{if(a)return g(),()=>x()},[a,g,x]),(0,zt.jsx)(ONe.ItemSlot,{scope:n,id:d,focusable:a,active:r,children:(0,zt.jsx)(kNe.span,m(m({tabIndex:p?0:-1,"data-orientation":h.orientation},l),{},{ref:t,onMouseDown:Wke(e.onMouseDown,e=>{a?h.onItemFocus(d):e.preventDefault()}),onFocus:Wke(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:Wke(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const a=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(a)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)?void 0:VNe[a]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const a=n.indexOf(e.currentTarget);n=h.loop?function(e,t){return e.map((n,a)=>e[(t+a)%e.length])}(n,a+1):n.slice(a+1)}setTimeout(()=>HNe(n))}}),children:"function"===typeof i?i({isCurrentTabStop:p,hasTabStop:null!=v}):i}))})});WNe.displayName=UNe;var VNe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function HNe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const a of e){if(a===n)return;if(a.focus({preventScroll:t}),document.activeElement!==n)return}}var GNe=zNe,qNe=WNe;var KNe=e=>{const{present:t,children:n}=e,a=function(e){const[t,n]=o.useState(),a=o.useRef(null),r=o.useRef(e),s=o.useRef("none"),i=e?"mounted":"unmounted",[l,c]=function(e,t){return o.useReducer((e,n)=>{const a=t[e][n];return null!==a&&void 0!==a?a:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const e=XNe(a.current);s.current="mounted"===l?e:"none"},[l]),dNe(()=>{const t=a.current,n=r.current;if(n!==e){const a=s.current,i=XNe(t);if(e)c("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))c("UNMOUNT");else{c(n&&a!==i?"ANIMATION_OUT":"UNMOUNT")}r.current=e}},[e,c]),dNe(()=>{if(t){var e;let n;const i=null!==(e=t.ownerDocument.defaultView)&&void 0!==e?e:window,o=e=>{const s=XNe(a.current).includes(CSS.escape(e.animationName));if(e.target===t&&s&&(c("ANIMATION_END"),!r.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",n=i.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},l=e=>{e.target===t&&(s.current=XNe(a.current))};return t.addEventListener("animationstart",l),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{i.clearTimeout(n),t.removeEventListener("animationstart",l),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback(e=>{a.current=e?getComputedStyle(e):null,n(e)},[])}}(t),r="function"===typeof n?n({present:a.isPresent}):o.Children.only(n),s=Jke(a.ref,function(e){var t,n;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,r=a&&"isReactWarning"in a&&a.isReactWarning;if(r)return e.ref;if(a=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(r));return"function"===typeof n||a.isPresent?o.cloneElement(r,{ref:s}):null};function XNe(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}KNe.displayName="Presence";const YNe=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],$Ne=["__scopeTabs","loop"],QNe=["__scopeTabs","value","disabled"],JNe=["__scopeTabs","value","forceMount","children"];var ZNe="Tabs",[eje,tje]=Hke(ZNe,[DNe]),nje=DNe(),[aje,rje]=eje(ZNe),sje=o.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,onValueChange:r,defaultValue:s,orientation:i="horizontal",dir:o,activationMode:l="automatic"}=e,c=u(e,YNe),d=CNe(o),[h,p]=jNe({prop:a,onChange:r,defaultProp:null!==s&&void 0!==s?s:"",caller:ZNe});return(0,zt.jsx)(aje,{scope:n,baseId:fNe(),value:h,onValueChange:p,orientation:i,dir:d,activationMode:l,children:(0,zt.jsx)(kNe.div,m(m({dir:d,"data-orientation":i},c),{},{ref:t}))})});sje.displayName=ZNe;var ije="TabsList",oje=o.forwardRef((e,t)=>{const{__scopeTabs:n,loop:a=!0}=e,r=u(e,$Ne),s=rje(ije,n),i=nje(n);return(0,zt.jsx)(GNe,m(m({asChild:!0},i),{},{orientation:s.orientation,dir:s.dir,loop:a,children:(0,zt.jsx)(kNe.div,m(m({role:"tablist","aria-orientation":s.orientation},r),{},{ref:t}))}))});oje.displayName=ije;var lje="TabsTrigger",cje=o.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,disabled:r=!1}=e,s=u(e,QNe),i=rje(lje,n),o=nje(n),l=hje(i.baseId,a),c=pje(i.baseId,a),d=a===i.value;return(0,zt.jsx)(qNe,m(m({asChild:!0},o),{},{focusable:!r,active:d,children:(0,zt.jsx)(kNe.button,m(m({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l},s),{},{ref:t,onMouseDown:Wke(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)}),onKeyDown:Wke(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)}),onFocus:Wke(e.onFocus,()=>{const e="manual"!==i.activationMode;d||r||!e||i.onValueChange(a)})}))}))});cje.displayName=lje;var uje="TabsContent",dje=o.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,forceMount:r,children:s}=e,i=u(e,JNe),l=rje(uje,n),c=hje(l.baseId,a),d=pje(l.baseId,a),h=a===l.value,p=o.useRef(h);return o.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,zt.jsx)(KNe,{present:r||h,children:n=>{let{present:a}=n;return(0,zt.jsx)(kNe.div,m(m({"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!a,id:d,tabIndex:0},i),{},{ref:t,style:m(m({},e.style),{},{animationDuration:p.current?"0s":void 0}),children:a&&s}))}})});function hje(e,t){return"".concat(e,"-trigger-").concat(t)}function pje(e,t){return"".concat(e,"-content-").concat(t)}dje.displayName=uje;var fje=oje,mje=cje,gje=dje;const xje=["className"],vje=["className"],yje=["className"],bje=sje,wje=o.forwardRef((e,t)=>{let{className:n}=e,a=u(e,xje);return(0,zt.jsx)(fje,m({ref:t,className:gx("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},a))});wje.displayName=fje.displayName;const kje=o.forwardRef((e,t)=>{let{className:n}=e,a=u(e,vje);return(0,zt.jsx)(mje,m({ref:t,className:gx("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},a))});kje.displayName=mje.displayName;const Nje=o.forwardRef((e,t)=>{let{className:n}=e,a=u(e,yje);return(0,zt.jsx)(gje,m({ref:t,className:gx("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},a))});Nje.displayName=gje.displayName;const jje=["scope","children"];function Sje(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t[0];if(1===t.length)return a;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const n=e.reduce((e,n)=>{let{useScope:a,scopeName:r}=n;const s=a(t)["__scope".concat(r)];return m(m({},e),s)},{});return o.useMemo(()=>({["__scope".concat(a.scopeName)]:n}),[n])}};return r.scopeName=a.scopeName,r}const Cje=["children"],Eje=["children"];var Tje=Symbol.for("react.lazy"),Ije=l[" use ".trim().toString()];function Aje(e){return null!=e&&"object"===typeof e&&"$$typeof"in e&&e.$$typeof===Tje&&"_payload"in e&&function(e){return"object"===typeof e&&null!==e&&"then"in e}(e._payload)}function _je(e){const t=Rje(e),n=o.forwardRef((e,n)=>{let{children:a}=e,r=u(e,Cje);Aje(a)&&"function"===typeof Ije&&(a=Ije(a._payload));const s=o.Children.toArray(a),i=s.find(Mje);if(i){const e=i.props.children,a=s.map(t=>t===i?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return(0,zt.jsx)(t,m(m({},r),{},{ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,a):null}))}return(0,zt.jsx)(t,m(m({},r),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}var Oje=_je("Slot");function Rje(e){const t=o.forwardRef((e,t)=>{let{children:n}=e,a=u(e,Eje);if(Aje(n)&&"function"===typeof Ije&&(n=Ije(n._payload)),o.isValidElement(n)){const e=function(e){var t,n;let a=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,r=a&&"isReactWarning"in a&&a.isReactWarning;if(r)return e.ref;if(a=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const n=m({},t);for(const a in t){const r=e[a],s=t[a];/^on[A-Z]/.test(a)?r&&s?n[a]=function(){const e=s(...arguments);return r(...arguments),e}:r&&(n[a]=r):"style"===a?n[a]=m(m({},r),s):"className"===a&&(n[a]=[r,s].filter(Boolean).join(" "))}return m(m({},e),n)}(a,n.props);return n.type!==o.Fragment&&(r.ref=t?Qke(t,e):e),o.cloneElement(n,r)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Pje=Symbol("radix.slottable");function Mje(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Pje}const Dje=["asChild"];var Fje=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=_je("Primitive.".concat(t)),a=o.forwardRef((e,a)=>{const{asChild:r}=e,s=u(e,Dje),i=r?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,zt.jsx)(i,m(m({},s),{},{ref:a}))});return a.displayName="Primitive.".concat(t),m(m({},e),{},{[t]:a})},{});const Lje=["__scopeProgress","value","max","getValueLabel"],zje=["__scopeProgress"];var Bje="Progress",Uje=100,[Wje,Vje]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const t=n.map(e=>o.createContext(e));return function(n){const a=(null===n||void 0===n?void 0:n[e])||t;return o.useMemo(()=>({["__scope".concat(e)]:m(m({},n),{},{[e]:a})}),[n,a])}};return a.scopeName=e,[function(t,a){const r=o.createContext(a);r.displayName=t+"Context";const s=n.length;n=[...n,a];const i=t=>{var n;const{scope:a,children:i}=t,l=u(t,jje),c=(null===a||void 0===a||null===(n=a[e])||void 0===n?void 0:n[s])||r,d=o.useMemo(()=>l,Object.values(l));return(0,zt.jsx)(c.Provider,{value:d,children:i})};return i.displayName=t+"Provider",[i,function(n,i){var l;const c=(null===i||void 0===i||null===(l=i[e])||void 0===l?void 0:l[s])||r,u=o.useContext(c);if(u)return u;if(void 0!==a)return a;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},Sje(a,...t)]}(Bje),[Hje,Gje]=Wje(Bje),qje=o.forwardRef((e,t)=>{const{__scopeProgress:n,value:a=null,max:r,getValueLabel:s=Yje}=e,i=u(e,Lje);var o,l;!r&&0!==r||Jje(r)||console.error((o="".concat(r),l="Progress","Invalid prop `max` of value `".concat(o,"` supplied to `").concat(l,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(Uje,"`.")));const c=Jje(r)?r:Uje;null===a||Zje(a,c)||console.error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(Uje," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")}("".concat(a),"Progress"));const d=Zje(a,c)?a:null,h=Qje(d)?s(d,c):void 0;return(0,zt.jsx)(Hje,{scope:n,value:d,max:c,children:(0,zt.jsx)(Fje.div,m(m({"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Qje(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":$je(d,c),"data-value":null!==d&&void 0!==d?d:void 0,"data-max":c},i),{},{ref:t}))})});qje.displayName=Bje;var Kje="ProgressIndicator",Xje=o.forwardRef((e,t)=>{var n;const{__scopeProgress:a}=e,r=u(e,zje),s=Gje(Kje,a);return(0,zt.jsx)(Fje.div,m(m({"data-state":$je(s.value,s.max),"data-value":null!==(n=s.value)&&void 0!==n?n:void 0,"data-max":s.max},r),{},{ref:t}))});function Yje(e,t){return"".concat(Math.round(e/t*100),"%")}function $je(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Qje(e){return"number"===typeof e}function Jje(e){return Qje(e)&&!isNaN(e)&&e>0}function Zje(e,t){return Qje(e)&&!isNaN(e)&&e<=t&&e>=0}Xje.displayName=Kje;var eSe=qje,tSe=Xje;const nSe=["className","value"],aSe=o.forwardRef((e,t)=>{let{className:n,value:a}=e,r=u(e,nSe);return(0,zt.jsx)(eSe,m(m({ref:t,className:gx("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n)},r),{},{children:(0,zt.jsx)(tSe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})}))});aSe.displayName=eSe.displayName;const rSe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),sSe=e=>{var t,n;let{data:a}=e;if(!a)return(0,zt.jsx)(dSe,{message:"Macro data unavailable"});const r=a.economic_machine_position||{},s=a.debt_cycle||{},i=a.liquidity_conditions||{},o=a.principles_applied||[];return(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6","data-testid":"macro-panel",children:[(0,zt.jsx)(vx,{title:"Economic Machine Position",icon:"\ud83c\udf0d",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-teal-500/10 border border-teal-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Current Phase"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-teal-400 uppercase",children:(null===(t=r.current_phase)||void 0===t?void 0:t.replace(/_/g," "))||"N/A"})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:r.phase_description}),r.recommended_allocation&&(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Recommended Allocation"}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(r.recommended_allocation).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-400 capitalize",children:t}),(0,zt.jsxs)("span",{className:"text-sm font-mono text-white",children:[n,"%"]})]},t)})})]})]})}),(0,zt.jsx)(vx,{title:"Debt Cycle Analysis",icon:"\ud83d\udcca",accent:"amber",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Debt/GDP"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-amber-400",children:[s.debt_to_gdp,"%"]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Credit Growth"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-blue-400",children:[s.credit_growth,"%"]})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Deleveraging Risk"}),(0,zt.jsxs)("span",{className:"text-amber-400",children:[(100*s.deleveraging_risk).toFixed(0),"%"]})]}),(0,zt.jsx)(aSe,{value:100*s.deleveraging_risk,className:"h-2 bg-white/10"})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Bubble Indicator"}),(0,zt.jsxs)("span",{className:"text-red-400",children:[(100*s.bubble_indicator).toFixed(0),"%"]})]}),(0,zt.jsx)(aSe,{value:100*s.bubble_indicator,className:"h-2 bg-white/10"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:s.projection})]})}),(0,zt.jsx)(vx,{title:"Global Liquidity Conditions",icon:"\ud83d\udca7",accent:"blue",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Score"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-blue-400",children:i.liquidity_score})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Trend"}),(0,zt.jsx)("p",{className:"text-sm font-medium text-white capitalize",children:i.trend})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Risk Appetite"}),(0,zt.jsx)("p",{className:"text-sm font-medium capitalize ".concat("risk-on"===i.risk_appetite?"text-emerald-400":"risk-off"===i.risk_appetite?"text-red-400":"text-slate-400"),children:null===(n=i.risk_appetite)||void 0===n?void 0:n.replace("-"," ")})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"CB Assets"}),(0,zt.jsxs)("p",{className:"font-mono text-white",children:["$",i.total_central_bank_assets,"T"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"M2 Growth"}),(0,zt.jsxs)("p",{className:"font-mono text-white",children:[i.m2_growth_global,"%"]})]})]})]})}),(0,zt.jsxs)(vx,{title:"Ray Dalio's Principles Applied",icon:"\ud83d\udcd6",accent:"purple",children:[(0,zt.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border-l-2 border-purple-500",children:[(0,zt.jsx)("p",{className:"text-sm font-medium text-purple-400",children:e.principle}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:e.application})]},t))}),a.overall_assessment&&(0,zt.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Overall Assessment"}),(0,zt.jsx)("p",{className:"text-sm text-white",children:a.overall_assessment})]})]})]})},iSe=e=>{var t,n,a,r;let{data:s}=e;const[i,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{(async()=>{h(!0);try{const[e,t]=await Promise.all([fetch("".concat(rSe,"/quant/inefficiency/signals")).then(e=>e.json()),fetch("".concat(rSe,"/quant/inefficiency/pairs")).then(e=>e.json())]);l(e||[]),u(t||[])}catch(jEe){console.error(jEe)}h(!1)})()},[]),!s)return(0,zt.jsx)(dSe,{message:"Inefficiency data unavailable"});const p=e=>"strong"===e?"text-emerald-400 bg-emerald-500/20":"moderate"===e?"text-amber-400 bg-amber-500/20":"text-slate-400 bg-slate-500/20";return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"inefficiency-panel",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(uSe,{label:"Total Signals",value:s.total_signals,icon:Am,color:"purple"}),(0,zt.jsx)(uSe,{label:"Strong Signals",value:s.strong_signals,icon:Wm,color:"emerald"}),(0,zt.jsx)(uSe,{label:"Avg Confidence",value:"".concat((100*s.average_confidence).toFixed(0),"%"),icon:Tm,color:"blue"}),(0,zt.jsx)(uSe,{label:"Avg Expected Return",value:"".concat(null===(t=s.average_expected_return)||void 0===t?void 0:t.toFixed(1),"%"),icon:jm,color:"teal"})]}),s.best_opportunity&&(0,zt.jsx)(vx,{title:"Best Opportunity",icon:"\u2b50",accent:"amber",children:(0,zt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,zt.jsx)("div",{className:"p-3 rounded-lg ".concat(p(s.best_opportunity.strength)),children:(0,zt.jsx)(Wm,{size:24})}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)("span",{className:"text-lg font-bold text-white",children:null===(n=s.best_opportunity.assets)||void 0===n?void 0:n.join(" / ")}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(p(s.best_opportunity.strength)),children:s.best_opportunity.strength})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:s.best_opportunity.rationale}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Direction"}),(0,zt.jsx)("p",{className:"text-sm font-medium ".concat(null!==(a=s.best_opportunity.direction)&&void 0!==a&&a.includes("long")?"text-emerald-400":"text-red-400"),children:null===(r=s.best_opportunity.direction)||void 0===r?void 0:r.toUpperCase()})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Expected Return"}),(0,zt.jsxs)("p",{className:"text-sm font-medium text-teal-400",children:[s.best_opportunity.expected_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Risk/Reward"}),(0,zt.jsxs)("p",{className:"text-sm font-medium text-blue-400",children:[s.best_opportunity.risk_reward,"x"]})]})]})]})]})}),(0,zt.jsx)(vx,{title:"Active Signals",icon:"\ud83d\udce1",accent:"purple",children:d?(0,zt.jsx)("div",{className:"text-center py-4 text-slate-500",children:"Loading signals..."}):(0,zt.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map((e,t)=>{var n,a,r,s;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-sm font-medium text-white",children:null===(n=e.assets)||void 0===n?void 0:n.join(" / ")}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(p(e.strength)),children:e.strength})]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:null===(a=e.signal_type)||void 0===a?void 0:a.replace(/_/g," ")})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:e.rationale}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,zt.jsx)("span",{className:null!==(r=e.direction)&&void 0!==r&&r.includes("long")?"text-emerald-400":"text-red-400",children:null===(s=e.direction)||void 0===s?void 0:s.toUpperCase()}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["Conf: ",(100*e.confidence).toFixed(0),"%"]}),(0,zt.jsxs)("span",{className:"text-teal-400",children:["+",e.expected_return,"%"]}),(0,zt.jsx)("span",{className:"text-slate-500",children:e.holding_period})]})]},e.id||t)})})}),c.length>0&&(0,zt.jsx)(vx,{title:"Pairs Trading Opportunities",icon:"\ud83d\udd04",accent:"blue",children:(0,zt.jsx)("div",{className:"space-y-3",children:c.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)("span",{className:"text-emerald-400 text-sm",children:["Long ",e.asset_long]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"/"}),(0,zt.jsxs)("span",{className:"text-red-400 text-sm",children:["Short ",e.asset_short]})]}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 ml-auto",children:["Correlation: ",(100*e.correlation).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Z-Score"}),(0,zt.jsx)("p",{className:"text-white",children:e.spread_zscore})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Half-Life"}),(0,zt.jsxs)("p",{className:"text-white",children:[e.half_life,"d"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Confidence"}),(0,zt.jsxs)("p",{className:"text-teal-400",children:[(100*e.confidence).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Cointegration"}),(0,zt.jsxs)("p",{className:e.cointegration_pvalue<.05?"text-emerald-400":"text-amber-400",children:["p=",e.cointegration_pvalue]})]})]})]},t))})})]})},oSe=e=>{var t,n,a,r,s;let{data:i}=e;const[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(null);if((0,o.useEffect)(()=>{(async()=>{try{const[e,t,n]=await Promise.all([fetch("".concat(rSe,"/quant/portfolio/strategies")).then(e=>e.json()),fetch("".concat(rSe,"/quant/portfolio/risk-parity")).then(e=>e.json()),fetch("".concat(rSe,"/quant/portfolio/pure-alpha")).then(e=>e.json())]);c((null===e||void 0===e?void 0:e.strategies)||[]),d(t),p(n)}catch(jEe){console.error(jEe)}})()},[]),!i)return(0,zt.jsx)(dSe,{message:"Portfolio data unavailable"});const f=i.weights||{};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"portfolio-panel",children:[(0,zt.jsxs)(vx,{title:i.strategy||"All Weather Portfolio",icon:"\ud83c\udf24\ufe0f",accent:"blue",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:i.description}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Expected Return"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-emerald-400",children:[i.expected_annual_return,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Volatility"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-amber-400",children:[i.expected_volatility,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Sharpe Ratio"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-blue-400",children:i.sharpe_ratio})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Max Drawdown"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-red-400",children:[i.max_historical_drawdown,"%"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:"Asset Allocation"}),(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(f).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-24 text-xs text-slate-400 capitalize",children:t.replace(/_/g," ")}),(0,zt.jsx)("div",{className:"flex-1",children:(0,zt.jsx)(aSe,{value:100*n,className:"h-3 bg-white/10"})}),(0,zt.jsxs)("div",{className:"w-12 text-right text-sm font-mono text-white",children:[(100*n).toFixed(1),"%"]})]},t)})})]}),i.assets_mapping&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:"ETF Mapping"}),(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(i.assets_mapping).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,zt.jsx)("span",{className:"text-slate-400 capitalize w-24",children:t.replace(/_/g," ")}),(0,zt.jsx)("span",{className:"text-teal-400",children:n.join(", ")})]},t)})})]})]})]}),l.length>0&&(0,zt.jsx)(vx,{title:"Strategy Comparison",icon:"\ud83d\udcc8",accent:"purple",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.map(e=>(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsx)("h4",{className:"text-white font-medium mb-2",children:e.name}),(0,zt.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Risk Level"}),(0,zt.jsx)("span",{className:"capitalize ".concat("low"===e.risk_level?"text-emerald-400":"medium"===e.risk_level?"text-amber-400":"text-red-400"),children:e.risk_level})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Expected Return"}),(0,zt.jsxs)("span",{className:"text-teal-400",children:[e.expected_return,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Volatility"}),(0,zt.jsxs)("span",{className:"text-amber-400",children:[e.expected_volatility,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Sharpe"}),(0,zt.jsx)("span",{className:"text-blue-400",children:e.sharpe})]})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-3",children:e.suitable_for})]},e.type))})}),h&&(0,zt.jsxs)(vx,{title:"Pure Alpha Strategy",icon:"\u26a1",accent:"amber",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:h.description}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Gross Exposure"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:[(100*(null===(t=h.exposure)||void 0===t?void 0:t.gross)).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Net Exposure"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:[(100*(null===(n=h.exposure)||void 0===n?void 0:n.net)).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Long"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:[(100*(null===(a=h.exposure)||void 0===a?void 0:a.long)).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Short"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-red-400",children:[(100*(null===(r=h.exposure)||void 0===r?void 0:r.short)).toFixed(0),"%"]})]})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Current Positions"}),(0,zt.jsx)("div",{className:"space-y-2",children:null===(s=h.signals)||void 0===s?void 0:s.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"long"===e.signal?"text-emerald-400":"text-red-400",children:"long"===e.signal?(0,zt.jsx)(owe,{size:14}):(0,zt.jsx)(lwe,{size:14})}),(0,zt.jsx)("span",{className:"text-white text-sm",children:e.asset})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:e.alpha_source}),(0,zt.jsxs)("span",{className:e.weight>=0?"text-emerald-400":"text-red-400",children:[e.weight>=0?"+":"",(100*e.weight).toFixed(0),"%"]})]})]},t))})]})]})},lSe=e=>{var t,n;let{data:a}=e;const[r,s]=(0,o.useState)(null),[i,l]=(0,o.useState)("hedge_fund"),[c,u]=(0,o.useState)(!1),d=[{id:"central_bank",label:"Central Bank",icon:Bke},{id:"hedge_fund",label:"Hedge Fund",icon:Tm},{id:"sovereign_wealth",label:"Sovereign Wealth",icon:Im},{id:"government",label:"Government",icon:Uke},{id:"bank",label:"Commercial Bank",icon:Mm}];if((0,o.useEffect)(()=>{(async()=>{u(!0);try{const e=await fetch("".concat(rSe,"/quant/institutional/advisory/").concat(i)),t=await e.json();s(t)}catch(jEe){console.error(jEe)}u(!1)})()},[i]),!a)return(0,zt.jsx)(dSe,{message:"Institutional data unavailable"});const h=e=>({low:"border-emerald-500 bg-emerald-500/10",moderate:"border-amber-500 bg-amber-500/10",elevated:"border-orange-500 bg-orange-500/10",high:"border-red-500 bg-red-500/10",critical:"border-red-600 bg-red-600/20"}[e]||"border-slate-500 bg-slate-500/10");return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"institutional-panel",children:[(0,zt.jsxs)(vx,{title:"Systemic Risk Dashboard",icon:"\ud83d\udee1\ufe0f",accent:"amber",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"p-4 rounded-xl ".concat(h(a.overall_risk_level)," border-2"),children:(0,zt.jsx)(Dm,{size:32,className:"low"===a.overall_risk_level?"text-emerald-400":"moderate"===a.overall_risk_level?"text-amber-400":"elevated"===a.overall_risk_level?"text-orange-400":"text-red-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Overall Risk Level"}),(0,zt.jsx)("p",{className:"text-2xl font-bold uppercase ".concat("low"===a.overall_risk_level?"text-emerald-400":"moderate"===a.overall_risk_level?"text-amber-400":"elevated"===a.overall_risk_level?"text-orange-400":"text-red-400"),children:a.overall_risk_level})]})]}),(0,zt.jsxs)("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Aggregate Risk Score"}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:a.aggregate_risk_score}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"out of 100"})]})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:null===(t=a.indicators)||void 0===t?void 0:t.slice(0,8).map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg border ".concat(h(e.status)),children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.name}),(0,zt.jsx)("p",{className:"text-lg font-bold text-white",children:e.current_value}),(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:["rising"===e.trend&&(0,zt.jsx)(owe,{size:12,className:"text-red-400"}),"falling"===e.trend&&(0,zt.jsx)(lwe,{size:12,className:"text-emerald-400"}),"stable"===e.trend&&(0,zt.jsx)(rye,{size:12,className:"text-slate-400"}),(0,zt.jsx)("span",{className:"text-slate-500 capitalize",children:e.trend})]})]},t))}),(null===(n=a.key_concerns)||void 0===n?void 0:n.length)>0&&(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,zt.jsxs)("p",{className:"text-xs text-amber-400 mb-2 flex items-center gap-2",children:[(0,zt.jsx)(y1,{size:14})," Key Concerns"]}),(0,zt.jsx)("ul",{className:"space-y-1",children:a.key_concerns.map((e,t)=>(0,zt.jsxs)("li",{className:"text-sm text-slate-400",children:["\u2022 ",e]},t))})]}),(0,zt.jsx)("div",{className:"mt-4 p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,zt.jsx)("p",{className:"text-sm text-white",children:a.recommendation})})]}),(0,zt.jsxs)(vx,{title:"Institutional Advisory",icon:"\ud83d\udccb",accent:"purple",children:[(0,zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:d.map(e=>(0,zt.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all ".concat(i===e.id?"bg-purple-500/20 border border-purple-500/30 text-purple-400":"bg-white/5 border border-white/10 text-slate-400 hover:bg-white/10"),"data-testid":"client-type-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))}),c?(0,zt.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Loading advisory..."}):r?(0,zt.jsx)(cSe,{data:r,clientType:i}):(0,zt.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Select a client type"})]})]})},cSe=e=>{let{data:t,clientType:n}=e;return!t||t.error?(0,zt.jsx)("div",{className:"text-slate-500",children:"Advisory unavailable"}):"hedge_fund"===n&&t.market_regime?(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Market Regime"}),(0,zt.jsx)("p",{className:"text-lg font-medium text-white",children:t.market_regime.current}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:Object.entries(t.market_regime.regime_indicators||{}).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500 capitalize",children:t.replace(/_/g," ")}),(0,zt.jsx)("span",{className:"text-white",children:n})]},t)})})]}),t.alpha_opportunities&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Alpha Opportunities"}),(0,zt.jsx)("div",{className:"space-y-2",children:t.alpha_opportunities.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5",children:[(0,zt.jsx)("span",{className:"text-white text-sm",children:e.opportunity}),(0,zt.jsxs)("span",{className:"text-teal-400 text-xs",children:["Sharpe: ",e.expected_sharpe]})]},t))})]})]}):"central_bank"===n&&t.executive_briefing?(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("h4",{className:"text-white font-medium mb-2",children:t.executive_briefing.title}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:t.executive_briefing.summary})]}),t.policy_recommendations&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Policy Recommendations"}),(0,zt.jsx)("div",{className:"space-y-2",children:t.policy_recommendations.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded bg-white/5 border-l-2 border-teal-500",children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:e.recommendation}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.rationale})]},t))})]})]}):(0,zt.jsx)("div",{className:"space-y-4",children:(0,zt.jsx)("pre",{className:"text-xs text-slate-400 overflow-auto max-h-96 p-4 rounded bg-white/5",children:JSON.stringify(t,null,2)})})},uSe=e=>{let{label:t,value:n,icon:a,color:r}=e;const s={teal:"bg-teal-500/20 text-teal-400 border-teal-500/30",purple:"bg-purple-500/20 text-purple-400 border-purple-500/30",blue:"bg-blue-500/20 text-blue-400 border-blue-500/30",emerald:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",amber:"bg-amber-500/20 text-amber-400 border-amber-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30"};return(0,zt.jsx)("div",{className:"p-4 rounded-xl border ".concat(s[r]||s.teal),children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,zt.jsx)(a,{size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:t}),(0,zt.jsx)("p",{className:"text-xl font-bold",children:n})]})]})})},dSe=e=>{let{message:t}=e;return(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-500",children:[(0,zt.jsx)(y1,{size:32,className:"mb-4"}),(0,zt.jsx)("p",{children:t})]})},hSe=()=>{var e;const[t,n]=(0,o.useState)("macro"),[a,r]=(0,o.useState)(!0),[s,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(null),[f,m]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{r(!0);try{const[e,t,n,a,r]=await Promise.all([fetch("".concat(rSe,"/quant/macro/dalio-principles")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/inefficiency/summary")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/portfolio/all-weather")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/ai/status")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/institutional/systemic-risk")).then(e=>e.json()).catch(()=>null)]);i(e),c(t),d(n),p(a),m(r)}catch(e){console.error("Error fetching quant data:",e)}r(!1)})()},[]);return a?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"quant-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"quantitative-center",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Om,{className:"text-teal-400"}),"Bridgewater Quantitative Research"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Ray Dalio's Principles-based Institutional Analysis"})]}),(0,zt.jsxs)("button",{onClick:async()=>{x(!0),r(!0);try{const[e,t,n,a,r]=await Promise.all([fetch("".concat(rSe,"/quant/macro/dalio-principles")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/inefficiency/summary")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/portfolio/all-weather")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/ai/status")).then(e=>e.json()).catch(()=>null),fetch("".concat(rSe,"/quant/institutional/systemic-risk")).then(e=>e.json()).catch(()=>null)]);i(e),c(t),d(n),p(a),m(r)}catch(e){console.error("Error fetching quant data:",e)}r(!1),x(!1)},disabled:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-teal-500/20 border border-teal-500/30 text-teal-400 hover:bg-teal-500/30 transition-all disabled:opacity-50","data-testid":"refresh-quant-btn",children:[(0,zt.jsx)(Swe,{size:16,className:g?"animate-spin":""}),"Refresh Data"]})]}),h&&(0,zt.jsx)("div",{className:"p-3 rounded-lg border ".concat(h.ai_enabled?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"),children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(Rm,{size:20,className:h.ai_enabled?"text-emerald-400":"text-amber-400"}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsxs)("p",{className:"text-sm text-white font-medium",children:["AI Research Analyst: ",(0,zt.jsx)("span",{className:h.ai_enabled?"text-emerald-400":"text-amber-400",children:null===(e=h.status)||void 0===e?void 0:e.toUpperCase()})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["Provider: ",h.provider]})]})]})}),(0,zt.jsxs)(bje,{value:t,onValueChange:n,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(kje,{value:"macro",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400","data-testid":"tab-macro",children:[(0,zt.jsx)(Im,{size:14,className:"mr-1"})," Macro Engine"]}),(0,zt.jsxs)(kje,{value:"inefficiency",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400","data-testid":"tab-inefficiency",children:[(0,zt.jsx)(Am,{size:14,className:"mr-1"})," Inefficiencies"]}),(0,zt.jsxs)(kje,{value:"portfolio",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400","data-testid":"tab-portfolio",children:[(0,zt.jsx)(Cm,{size:14,className:"mr-1"})," Portfolio"]}),(0,zt.jsxs)(kje,{value:"institutional",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-institutional",children:[(0,zt.jsx)(Bke,{size:14,className:"mr-1"})," Institutional"]})]}),(0,zt.jsx)(Nje,{value:"macro",className:"mt-6",children:(0,zt.jsx)(sSe,{data:s})}),(0,zt.jsx)(Nje,{value:"inefficiency",className:"mt-6",children:(0,zt.jsx)(iSe,{data:l})}),(0,zt.jsx)(Nje,{value:"portfolio",className:"mt-6",children:(0,zt.jsx)(oSe,{data:u})}),(0,zt.jsx)(Nje,{value:"institutional",className:"mt-6",children:(0,zt.jsx)(lSe,{data:f})})]})]})},pSe=Nm("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),fSe=Nm("vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]),mSe=Nm("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),gSe=["className","type"],xSe=o.forwardRef((e,t)=>{let{className:n,type:a}=e,r=u(e,gSe);return(0,zt.jsx)("input",m({type:a,className:gx("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},r))});xSe.displayName="Input";const vSe=["class","className"],ySe=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,bSe=eg,wSe=["className","variant","size","asChild"],kSe=(NSe="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",jSe={variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if(null==(null===jSe||void 0===jSe?void 0:jSe.variants))return bSe(NSe,null===e||void 0===e?void 0:e.class,null===e||void 0===e?void 0:e.className);const{variants:n,defaultVariants:a}=jSe,r=Object.keys(n).map(t=>{const r=null===e||void 0===e?void 0:e[t],s=null===a||void 0===a?void 0:a[t];if(null===r)return null;const i=ySe(r)||ySe(s);return n[t][i]}),s=e&&Object.entries(e).reduce((e,t)=>{let[n,a]=t;return void 0===a||(e[n]=a),e},{}),i=null===jSe||void 0===jSe||null===(t=jSe.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:n,className:r}=t,i=u(t,vSe);return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(m(m({},a),s)[t]):m(m({},a),s)[t]===n})?[...e,n,r]:e},[]);return bSe(NSe,r,i,null===e||void 0===e?void 0:e.class,null===e||void 0===e?void 0:e.className)});var NSe,jSe;const SSe=o.forwardRef((e,t)=>{let{className:n,variant:a,size:r,asChild:s=!1}=e,i=u(e,wSe);const o=s?Oje:"button";return(0,zt.jsx)(o,m({className:gx(kSe({variant:a,size:r,className:n})),ref:t},i))});SSe.displayName="Button";const CSe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),ESe=e=>{let{market:t,onSelect:n,showLeague:a}=e;const r=t.yes_price||.5,s=t.no_price||.5,i=(o=t.category,{sports:{icon:pSe,color:"text-emerald-400 bg-emerald-500/20"},politics:{icon:fSe,color:"text-blue-400 bg-blue-500/20"},crypto:{icon:mSe,color:"text-amber-400 bg-amber-500/20"},economics:{icon:Bke,color:"text-purple-400 bg-purple-500/20"}}[o]||{icon:Im,color:"text-slate-400 bg-slate-500/20"});var o;const l=i.icon;return(0,zt.jsxs)(uu.div,{whileHover:{scale:1.02},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-teal-500/30 cursor-pointer transition-all",onClick:n,"data-testid":"market-".concat(t.market_id),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(i.color),children:(0,zt.jsx)(l,{size:16})}),a&&t.league&&(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-slate-400",children:t.league})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Volume"}),(0,zt.jsxs)("p",{className:"text-sm font-mono text-white",children:["$",(t.total_volume||0).toLocaleString()]})]})]}),(0,zt.jsx)("h3",{className:"text-white font-medium mb-3 line-clamp-2",children:t.title}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,zt.jsxs)("span",{className:"text-emerald-400",children:["YES ",(100*r).toFixed(0),"\xa2"]}),(0,zt.jsxs)("span",{className:"text-red-400",children:["NO ",(100*s).toFixed(0),"\xa2"]})]}),(0,zt.jsx)("div",{className:"h-2 rounded-full bg-red-500/30 overflow-hidden",children:(0,zt.jsx)("div",{className:"h-full bg-emerald-500 transition-all",style:{width:"".concat(100*r,"%")}})}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 text-center",children:[t.implied_probability," implied probability"]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(wwe,{size:12}),t.time_to_resolution||"TBD"]}),(0,zt.jsx)(Jm,{size:14})]})]})},TSe=e=>{let{market:t,tradeSide:n,setTradeSide:a,tradeAmount:r,setTradeAmount:s,userBalance:i,onTrade:o,onClose:l}=e;const c="yes"===n?t.yes_price:t.no_price,u=r?parseFloat(r)/c:0,d=1*u,h=d-parseFloat(r||0);return(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:l,children:(0,zt.jsxs)(uu.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),"data-testid":"trade-modal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("h3",{className:"text-lg font-bold text-white",children:"Trade"}),(0,zt.jsx)("button",{onClick:l,className:"text-slate-500 hover:text-white",children:(0,zt.jsx)(Qm,{size:20})})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:t.title}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[(0,zt.jsxs)("button",{onClick:()=>a("yes"),className:"p-3 rounded-lg border transition-all ".concat("yes"===n?"bg-emerald-500/20 border-emerald-500 text-emerald-400":"bg-white/5 border-white/10 text-slate-400"),"data-testid":"trade-yes",children:[(0,zt.jsx)(Um,{size:16,className:"mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-sm font-medium",children:"YES"}),(0,zt.jsxs)("p",{className:"text-xs",children:[(100*t.yes_price).toFixed(0),"\xa2"]})]}),(0,zt.jsxs)("button",{onClick:()=>a("no"),className:"p-3 rounded-lg border transition-all ".concat("no"===n?"bg-red-500/20 border-red-500 text-red-400":"bg-white/5 border-white/10 text-slate-400"),"data-testid":"trade-no",children:[(0,zt.jsx)(Qm,{size:16,className:"mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-sm font-medium",children:"NO"}),(0,zt.jsxs)("p",{className:"text-xs",children:[(100*t.no_price).toFixed(0),"\xa2"]})]})]}),(0,zt.jsxs)("div",{className:"mb-4",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Amount ($)"}),(0,zt.jsx)(xSe,{type:"number",value:r,onChange:e=>s(e.target.value),placeholder:"Enter amount",className:"bg-white/5 border-white/10 text-white","data-testid":"trade-amount"}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[(0,zt.jsxs)("span",{children:["Balance: $",i.toFixed(2)]}),(0,zt.jsx)("button",{onClick:()=>s(i.toString()),className:"text-teal-400 hover:underline",children:"Max"})]})]}),r&&parseFloat(r)>0&&(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 mb-4 space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Shares"}),(0,zt.jsx)("span",{className:"text-white",children:u.toFixed(2)})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Max Payout"}),(0,zt.jsxs)("span",{className:"text-white",children:["$",d.toFixed(2)]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Potential Profit"}),(0,zt.jsxs)("span",{className:"text-emerald-400",children:["+$",h.toFixed(2)]})]})]}),(0,zt.jsxs)(SSe,{onClick:o,disabled:!r||parseFloat(r)<=0||parseFloat(r)>i,className:"w-full ".concat("yes"===n?"bg-emerald-500 hover:bg-emerald-600":"bg-red-500 hover:bg-red-600"),"data-testid":"confirm-trade",children:["Buy ",n.toUpperCase()," @ ",(100*c).toFixed(0),"\xa2"]})]})})},ISe=e=>{let{positions:t}=e;return 0===t.length?(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-500",children:[(0,zt.jsx)(Tm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No positions yet. Start trading to see your portfolio here."})]}):(0,zt.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>{var n,a,r,s;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("h4",{className:"text-white font-medium mb-2",children:e.market_title}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"YES Shares"}),(0,zt.jsx)("p",{className:"text-emerald-400",children:(null===(n=e.yes_shares)||void 0===n?void 0:n.toFixed(2))||0})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"NO Shares"}),(0,zt.jsx)("p",{className:"text-red-400",children:(null===(a=e.no_shares)||void 0===a?void 0:a.toFixed(2))||0})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Total Value"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",(null===(r=e.total_value)||void 0===r?void 0:r.toFixed(2))||0]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Unrealized P&L"}),(0,zt.jsxs)("p",{className:e.unrealized_pnl>=0?"text-emerald-400":"text-red-400",children:[e.unrealized_pnl>=0?"+":"","$",(null===(s=e.unrealized_pnl)||void 0===s?void 0:s.toFixed(2))||0]})]})]})]},t)})})},ASe=e=>{let{leaderboard:t}=e;return(0,zt.jsx)(vx,{title:"Top Predictors",icon:"\ud83c\udfc6",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-2",children:t.slice(0,20).map((e,t)=>{return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(t<3?"bg-amber-500/10 border border-amber-500/20":"bg-white/5"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-xl w-8",children:(n=e.rank,1===n?"\ud83e\udd47":2===n?"\ud83e\udd48":3===n?"\ud83e\udd49":n)}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:e.user_id}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.positions_count," positions"]})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-bold ".concat(e.total_pnl>=0?"text-emerald-400":"text-red-400"),children:[e.total_pnl>=0?"+":"","$",e.total_pnl.toFixed(2)]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["Win rate: ",(100*e.win_rate).toFixed(0),"%"]})]})]},t);var n})})})},_Se=()=>{const[e,t]=(0,o.useState)("trending"),[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)([]),[m,g]=(0,o.useState)(1e4),[x,v]=(0,o.useState)(!0),[y,b]=(0,o.useState)(""),[w,k]=(0,o.useState)([]),[N,j]=(0,o.useState)(null),[S,C]=(0,o.useState)(""),[E,T]=(0,o.useState)("yes"),I="demo_user";(0,o.useEffect)(()=>{(async()=>{v(!0);try{const[e,t,n,r,i,o,c]=await Promise.all([fetch("".concat(CSe,"/predictions/trending")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/sports")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/politics")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/crypto")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/leaderboard")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/positions/").concat(I)).then(e=>e.json()),fetch("".concat(CSe,"/predictions/balance/").concat(I)).then(e=>e.json())]);a(e||[]),s(t||[]),l(n||[]),u(r||[]),h(i||[]),f(o||[]),g((null===c||void 0===c?void 0:c.balance)||1e4)}catch(e){console.error("Error fetching prediction data:",e)}v(!1)})()},[]);const A=async()=>{if(y.trim())try{const e=await fetch("".concat(CSe,"/predictions/search?q=").concat(encodeURIComponent(y))),t=await e.json();k(t||[])}catch(jEe){console.error(jEe)}};return x?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"prediction-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"prediction-hub",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Am,{className:"text-teal-400"}),"Prediction Markets"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Sports \u2022 Politics \u2022 Crypto \u2022 Events"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-4",children:(0,zt.jsxs)("div",{className:"px-4 py-2 rounded-lg bg-teal-500/20 border border-teal-500/30",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Balance"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-teal-400",children:["$",m.toLocaleString()]})]})})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)(xSe,{value:y,onChange:e=>b(e.target.value),placeholder:"Search markets (e.g., 'Bitcoin', 'Super Bowl', 'Fed')",className:"bg-white/5 border-white/10 text-white",onKeyPress:e=>"Enter"===e.key&&A(),"data-testid":"search-input"}),(0,zt.jsx)(SSe,{onClick:A,variant:"outline",className:"border-teal-500/30 text-teal-400",children:(0,zt.jsx)(b1,{size:18})})]}),w.length>0&&(0,zt.jsx)(vx,{title:"Search Results",icon:"\ud83d\udd0d",accent:"blue",children:(0,zt.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,zt.jsx)(ESe,{market:e,onSelect:()=>j(e)},e.market_id))})}),(0,zt.jsxs)(bje,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(kje,{value:"trending",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400","data-testid":"tab-trending",children:[(0,zt.jsx)(Wm,{size:14,className:"mr-1"})," Trending"]}),(0,zt.jsxs)(kje,{value:"sports",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400","data-testid":"tab-sports",children:[(0,zt.jsx)(pSe,{size:14,className:"mr-1"})," Sports"]}),(0,zt.jsxs)(kje,{value:"politics",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400","data-testid":"tab-politics",children:[(0,zt.jsx)(fSe,{size:14,className:"mr-1"})," Politics"]}),(0,zt.jsxs)(kje,{value:"crypto",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-crypto",children:[(0,zt.jsx)(mSe,{size:14,className:"mr-1"})," Crypto"]}),(0,zt.jsxs)(kje,{value:"positions",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400","data-testid":"tab-positions",children:[(0,zt.jsx)(Tm,{size:14,className:"mr-1"})," My Positions"]}),(0,zt.jsxs)(kje,{value:"leaderboard",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-leaderboard",children:[(0,zt.jsx)(Xm,{size:14,className:"mr-1"})," Leaderboard"]})]}),(0,zt.jsx)(Nje,{value:"trending",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(e=>(0,zt.jsx)(ESe,{market:e,onSelect:()=>j(e)},e.market_id))})}),(0,zt.jsx)(Nje,{value:"sports",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(e=>(0,zt.jsx)(ESe,{market:e,onSelect:()=>j(e),showLeague:!0},e.market_id))})}),(0,zt.jsx)(Nje,{value:"politics",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(e=>(0,zt.jsx)(ESe,{market:e,onSelect:()=>j(e)},e.market_id))})}),(0,zt.jsx)(Nje,{value:"crypto",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(e=>(0,zt.jsx)(ESe,{market:e,onSelect:()=>j(e)},e.market_id))})}),(0,zt.jsx)(Nje,{value:"positions",className:"mt-6",children:(0,zt.jsx)(ISe,{positions:p})}),(0,zt.jsx)(Nje,{value:"leaderboard",className:"mt-6",children:(0,zt.jsx)(ASe,{leaderboard:d})})]}),(0,zt.jsx)(an,{children:N&&(0,zt.jsx)(TSe,{market:N,tradeSide:E,setTradeSide:T,tradeAmount:S,setTradeAmount:C,userBalance:m,onTrade:async()=>{if(N&&S)try{const e=await fetch("".concat(CSe,"/predictions/buy"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:I,market_id:N.market_id,side:E,amount:parseFloat(S)})}),t=await e.json();t.success&&(g(t.new_balance),C(""),j(null),(async()=>{v(!0);try{const[e,t,n,r,i,o,c]=await Promise.all([fetch("".concat(CSe,"/predictions/trending")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/sports")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/politics")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/crypto")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/leaderboard")).then(e=>e.json()),fetch("".concat(CSe,"/predictions/positions/").concat(I)).then(e=>e.json()),fetch("".concat(CSe,"/predictions/balance/").concat(I)).then(e=>e.json())]);a(e||[]),s(t||[]),l(n||[]),u(r||[]),h(i||[]),f(o||[]),g((null===c||void 0===c?void 0:c.balance)||1e4)}catch(e){console.error("Error fetching prediction data:",e)}v(!1)})())}catch(jEe){console.error(jEe)}},onClose:()=>j(null)})})]})};var OSe;const RSe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),PSe=null===(OSe="https://tradehub-380.preview.emergentagent.com")?void 0:OSe.replace("https://","wss://").replace("http://","ws://"),MSe=e=>{let{label:t,value:n,color:a="white"}=e;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:t}),(0,zt.jsx)("p",{className:"text-lg font-bold ".concat({white:"text-white",emerald:"text-emerald-400",red:"text-red-400",amber:"text-amber-400"}[a]),children:n})]})},DSe=e=>{var t,n,a,r,s,i,o,l,c,u,d,h,p,f,m,g,x,v;let{trader:y,onCopy:b,getVerificationBadge:w,getRiskBadge:k}=e;const N=w(y.verification),j=k(null===(t=y.strategy)||void 0===t?void 0:t.risk_level),S=j.icon;return(0,zt.jsxs)(uu.div,{whileHover:{scale:1.01},className:"p-5 rounded-xl bg-white/5 border border-white/10 hover:border-teal-500/30 transition-all","data-testid":"trader-".concat(y.trader_id),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)("h3",{className:"text-white font-semibold",children:y.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded border ".concat(N.color),children:N.label})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(j.color," flex items-center gap-1"),children:[(0,zt.jsx)(S,{size:10}),null===(n=y.strategy)||void 0===n||null===(a=n.risk_level)||void 0===a?void 0:a.replace("_"," ")]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:null===(r=y.strategy)||void 0===r||null===(s=r.type)||void 0===s?void 0:s.replace("_"," ")})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Followers"}),(0,zt.jsx)("p",{className:"text-white font-semibold",children:null===(i=y.social)||void 0===i||null===(o=i.followers_count)||void 0===o?void 0:o.toLocaleString()})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Return"}),(0,zt.jsxs)("p",{className:"text-sm font-bold ".concat((null===(l=y.performance)||void 0===l?void 0:l.total_return)>=0?"text-emerald-400":"text-red-400"),children:[(null===(c=y.performance)||void 0===c?void 0:c.total_return)>=0?"+":"",null===(u=y.performance)||void 0===u?void 0:u.total_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Monthly"}),(0,zt.jsxs)("p",{className:"text-sm font-bold ".concat((null===(d=y.performance)||void 0===d?void 0:d.monthly_return)>=0?"text-emerald-400":"text-red-400"),children:[(null===(h=y.performance)||void 0===h?void 0:h.monthly_return)>=0?"+":"",null===(p=y.performance)||void 0===p?void 0:p.monthly_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-sm font-bold text-white",children:[null===(f=y.performance)||void 0===f?void 0:f.win_rate,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Sharpe"}),(0,zt.jsx)("p",{className:"text-sm font-bold text-blue-400",children:null===(m=y.performance)||void 0===m?void 0:m.sharpe_ratio})]})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mb-4 line-clamp-2",children:null===(g=y.strategy)||void 0===g?void 0:g.description}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"text-xs text-slate-500",children:["Min: $",null===(x=y.fees)||void 0===x?void 0:x.min_investment," \u2022 ",null===(v=y.fees)||void 0===v?void 0:v.performance_fee,"% perf fee"]}),(0,zt.jsxs)(SSe,{onClick:b,size:"sm",className:"bg-teal-500 hover:bg-teal-600",children:[(0,zt.jsx)(kye,{size:14,className:"mr-1"})," Copy"]})]})]})},FSe=e=>{var t,n,a,r,s;let{trader:i,rank:o,onCopy:l,getVerificationBadge:c}=e;const u=c(i.verification);return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl ".concat(o<=3?"bg-amber-500/10 border border-amber-500/20":"bg-white/5 border border-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("span",{className:"text-2xl w-10 text-center",children:(e=>1===e?"\ud83e\udd47":2===e?"\ud83e\udd48":3===e?"\ud83e\udd49":e)(o)}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:i.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded border ".concat(u.color),children:u.label})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[null===(t=i.social)||void 0===t||null===(n=t.followers_count)||void 0===n?void 0:n.toLocaleString()," followers \u2022 $",((null===(a=i.social)||void 0===a?void 0:a.total_aum)/1e6).toFixed(1),"M AUM"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-6",children:[(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Return"}),(0,zt.jsxs)("p",{className:"text-lg font-bold ".concat((null===(r=i.performance)||void 0===r?void 0:r.total_return)>=0?"text-emerald-400":"text-red-400"),children:["+",null===(s=i.performance)||void 0===s?void 0:s.total_return,"%"]})]}),(0,zt.jsx)(SSe,{onClick:l,size:"sm",variant:"outline",className:"border-teal-500/30 text-teal-400",children:"Copy"})]})]})},LSe=e=>{var t,n,a,r,s,i,o,l,c;let{copy:u,onStop:d}=e;const h=(null===(t=u.performance)||void 0===t?void 0:t.total_pnl)>=0?"text-emerald-400":"text-red-400";return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:u.trader_name}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["Started: ",new Date(u.created_at).toLocaleDateString()]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[u.paused&&(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-400",children:"Paused"}),u.is_active?(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-400",children:"Active"}):(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-slate-500/20 text-slate-400",children:"Stopped"})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Allocated"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(n=u.allocated_amount)||void 0===n?void 0:n.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Current Value"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(a=u.performance)||void 0===a||null===(r=a.current_value)||void 0===r?void 0:r.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"P&L"}),(0,zt.jsxs)("p",{className:h,children:[(null===(s=u.performance)||void 0===s?void 0:s.total_pnl)>=0?"+":"","$",null===(i=u.performance)||void 0===i||null===(o=i.total_pnl)||void 0===o?void 0:o.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Return"}),(0,zt.jsxs)("p",{className:h,children:[null===(l=u.performance)||void 0===l?void 0:l.pnl_pct,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Trades Copied"}),(0,zt.jsx)("p",{className:"text-white",children:null===(c=u.performance)||void 0===c?void 0:c.trades_copied})]})]}),u.is_active&&(0,zt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,zt.jsxs)(SSe,{variant:"outline",size:"sm",className:"border-white/10",children:[(0,zt.jsx)(lye,{size:14,className:"mr-1"})," Settings"]}),(0,zt.jsxs)(SSe,{variant:"outline",size:"sm",className:"border-red-500/30 text-red-400",onClick:d,children:[(0,zt.jsx)(Qm,{size:14,className:"mr-1"})," Stop"]})]})]})},zSe=e=>{var t,n,a,r,s,i,o;let{trader:l,copyAmount:c,setCopyAmount:u,onCopy:d,onClose:h,getVerificationBadge:p,getRiskBadge:f}=e;const m=p(l.verification),g=(null===(t=l.fees)||void 0===t?void 0:t.min_investment)||100;return(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:h,children:(0,zt.jsxs)(uu.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),"data-testid":"copy-modal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("h3",{className:"text-lg font-bold text-white",children:"Start Copying"}),(0,zt.jsx)("button",{onClick:h,className:"text-slate-500 hover:text-white",children:(0,zt.jsx)(Qm,{size:20})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:l.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded border ".concat(m.color),children:m.label})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"Return"}),(0,zt.jsxs)("p",{className:"text-emerald-400",children:["+",null===(n=l.performance)||void 0===n?void 0:n.total_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-white",children:[null===(a=l.performance)||void 0===a?void 0:a.win_rate,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"Sharpe"}),(0,zt.jsx)("p",{className:"text-blue-400",children:null===(r=l.performance)||void 0===r?void 0:r.sharpe_ratio})]})]})]}),(0,zt.jsxs)("div",{className:"mb-4",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Investment Amount ($)"}),(0,zt.jsx)(xSe,{type:"number",value:c,onChange:e=>u(e.target.value),placeholder:"Min: $".concat(g),className:"bg-white/5 border-white/10 text-white","data-testid":"copy-amount-input"})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 mb-4",children:[(0,zt.jsx)("p",{className:"text-xs text-amber-400 mb-1",children:"Fee Structure"}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Performance Fee"}),(0,zt.jsxs)("span",{className:"text-white",children:[null===(s=l.fees)||void 0===s?void 0:s.performance_fee,"% of profits"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Management Fee"}),(0,zt.jsxs)("span",{className:"text-white",children:[null===(i=l.fees)||void 0===i?void 0:i.management_fee,"% annual"]})]})]}),(0,zt.jsxs)(SSe,{onClick:d,disabled:!c||parseFloat(c)<g,className:"w-full bg-teal-500 hover:bg-teal-600","data-testid":"confirm-copy-btn",children:[(0,zt.jsx)(kye,{size:16,className:"mr-2"}),"Start Copying ",null===(o=l.name)||void 0===o?void 0:o.split(" ")[0]]})]})})},BSe=()=>{const[e,t]=(0,o.useState)("discover"),[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)([]),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0),[p,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(""),[x,v]=(0,o.useState)("total_return"),[y,b]=(0,o.useState)(!1),[w,k]=(0,o.useState)([]),[N,j]=(0,o.useState)([]),S=(0,o.useRef)(null),C="demo_user";(0,o.useEffect)(()=>{const e=()=>{if(!PSe)return;const t=new WebSocket("".concat(PSe,"/ws/copy-trading/").concat(C));t.onopen=()=>{console.log("Copy trading WebSocket connected"),b(!0)},t.onmessage=e=>{try{const t=JSON.parse(e.data);"trade_copied"===t.type?(k(e=>[t,...e.slice(0,49)]),j(e=>[t.your_trade,...e.slice(0,99)]),"Notification"in window&&"granted"===Notification.permission&&new Notification("Trade Copied!",{body:t.message,icon:"/logo192.png"})):"master_activity"===t.type&&k(e=>[t,...e.slice(0,49)])}catch(jEe){console.error("WS message parse error:",jEe)}},t.onclose=()=>{console.log("Copy trading WebSocket disconnected"),b(!1),setTimeout(e,5e3)},t.onerror=e=>{console.error("WebSocket error:",e),b(!1)},S.current=t};return e(),()=>{S.current&&S.current.close()}},[]);const E=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.current&&S.current.readyState===WebSocket.OPEN&&S.current.send(JSON.stringify({action:"subscribe",trader_id:e,settings:t}))},[]),T=(0,o.useCallback)(e=>{S.current&&S.current.readyState===WebSocket.OPEN&&S.current.send(JSON.stringify({action:"unsubscribe",trader_id:e}))},[]);(0,o.useEffect)(()=>{(async()=>{h(!0);try{const[e,t,n,r]=await Promise.all([fetch("".concat(RSe,"/copy/traders?sort_by=").concat(x)).then(e=>e.json()),fetch("".concat(RSe,"/copy/traders/top")).then(e=>e.json()),fetch("".concat(RSe,"/copy/relationships/").concat(C)).then(e=>e.json()),fetch("".concat(RSe,"/copy/portfolio/").concat(C)).then(e=>e.json())]);a(e||[]),s(t||[]),l(n||[]),u(r)}catch(e){console.error("Error fetching copy trading data:",e)}h(!1)})()},[x]);const I=e=>{const t={institutional:{color:"bg-purple-500/20 text-purple-400 border-purple-500/30",label:"Institutional"},professional:{color:"bg-blue-500/20 text-blue-400 border-blue-500/30",label:"Professional"},verified:{color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",label:"Verified"},unverified:{color:"bg-slate-500/20 text-slate-400 border-slate-500/30",label:"Unverified"}};return t[e]||t.unverified},A=e=>{const t={conservative:{color:"bg-emerald-500/20 text-emerald-400",icon:Dm},moderate:{color:"bg-amber-500/20 text-amber-400",icon:Tm},aggressive:{color:"bg-orange-500/20 text-orange-400",icon:Wm},ultra_aggressive:{color:"bg-red-500/20 text-red-400",icon:y1}};return t[e]||t.moderate};return d?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"copy-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"copy-trading-hub",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(kye,{className:"text-teal-400"}),"Copy Trading"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Mirror Institutional Strategies \u2022 One-Click Follow"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg ".concat(y?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:[y?(0,zt.jsx)(Rx,{size:14}):(0,zt.jsx)(Px,{size:14}),(0,zt.jsx)("span",{className:"text-xs font-mono",children:y?"Live Connected":"Reconnecting..."}),y&&w.length>0&&(0,zt.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-emerald-500/30 text-xs animate-pulse",children:w.length})]})]}),c&&c.total_invested>0&&(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,zt.jsx)(MSe,{label:"Total Invested",value:"$".concat(c.total_invested.toLocaleString())}),(0,zt.jsx)(MSe,{label:"Current Value",value:"$".concat(c.current_value.toLocaleString())}),(0,zt.jsx)(MSe,{label:"Total P&L",value:"".concat(c.total_pnl>=0?"+":"","$").concat(c.total_pnl.toLocaleString()),color:c.total_pnl>=0?"emerald":"red"}),(0,zt.jsx)(MSe,{label:"Net Return",value:"".concat(c.total_pnl_pct,"%"),color:c.total_pnl_pct>=0?"emerald":"red"}),(0,zt.jsx)(MSe,{label:"Active Copies",value:c.active_copies})]}),(0,zt.jsxs)(bje,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(kje,{value:"discover",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400","data-testid":"tab-discover",children:[(0,zt.jsx)(wye,{size:14,className:"mr-1"})," Discover Traders"]}),(0,zt.jsxs)(kje,{value:"top",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-top",children:[(0,zt.jsx)(uye,{size:14,className:"mr-1"})," Top Performers"]}),(0,zt.jsxs)(kje,{value:"live-feed",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400","data-testid":"tab-live",children:[(0,zt.jsx)(rye,{size:14,className:"mr-1"})," Live Feed",w.length>0&&(0,zt.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-emerald-500/30 text-xs",children:w.length})]}),(0,zt.jsxs)(kje,{value:"my-copies",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400","data-testid":"tab-copies",children:[(0,zt.jsx)(kye,{size:14,className:"mr-1"})," My Copies (",i.length,")"]})]}),(0,zt.jsxs)(Nje,{value:"discover",className:"mt-6",children:[(0,zt.jsx)("div",{className:"flex gap-2 mb-4 flex-wrap",children:["total_return","monthly_return","sharpe","win_rate","followers"].map(e=>(0,zt.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded-lg text-xs transition-all ".concat(x===e?"bg-teal-500/20 border border-teal-500/30 text-teal-400":"bg-white/5 border border-white/10 text-slate-400 hover:bg-white/10"),children:e.replace("_"," ").toUpperCase()},e))}),(0,zt.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:n.map(e=>(0,zt.jsx)(DSe,{trader:e,onCopy:()=>f(e),getVerificationBadge:I,getRiskBadge:A},e.trader_id))})]}),(0,zt.jsxs)(Nje,{value:"live-feed",className:"mt-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Live Trade Stream",icon:"\ud83d\udce1",accent:"emerald",children:(0,zt.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===w.length?(0,zt.jsx)("p",{className:"text-slate-500 text-sm text-center py-8",children:y?"Waiting for trades from master traders...":"Connecting to live stream..."}):w.map((e,t)=>{var n,a,r,s,i,o,l,c,u,d;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 rounded-lg border ".concat("trade_copied"===e.type?"bg-emerald-500/10 border-emerald-500/30":"bg-blue-500/10 border-blue-500/30"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsx)("span",{className:"text-white text-sm font-medium",children:(null===(a=e.event)||void 0===a?void 0:a.master_name)||e.master_name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("buy"===(null===(r=e.event)||void 0===r?void 0:r.action)||"buy"===(null===(s=e.your_trade)||void 0===s?void 0:s.action)?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:((null===(i=e.event)||void 0===i?void 0:i.action)||(null===(o=e.your_trade)||void 0===o?void 0:o.action)||"").toUpperCase()})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-300",children:e.message||"".concat(null===(l=e.event)||void 0===l?void 0:l.action," ").concat(null===(c=e.event)||void 0===c?void 0:c.quantity," ").concat(null===(u=e.event)||void 0===u?void 0:u.symbol)}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:new Date((null===(d=e.event)||void 0===d?void 0:d.timestamp)||e.timestamp).toLocaleTimeString()})]},(null===(n=e.event)||void 0===n?void 0:n.event_id)||t)})})}),(0,zt.jsx)(vx,{title:"Your Copied Trades",icon:"\ud83d\udccb",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===N.length?(0,zt.jsx)("p",{className:"text-slate-500 text-sm text-center py-8",children:"Your copied trades will appear here in real-time"}):N.map((e,t)=>{var n,a,r;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsx)("span",{className:"text-white text-sm",children:e.symbol}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("buy"===e.action?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:null===(n=e.action)||void 0===n?void 0:n.toUpperCase()})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs text-slate-400",children:[(0,zt.jsxs)("span",{children:["Qty: ",null===(a=e.copied_quantity)||void 0===a?void 0:a.toFixed(4)]}),(0,zt.jsxs)("span",{children:["@ $",null===(r=e.price)||void 0===r?void 0:r.toLocaleString()]})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Copy Ratio: ",e.copy_ratio,"x \u2022 ",e.status]})]},e.trade_id||t)})})})]}),(0,zt.jsx)("div",{className:"mt-4 flex justify-center",children:(0,zt.jsxs)(SSe,{onClick:async()=>{try{await fetch("".concat(RSe,"/copy-trading/ws/simulate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({master_trader_id:"MTR-001",master_name:"Bridgewater Alpha Fund",action:Math.random()>.5?"buy":"sell",symbol:["BTC","ETH","SOL"][Math.floor(3*Math.random())],quantity:(2*Math.random()).toFixed(4),price:45e3+5e3*Math.random()})})}catch(jEe){console.error(jEe)}},variant:"outline",className:"border-amber-500/30 text-amber-400","data-testid":"simulate-trade-btn",children:[(0,zt.jsx)(Wm,{size:14,className:"mr-2"})," Simulate Master Trade (Demo)"]})})]}),(0,zt.jsx)(Nje,{value:"top",className:"mt-6",children:(0,zt.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>(0,zt.jsx)(FSe,{trader:e,rank:t+1,onCopy:()=>f(e),getVerificationBadge:I},e.trader_id))})}),(0,zt.jsx)(Nje,{value:"my-copies",className:"mt-6",children:0===i.length?(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-500",children:[(0,zt.jsx)(kye,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No active copies. Start copying a trader to see your positions here."})]}):(0,zt.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,zt.jsx)(LSe,{copy:e,onStop:()=>(async(e,t)=>{try{await fetch("".concat(RSe,"/copy/stop"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({follower_id:C,relationship_id:e})}),t&&T(t);const n=await fetch("".concat(RSe,"/copy/relationships/").concat(C)).then(e=>e.json());l(n||[])}catch(jEe){console.error(jEe)}})(e.relationship_id)},e.relationship_id))})})]}),(0,zt.jsx)(an,{children:p&&(0,zt.jsx)(zSe,{trader:p,copyAmount:m,setCopyAmount:g,onCopy:async()=>{if(p&&m)try{const e=await fetch("".concat(RSe,"/copy/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({follower_id:C,master_trader_id:p.trader_id,amount:parseFloat(m)})});if((await e.json()).success){E(p.trader_id,{copy_ratio:1,max_trade_size:.1*parseFloat(m)}),g(""),f(null);const[e,t]=await Promise.all([fetch("".concat(RSe,"/copy/relationships/").concat(C)).then(e=>e.json()),fetch("".concat(RSe,"/copy/portfolio/").concat(C)).then(e=>e.json())]);l(e||[]),u(t)}}catch(jEe){console.error(jEe)}},onClose:()=>f(null),getVerificationBadge:I,getRiskBadge:A})})]})},USe=Nm("factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),WSe=Nm("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),VSe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),HSe=e=>{var t,n,a,r,s,i,o,l,c,u,d,h;let{data:p,getRiskColor:f,getRiskBg:m}=e;return p?(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(YSe,{icon:USe,label:"Suppliers Monitored",value:null===(t=p.overview)||void 0===t?void 0:t.total_suppliers_monitored,color:"amber"}),(0,zt.jsx)(YSe,{icon:_m,label:"Ports Tracked",value:null===(n=p.overview)||void 0===n?void 0:n.total_ports_tracked,color:"blue"}),(0,zt.jsx)(YSe,{icon:Tm,label:"Active Markets",value:null===(a=p.overview)||void 0===a?void 0:a.active_markets,color:"purple"}),(0,zt.jsx)(YSe,{icon:Mm,label:"SCF Instruments",value:null===(r=p.overview)||void 0===r?void 0:r.scf_instruments,color:"emerald"})]}),(0,zt.jsx)(vx,{title:"Global Risk Assessment",icon:"\ud83c\udf0d",accent:"amber",children:(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Port Congestion"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-amber-400",children:null===(s=p.risk_summary)||void 0===s?void 0:s.avg_port_congestion})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"High Risk Suppliers"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-red-400",children:null===(i=p.risk_summary)||void 0===i?void 0:i.high_risk_suppliers})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Active Alerts"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-orange-400",children:null===(o=p.risk_summary)||void 0===o?void 0:o.active_alerts})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg border ".concat(m(null===(l=p.risk_summary)||void 0===l?void 0:l.global_risk_level)),children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Global Risk"}),(0,zt.jsx)("p",{className:"text-xl font-bold ".concat(f(null===(c=p.risk_summary)||void 0===c?void 0:c.global_risk_level)),children:null===(u=p.risk_summary)||void 0===u?void 0:u.global_risk_level})]})]})}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"High Impact Events",icon:"\u26a0\ufe0f",accent:"red",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(d=p.top_risks)||void 0===d?void 0:d.slice(0,4).map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border-l-2 border-red-500",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["Impact: ",e.impact_score]}),(0,zt.jsx)("span",{className:"text-xs text-amber-400",children:e.implied_probability})]}),(0,zt.jsx)("p",{className:"text-sm text-white",children:e.title})]},t))})}),(0,zt.jsx)(vx,{title:"Congestion Hotspots",icon:"\ud83d\udea2",accent:"blue",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(h=p.congested_ports)||void 0===h?void 0:h.map((e,t)=>{var n,a,r,s,i,o;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)("span",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("Critical"===(null===(n=e.congestion)||void 0===n?void 0:n.status)?"bg-red-500/20 text-red-400":"High"===(null===(a=e.congestion)||void 0===a?void 0:a.status)?"bg-orange-500/20 text-orange-400":"bg-amber-500/20 text-amber-400"),children:null===(r=e.congestion)||void 0===r?void 0:r.status})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[(0,zt.jsxs)("span",{children:["Queue: ",null===(s=e.congestion)||void 0===s?void 0:s.vessel_queue," vessels"]}),(0,zt.jsxs)("span",{children:["Wait: ",null===(i=e.congestion)||void 0===i?void 0:i.avg_wait_days," days"]})]}),(0,zt.jsx)(aSe,{value:100*(null===(o=e.congestion)||void 0===o?void 0:o.level),className:"h-1.5 mt-2 bg-white/10"})]},t)})})})]})]}):null},GSe=e=>{let{markets:t}=e;return(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>{var t,n;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("geopolitical"===e.event_type?"bg-red-500/20 text-red-400":"port_congestion"===e.event_type?"bg-blue-500/20 text-blue-400":"tariff_change"===e.event_type?"bg-purple-500/20 text-purple-400":"bg-amber-500/20 text-amber-400"),children:null===(t=e.event_type)||void 0===t?void 0:t.replace("_"," ")}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["Impact: ",e.impact_score]})]}),(0,zt.jsx)("h4",{className:"text-white font-medium mb-2 line-clamp-2",children:e.title}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsxs)("span",{className:"text-emerald-400",children:["YES ",(100*e.yes_price).toFixed(0),"\xa2"]}),(0,zt.jsxs)("span",{className:"text-red-400",children:["NO ",(100*e.no_price).toFixed(0),"\xa2"]})]}),(0,zt.jsx)(aSe,{value:100*e.yes_price,className:"h-2 bg-red-500/30"}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{children:["Vol: $",null===(n=e.volume)||void 0===n?void 0:n.toLocaleString()]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(wwe,{size:10})," ",e.time_to_resolution]})]})]},e.market_id)})})},qSe=e=>{let{suppliers:t,getRiskColor:n}=e;return(0,zt.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t,n,a,r,s,i,o,l,c,u;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[null===(t=e.region)||void 0===t?void 0:t.replace("_"," ")," \u2022 ",null===(n=e.commodities)||void 0===n?void 0:n.join(", ")]})]}),(0,zt.jsx)("div",{className:"px-3 py-1 rounded-lg ".concat("low"===e.risk_level?"bg-emerald-500/20 text-emerald-400":"moderate"===e.risk_level?"bg-amber-500/20 text-amber-400":"elevated"===e.risk_level?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"),children:(0,zt.jsxs)("p",{className:"text-xs",children:["Risk: ",e.risk_score]})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Financial Health"}),(0,zt.jsx)(aSe,{value:null===(a=e.metrics)||void 0===a?void 0:a.financial_health,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(r=e.metrics)||void 0===r?void 0:r.financial_health,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Delivery"}),(0,zt.jsx)(aSe,{value:null===(s=e.metrics)||void 0===s?void 0:s.delivery_reliability,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(i=e.metrics)||void 0===i?void 0:i.delivery_reliability,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Quality"}),(0,zt.jsx)(aSe,{value:null===(o=e.metrics)||void 0===o?void 0:o.quality_score,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(l=e.metrics)||void 0===l?void 0:l.quality_score,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"ESG Score"}),(0,zt.jsx)(aSe,{value:null===(c=e.metrics)||void 0===c?void 0:c.esg_score,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(u=e.metrics)||void 0===u?void 0:u.esg_score,"%"]})]})]})]},e.supplier_id)})})},KSe=e=>{let{ports:t}=e;return(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{var t,n,a,r,s,i,o;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,zt.jsx)(_m,{size:20,className:"text-blue-400"}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.country})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Congestion"}),(0,zt.jsx)("span",{className:"Critical"===(null===(t=e.congestion)||void 0===t?void 0:t.status)?"text-red-400":"High"===(null===(n=e.congestion)||void 0===n?void 0:n.status)?"text-orange-400":"Moderate"===(null===(a=e.congestion)||void 0===a?void 0:a.status)?"text-amber-400":"text-emerald-400",children:null===(r=e.congestion)||void 0===r?void 0:r.level_pct})]}),(0,zt.jsx)(aSe,{value:100*(null===(s=e.congestion)||void 0===s?void 0:s.level),className:"h-2 bg-white/10"}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Vessel Queue"}),(0,zt.jsx)("p",{className:"text-white",children:null===(i=e.congestion)||void 0===i?void 0:i.vessel_queue})]}),(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Avg Wait"}),(0,zt.jsxs)("p",{className:"text-white",children:[null===(o=e.congestion)||void 0===o?void 0:o.avg_wait_days," days"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Trend"}),(0,zt.jsxs)("span",{className:"rising"===e.trend?"text-red-400":"falling"===e.trend?"text-emerald-400":"text-slate-400",children:[e.trend," ",e.week_over_week_change]})]})]})]},e.port_id)})})},XSe=e=>{let{instruments:t}=e;return(0,zt.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t,n,a,r,s,i,o,l,c;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 capitalize",children:e.commodity})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-xl font-bold text-white",children:["$",null===(t=e.pricing)||void 0===t?void 0:t.current_price]}),(0,zt.jsxs)("p",{className:(null===(n=e.pricing)||void 0===n?void 0:n.change_24h)>=0?"text-emerald-400 text-xs":"text-red-400 text-xs",children:[null===(a=e.pricing)||void 0===a?void 0:a.change_24h_pct," (24h)"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-xs",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Volatility"}),(0,zt.jsx)("p",{className:"text-amber-400",children:null===(r=e.risk)||void 0===r?void 0:r.volatility})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Risk Premium"}),(0,zt.jsx)("p",{className:"text-red-400",children:null===(s=e.risk)||void 0===s?void 0:s.supply_risk_premium})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Volume 24h"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(i=e.trading)||void 0===i||null===(o=i.volume_24h)||void 0===o?void 0:o.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Open Interest"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(l=e.trading)||void 0===l||null===(c=l.open_interest)||void 0===c?void 0:c.toLocaleString()]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,zt.jsx)(SSe,{size:"sm",className:"flex-1 bg-emerald-500 hover:bg-emerald-600",children:"Buy"}),(0,zt.jsx)(SSe,{size:"sm",variant:"outline",className:"flex-1 border-red-500/30 text-red-400",children:"Sell"})]})]},e.instrument_id)})})},YSe=e=>{let{icon:t,label:n,value:a,color:r}=e;return(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat({amber:"text-amber-400 bg-amber-500/20",blue:"text-blue-400 bg-blue-500/20",purple:"text-purple-400 bg-purple-500/20",emerald:"text-emerald-400 bg-emerald-500/20",red:"text-red-400 bg-red-500/20"}[r]),children:(0,zt.jsx)(t,{size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:n}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:a})]})]})})},$Se=e=>{let{alerts:t,presets:n,history:a,stats:r,ports:s,suppliers:i,markets:o,showCreateAlert:l,setShowCreateAlert:c,newAlert:u,setNewAlert:d,onCreateAlert:h,onDeleteAlert:p,onToggleAlert:f,onQuickSetup:g,onCheckAlerts:x,refreshing:v}=e;const y=e=>{const t={low:"text-slate-400 bg-slate-500/20",medium:"text-amber-400 bg-amber-500/20",high:"text-orange-400 bg-orange-500/20",critical:"text-red-400 bg-red-500/20"};return t[e]||t.medium};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"alerts-panel",children:[r&&(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(YSe,{icon:wx,label:"Active Alerts",value:r.enabled_alerts,color:"blue"}),(0,zt.jsx)(YSe,{icon:y1,label:"Triggered Today",value:r.triggered_today,color:"amber"}),(0,zt.jsx)(YSe,{icon:Um,label:"Total History",value:r.total_triggered_history,color:"emerald"}),(0,zt.jsx)(YSe,{icon:Qm,label:"Disabled",value:r.disabled_alerts,color:"red"})]}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,zt.jsxs)(SSe,{onClick:()=>c(!0),className:"bg-teal-500 hover:bg-teal-600",children:[(0,zt.jsx)(xwe,{size:16,className:"mr-2"})," Create Alert"]}),(0,zt.jsxs)(SSe,{onClick:x,disabled:v,variant:"outline",className:"border-amber-500/30 text-amber-400",children:[(0,zt.jsx)(Swe,{size:16,className:"mr-2 ".concat(v?"animate-spin":"")})," Check Now"]})]}),(0,zt.jsx)(an,{children:l&&(0,zt.jsx)(uu.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:(0,zt.jsxs)(vx,{title:"Create New Alert",icon:"\ud83d\udd14",accent:"teal",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Alert Type"}),(0,zt.jsxs)("select",{value:u.alert_type,onChange:e=>d(m(m({},u),{},{alert_type:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"port_congestion",children:"Port Congestion"}),(0,zt.jsx)("option",{value:"supplier_risk",children:"Supplier Risk"}),(0,zt.jsx)("option",{value:"geopolitical_risk",children:"Geopolitical Risk"}),(0,zt.jsx)("option",{value:"commodity_price",children:"Commodity Price"}),(0,zt.jsx)("option",{value:"market_event",children:"Market Event"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Target Entity"}),(0,zt.jsxs)("select",{value:u.target_entity,onChange:e=>{const t=e.target.value;let n=t;var a;if("port_congestion"===u.alert_type)n=(null===(a=s.find(e=>e.port_id===t))||void 0===a?void 0:a.name)||t;else if("supplier_risk"===u.alert_type){var r;n=(null===(r=i.find(e=>e.supplier_id===t))||void 0===r?void 0:r.name)||t}d(m(m({},u),{},{target_entity:t,entity_name:n}))},className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"",children:"Select..."}),"port_congestion"===u.alert_type&&s.map(e=>(0,zt.jsx)("option",{value:e.port_id,children:e.name},e.port_id)),"supplier_risk"===u.alert_type&&i.map(e=>(0,zt.jsx)("option",{value:e.supplier_id,children:e.name},e.supplier_id)),"geopolitical_risk"===u.alert_type&&(0,zt.jsx)("option",{value:"global",children:"Global Risk Index"}),"market_event"===u.alert_type&&o.map(e=>{var t;return(0,zt.jsxs)("option",{value:e.market_id,children:[null===(t=e.title)||void 0===t?void 0:t.substring(0,40),"..."]},e.market_id)})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Condition"}),(0,zt.jsxs)("select",{value:u.condition,onChange:e=>d(m(m({},u),{},{condition:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"above",children:"Above"}),(0,zt.jsx)("option",{value:"below",children:"Below"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Threshold"}),(0,zt.jsx)("input",{type:"number",value:u.threshold,onChange:e=>d(m(m({},u),{},{threshold:parseFloat(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Priority"}),(0,zt.jsxs)("select",{value:u.priority,onChange:e=>d(m(m({},u),{},{priority:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"low",children:"Low"}),(0,zt.jsx)("option",{value:"medium",children:"Medium"}),(0,zt.jsx)("option",{value:"high",children:"High"}),(0,zt.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,zt.jsxs)(SSe,{onClick:h,className:"bg-teal-500 hover:bg-teal-600",children:[(0,zt.jsx)(Um,{size:16,className:"mr-2"})," Create Alert"]}),(0,zt.jsx)(SSe,{onClick:()=>c(!1),variant:"outline",children:"Cancel"})]})]})})}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Active Alerts",icon:"\ud83d\udd14",accent:"blue",children:0===t.length?(0,zt.jsx)("p",{className:"text-slate-500 text-sm text-center py-6",children:"No alerts configured. Create one or use a preset below."}):(0,zt.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.map(e=>{var t,n;const a=(r=e.alert_type,{port_congestion:_m,supplier_risk:USe,geopolitical_risk:Im,commodity_price:Mm,market_event:Tm,delivery_delay:WSe}[r]||wx);var r;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg border ".concat(e.enabled?"bg-white/5 border-white/10":"bg-white/2 border-white/5 opacity-60"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(a,{size:16,className:"text-teal-400"}),(0,zt.jsx)("span",{className:"text-white text-sm font-medium",children:e.entity_name})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(y(e.priority)),children:e.priority}),(0,zt.jsx)("button",{onClick:()=>f(e.alert_id,e.enabled),className:"p-1 rounded ".concat(e.enabled?"text-emerald-400":"text-slate-500"),children:e.enabled?(0,zt.jsx)(Um,{size:14}):(0,zt.jsx)(Qm,{size:14})}),(0,zt.jsx)("button",{onClick:()=>p(e.alert_id),className:"p-1 text-red-400 hover:text-red-300",children:(0,zt.jsx)(ywe,{size:14})})]})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-400",children:[e.condition," ",e.threshold," \u2022 Type: ",null===(t=e.alert_type)||void 0===t?void 0:t.replace("_"," ")]}),null!==e.current_value&&(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Current: ",null===(n=e.current_value)||void 0===n?void 0:n.toFixed(2)]})]},e.alert_id)})})}),(0,zt.jsx)(vx,{title:"Quick Setup",icon:"\u26a1",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-2xl",children:e.icon}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]}),(0,zt.jsx)(SSe,{size:"sm",onClick:()=>g(e),className:"bg-amber-500/20 text-amber-400 hover:bg-amber-500/30",children:(0,zt.jsx)(xwe,{size:14})})]},t))})})]}),a.length>0&&(0,zt.jsx)(vx,{title:"Recent Triggered Alerts",icon:"\ud83d\udcdc",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.slice(0,10).map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border-l-2 border-purple-500",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(y(e.priority)),children:e.priority}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:new Date(e.triggered_at).toLocaleString()})]}),(0,zt.jsx)("p",{className:"text-sm text-white",children:e.message})]},t))})})]})},QSe=()=>{const[e,t]=(0,o.useState)("control-tower"),[n,a]=(0,o.useState)(null),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)(null),[g,x]=(0,o.useState)(!0),[v,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)([]),[k,N]=(0,o.useState)([]),[j,S]=(0,o.useState)([]),[C,E]=(0,o.useState)(null),[T,I]=(0,o.useState)(!1),[A,_]=(0,o.useState)({alert_type:"port_congestion",target_entity:"",entity_name:"",condition:"above",threshold:80,priority:"medium"});(0,o.useEffect)(()=>{(async()=>{x(!0);try{const[e,t,n,r,i,o]=await Promise.all([fetch("".concat(VSe,"/supply-chain/control-tower")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/markets")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/suppliers")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/ports")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/instruments")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/geopolitical-risk")).then(e=>e.json())]);a(e),s(t||[]),l(n||[]),u(r||[]),h(i||[]),f(o),await O()}catch(e){console.error("Error fetching supply chain data:",e)}x(!1)})()},[]);const O=async()=>{try{const[e,t,n,a]=await Promise.all([fetch("".concat(VSe,"/supply-chain/alerts?user_id=demo_user")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/alerts/presets")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/alerts/history?user_id=demo_user")).then(e=>e.json()),fetch("".concat(VSe,"/supply-chain/alerts/stats")).then(e=>e.json())]);w(e||[]),N(t||[]),S(n||[]),E(a)}catch(e){console.error("Error loading alert data:",e)}},R=e=>({low:"text-emerald-400",moderate:"text-amber-400",elevated:"text-orange-400",high:"text-red-400",critical:"text-red-600"}[null===e||void 0===e?void 0:e.toLowerCase()]||"text-slate-400"),P=e=>({low:"bg-emerald-500/20 border-emerald-500/30",moderate:"bg-amber-500/20 border-amber-500/30",elevated:"bg-orange-500/20 border-orange-500/30",high:"bg-red-500/20 border-red-500/30",critical:"bg-red-600/30 border-red-600/40"}[null===e||void 0===e?void 0:e.toLowerCase()]||"bg-slate-500/20 border-slate-500/30");return g?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"supply-chain-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"supply-chain-hub",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(_m,{className:"text-teal-400"}),"Supply Chain Command Center"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Trade \u2022 Monitor \u2022 Hedge Supply Chain Risk"})]}),(0,zt.jsxs)(SSe,{onClick:async()=>{y(!0);const e=await fetch("".concat(VSe,"/supply-chain/control-tower")).then(e=>e.json());a(e),y(!1)},disabled:v,variant:"outline",className:"border-teal-500/30 text-teal-400",children:[(0,zt.jsx)(Swe,{size:16,className:v?"animate-spin mr-2":"mr-2"}),"Refresh"]})]}),p&&(0,zt.jsx)("div",{className:"p-4 rounded-xl border ".concat(P(p.level)),children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)(Im,{size:24,className:R(p.level)}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Geopolitical Risk Index"}),(0,zt.jsx)("p",{className:"text-2xl font-bold ".concat(R(p.level)),children:p.index})]})]}),(0,zt.jsx)("div",{className:"px-4 py-2 rounded-lg ".concat(P(p.level)),children:(0,zt.jsx)("p",{className:"text-lg font-bold ".concat(R(p.level)),children:p.level})})]})}),(0,zt.jsxs)(bje,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(kje,{value:"control-tower",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400",children:[(0,zt.jsx)(rye,{size:14,className:"mr-1"})," Control Tower"]}),(0,zt.jsxs)(kje,{value:"alerts",className:"data-[state=active]:bg-red-500/20 data-[state=active]:text-red-400",children:[(0,zt.jsx)(wx,{size:14,className:"mr-1"})," Alerts ",b.length>0&&(0,zt.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-red-500/30 text-xs",children:b.length})]}),(0,zt.jsxs)(kje,{value:"markets",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400",children:[(0,zt.jsx)(Tm,{size:14,className:"mr-1"})," Event Markets"]}),(0,zt.jsxs)(kje,{value:"suppliers",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400",children:[(0,zt.jsx)(USe,{size:14,className:"mr-1"})," Suppliers"]}),(0,zt.jsxs)(kje,{value:"ports",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400",children:[(0,zt.jsx)(_m,{size:14,className:"mr-1"})," Ports"]}),(0,zt.jsxs)(kje,{value:"derivatives",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400",children:[(0,zt.jsx)(Mm,{size:14,className:"mr-1"})," SCF Derivatives"]})]}),(0,zt.jsx)(Nje,{value:"control-tower",className:"mt-6",children:(0,zt.jsx)(HSe,{data:n,getRiskColor:R,getRiskBg:P})}),(0,zt.jsx)(Nje,{value:"alerts",className:"mt-6",children:(0,zt.jsx)($Se,{alerts:b,presets:k,history:j,stats:C,ports:c,suppliers:i,markets:r,showCreateAlert:T,setShowCreateAlert:I,newAlert:A,setNewAlert:_,onCreateAlert:async()=>{try{const e=await fetch("".concat(VSe,"/supply-chain/alerts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m(m({},A),{},{user_id:"demo_user"}))});(await e.json()).success&&(await O(),I(!1),_({alert_type:"port_congestion",target_entity:"",entity_name:"",condition:"above",threshold:80,priority:"medium"}))}catch(e){console.error("Error creating alert:",e)}},onDeleteAlert:async e=>{try{await fetch("".concat(VSe,"/supply-chain/alerts/").concat(e),{method:"DELETE"}),await O()}catch(t){console.error("Error deleting alert:",t)}},onToggleAlert:async(e,t)=>{try{await fetch("".concat(VSe,"/supply-chain/alerts/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!t})}),await O()}catch(n){console.error("Error toggling alert:",n)}},onQuickSetup:async e=>{let t="",n="";if("port_congestion"===e.alert_type&&c.length>0)t=c[0].port_id,n=c[0].name;else if("supplier_risk"===e.alert_type&&i.length>0)t=i[0].supplier_id,n=i[0].name;else if("geopolitical_risk"===e.alert_type)t="global",n="Global Risk Index";else if("market_event"===e.alert_type&&r.length>0){var a;t=r[0].market_id,n=(null===(a=r[0].title)||void 0===a?void 0:a.substring(0,30))+"..."}try{const a=await fetch("".concat(VSe,"/supply-chain/alerts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"demo_user",alert_type:e.alert_type,target_entity:t,entity_name:n,condition:e.condition,threshold:e.threshold,priority:e.priority})});(await a.json()).success&&await O()}catch(s){console.error("Error creating preset alert:",s)}},onCheckAlerts:async()=>{try{y(!0);const e=await fetch("".concat(VSe,"/supply-chain/alerts/check"),{method:"POST"}),t=await e.json();await O(),t.alerts_triggered>0&&alert("".concat(t.alerts_triggered," alert(s) triggered!"))}catch(e){console.error("Error checking alerts:",e)}y(!1)},refreshing:v})}),(0,zt.jsx)(Nje,{value:"markets",className:"mt-6",children:(0,zt.jsx)(GSe,{markets:r})}),(0,zt.jsx)(Nje,{value:"suppliers",className:"mt-6",children:(0,zt.jsx)(qSe,{suppliers:i,getRiskColor:R})}),(0,zt.jsx)(Nje,{value:"ports",className:"mt-6",children:(0,zt.jsx)(KSe,{ports:c})}),(0,zt.jsx)(Nje,{value:"derivatives",className:"mt-6",children:(0,zt.jsx)(XSe,{instruments:d})})]})]})};function JSe(e,t){let[n,a]=t;return Math.min(a,Math.max(n,e))}const ZSe=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"],eCe=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],tCe=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],nCe=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],aCe=["__scopeSlider"],rCe=["__scopeSlider"],sCe=["__scopeSlider","index","name"],iCe=["__scopeSlider","value"];var oCe=["PageUp","PageDown"],lCe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],cCe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},uCe="Slider",[dCe,hCe,pCe]=oNe(uCe),[fCe,mCe]=Hke(uCe,[pCe]),[gCe,xCe]=fCe(uCe),vCe=o.forwardRef((e,t)=>{const{name:n,min:a=0,max:r=100,step:s=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[a],value:h,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:x}=e,v=u(e,ZSe),y=o.useRef(new Set),b=o.useRef(0),w="horizontal"===i?wCe:kCe,[k=[],N]=jNe({prop:h,defaultProp:d,onChange:e=>{var t;null===(t=[...y.current][b.current])||void 0===t||t.focus(),p(e)}}),j=o.useRef(k);function S(e,t){let{commit:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1};const i=function(e){return(String(e).split(".")[1]||"").length}(s),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-a)/s)*s+a,i),l=JSe(o,[a,r]);N(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const a=[...e];return a[n]=t,a.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(a,c*s)){b.current=a.indexOf(l);const t=String(a)!==String(e);return t&&n&&f(a),t?a:e}return e})}return(0,zt.jsx)(gCe,{scope:e.__scopeSlider,name:n,disabled:l,min:a,max:r,valueIndexToChangeRef:b,thumbs:y.current,values:k,orientation:i,form:x,children:(0,zt.jsx)(dCe.Provider,{scope:e.__scopeSlider,children:(0,zt.jsx)(dCe.Slot,{scope:e.__scopeSlider,children:(0,zt.jsx)(w,m(m({"aria-disabled":l,"data-disabled":l?"":void 0},v),{},{ref:t,onPointerDown:Wke(v.onPointerDown,()=>{l||(j.current=k)}),min:a,max:r,inverted:g,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),a=Math.min(...n);return n.indexOf(a)}(k,e);S(e,t)},onSlideMove:l?void 0:function(e){S(e,b.current)},onSlideEnd:l?void 0:function(){const e=j.current[b.current];k[b.current]!==e&&f(k)},onHomeKeyDown:()=>!l&&S(a,0,{commit:!0}),onEndKeyDown:()=>!l&&S(r,k.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:n}=e;if(!l){const e=oCe.includes(t.key)||t.shiftKey&&lCe.includes(t.key)?10:1,a=b.current;S(k[a]+s*e*n,a,{commit:!0})}}}))})})})});vCe.displayName=uCe;var[yCe,bCe]=fCe(uCe,{startEdge:"left",endEdge:"right",size:"width",direction:1}),wCe=o.forwardRef((e,t)=>{const{min:n,max:a,dir:r,inverted:s,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d}=e,h=u(e,eCe),[p,f]=o.useState(null),g=Jke(t,e=>f(e)),x=o.useRef(void 0),v=CNe(r),y="ltr"===v,b=y&&!s||!y&&s;function w(e){const t=x.current||p.getBoundingClientRect(),r=RCe([0,t.width],b?[n,a]:[a,n]);return x.current=t,r(e-t.left)}return(0,zt.jsx)(yCe,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:(0,zt.jsx)(NCe,m(m({dir:v,"data-orientation":"horizontal"},h),{},{ref:g,style:m(m({},h.style),{},{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=w(e.clientX);null===i||void 0===i||i(t)},onSlideMove:e=>{const t=w(e.clientX);null===l||void 0===l||l(t)},onSlideEnd:()=>{x.current=void 0,null===c||void 0===c||c()},onStepKeyDown:e=>{const t=cCe[b?"from-left":"from-right"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}}))})}),kCe=o.forwardRef((e,t)=>{const{min:n,max:a,inverted:r,onSlideStart:s,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c}=e,d=u(e,tCe),h=o.useRef(null),p=Jke(t,h),f=o.useRef(void 0),g=!r;function x(e){const t=f.current||h.current.getBoundingClientRect(),r=RCe([0,t.height],g?[a,n]:[n,a]);return f.current=t,r(e-t.top)}return(0,zt.jsx)(yCe,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:(0,zt.jsx)(NCe,m(m({"data-orientation":"vertical"},d),{},{ref:p,style:m(m({},d.style),{},{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=x(e.clientY);null===s||void 0===s||s(t)},onSlideMove:e=>{const t=x(e.clientY);null===i||void 0===i||i(t)},onSlideEnd:()=>{f.current=void 0,null===l||void 0===l||l()},onStepKeyDown:e=>{const t=cCe[g?"from-bottom":"from-top"].includes(e.key);null===c||void 0===c||c({event:e,direction:t?-1:1})}}))})}),NCe=o.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:o,onStepKeyDown:l}=e,c=u(e,nCe),d=xCe(uCe,n);return(0,zt.jsx)(kNe.span,m(m({},c),{},{ref:t,onKeyDown:Wke(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):oCe.concat(lCe).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:Wke(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():a(e)}),onPointerMove:Wke(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&r(e)}),onPointerUp:Wke(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})}))}),jCe="SliderTrack",SCe=o.forwardRef((e,t)=>{const{__scopeSlider:n}=e,a=u(e,aCe),r=xCe(jCe,n);return(0,zt.jsx)(kNe.span,m(m({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},a),{},{ref:t}))});SCe.displayName=jCe;var CCe="SliderRange",ECe=o.forwardRef((e,t)=>{const{__scopeSlider:n}=e,a=u(e,rCe),r=xCe(CCe,n),s=bCe(CCe,n),i=Jke(t,o.useRef(null)),l=r.values.length,c=r.values.map(e=>OCe(e,r.min,r.max)),d=l>1?Math.min(...c):0,h=100-Math.max(...c);return(0,zt.jsx)(kNe.span,m(m({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},a),{},{ref:i,style:m(m({},e.style),{},{[s.startEdge]:d+"%",[s.endEdge]:h+"%"})}))});ECe.displayName=CCe;var TCe="SliderThumb",ICe=o.forwardRef((e,t)=>{const n=hCe(e.__scopeSlider),[a,r]=o.useState(null),s=Jke(t,e=>r(e)),i=o.useMemo(()=>a?n().findIndex(e=>e.ref.current===a):-1,[n,a]);return(0,zt.jsx)(ACe,m(m({},e),{},{ref:s,index:i}))}),ACe=o.forwardRef((e,t)=>{const{__scopeSlider:n,index:a,name:r}=e,s=u(e,sCe),i=xCe(TCe,n),l=bCe(TCe,n),[c,d]=o.useState(null),h=Jke(t,e=>d(e)),p=!c||(i.form||!!c.closest("form")),f=function(e){const[t,n]=o.useState(void 0);return dNe(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const a=t[0];let r,s;if("borderBoxSize"in a){const e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,s=t.blockSize}else r=e.offsetWidth,s=e.offsetHeight;n({width:r,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(c),g=i.values[a],x=void 0===g?0:OCe(g,i.min,i.max),v=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(a,i.values.length),y=null===f||void 0===f?void 0:f[l.size],b=y?function(e,t,n){const a=e/2,r=RCe([0,50],[0,a]);return(a-r(t)*n)*n}(y,x,l.direction):0;return o.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),(0,zt.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:"calc(".concat(x,"% + ").concat(b,"px)")},children:[(0,zt.jsx)(dCe.ItemSlot,{scope:e.__scopeSlider,children:(0,zt.jsx)(kNe.span,m(m({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":i.min,"aria-valuenow":g,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},s),{},{ref:h,style:void 0===g?{display:"none"}:e.style,onFocus:Wke(e.onFocus,()=>{i.valueIndexToChangeRef.current=a})}))}),p&&(0,zt.jsx)(_Ce,{name:null!==r&&void 0!==r?r:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:g},a)]})});ICe.displayName=TCe;var _Ce=o.forwardRef((e,t)=>{let{__scopeSlider:n,value:a}=e,r=u(e,iCe);const s=o.useRef(null),i=Jke(s,t),l=function(e){const t=o.useRef({value:e,previous:e});return o.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(a);return o.useEffect(()=>{const e=s.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==a&&n){const t=new Event("input",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[l,a]),(0,zt.jsx)(kNe.input,m(m({style:{display:"none"}},r),{},{ref:i,defaultValue:a}))});function OCe(e,t,n){return JSe(100/(n-t)*(e-t),[0,100])}function RCe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}_Ce.displayName="RadioBubbleInput";var PCe=vCe,MCe=SCe,DCe=ECe,FCe=ICe;const LCe=["className"],zCe=o.forwardRef((e,t)=>{let{className:n}=e,a=u(e,LCe);return(0,zt.jsxs)(PCe,m(m({ref:t,className:gx("relative flex w-full touch-none select-none items-center",n)},a),{},{children:[(0,zt.jsx)(MCe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,zt.jsx)(DCe,{className:"absolute h-full bg-primary"})}),(0,zt.jsx)(FCe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}))});zCe.displayName=PCe.displayName;const BCe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),UCe=()=>{const[e,t]=(0,o.useState)("my-agents"),[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)({}),[i,l]=(0,o.useState)(!0),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)([]),[g,x]=(0,o.useState)(""),[v,y]=(0,o.useState)({name:"",description:"",avatar_emoji:"\ud83e\udd16",strategy:"momentum",custom_prompt:"",risk_tolerance:50,position_size_pct:10,stop_loss_pct:5,take_profit_pct:15,entry_confidence_threshold:70,max_daily_trades:10,allowed_assets:["BTC","ETH","SOL"],auto_trade:!1,paper_trading:!0});(0,o.useEffect)(()=>{b()},[]);const b=async()=>{l(!0);try{const[e,t]=await Promise.all([fetch("".concat(BCe,"/agents?user_id=demo_user")).then(e=>e.json()),fetch("".concat(BCe,"/agents/templates")).then(e=>e.json())]);a(e||[]),s(t||{})}catch(jEe){console.error("Error loading agents:",jEe)}l(!1)},w=async()=>{if(!g.trim()||!c)return;const e=g;x(""),f(t=>[...t,{type:"user",message:e}]);try{const t=await fetch("".concat(BCe,"/agents/").concat(c.agent_id,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),n=await t.json();f(e=>[...e,m({type:"agent"},n)])}catch(jEe){console.error("Error chatting:",jEe)}},k=e=>{const t={momentum:"text-orange-400 bg-orange-500/20",mean_reversion:"text-blue-400 bg-blue-500/20",trend_following:"text-green-400 bg-green-500/20",contrarian:"text-red-400 bg-red-500/20",sentiment_based:"text-purple-400 bg-purple-500/20",technical_analysis:"text-cyan-400 bg-cyan-500/20",hybrid:"text-amber-400 bg-amber-500/20",custom:"text-teal-400 bg-teal-500/20"};return t[e]||t.custom},N=e=>{const t={active:"text-emerald-400 bg-emerald-500/20",idle:"text-slate-400 bg-slate-500/20",paused:"text-amber-400 bg-amber-500/20",error:"text-red-400 bg-red-500/20"};return t[e]||t.idle};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"agent-builder",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Rm,{className:"text-purple-400"}),"AI Trading Agents"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Create \u2022 Customize \u2022 Deploy Autonomous Trading Agents"})]}),(0,zt.jsxs)(SSe,{onClick:()=>h(!0),className:"bg-purple-500 hover:bg-purple-600",children:[(0,zt.jsx)(xwe,{size:16,className:"mr-2"})," Create Agent"]})]}),(0,zt.jsxs)(bje,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg",children:[(0,zt.jsxs)(kje,{value:"my-agents",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400",children:[(0,zt.jsx)(qm,{size:14,className:"mr-1"})," My Agents (",n.length,")"]}),(0,zt.jsxs)(kje,{value:"templates",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400",children:[(0,zt.jsx)($m,{size:14,className:"mr-1"})," Templates"]}),(0,zt.jsxs)(kje,{value:"chat",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400",children:[(0,zt.jsx)(Km,{size:14,className:"mr-1"})," Agent Chat"]})]}),(0,zt.jsx)(Nje,{value:"my-agents",className:"mt-6",children:0===n.length?(0,zt.jsxs)("div",{className:"text-center py-12",children:[(0,zt.jsx)(qm,{size:48,className:"text-slate-600 mx-auto mb-4"}),(0,zt.jsx)("p",{className:"text-slate-500",children:"No agents yet. Create one or use a template!"})]}):(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>{var n;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-3xl",children:e.avatar_emoji}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"font-bold text-white",children:e.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(k(e.strategy)),children:null===(n=e.strategy)||void 0===n?void 0:n.replace("_"," ")})]})]}),(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(N(e.status)),children:e.status})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-3 line-clamp-2",children:e.description}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-center mb-3",children:[(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("div",{className:"text-slate-500",children:"Risk"}),(0,zt.jsxs)("div",{className:"text-white font-bold",children:[e.risk_tolerance,"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("div",{className:"text-slate-500",children:"Position"}),(0,zt.jsxs)("div",{className:"text-white font-bold",children:[e.position_size_pct,"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("div",{className:"text-slate-500",children:"Confidence"}),(0,zt.jsxs)("div",{className:"text-white font-bold",children:[e.entry_confidence_threshold,"%"]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)(SSe,{size:"sm",onClick:()=>(async(e,t)=>{const n="active"===t?"pause":"activate";try{await fetch("".concat(BCe,"/agents/").concat(e,"/").concat(n),{method:"POST"}),await b()}catch(jEe){console.error("Error toggling agent:",jEe)}})(e.agent_id,e.status),className:"active"===e.status?"bg-amber-500/20 text-amber-400":"bg-emerald-500/20 text-emerald-400",children:"active"===e.status?(0,zt.jsx)(Ym,{size:14}):(0,zt.jsx)(Gm,{size:14})}),(0,zt.jsx)(SSe,{size:"sm",onClick:()=>{u(e),t("chat")},className:"bg-purple-500/20 text-purple-400",children:(0,zt.jsx)(Km,{size:14})}),(0,zt.jsx)(SSe,{size:"sm",onClick:()=>(async e=>{try{const t=await fetch("".concat(BCe,"/market/prices")).then(e=>e.json()),n=t.find(e=>"BTC"===e.symbol)||{},a=await fetch("".concat(BCe,"/agents/").concat(e,"/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:"BTC",price:n.price,change_percent:n.change_percent,volume:n.volume,rsi:45+20*Math.random()})}),r=await a.json();r.success&&r.decision&&f(e=>[...e,m({type:"decision"},r.decision)])}catch(jEe){console.error("Error analyzing market:",jEe)}})(e.agent_id),className:"bg-teal-500/20 text-teal-400",children:(0,zt.jsx)(Tm,{size:14})}),(0,zt.jsx)(SSe,{size:"sm",onClick:()=>(async e=>{if(window.confirm("Delete this agent?"))try{await fetch("".concat(BCe,"/agents/").concat(e),{method:"DELETE"}),await b(),(null===c||void 0===c?void 0:c.agent_id)===e&&u(null)}catch(jEe){console.error("Error deleting agent:",jEe)}})(e.agent_id),className:"bg-red-500/20 text-red-400 ml-auto",children:(0,zt.jsx)(ywe,{size:14})})]})]},e.agent_id)})})}),(0,zt.jsx)(Nje,{value:"templates",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(r).map(e=>{var n,a;let[r,s]=e;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-5 rounded-xl bg-gradient-to-br from-white/5 to-white/0 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,zt.jsx)("span",{className:"text-4xl",children:s.avatar_emoji}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"font-bold text-white",children:s.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(k(s.strategy)),children:null===(n=s.strategy)||void 0===n?void 0:n.replace("_"," ")})]})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:s.description}),(0,zt.jsxs)("div",{className:"text-xs text-slate-500 mb-4 p-3 rounded bg-white/5 italic",children:['"',null===(a=s.custom_prompt)||void 0===a?void 0:a.substring(0,100),'..."']}),(0,zt.jsxs)(SSe,{onClick:()=>(async e=>{try{const n=await fetch("".concat(BCe,"/agents/from-template"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"demo_user",template_id:e})});(await n.json()).success&&(await b(),t("my-agents"))}catch(jEe){console.error("Error creating from template:",jEe)}})(r),className:"w-full bg-purple-500/20 text-purple-400 hover:bg-purple-500/30",children:[(0,zt.jsx)(xwe,{size:14,className:"mr-2"})," Use Template"]})]},r)})})}),(0,zt.jsx)(Nje,{value:"chat",className:"mt-6",children:(0,zt.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsx)("h3",{className:"text-sm font-bold text-slate-400",children:"Select Agent"}),n.map(e=>{var t;return(0,zt.jsx)("button",{onClick:()=>{u(e),f([])},className:"w-full p-3 rounded-lg text-left transition-all ".concat((null===c||void 0===c?void 0:c.agent_id)===e.agent_id?"bg-purple-500/20 border-purple-500/30 border":"bg-white/5 border border-white/10 hover:bg-white/10"),children:(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-2xl",children:e.avatar_emoji}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-white text-sm font-medium",children:e.name}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:null===(t=e.strategy)||void 0===t?void 0:t.replace("_"," ")})]})]})},e.agent_id)})]}),(0,zt.jsx)("div",{className:"lg:col-span-2",children:(0,zt.jsxs)(vx,{title:c?"Chat with ".concat(c.name):"Select an Agent",icon:(null===c||void 0===c?void 0:c.avatar_emoji)||"\ud83d\udcac",accent:"purple",children:[(0,zt.jsxs)("div",{className:"h-80 overflow-y-auto space-y-3 mb-4",children:[p.map((e,t)=>{var n;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg ".concat("user"===e.type?"bg-teal-500/20 ml-12":"decision"===e.type?"bg-amber-500/20":"bg-white/5 mr-12"),children:["user"===e.type&&(0,zt.jsx)("p",{className:"text-sm text-white",children:e.message}),"agent"===e.type&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)("span",{children:e.avatar}),(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:e.agent_name})]}),(0,zt.jsx)("p",{className:"text-sm text-white",children:e.response})]}),"decision"===e.type&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("span",{className:"text-sm font-bold ".concat("buy"===e.action?"text-emerald-400":"sell"===e.action?"text-red-400":"text-slate-400"),children:[null===(n=e.action)||void 0===n?void 0:n.toUpperCase()," Signal"]}),(0,zt.jsxs)("span",{className:"text-xs text-amber-400",children:["Confidence: ",e.confidence,"%"]})]}),(0,zt.jsx)("p",{className:"text-sm text-white",children:e.reasoning})]})]},t)}),0===p.length&&c&&(0,zt.jsxs)("p",{className:"text-slate-500 text-center py-8",children:["Start chatting with ",c.name,"!"]})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)(xSe,{value:g,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&w(),placeholder:"Ask about strategy, market analysis...",className:"bg-white/5 border-white/10",disabled:!c}),(0,zt.jsx)(SSe,{onClick:w,disabled:!c,className:"bg-purple-500",children:(0,zt.jsx)(Owe,{size:16})})]})]})})]})})]}),(0,zt.jsx)(an,{children:d&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:(0,zt.jsxs)(uu.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-2xl bg-slate-900 border border-white/10 rounded-2xl p-6 max-h-[90vh] overflow-y-auto",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zt.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)($m,{className:"text-purple-400"})," Create AI Agent"]}),(0,zt.jsx)("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-white",children:(0,zt.jsx)(Qm,{size:20})})]}),(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Agent Name"}),(0,zt.jsx)(xSe,{value:v.name,onChange:e=>y(m(m({},v),{},{name:e.target.value})),placeholder:"My Trading Agent",className:"bg-white/5 border-white/10"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Avatar"}),(0,zt.jsx)("div",{className:"flex gap-2",children:["\ud83e\udd16","\ud83e\udde0","\ud83d\ude80","\ud83e\udd8a","\ud83d\udcca","\u26a1"].map(e=>(0,zt.jsx)("button",{onClick:()=>y(m(m({},v),{},{avatar_emoji:e})),className:"text-2xl p-2 rounded-lg ".concat(v.avatar_emoji===e?"bg-purple-500/20 border border-purple-500/30":"bg-white/5"),children:e},e))})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Description"}),(0,zt.jsx)(xSe,{value:v.description,onChange:e=>y(m(m({},v),{},{description:e.target.value})),placeholder:"What does this agent do?",className:"bg-white/5 border-white/10"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-2",children:"Strategy"}),(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["momentum","mean_reversion","trend_following","contrarian","sentiment_based","technical_analysis"].map(e=>(0,zt.jsx)("button",{onClick:()=>y(m(m({},v),{},{strategy:e})),className:"p-2 rounded-lg text-xs transition-all ".concat(v.strategy===e?k(e)+" border border-current":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e.replace("_"," ")},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Custom Strategy Prompt"}),(0,zt.jsx)("textarea",{value:v.custom_prompt,onChange:e=>y(m(m({},v),{},{custom_prompt:e.target.value})),placeholder:"Describe how you want the agent to trade in natural language...",className:"w-full h-20 p-3 rounded-lg bg-white/5 border border-white/10 text-white text-sm resize-none"})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Risk Tolerance"}),(0,zt.jsxs)("span",{className:"text-white font-bold",children:[v.risk_tolerance,"%"]})]}),(0,zt.jsx)(zCe,{value:[v.risk_tolerance],onValueChange:e=>{let[t]=e;return y(m(m({},v),{},{risk_tolerance:t}))},max:100,step:5,className:"w-full"}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs text-slate-600 mt-1",children:[(0,zt.jsx)("span",{children:"Conservative"}),(0,zt.jsx)("span",{children:"Aggressive"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Position Size"}),(0,zt.jsxs)("span",{className:"text-white font-bold",children:[v.position_size_pct,"% per trade"]})]}),(0,zt.jsx)(zCe,{value:[v.position_size_pct],onValueChange:e=>{let[t]=e;return y(m(m({},v),{},{position_size_pct:t}))},max:50,step:5,className:"w-full"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Entry Confidence Threshold"}),(0,zt.jsxs)("span",{className:"text-white font-bold",children:[v.entry_confidence_threshold,"%"]})]}),(0,zt.jsx)(zCe,{value:[v.entry_confidence_threshold],onValueChange:e=>{let[t]=e;return y(m(m({},v),{},{entry_confidence_threshold:t}))},max:100,min:50,step:5,className:"w-full"})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Stop Loss"}),(0,zt.jsxs)("span",{className:"text-red-400 font-bold",children:[v.stop_loss_pct,"%"]})]}),(0,zt.jsx)(zCe,{value:[v.stop_loss_pct],onValueChange:e=>{let[t]=e;return y(m(m({},v),{},{stop_loss_pct:t}))},max:20,step:1,className:"w-full"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Take Profit"}),(0,zt.jsxs)("span",{className:"text-emerald-400 font-bold",children:[v.take_profit_pct,"%"]})]}),(0,zt.jsx)(zCe,{value:[v.take_profit_pct],onValueChange:e=>{let[t]=e;return y(m(m({},v),{},{take_profit_pct:t}))},max:50,step:5,className:"w-full"})]})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-2",children:"Allowed Assets"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:["BTC","ETH","SOL","XRP","DOGE","ADA","AVAX","LINK"].map(e=>(0,zt.jsx)("button",{onClick:()=>{const t=v.allowed_assets.includes(e)?v.allowed_assets.filter(t=>t!==e):[...v.allowed_assets,e];y(m(m({},v),{},{allowed_assets:t}))},className:"px-3 py-1 rounded-lg text-xs transition-all ".concat(v.allowed_assets.includes(e)?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400"),children:e},e))})]}),(0,zt.jsxs)("div",{className:"flex gap-6",children:[(0,zt.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,zt.jsx)("input",{type:"checkbox",checked:v.paper_trading,onChange:e=>y(m(m({},v),{},{paper_trading:e.target.checked})),className:"rounded"}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Paper Trading (Simulated)"})]}),(0,zt.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,zt.jsx)("input",{type:"checkbox",checked:v.auto_trade,onChange:e=>y(m(m({},v),{},{auto_trade:e.target.checked})),className:"rounded"}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Auto Trade"})]})]}),(0,zt.jsxs)(SSe,{onClick:async()=>{try{const e=await fetch("".concat(BCe,"/agents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m(m({},v),{},{user_id:"demo_user"}))});(await e.json()).success&&(await b(),h(!1),y({name:"",description:"",avatar_emoji:"\ud83e\udd16",strategy:"momentum",custom_prompt:"",risk_tolerance:50,position_size_pct:10,stop_loss_pct:5,take_profit_pct:15,entry_confidence_threshold:70,max_daily_trades:10,allowed_assets:["BTC","ETH","SOL"],auto_trade:!1,paper_trading:!0}))}catch(jEe){console.error("Error creating agent:",jEe)}},className:"w-full bg-purple-500 hover:bg-purple-600",disabled:!v.name,children:[(0,zt.jsx)($m,{size:16,className:"mr-2"})," Create Agent"]})]})]})})})]})},WCe=Nm("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),VCe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),HCe=()=>{var e,t,n;const[a,r]=(0,o.useState)("estimate"),[s,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)({asset:"BTC",asset_class:"crypto",side:"buy",quantity:1,current_price:45e3,tier:"free"});(0,o.useEffect)(()=>{x()},[]);const x=async()=>{try{const[e,t]=await Promise.all([fetch("".concat(VCe,"/pricing/fee-schedule")).then(e=>e.json()),fetch("".concat(VCe,"/pricing/competitor-comparison")).then(e=>e.json())]);i(e),c(t)}catch(jEe){console.error("Error loading pricing data:",jEe)}},v=e=>null===e||void 0===e?"N/A":"".concat(e.toFixed(1)," bps");return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"glass-box-pricing",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Mm,{className:"text-emerald-400"}),"Glass-Box Pricing"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"100% Transparent \u2022 No Hidden Fees \u2022 Real-time Competitor Comparison"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsxs)("span",{className:"px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-mono",children:[(0,zt.jsx)(Dm,{size:12,className:"inline mr-1"}),"Execution Cost Cap Guarantee"]})})]}),(0,zt.jsxs)(bje,{value:a,onValueChange:r,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg",children:[(0,zt.jsxs)(kje,{value:"estimate",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400",children:[(0,zt.jsx)(Pm,{size:14,className:"mr-1"})," Cost Estimate"]}),(0,zt.jsxs)(kje,{value:"schedule",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400",children:[(0,zt.jsx)(WCe,{size:14,className:"mr-1"})," Fee Schedule"]}),(0,zt.jsxs)(kje,{value:"compare",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400",children:[(0,zt.jsx)(wye,{size:14,className:"mr-1"})," vs Competitors"]})]}),(0,zt.jsx)(Nje,{value:"estimate",className:"mt-6",children:(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Order Parameters",icon:"\ud83d\udcdd",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Asset"}),(0,zt.jsxs)("select",{value:f.asset,onChange:e=>g(m(m({},f),{},{asset:e.target.value})),className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[(0,zt.jsx)("option",{value:"BTC",children:"Bitcoin (BTC)"}),(0,zt.jsx)("option",{value:"ETH",children:"Ethereum (ETH)"}),(0,zt.jsx)("option",{value:"AAPL",children:"Apple (AAPL)"}),(0,zt.jsx)("option",{value:"TSLA",children:"Tesla (TSLA)"}),(0,zt.jsx)("option",{value:"EUR/USD",children:"EUR/USD"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Asset Class"}),(0,zt.jsxs)("select",{value:f.asset_class,onChange:e=>g(m(m({},f),{},{asset_class:e.target.value})),className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[(0,zt.jsx)("option",{value:"crypto",children:"Crypto"}),(0,zt.jsx)("option",{value:"equity",children:"Equity"}),(0,zt.jsx)("option",{value:"forex",children:"Forex"}),(0,zt.jsx)("option",{value:"options",children:"Options"}),(0,zt.jsx)("option",{value:"prediction",children:"Prediction"})]})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Side"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)("button",{onClick:()=>g(m(m({},f),{},{side:"buy"})),className:"flex-1 py-2 rounded-lg text-sm font-medium transition-all ".concat("buy"===f.side?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-400"),children:[(0,zt.jsx)(jm,{size:14,className:"inline mr-1"})," Buy"]}),(0,zt.jsxs)("button",{onClick:()=>g(m(m({},f),{},{side:"sell"})),className:"flex-1 py-2 rounded-lg text-sm font-medium transition-all ".concat("sell"===f.side?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-white/5 text-slate-400"),children:[(0,zt.jsx)(Mx,{size:14,className:"inline mr-1"})," Sell"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Quantity"}),(0,zt.jsx)(xSe,{type:"number",value:f.quantity,onChange:e=>g(m(m({},f),{},{quantity:parseFloat(e.target.value)||0})),className:"bg-white/5 border-white/10"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Price ($)"}),(0,zt.jsx)(xSe,{type:"number",value:f.current_price,onChange:e=>g(m(m({},f),{},{current_price:parseFloat(e.target.value)||0})),className:"bg-white/5 border-white/10"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Account Tier"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)("button",{onClick:()=>g(m(m({},f),{},{tier:"free"})),className:"flex-1 py-2 px-4 rounded-lg text-sm transition-all ".concat("free"===f.tier?"bg-slate-500/20 text-white border border-slate-500/30":"bg-white/5 text-slate-400"),children:"Free ($0/mo)"}),(0,zt.jsxs)("button",{onClick:()=>g(m(m({},f),{},{tier:"pro"})),className:"flex-1 py-2 px-4 rounded-lg text-sm transition-all ".concat("pro"===f.tier?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-white/5 text-slate-400"),children:[(0,zt.jsx)(Wm,{size:12,className:"inline mr-1"})," Pro ($29.99/mo)"]})]})]}),(0,zt.jsx)(SSe,{onClick:async()=>{p(!0);try{const e=await fetch("".concat(VCe,"/pricing/estimate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),t=await e.json();d(t)}catch(jEe){console.error("Error getting estimate:",jEe)}p(!1)},className:"w-full bg-emerald-500 hover:bg-emerald-600",disabled:h,children:h?"Calculating...":"Calculate Costs"})]})}),(0,zt.jsx)("div",{className:"space-y-4",children:u?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(vx,{title:"Cost Breakdown",icon:"\ud83d\udcb0",accent:"emerald",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 flex justify-between items-center",children:[(0,zt.jsx)("span",{className:"text-slate-400 text-sm",children:"Notional Value"}),(0,zt.jsxs)("span",{className:"text-white font-bold",children:["$",null===(e=u.notional_value)||void 0===e?void 0:e.toLocaleString()]})]}),null===(t=u.estimated_fees)||void 0===t?void 0:t.map((e,t)=>{var n;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,zt.jsx)("span",{className:"text-slate-400 text-sm",children:e.description}),(0,zt.jsx)("span",{className:"text-amber-400 font-mono",children:v(e.amount_bps)})]}),(0,zt.jsxs)("div",{className:"text-xs text-slate-500 text-right",children:["$",null===(n=e.amount_usd)||void 0===n?void 0:n.toFixed(2)]})]},t)}),(0,zt.jsx)("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:(0,zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zt.jsx)("span",{className:"text-white font-medium",children:"Total Estimated Cost"}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("div",{className:"text-emerald-400 font-bold text-lg",children:[v(u.total_estimated_cost_bps)," (",(y=u.total_estimated_cost_bps,null===y||void 0===y?"N/A":"".concat((y/100).toFixed(2),"%")),")"]}),(0,zt.jsxs)("div",{className:"text-slate-400 text-sm",children:["$",null===(n=u.total_estimated_cost_usd)||void 0===n?void 0:n.toFixed(2)]})]})]})}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30 flex items-center gap-3",children:[(0,zt.jsx)(Dm,{className:"text-blue-400",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"text-blue-400 text-sm font-medium",children:["Cost Cap: ",v(u.max_cost_cap_bps)]}),(0,zt.jsx)("div",{className:"text-xs text-slate-400",children:"If exceeded, we rebate the difference"})]})]})]})}),(0,zt.jsx)(vx,{title:"vs Competitors",icon:"\u2694\ufe0f",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(u.competitor_costs||{}).map(e=>{let[t,n]=e;const a=n-u.total_estimated_cost_bps,r=a>0;return(0,zt.jsxs)("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("span",{className:"text-slate-400 text-sm",children:t}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-slate-300 font-mono",children:v(n)}),r?(0,zt.jsxs)("span",{className:"text-emerald-400 text-xs flex items-center",children:[(0,zt.jsx)(p1,{size:12,className:"mr-1"}),"Save ",v(a)]}):(0,zt.jsxs)("span",{className:"text-red-400 text-xs flex items-center",children:[(0,zt.jsx)(Xx,{size:12,className:"mr-1"}),"+",v(Math.abs(a))]})]})]},t)})})})]}):(0,zt.jsx)("div",{className:"h-64 flex items-center justify-center text-slate-500",children:(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)(Pm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:'Enter order details and click "Calculate Costs"'})]})})})]})}),(0,zt.jsx)(Nje,{value:"schedule",className:"mt-6",children:s&&(0,zt.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Account Tiers",icon:"\ud83d\udc51",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-4",children:Object.entries(s.tiers||{}).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"p-4 rounded-lg ".concat("pro"===t?"bg-amber-500/10 border border-amber-500/30":"bg-white/5 border border-white/10"),children:[(0,zt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,zt.jsx)("span",{className:"text-white font-bold",children:n.name}),(0,zt.jsxs)("span",{className:"font-mono ".concat("pro"===t?"text-amber-400":"text-slate-400"),children:["$",n.monthly_cost,"/mo"]})]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:n.description})]},t)})})}),(0,zt.jsxs)(vx,{title:"Execution Cost Caps",icon:"\ud83d\udee1\ufe0f",accent:"blue",children:[(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"Maximum all-in cost per trade. We rebate any amount above these caps."}),(0,zt.jsx)("div",{className:"space-y-3",children:Object.entries(s.cost_caps||{}).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("span",{className:"text-white capitalize",children:t}),(0,zt.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,zt.jsxs)("span",{className:"text-slate-400",children:["Free: ",n.free," bps"]}),(0,zt.jsxs)("span",{className:"text-amber-400",children:["Pro: ",n.pro," bps"]})]})]},t)})})]}),(0,zt.jsx)("div",{className:"md:col-span-2",children:(0,zt.jsx)(vx,{title:"Fee Schedule by Asset Class",icon:"\ud83d\udcca",accent:"teal",children:(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full text-sm",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/10",children:[(0,zt.jsx)("th",{className:"text-left py-2 text-slate-400 font-normal",children:"Asset Class"}),(0,zt.jsx)("th",{className:"text-right py-2 text-slate-400 font-normal",children:"Free Tier"}),(0,zt.jsx)("th",{className:"text-right py-2 text-amber-400 font-normal",children:"Pro Tier"})]})}),(0,zt.jsx)("tbody",{children:Object.entries(s.asset_classes||{}).map(e=>{var t,n,a,r;let[s,i]=e;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-3 text-white capitalize",children:s}),(0,zt.jsx)("td",{className:"py-3 text-right text-slate-300 font-mono",children:null!==(t=i.free)&&void 0!==t&&t.platform_bps?"".concat(i.free.platform_bps," bps"):null!==(n=i.free)&&void 0!==n&&n.platform_per_contract?"$".concat(i.free.platform_per_contract,"/contract"):"N/A"}),(0,zt.jsx)("td",{className:"py-3 text-right text-amber-400 font-mono",children:void 0!==(null===(a=i.pro)||void 0===a?void 0:a.platform_bps)?"".concat(i.pro.platform_bps," bps"):null!==(r=i.pro)&&void 0!==r&&r.platform_per_contract?"$".concat(i.pro.platform_per_contract,"/contract"):"N/A"})]},s)})})]})})})})]})}),(0,zt.jsx)(Nje,{value:"compare",className:"mt-6",children:l&&(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(p1,{className:"text-emerald-400"}),(0,zt.jsx)("span",{className:"text-white font-medium",children:"OracleIQ: Transparent by Design"})]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Unlike competitors who hide costs in spreads or PFOF, we show you exactly what you pay. Our cost cap guarantee ensures you never pay more than expected."})]}),(0,zt.jsxs)(vx,{title:"Fee Comparison (basis points)",icon:"\ud83d\udcc8",accent:"purple",children:[(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full text-sm",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/10",children:[(0,zt.jsx)("th",{className:"text-left py-2 text-slate-400 font-normal",children:"Broker"}),(0,zt.jsx)("th",{className:"text-right py-2 text-slate-400 font-normal",children:"Equity"}),(0,zt.jsx)("th",{className:"text-right py-2 text-slate-400 font-normal",children:"Crypto"}),(0,zt.jsx)("th",{className:"text-right py-2 text-slate-400 font-normal",children:"Forex"}),(0,zt.jsx)("th",{className:"text-right py-2 text-slate-400 font-normal",children:"Options"})]})}),(0,zt.jsxs)("tbody",{children:[(0,zt.jsxs)("tr",{className:"border-b border-emerald-500/20 bg-emerald-500/5",children:[(0,zt.jsx)("td",{className:"py-3 text-emerald-400 font-medium",children:"OracleIQ (Pro)"}),(0,zt.jsx)("td",{className:"py-3 text-right text-emerald-400 font-mono",children:"5 bps"}),(0,zt.jsx)("td",{className:"py-3 text-right text-emerald-400 font-mono",children:"8 bps"}),(0,zt.jsx)("td",{className:"py-3 text-right text-emerald-400 font-mono",children:"0 bps"}),(0,zt.jsx)("td",{className:"py-3 text-right text-emerald-400 font-mono",children:"$0.35"})]}),Object.entries(l.competitors||{}).map(e=>{let[t,n]=e;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-3 text-white",children:t}),(0,zt.jsx)("td",{className:"py-3 text-right text-slate-300 font-mono",children:null!==n.equity?"".concat(n.equity," bps"):"\u2014"}),(0,zt.jsx)("td",{className:"py-3 text-right text-slate-300 font-mono",children:null!==n.crypto?"".concat(n.crypto," bps"):"\u2014"}),(0,zt.jsx)("td",{className:"py-3 text-right text-slate-300 font-mono",children:null!==n.forex?"".concat(n.forex," bps"):"\u2014"}),(0,zt.jsx)("td",{className:"py-3 text-right text-slate-300 font-mono",children:null!==n.options?"".concat(n.options," bps"):"\u2014"})]},t)})]})]})}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-4",children:'Note: 100 bps = 1%. Competitor figures are estimates based on public fee schedules. "Free" brokers often have hidden costs via spreads or payment for order flow (PFOF).'})]}),(0,zt.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 text-center",children:[(0,zt.jsx)("div",{className:"text-3xl font-bold text-emerald-400 mb-1",children:"No PFOF"}),(0,zt.jsx)("div",{className:"text-slate-400 text-sm",children:"We don't sell your order flow"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 text-center",children:[(0,zt.jsx)("div",{className:"text-3xl font-bold text-blue-400 mb-1",children:"Cost Cap"}),(0,zt.jsx)("div",{className:"text-slate-400 text-sm",children:"Guaranteed max execution cost"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 text-center",children:[(0,zt.jsx)("div",{className:"text-3xl font-bold text-purple-400 mb-1",children:"Rebates"}),(0,zt.jsx)("div",{className:"text-slate-400 text-sm",children:"Auto-refund if cap exceeded"})]})]})]})})]})]});var y},GCe=Nm("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),qCe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),KCe=()=>{var e,t,n;const[a,r]=(0,o.useState)([]),[s,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)("all");(0,o.useEffect)(()=>{h()},[]);const h=async()=>{c(!0);try{const e=await fetch("".concat(qCe,"/audit/executions/demo_user?limit=20")),t=await e.json();r(t)}catch(jEe){console.error("Error fetching execution trail:",jEe),p()}c(!1)},p=async()=>{try{const e=[{asset:"BTC",side:"buy",quantity:.5,fill_price:72245.5,nbbo_bid:72200,nbbo_ask:72290},{asset:"ETH",side:"sell",quantity:2,fill_price:2748.9,nbbo_bid:2745,nbbo_ask:2755},{asset:"AAPL",side:"buy",quantity:100,fill_price:189.23,nbbo_bid:189.1,nbbo_ask:189.35},{asset:"TSLA",side:"buy",quantity:50,fill_price:245.67,nbbo_bid:245.5,nbbo_ask:246},{asset:"SOL",side:"sell",quantity:25,fill_price:98.45,nbbo_bid:98.3,nbbo_ask:98.6}],t=await Promise.all(e.map(async e=>{const t=await fetch("".concat(qCe,"/pricing/execution-receipt"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m(m({},e),{},{order_id:"ORD-".concat(Math.random().toString(36).substr(2,8).toUpperCase()),asset_class:["BTC","ETH","SOL"].includes(e.asset)?"crypto":"equity",venue:["Crypto Exchange","DeFi Venue","NYSE","NASDAQ"][Math.floor(4*Math.random())],latency_ms:5+20*Math.random(),tier:"pro"}))});return await t.json()}));r(t)}catch(jEe){console.error("Error generating receipts:",jEe)}},f=e=>"$".concat(null===e||void 0===e?void 0:e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),g=e=>void 0!==e?"".concat(e.toFixed(1)," bps"):"N/A",x="all"===u?a:a.filter(e=>e.side===u);return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"execution-audit-trail",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Pm,{className:"text-blue-400"}),"Execution Audit Trail"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Every trade, fully transparent \u2022 NBBO comparison \u2022 Latency metrics"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[(0,zt.jsx)("option",{value:"all",children:"All Trades"}),(0,zt.jsx)("option",{value:"buy",children:"Buys Only"}),(0,zt.jsx)("option",{value:"sell",children:"Sells Only"})]}),(0,zt.jsxs)(SSe,{onClick:()=>{const e=a.map(e=>{var t,n,a,r;return[e.receipt_id,e.timestamp,e.asset,e.side,e.quantity,e.fill_price,e.nbbo_bid,e.nbbo_ask,null===(t=e.price_improvement)||void 0===t?void 0:t.toFixed(4),e.execution_venue,null===(n=e.latency_ms)||void 0===n?void 0:n.toFixed(2),null===(a=e.total_fees_bps)||void 0===a?void 0:a.toFixed(2),null===(r=e.total_fees_usd)||void 0===r?void 0:r.toFixed(2)]}),t=[["Receipt ID","Timestamp","Asset","Side","Quantity","Fill Price","NBBO Bid","NBBO Ask","Price Improvement","Venue","Latency (ms)","Total Fees (bps)","Total Fees ($)"].join(","),...e.map(e=>e.join(","))].join("\n"),n=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="execution_receipts_".concat((new Date).toISOString().split("T")[0],".csv"),s.click()},className:"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30",children:[(0,zt.jsx)(GCe,{size:16,className:"mr-2"})," Export CSV"]}),(0,zt.jsxs)(SSe,{onClick:p,className:"bg-teal-500/20 text-teal-400 hover:bg-teal-500/30",disabled:l,children:[(0,zt.jsx)(Wm,{size:16,className:"mr-2"})," ",l?"Loading...":"Refresh"]})]})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total Trades",value:a.length,icon:WCe,color:"text-blue-400"},{label:"Avg Latency",value:"".concat((a.reduce((e,t)=>e+(t.latency_ms||0),0)/(a.length||1)).toFixed(1),"ms"),icon:wwe,color:"text-amber-400"},{label:"Avg Fees",value:g(a.reduce((e,t)=>e+(t.total_fees_bps||0),0)/(a.length||1)),icon:Mm,color:"text-emerald-400"},{label:"Price Improvement",value:"".concat(a.filter(e=>e.price_improvement>0).length,"/").concat(a.length),icon:jm,color:"text-purple-400"}].map((e,t)=>(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)(e.icon,{className:"w-5 h-5 ".concat(e.color," mb-2")}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white",children:e.value}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:e.label})]},t))}),(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsx)("h3",{className:"text-sm font-bold text-slate-400",children:"Recent Executions"}),x.map((e,t)=>{var n,a;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},onClick:()=>i(e),className:"p-4 rounded-xl cursor-pointer transition-all ".concat((null===s||void 0===s?void 0:s.receipt_id)===e.receipt_id?"bg-blue-500/20 border border-blue-500/30":"bg-white/5 border border-white/10 hover:bg-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat("buy"===e.side?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:null===(n=e.side)||void 0===n?void 0:n.toUpperCase()}),(0,zt.jsx)("span",{className:"text-white font-medium",children:e.asset}),(0,zt.jsxs)("span",{className:"text-slate-500 text-sm",children:["\xd7",e.quantity]})]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:e.receipt_id})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,zt.jsxs)("div",{className:"text-slate-400",children:["Fill: ",(0,zt.jsx)("span",{className:"text-white",children:f(e.fill_price)})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsxs)("span",{className:"text-slate-500",children:[null===(a=e.latency_ms)||void 0===a?void 0:a.toFixed(1),"ms"]}),e.price_improvement>0?(0,zt.jsxs)("span",{className:"text-emerald-400 flex items-center text-xs",children:[(0,zt.jsx)(jm,{size:12,className:"mr-1"}),"+",f(e.price_improvement)]}):(0,zt.jsx)("span",{className:"text-slate-500 text-xs",children:"No improvement"})]})]})]},e.receipt_id)})]}),(0,zt.jsx)("div",{children:s?(0,zt.jsx)(vx,{title:"Receipt ".concat(s.receipt_id),icon:"\ud83e\uddfe",accent:"blue",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3 p-4 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Asset"}),(0,zt.jsx)("div",{className:"text-white font-bold",children:s.asset})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Side"}),(0,zt.jsx)("div",{className:"font-bold ".concat("buy"===s.side?"text-emerald-400":"text-red-400"),children:null===(e=s.side)||void 0===e?void 0:e.toUpperCase()})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Quantity"}),(0,zt.jsx)("div",{className:"text-white",children:s.quantity})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Venue"}),(0,zt.jsx)("div",{className:"text-white",children:s.execution_venue})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)(zm,{className:"w-4 h-4 text-blue-400"}),(0,zt.jsx)("span",{className:"text-sm font-medium text-white",children:"NBBO Comparison"})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Best Bid"}),(0,zt.jsx)("div",{className:"text-white font-mono",children:f(s.nbbo_bid)})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Your Fill"}),(0,zt.jsx)("div",{className:"text-teal-400 font-mono font-bold",children:f(s.fill_price)})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Best Ask"}),(0,zt.jsx)("div",{className:"text-white font-mono",children:f(s.nbbo_ask)})]})]}),s.price_improvement>0&&(0,zt.jsx)("div",{className:"mt-3 text-center",children:(0,zt.jsxs)("span",{className:"px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-400 text-xs",children:[(0,zt.jsx)(p1,{size:12,className:"inline mr-1"}),"Price Improvement: ",f(s.price_improvement)]})})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-sm font-medium text-white mb-2",children:"Fee Breakdown"}),null===(t=s.fees)||void 0===t?void 0:t.map((e,t)=>(0,zt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:e.description}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("div",{className:"text-white font-mono text-sm",children:g(e.amount_bps)}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:f(e.amount_usd)})]})]},t)),(0,zt.jsxs)("div",{className:"flex justify-between items-center pt-3",children:[(0,zt.jsx)("span",{className:"text-white font-medium",children:"Total Cost"}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("div",{className:"text-teal-400 font-bold",children:g(s.total_fees_bps)}),(0,zt.jsx)("div",{className:"text-sm text-slate-400",children:f(s.total_fees_usd)})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Latency"}),(0,zt.jsxs)("div",{className:"text-white font-mono",children:[null===(n=s.latency_ms)||void 0===n?void 0:n.toFixed(2),"ms"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Timestamp"}),(0,zt.jsx)("div",{className:"text-white text-xs font-mono",children:new Date(s.timestamp).toLocaleString()})]})]}),s.savings_vs_competitors&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("div",{className:"text-sm font-medium text-white mb-2",children:"You Saved vs Competitors"}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(s.savings_vs_competitors).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:t}),(0,zt.jsx)("span",{className:"text-xs font-mono ".concat(n>0?"text-emerald-400":"text-slate-500"),children:n>0?"+".concat(g(n)):g(n)})]},t)})})]})]})}):(0,zt.jsx)("div",{className:"h-64 flex items-center justify-center text-slate-500 bg-white/5 rounded-xl border border-white/10",children:(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)(Pm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"Select a trade to view execution details"})]})})})]})]})};var XCe;const YCe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),$Ce=null===(XCe="https://tradehub-380.preview.emergentagent.com")?void 0:XCe.replace("https://","wss://").replace("http://","ws://"),QCe=()=>{const[e,t]=(0,o.useState)(null),[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),p=(0,o.useRef)(null),f=(0,o.useRef)(null),m=(0,o.useCallback)(e=>{t({totalValue:e.total_value,dailyVaR:e.daily_var95,weeklyVaR:e.weekly_var95,monthlyVaR:e.monthly_var95,currentDrawdown:e.current_drawdown,maxDrawdown:e.max_drawdown,sharpeRatio:e.sharpe_ratio,sortinoRatio:e.sortino_ratio,beta:e.beta,correlation:e.correlation_to_market,volatility:e.volatility_annual,riskScore:e.risk_score,stressScenarios:e.stress_scenarios}),a(e.positions.map(e=>({symbol:e.symbol,allocation:e.allocation,value:e.value,var95:e.var95,heat:e.heat,beta:e.beta,drawdown:e.drawdown,volatility:e.volatility}))),u(new Date),s(!1)},[]),g=(0,o.useCallback)(()=>{if($Ce)try{const e=new WebSocket("".concat($Ce,"/api/risk/ws/demo_user"));e.onopen=()=>{console.log("Risk WebSocket connected"),l(!0)},e.onmessage=e=>{try{const t=JSON.parse(e.data);"risk_update"===t.type?m(t.data):"risk_alert"===t.type&&(h({type:t.alert_type,message:t.message,timestamp:new Date(t.timestamp)}),setTimeout(()=>h(null),1e4))}catch(jEe){console.error("Error parsing WebSocket message:",jEe)}},e.onclose=()=>{console.log("Risk WebSocket disconnected"),l(!1),f.current=setTimeout(g,5e3)},e.onerror=e=>{console.error("Risk WebSocket error:",e)},p.current=e}catch(jEe){console.error("Failed to connect WebSocket:",jEe),x()}},[m]),x=async()=>{s(!0);try{const e=await fetch("".concat(YCe,"/risk/portfolio/demo_user")),t=await e.json();m(t)}catch(e){console.error("Error fetching risk data:",e),t({totalValue:127432.5,dailyVaR:2548.65,weeklyVaR:5697.89,monthlyVaR:12743.25,currentDrawdown:-3.2,maxDrawdown:-12.5,sharpeRatio:1.85,sortinoRatio:2.12,beta:1.15,correlation:.78,volatility:18.5}),a([{symbol:"BTC",allocation:35,value:44601.38,var95:1784.06,heat:85,beta:1.4,drawdown:-5.2},{symbol:"ETH",allocation:25,value:31858.13,var95:1274.33,heat:72,beta:1.3,drawdown:-4.1}]),s(!1)}};(0,o.useEffect)(()=>(g(),()=>{p.current&&p.current.close(),f.current&&clearTimeout(f.current)}),[g]);const v=e=>e>=5?"text-red-400":e>=3?"text-amber-400":"text-emerald-400",y=e=>"$".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),b=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%");return r?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)(Swe,{className:"w-8 h-8 text-teal-400 animate-spin"})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"risk-dashboard",children:[(0,zt.jsx)(an,{children:d&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 rounded-xl bg-red-500/20 border border-red-500/50 flex items-center gap-3",children:[(0,zt.jsx)(y1,{className:"text-red-400 w-6 h-6 flex-shrink-0"}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsx)("div",{className:"text-red-400 font-semibold",children:d.type}),(0,zt.jsx)("div",{className:"text-red-300 text-sm",children:d.message})]}),(0,zt.jsx)("button",{onClick:()=>h(null),className:"text-red-400 hover:text-red-300",children:"\xd7"})]})}),(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Dm,{className:"text-purple-400"}),"Risk Dashboard",(0,zt.jsxs)("span",{className:"flex items-center gap-1.5 text-xs px-2 py-1 rounded-full ".concat(i?"bg-emerald-500/20 text-emerald-400":"bg-slate-500/20 text-slate-400"),children:[i?(0,zt.jsx)(Rx,{size:12}):(0,zt.jsx)(Px,{size:12}),i?"LIVE":"OFFLINE"]})]}),(0,zt.jsxs)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:["Visual VaR \u2022 Portfolio Heat \u2022 Drawdown Projections",c&&(0,zt.jsxs)("span",{className:"ml-2 text-slate-600",children:["\u2022 Updated ",c.toLocaleTimeString()]})]})]}),(0,zt.jsxs)("button",{onClick:()=>{var e;(null===(e=p.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?p.current.send("refresh"):x()},className:"px-4 py-2 rounded-lg bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-all flex items-center gap-2",children:[(0,zt.jsx)(Swe,{size:16,className:r?"animate-spin":""})," Refresh"]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Portfolio Value"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white",children:y(e.totalValue)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Daily VaR (95%)"}),(0,zt.jsx)("div",{className:"text-2xl font-bold ".concat(v(e.dailyVaR/e.totalValue*100)),children:y(e.dailyVaR)}),(0,zt.jsxs)("div",{className:"text-xs text-slate-500",children:[(e.dailyVaR/e.totalValue*100).toFixed(2),"% of portfolio"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Current Drawdown"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:b(e.currentDrawdown)}),(0,zt.jsxs)("div",{className:"text-xs text-slate-500",children:["Max: ",b(e.maxDrawdown)]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Sharpe Ratio"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-teal-400",children:e.sharpeRatio.toFixed(2)}),(0,zt.jsxs)("div",{className:"text-xs text-slate-500",children:["Sortino: ",e.sortinoRatio.toFixed(2)]})]})]}),(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Value at Risk Bands",icon:"\ud83d\udcca",accent:"purple",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsx)("div",{className:"text-sm text-slate-400 mb-4",children:"Potential loss over different time horizons at 95% confidence"}),(0,zt.jsx)("div",{className:"space-y-4",children:[{label:"Daily",value:e.dailyVaR,percent:e.dailyVaR/e.totalValue*100},{label:"Weekly",value:e.weeklyVaR,percent:e.weeklyVaR/e.totalValue*100},{label:"Monthly",value:e.monthlyVaR,percent:e.monthlyVaR/e.totalValue*100}].map((e,t)=>(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:e.label}),(0,zt.jsxs)("span",{className:v(e.percent),children:[y(e.value)," (",e.percent.toFixed(1),"%)"]})]}),(0,zt.jsx)("div",{className:"h-3 bg-white/5 rounded-full overflow-hidden",children:(0,zt.jsx)(uu.div,{initial:{width:0},animate:{width:"".concat(Math.min(5*e.percent,100),"%")},transition:{delay:.1*t,duration:.5},className:"h-full rounded-full ".concat(e.percent>=5?"bg-red-500":e.percent>=3?"bg-amber-500":"bg-emerald-500")})})]},e.label))}),(0,zt.jsx)("div",{className:"mt-6 text-center",children:(0,zt.jsxs)("div",{className:"inline-flex items-center justify-center w-32 h-32 rounded-full border-8 border-white/10 relative",children:[(0,zt.jsx)(uu.div,{className:"absolute inset-2 rounded-full",style:{background:"conic-gradient(\n                      ".concat(e.volatility>25?"#ef4444":e.volatility>15?"#f59e0b":"#10b981"," ").concat(3.6*e.volatility,"deg,\n                      rgba(255,255,255,0.1) 0deg\n                    )")},initial:{opacity:0},animate:{opacity:1}}),(0,zt.jsxs)("div",{className:"absolute inset-6 rounded-full bg-[#0a0a0a] flex items-center justify-center flex-col",children:[(0,zt.jsxs)("span",{className:"text-2xl font-bold text-white",children:[e.volatility.toFixed(1),"%"]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:"Volatility"})]})]})})]})}),(0,zt.jsxs)(vx,{title:"Position Heat Map",icon:"\ud83d\udd25",accent:"amber",children:[(0,zt.jsx)("div",{className:"text-sm text-slate-400 mb-4",children:"Risk concentration by position (higher = more risk contribution)"}),(0,zt.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>{return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-white font-bold",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:[e.allocation,"%"]})]}),(0,zt.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat((n=e.heat,n>=80?"text-red-400 bg-red-500/20":n>=60?"text-amber-400 bg-amber-500/20":n>=40?"text-yellow-400 bg-yellow-500/20":"text-emerald-400 bg-emerald-500/20")),children:["Heat: ",e.heat]})]}),(0,zt.jsx)("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden mb-2",children:(0,zt.jsx)(uu.div,{initial:{width:0},animate:{width:"".concat(e.heat,"%")},transition:{delay:.1*t,duration:.5},className:"h-full rounded-full ".concat(e.heat>=80?"bg-gradient-to-r from-red-500 to-red-400":e.heat>=60?"bg-gradient-to-r from-amber-500 to-amber-400":e.heat>=40?"bg-gradient-to-r from-yellow-500 to-yellow-400":"bg-gradient-to-r from-emerald-500 to-emerald-400")})}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"text-slate-500",children:["VaR: ",(0,zt.jsx)("span",{className:"text-white",children:y(e.var95)})]}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["\u03b2: ",(0,zt.jsx)("span",{className:"text-white",children:e.beta.toFixed(1)})]}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["DD: ",(0,zt.jsx)("span",{className:e.drawdown<-5?"text-red-400":"text-amber-400",children:b(e.drawdown)})]})]})]},e.symbol);var n})})]})]}),(0,zt.jsxs)(vx,{title:"Drawdown Projections",icon:"\ud83d\udcc9",accent:"red",children:[(0,zt.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,zt.jsxs)("div",{className:"text-center p-6 rounded-xl bg-white/5",children:[(0,zt.jsx)(Mx,{className:"w-8 h-8 text-amber-400 mx-auto mb-2"}),(0,zt.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:b(e.currentDrawdown)}),(0,zt.jsx)("div",{className:"text-sm text-slate-500",children:"Current Drawdown"})]}),(0,zt.jsxs)("div",{className:"text-center p-6 rounded-xl bg-white/5",children:[(0,zt.jsx)(y1,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),(0,zt.jsx)("div",{className:"text-3xl font-bold text-red-400",children:b(e.maxDrawdown)}),(0,zt.jsx)("div",{className:"text-sm text-slate-500",children:"Max Historical Drawdown"})]}),(0,zt.jsxs)("div",{className:"text-center p-6 rounded-xl bg-white/5",children:[(0,zt.jsx)(rye,{className:"w-8 h-8 text-teal-400 mx-auto mb-2"}),(0,zt.jsx)("div",{className:"text-3xl font-bold text-teal-400",children:"~14 days"}),(0,zt.jsx)("div",{className:"text-sm text-slate-500",children:"Est. Recovery Time"})]})]}),(0,zt.jsx)("div",{className:"mt-6 h-32 flex items-end gap-1",children:Array.from({length:30}).map((e,t)=>{const n=8*Math.sin(.3*t)-3;return(0,zt.jsx)(uu.div,{initial:{height:0},animate:{height:"".concat(5*Math.abs(n)+10,"%")},transition:{delay:.02*t,duration:.3},className:"flex-1 rounded-t ".concat(n<-5?"bg-red-500/60":n<-2?"bg-amber-500/60":"bg-teal-500/60")},t)})}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mt-2",children:[(0,zt.jsx)("span",{children:"30 days ago"}),(0,zt.jsx)("span",{children:"Today"})]})]})]})},JCe=e=>{let{symbol:t="BINANCE:BTCUSDT",theme:n="dark",height:a=500,interval:r="1H",showToolbar:s=!0}=e;const i=(0,o.useRef)(null),[l,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!i.current)return;i.current.innerHTML="";const e=document.createElement("script");return e.src="https://s3.tradingview.com/tv.js",e.async=!0,e.onload=()=>{window.TradingView&&i.current&&(new window.TradingView.widget({autosize:!0,symbol:t,interval:r,timezone:"Etc/UTC",theme:n,style:"1",locale:"en",toolbar_bg:"#0a0a0a",enable_publishing:!1,allow_symbol_change:!0,container_id:i.current.id,hide_side_toolbar:!1,studies:["RSI@tv-basicstudies","MACD@tv-basicstudies"],show_popup_button:!0,popup_width:"1000",popup_height:"650"}),c(!0))},document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[t,r,n]);const u="tradingview_".concat(t.replace(/[^a-zA-Z0-9]/g,"_"));return(0,zt.jsxs)("div",{className:"relative",children:[!l&&(0,zt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5 rounded-xl",children:(0,zt.jsx)(Swe,{className:"w-8 h-8 text-teal-400 animate-spin"})}),(0,zt.jsx)("div",{id:u,ref:i,style:{height:"".concat(a,"px")},className:"rounded-xl overflow-hidden"})]})},ZCe=()=>{const[e,t]=(0,o.useState)("BINANCE:BTCUSDT"),[n,a]=(0,o.useState)("1H"),[r,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(500);return(0,zt.jsxs)("div",{className:"space-y-6 ".concat(r?"fixed inset-0 z-50 bg-[#0a0a0a] p-6":""),"data-testid":"tradingview-integration",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(WCe,{className:"text-blue-400"}),"Advanced Charts",(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 text-xs font-mono",children:"TradingView"})]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Professional charting \u2022 100+ indicators \u2022 Real-time data"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsx)("button",{onClick:()=>s(!r),className:"p-2 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:r?(0,zt.jsx)(qwe,{size:18,className:"text-slate-400"}):(0,zt.jsx)(Kwe,{size:18,className:"text-slate-400"})})})]}),(0,zt.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,zt.jsxs)("div",{className:"lg:col-span-1 space-y-3",children:[(0,zt.jsxs)(vx,{title:"Watchlist",icon:"\ud83d\udc41\ufe0f",accent:"blue",children:[(0,zt.jsx)("div",{className:"space-y-2",children:[{symbol:"BINANCE:BTCUSDT",name:"BTC/USDT",change:"+2.34%",positive:!0},{symbol:"BINANCE:ETHUSDT",name:"ETH/USDT",change:"+1.89%",positive:!0},{symbol:"BINANCE:SOLUSDT",name:"SOL/USDT",change:"-0.45%",positive:!1},{symbol:"NASDAQ:AAPL",name:"AAPL",change:"+0.67%",positive:!0},{symbol:"NASDAQ:TSLA",name:"TSLA",change:"-1.23%",positive:!1},{symbol:"FX:EURUSD",name:"EUR/USD",change:"+0.12%",positive:!0}].map(n=>(0,zt.jsx)("button",{onClick:()=>t(n.symbol),className:"w-full p-3 rounded-lg transition-all text-left ".concat(e===n.symbol?"bg-blue-500/20 border border-blue-500/30":"bg-white/5 hover:bg-white/10 border border-transparent"),children:(0,zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zt.jsx)("span",{className:"text-white font-medium",children:n.name}),(0,zt.jsx)("span",{className:"text-sm font-mono ".concat(n.positive?"text-emerald-400":"text-red-400"),children:n.change})]})},n.symbol))}),(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Custom Symbol"}),(0,zt.jsx)("input",{type:"text",placeholder:"BINANCE:BTCUSDT",className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",onKeyDown:e=>{"Enter"===e.key&&t(e.target.value)}})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)(wwe,{size:14,className:"text-slate-400"}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Timeframe"})]}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-1",children:[{value:"1",label:"1m"},{value:"5",label:"5m"},{value:"15",label:"15m"},{value:"60",label:"1H"},{value:"240",label:"4H"},{value:"D",label:"1D"},{value:"W",label:"1W"}].map(e=>(0,zt.jsx)("button",{onClick:()=>a(e.value),className:"px-3 py-1.5 rounded text-xs font-medium transition-all ".concat(n===e.value?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e.label},e.value))})]})]}),(0,zt.jsx)("div",{className:"lg:col-span-3",children:(0,zt.jsx)("div",{className:"rounded-xl border border-white/10 overflow-hidden",children:(0,zt.jsx)(JCe,{symbol:e,interval:n,height:r?window.innerHeight-200:i,theme:"dark"})})})]}),!r&&(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"RSI (14)",value:"58.3",status:"neutral"},{label:"MACD",value:"Bullish",status:"positive"},{label:"MA(50) Cross",value:"Above",status:"positive"},{label:"Volume",value:"+23%",status:"positive"}].map((e,t)=>(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:e.label}),(0,zt.jsx)("div",{className:"text-lg font-bold ".concat("positive"===e.status?"text-emerald-400":"negative"===e.status?"text-red-400":"text-slate-300"),children:e.value})]},t))})]})},eEe=("".concat("https://tradehub-380.preview.emergentagent.com","/api"),()=>{const[e,t]=(0,o.useState)(null),[n,a]=(0,o.useState)("January 2026");(0,o.useEffect)(()=>{t({month:"January 2026",totalRevenue:2847500,breakdown:[{source:"Platform Fees",amount:1423750,percentage:50,description:"Commissions on trades (5-25 bps depending on tier)",icon:Mm,color:"text-emerald-400"},{source:"Pro Subscriptions",amount:854250,percentage:30,description:"$29.99/month for reduced fees and advanced features",icon:wye,color:"text-blue-400"},{source:"API Access",amount:284750,percentage:10,description:"Enterprise API subscriptions and data feeds",icon:jm,color:"text-purple-400"},{source:"Spread Capture",amount:199325,percentage:7,description:"Market making on internal matching (transparent)",icon:Cm,color:"text-amber-400"},{source:"Interest on Deposits",amount:85425,percentage:3,description:"Interest earned on customer deposits (shared with users)",icon:Dm,color:"text-cyan-400"}],ethicalCommitments:[{commitment:"Zero Payment for Order Flow (PFOF)",status:!0},{commitment:"No Proprietary Trading Against Customers",status:!0},{commitment:"No Hidden Spread Markups",status:!0},{commitment:"All Fees Disclosed Pre-Trade",status:!0},{commitment:"Best Execution Guarantee",status:!0},{commitment:"No Data Selling to Third Parties",status:!0}],metrics:{activeUsers:52847,totalTradesProcessed:1847293,avgCostPerTrade:12.5,rebatesIssued:42580,customerSatisfaction:4.8},previousMonths:[{month:"December 2025",revenue:2654e3},{month:"November 2025",revenue:2423e3},{month:"October 2025",revenue:2187e3}]})},[]);const r=e=>"$".concat(e.toLocaleString()),s=e=>e.toLocaleString();return e?(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"how-we-make-money",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(zm,{className:"text-amber-400"}),"How We Make Money"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"100% Transparent \u2022 Updated Monthly \u2022 No Secrets"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("select",{value:n,onChange:e=>a(e.target.value),className:"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[(0,zt.jsx)("option",{value:"January 2026",children:"January 2026"}),(0,zt.jsx)("option",{value:"December 2025",children:"December 2025"}),(0,zt.jsx)("option",{value:"November 2025",children:"November 2025"})]}),(0,zt.jsxs)(SSe,{className:"bg-amber-500/20 text-amber-400 hover:bg-amber-500/30",children:[(0,zt.jsx)(GCe,{size:16,className:"mr-2"})," Export Report"]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,zt.jsx)(Dm,{className:"text-emerald-400"}),(0,zt.jsx)("span",{className:"text-white font-medium",children:"Our Ethical Commitments"})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.ethicalCommitments.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[e.status?(0,zt.jsx)(Um,{size:14,className:"text-emerald-400"}):(0,zt.jsx)(Xx,{size:14,className:"text-red-400"}),(0,zt.jsx)("span",{className:"text-slate-300",children:e.commitment})]},t))})]}),(0,zt.jsxs)("div",{className:"p-8 rounded-2xl bg-gradient-to-br from-amber-500/10 to-transparent border border-amber-500/20 text-center",children:[(0,zt.jsxs)("div",{className:"text-sm text-slate-400 mb-2",children:[e.month," Total Revenue"]}),(0,zt.jsx)("div",{className:"text-5xl font-bold text-white mb-2",children:r(e.totalRevenue)}),(0,zt.jsx)("div",{className:"text-emerald-400 text-sm",children:"+7.3% from previous month"})]}),(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Revenue Breakdown",icon:"\ud83d\udcca",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-4",children:e.breakdown.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(e.icon,{className:"w-5 h-5 ".concat(e.color)}),(0,zt.jsx)("span",{className:"text-white font-medium",children:e.source})]}),(0,zt.jsxs)("span",{className:"font-bold ".concat(e.color),children:[e.percentage,"%"]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:e.description}),(0,zt.jsx)("span",{className:"text-sm text-slate-300",children:r(e.amount)})]}),(0,zt.jsx)("div",{className:"mt-2 h-2 bg-white/5 rounded-full overflow-hidden",children:(0,zt.jsx)(uu.div,{initial:{width:0},animate:{width:"".concat(e.percentage,"%")},transition:{delay:.1*t,duration:.5},className:"h-full rounded-full ".concat(e.color.includes("emerald")?"bg-emerald-500":e.color.includes("blue")?"bg-blue-500":e.color.includes("purple")?"bg-purple-500":e.color.includes("amber")?"bg-amber-500":"bg-cyan-500")})})]},e.source))})}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsx)(vx,{title:"Platform Metrics",icon:"\ud83d\udcc8",accent:"blue",children:(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 text-center",children:[(0,zt.jsx)("div",{className:"text-3xl font-bold text-white",children:s(e.metrics.activeUsers)}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Active Users"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 text-center",children:[(0,zt.jsx)("div",{className:"text-3xl font-bold text-white",children:s(e.metrics.totalTradesProcessed)}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Trades Processed"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 text-center",children:[(0,zt.jsxs)("div",{className:"text-3xl font-bold text-emerald-400",children:[e.metrics.avgCostPerTrade," bps"]}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Avg Cost/Trade"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 text-center",children:[(0,zt.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:r(e.metrics.rebatesIssued)}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"Rebates Issued"})]})]})}),(0,zt.jsxs)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("span",{className:"text-white font-medium",children:"Customer Satisfaction"}),(0,zt.jsxs)("span",{className:"text-amber-400 font-bold",children:[e.metrics.customerSatisfaction,"/5.0"]})]}),(0,zt.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,zt.jsx)("div",{className:"w-8 h-8 rounded flex items-center justify-center ".concat(t<=Math.floor(e.metrics.customerSatisfaction)?"bg-amber-500 text-black":"bg-white/10 text-slate-600"),children:"\u2605"},t))})]}),(0,zt.jsx)(vx,{title:"Revenue Trend",icon:"\ud83d\udcc9",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-3",children:[{month:e.month,revenue:e.totalRevenue},...e.previousMonths].map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("span",{className:"text-sm ".concat(0===t?"text-white font-medium":"text-slate-400"),children:e.month}),(0,zt.jsx)("span",{className:"font-mono ".concat(0===t?"text-emerald-400":"text-slate-300"),children:r(e.revenue)})]},e.month))})})]})]}),(0,zt.jsxs)("div",{className:"p-6 rounded-xl bg-red-500/10 border border-red-500/20",children:[(0,zt.jsxs)("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Xx,{className:"text-red-400"}),"What We DON'T Do (Unlike Others)"]}),(0,zt.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:["Sell your order flow to market makers (PFOF)","Trade against your positions with our own capital","Add hidden markups to spreads","Sell your data to hedge funds or advertisers",'Use "gamification" to encourage overtrading',"Hide fees until after you trade"].map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[(0,zt.jsx)("span",{className:"text-red-400",children:"\u2717"}),e]},t))})]}),(0,zt.jsxs)("div",{className:"text-center text-sm text-slate-500",children:[(0,zt.jsx)("p",{children:"This transparency report is independently audited monthly."}),(0,zt.jsxs)("p",{className:"mt-1",children:["Questions? Contact ",(0,zt.jsx)("span",{className:"text-teal-400",children:"transparency@oracleiqtrader.com"})]})]})]}):(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-teal-400 border-t-transparent rounded-full"})})}),tEe=(0,o.createContext)(),nEe="simple",aEe="pro",rEe={[nEe]:{name:"Simple Mode",description:"Streamlined for beginners",availableAssets:["BTC","ETH","AAPL","TSLA","SPY"],features:{basicTrading:!0,priceAlerts:!0,portfolio:!0,newsStream:!0,leverage:!1,options:!1,futures:!1,advancedCharts:!1,apiAccess:!1,riskDashboard:!1,copyTrading:!0,predictionMarkets:!1,supplyChain:!1,quantResearch:!1,agentBuilder:!1},maxLeverage:1,defaultOrderTypes:["market","limit"]},[aEe]:{name:"Pro Mode",description:"Full institutional depth",availableAssets:"all",features:{basicTrading:!0,priceAlerts:!0,portfolio:!0,newsStream:!0,leverage:!0,options:!0,futures:!0,advancedCharts:!0,apiAccess:!0,riskDashboard:!0,copyTrading:!0,predictionMarkets:!0,supplyChain:!0,quantResearch:!0,agentBuilder:!0},maxLeverage:10,defaultOrderTypes:["market","limit","stop","stop-limit","trailing-stop","iceberg"]}},sEe={[nEe]:["dashboard","portfolio","wallet","copy-trading","alerts","bot"],[aEe]:["dashboard","agents","agent-builder","portfolio","wallet","copy-trading","bot","alerts","orders","pricing","audit-trail","risk","playground","prediction-markets","supply-chain","quantitative","training","ml-predictions","tournament","competitions","avatar","crawler","journal","leaderboard","sentiment","benzinga","settings"]},iEe=e=>{let{children:t}=e;const[n,a]=(0,o.useState)(()=>localStorage.getItem("uxMode")||nEe);(0,o.useEffect)(()=>{localStorage.setItem("uxMode",n)},[n]);return(0,zt.jsx)(tEe.Provider,{value:{mode:n,setMode:a,toggleMode:()=>{a(e=>e===nEe?aEe:nEe)},isSimpleMode:n===nEe,isProMode:n===aEe,isFeatureEnabled:e=>{var t;return null!==(t=rEe[n].features[e])&&void 0!==t&&t},isTabAvailable:e=>sEe[n].includes(e),getAvailableTabs:()=>sEe[n],getModeConfig:()=>rEe[n],modeConfig:rEe[n]},children:t})},oEe=e=>{let{compact:t=!1}=e;const{mode:n,setMode:a,isSimpleMode:r,isProMode:s}=(()=>{const e=(0,o.useContext)(tEe);if(!e)throw new Error("useUXMode must be used within UXModeProvider");return e})();return t?(0,zt.jsxs)("button",{onClick:()=>a(r?aEe:nEe),className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1.5 ".concat(s?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-500/20 text-slate-400 border border-slate-500/30"),"data-testid":"ux-mode-toggle",children:[s?(0,zt.jsx)(Wm,{size:12}):(0,zt.jsx)(Dm,{size:12}),s?"Pro":"Simple"]}):(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10","data-testid":"ux-mode-selector",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("span",{className:"text-sm font-medium text-white",children:"Trading Mode"}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-bold ".concat(s?"bg-amber-500/20 text-amber-400":"bg-slate-500/20 text-slate-400"),children:s?"PRO":"SIMPLE"})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,zt.jsxs)("button",{onClick:()=>a(nEe),className:"p-4 rounded-xl transition-all text-left ".concat(r?"bg-teal-500/20 border-2 border-teal-500/50":"bg-white/5 border border-white/10 hover:bg-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Dm,{className:"w-5 h-5 ".concat(r?"text-teal-400":"text-slate-400")}),(0,zt.jsx)("span",{className:"font-bold ".concat(r?"text-white":"text-slate-300"),children:"Simple"}),r&&(0,zt.jsx)(Um,{size:14,className:"text-teal-400 ml-auto"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Streamlined for beginners. Basic trading, no leverage."})]}),(0,zt.jsxs)("button",{onClick:()=>a(aEe),className:"p-4 rounded-xl transition-all text-left ".concat(s?"bg-amber-500/20 border-2 border-amber-500/50":"bg-white/5 border border-white/10 hover:bg-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Wm,{className:"w-5 h-5 ".concat(s?"text-amber-400":"text-slate-400")}),(0,zt.jsx)("span",{className:"font-bold ".concat(s?"text-white":"text-slate-300"),children:"Pro"}),s&&(0,zt.jsx)(Um,{size:14,className:"text-amber-400 ml-auto"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Full depth. Options, futures, API access."})]})]})]})},lEe=Nm("terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),cEe=Nm("webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),uEe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),dEe=()=>{const[e,t]=(0,o.useState)("keys"),[n,a]=(0,o.useState)([]),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)({}),[g,x]=(0,o.useState)(null),[v,y]=(0,o.useState)({name:"",permissions:"read",rateLimit:60}),[b,w]=(0,o.useState)({url:"",events:["trade_executed"],active:!0});(0,o.useEffect)(()=>{k()},[]);const k=async()=>{u(!0);try{a([{id:"key_1",name:"Production Bot",key:"oiq_live_k8j2m4n6p0q2r4t6v8x0z2b4d6f8h0j2",permissions:"full",rateLimit:300,created:"2026-01-15T10:00:00Z",lastUsed:"2026-01-30T14:23:00Z",requestsToday:1247,status:"active"},{id:"key_2",name:"Analytics Dashboard",key:"oiq_live_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6",permissions:"read",rateLimit:60,created:"2026-01-20T15:30:00Z",lastUsed:"2026-01-30T12:45:00Z",requestsToday:342,status:"active"}]),s([{id:"wh_1",url:"https://myapp.com/webhooks/oracleiq",events:["trade_executed","order_filled"],active:!0,lastDelivery:"2026-01-30T14:20:00Z",successRate:98.5}]),l({totalRequests:{today:1589,week:8432,month:34521},byEndpoint:[{endpoint:"/market/prices",calls:12453,avgLatency:45},{endpoint:"/orders",calls:3421,avgLatency:120},{endpoint:"/portfolio/positions",calls:2341,avgLatency:85},{endpoint:"/agents",calls:1234,avgLatency:95}],errors:{rate:.3,common:[{code:429,message:"Rate Limited",count:23},{code:400,message:"Invalid Parameters",count:12}]},rateLimitUsage:45})}catch(jEe){console.error("Error loading developer data:",jEe)}u(!1)},N=(e,t)=>{navigator.clipboard.writeText(e),h(t),setTimeout(()=>h(null),2e3)},j=e=>e.substring(0,12)+"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",S={python:'from oracleiq import OracleIQClient\n\nclient = OracleIQClient(api_key="YOUR_API_KEY")\n\n# Get market prices\nprices = client.market.get_prices(["BTC", "ETH"])\nprint(prices)\n\n# Place an order\norder = client.orders.create(\n    symbol="BTC",\n    side="buy",\n    type="limit",\n    quantity=0.5,\n    price=45000.00\n)\nprint(f"Order ID: {order.id}")',javascript:"import { OracleIQClient } from '@oracleiq/sdk';\n\nconst client = new OracleIQClient({ \n  apiKey: 'YOUR_API_KEY' \n});\n\n// Get market prices\nconst prices = await client.market.getPrices(['BTC', 'ETH']);\nconsole.log(prices);\n\n// Place an order\nconst order = await client.orders.create({\n  symbol: 'BTC',\n  side: 'buy',\n  type: 'limit',\n  quantity: 0.5,\n  price: 45000.00\n});\nconsole.log('Order ID:', order.id);",curl:'# Get market prices\ncurl -X GET "https://api.oracleiqtrader.com/api/market/prices?symbols=BTC,ETH" \\\n  -H "Authorization: Bearer YOUR_API_KEY"\n\n# Place an order\ncurl -X POST "https://api.oracleiqtrader.com/api/orders" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "symbol": "BTC",\n    "side": "buy",\n    "type": "limit",\n    "quantity": 0.5,\n    "price": 45000.00\n  }\''},[C,E]=(0,o.useState)("python");return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"developer-portal",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Lm,{className:"text-cyan-400"}),"Developer Portal"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"API Keys \u2022 Documentation \u2022 Webhooks \u2022 Usage Analytics"})]}),(0,zt.jsxs)("a",{href:"/docs/api",target:"_blank",className:"px-4 py-2 rounded-lg bg-cyan-500/20 text-cyan-400 hover:bg-cyan-500/30 transition-all flex items-center gap-2",children:[(0,zt.jsx)(Lwe,{size:16})," Full API Docs ",(0,zt.jsx)(Cwe,{size:14})]})]}),(0,zt.jsxs)(bje,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(wje,{className:"bg-black/40 border border-white/10 p-1 rounded-lg",children:[(0,zt.jsxs)(kje,{value:"keys",className:"data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400",children:[(0,zt.jsx)(pye,{size:14,className:"mr-1"})," API Keys"]}),(0,zt.jsxs)(kje,{value:"docs",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400",children:[(0,zt.jsx)(lEe,{size:14,className:"mr-1"})," Quick Start"]}),(0,zt.jsxs)(kje,{value:"webhooks",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400",children:[(0,zt.jsx)(cEe,{size:14,className:"mr-1"})," Webhooks"]}),(0,zt.jsxs)(kje,{value:"analytics",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400",children:[(0,zt.jsx)(Tm,{size:14,className:"mr-1"})," Usage"]})]}),(0,zt.jsx)(Nje,{value:"keys",className:"mt-6",children:(0,zt.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,zt.jsx)(vx,{title:"Create API Key",icon:"\ud83d\udd11",accent:"cyan",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Key Name"}),(0,zt.jsx)("input",{type:"text",value:v.name,onChange:e=>y(m(m({},v),{},{name:e.target.value})),placeholder:"My Trading Bot",className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Permissions"}),(0,zt.jsxs)("select",{value:v.permissions,onChange:e=>y(m(m({},v),{},{permissions:e.target.value})),className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[(0,zt.jsx)("option",{value:"read",children:"Read Only (market data, portfolio)"}),(0,zt.jsx)("option",{value:"trading",children:"Trading (+ place orders)"}),(0,zt.jsx)("option",{value:"full",children:"Full Access (+ withdrawals)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Rate Limit (requests/min)"}),(0,zt.jsxs)("select",{value:v.rateLimit,onChange:e=>y(m(m({},v),{},{rateLimit:parseInt(e.target.value)})),className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[(0,zt.jsx)("option",{value:"60",children:"60/min (Free)"}),(0,zt.jsx)("option",{value:"300",children:"300/min (Pro)"}),(0,zt.jsx)("option",{value:"1000",children:"1000/min (Enterprise)"})]})]}),(0,zt.jsxs)(SSe,{onClick:()=>{const e={id:"key_".concat(Date.now()),name:v.name||"Untitled Key",key:"oiq_live_".concat(Math.random().toString(36).substring(2,34)),permissions:v.permissions,rateLimit:v.rateLimit,created:(new Date).toISOString(),lastUsed:null,requestsToday:0,status:"active"};a([...n,e]),y({name:"",permissions:"read",rateLimit:60})},className:"w-full bg-cyan-500 hover:bg-cyan-600",children:[(0,zt.jsx)(xwe,{size:16,className:"mr-2"})," Generate Key"]})]})}),(0,zt.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,zt.jsx)("h3",{className:"text-sm font-bold text-slate-400",children:"Your API Keys"}),n.map(e=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(pye,{className:"text-cyan-400",size:18}),(0,zt.jsx)("span",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("full"===e.permissions?"bg-red-500/20 text-red-400":"trading"===e.permissions?"bg-amber-500/20 text-amber-400":"bg-emerald-500/20 text-emerald-400"),children:e.permissions})]}),(0,zt.jsx)("button",{onClick:()=>{return t=e.id,void a(n.filter(e=>e.id!==t));var t},className:"p-2 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all",children:(0,zt.jsx)(ywe,{size:14})})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-black/30 font-mono text-sm mb-3",children:[(0,zt.jsx)("span",{className:"text-slate-400 flex-1 overflow-hidden",children:p[e.id]?e.key:j(e.key)}),(0,zt.jsx)("button",{onClick:()=>{return t=e.id,void f(e=>m(m({},e),{},{[t]:!e[t]}));var t},className:"p-1.5 rounded hover:bg-white/10 transition-all",children:p[e.id]?(0,zt.jsx)(Xwe,{size:14,className:"text-slate-400"}):(0,zt.jsx)(zm,{size:14,className:"text-slate-400"})}),(0,zt.jsx)("button",{onClick:()=>N(e.key,e.id),className:"p-1.5 rounded hover:bg-white/10 transition-all",children:d===e.id?(0,zt.jsx)(Um,{size:14,className:"text-emerald-400"}):(0,zt.jsx)(kye,{size:14,className:"text-slate-400"})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Rate Limit"}),(0,zt.jsxs)("div",{className:"text-white",children:[e.rateLimit,"/min"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Requests Today"}),(0,zt.jsx)("div",{className:"text-white",children:e.requestsToday.toLocaleString()})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Last Used"}),(0,zt.jsx)("div",{className:"text-white",children:e.lastUsed?new Date(e.lastUsed).toLocaleDateString():"Never"})]})]})]},e.id))]})]})}),(0,zt.jsx)(Nje,{value:"docs",className:"mt-6",children:(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,zt.jsxs)(vx,{title:"Quick Start",icon:"\ud83d\udcbb",accent:"blue",children:[(0,zt.jsx)("div",{className:"flex gap-2 mb-4",children:["python","javascript","curl"].map(e=>(0,zt.jsx)("button",{onClick:()=>E(e),className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all ".concat(C===e?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("pre",{className:"p-4 rounded-lg bg-black/50 text-sm overflow-x-auto font-mono text-slate-300 max-h-80",children:S[C]}),(0,zt.jsx)("button",{onClick:()=>N(S[C],"code"),className:"absolute top-2 right-2 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-all",children:"code"===d?(0,zt.jsx)(Um,{size:14,className:"text-emerald-400"}):(0,zt.jsx)(kye,{size:14,className:"text-slate-400"})})]})]}),(0,zt.jsx)(vx,{title:"Test Endpoints",icon:"\ud83e\uddea",accent:"purple",children:(0,zt.jsxs)("div",{className:"space-y-3",children:[[{path:"/market/prices?symbols=BTC,ETH",method:"GET"},{path:"/pricing/fee-schedule",method:"GET"},{path:"/agents/templates",method:"GET"},{path:"/notifications/stats",method:"GET"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-400",children:e.method}),(0,zt.jsx)("span",{className:"text-sm text-slate-300 font-mono",children:e.path})]}),(0,zt.jsx)("button",{onClick:()=>(async e=>{x({loading:!0,endpoint:e});try{const t=await fetch("".concat(uEe).concat(e)),n=await t.json();x({endpoint:e,status:t.status,success:t.ok,data:JSON.stringify(n,null,2),latency:Math.round(100*Math.random()+50)})}catch(jEe){x({endpoint:e,status:500,success:!1,error:jEe.message})}})(e.path),className:"p-2 rounded-lg bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-all",children:(0,zt.jsx)(Gm,{size:14})})]},e.path)),g&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg ".concat(g.success?"bg-emerald-500/10 border border-emerald-500/30":"bg-red-500/10 border border-red-500/30"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)("span",{className:"text-sm font-mono text-slate-300",children:g.endpoint}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g.success?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:g.status}),g.latency&&(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:[g.latency,"ms"]})]})]}),g.data&&(0,zt.jsxs)("pre",{className:"text-xs text-slate-400 overflow-x-auto max-h-32",children:[g.data.substring(0,500),"..."]})]})]})})]})}),(0,zt.jsx)(Nje,{value:"webhooks",className:"mt-6",children:(0,zt.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,zt.jsx)(vx,{title:"Add Webhook",icon:"\ud83d\udd17",accent:"purple",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Endpoint URL"}),(0,zt.jsx)("input",{type:"url",value:b.url,onChange:e=>w(m(m({},b),{},{url:e.target.value})),placeholder:"https://your-app.com/webhook",className:"w-full p-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Events"}),(0,zt.jsx)("div",{className:"space-y-2",children:["trade_executed","order_filled","order_cancelled","price_alert","copy_trade"].map(e=>(0,zt.jsxs)("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[(0,zt.jsx)("input",{type:"checkbox",checked:b.events.includes(e),onChange:t=>{t.target.checked?w(m(m({},b),{},{events:[...b.events,e]})):w(m(m({},b),{},{events:b.events.filter(t=>t!==e)}))},className:"rounded border-white/20"}),e.replace("_"," ")]},e))})]}),(0,zt.jsxs)(SSe,{onClick:()=>{const e={id:"wh_".concat(Date.now()),url:b.url,events:b.events,active:!0,lastDelivery:null,successRate:100};s([...r,e]),w({url:"",events:["trade_executed"],active:!0})},className:"w-full bg-purple-500 hover:bg-purple-600",disabled:!b.url,children:[(0,zt.jsx)(xwe,{size:16,className:"mr-2"})," Add Webhook"]})]})}),(0,zt.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,zt.jsx)("h3",{className:"text-sm font-bold text-slate-400",children:"Your Webhooks"}),r.map(e=>(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(cEe,{className:"text-purple-400",size:18}),(0,zt.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(e.active?"bg-emerald-400":"bg-slate-500")}),(0,zt.jsx)("span",{className:"text-white font-mono text-sm truncate max-w-xs",children:e.url})]}),(0,zt.jsx)("button",{onClick:()=>{return t=e.id,void s(r.filter(e=>e.id!==t));var t},className:"p-2 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all",children:(0,zt.jsx)(ywe,{size:14})})]}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.events.map(e=>(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs bg-purple-500/20 text-purple-400",children:e},e))}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Success Rate"}),(0,zt.jsxs)("div",{className:"text-emerald-400",children:[e.successRate,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Last Delivery"}),(0,zt.jsx)("div",{className:"text-white",children:e.lastDelivery?new Date(e.lastDelivery).toLocaleString():"Never"})]})]})]},e.id))]})]})}),(0,zt.jsx)(Nje,{value:"analytics",className:"mt-6",children:i&&(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Today"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white",children:i.totalRequests.today.toLocaleString()}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"requests"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"This Week"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white",children:i.totalRequests.week.toLocaleString()}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"requests"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"This Month"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white",children:i.totalRequests.month.toLocaleString()}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"requests"})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Error Rate"}),(0,zt.jsxs)("div",{className:"text-2xl font-bold text-emerald-400",children:[i.errors.rate,"%"]}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"last 24h"})]})]}),(0,zt.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(vx,{title:"Top Endpoints",icon:"\ud83d\udcca",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-3",children:i.byEndpoint.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-white font-mono text-sm",children:e.endpoint}),(0,zt.jsxs)("div",{className:"text-xs text-slate-500",children:[e.calls.toLocaleString()," calls"]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("div",{className:"text-amber-400 text-sm",children:[e.avgLatency,"ms"]}),(0,zt.jsx)("div",{className:"text-xs text-slate-500",children:"avg latency"})]})]},e.endpoint))})}),(0,zt.jsxs)(vx,{title:"Rate Limit Status",icon:"\u26a1",accent:"cyan",children:[(0,zt.jsxs)("div",{className:"text-center py-6",children:[(0,zt.jsxs)("div",{className:"inline-flex items-center justify-center w-32 h-32 rounded-full border-8 border-white/10 relative mb-4",children:[(0,zt.jsx)("div",{className:"absolute inset-2 rounded-full",style:{background:"conic-gradient(#14b8a6 ".concat(3.6*i.rateLimitUsage,"deg, rgba(255,255,255,0.1) 0deg)")}}),(0,zt.jsxs)("div",{className:"absolute inset-4 rounded-full bg-[#0a0a0a] flex items-center justify-center flex-col",children:[(0,zt.jsxs)("span",{className:"text-2xl font-bold text-white",children:[i.rateLimitUsage,"%"]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:"used"})]})]}),(0,zt.jsxs)("div",{className:"text-slate-400 text-sm",children:[Math.round(300*i.rateLimitUsage/100),"/300 requests this minute"]})]}),(0,zt.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,zt.jsx)("div",{className:"text-sm font-medium text-white mb-3",children:"Recent Errors"}),i.errors.common.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5 mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(Xx,{size:14,className:"text-red-400"}),(0,zt.jsxs)("span",{className:"text-sm text-slate-300",children:[e.code," - ",e.message]})]}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:[e.count,"x"]})]},e.code))]})]})]})]})})]})]})},hEe=Nm("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),pEe=Nm("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),fEe=Nm("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),mEe=Nm("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),gEe=Nm("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),xEe="".concat("https://tradehub-380.preview.emergentagent.com","/api"),vEe=[{id:"dashboard",label:"Trading",icon:hEe},{id:"agents",label:"AI Agents",icon:Rm},{id:"agent-builder",label:"Agent Builder",icon:pEe},{id:"portfolio",label:"Portfolio",icon:Cm},{id:"wallet",label:"Wallet",icon:Sm},{id:"copy-trading",label:"Copy",icon:kye},{id:"bot",label:"AI Bot",icon:qm},{id:"alerts",label:"Alerts",icon:wx}],yEe=[{id:"orders",label:"Orders",icon:Em},{id:"pricing",label:"Pricing",icon:Mm},{id:"audit-trail",label:"Execution",icon:Pm},{id:"risk",label:"Risk",icon:Dm},{id:"charts",label:"Charts",icon:WCe},{id:"transparency",label:"Transparency",icon:zm},{id:"developers",label:"Developers",icon:Lm},{id:"playground",label:"Playground",icon:fEe},{id:"prediction-markets",label:"Predictions",icon:Am},{id:"supply-chain",label:"Supply Chain",icon:_m},{id:"quantitative",label:"Quant Research",icon:Om},{id:"training",label:"Training",icon:kke},{id:"ml-predictions",label:"ML Predict",icon:$m},{id:"tournament",label:"Tournament",icon:Xm},{id:"competitions",label:"Compete",icon:lke},{id:"avatar",label:"Avatar",icon:iye},{id:"crawler",label:"Signals",icon:Mwe},{id:"journal",label:"Journal",icon:Lwe},{id:"leaderboard",label:"Leaders",icon:wye},{id:"sentiment",label:"Sentiment",icon:Km},{id:"benzinga",label:"Benzinga",icon:jwe},{id:"settings",label:"Settings",icon:lye}],bEe=[...vEe,...yEe],wEe=()=>{var e,t,n,a,r;const{isAuthenticated:s,loginWithGoogle:i}=Lh(),{t:l}=sf(),[c,u]=(0,o.useState)(!0),[d,h]=(0,o.useState)(!0),[p,f]=(0,o.useState)("dashboard"),[m,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!0),[y,b]=(0,o.useState)("FOCUSED"),[w,k]=(0,o.useState)(!0),[N,j]=(0,o.useState)([]),[S,C]=(0,o.useState)({}),[E,T]=(0,o.useState)(!1);(0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(xEe,"/market/prices")),t={};e.data.forEach(e=>{t[e.symbol]=e.price}),C(t)}catch(e){console.error("Error fetching prices:",e)}};e();const t=setInterval(e,1e4);return()=>clearInterval(t)},[]);const I=(0,o.useCallback)(e=>b(e),[]),A=(0,o.useCallback)(e=>{_("AI Mood: ".concat(e.state," (").concat(e.confidence.toFixed(0),"%)"))},[]),_=e=>{const t={id:Date.now(),text:e,timestamp:new Date};j(e=>[...e,t]),setTimeout(()=>j(e=>e.filter(e=>e.id!==t.id)),5e3)},O=()=>{s||i(),h(!1)};return c?(0,zt.jsx)(an,{children:(0,zt.jsx)(Af,{onComplete:()=>u(!1)})}):!s&&d?(0,zt.jsx)(Cx,{onGetStarted:O}):(0,zt.jsx)(fwe,{initialBalance:1e5,children:(0,zt.jsxs)("div",{className:"min-h-screen bg-[#050505] overflow-x-hidden","data-testid":"main-dashboard",children:[(0,zt.jsx)(If,{}),(0,zt.jsxs)("div",{className:"relative z-10 min-h-screen pb-20 md:pb-16",children:[(0,zt.jsxs)("header",{className:"sticky top-0 z-40 border-b border-white/5 bg-black/60 backdrop-blur-2xl",children:[(0,zt.jsx)("div",{className:"max-w-[1920px] mx-auto px-3 md:px-6 py-2 md:py-3",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 md:gap-6",children:[(0,zt.jsx)("button",{onClick:()=>T(!E),className:"md:hidden p-2 text-slate-400 hover:text-white","data-testid":"mobile-menu-btn",children:E?(0,zt.jsx)(Qm,{size:20}):(0,zt.jsx)(mEe,{size:20})}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 md:w-9 md:h-9 rounded-xl bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/30 flex items-center justify-center",children:(0,zt.jsx)(Wm,{className:"text-teal-400",size:16})}),(0,zt.jsxs)("div",{className:"hidden sm:block",children:[(0,zt.jsx)("h1",{className:"font-heading text-base md:text-lg font-bold uppercase tracking-wider text-white",children:"OracleIQTrader"}),(0,zt.jsx)("p",{className:"text-[10px] text-slate-500 font-mono hidden md:block",children:"AI Trading"})]})]}),(0,zt.jsxs)("nav",{className:"hidden lg:flex items-center gap-1",children:[vEe.map(e=>(0,zt.jsxs)("button",{onClick:()=>f(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-mono transition-all ".concat(p===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"text-slate-500 hover:text-white hover:bg-white/5"),"data-testid":"nav-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:14}),e.label]},e.id)),(0,zt.jsxs)("div",{className:"relative group",children:[(0,zt.jsxs)("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-mono transition-all ".concat(yEe.some(e=>e.id===p)?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"text-slate-500 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(gEe,{size:14}),"More"]}),(0,zt.jsx)("div",{className:"absolute top-full left-0 mt-2 w-48 bg-slate-900/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 max-h-80 overflow-y-auto",children:yEe.map(e=>(0,zt.jsxs)("button",{onClick:()=>f(e.id),className:"w-full flex items-center gap-2 px-4 py-2.5 text-xs font-mono transition-all ".concat(p===e.id?"bg-purple-500/20 text-purple-400":"text-slate-400 hover:text-white hover:bg-white/5"),"data-testid":"nav-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:14}),e.label]},e.id))})]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,zt.jsx)(oEe,{compact:!0}),(0,zt.jsx)(eke,{variant:"simple"}),(0,zt.jsx)(Uwe,{variant:"compact"}),(0,zt.jsxs)(Ox,{variant:"active",pulse:!0,className:"hidden sm:flex",children:[(0,zt.jsx)(rye,{size:10}),l("status.live")]}),(0,zt.jsxs)(Ox,{variant:"FOCUSED"===y?"active":"STRESSED"===y?"danger":"warning",className:"hidden md:flex",children:[(0,zt.jsx)(Rm,{size:10}),l("status.".concat(y.toLowerCase()))]}),s?(0,zt.jsx)(bye,{}):(0,zt.jsxs)(Tx,{onClick:i,variant:"teal",size:"sm","data-testid":"header-login-btn",children:[(0,zt.jsx)(Ix,{size:14}),(0,zt.jsx)("span",{className:"hidden sm:inline",children:"Sign In"})]})]})]})}),(0,zt.jsx)(an,{children:E&&(0,zt.jsx)(uu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"lg:hidden border-t border-white/5 bg-black/80",children:(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-2 p-3",children:bEe.map(e=>(0,zt.jsxs)("button",{onClick:()=>{f(e.id),T(!1)},className:"flex flex-col items-center gap-1 p-3 rounded-lg text-xs font-mono transition-all ".concat(p===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-500 border border-white/10"),children:[(0,zt.jsx)(e.icon,{size:18}),e.labelKey?l(e.labelKey):e.label]},e.id))})})})]}),(0,zt.jsx)("main",{className:"max-w-[1920px] mx-auto px-3 md:px-6 py-4 md:py-6",children:(0,zt.jsxs)(an,{mode:"wait",children:["dashboard"===p&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6",children:[(0,zt.jsxs)("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,zt.jsx)(i1,{onMoodChange:I,onMoodDetected:A}),(0,zt.jsx)(Hx,{onCommand:e=>_("Voice: ".concat(e.action," ").concat(e.symbol||""))})]}),(0,zt.jsxs)("div",{className:"lg:col-span-6 space-y-4 md:space-y-6",children:[w&&(0,zt.jsx)(Bx,{onClose:()=>k(!1),symbols:["BTC","ETH","SPY"]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,zt.jsx)(Jve,{symbol:"BTC",title:"Bitcoin / USD"}),(0,zt.jsx)(Jve,{symbol:"ETH",title:"Ethereum / USD"})]}),(0,zt.jsx)(an,{children:N.map(e=>(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},className:"glass-teal rounded-xl px-4 py-2",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(Wm,{size:14,className:"text-teal-400"}),(0,zt.jsx)("p",{className:"text-sm text-white font-mono flex-1",children:e.text}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:e.timestamp.toLocaleTimeString()})]})},e.id))}),(0,zt.jsxs)(vx,{title:"Speed Trading",icon:"\u26a1",accent:"teal",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Symbol"}),(0,zt.jsx)("p",{className:"text-lg md:text-xl font-heading font-bold text-white",children:"AAPL"})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Qty"}),(0,zt.jsx)("p",{className:"text-lg md:text-xl font-heading font-bold text-white",children:"1,000"})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Type"}),(0,zt.jsx)("p",{className:"text-lg md:text-xl font-heading font-bold text-teal-400",children:"MARKET"})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsxs)(Tx,{variant:"teal",className:"flex-1","data-testid":"quick-buy-btn",children:[(0,zt.jsx)(jm,{size:16}),"BUY"]}),(0,zt.jsxs)(Tx,{variant:"rose",className:"flex-1","data-testid":"quick-sell-btn",children:[(0,zt.jsx)(Mx,{size:16}),"SELL"]})]})]})]}),(0,zt.jsxs)("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,zt.jsx)(d1,{onGesture:e=>_("Gesture: ".concat(e.name))}),(0,zt.jsx)(x1,{tradeRequest:{action:"BUY",symbol:"AAPL",quantity:1e3,price:248.5}}),(0,zt.jsx)(k1,{symbol:"AAPL",action:"BUY"})]})]},"dashboard"),"orders"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(kwe,{currentPrices:S})},"orders"),"pricing"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(HCe,{})},"pricing"),"audit-trail"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(KCe,{})},"audit-trail"),"risk"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(QCe,{})},"risk"),"charts"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-7xl mx-auto",children:(0,zt.jsx)(ZCe,{})},"charts"),"transparency"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(eEe,{})},"transparency"),"developers"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(dEe,{})},"developers"),"alerts"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:(0,zt.jsx)(bwe,{currentPrices:S})},"alerts"),"auto"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(Iwe,{currentPrices:S,onTrade:e=>_("Auto: ".concat(e.side," ").concat(e.symbol))})},"auto"),"news"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(Twe,{})},"news"),"social"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,zt.jsx)(Cye,{})},"social"),"portfolio"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,zt.jsx)(hwe,{})},"portfolio"),"wallet"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:(0,zt.jsx)(Pwe,{currentPrices:S})},"wallet"),"playground"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(yke,{})},"playground"),"bot"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto",children:(0,zt.jsx)(wke,{})},"bot"),"training"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(Ske,{})},"training"),"ml-predictions"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(Eke,{})},"predictions"),"tournament"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(zke,{})},"tournament"),"quantitative"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-7xl mx-auto",children:(0,zt.jsx)(hSe,{})},"quantitative"),"prediction-markets"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(_Se,{})},"prediction-markets"),"copy-trading"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(BSe,{})},"copy-trading"),"supply-chain"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-7xl mx-auto",children:(0,zt.jsx)(QSe,{})},"supply-chain"),"agent-builder"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(UCe,{})},"agent-builder"),"competitions"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(Ike,{})},"competitions"),"crawler"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(Bwe,{})},"crawler"),"export"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:(0,zt.jsx)(Gwe,{})},"export"),"avatar"===p&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:[(0,zt.jsxs)("div",{className:"mb-6",children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(iye,{className:"text-teal-400"}),"AI Trading Avatar"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Interactive voice assistant with real-time market insights"})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)("div",{className:"aspect-square max-h-[400px]",children:(0,zt.jsx)(Zwe,{marketData:{btc_change:(null===(e=S.BTC)||void 0===e?void 0:e.change)||0}})}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsx)(vx,{title:"Avatar Features",icon:"\ud83e\udd16",accent:"teal",children:(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 68-point facial mesh overlay"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Real-time emotional expressions"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Voice synthesis (OpenAI TTS)"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Market-responsive mood"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Voice command recognition"})]})}),(0,zt.jsx)(vx,{title:"Current Market Context",icon:"\ud83d\udcca",accent:"blue",children:(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"BTC Change"}),(0,zt.jsxs)("p",{className:"font-mono ".concat(((null===(t=S.BTC)||void 0===t?void 0:t.change)||0)>=0?"text-emerald-400":"text-red-400"),children:[((null===(n=S.BTC)||void 0===n?void 0:n.change)||0).toFixed(2),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"ETH Change"}),(0,zt.jsxs)("p",{className:"font-mono ".concat(((null===(a=S.ETH)||void 0===a?void 0:a.change)||0)>=0?"text-emerald-400":"text-red-400"),children:[((null===(r=S.ETH)||void 0===r?void 0:r.change)||0).toFixed(2),"%"]})]})]})})]})]})]},"avatar"),"settings"===p&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:[(0,zt.jsxs)("div",{className:"mb-6",children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(lye,{className:"text-slate-400"}),l("common.settings")]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Configure your trading experience"})]}),(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsx)(vx,{title:"Appearance",icon:"\ud83c\udfa8",accent:"purple",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:"Theme"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Choose your preferred color scheme"})]}),(0,zt.jsx)(eke,{})]})}),(0,zt.jsx)(vx,{title:"Notifications",icon:"\ud83d\udd14",accent:"amber",children:(0,zt.jsx)(nke,{})}),(0,zt.jsx)(vx,{title:"Language",icon:"\ud83c\udf0d",accent:"blue",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:"Display Language"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Select your preferred language"})]}),(0,zt.jsx)(Uwe,{})]})}),(0,zt.jsx)(Oke,{})]})]},"settings"),"journal"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto",children:(0,zt.jsx)(ike,{})},"journal"),"leaderboard"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(uke,{})},"leaderboard"),"sentiment"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(fke,{})},"sentiment"),"benzinga"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto",children:(0,zt.jsx)(Ake,{})},"benzinga")]})}),(0,zt.jsx)("div",{className:"hidden md:block fixed bottom-14 left-0 right-0 z-30 px-6",children:(0,zt.jsx)(eye,{voiceActive:m,gestureReady:x,mood:y,riskLevel:"LOW"})}),(0,zt.jsx)(sye,{onVoice:()=>{g(!m),_(m?"Voice deactivated":"Voice activated")},onGesture:()=>_("Gesture recognition triggered"),onMood:()=>{const e=["FOCUSED","STRESSED","FATIGUED","CONFIDENT"],t=e[(e.indexOf(y)+1)%e.length];b(t),_("Mood: ".concat(t))},onOracle:()=>_("Querying oracle memory..."),onMessage:()=>{const e=["Market volatility increasing","Bullish signal on NVDA","Risk parameters updated"];_(e[Math.floor(Math.random()*e.length)])},voiceActive:m})]})]})})},kEe=()=>{var e;return null!==(e=Ce().hash)&&void 0!==e&&e.includes("session_id=")?(0,zt.jsx)(_x,{}):(0,zt.jsxs)($e,{children:[(0,zt.jsx)(Xe,{path:"/login",element:(0,zt.jsx)(Ax,{})}),(0,zt.jsx)(Xe,{path:"/auth/callback",element:(0,zt.jsx)(_x,{})}),(0,zt.jsx)(Xe,{path:"/*",element:(0,zt.jsx)(wEe,{})})]})};const NEe=function(){return(0,zt.jsx)(It,{children:(0,zt.jsx)(Wh,{children:(0,zt.jsx)(zh,{children:(0,zt.jsx)(iEe,{children:(0,zt.jsx)("div",{className:"App",children:(0,zt.jsx)(kEe,{})})})})})})};c.createRoot(document.getElementById("root")).render((0,zt.jsx)(o.StrictMode,{children:(0,zt.jsx)(NEe,{})}))})()})();
//# sourceMappingURL=main.969db050.js.map