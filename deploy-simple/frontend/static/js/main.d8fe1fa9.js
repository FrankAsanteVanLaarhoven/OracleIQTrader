/*! For license information please see main.d8fe1fa9.js.LICENSE.txt */
(()=>{var e={356(e,t,n){e.exports=n(9645).last},418(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return"0"===n&&Object.is(Number(t),-0)?"-0":n}},551(){},579(e,t,n){"use strict";e.exports=n(2799)},870(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},896(e,t,n){var r=n(8498).default,a=n(8429);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},1203(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&r.isLength(e.length)}},1234(){},1293(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:a=!1,trailing:i=!0,maxWait:s}=n,o=Array(2);let l;a&&(o[0]="leading"),i&&(o[1]="trailing");let c=null;const u=r.debounce(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l=e.apply(this,n),c=null},t,{edges:o}),d=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=s&&(null===c&&(c=Date.now()),Date.now()-c>=s)?(l=e.apply(this,n),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,n),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}},1444(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(418),a=n(3272);t.toPath=function(e){if(Array.isArray(e))return e.map(a.toKey);if("symbol"===typeof e)return[e];const t=[],n=(e=r.toString(e)).length;if(0===n)return t;let i=0,s="",o="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),i++);i<n;){const r=e[i];o?"\\"===r&&i+1<n?(i++,s+=e[i]):r===o?o="":s+=r:l?'"'===r||"'"===r?o=r:"]"===r?(l=!1,t.push(s),s=""):s+=r:"["===r?(l=!0,s&&(t.push(s),s="")):"."===r?s&&(t.push(s),s=""):s+=r,i++}return s&&t.push(s),t}},1844(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},2086(e,t,n){"use strict";e.exports=n(5082)},2104(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1203),a=n(9921);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&r.isArrayLike(e)}},2132(e,t,n){"use strict";var r=n(5225).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(870),i=n(4803),s=n(9972);function o(e,t,n,u){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,r){if(null==t)return!0;if(Array.isArray(t))return l(e,t,n,r);if(t instanceof Map)return function(e,t,n,r){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,i]of t.entries()){if(!1===n(e.get(a),i,a,e,t,r))return!1}return!0}(e,t,n,r);if(t instanceof Set)return c(e,t,n,r);const a=Object.keys(t);if(null==e||i.isPrimitive(e))return 0===a.length;if(0===a.length)return!0;if(null!==r&&void 0!==r&&r.has(t))return r.get(t)===e;null===r||void 0===r||r.set(t,e);try{for(let s=0;s<a.length;s++){const o=a[s];if(!i.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!n(e[o],t[o],o,e,t,r))return!1}return!0}finally{null===r||void 0===r||r.delete(t)}}(e,t,n,u);case"function":return Object.keys(t).length>0?o(e,r({},t),n,u):s.eq(e,t);default:return a.isObject(e)?"string"!==typeof t||""===t:s.eq(e,t)}}function l(e,t,n,r){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let i=0;i<t.length;i++){const s=t[i];let o=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(n(e[l],s,i,e,t,r)&&(c=!0),c){a.add(l),o=!0;break}}if(!o)return!1}return!0}function c(e,t,n,r){return 0===t.size||e instanceof Set&&l([...e],[...t],n,r)}t.isMatchWith=function e(t,n,r){return"function"!==typeof r?e(t,n,()=>{}):o(t,n,function e(t,n,a,i,s,l){const c=r(t,n,a,i,s,l);return void 0!==c?Boolean(c):o(t,n,e,l)},new Map)},t.isSetMatch=c},2204(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5316),a=n(7312),i=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const o=n.length;return o>1&&i.isIterateeCall(e,n[0],n[1])?n=[]:o>2&&i.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),r.orderBy(e,a.flatten(n),["asc"])}},2330(e,t,n){"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,s=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,u=r[1];return o(function(){a.value=n,a.getSnapshot=t,c(a)&&u({inst:a})},[e,n,t]),s(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},2430(e,t,n){var r;!function(a,i,s){var o,l=256,c=s.pow(l,6),u=s.pow(2,52),d=2*u,h=255;function p(e,t,n){var r=[],h=x(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(i)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,v(i)]}}():e,3),r),p=new f(r),y=function(){for(var e=p.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,x(v(p.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(s.random=e,t):e})(y,h,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<l;)s[a]=a++;for(a=0;a<l;a++)s[a]=s[i=h&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=h&a+1],n=n*l+s[h&(s[a]=s[i=h&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function x(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(x(s.random(),i),e.exports){e.exports=p;try{o=n(1234)}catch(y){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},2489(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const n=e[Symbol.toStringTag];if(null==n)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(n,"]")}let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}},2715(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9599),a=n(7330),i=n(3808),s=n(8845);t.iteratee=function(e){if(null==e)return r.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?s.matchesProperty(e[0],e[1]):i.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},2777(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},3272(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3615(e,t,n){var r=n(896);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3757(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4704),a=n(1203),i=n(870),s=n(9972);t.isIterateeCall=function(e,t,n){return!!i.isObject(n)&&(!!("number"===typeof t&&a.isArrayLike(n)&&r.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&s.eq(n[t],e))}},3808(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),a=n(5261);t.matches=function(e){return e=a.cloneDeep(e),t=>r.isMatch(t,e)}},3821(e,t,n){e.exports=n(2204).sortBy},4208(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let r=0;r<e.length;r++){const a=e[r],i=t(a);n.has(i)||n.set(i,a)}return Array.from(n.values())}},4288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var k=Array.isArray;function N(){}var S={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function C(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,a,i,s)}}if(u)return s=s(e),u=""===i?"."+I(e,0):i,k(s)?(a="",null!=u&&(a=u.replace(T,"$&/")+"/"),A(s,t,a,"",function(e){return e})):null!=s&&(E(s)&&(l=s,c=a+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+u,s=C(l.type,c,l.props)),t.push(s)),1;u=0;var d,p=""===i?".":i+":";if(k(e))for(var m=0;m<e.length;m++)u+=A(i=e[m],t,a,o=p+I(i,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=A(i=i.value,t,a,o=p+I(i,m++),s);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",function(e){return t.call(n,e,a++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},P={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=P,t.Component=v,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)!j.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var s=Array(i),o=0;o<i;o++)s[o]=arguments[o+2];r.children=s}return C(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)j.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return C(e,i,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),a=S.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(N,R)}catch(i){R(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.3"},4332(e,t,n){e.exports=n(5053).uniqBy},4334(e,t,n){var r=n(7359),a=n(7066),i=n(9016),s=n(9538),o=n(6288),l=n(5262),c=n(2430);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=s,c.xor4096=o,c.tychei=l,e.exports=c},4391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4530(){},4704(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4803(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:r,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;const s=null!=a&&a.includes("leading"),o=null==a||a.includes("trailing"),l=()=>{null!==i&&(e.apply(n,i),n=void 0,i=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),d()},t)},d=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,i=null},h=function(){if(null!==r&&void 0!==r&&r.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i=t;const o=null==c;u(),s&&o&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},null===r||void 0===r||r.addEventListener("abort",d,{once:!0}),h}},4879(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=r.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043(e,t,n){"use strict";e.exports=n(4288)},5053(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4208),a=n(9599),i=n(2104),s=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return i.isArrayLikeObject(e)?r.uniqBy(Array.from(e),s.iteratee(t)):[]}},5082(e,t){"use strict";var n=60103,r=60106,a=60107,i=60108,s=60114,o=60109,l=60110,c=60112,u=60113,d=60120,h=60115,p=60116,f=60121,m=60122,g=60117,x=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var y=Symbol.for;n=y("react.element"),r=y("react.portal"),a=y("react.fragment"),i=y("react.strict_mode"),s=y("react.profiler"),o=y("react.provider"),l=y("react.context"),c=y("react.forward_ref"),u=y("react.suspense"),d=y("react.suspense_list"),h=y("react.memo"),p=y("react.lazy"),f=y("react.block"),m=y("react.server.block"),g=y("react.fundamental"),x=y("react.debug_trace_mode"),v=y("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case s:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case o:return e;default:return t}}case r:return t}}}t.isFragment=function(e){return b(e)===a}},5225(e,t,n){var r=n(3615);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},5261(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433);t.cloneDeep=function(e){return r.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5262(e,t,n){var r;!function(e,a){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.tychei=o}(0,e=n.nmd(e),n.amdD)},5303(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2489),a=n(4704),i=n(6321),s=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&r.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?s.toPath(t):[t],0===n.length)return!1;let o=e;for(let r=0;r<n.length;r++){const e=n[r];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||i.isArguments(o))&&a.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},5316(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9709),a=n(7043),i=n(1444);t.orderBy=function(e,t,n,s){if(null==e)return[];n=s?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const o=(e,t)=>{let n=e;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:i.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<l.length;a++){const i=r.compareValues(e.criteria[a],t.criteria[a],n[a]);if(0!==i)return i}return 0}).map(e=>e.original)}},5414(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:a=!0,trailing:i=!0}=n;return r.debounce(e,t,{leading:a,maxWait:t,trailing:i})}},5508(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433),a=n(7599);t.cloneDeepWith=function(e,t){return r.cloneDeepWith(e,(n,i,s,o)=>{const l=null===t||void 0===t?void 0:t(n,i,s,o);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return r.copyProperties(t,e),t}case a.argumentsTag:{const t={};return r.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5817(){},5896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,x=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,S||(S=!0,N());else{var t=r(u);null!==t&&_(k,t.startTime-e)}}var N,S=!1,j=-1,C=5,E=-1;function T(){return!!x||!(t.unstable_now()-E<C)}function I(){if(x=!1,S){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(j),j=-1),f=!0;var i=p;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&a(c),w(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&_(k,l.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?N():S=!1}}}if("function"===typeof b)N=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=I,N=function(){O.postMessage(null)}}else N=function(){v(I,0)};function _(e,n){j=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(j),j=-1):g=!0,_(k,i-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,S||(S=!0,N()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5990(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6288(e,t,n){var r;!function(e,a){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,s,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=s+1640531527|0,a=0==(n=o[127&i]^=r+s)?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[a]=r^n;e.w=s,e.X=o,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xor4096=o}(0,e=n.nmd(e),n.amdD)},6321(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===r.getTag(e)}},6392(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6443),a=n(5990),i=n(7599),s=n(4803),o=n(3757);function l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d=null===u||void 0===u?void 0:u(e,t,n,r);if(void 0!==d)return d;if(s.isPrimitive(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const t=new Array(e.length);r.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,n,r,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;r.set(e,t);for(const[a,i]of e)t.set(a,l(i,a,n,r,u));return t}if(e instanceof Set){const t=new Set;r.set(e,t);for(const a of e)t.add(l(a,void 0,n,r,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,n,r,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),c(t,e,n,r,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return r.set(e,t),c(t,e,n,r,u),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof Error){const t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,n,r,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof String){const t=new String(e.valueOf());return r.set(e,t),c(t,e,n,r,u),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),c(t,e,n,r,u),t}return e}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const s=[...Object.keys(t),...r.getSymbols(t)];for(let r=0;r<s.length;r++){const o=s[r],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,n,a,i))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6672(e,t,n){"use strict";var r=n(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},6770(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777);t.toNumber=function(e){return r.isSymbol(e)?NaN:Number(e)}},7004(e,t,n){"use strict";var r=n(8853),a=n(5043),i=n(7950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function _(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case N:return"Suspense";case S:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:_(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}var R=Array.isArray,P=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},F=[],L=-1;function z(e){return{current:e}}function B(e){0>L||(e.current=F[L],F[L]=null,L--)}function U(e,t){L++,F[L]=e.current,e.current=t}var W,V,H=z(null),G=z(null),K=z(null),q=z(null);function X(e,t){switch(U(K,t),U(G,e),U(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=xd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(H),U(H,e)}function Y(){B(H),B(G),B(K)}function $(e){null!==e.memoizedState&&U(q,e);var t=H.current,n=vd(t,e.type);t!==n&&(U(G,e),U(H,n))}function Q(e){G.current===e&&(B(H),B(G)),q.current===e&&(B(q),uh._currentValue=D)}function J(e){if(void 0===W)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+W+e+V}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],o=i[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,se=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,xe=null,ve=null;function ye(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(xe,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/ke|0)|0},we=Math.log,ke=Math.LN2;var Ne=256,Se=262144,je=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?a=Ce(r):0!==(s&=o)?a=Ce(s):n||0!==(n=o&~e)&&(a=Ce(n)):0!==(o=r&~i)?a=Ce(o):0!==s?a=Ce(s):n||0!==(n=r&~e)&&(a=Ce(n)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:a}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=je;return 0===(62914560&(je<<=1))&&(je=4194304),e}function Oe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Pe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function ze(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,We="__reactProps$"+Be,Ve="__reactContainer$"+Be,He="__reactEvents$"+Be,Ge="__reactListeners$"+Be,Ke="__reactHandles$"+Be,qe="__reactResources$"+Be,Xe="__reactMarker$"+Be;function Ye(e){delete e[Ue],delete e[We],delete e[He],delete e[Ge],delete e[Ke]}function $e(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Dd(e);null!==e;){if(n=e[Ue])return n;e=Dd(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[Ue]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Xe]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},ot={};function lt(e,t,n){if(a=t,re.call(ot,a)||!re.call(st,a)&&(it.test(a)?ot[a]=!0:(st[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function xt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,a,i,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?bt(e,s,dt(t)):null!=n?bt(e,s,dt(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function yt(e,t,n,r,a,i,s,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),pt(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(R(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var jt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||jt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Ct(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&Ct(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _t(){}var Rt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Dt=null;function Ft(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[We]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[We]||null;if(!a)throw Error(s(90));vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Lt=!1;function zt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Mt||null!==Dt)&&(Zc(),Mt&&(t=Mt,e=Dt,Dt=Mt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[We]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(Ut)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Qh){Wt=!1}var Ht=null,Gt=null,Kt=null;function qt(){if(Kt)return Kt;var e,t,n=Gt,r=n.length,a="value"in Ht?Ht.value:Ht.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Kt=a.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function $t(){return!1}function Qt(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Yt:$t,this.isPropagationStopped=$t,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Qt(tn),rn=p({},tn,{view:0,detail:0}),an=Qt(rn),sn=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Qt(sn),ln=Qt(p({},sn,{dataTransfer:0})),cn=Qt(p({},rn,{relatedTarget:0})),un=Qt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Qt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Qt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function xn(){return gn}var vn=Qt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Qt(p({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Qt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),wn=Qt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Qt(p({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nn=Qt(p({},tn,{newState:0,oldState:0})),Sn=[9,13,27,32],jn=Ut&&"CompositionEvent"in window,Cn=null;Ut&&"documentMode"in document&&(Cn=document.documentMode);var En=Ut&&"TextEvent"in window&&!Cn,Tn=Ut&&(!jn||Cn&&8<Cn&&11>=Cn),In=String.fromCharCode(32),An=!1;function On(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Dn(e,t,n,r){Mt?Dt?Dt.push(r):Dt=[r]:Mt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,Ln=null;function zn(e){Yu(e,0)}function Bn(e){if(ft(Je(e)))return e}function Un(e,t){if("change"===e)return t}var Wn=!1;if(Ut){var Vn;if(Ut){var Hn="oninput"in document;if(!Hn){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),Hn="function"===typeof Gn.oninput}Vn=Hn}else Vn=!1;Wn=Vn&&(!document.documentMode||9<document.documentMode)}function Kn(){Fn&&(Fn.detachEvent("onpropertychange",qn),Ln=Fn=null)}function qn(e){if("value"===e.propertyName&&Bn(Ln)){var t=[];Dn(t,Ln,e,Pt(e)),zt(zn,t)}}function Xn(e,t,n){"focusin"===e?(Kn(),Ln=n,(Fn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Ln)}function $n(e,t){if("click"===e)return Bn(t)}function Qn(e,t){if("input"===e||"change"===e)return Bn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!Jn(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Ut&&"documentMode"in document&&11>=document.documentMode,sr=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==sr||sr!==mt(r)||("selectionStart"in(r=sr)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},pr={},fr={};function mr(e){if(pr[e])return pr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return pr[e]=n[t];return e}Ut&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),xr=mr("animationiteration"),vr=mr("animationstart"),yr=mr("transitionrun"),br=mr("transitionstart"),wr=mr("transitioncancel"),kr=mr("transitionend"),Nr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Nr.set(e,t),rt(t,[e])}Sr.push("scrollEnd");var Cr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Er=[],Tr=0,Ir=0;function Ar(){for(var e=Tr,t=Ir=Tr=0;t<e;){var n=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var a=Er[t];Er[t++]=null;var i=Er[t];if(Er[t++]=null,null!==r&&null!==a){var s=r.pending;null===s?a.next=a:(a.next=s.next,s.next=a),r.pending=a}0!==i&&Pr(n,a,i)}}function Or(e,t,n,r){Er[Tr++]=e,Er[Tr++]=t,Er[Tr++]=n,Er[Tr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function _r(e,t,n,r){return Or(e,t,n,r),Mr(e)}function Rr(e,t){return Or(e,null,null,t),Mr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-be(n),null===(r=(e=i.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),i):null}function Mr(e){if(50<Hc)throw Hc=0,Gc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Fr(e,t,n,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wr(e,t,n,r,a,i){var o=0;if(r=e,"function"===typeof e)zr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Lr(31,n,t,a)).elementType=E,e.lanes=i,e;case x:return Vr(n.children,a,i,t);case v:o=8,a|=24;break;case y:return(e=Lr(12,n,t,2|a)).elementType=y,e.lanes=i,e;case N:return(e=Lr(13,n,t,a)).elementType=N,e.lanes=i,e;case S:return(e=Lr(19,n,t,a)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case b:o=9;break e;case k:o=11;break e;case j:o=14;break e;case C:o=16,r=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Vr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function Gr(e){var t=Lr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=new WeakMap;function Xr(e,t){if("object"===typeof e&&null!==e){var n=qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],$r=0,Qr=null,Jr=0,Zr=[],ea=0,ta=null,na=1,ra="";function aa(e,t){Yr[$r++]=Jr,Yr[$r++]=Qr,Qr=e,Jr=t}function ia(e,t,n){Zr[ea++]=na,Zr[ea++]=ra,Zr[ea++]=ta,ta=e;var r=na;e=ra;var a=32-be(r)-1;r&=~(1<<a),n+=1;var i=32-be(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,na=1<<32-be(t)+a|n<<a|r,ra=i+e}else na=1<<i|n<<a|r,ra=e}function sa(e){null!==e.return&&(aa(e,1),ia(e,1,0))}function oa(e){for(;e===Qr;)Qr=Yr[--$r],Yr[$r]=null,Jr=Yr[--$r],Yr[$r]=null;for(;e===ta;)ta=Zr[--ea],Zr[ea]=null,ra=Zr[--ea],Zr[ea]=null,na=Zr[--ea],Zr[ea]=null}function la(e,t){Zr[ea++]=na,Zr[ea++]=ra,Zr[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,ua=null,da=!1,ha=null,pa=!1,fa=Error(s(519));function ma(e){throw wa(Xr(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fa}function ga(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[We]=r,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<qu.length;n++)$u(qu[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),Nt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=r.onScroll&&$u("scroll",t),null!=r.onScrollEnd&&$u("scrollend",t),null!=r.onClick&&(t.onclick=_t),t=!0):t=!1,t||ma(e,!0)}function xa(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(pa=!1);case 27:case 3:return void(pa=!0);default:ca=ca.return}}function va(e){if(e!==ca)return!1;if(!da)return xa(e),da=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yd(e.type,e.memoizedProps)),t=!t),t&&ua&&ma(e),xa(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ua=Md(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ua=Md(e)}else 27===n?(n=ua,Cd(e.type)?(e=Pd,Pd=null,ua=e):ua=n):ua=ca?Rd(e.stateNode.nextSibling):null;return!0}function ya(){ua=ca=null,da=!1}function ba(){var e=ha;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),ha=null),e}function wa(e){null===ha?ha=[e]:ha.push(e)}var ka=z(null),Na=null,Sa=null;function ja(e,t,n){U(ka,t._currentValue),t._currentValue=n}function Ca(e){e._currentValue=ka.current,B(ka)}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var o=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ea(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ea(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Ia(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=a.type;Jn(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===q.current){if(null===(o=a.alternate))throw Error(s(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}a=a.return}null!==e&&Ta(t,e,n,r),t.flags|=262144}function Aa(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oa(e){Na=e,Sa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function _a(e){return Pa(Na,e)}function Ra(e,t){return null===Na&&Oa(e),Pa(e,t)}function Pa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Sa){if(null===e)throw Error(s(308));Sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sa=Sa.next=t;return n}var Ma="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Da=r.unstable_scheduleCallback,Fa=r.unstable_NormalPriority,La={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function za(){return{controller:new Ma,data:new Map,refCount:0}}function Ba(e){e.refCount--,0===e.refCount&&Da(Fa,function(){e.controller.abort()})}var Ua=null,Wa=0,Va=0,Ha=null;function Ga(){if(0===--Wa&&null!==Ua){null!==Ha&&(Ha.status="fulfilled");var e=Ua;Ua=null,Va=0,Ha=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ka=P.S;P.S=function(e,t){Rc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ua){var n=Ua=[];Wa=0,Va=Wu(),Ha={status:"pending",value:void 0,then:function(e){n.push(e)}}}Wa++,t.then(Ga,Ga)}(0,t),null!==Ka&&Ka(e,t)};var qa=z(null);function Xa(){var e=qa.current;return null!==e?e:fc.pooledCache}function Ya(e,t){U(qa,null===t?qa.current:t.pool)}function $a(){var e=Xa();return null===e?null:{parent:La._currentValue,pool:e}}var Qa=Error(s(460)),Ja=Error(s(474)),Za=Error(s(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(_t,_t),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw si(e=t.reason),e;default:if("string"===typeof t.status)t.then(_t,_t);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw si(e=t.reason),e}throw ai=t,Qa}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ai=t,Qa;throw t}}var ai=null;function ii(){if(null===ai)throw Error(s(459));var e=ai;return ai=null,e}function si(e){if(e===Qa||e===Za)throw Error(s(483))}var oi=null,li=0;function ci(e){var t=li;return li+=1,null===oi&&(oi=[]),ni(oi,e,t)}function ui(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function di(e,t){if(t.$$typeof===f)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===C&&ri(i)===t.type)?(ui(t=a(t,n.props),n),t.return=e,t):(ui(t=Wr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return ui(n=Wr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case C:return h(e,t=ri(t),n)}if(R(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ci(t),n);if(t.$$typeof===w)return h(e,Ra(e,t),n);di(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===a?c(e,t,n,r):null;case g:return n.key===a?u(e,t,n,r):null;case C:return p(e,t,n=ri(n),r)}if(R(n)||A(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ci(n),r);if(n.$$typeof===w)return p(e,t,Ra(e,n),r);di(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case C:return f(e,t,n,r=ri(r),a)}if(R(r)||A(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return f(e,t,n,ci(r),a);if(r.$$typeof===w)return f(e,t,n,Ra(t,r),a);di(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===x&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===x){if(7===c.tag){n(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===C&&ri(y)===c.type){n(l,c.sibling),ui(d=a(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===x?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ui(d=Wr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Kr(u,l.mode,d)).return=l,l=d}return o(l);case C:return v(l,c,u=ri(u),d)}if(R(u))return function(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var x=p(a,d,o[m],l);if(null===x){null===d&&(d=g);break}e&&d&&null===x.alternate&&t(a,d),s=i(x,s,m),null===u?c=x:u.sibling=x,u=x,d=g}if(m===o.length)return n(a,d),da&&aa(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return da&&aa(a,m),c}for(d=r(d);m<o.length;m++)null!==(g=f(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),da&&aa(a,m),c}(l,c,u,d);if(A(u)){if("function"!==typeof(y=A(u)))throw Error(s(150));return function(a,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,m=o,g=o=0,x=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(x=m,m=null):x=m.sibling;var y=p(a,m,v.value,c);if(null===y){null===m&&(m=x);break}e&&m&&null===y.alternate&&t(a,m),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y,m=x}if(v.done)return n(a,m),da&&aa(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return da&&aa(a,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=f(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),da&&aa(a,g),u}(l,c,u=y.call(u),d)}if("function"===typeof u.then)return v(l,c,ci(u),d);if(u.$$typeof===w)return v(l,c,Ra(l,u),d);di(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=a(c,u)).return=l,l=d):(n(l,c),(d=Hr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{li=0;var a=v(e,t,n,r);return oi=null,a}catch(s){if(s===Qa||s===Za)throw s;var i=Lr(29,s,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=hi(!0),fi=hi(!1),mi=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Mr(e),Pr(e,null,n),t}return Or(e,r,t,n),Mr(e)}function bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}function wi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ki=!1;function Ni(){if(ki){if(null!==Ha)throw Ha}}function Si(e,t,n,r){ki=!1;var a=e.updateQueue;mi=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var h=-536870913&o.lane,f=h!==o.lane;if(f?(gc&h)===h:(r&h)===h){0!==h&&h===Va&&(ki=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var x=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(x,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(x,d,h):m)||void 0===h)break e;d=p({},d,h);break e;case 2:mi=!0}}null!==(h=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(f=o).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),Sc|=s,e.lanes=s,e.memoizedState=d}}function ji(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Ci(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ji(n[e],t)}var Ei=z(null),Ti=z(0);function Ii(e,t){U(Ti,e=kc),U(Ei,t),kc=e|t.baseLanes}function Ai(){U(Ti,kc),U(Ei,Ei.current)}function Oi(){kc=Ti.current,B(Ei),B(Ti)}var _i=z(null),Ri=null;function Pi(e){var t=e.alternate;U(zi,1&zi.current),U(_i,e),null===Ri&&(null===t||null!==Ei.current||null!==t.memoizedState)&&(Ri=e)}function Mi(e){U(zi,zi.current),U(_i,e),null===Ri&&(Ri=e)}function Di(e){22===e.tag?(U(zi,zi.current),U(_i,e),null===Ri&&(Ri=e)):Fi()}function Fi(){U(zi,zi.current),U(_i,_i.current)}function Li(e){B(_i),Ri===e&&(Ri=null),B(zi)}var zi=z(0);function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Od(n)||_d(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ui=0,Wi=null,Vi=null,Hi=null,Gi=!1,Ki=!1,qi=!1,Xi=0,Yi=0,$i=null,Qi=0;function Ji(){throw Error(s(321))}function Zi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function es(e,t,n,r,a,i){return Ui=i,Wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?go:xo,qi=!1,i=n(r,a),qi=!1,Ki&&(i=ns(t,n,r,a)),ts(e),i}function ts(e){P.H=mo;var t=null!==Vi&&null!==Vi.next;if(Ui=0,Hi=Vi=Wi=null,Gi=!1,Yi=0,$i=null,t)throw Error(s(300));null===e||Ro||null!==(e=e.dependencies)&&Aa(e)&&(Ro=!0)}function ns(e,t,n,r){Wi=e;var a=0;do{if(Ki&&($i=null),Yi=0,Ki=!1,25<=a)throw Error(s(301));if(a+=1,Hi=Vi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}P.H=vo,i=t(n,r)}while(Ki);return i}function rs(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?cs(t):t,e=e.useState()[0],(null!==Vi?Vi.memoizedState:null)!==e&&(Wi.flags|=1024),t}function as(){var e=0!==Xi;return Xi=0,e}function is(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ss(e){if(Gi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Gi=!1}Ui=0,Hi=Vi=Wi=null,Ki=!1,Yi=Xi=0,$i=null}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Hi?Wi.memoizedState=Hi=e:Hi=Hi.next=e,Hi}function ls(){if(null===Vi){var e=Wi.alternate;e=null!==e?e.memoizedState:null}else e=Vi.next;var t=null===Hi?Wi.memoizedState:Hi.next;if(null!==t)Hi=t,Vi=e;else{if(null===e){if(null===Wi.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Vi=e).memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},null===Hi?Wi.memoizedState=Hi=e:Hi=Hi.next=e}return Hi}function cs(e){var t=Yi;return Yi+=1,null===$i&&($i=[]),e=ni($i,e,t),t=Wi,null===(null===Hi?t.memoizedState:Hi.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?go:xo),e}function us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cs(e);if(e.$$typeof===w)return _a(e)}throw Error(s(438,String(e)))}function ds(e){var t=null,n=Wi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Wi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function hs(e,t){return"function"===typeof t?t(e):t}function ps(e){return fs(ls(),Vi,e)}function fs(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Ui&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Va&&(d=!0);else{if((Ui&p)===p){u=u.next,p===Va&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,Wi.lanes|=p,Sc|=p}h=u.action,qi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=i):c=c.next=p,Wi.lanes|=h,Sc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Jn(i,e.memoizedState)&&(Ro=!0,d&&null!==(n=Ha)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ms(e){var t=ls(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);Jn(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function gs(e,t,n){var r=Wi,a=ls(),i=da;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Jn((Vi||a).memoizedState,n);if(o&&(a.memoizedState=n,Ro=!0),a=a.queue,Us(ys.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||null!==Hi&&1&Hi.memoizedState.tag){if(r.flags|=2048,Ds(9,{destroy:void 0},vs.bind(null,r,a,n,t),null),null===fc)throw Error(s(349));i||0!==(127&Ui)||xs(r,t,n)}return n}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Wi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function vs(e,t,n,r){t.value=n,t.getSnapshot=r,bs(t)&&ws(e)}function ys(e,t,n){return n(function(){bs(t)&&ws(e)})}function bs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function ws(e){var t=Rr(e,2);null!==t&&Xc(t,e,2)}function ks(e){var t=os();if("function"===typeof e){var n=e;if(e=n(),qi){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:e},t}function Ns(e,t,n,r){return e.baseState=n,fs(e,Vi,"function"===typeof r?r:hs)}function Ss(e,t,n,r,a){if(ho(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==P.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,js(t,i)):(i.next=n.next,t.pending=n.next=i)}}function js(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=P.T,s={};P.T=s;try{var o=n(a,r),l=P.S;null!==l&&l(s,o),Cs(e,t,o)}catch(c){Ts(e,t,c)}finally{null!==i&&null!==s.types&&(i.types=s.types),P.T=i}}else try{Cs(e,t,i=n(a,r))}catch(u){Ts(e,t,u)}}function Cs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Es(e,t,n)},function(n){return Ts(e,t,n)}):Es(e,t,n)}function Es(e,t,n){t.status="fulfilled",t.value=n,Is(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,js(e,n)))}function Ts(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Is(t),t=t.next}while(t!==r)}e.action=null}function Is(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function As(e,t){return t}function Os(e,t){if(da){var n=fc.formState;if(null!==n){e:{var r=Wi;if(da){if(ua){t:{for(var a=ua,i=pa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=Rd(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){ua=Rd(a.nextSibling),r="F!"===a.data;break e}}ma(r)}r=!1}r&&(t=n[0])}}return(n=os()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:t},n.queue=r,n=lo.bind(null,Wi,r),r.dispatch=n,r=ks(!1),i=uo.bind(null,Wi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=os()).queue=a,n=Ss.bind(null,Wi,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function _s(e){return Rs(ls(),Vi,e)}function Rs(e,t,n){if(t=fs(e,t,As)[0],e=ps(hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=cs(t)}catch(s){if(s===Qa)throw Za;throw s}else r=t;var a=(t=ls()).queue,i=a.dispatch;return n!==t.memoizedState&&(Wi.flags|=2048,Ds(9,{destroy:void 0},Ps.bind(null,a,n),null)),[r,i,e]}function Ps(e,t){e.action=t}function Ms(e){var t=ls(),n=Vi;if(null!==n)return Rs(t,n,e);ls(),t=t.memoizedState;var r=(n=ls()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ds(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Wi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fs(){return ls().memoizedState}function Ls(e,t,n,r){var a=os();Wi.flags|=e,a.memoizedState=Ds(1|t,{destroy:void 0},n,void 0===r?null:r)}function zs(e,t,n,r){var a=ls();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==Vi&&null!==r&&Zi(r,Vi.memoizedState.deps)?a.memoizedState=Ds(t,i,n,r):(Wi.flags|=e,a.memoizedState=Ds(1|t,i,n,r))}function Bs(e,t){Ls(8390656,8,e,t)}function Us(e,t){zs(2048,8,e,t)}function Ws(e){var t=ls().memoizedState;return function(e){Wi.flags|=4;var t=Wi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Vs(e,t){return zs(4,2,e,t)}function Hs(e,t){return zs(4,4,e,t)}function Gs(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ks(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,zs(4,4,Gs.bind(null,t,e),n)}function qs(){}function Xs(e,t){var n=ls();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Zi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ys(e,t){var n=ls();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Zi(t,r[1]))return r[0];if(r=e(),qi){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r}function $s(e,t,n){return void 0===n||0!==(1073741824&Ui)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=qc(),Wi.lanes|=e,Sc|=e,n)}function Qs(e,t,n,r){return Jn(n,t)?n:null!==Ei.current?(e=$s(e,n,r),Jn(e,t)||(Ro=!0),e):0===(42&Ui)||0!==(1073741824&Ui)&&0===(261930&gc)?(Ro=!0,e.memoizedState=n):(e=qc(),Wi.lanes|=e,Sc|=e,t)}function Js(e,t,n,r,a){var i=M.p;M.p=0!==i&&8>i?i:8;var s=P.T,o={};P.T=o,uo(e,!1,t,n);try{var l=a(),c=P.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Kc());else co(e,t,r,Kc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Kc())}finally{M.p=i,null!==s&&null!==o.types&&(s.types=o.types),P.T=s}}function Zs(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(s(476));var a=to(e).queue;Js(e,a,t,D,null===n?Zs:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Kc())}function ro(){return _a(uh)}function ao(){return ls().memoizedState}function io(){return ls().memoizedState}function so(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=yi(t,e=vi(n),n);return null!==r&&(Xc(r,t,n),bi(r,t,n)),t={cache:za()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?po(t,n):null!==(n=_r(e,t,n,r))&&(Xc(n,e,r),fo(n,t,r))}function lo(e,t,n){co(e,t,n,Kc())}function co(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))po(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,Jn(o,s))return Or(e,t,a,0),null===fc&&Ar(),!1}catch(l){}if(null!==(n=_r(e,t,a,r)))return Xc(n,e,r),fo(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:Wu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(s(479))}else null!==(t=_r(e,n,r,2))&&Xc(t,e,2)}function ho(e){var t=e.alternate;return e===Wi||null!==t&&t===Wi}function po(e,t){Ki=Gi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}var mo={readContext:_a,use:us,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useLayoutEffect:Ji,useInsertionEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useSyncExternalStore:Ji,useId:Ji,useHostTransitionStatus:Ji,useFormState:Ji,useActionState:Ji,useOptimistic:Ji,useMemoCache:Ji,useCacheRefresh:Ji};mo.useEffectEvent=Ji;var go={readContext:_a,use:us,useCallback:function(e,t){return os().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:Bs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4194308,4,Gs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){Ls(4,2,e,t)},useMemo:function(e,t){var n=os();t=void 0===t?null:t;var r=e();if(qi){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=os();if(void 0!==n){var a=n(t);if(qi){ye(!0);try{n(t)}finally{ye(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=oo.bind(null,Wi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},os().memoizedState=e},useState:function(e){var t=(e=ks(e)).queue,n=lo.bind(null,Wi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qs,useDeferredValue:function(e,t){return $s(os(),e,t)},useTransition:function(){var e=ks(!1);return e=Js.bind(null,Wi,e.queue,!0,!1),os().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Wi,a=os();if(da){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===fc)throw Error(s(349));0!==(127&gc)||xs(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Bs(ys.bind(null,r,i,e),[e]),r.flags|=2048,Ds(9,{destroy:void 0},vs.bind(null,r,i,n,t),null),n},useId:function(){var e=os(),t=fc.identifierPrefix;if(da){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-be(na)-1)).toString(32)+n),0<(n=Xi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Qi++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Os,useActionState:Os,useOptimistic:function(e){var t=os();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Wi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ds,useCacheRefresh:function(){return os().memoizedState=so.bind(null,Wi)},useEffectEvent:function(e){var t=os(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},xo={readContext:_a,use:us,useCallback:Xs,useContext:_a,useEffect:Us,useImperativeHandle:Ks,useInsertionEffect:Vs,useLayoutEffect:Hs,useMemo:Ys,useReducer:ps,useRef:Fs,useState:function(){return ps(hs)},useDebugValue:qs,useDeferredValue:function(e,t){return Qs(ls(),Vi.memoizedState,e,t)},useTransition:function(){var e=ps(hs)[0],t=ls().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:gs,useId:ao,useHostTransitionStatus:ro,useFormState:_s,useActionState:_s,useOptimistic:function(e,t){return Ns(ls(),0,e,t)},useMemoCache:ds,useCacheRefresh:io};xo.useEffectEvent=Ws;var vo={readContext:_a,use:us,useCallback:Xs,useContext:_a,useEffect:Us,useImperativeHandle:Ks,useInsertionEffect:Vs,useLayoutEffect:Hs,useMemo:Ys,useReducer:ms,useRef:Fs,useState:function(){return ms(hs)},useDebugValue:qs,useDeferredValue:function(e,t){var n=ls();return null===Vi?$s(n,e,t):Qs(n,Vi.memoizedState,e,t)},useTransition:function(){var e=ms(hs)[0],t=ls().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:gs,useId:ao,useHostTransitionStatus:ro,useFormState:Ms,useActionState:Ms,useOptimistic:function(e,t){var n=ls();return null!==Vi?Ns(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ds,useCacheRefresh:io};function yo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vo.useEffectEvent=Ws;var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=vi(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=yi(e,a,r))&&(Xc(t,e,r),bi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=vi(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=yi(e,a,r))&&(Xc(t,e,r),bi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=vi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=yi(e,r,n))&&(Xc(t,e,n),bi(t,e,n))}};function wo(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(a,i))}function ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function No(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=p({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function So(e){Cr(e)}function jo(e){console.error(e)}function Co(e){Cr(e)}function Eo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function To(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Io(e,t,n){return(n=vi(n)).tag=3,n.payload={element:null},n.callback=function(){Eo(e,t)},n}function Ao(e){return(e=vi(e)).tag=3,e}function Oo(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){To(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){To(t,n,r),"function"!==typeof a&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var _o=Error(s(461)),Ro=!1;function Po(e,t,n,r){t.child=null===e?fi(t,null,n,r):pi(t,e.child,n,r)}function Mo(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return Oa(t),r=es(e,t,n,s,i,a),o=as(),null===e||Ro?(da&&o&&sa(t),t.flags|=1,Po(e,t,r,a),t.child):(is(e,t,a),al(e,t,a))}function Do(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||zr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Wr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Fo(e,t,i,r,a))}if(i=e.child,!il(e,a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(s,r)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=Br(i,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Zn(i,r)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=r=i,!il(e,a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(Ro=!0)}}return Ho(e,t,n,r,a)}function Lo(e,t,n,r){var a=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,t.child=null;return Bo(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bo(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ya(0,null!==i?i.cachePool:null),null!==i?Ii(t,i):Ai(),Di(t)}else null!==i?(Ya(0,i.cachePool),Ii(t,i),Fi(),t.memoizedState=null):(null!==e&&Ya(0,null),Ai(),Fi());return Po(e,t,a,n),t.child}function zo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bo(e,t,n,r,a){var i=Xa();return i=null===i?null:{parent:La._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ya(0,null),Ai(),Di(t),null!==e&&Ia(e,t,r,!0),t.childLanes=a,null}function Uo(e,t){return(t=Zo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Wo(e,t,n){return pi(t,e.child,null,n),(e=Uo(t,t.pendingProps)).flags|=2,Li(t),t.memoizedState=null,e}function Vo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ho(e,t,n,r,a){return Oa(t),n=es(e,t,n,r,void 0,a),r=as(),null===e||Ro?(da&&r&&sa(t),t.flags|=1,Po(e,t,n,a),t.child):(is(e,t,a),al(e,t,a))}function Go(e,t,n,r,a,i){return Oa(t),t.updateQueue=null,n=ns(t,r,n,a),ts(e),r=as(),null===e||Ro?(da&&r&&sa(t),t.flags|=1,Po(e,t,n,i),t.child):(is(e,t,i),al(e,t,i))}function Ko(e,t,n,r,a){if(Oa(t),null===t.stateNode){var i=Dr,s=n.contextType;"object"===typeof s&&null!==s&&(i=_a(s)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=bo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},gi(t),s=n.contextType,i.context="object"===typeof s&&null!==s?_a(s):Dr,i.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(yo(t,n,s,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&bo.enqueueReplaceState(i,i.state,null),Si(t,r,i,a),Ni(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=No(n,o);i.props=l;var c=i.context,u=n.contextType;s=Dr,"object"===typeof u&&null!==u&&(s=_a(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==s)&&ko(t,i,r,s),mi=!1;var h=t.memoizedState;i.state=h,Si(t,r,i,a),Ni(),c=t.memoizedState,o||h!==c||mi?("function"===typeof d&&(yo(t,n,d,r),c=t.memoizedState),(l=mi||wo(t,n,l,r,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=s,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,xi(e,t),u=No(n,s=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Dr,"object"===typeof c&&null!==c&&(l=_a(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&ko(t,i,r,l),mi=!1,h=t.memoizedState,i.state=h,Si(t,r,i,a),Ni();var p=t.memoizedState;s!==d||h!==p||mi||null!==e&&null!==e.dependencies&&Aa(e.dependencies)?("function"===typeof o&&(yo(t,n,o,r),p=t.memoizedState),(u=mi||wo(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Aa(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Vo(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,a),t.child=pi(t,null,n,a)):Po(e,t,n,a),t.memoizedState=i.state,e=t.child):e=al(e,t,a),e}function qo(e,t,n,r){return ya(),t.flags|=256,Po(e,t,n,r),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:$a()}}function $o(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ec),e}function Qo(e,t,n){var r,a=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&zi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(da){if(i?Pi(t):Fi(),(e=ua)?null!==(e=null!==(e=Ad(e,pa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return _d(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Fi(),l=Zo({mode:"hidden",children:l},i=t.mode),a=Vr(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=Yo(n),a.childLanes=$o(e,r,n),t.memoizedState=Xo,zo(null,a)):(Pi(t),Jo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Pi(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Fi(),t.child=e.child,t.flags|=128,t=null):(Fi(),l=a.fallback,i=t.mode,a=Zo({mode:"visible",children:a.children},i),(l=Vr(l,i,n,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,pi(t,e.child,null,n),(a=t.child).memoizedState=Yo(n),a.childLanes=$o(e,r,n),t.memoizedState=Xo,t=zo(null,a));else if(Pi(t),_d(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(s(419))).stack="",a.digest=r,wa({value:a,source:null,stack:null}),t=el(e,t,n)}else if(Ro||Ia(e,t,n,!1),r=0!==(n&e.childLanes),Ro||r){if(null!==(r=fc)&&(0!==(a=Me(r,n))&&a!==c.retryLane))throw c.retryLane=a,Rr(e,a),Xc(r,e,a),_o;Od(l)||su(),t=el(e,t,n)}else Od(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ua=Rd(l.nextSibling),ca=t,da=!0,ha=null,pa=!1,null!==e&&la(t,e),(t=Jo(t,a.children)).flags|=4096);return t}return i?(Fi(),l=a.fallback,i=t.mode,u=(c=e.child).sibling,(a=Br(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Vr(l,i,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,zo(null,a),a=t.child,null===(l=e.child.memoizedState)?l=Yo(n):(null!==(i=l.cachePool)?(c=La._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=$a(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=$o(e,r,n),t.memoizedState=Xo,zo(e.child,a)):(Pi(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Jo(e,t){return(t=Zo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zo(e,t){return(e=Lr(22,e,null,t)).lanes=0,e}function el(e,t,n){return pi(t,e.child,null,n),(e=Jo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function nl(e,t,n,r,a,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a,s.treeForkCount=i)}function rl(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var s=zi.current,o=0!==(2&s);if(o?(s=1&s|2,t.flags|=128):s&=1,U(zi,s),Po(e,t,r,n),r=da?Jr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),nl(t,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}nl(t,!0,n,null,i,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Sc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ia(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Aa(e))}function sl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!il(e,n)&&0===(128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),ja(0,La,e.memoizedState.cache),ya();break;case 27:case 5:$(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:ja(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Mi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Pi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qo(e,t,n):(Pi(t),null!==(e=al(e,t,n))?e.sibling:null);Pi(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ia(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return rl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),U(zi,zi.current),r)break;return null;case 22:return t.lanes=0,Lo(e,t,n,t.pendingProps);case 24:ja(0,La,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Ro=0!==(131072&e.flags)}else Ro=!1,da&&0!==(1048576&t.flags)&&ia(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===k){t.tag=11,t=Mo(null,t,e,r,n);break e}if(a===j){t.tag=14,t=Do(null,t,e,r,n);break e}}throw t=_(e)||e,Error(s(306,t,""))}zr(e)?(r=No(e,r),t.tag=1,t=Ko(null,t,e,r,n)):(t.tag=0,t=Ho(null,t,e,r,n))}return t;case 0:return Ho(e,t,t.type,t.pendingProps,n);case 1:return Ko(e,t,r=t.type,a=No(r,t.pendingProps),n);case 3:e:{if(X(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,xi(e,t),Si(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ja(0,La,r),r!==i.cache&&Ta(t,[La],n,!0),Ni(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=qo(e,t,r,n);break e}if(r!==a){wa(a=Xr(Error(s(424)),t)),t=qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ua=Rd(e.firstChild),ca=t,da=!0,ha=null,pa=!0,n=fi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ya(),r===a){t=al(e,t,n);break e}Po(e,t,r,n)}t=t.child}return t;case 26:return Vo(e,t),null===e?(n=Gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:da||(n=t.type,e=t.pendingProps,(r=gd(K.current).createElement(n))[Ue]=t,r[We]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&da&&(r=t.stateNode=Fd(t.type,t.pendingProps,K.current),ca=t,pa=!0,a=ua,Cd(t.type)?(Pd=a,ua=Rd(r.firstChild)):ua=a),Po(e,t,t.pendingProps.children,n),Vo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&da&&((a=r=ua)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=Rd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pa))?(t.stateNode=r,ca=t,ua=Rd(r.firstChild),pa=!1,a=!0):a=!1),a||ma(t)),$(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,yd(a,i)?r=null:null!==o&&yd(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=es(e,t,rs,null,null,n),uh._currentValue=a),Vo(e,t),Po(e,t,r,n),t.child;case 6:return null===e&&da&&((e=n=ua)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}(n,t.pendingProps,pa))?(t.stateNode=n,ca=t,ua=null,e=!0):e=!1),e||ma(t)),null;case 13:return Qo(e,t,n);case 4:return X(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):Po(e,t,r,n),t.child;case 11:return Mo(e,t,t.type,t.pendingProps,n);case 7:return Po(e,t,t.pendingProps,n),t.child;case 8:case 12:return Po(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ja(0,t.type,r.value),Po(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Oa(t),r=r(a=_a(a)),t.flags|=1,Po(e,t,r,n),t.child;case 14:return Do(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(da){if("hidden"===r.mode)return e=Uo(t,r),t.lanes=536870912,zo(null,e);if(Mi(t),(e=ua)?null!==(e=null!==(e=Ad(e,pa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return t.lanes=536870912,null}return Uo(t,r)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Mi(t),a)if(256&t.flags)t.flags&=-257,t=Wo(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Ro||Ia(e,t,n,!1),a=0!==(n&e.childLanes),Ro||a){if(null!==(r=fc)&&0!==(o=Me(r,n))&&o!==i.retryLane)throw i.retryLane=o,Rr(e,o),Xc(r,e,o),_o;su(),t=Wo(e,t,n)}else e=i.treeContext,ua=Rd(o.nextSibling),ca=t,da=!0,ha=null,pa=!1,null!==e&&la(t,e),(t=Uo(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Lo(e,t,n,t.pendingProps);case 24:return Oa(t),r=_a(La),null===e?(null===(a=Xa())&&(a=fc,i=za(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},gi(t),ja(0,La,a)):(0!==(e.lanes&n)&&(xi(e,t),Si(t,null,null,n),Ni()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ja(0,La,r)):(r=i.cache,ja(0,La,r),r!==a.cache&&Ta(t,[La],n,!0))),Po(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ai=ei,Ja;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!ru())throw ai=ei,Ja;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Tc|=t)}function dl(e,t){if(!da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(oa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ca(La),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(va(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ba())),hl(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(ol(t),null!==i?(hl(t),cl(t,i)):(hl(t),ll(t,a,0,0,n))):i?i!==e.memoizedState?(ol(t),hl(t),cl(t,i)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,a,0,0,n)),null;case 27:if(Q(t),n=K.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return hl(t),null}e=H.current,va(t)?ga(t):(e=Fd(a,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if(Q(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return hl(t),null}if(i=H.current,va(t))ga(t);else{var o=gd(K.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?o.createElement(a,{is:r.is}):o.createElement(a)}}i[Ue]=t,i[We]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(hd(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=K.current,va(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||ma(t,!0)}else(e=gd(e).createTextNode(r))[Ue]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=va(t),null!==n){if(null===e){if(!r)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ue]=t}else ya(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=ba(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Li(t),t):(Li(t),null);if(0!==(128&t.flags))throw Error(s(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=va(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[Ue]=t}else ya(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),a=!1}else a=ba(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(Li(t),t):(Li(t),null)}return Li(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return Y(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return Ca(t.type),hl(t),null;case 19:if(B(zi),null===(r=t.memoizedState))return hl(t),null;if(a=0!==(128&t.flags),null===(i=r.rendering))if(a)dl(r,!1);else{if(0!==Nc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Bi(e))){for(t.flags|=128,dl(r,!1),e=i.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(zi,1&zi.current|2),da&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Pc&&(t.flags|=128,a=!0,dl(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Bi(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!da)return hl(t),null}else 2*le()-r.renderingStartTime>Pc&&536870912!==n&&(t.flags|=128,a=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=zi.current,U(zi,a?1&n|2:1&n),da&&aa(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Li(t),Oi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(qa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ca(La),hl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function fl(e,t){switch(oa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ca(La),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(Li(t),null===t.alternate)throw Error(s(340));ya()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Li(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ya()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(zi),null;case 4:return Y(),null;case 10:return Ca(t.type),null;case 22:case 23:return Li(t),Oi(),null!==e&&B(qa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ca(La),null;default:return null}}function ml(e,t){switch(oa(t),t.tag){case 3:Ca(La),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Li(t);break;case 13:Li(t);break;case 19:B(zi);break;case 10:Ca(t.type);break;case 22:case 23:Li(t),Oi(),null!==e&&B(qa);break;case 24:Ca(La)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==a)}}catch(o){Nu(t,t.return,o)}}function xl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(u){Nu(a,l,u)}}}r=r.next}while(r!==i)}}catch(u){Nu(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ci(t,n)}catch(r){Nu(e,e.return,r)}}}function yl(e,t,n){n.props=No(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Nu(e,t,r)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){Nu(e,t,a)}}function wl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){Nu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Nu(e,t,i)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Nu(e,e.return,a)}}function Nl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||ud(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":a=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:f!==h&&ud(e,t,p,f,r,h)}}return void vt(e,o,l,c,u,d,i,a);case"select":for(i in f=o=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(i)||ud(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&ud(e,t,a,i,r,c)}return t=l,n=o,r=f,void(null!=p?wt(e,!!n,p,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,a)}for(o in r)if(a=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=a||null!=i))switch(o){case"value":p=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(s(91));break;default:a!==i&&ud(e,t,o,a,r,i)}return void kt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else ud(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:ud(e,t,u,p,r,f)}return;default:if(Tt(t)){for(var x in n)p=n[x],n.hasOwnProperty(x)&&void 0!==p&&!r.hasOwnProperty(x)&&dd(e,t,x,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||dd(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||ud(e,t,h,p,r,f)}(r,e.type,n,t),r[We]=t}catch(a){Nu(e,e.return,a)}}function Sl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function jl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=_t));else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function El(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);hd(t,r,n),t[Ue]=e,t[We]=n}catch(i){Nu(e,e.return,i)}}var Il=!1,Al=!1,Ol=!1,_l="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Pl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Xl(e,n),4&r&&gl(5,n);break;case 1:if(Xl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Nu(n,n.return,s)}else{var a=No(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Nu(n,n.return,o)}}64&r&&vl(n),512&r&&bl(n,n.return);break;case 3:if(Xl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ci(e,t)}catch(s){Nu(n,n.return,s)}}break;case 27:null===t&&4&r&&Tl(n);case 26:case 5:Xl(e,n),null===t&&4&r&&kl(n),512&r&&bl(n,n.return);break;case 12:Xl(e,n);break;case 31:Xl(e,n),4&r&&Bl(e,n);break;case 13:Xl(e,n),4&r&&Ul(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Eu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||Al,a=Il;var i=Al;Il=r,(Al=t)&&!i?$l(e,n,0!==(8772&n.subtreeFlags)):Xl(e,n),Il=a,Al=i}break;case 30:break;default:Xl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,Fl=!1;function Ll(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(xe,n)}catch(i){}switch(n.tag){case 26:Al||wl(n,t),Ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Al||wl(n,t);var r=Dl,a=Fl;Cd(n.type)&&(Dl=n.stateNode,Fl=!1),Ll(e,t,n),Ld(n.stateNode),Dl=r,Fl=a;break;case 5:Al||wl(n,t);case 6:if(r=Dl,a=Fl,Dl=null,Ll(e,t,n),Fl=a,null!==(Dl=r))if(Fl)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(n.stateNode)}catch(s){Nu(n,t,s)}else try{Dl.removeChild(n.stateNode)}catch(s){Nu(n,t,s)}break;case 18:null!==Dl&&(Fl?(Ed(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Hh(e)):Ed(Dl,n.stateNode));break;case 4:r=Dl,a=Fl,Dl=n.stateNode.containerInfo,Fl=!0,Ll(e,t,n),Dl=r,Fl=a;break;case 0:case 11:case 14:case 15:xl(2,n,t),Al||xl(4,n,t),Ll(e,t,n);break;case 1:Al||(wl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&yl(n,t,r)),Ll(e,t,n);break;case 21:Ll(e,t,n);break;case 22:Al=(r=Al)||null!==n.memoizedState,Ll(e,t,n),Al=r;break;default:Ll(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Hh(e)}catch(n){Nu(t,t.return,n)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Hh(e)}catch(n){Nu(t,t.return,n)}}function Wl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Tu.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){Dl=l.stateNode,Fl=!1;break e}break;case 5:Dl=l.stateNode,Fl=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Dl)throw Error(s(160));zl(i,o,a),Dl=null,Fl=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Gl(t,e),t=t.sibling}var Hl=null;function Gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Kl(e),4&r&&(xl(3,e,e.return),gl(3,e),xl(5,e,e.return));break;case 1:Vl(t,e),Kl(e),512&r&&(Al||null===n||wl(n,n.return)),64&r&&Il&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Hl;if(Vl(t,e),Kl(e),512&r&&(Al||null===n||wl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Xe]||i[Ue]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),hd(i,r,n),i[Ue]=e,et(i),r=i;break e;case"link":var o=nh("link","href",a).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(o=nh("meta","content",a).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(s(468,r))}i[Ue]=e,et(i),r=i}e.stateNode=r}else rh(a,e.type,e.stateNode);else e.stateNode=Qd(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rh(a,e.type,e.stateNode):Qd(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Nl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Kl(e),512&r&&(Al||null===n||wl(n,n.return)),null!==n&&4&r&&Nl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Kl(e),512&r&&(Al||null===n||wl(n,n.return)),32&e.flags){a=e.stateNode;try{St(a,"")}catch(m){Nu(e,e.return,m)}}4&r&&null!=e.stateNode&&Nl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Ol=!0);break;case 6:if(Vl(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Nu(e,e.return,m)}}break;case 3:if(th=null,a=Hl,Hl=Ud(t.containerInfo),Vl(t,e),Hl=a,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Hh(t.containerInfo)}catch(m){Nu(e,e.return,m)}Ol&&(Ol=!1,ql(e));break;case 4:r=Hl,Hl=Ud(e.stateNode.containerInfo),Vl(t,e),Kl(e),Hl=r;break;case 12:default:Vl(t,e),Kl(e);break;case 31:case 19:Vl(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Wl(e,r)));break;case 13:Vl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Wl(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Il,d=Al;if(Il=u||a,Al=d||c,Vl(t,e),Al=d,Il=u,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||Il||Al||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){Nu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){Nu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;a?Td(f,!0):Td(c.stateNode,!1)}catch(m){Nu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Wl(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Sl(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var a=n.stateNode;El(e,jl(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(St(i,""),n.flags&=-33),El(e,jl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,jl(e),o);break;default:throw Error(s(161))}}catch(l){Nu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Pl(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:xl(4,t,t.return),Yl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&yl(t,t.return,n),Yl(t);break;case 27:Ld(t.stateNode);case 26:case 5:wl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:$l(a,i,n),gl(4,i);break;case 1:if($l(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Nu(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var o=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)ji(l[a],o)}catch(c){Nu(r,r.return,c)}}n&&64&s&&vl(i),bl(i,i.return);break;case 27:Tl(i);case 26:case 5:$l(a,i,n),n&&null===r&&4&s&&kl(i),bl(i,i.return);break;case 12:$l(a,i,n);break;case 31:$l(a,i,n),n&&4&s&&Bl(a,i);break;case 13:$l(a,i,n),n&&4&s&&Ul(a,i);break;case 22:null===i.memoizedState&&$l(a,i,n),bl(i,i.return);break;case 30:break;default:$l(a,i,n)}t=t.sibling}}function Ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ba(n))}function Jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ba(e))}function Zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,r),2048&a&&gl(9,t);break;case 1:case 31:case 13:default:Zl(e,t,n,r);break;case 3:Zl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ba(e)));break;case 12:if(2048&a){Zl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,o=i.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Nu(t,t.return,l)}}else Zl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,null!==t.memoizedState?2&i._visibility?Zl(e,t,n,r):nc(e,t):2&i._visibility?Zl(e,t,n,r):(i._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Ql(s,t);break;case 24:Zl(e,t,n,r),2048&a&&Jl(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,s=t,o=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:tc(i,s,o,l,a),gl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?tc(i,s,o,l,a):nc(i,s):(u._visibility|=2,tc(i,s,o,l,a)),a&&2048&c&&Ql(s.alternate,s);break;case 24:tc(i,s,o,l,a),a&&2048&c&&Jl(s.alternate,s);break;default:tc(i,s,o,l,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Ql(r.alternate,r);break;case 24:nc(n,r),2048&a&&Jl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=Kd(r.href),i=t.querySelector(qd(a));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Xd(r),(a=zd.get(a))&&Zd(r,a),et(i=i.createElement("link"));var s=i;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Hl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Hl;Hl=Ud(e.stateNode.containerInfo),ac(e,t,n),Hl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function sc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,uc(r,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&xl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,uc(r,e)}sc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:xl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:xl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ba(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Rl=r;else e:for(n=e;null!==Rl;){var a=(r=Rl).sibling,i=r.return;if(Ml(r),r===n){Rl=null;break e}if(null!==a){a.return=i,Rl=a;break e}Rl=i}}}var dc={getCacheForType:function(e){var t=_a(La),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return _a(La).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,mc=null,gc=0,xc=0,vc=null,yc=!1,bc=!1,wc=!1,kc=0,Nc=0,Sc=0,jc=0,Cc=0,Ec=0,Tc=0,Ic=null,Ac=null,Oc=!1,_c=0,Rc=0,Pc=1/0,Mc=null,Dc=null,Fc=0,Lc=null,zc=null,Bc=0,Uc=0,Wc=null,Vc=null,Hc=0,Gc=null;function Kc(){return 0!==(2&pc)&&0!==gc?gc&-gc:null!==P.T?Wu():Le()}function qc(){if(0===Ec)if(0===(536870912&gc)||da){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),Ec=e}else Ec=536870912;return null!==(e=_i.current)&&(e.flags|=32),Ec}function Xc(e,t,n){(e!==fc||2!==xc&&9!==xc)&&null===e.cancelPendingCommit||(tu(e,0),Jc(e,gc,Ec,!1)),_e(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(jc|=n),4===Nc&&Jc(e,gc,Ec,!1)),Mu(e))}function Yc(e,t,n){if(0!==(6&pc))throw Error(s(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),a=r?function(e,t){var n=pc;pc|=2;var r=au(),a=iu();fc!==e||gc!==t?(Mc=null,Pc=le()+500,tu(e,t)):bc=Te(e,t);e:for(;;)try{if(0!==xc&&null!==mc){t=mc;var i=vc;t:switch(xc){case 1:xc=0,vc=null,hu(e,t,i,1);break;case 2:case 9:if(ti(i)){xc=0,vc=null,du(t);break}t=function(){2!==xc&&9!==xc||fc!==e||(xc=7),Mu(e)},i.then(t,t);break e;case 3:xc=7;break e;case 4:xc=5;break e;case 7:ti(i)?(xc=0,vc=null,du(t)):(xc=0,vc=null,hu(e,t,i,7));break;case 5:var o=null;switch(mc.tag){case 26:o=mc.memoizedState;case 5:case 27:var l=mc;if(o?ah(o):l.stateNode.complete){xc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,pu(u)):mc=null}break t}}xc=0,vc=null,hu(e,t,i,5);break;case 6:xc=0,vc=null,hu(e,t,i,6);break;case 8:eu(),Nc=6;break e;default:throw Error(s(462))}}cu();break}catch(d){nu(e,d)}return Sa=Na=null,P.H=r,P.A=a,pc=n,null!==mc?0:(fc=null,gc=0,Ar(),Nc)}(e,t):ou(e,t,!0),i=r;;){if(0===a){bc&&!r&&Jc(e,t,0,!1);break}if(n=e.current.alternate,!i||Qc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=i,jc|=i,a=4;break e}i=Ac,Ac=a,null!==i&&(null===Ac?Ac=i:Ac.push.apply(Ac,i))}a=o}if(i=!1,2!==a)continue}}if(1===a){tu(e,0),Jc(e,t,0,!0);break}e:{switch(r=e,i=a){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Jc(r,t,Ec,!yc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(a=_c+300-le())){if(Jc(r,t,Ec,!yc),0!==Ee(r,0,!0))break e;Bc=t,r.timeoutHandle=wd($c.bind(null,r,n,Ac,Mc,Oc,t,Ec,jc,Tc,yc,i,"Throttled",-0,0),a)}else $c(r,n,Ac,Mc,Oc,t,Ec,jc,Tc,yc,i,null,-0,0)}break}a=ou(e,t,!1),i=!1}Mu(e)}function $c(e,t,n,r,a,i,s,o,l,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ic(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_t});var f=(62914560&i)===i?_c-le():(4194048&i)===i?Rc-le():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,s=a.initiatorType,o=a.duration;if(i&&o&&pd(s)){for(s=0,o=a.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&pd(d)&&(s+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(i+s)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(d,f)))return Bc=i,e.cancelPendingCommit=f(mu.bind(null,e,t,i,n,r,a,s,o,l,u,d,null,h,p)),void Jc(e,i,s,!c)}mu(e,t,i,n,r,a,s,o,l)}function Qc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Jn(i(),a))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t,n,r){t&=~Cc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-be(a),s=1<<i;r[i]=-1,a&=~s}0!==n&&Re(e,n,t)}function Zc(){return 0!==(6&pc)||(Du(0,!1),!1)}function eu(){if(null!==mc){if(0===xc)var e=mc.return;else Sa=Na=null,ss(e=mc),oi=null,li=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),fc=e,mc=n=Br(e.current,null),gc=t,xc=0,vc=null,yc=!1,bc=Te(e,t),wc=!1,Tc=Ec=Cc=jc=Sc=Nc=0,Ac=Ic=null,Oc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-be(r),i=1<<a;t|=e[a],r&=~i}return kc=t,Ar(),n}function nu(e,t){Wi=null,P.H=mo,t===Qa||t===Za?(t=ii(),xc=3):t===Ja?(t=ii(),xc=4):xc=t===_o?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(Nc=1,Eo(e,Xr(t,e.current)))}function ru(){var e=_i.current;return null===e||((4194048&gc)===gc?null===Ri:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ri)}function au(){var e=P.H;return P.H=mo,null===e?mo:e}function iu(){var e=P.A;return P.A=dc,e}function su(){Nc=4,yc||(4194048&gc)!==gc&&null!==_i.current||(bc=!0),0===(134217727&Sc)&&0===(134217727&jc)||null===fc||Jc(fc,gc,Ec,!1)}function ou(e,t,n){var r=pc;pc|=2;var a=au(),i=iu();fc===e&&gc===t||(Mc=null,tu(e,t)),t=!1;var s=Nc;e:for(;;)try{if(0!==xc&&null!==mc){var o=mc,l=vc;switch(xc){case 8:eu(),s=6;break e;case 3:case 2:case 9:case 6:null===_i.current&&(t=!0);var c=xc;if(xc=0,vc=null,hu(e,o,l,c),n&&bc){s=0;break e}break;default:c=xc,xc=0,vc=null,hu(e,o,l,c)}}lu(),s=Nc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Sa=Na=null,pc=r,P.H=a,P.A=i,null===mc&&(fc=null,gc=0,Ar()),s}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!se();)uu(mc)}function uu(e){var t=sl(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Go(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Go(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:ss(t);default:ml(n,t),t=sl(n,t=mc=Ur(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function hu(e,t,n,r){Sa=Na=null,ss(t),oi=null,li=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ia(t,n,a,!0),null!==(n=_i.current)){switch(n.tag){case 31:case 13:return null===Ri?su():null===n.alternate&&0===Nc&&(Nc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Su(e,r,a)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Su(e,r,a)),!1}throw Error(s(435,n.tag))}return Su(e,r,a),su(),!1}if(da)return null!==(t=_i.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==fa&&wa(Xr(e=Error(s(422),{cause:r}),n))):(r!==fa&&wa(Xr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Xr(r,n),wi(e,a=Io(e.stateNode,r,a)),4!==Nc&&(Nc=2)),!1;var i=Error(s(520),{cause:r});if(i=Xr(i,n),null===Ic?Ic=[i]:Ic.push(i),4!==Nc&&(Nc=2),null===t)return!0;r=Xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,wi(n,e=Io(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Dc||!Dc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Oo(a=Ao(a),e,n,r),wi(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,gc))return Nc=1,Eo(e,Xr(n,e.current)),void(mc=null)}catch(i){if(null!==a)throw mc=a,i;return Nc=1,Eo(e,Xr(n,e.current)),void(mc=null)}32768&t.flags?(da||1===r?e=!0:bc||0!==(536870912&gc)?e=!1:(yc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=_i.current)&&13===r.tag&&(r.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,yc);e=t.return;var n=pl(t.alternate,t,kc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Nc&&(Nc=5)}function fu(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Nc=6,mc=null}function mu(e,t,n,r,a,i,o,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Fc);if(0!==(6&pc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-be(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Re(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,n,i|=Ir,o,l,c),e===fc&&(mc=fc=null,gc=0),zc=t,Lc=e,Bc=n,Uc=i,Wc=a,Vc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,a=M.p,M.p=2,o=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fd=yh,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===a&&(l=o),p===i&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},yh=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(i=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=No(n.type,a);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(x){Nu(n,n.return,x)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Id(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{pc=o,M.p=a,P.T=r}}Fc=1,gu(),xu(),vu()}}function gu(){if(1===Fc){Fc=0;var e=Lc,t=zc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=M.p;M.p=2;var a=pc;pc|=4;try{Gl(t,e);var i=md,s=rr(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ar(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=o.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(s=g,g=m,m=s);var x=tr(o,m),v=tr(o,g);if(x&&v&&(1!==p.rangeCount||p.anchorNode!==x.node||p.anchorOffset!==x.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(x.node,x.offset),p.removeAllRanges(),m>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}yh=!!fd,md=fd=null}finally{pc=a,M.p=r,P.T=n}}e.current=t,Fc=2}}function xu(){if(2===Fc){Fc=0;var e=Lc,t=zc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=M.p;M.p=2;var a=pc;pc|=4;try{Pl(e,t.alternate,t)}finally{pc=a,M.p=r,P.T=n}}Fc=3}}function vu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Lc,t=zc,n=Bc,r=Vc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,zc=Lc=null,yu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Dc=null),Fe(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(xe,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,a=M.p,M.p=2,P.T=null;try{for(var i=e.onRecoverableError,s=0;s<r.length;s++){var o=r[s];i(o.value,{componentStack:o.stack})}}finally{P.T=t,M.p=a}}0!==(3&Bc)&&bu(),Mu(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===Gc?Hc++:(Hc=0,Gc=e):Hc=0,Du(0,!1)}}function yu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ba(t)))}function bu(){return gu(),xu(),vu(),wu()}function wu(){if(5!==Fc)return!1;var e=Lc,t=Uc;Uc=0;var n=Fe(Bc),r=P.T,a=M.p;try{M.p=32>n?32:n,P.T=null,n=Wc,Wc=null;var i=Lc,o=Bc;if(Fc=0,zc=Lc=null,Bc=0,0!==(6&pc))throw Error(s(331));var l=pc;if(pc|=4,lc(i.current),ec(i,i.current,o,n),pc=l,Du(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(xe,i)}catch(c){}return!0}finally{M.p=a,P.T=r,yu(e,t)}}function ku(e,t,n){t=Xr(n,t),null!==(e=yi(e,t=Io(e.stateNode,t,2),2))&&(_e(e,2),Mu(e))}function Nu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Dc||!Dc.has(r))){e=Xr(n,e),null!==(r=yi(t,n=Ao(2),2))&&(Oo(n,r,t,e),_e(r,2),Mu(r));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(wc=!0,a.add(n),e=ju.bind(null,e,t,n),t.then(e,e))}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(gc&n)===n&&(4===Nc||3===Nc&&(62914560&gc)===gc&&300>le()-_c?0===(2&pc)&&tu(e,0):Cc|=n,Tc===gc&&(Tc=0)),Mu(e)}function Cu(e,t){0===t&&(t=Ae()),null!==(e=Rr(e,t))&&(_e(e,t),Mu(e))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cu(e,n)}var Iu=null,Au=null,Ou=!1,_u=!1,Ru=!1,Pu=0;function Mu(e){e!==Au&&null===e.next&&(null===Au?Iu=Au=e:Au=Au.next=e),_u=!0,Ou||(Ou=!0,Sd(function(){0!==(6&pc)?ae(ue,Fu):Lu()}))}function Du(e,t){if(!Ru&&_u){Ru=!0;do{for(var n=!1,r=Iu;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var s=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-be(42|e)+1)-1,i=201326741&(i&=a&~(s&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Uu(r,i))}else i=gc,0===(3&(i=Ee(r,r===fc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,i)||(n=!0,Uu(r,i));r=r.next}}while(n);Ru=!1}}function Fu(){Lu()}function Lu(){_u=Ou=!1;var e=0;0!==Pu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bd&&(bd=e,!0);return bd=null,!1}()&&(e=Pu);for(var t=le(),n=null,r=Iu;null!==r;){var a=r.next,i=zu(r,t);0===i?(r.next=null,null===n?Iu=a:n.next=a,null===a&&(Au=n)):(n=r,(0!==e||0!==(3&i))&&(_u=!0)),r=a}0!==Fc&&5!==Fc||Du(e,!1),0!==Pu&&(Pu=0)}function zu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-be(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=gc,n=Ee(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===xc||9===xc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return r=Bu.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Ee(e,e===fc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,r,t),zu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Uu(e,t){if(bu())return null;Yc(e,t,!0)}function Wu(){if(0===Pu){var e=Va;0===e&&(e=Ne,0===(261888&(Ne<<=1))&&(Ne=256)),Pu=e}return Pu}function Vu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Hu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Gu=0;Gu<Sr.length;Gu++){var Ku=Sr[Gu];jr(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}jr(gr,"onAnimationEnd"),jr(xr,"onAnimationIteration"),jr(vr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(yr,"onTransitionRun"),jr(br,"onTransitionStart"),jr(wr,"onTransitionCancel"),jr(kr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){Cr(u)}a.currentTarget=null,i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){Cr(u)}a.currentTarget=null,i=l}}}}function $u(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Qu(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Ju]){e[Ju]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Xu.has(t)||Qu(t,!1,e),Qu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ju]||(t[Ju]=!0,Qu("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Ch(t)){case 2:var a=bh;break;case 8:a=wh;break;default:a=kh}n=a.bind(null,t,n,e),a=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function td(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===a)return;s=s.return}for(;null!==o;){if(null===(s=$e(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=i=s;continue e}o=o.parentNode}}r=r.return}zt(function(){var r=i,a=Pt(n),s=[];e:{var o=Nr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Xt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gr:case xr:case vr:c=un;break;case kr:c=wn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=Nn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==o?o+"Capture":null:o;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Bt(m,p))&&d.push(nd(m,g,f)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,a),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Ve])&&(c||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?o:Je(c),f=null==u?o:Je(u),(o=new d(g,m+"leave",c,n,a)).target=h,o.relatedTarget=f,g=null,$e(a)===r&&((d=new d(p,m+"enter",u,n,a)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,m=u,f=0,g=p=c;g;g=d(g))f++;g=0;for(var x=m;x;x=d(x))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&id(s,o,c,d,!1),null!==u&&null!==h&&id(s,h,u,d,!0)}if("select"===(c=(o=r?Je(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Un;else if(Mn(o))if(Wn)v=Qn;else{v=Yn;var y=Xn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(v=Un):v=$n;switch(v&&(v=v(e,r))?Dn(s,v,n,a):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&bt(o,"number",o.value)),y=r?Je(r):window,e){case"focusin":(Mn(y)||"true"===y.contentEditable)&&(sr=y,or=r,lr=null);break;case"focusout":lr=or=sr=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(s,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(s,n,a)}var b;if(jn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?On(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=qt()):(Gt="value"in(Ht=a)?Ht.value:Ht.textContent,Rn=!0)),0<(y=rd(r,w)).length&&(w=new hn(w,e,null,n,a),s.push({event:w,listeners:y}),b?w.data=b:null!==(b=_n(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return _n(t);case"keypress":return 32!==t.which?null:(An=!0,In);case"textInput":return(e=t.data)===In&&An?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!jn&&On(e,t)?(e=qt(),Kt=Gt=Ht=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=rd(r,"onBeforeInput")).length&&(y=new hn("onBeforeInput","beforeinput",null,n,a),s.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=Vu((a[We]||null).action),s=r.submitter;s&&null!==(t=(t=s[We]||null)?Vu(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var o=new nn("action","action",null,r,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Pu){var e=s?Hu(a,s):new FormData(a);eo(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=s?Hu(a,s):new FormData(a),eo(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(s,e,r,n,a)}Yu(s,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Bt(e,n))&&r.unshift(nd(e,a,i)),null!=(a=Bt(e,t))&&r.push(nd(e,a,i))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=Bt(n,i))&&s.unshift(nd(n,c,l)):a||null!=(c=Bt(n,i))&&s.push(nd(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var sd=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(sd,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Et(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&ud(e,t,"name",a.name,a,null),ud(e,t,"formEncType",a.formEncType,a,null),ud(e,t,"formMethod",a.formMethod,a,null),ud(e,t,"formTarget",a.formTarget,a,null)):(ud(e,t,"encType",a.encType,a,null),ud(e,t,"method",a.method,a,null),ud(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=_t);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ot(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$u("beforetoggle",e),$u("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function dd(e,t,n,r,a,i){switch(n){case"style":Et(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"onClick":null!=r&&(e.onclick=_t);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[We]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ud(e,t,r,o,n,null)}}return i&&ud(e,t,"srcSet",n.srcSet,n,null),void(a&&ud(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var l=r=o=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:ud(e,t,a,d,n,null)}}return void yt(e,r,l,c,u,o,i,!1);case"select":for(i in $u("invalid",e),a=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:ud(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!a,void(null!=t?wt(e,!!a,t,!1):null!=n&&wt(e,!!a,n,!0));case"textarea":for(o in $u("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:ud(e,t,o,l,n,null)}return void Nt(e,a,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else ud(e,t,c,a,n,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(a=0;a<qu.length;a++)$u(qu[a],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ud(e,t,u,a,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&dd(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&ud(e,t,l,a,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function xd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,kd="function"===typeof clearTimeout?clearTimeout:void 0,Nd="function"===typeof Promise?Promise:void 0,Sd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Nd?function(e){return Nd.resolve(null).then(e).catch(jd)}:wd;function jd(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Ed(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Hh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ld(e.ownerDocument.documentElement);else if("head"===n){Ld(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var s=i.nextSibling,o=i.nodeName;i[Xe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=s}}else"body"===n&&Ld(e.ownerDocument.body);n=a}while(n);Hh(t)}function Td(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Id(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}function Od(e){return"$?"===e.data||"$~"===e.data}function _d(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Pd=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Dd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Ld(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var zd=new Map,Bd=new Set;function Ud(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Wd=M.d;M.d={f:function(){var e=Wd.f(),t=Zc();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Wd.r(e)},D:function(e){Wd.D(e),Hd("dns-prefetch",e,null)},C:function(e,t){Wd.C(e,t),Hd("preconnect",e,t)},L:function(e,t,n){Wd.L(e,t,n);var r=Vd;if(r&&e&&t){var a='link[rel="preload"][as="'+xt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+xt(n.imageSizes)+'"]')):a+='[href="'+xt(e)+'"]';var i=a;switch(t){case"style":i=Kd(e);break;case"script":i=Yd(e)}zd.has(i)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zd.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(qd(i))||"script"===t&&r.querySelector($d(i))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Wd.m(e,t);var n=Vd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+xt(r)+'"][href="'+xt(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Yd(e)}if(!zd.has(i)&&(e=p({rel:"modulepreload",href:e},t),zd.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(i)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Wd.X(e,t);var n=Vd;if(n&&e){var r=Ze(n).hoistableScripts,a=Yd(e),i=r.get(a);i||((i=n.querySelector($d(a)))||(e=p({src:e,async:!0},t),(t=zd.get(a))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){Wd.S(e,t,n);var r=Vd;if(r&&e){var a=Ze(r).hoistableStyles,i=Kd(e);t=t||"default";var s=a.get(i);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(qd(i)))o.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zd.get(i))&&Zd(e,n);var l=s=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Jd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},a.set(i,s)}}},M:function(e,t){Wd.M(e,t);var n=Vd;if(n&&e){var r=Ze(n).hoistableScripts,a=Yd(e),i=r.get(a);i||((i=n.querySelector($d(a)))||(e=p({src:e,async:!0,type:"module"},t),(t=zd.get(a))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var Vd="undefined"===typeof document?null:document;function Hd(e,t,n){var r=Vd;if(r&&"string"===typeof t&&t){var a=xt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Bd.has(a)||(Bd.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Gd(e,t,n,r){var a,i,o,l,c=(c=K.current)?Ud(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(qd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),zd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zd.set(e,n),u||(a=c,i=e,o=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),hd(i,"link",o),et(i),a.head.appendChild(i))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Kd(e){return'href="'+xt(e)+'"'}function qd(e){return'link[rel="stylesheet"]['+e+"]"}function Xd(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+xt(e)+'"]'}function $d(e){return"script[async]"+e}function Qd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+xt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",a),Jd(r,n.precedence,e),t.instance=r;case"stylesheet":a=Kd(n.href);var i=e.querySelector(qd(a));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Xd(n),(a=zd.get(a))&&Zd(r,a),et(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(i,"link",r),t.state.loading|=4,Jd(i,n.precedence,e),t.instance=i;case"script":return i=Yd(n.src),(a=e.querySelector($d(i)))?(t.instance=a,et(a),a):(r=n,(a=zd.get(i))&&eh(r=p({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),hd(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Jd(r,n.precedence,e));return t.instance}function Jd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)i=o;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,a=th=new Map;a.set(n,r)}else(r=(a=th).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Xe]||i[Ue]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var o=r.get(s);o?o.push(i):r.set(s,[i])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function sh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,sh.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(a=t.instance).getAttribute("data-precedence"),(i=n.get(s)||r)===r&&n.set(null,a),n.set(s,a),this.count++,r=sh.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function dh(e,t,n,r,a,i,s,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,a,i,s,o,l,c,u,d){return e=new dh(e,t,n,s,l,c,u,d,o),t=1,!0===i&&(t|=24),i=Lr(3,null,null,t),e.current=i,i.stateNode=e,(t=za()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},gi(i),e}function ph(e){return e?e=Dr:Dr}function fh(e,t,n,r,a,i){a=ph(a),null===r.context?r.context=a:r.pendingContext=a,(r=vi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=yi(e,r,t))&&(Xc(n,0,t),bi(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function xh(e){if(13===e.tag||31===e.tag){var t=Rr(e,67108864);null!==t&&Xc(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Rr(e,t=De(t));null!==n&&Xc(n,0,t),gh(e,t)}}var yh=!0;function bh(e,t,n,r){var a=P.T;P.T=null;var i=M.p;try{M.p=2,kh(e,t,n,r)}finally{M.p=i,P.T=a}}function wh(e,t,n,r){var a=P.T;P.T=null;var i=M.p;try{M.p=8,kh(e,t,n,r)}finally{M.p=i,P.T=a}}function kh(e,t,n,r){if(yh){var a=Nh(r);if(null===a)td(e,t,r,Sh,n),Mh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Th=Dh(Th,e,t,n,r,a),!0;case"dragenter":return Ih=Dh(Ih,e,t,n,r,a),!0;case"mouseover":return Ah=Dh(Ah,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Oh.set(i,Dh(Oh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,_h.set(i,Dh(_h.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mh(e,r),4&t&&-1<Ph.indexOf(e)){for(;null!==a;){var i=Qe(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=Ce(i.pendingLanes);if(0!==s){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-be(s);o.entanglements[1]|=l,s&=~l}Mu(i),0===(6&pc)&&(Pc=le()+500,Du(0,!1))}}break;case 31:case 13:null!==(o=Rr(i,2))&&Xc(o,0,2),Zc(),gh(i,2)}if(null===(i=Nh(r))&&td(e,t,r,Sh,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else td(e,t,r,null,n)}}function Nh(e){return jh(e=Pt(e))}var Sh=null;function jh(e){if(Sh=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Eh=!1,Th=null,Ih=null,Ah=null,Oh=new Map,_h=new Map,Rh=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":Ih=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":Oh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(t.pointerId)}}function Dh(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=Qe(t))&&xh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Fh(e){var t=$e(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void ze(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void ze(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nh(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&xh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function zh(e,t,n){Lh(e)&&n.delete(t)}function Bh(){Eh=!1,null!==Th&&Lh(Th)&&(Th=null),null!==Ih&&Lh(Ih)&&(Ih=null),null!==Ah&&Lh(Ah)&&(Ah=null),Oh.forEach(zh),_h.forEach(zh)}function Uh(e,t){e.blockedOn===t&&(e.blockedOn=null,Eh||(Eh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bh)))}var Wh=null;function Vh(e){Wh!==e&&(Wh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wh===e&&(Wh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===jh(r||n))continue;break}var i=Qe(n);null!==i&&(e.splice(t,3),t-=3,eo(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Hh(e){function t(t){return Uh(t,e)}null!==Th&&Uh(Th,e),null!==Ih&&Uh(Ih,e),null!==Ah&&Uh(Ah,e),Oh.forEach(t),_h.forEach(t);for(var n=0;n<Rh.length;n++){var r=Rh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Rh.length&&null===(n=Rh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Rh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],s=a[We]||null;if("function"===typeof i)s||Vh(n);else if(s){var o=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[We]||null)o=s.formAction;else if(null!==jh(a))continue}else o=s.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Vh(n)}}}function Gh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Kh(e){this._internalRoot=e}function qh(e){this._internalRoot=e}qh.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));fh(t.current,Kc(),e,t,null,null)},qh.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),Zc(),t[Ve]=null}},qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rh.length&&0!==t&&t<Rh[n].priority;n++);Rh.splice(n,0,e),0===n&&Fh(e)}};var Xh=a.version;if("19.2.3"!==Xh)throw Error(s(527,Xh,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return d(a),e;if(i===r)return d(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{xe=$h.inject(Yh),ve=$h}catch(Jh){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,r="",a=So,i=jo,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,a,i,l,Gh),e[Ve]=t.current,Zu(e),new Kh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var r=!1,a="",i=So,l=jo,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,a,u,i,l,c,Gh)).context=ph(null),n=t.current,(a=vi(r=De(r=Kc()))).callback=null,yi(n,a,r),n=r,t.current.lanes=n,_e(t,n),Mu(t),e[Ve]=t.current,Zu(e),new qh(t)},t.version="19.2.3"},7043(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!r.isSymbol(e))||("string"===typeof e&&(i.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},7066(e,t,n){var r;!function(e,a){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xor128=o}(0,e=n.nmd(e),n.amdD)},7231(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(3799),a=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&r.isIterateeCall(e,t,n)&&(t=n=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),n=void 0===n?e<t?1:-1:a.toFinite(n);const i=Math.max(Math.ceil((t-e)/(n||1)),0),s=new Array(i);for(let r=0;r<i;r++)s[r]=e,e+=n;return s}},7237(e,t,n){"use strict";n(8365)},7260(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7283(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new a(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,s=new Array(i);a<i;a++)s[a]=r[a].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,i,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,i),!0;case 6:return u.fn.call(u.context,t,r,a,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||s(this,i);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||a&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},7312(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],r=Math.floor(t),a=(e,t)=>{for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)&&t<r?a(s,t+1):n.push(s)}};return a(e,0),n}},7330(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9323);t.property=function(e){return function(t){return r.get(t,e)}}},7353(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(j){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function s(e,t){var n,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=l(e,(0|e)<0?-1:0,!0),s&&(i[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=l(e,e<0?-1:0,!1),s&&(a[e]=n),n)}function o(e,t){if(isNaN(e))return t?x:g;if(t){if(e<0)return x;if(e>=p)return k}else{if(e<=-f)return N;if(e+1>=f)return w}return e<0?o(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=o,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var a=o(c(n,8)),i=g,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+l),n);if(l<8){var h=o(c(n,l));i=i.mul(h).add(o(d))}else i=(i=i.mul(a)).add(o(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?o(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=s(1<<24),g=s(0);n.ZERO=g;var x=s(0,!0);n.UZERO=x;var v=s(1);n.ONE=v;var y=s(1,!0);n.UONE=y;var b=s(-1);n.NEG_ONE=b;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var N=l(0,-2147483648,!1);n.MIN_VALUE=N;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(N)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=o(c(e,6),this.unsigned),i=this,s="";;){var l=i.div(a),u=(i.sub(l.mul(a)).toInt()>>>0).toString(e);if((i=l).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(v)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,c=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,h+=(p+=a+c)>>>16,u+=(h+=n+o)>>>16,u+=t+s,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(N))return e.isOdd()?N:g;if(e.eq(N))return this.isOdd()?N:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,s=65535&this.low,c=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,x=0,v=0,y=0;return v+=(y+=s*p)>>>16,x+=(v+=i*p)>>>16,v&=65535,x+=(v+=s*h)>>>16,f+=(x+=a*p)>>>16,x&=65535,f+=(x+=i*h)>>>16,x&=65535,f+=(x+=s*u)>>>16,f+=n*p+a*h+i*u+s*c,l((v&=65535)<<16|(y&=65535),(f&=65535)<<16|(x&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?x:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return x;if(e.gt(this.shru(1)))return y;i=x}else{if(this.eq(N))return e.eq(v)||e.eq(b)?N:e.eq(N)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:b:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(N))return this.unsigned?x:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:c(2,s-48),h=o(n),p=h.mul(e);p.isNegative()||p.gt(a);)p=(h=o(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=v),i=i.add(h),a=a.sub(p)}return i},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return l(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7359(e,t,n){var r;!function(e,a){function i(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.alea=o}(0,e=n.nmd(e),n.amdD)},7599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7770(e,t,n){e.exports=n(9323).get},7820(e,t,n){e.exports=n(5414).throttle},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8108(){},8210(e,t,n){var r;!function(){"use strict";var a,i=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=d(1286742750677284.5),x={};function v(e,t){var n,r,a,i,s,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?T(t,h):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=s,l=c.length),i>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((l=c.length)-(i=u.length)<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/f|0,c[i]%=f;for(n&&(c.unshift(n),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?T(t,h):t}function y(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(i+=j(n)),i+=r;(n=7-(r=(s=e[t])+"").length)&&(i+=j(n))}else if(0===s)return"0";for(;s%10===0;)s/=10;return i+s}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},x.comparedTo=x.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,n=(r=i.d.length)<(a=e.d.length)?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1},x.decimalPlaces=x.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},x.dividedBy=x.div=function(e){return w(this,new this.constructor(e))},x.dividedToIntegerBy=x.idiv=function(e){var t=this.constructor;return T(w(this,new t(e),0,1),t.precision)},x.equals=x.eq=function(e){return!this.cmp(e)},x.exponent=function(){return N(this)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){return this.cmp(e)>=0},x.isInteger=x.isint=function(){return this.e>this.d.length-2},x.isNegative=x.isneg=function(){return this.s<0},x.isPositive=x.ispos=function(){return this.s>0},x.isZero=function(){return 0===this.s},x.lessThan=x.lt=function(e){return this.cmp(e)<0},x.lessThanOrEqualTo=x.lte=function(e){return this.cmp(e)<1},x.logarithm=x.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(a)?new r(0):(o=!1,t=w(C(n,s),C(e,s),s),o=!0,T(t,i))},x.minus=x.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?I(t,e):v(t,(e.s=-e.s,e))},x.modulo=x.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(o=!1,t=w(n,e,0,1).times(e),o=!0,n.minus(t)):T(new r(n),a)},x.naturalExponential=x.exp=function(){return k(this)},x.naturalLogarithm=x.ln=function(){return C(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},x.plus=x.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):I(t,(e.s=-e.s,e))},x.precision=x.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},x.squareRoot=x.sqrt=function(){var e,t,n,r,a,i,s,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(a.toString()),a=s=(n=u.precision)+3;;)if(r=(i=r).plus(w(c,i,s+2)).times(.5),b(i.d).slice(0,s)===(t=b(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&"4999"==t){if(T(i,n+1,0),i.times(i).eq(c)){r=i;break}}else if("9999"!=t)break;s+=4}return o=!0,T(r,n)},x.times=x.mul=function(e){var t,n,r,a,i,s,l,c,u,d=this,h=d.constructor,p=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=p.length)<(u=m.length)&&(i=p,p=m,m=i,s=c,c=u,u=s),i=[],r=s=c+u;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+m[r]*p[a-r-1]+t,i[a--]=l%f|0,t=l/f|0;i[a]=(i[a]+t)%f|0}for(;!i[--s];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,o?T(e,h.precision):e},x.toDecimalPlaces=x.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(y(e,0,i),void 0===t?t=r.rounding:y(t,0,8),T(n,e+N(n)+1,t))},x.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=A(r,!0):(y(e,0,i),void 0===t?t=a.rounding:y(t,0,8),n=A(r=T(new a(r),e+1,t),!0,e+1)),n},x.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return void 0===e?A(a):(y(e,0,i),void 0===t?t=s.rounding:y(t,0,8),n=A((r=T(new s(a),e+N(a)+1,t)).abs(),!1,e+N(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},x.toInteger=x.toint=function(){var e=this,t=e.constructor;return T(new t(e),N(e)+1,t.rounding)},x.toNumber=function(){return+this},x.toPower=x.pow=function(e){var t,n,r,i,s,c,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(a);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(a))return u;if(r=h.precision,e.eq(a))return T(u,r);if(c=(t=e.e)>=(n=e.d.length-1),s=u.s,c){if((n=p<0?-p:p)<=m){for(i=new h(a),t=Math.ceil(r/7+4),o=!1;n%2&&O((i=i.times(u)).d,t),0!==(n=d(n/2));)O((u=u.times(u)).d,t);return o=!0,e.s<0?new h(a).div(i):T(i,r)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,o=!1,i=e.times(C(u,r+12)),o=!0,(i=k(i)).s=s,i},x.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return void 0===e?r=A(a,(n=N(a))<=s.toExpNeg||n>=s.toExpPos):(y(e,1,i),void 0===t?t=s.rounding:y(t,0,8),r=A(a=T(new s(a),e,t),e<=(n=N(a))||n<=s.toExpNeg,e)),r},x.toSignificantDigits=x.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(y(e,1,i),void 0===t?t=n.rounding:y(t,0,8)),T(new n(this),e,t)},x.toString=x.valueOf=x.val=x.toJSON=function(){var e=this,t=N(e),n=e.constructor;return A(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,i;if(n!=r)i=n>r?1:-1;else for(a=i=0;a<n;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,i,s){var o,c,u,d,h,p,m,g,x,v,y,b,w,k,S,j,C,E,I=r.constructor,A=r.s==a.s?1:-1,O=r.d,_=a.d;if(!r.s)return new I(r);if(!a.s)throw Error(l+"Division by zero");for(c=r.e-a.e,C=_.length,S=O.length,g=(m=new I(A)).d=[],u=0;_[u]==(O[u]||0);)++u;if(_[u]>(O[u]||0)&&--c,(b=null==i?i=I.precision:s?i+(N(r)-N(a))+1:i)<0)return new I(0);if(b=b/7+2|0,u=0,1==C)for(d=0,_=_[0],b++;(u<S||d)&&b--;u++)w=d*f+(O[u]||0),g[u]=w/_|0,d=w%_|0;else{for((d=f/(_[0]+1)|0)>1&&(_=e(_,d),O=e(O,d),C=_.length,S=O.length),k=C,v=(x=O.slice(0,C)).length;v<C;)x[v++]=0;(E=_.slice()).unshift(0),j=_[0],_[1]>=f/2&&++j;do{d=0,(o=t(_,x,C,v))<0?(y=x[0],C!=v&&(y=y*f+(x[1]||0)),(d=y/j|0)>1?(d>=f&&(d=f-1),1==(o=t(h=e(_,d),x,p=h.length,v=x.length))&&(d--,n(h,C<p?E:_,p))):(0==d&&(o=d=1),h=_.slice()),(p=h.length)<v&&h.unshift(0),n(x,h,v),-1==o&&(o=t(_,x,C,v=x.length))<1&&(d++,n(x,C<v?E:_,v)),v=x.length):0===o&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[v++]=O[k]||0:(x=[O[k]],v=1)}while((k++<S||void 0!==x[0])&&b--)}return g[0]||g.shift(),m.e=c,T(m,s?i+N(m)+1:i)}}();function k(e,t){var n,r,i,s,l,c=0,d=0,p=e.constructor,f=p.precision;if(N(e)>16)throw Error(u+N(e));if(!e.s)return new p(a);for(null==t?(o=!1,l=f):l=t,s=new p(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=i=new p(a),p.precision=l;;){if(r=T(r.times(e),l),n=n.times(++c),b((s=i.plus(w(r,n,l))).d).slice(0,l)===b(i.d).slice(0,l)){for(;d--;)i=T(i.times(i),l);return p.precision=f,null==t?(o=!0,T(i,f)):i}i=s}}function N(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function S(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return T(new e(e.LN10),t)}function j(e){for(var t="";e--;)t+="0";return t}function C(e,t){var n,r,i,s,c,u,d,h,p,f=1,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(a))return new x(0);if(null==t?(o=!1,h=v):h=t,m.eq(10))return null==t&&(o=!0),S(x,h);if(h+=10,x.precision=h,r=(n=b(g)).charAt(0),s=N(m),!(Math.abs(s)<15e14))return d=S(x,h+2,v).times(s+""),m=C(new x(r+"."+n.slice(1)),h-10).plus(d),x.precision=v,null==t?(o=!0,T(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((m=m.times(e)).d)).charAt(0),f++;for(s=N(m),r>1?(m=new x("0."+n),s++):m=new x(r+"."+n.slice(1)),u=c=m=w(m.minus(a),m.plus(a),h),p=T(m.times(m),h),i=3;;){if(c=T(c.times(p),h),b((d=u.plus(w(c,new x(i),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==s&&(u=u.plus(S(x,h+2,v).times(s+""))),u=w(u,new x(f),h),x.precision=v,null==t?(o=!0,T(u,v)):u;u=d,i+=2}}function E(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function T(e,t,n){var r,a,i,s,l,c,p,m,x=e.d;for(s=1,i=x[0];i>=10;i/=10)s++;if((r=t-s)<0)r+=7,a=t,p=x[m=0];else{if((m=Math.ceil((r+1)/7))>=(i=x.length))return e;for(p=i=x[m],s=1;i>=10;i/=10)s++;a=(r%=7)-7+s}if(void 0!==n&&(l=p/(i=h(10,s-a-1))%10|0,c=t<0||void 0!==x[m+1]||p%i,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?a>0?p/h(10,s-a):0:x[m-1])%10&1||n==(e.s<0?8:7))),t<1||!x[0])return c?(i=N(e),x.length=1,t=t-i-1,x[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==r?(x.length=m,i=1,m--):(x.length=m+1,i=h(10,7-r),x[m]=a>0?(p/h(10,s-a)%h(10,a)|0)*i:0),c)for(;;){if(0==m){(x[0]+=i)==f&&(x[0]=1,++e.e);break}if(x[m]+=i,x[m]!=f)break;x[m--]=0,i=1}for(r=x.length;0===x[--r];)x.pop();if(o&&(e.e>g||e.e<-g))throw Error(u+N(e));return e}function I(e,t){var n,r,a,i,s,l,c,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),o?T(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),s=u-r){for((d=s<0)?(n=c,s=-s,l=h.length):(n=h,r=u,l=c.length),s>(a=Math.max(Math.ceil(m/7),l)+2)&&(s=a,n.length=1),n.reverse(),a=s;a--;)n.push(0);n.reverse()}else{for((d=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}s=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>s;){if(c[--a]<h[a]){for(i=a;i&&0===c[--i];)c[i]=f-1;--c[i],c[a]+=f}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?T(t,m):t):new p(0)}function A(e,t,n){var r,a=N(e),i=b(e.d),s=i.length;return t?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+j(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+j(-a-1)+i,n&&(r=n-s)>0&&(i+=j(r))):a>=s?(i+=j(a+1-s),n&&(r=n-a-1)>0&&(i=i+"."+j(r))):((r=a+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(a+1===s&&(i+="."),i+=j(r))),e.s<0?"-"+i:i}function O(e,t){if(e.length>t)return e.length=t,!0}function _(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,a=["precision",1,i,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(d(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}s=function e(t){var n,r,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):E(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);E(t,e)}if(i.prototype=x,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=_,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return i.config(t),i}(s),s.default=s.Decimal=s,a=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},8268(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2132);t.isMatch=function(e,t){return r.isMatchWith(e,t,()=>{})}},8346(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365(e,t,n){"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useSyncExternalStore,s=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue},8396(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5508);t.cloneDeep=function(e){return r.cloneDeepWith(e)}},8420(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8429(e,t,n){var r=n(8498).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8443(e,t,n){"use strict";e.exports=n(9717)},8498(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8590(){},8845(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),a=n(3272),i=n(8396),s=n(9323),o=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=i.cloneDeep(t),function(n){const a=s.get(n,e);return void 0===a?o.has(n,e):void 0===t?void 0===a:r.isMatch(a,t)}}},8853(e,t,n){"use strict";e.exports=n(5896)},9016(e,t,n){var r;!function(e,a){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xorwow=o}(0,e=n.nmd(e),n.amdD)},9323(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(7260),a=n(2489),i=n(3272),s=n(1444);t.get=function e(t,n,o){if(null==t)return o;switch(typeof n){case"string":{if(r.isUnsafeProperty(n))return o;const i=t[n];return void 0===i?a.isDeepKey(n)?e(t,s.toPath(n),o):o:i}case"number":case"symbol":{"number"===typeof n&&(n=i.toKey(n));const e=t[n];return void 0===e?o:e}default:{var l;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let a=e;for(let i=0;i<t.length;i++){if(null==a)return n;if(r.isUnsafeProperty(t[i]))return n;a=a[t[i]]}if(void 0===a)return n;return a}(t,n,o);if(n=Object.is(null===(l=n)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(n),r.isUnsafeProperty(n))return o;const e=t[n];return void 0===e?o:e}}}},9397(e,t,n){e.exports=n(2682).isPlainObject},9461(e,t,n){"use strict";e.exports=n(2330)},9538(e,t,n){var r;!function(e,a){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xorshift7=o}(0,e=n.nmd(e),n.amdD)},9599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6392),a=n(8346),i=n(1203);t.last=function(e){if(i.isArrayLike(e))return r.last(a.toArray(e))}},9709(e,t){"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,r)=>{if(e!==t){const a=n(e),i=n(t);if(a===i&&0===a){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?i-a:a-i}return 0}},9717(e,t,n){"use strict";var r=n(5043),a=n(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=a.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(s=e,t):(s=e,o=n)}var s,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,a]);var p=s(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),u(p),p}},9859(e,t,n){e.exports=n(7231).range},9921(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{87:"2b076286",943:"65510789"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,a,i,s)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[a];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=i);var s=n.p+n.u(t),o=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,i,[s,o,l]=r,c=0;if(s.some(t=>0!==e[t])){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>vd,hasStandardBrowserEnv:()=>bd,hasStandardBrowserWebWorkerEnv:()=>wd,navigator:()=>yd,origin:()=>kd});var t={};n.r(t),n.d(t,{assertParamsValid:()=>GS,computeFlatOffset:()=>aj,computeOutShape:()=>qS,getNormalizedAxes:()=>QS,isSliceContinous:()=>rj,maskToAxes:()=>KS,parseSliceParams:()=>ij,sliceInfo:()=>sj,startForAxis:()=>tj,startIndicesWithElidedDims:()=>JS,stopForAxis:()=>nj,stopIndicesWithElidedDims:()=>ZS,stridesForAxis:()=>ej,stridesWithElidedDims:()=>XS});var r={};n.r(r),n.d(r,{collectGatherOpShapeInfo:()=>SI,computeOutShape:()=>NI,segOpComputeOptimalWindowSize:()=>kI});var a={};n.r(a),n.d(a,{ERF_A1:()=>BT,ERF_A2:()=>UT,ERF_A3:()=>WT,ERF_A4:()=>VT,ERF_A5:()=>HT,ERF_P:()=>zT,PARALLELIZE_THRESHOLD:()=>jT,RowPartitionType:()=>bT,SELU_SCALE:()=>LT,SELU_SCALEALPHA:()=>FT,applyActivation:()=>NE,assertAndGetBroadcastShape:()=>TS,assertAxesAreInnerMostDims:()=>gC,assertParamsConsistent:()=>vT,assignToTypedArray:()=>$T,axesAreInnerMostDims:()=>hC,calculateShapes:()=>DT,checkEinsumDimSizes:()=>iI,checkPadOnDimRoundingMode:()=>jj,combineLocations:()=>pC,combineRaggedTensorToTensorShapes:()=>wT,complexWithEvenIndex:()=>qT,complexWithOddIndex:()=>XT,computeConv2DInfo:()=>fj,computeConv3DInfo:()=>mj,computeDefaultPad:()=>gj,computeDilation2DInfo:()=>dj,computeOptimalWindowSize:()=>CT,computeOutAndReduceShapes:()=>fC,computeOutShape:()=>yT,computePool2DInfo:()=>hj,computePool3DInfo:()=>pj,convertConv2DDataFormat:()=>Sj,decodeEinsumEquation:()=>rI,eitherStridesOrDilationsAreOne:()=>kj,expandShapeToKeepDim:()=>mC,exponent:()=>JT,exponents:()=>QT,fromStringArrayToUint8:()=>CI,fromUint8ToStringArray:()=>jI,getAxesPermutation:()=>xC,getBroadcastDims:()=>CS,getComplexWithIndex:()=>YT,getEinsumComputePath:()=>sI,getEinsumPermutation:()=>aI,getFusedBiasGradient:()=>kE,getFusedDyActivation:()=>wE,getImageCenter:()=>ET,getInnerMostAxes:()=>yC,getPermuted:()=>IT,getRaggedRank:()=>NT,getReductionAxes:()=>ES,getReshaped:()=>TT,getReshapedPermuted:()=>AT,getRowPartitionTypesHelper:()=>kT,getSliceBeginCoords:()=>OT,getSliceSize:()=>_T,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>uI,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>dI,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>hI,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>mI,getSparseReshapeInputOutputMismatchErrorMessage:()=>xI,getSparseReshapeInputOutputMultipleErrorMessage:()=>gI,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>pI,getSparseReshapeNegativeOutputDimErrorMessage:()=>fI,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>wI,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>vI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>yI,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>bI,getUndoAxesPermutation:()=>vC,isIdentityPermutation:()=>oI,log:()=>Bw,mergeRealAndImagArrays:()=>GT,prepareAndValidate:()=>RT,prepareSplitSize:()=>cI,segment_util:()=>r,shouldFuse:()=>SE,slice_util:()=>t,splitRealAndImagArrays:()=>KT,stridesOrDilationsArePositive:()=>Nj,tupleValuesAreOne:()=>wj,upcastType:()=>Lk,validateDefaultValueShape:()=>ST,validateInput:()=>MT,validateUpdateShape:()=>PT,warn:()=>zw});var i={};n.r(i),n.d(i,{mx:()=>vz,XI:()=>uB,Nk:()=>dB,f6:()=>pB,ct:()=>pz,YG:()=>gB,hH:()=>kB,z3:()=>sU,sG:()=>xU,uM:()=>kU,vS:()=>zU,qB:()=>qU,GG:()=>YU,lg:()=>eW,rq:()=>QU,cu:()=>pW,WR:()=>uW,GE:()=>gW,px:()=>vW,jC:()=>RW,He:()=>DW,hE:()=>KW,BF:()=>JB,Dk:()=>nV,cl:()=>uV,_B:()=>NV,ub:()=>TV,_f:()=>OV,Ku:()=>FV,qy:()=>zV,Zy:()=>QV,bu:()=>eH,zv:()=>az,dH:()=>Ez,HS:()=>sB,yH:()=>bH,l3:()=>kH,z9:()=>SH,x6:()=>IH,_m:()=>DH,eW:()=>UH,GK:()=>HH,SP:()=>qH,yr:()=>YH,dl:()=>TU,Dw:()=>tG,xT:()=>iG,_X:()=>Pz,wz:()=>hG});var s={};n.r(s),n.d(s,{scaleBand:()=>y8,scaleDiverging:()=>pne,scaleDivergingLog:()=>fne,scaleDivergingPow:()=>gne,scaleDivergingSqrt:()=>xne,scaleDivergingSymlog:()=>mne,scaleIdentity:()=>o9,scaleImplicit:()=>x8,scaleLinear:()=>s9,scaleLog:()=>g9,scaleOrdinal:()=>v8,scalePoint:()=>w8,scalePow:()=>j9,scaleQuantile:()=>F9,scaleQuantize:()=>L9,scaleRadial:()=>T9,scaleSequential:()=>sne,scaleSequentialLog:()=>one,scaleSequentialPow:()=>cne,scaleSequentialQuantile:()=>dne,scaleSequentialSqrt:()=>une,scaleSequentialSymlog:()=>lne,scaleSqrt:()=>C9,scaleSymlog:()=>b9,scaleThreshold:()=>z9,scaleTime:()=>nne,scaleUtc:()=>rne,tickFormat:()=>a9});var o=n(5043),l=n.t(o,2),c=n(4391);function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function p(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const g=["sri"],x=["page"],v=["page","matches"],y=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],b=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],w=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var k="popstate";function N(){return A(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return E("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:T(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function S(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function j(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function C(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return m(m({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?I(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function T(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function I(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function A(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,o="POP",l=null,c=u();function u(){return(s.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function h(e){return O(e)}null==c&&(c=0,s.replaceState(m(m({},s.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(a,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(k,d),l=e,()=>{a.removeEventListener(k,d),l=null}},createHref:e=>t(a,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=E(p.location,e,t);n&&n(r,e),c=u()+1;let d=C(r,c),h=p.createHref(r);try{s.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(h)}i&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let r=E(p.location,e,t);n&&n(r,e),c=u();let a=C(r,c),d=p.createHref(r);s.replaceState(a,"",d),i&&l&&l({action:o,location:p.location,delta:0})},go:e=>s.go(e)};return p}function O(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),S(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:T(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function _(e,t){return R(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function R(e,t,n,r){let a=X(("string"===typeof t?I(t):t).pathname||"/",n);if(null==a)return null;let i=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=q(a);s=H(i[o],e,r)}return s}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;S(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=ne([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(S(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:V(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of M(e.path))i(e,t,!0,r);else i(e,t)}),t}function M(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let s=M(r.join("/")),o=[];return o.push(...s.map(e=>""===e?i:[i,e].join("/"))),a&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var D=/^:[\w-]+$/,F=3,L=2,z=1,B=10,U=-2,W=e=>"*"===e;function V(e,t){let n=e.split("/"),r=n.length;return n.some(W)&&(r+=U),t&&(r+=L),n.filter(e=>!W(e)).reduce((e,t)=>e+(D.test(t)?F:""===t?z:B),r)}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},i="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=G({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=G({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),s.push({params:a,pathname:ne([i,u.pathname]),pathnameBase:re(ne([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=ne([i,u.pathnameBase]))}return s}function G(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=K(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:s,pattern:e}}function K(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];j("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function q(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return j(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var Y=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$=e=>Y.test(e);function Q(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function J(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function ee(e){let t=Z(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function te(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=I(e):(r=m({},e),S(!r.pathname||!r.pathname.includes("?"),J("?","pathname","search",r)),S(!r.pathname||!r.pathname.includes("#"),J("#","pathname","hash",r)),S(!r.search||!r.search.includes("#"),J("#","search","hash",r)));let i,s=""===e||""===r.pathname,o=s?"/":r.pathname;if(null==o)i=n;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:a="",hash:i=""}="string"===typeof e?I(e):e;if(r)if($(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),j(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?Q(r.substring(1),"/"):Q(r,n)}else t=n;return{pathname:t,search:ae(a),hash:ie(i)}}(r,i),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ne=e=>e.join("/").replace(/\/\/+/g,"/"),re=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ae=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ie=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var se=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function le(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function ue(e,t){let n=e;if("string"!==typeof n||!Y.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(ce)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),i=X(r.pathname,t);r.origin===e.origin&&null!=i?n=i+r.search+r.hash:a=!0}catch(i){j(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:a,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var de=["POST","PUT","PATCH","DELETE"],he=(new Set(de),["GET",...de]);new Set(he),Symbol("ResetLoaderData");var pe=o.createContext(null);pe.displayName="DataRouter";var fe=o.createContext(null);fe.displayName="DataRouterState";var me=o.createContext(!1);function ge(){return o.useContext(me)}var xe=o.createContext({isTransitioning:!1});xe.displayName="ViewTransition";var ve=o.createContext(new Map);ve.displayName="Fetchers";var ye=o.createContext(null);ye.displayName="Await";var be=o.createContext(null);be.displayName="Navigation";var we=o.createContext(null);we.displayName="Location";var ke=o.createContext({outlet:null,matches:[],isDataRoute:!1});ke.displayName="Route";var Ne=o.createContext(null);Ne.displayName="RouteError";var Se="REACT_ROUTER_ERROR";function je(){return null!=o.useContext(we)}function Ce(){return S(je(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(we).location}var Ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Te(e){o.useContext(be).static||o.useLayoutEffect(e)}function Ie(){let{isDataRoute:e}=o.useContext(ke);return e?function(){let{router:e}=Be("useNavigate"),t=We("useNavigate"),n=o.useRef(!1);Te(()=>{n.current=!0});let r=o.useCallback(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(n.current,Ee),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,m({fromRouteId:t},a)))},[e,t]);return r}():function(){S(je(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(pe),{basename:t,navigator:n}=o.useContext(be),{matches:r}=o.useContext(ke),{pathname:a}=Ce(),i=JSON.stringify(ee(r)),s=o.useRef(!1);Te(()=>{s.current=!0});let l=o.useCallback(function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(j(s.current,Ee),!s.current)return;if("number"===typeof r)return void n.go(r);let l=te(r,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ne([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,i,a,e]);return l}()}o.createContext(null);function Ae(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=o.useContext(ke),{pathname:r}=Ce(),a=JSON.stringify(ee(n));return o.useMemo(()=>te(e,JSON.parse(a),r,"path"===t),[e,a,r,t])}function Oe(e,t,n,r,a){S(je(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=o.useContext(be),{matches:s}=o.useContext(ke),l=s[s.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Ge(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=Ce();if(t){var g;let e="string"===typeof t?I(t):t;S("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let x=p.pathname||"/",v=x;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=_(e,{pathname:v});j(h||null!=y,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),j(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let b=Le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([d,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:ne([d,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,n,r,a);return t&&b?o.createElement(we.Provider,{value:{location:m({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},b):b}function _e(){let e=Ve(),t=oe(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:i},"ErrorBoundary")," or"," ",o.createElement("code",{style:i},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:a},n):null,s)}var Re=o.createElement(_e,null),Pe=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(Se,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new se(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?o.createElement(ke.Provider,{value:this.props.routeContext},o.createElement(Ne.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?o.createElement(De,{error:e},t):t}};Pe.contextType=me;var Me=new WeakMap;function De(e){let{children:t,error:n}=e,{basename:r}=o.useContext(be);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(Se,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Me.get(n);if(t)throw t;let a=ue(e.location,r);if(ce&&!Me.get(n)){if(!a.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:e.replace}));throw Me.set(n,t),t}window.location.href=a.absoluteURL||a.to}return o.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(a.absoluteURL||a.to)})}}return t}function Fe(e){let{routeContext:t,match:n,children:r}=e,a=o.useContext(pe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(ke.Provider,{value:t},r)}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));S(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,l=-1;if(n)for(let o=0;o<a.length;o++){let e=a[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=o),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){s=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=n&&r?(e,t)=>{var a,i;r(e,{location:n.location,params:null!==(a=null===(i=n.matches)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.params)&&void 0!==a?a:{},unstable_pattern:le(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,r,u)=>{let d,h=!1,p=null,f=null;n&&(d=i&&r.route.id?i[r.route.id]:void 0,p=r.route.errorElement||Re,s&&(l<0&&0===u?(Ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):l===u&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,u+1)),g=()=>{let t;return t=d?p:h?f:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(Fe,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===u)?o.createElement(Pe,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function ze(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Be(e){let t=o.useContext(pe);return S(t,ze(e)),t}function Ue(e){let t=o.useContext(fe);return S(t,ze(e)),t}function We(e){let t=function(e){let t=o.useContext(ke);return S(t,ze(e)),t}(e),n=t.matches[t.matches.length-1];return S(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ve(){var e;let t=o.useContext(Ne),n=Ue("useRouteError"),r=We("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var He={};function Ge(e,t,n){t||He[e]||(He[e]=!0,j(!1,n))}var Ke={};function qe(e,t){e||Ke[t]||(Ke[t]=!0,console.warn(t))}l.useOptimistic;o.memo(function(e){let{routes:t,future:n,state:r,onError:a}=e;return Oe(t,void 0,r,a,n)});function Xe(e){S(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ye(e){let{basename:t="/",children:n=null,location:r,navigationType:a="POP",navigator:i,static:s=!1,unstable_useTransitions:l}=e;S(!je(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=o.useMemo(()=>({basename:c,navigator:i,static:s,unstable_useTransitions:l,future:{}}),[c,i,s,l]);"string"===typeof r&&(r=I(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:m="default"}=r,g=o.useMemo(()=>{let e=X(d,c);return null==e?null:{location:{pathname:e,search:h,hash:p,state:f,key:m},navigationType:a}},[c,d,h,p,f,m,a]);return j(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(p,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:o.createElement(be.Provider,{value:u},o.createElement(we.Provider,{children:n,value:g}))}function $e(e){let{children:t,location:n}=e;return Oe(Qe(t),n)}o.Component;function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return o.Children.forEach(e,(e,r)=>{if(!o.isValidElement(e))return;let a=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,Qe(e.props.children,a));S(e.type===Xe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),S(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Qe(e.props.children,a)),n.push(i)}),n}var Je="get",Ze="application/x-www-form-urlencoded";function et(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var tt=null;var nt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rt(e){return null==e||nt.has(e)?e:(j(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ze,'"')),null)}function at(e,t){let n,r,a,i,s;if(function(e){return et(e)&&"form"===e.tagName.toLowerCase()}(e)){let s=e.getAttribute("action");r=s?X(s,t):null,n=e.getAttribute("method")||Je,a=rt(e.getAttribute("enctype"))||Ze,i=new FormData(e)}else if(function(e){return et(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return et(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(r=o?X(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Je,a=rt(e.getAttribute("formenctype"))||rt(s.getAttribute("enctype"))||Ze,i=new FormData(s,e),!function(){if(null===tt)try{new FormData(document.createElement("form"),0),tt=!1}catch(e){tt=!0}return tt}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(et(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Je,r=null,a=Ze,s=e}return i&&"text/plain"===a&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function it(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function st(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===X(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function ot(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lt(e){return null!=e&&"string"===typeof e.page}function ct(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ut(e,t,n,r,a,i){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function dt(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function ht(e,t){let n=new Set,r=new Set(t);return e.reduce((e,a)=>{if(t&&!lt(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(i)||(n.add(i),e.push({key:i,link:a})),e},[])}function pt(e,t){return"lazy"===e.mode&&!0===t}function ft(){let e=o.useContext(pe);return it(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function mt(){let e=o.useContext(fe);return it(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gt=o.createContext(void 0);function xt(){let e=o.useContext(gt);return it(e,"You must render this element inside a <HydratedRouter> element"),e}function vt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function yt(e,t,n){if(n&&!Nt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}gt.displayName="FrameworkContext";function bt(e){let{page:t}=e,n=u(e,x),{router:r}=ft(),a=o.useMemo(()=>_(r.routes,t,r.basename),[r.routes,t,r.basename]);return a?o.createElement(kt,m({page:t,matches:a},n)):null}function wt(e){let{manifest:t,routeModules:n}=xt(),[r,a]=o.useState([]);return o.useEffect(()=>{let r=!1;return async function(e,t,n){let r=await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await ot(r,n);return e.links?e.links():[]}return[]}));return ht(r.flat(1).filter(ct).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?m(m({},e),{},{rel:"prefetch",as:"style"}):m(m({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||a(e)}),()=>{r=!0}},[e,t,n]),r}function kt(e){let{page:t,matches:n}=e,r=u(e,v),a=Ce(),{manifest:i,routeModules:s}=xt(),{basename:l}=ft(),{loaderData:c,matches:d}=mt(),h=o.useMemo(()=>ut(t,n,d,i,a,"data"),[t,n,d,i,a]),p=o.useMemo(()=>ut(t,n,d,i,a,"assets"),[t,n,d,i,a]),f=o.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let a=i.routes[t.route.id];a&&a.hasLoader&&(!h.some(e=>e.route.id===t.route.id)&&t.route.id in c&&null!==(n=s[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let o=st(t,l,"data");return r&&e.size>0&&o.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[l,c,a,i,h,n,t,s]),g=o.useMemo(()=>dt(p,i),[p,i]),x=wt(p);return o.createElement(o.Fragment,null,f.map(e=>o.createElement("link",m({key:e,rel:"prefetch",as:"fetch",href:e},r))),g.map(e=>o.createElement("link",m({key:e,rel:"modulepreload",href:e},r))),x.map(e=>{let{key:t,link:n}=e;return o.createElement("link",m({key:t,nonce:r.nonce},n))}))}var Nt=!1;function St(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:a,routeDiscovery:i,ssr:s}=xt(),{router:l,static:c,staticContext:d}=ft(),{matches:h}=mt(),p=ge(),f=pt(i,s);a&&(a.didRenderScripts=!0);let x=yt(h,null,r);o.useEffect(()=>{0},[]);let v=o.useMemo(()=>{var r;if(p)return null;let a=d?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=c?"".concat(null!==t.hmr&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(x.map((e,n)=>{let r="route".concat(n),a=t.routes[e.route.id];it(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=u(e,g),a=new Set(t.state.matches.map(e=>e.route.id)),i=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(i.pop();i.length>0;)s.push("/".concat(i.join("/"))),i.pop();s.forEach(e=>{let n=_(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let o=[...a].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return m(m({},r),{},{routes:o,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(x.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return o.createElement(o.Fragment,null,o.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),o.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),y=Nt||p?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(dt(x,t,{includeHydrateFallback:!0}))),b="object"===typeof t.sri?t.sri:{};return qe(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Nt||p?null:o.createElement(o.Fragment,null,"object"===typeof t.sri?o.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,f?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:b[t.url],suppressHydrationWarning:!0}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:b[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:b[t],suppressHydrationWarning:!0})),v)}function jt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}o.Component;function Ct(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,a=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(oe(t))return o.createElement(Et,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),a);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return o.createElement(Et,{title:"Application Error!",isOutsideRemixApp:n},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),a)}function Et(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:a,children:i}=e,{routeModules:s}=xt();return null!==s.root&&void 0!==t&&t.Layout&&!a?i:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,n)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,r?o.createElement(St,null):null)))}var Tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Tt&&(window.__reactRouterVersion="7.11.0")}catch(Yje){}function It(e){let{basename:t,children:n,unstable_useTransitions:r,window:a}=e,i=o.useRef();null==i.current&&(i.current=N({window:a,v5Compat:!0}));let s=i.current,[l,c]=o.useState({action:s.action,location:s.location}),u=o.useCallback(e=>{!1===r?c(e):o.startTransition(()=>c(e))},[r]);return o.useLayoutEffect(()=>s.listen(u),[s,u]),o.createElement(Ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:r})}var At=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ot=o.forwardRef(function(e,t){let{onClick:n,discover:r="render",prefetch:a="none",relative:i,reloadDocument:s,replace:l,state:c,target:d,to:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:g}=e,x=u(e,y),{basename:v,unstable_useTransitions:b}=o.useContext(be),w="string"===typeof h&&At.test(h),k=ue(h,v);h=k.to;let N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(je(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=o.useContext(be),{hash:a,pathname:i,search:s}=Ae(e,{relative:t}),l=i;return"/"!==n&&(l="/"===i?n:ne([n,i])),r.createHref({pathname:l,search:s,hash:a})}(h,{relative:i}),[j,C,E]=function(e,t){let n=o.useContext(gt),[r,a]=o.useState(!1),[i,s]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=o.useRef(null);o.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(r){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{a(!0)},m=()=>{a(!1),s(!1)};return n?"intent"!==e?[i,p,{}]:[i,p,{onFocus:vt(l,f),onBlur:vt(c,m),onMouseEnter:vt(u,f),onMouseLeave:vt(d,m),onTouchStart:vt(h,f)}]:[!1,p,{}]}(a,x),I=function(e){let{target:t,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=Ie(),d=Ce(),h=Ae(e,{relative:i});return o.useCallback(p=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(p,t)){p.preventDefault();let t=void 0!==n?n:T(d)===T(h),f=()=>u(e,{replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:l});c?o.startTransition(()=>f()):f()}},[d,u,h,n,r,t,e,a,i,s,l,c])}(h,{replace:l,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:b});let A=o.createElement("a",m(m(m({},x),E),{},{href:k.absoluteURL||N,onClick:k.isExternal||s?n:function(e){n&&n(e),e.defaultPrevented||I(e)},ref:jt(t,C),target:d,"data-discover":w||"render"!==r?void 0:"true"}));return j&&!w?o.createElement(o.Fragment,null,A,o.createElement(bt,{page:N})):A});Ot.displayName="Link";var _t=o.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:s,to:l,viewTransition:c,children:d}=e,h=u(e,b),p=Ae(l,{relative:h.relative}),f=Ce(),g=o.useContext(fe),{navigator:x,basename:v}=o.useContext(be),y=null!=g&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.useContext(xe);S(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Mt("useViewTransitionState"),a=Ae(e,{relative:t});if(!n.isTransitioning)return!1;let i=X(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=X(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=G(a.pathname,s)||null!=G(a.pathname,i)}(p)&&!0===c,w=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,k=f.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(k=k.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&v&&(N=X(N,v)||N);const j="/"!==w&&w.endsWith("/")?w.length-1:w.length;let C,E=k===w||!i&&k.startsWith(w)&&"/"===k.charAt(j),T=null!=N&&(N===w||!i&&N.startsWith(w)&&"/"===N.charAt(w.length)),I={isActive:E,isPending:T,isTransitioning:y},A=E?n:void 0;C="function"===typeof a?a(I):[a,E?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof s?s(I):s;return o.createElement(Ot,m(m({},h),{},{"aria-current":A,className:C,ref:t,style:O,to:l,viewTransition:c}),"function"===typeof d?d(I):d)});_t.displayName="NavLink";var Rt=o.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:a,reloadDocument:i,replace:s,state:l,method:c=Je,action:d,onSubmit:h,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x}=e,v=u(e,w),{unstable_useTransitions:y}=o.useContext(be),b=Lt(),k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=o.useContext(be),r=o.useContext(ke);S(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i=m({},Ae(e||".",{relative:t})),s=Ce();if(null==e){i.search=s.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?"?".concat(n):""}}e&&"."!==e||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:ne([n,i.pathname]));return T(i)}(d,{relative:p}),N="get"===c.toLowerCase()?"get":"post",j="string"===typeof d&&At.test(d);return o.createElement("form",m(m({ref:t,method:N,action:k,onSubmit:i?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||c,i=()=>b(t||e.currentTarget,{fetcherKey:r,method:n,navigate:a,replace:s,state:l,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x});y&&!1!==a?o.startTransition(()=>i()):i()}},v),{},{"data-discover":j||"render"!==n?void 0:"true"}))});function Pt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Mt(e){let t=o.useContext(pe);return S(t,Pt(e)),t}Rt.displayName="Form";var Dt=0,Ft=()=>"__".concat(String(++Dt),"__");function Lt(){let{router:e}=Mt("useSubmit"),{basename:t}=o.useContext(be),n=We("useRouteId"),r=e.fetch,a=e.navigate;return o.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:l,formData:c,body:u}=at(e,t);if(!1===i.navigate){let e=i.fetcherKey||Ft();await r(e,n,i.action||s,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await a(i.action||s,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,a,t,n])}var zt=n(579);const Bt=(0,o.createContext)({});function Ut(e){const t=(0,o.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Wt="undefined"!==typeof window,Vt=Wt?o.useLayoutEffect:o.useEffect,Ht=(0,o.createContext)(null);function Gt(e){return"object"===typeof e&&null!==e}function Kt(e){return Gt(e)&&"offsetHeight"in e}const qt=(0,o.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Xt(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=Xt(t,e);return n||"function"!==typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"===typeof n?n():Xt(t[e],null)}}}}(...t),t)}class $t extends o.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=Kt(e)&&e.offsetWidth||0,r=Kt(e)&&e.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=n-a.width-a.left,a.bottom=r-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Qt(e){var t,n;let{children:r,isPresent:a,anchorX:i,anchorY:s,root:l}=e;const c=(0,o.useId)(),u=(0,o.useRef)(null),d=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,o.useContext)(qt),p=null!==(t=null===(n=r.props)||void 0===n?void 0:n.ref)&&void 0!==t?t:null===r||void 0===r?void 0:r.ref,f=Yt(u,p);return(0,o.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:r,right:o,bottom:p}=d.current;if(a||!u.current||!e||!t)return;const f="left"===i?"left: ".concat(r):"right: ".concat(o),m="bottom"===s?"bottom: ".concat(p):"top: ".concat(n);u.current.dataset.motionPopId=c;const g=document.createElement("style");h&&(g.nonce=h);const x=null!==l&&void 0!==l?l:document.head;return x.appendChild(g),g.sheet&&g.sheet.insertRule('\n          [data-motion-pop-id="'.concat(c,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(f,"px !important;\n            ").concat(m,"px !important;\n          }\n        ")),()=>{x.contains(g)&&x.removeChild(g)}},[a]),(0,zt.jsx)($t,{isPresent:a,childRef:u,sizeRef:d,children:o.cloneElement(r,{ref:f})})}const Jt=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:s,mode:l,anchorX:c,anchorY:u,root:d}=e;const h=Ut(Zt),p=(0,o.useId)();let f=!0,g=(0,o.useMemo)(()=>(f=!1,{id:p,initial:n,isPresent:r,custom:i,onExitComplete:e=>{h.set(e,!0);for(const t of h.values())if(!t)return;a&&a()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[r,h,a]);return s&&f&&(g=m({},g)),(0,o.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[r]),o.useEffect(()=>{!r&&!h.size&&a&&a()},[r]),"popLayout"===l&&(t=(0,zt.jsx)(Qt,{isPresent:r,anchorX:c,anchorY:u,root:d,children:t})),(0,zt.jsx)(Ht.Provider,{value:g,children:t})};function Zt(){return new Map}function en(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,o.useContext)(Ht);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=(0,o.useId)();(0,o.useEffect)(()=>{if(e)return a(i)},[e]);const s=(0,o.useCallback)(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const tn=e=>e.key||"";function nn(e){const t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}const rn=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:s="sync",propagate:l=!1,anchorX:c="left",anchorY:u="top",root:d}=e;const[h,p]=en(l),f=(0,o.useMemo)(()=>nn(t),[t]),m=l&&!h?[]:f.map(tn),g=(0,o.useRef)(!0),x=(0,o.useRef)(f),v=Ut(()=>new Map),y=(0,o.useRef)(new Set),[b,w]=(0,o.useState)(f),[k,N]=(0,o.useState)(f);Vt(()=>{g.current=!1,x.current=f;for(let e=0;e<k.length;e++){const t=tn(k[e]);m.includes(t)?(v.delete(t),y.current.delete(t)):!0!==v.get(t)&&v.set(t,!1)}},[k,m.length,m.join("-")]);const S=[];if(f!==b){let e=[...f];for(let t=0;t<k.length;t++){const n=k[t],r=tn(n);m.includes(r)||(e.splice(t,0,n),S.push(n))}return"wait"===s&&S.length&&(e=S),N(nn(e)),w(f),null}const{forceRender:j}=(0,o.useContext)(Bt);return(0,zt.jsx)(zt.Fragment,{children:k.map(e=>{const t=tn(e),o=!(l&&!h)&&(f===k||m.includes(t));return(0,zt.jsx)(Jt,{isPresent:o,initial:!(g.current&&!r)&&void 0,custom:n,presenceAffectsLayout:i,mode:s,root:d,onExitComplete:o?void 0:()=>{if(y.current.has(t))return;if(y.current.add(t),!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null===j||void 0===j||j(),N(x.current),l&&(null===p||void 0===p||p()),a&&a())},anchorX:c,anchorY:u,children:e},t)})})},an=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sn=(()=>new Set(an))(),on=(e,t,n)=>n>t?t:n<e?e:n,ln={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},cn=m(m({},ln),{},{transform:e=>on(0,1,e)}),un=m(m({},ln),{},{default:1}),dn=e=>Math.round(1e5*e)/1e5,hn=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const pn=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,fn=(e,t)=>n=>Boolean("string"===typeof n&&pn.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),mn=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[a,i,s,o]=r.match(hn);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},gn=m(m({},ln),{},{transform:e=>Math.round((e=>on(0,255,e))(e))}),xn={test:fn("rgb","red"),parse:mn("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:a=1}=e;return"rgba("+gn.transform(t)+", "+gn.transform(n)+", "+gn.transform(r)+", "+dn(cn.transform(a))+")"}};const vn={test:fn("#"),parse:function(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:xn.transform},yn=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),bn=yn("deg"),wn=yn("%"),kn=yn("px"),Nn=yn("vh"),Sn=yn("vw"),jn=(()=>m(m({},wn),{},{parse:e=>wn.parse(e)/100,transform:e=>wn.transform(100*e)}))(),Cn={test:fn("hsl","hue"),parse:mn("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+wn.transform(dn(n))+", "+wn.transform(dn(r))+", "+dn(cn.transform(a))+")"}},En={test:e=>xn.test(e)||vn.test(e)||Cn.test(e),parse:e=>xn.test(e)?xn.parse(e):Cn.test(e)?Cn.parse(e):vn.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?xn.transform(e):Cn.transform(e),getAnimatableNone:e=>{const t=En.parse(e);return t.alpha=0,En.transform(t)}},Tn=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const In="number",An="color",On=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function _n(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const s=t.replace(On,e=>(En.test(e)?(r.color.push(i),a.push(An),n.push(En.parse(e))):e.startsWith("var(")?(r.var.push(i),a.push("var"),n.push(e)):(r.number.push(i),a.push(In),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:s,indexes:r,types:a}}function Rn(e){return _n(e).values}function Pn(e){const{split:t,types:n}=_n(e),r=t.length;return e=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],void 0!==e[i]){const t=n[i];a+=t===In?dn(e[i]):t===An?En.transform(e[i]):e[i]}return a}}const Mn=e=>"number"===typeof e?0:En.test(e)?En.getAnimatableNone(e):e;const Dn={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(hn))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Tn))||void 0===n?void 0:n.length)||0)>0},parse:Rn,createTransformer:Pn,getAnimatableNone:function(e){const t=Rn(e);return Pn(e)(t.map(Mn))}},Fn=new Set(["brightness","contrast","saturate","opacity"]);function Ln(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(hn)||[];if(!r)return e;const a=n.replace(r,"");let i=Fn.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const zn=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Bn=m(m({},Dn),{},{getAnimatableNone:e=>{const t=e.match(zn);return t?t.map(Ln).join(" "):e}}),Un=m(m({},ln),{},{transform:Math.round}),Wn=m(m({borderWidth:kn,borderTopWidth:kn,borderRightWidth:kn,borderBottomWidth:kn,borderLeftWidth:kn,borderRadius:kn,radius:kn,borderTopLeftRadius:kn,borderTopRightRadius:kn,borderBottomRightRadius:kn,borderBottomLeftRadius:kn,width:kn,maxWidth:kn,height:kn,maxHeight:kn,top:kn,right:kn,bottom:kn,left:kn,inset:kn,insetBlock:kn,insetBlockStart:kn,insetBlockEnd:kn,insetInline:kn,insetInlineStart:kn,insetInlineEnd:kn,padding:kn,paddingTop:kn,paddingRight:kn,paddingBottom:kn,paddingLeft:kn,paddingBlock:kn,paddingBlockStart:kn,paddingBlockEnd:kn,paddingInline:kn,paddingInlineStart:kn,paddingInlineEnd:kn,margin:kn,marginTop:kn,marginRight:kn,marginBottom:kn,marginLeft:kn,marginBlock:kn,marginBlockStart:kn,marginBlockEnd:kn,marginInline:kn,marginInlineStart:kn,marginInlineEnd:kn,backgroundPositionX:kn,backgroundPositionY:kn},{rotate:bn,rotateX:bn,rotateY:bn,rotateZ:bn,scale:un,scaleX:un,scaleY:un,scaleZ:un,skew:bn,skewX:bn,skewY:bn,distance:kn,translateX:kn,translateY:kn,translateZ:kn,x:kn,y:kn,z:kn,perspective:kn,transformPerspective:kn,opacity:cn,originX:jn,originY:jn,originZ:kn}),{},{zIndex:Un,fillOpacity:cn,strokeOpacity:cn,numOctaves:Un}),Vn=m(m({},Wn),{},{color:En,backgroundColor:En,outlineColor:En,fill:En,stroke:En,borderColor:En,borderTopColor:En,borderRightColor:En,borderBottomColor:En,borderLeftColor:En,filter:Bn,WebkitFilter:Bn}),Hn=e=>Vn[e],Gn=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Kn=e=>Boolean(e&&e.getVelocity),qn=new Set(["width","height","top","left","right","bottom",...an]),Xn=e=>t=>t.test(e),Yn=[ln,kn,wn,bn,Sn,Nn,{test:e=>"auto"===e,parse:e=>e}],$n=e=>Yn.find(Xn(e));function Qn(e,t){return t?"".concat(e,". For more information and steps for solving, visit https://motion.dev/troubleshooting/").concat(t):e}var Jn;let Zn=()=>{},er=()=>{};"undefined"!==typeof process&&"production"!==(null===(Jn={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"443",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://srv1304213.hstgr.cloud/api"})||void 0===Jn?void 0:Jn.NODE_ENV)&&(Zn=(e,t,n)=>{e||"undefined"===typeof console||console.warn(Qn(t,n))},er=(e,t,n)=>{if(!e)throw new Error(Qn(t,n))});const tr=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),nr=e=>t=>"string"===typeof t&&t.startsWith(e),rr=nr("--"),ar=nr("var(--"),ir=e=>!!ar(e)&&sr.test(e.split("/*")[0].trim()),sr=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function or(e){return"string"===typeof e&&e.split("/*")[0].includes("var(--")}const lr=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function cr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;er(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'),"max-css-var-depth");const[r,a]=function(e){const t=lr.exec(e);if(!t)return[,];const[,n,r,a]=t;return["--".concat(null!==n&&void 0!==n?n:r),a]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return tr(e)?parseFloat(e):e}return ir(a)?cr(a,t,n+1):a}const ur=e=>180*e/Math.PI,dr=e=>{const t=ur(Math.atan2(e[1],e[0]));return pr(t)},hr={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:dr,rotateZ:dr,skewX:e=>ur(Math.atan(e[1])),skewY:e=>ur(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},pr=e=>((e%=360)<0&&(e+=360),e),fr=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),mr=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),gr={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fr,scaleY:mr,scale:e=>(fr(e)+mr(e))/2,rotateX:e=>pr(ur(Math.atan2(e[6],e[5]))),rotateY:e=>pr(ur(Math.atan2(-e[2],e[0]))),rotateZ:dr,rotate:dr,skewX:e=>ur(Math.atan(e[4])),skewY:e=>ur(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xr(e){return e.includes("scale")?1:0}function vr(e,t){if(!e||"none"===e)return xr(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,a;if(n)r=gr,a=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=hr,a=t}if(!a)return xr(t);const i=r[t],s=a[1].split(",").map(yr);return"function"===typeof i?i(s):s[i]}function yr(e){return parseFloat(e.trim())}const br=e=>e===ln||e===kn,wr=new Set(["x","y","z"]),kr=an.filter(e=>!wr.has(e));const Nr={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return vr(n,"x")},y:(e,t)=>{let{transform:n}=t;return vr(n,"y")}};Nr.translateX=Nr.x,Nr.translateY=Nr.y;const Sr=e=>e,jr={},Cr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Er={value:null,addProjectionMetrics:null};function Tr(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=Cr.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,a=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){s.has(t)&&(u.schedule(t),e()),l++,t(o)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&a?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{o=e,a?i=!0:(a=!0,[n,r]=[r,n],n.forEach(c),t&&Er.value&&Er.value.frameloop[t].push(l),l=0,n.clear(),a=!1,i&&(i=!1,u.process(e)))}};return u}(i,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:p,postRender:f}=s,m=()=>{const i=jr.useManualTiming?a.timestamp:performance.now();n=!1,jr.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(i-a.timestamp,40),1)),a.timestamp=i,a.isProcessing=!0,o.process(a),l.process(a),c.process(a),u.process(a),d.process(a),h.process(a),p.process(a),f.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(m))},g=Cr.reduce((t,i)=>{const o=s[i];return t[i]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,a.isProcessing||e(m)),o.schedule(t,i,s)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<Cr.length;t++)s[Cr[t]].cancel(e)},state:a,steps:s}}const{schedule:Ir,cancel:Ar,state:Or,steps:_r}=Tr("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Sr,!0),Rr=new Set;let Pr=!1,Mr=!1,Dr=!1;function Fr(){if(Mr){const e=Array.from(Rr).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return kr.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[r,a]=t;null===(n=e.getValue(r))||void 0===n||n.set(a)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Mr=!1,Pr=!1,Rr.forEach(e=>e.complete(Dr)),Rr.clear()}function Lr(){Rr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Mr=!0)})}class zr{constructor(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Rr.add(this),Pr||(Pr=!0,Ir.read(Lr),Ir.resolveKeyframes(Fr))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const a=null===r||void 0===r?void 0:r.get(),i=e[e.length-1];if(void 0!==a)e[0]=a;else if(n&&t){const r=n.readValue(t,i);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=i),r&&void 0===a&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Rr.delete(this)}cancel(){"scheduled"===this.state&&(Rr.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Br=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function Ur(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Br(e))}function Wr(e,t){let n=Hn(e);return n!==Bn&&(n=Dn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Vr=new Set(["auto","none","0"]);class Hr extends zr{constructor(e,t,n,r,a){super(e,t,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),ir(n))){const r=cr(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!qn.has(n)||2!==e.length)return;const[r,a]=e,i=$n(r),s=$n(a);if(or(r)!==or(a)&&Nr[n])this.needsMeasurement=!0;else if(i!==s)if(br(i)&&br(s))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else Nr[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||Ur(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,a=0;for(;a<e.length&&!r;){const t=e[a];"string"===typeof t&&!Vr.has(t)&&_n(t).values.length&&(r=e[a]),a++}if(r&&n)for(const i of t)e[i]=Wr(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=Nr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,r]=e;t.getValue(n).set(r)}),this.resolveNoneKeyframes()}}function Gr(e,t){-1===e.indexOf(t)&&e.push(t)}function Kr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class qr{constructor(){this.subscriptions=[]}add(e){return Gr(this.subscriptions,e),()=>Kr(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let a=0;a<r;a++){const r=this.subscriptions[a];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const{schedule:Xr,cancel:Yr}=Tr(queueMicrotask,!1);let $r;function Qr(){$r=void 0}const Jr={now:()=>(void 0===$r&&Jr.set(Or.isProcessing||jr.useManualTiming?Or.timestamp:performance.now()),$r),set:e=>{$r=e,queueMicrotask(Qr)}};function Zr(e,t){return t?e*(1e3/t):0}const ea={current:void 0};class ta{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=Jr.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Jr.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new qr);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ir.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ea.current&&ea.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Jr.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Zr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function na(e,t){return new ta(e,t)}const ra=[...Yn,En,Dn],aa={current:null},ia={current:!1},sa="undefined"!==typeof window;const oa=new WeakMap;function la(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function ca(e){return"string"===typeof e||Array.isArray(e)}const ua=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],da=["initial",...ua];function ha(e){return la(e.animate)||da.some(t=>ca(e[t]))}function pa(e){return Boolean(ha(e)||e.variants)}function fa(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ma(e,t,n,r){if("function"===typeof t){const[a,i]=fa(r);t=t(void 0!==n?n:e.custom,a,i)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[a,i]=fa(r);t=t(void 0!==n?n:e.custom,a,i)}return t}const ga=["willChange"],xa=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let va={};function ya(e){va=e}class ba{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:s}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Jr.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Ir.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget=m({},l),this.initialValues=n.initial?m({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=ha(n),this.isVariantNode=pa(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{},this),{willChange:h}=d,p=u(d,ga);for(const u in p){const e=p[u];void 0!==l[u]&&Kn(e)&&e.set(l[u])}}mount(e){var t;this.current=e,oa.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(ia.current||function(){if(ia.current=!0,sa)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>aa.current=e.matches;e.addEventListener("change",t),t()}else aa.current=!1}(),this.shouldReduceMotion=aa.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ar(this.notifyUpdate),Ar(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=sn.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ir.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;"undefined"!==typeof window&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in va){const t=va[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<xa.length;n++){const t=xa[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const a=t[r],i=n[r];if(Kn(a))e.addValue(r,a);else if(Kn(i))e.addValue(r,na(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(a):t.hasAnimated||t.set(a)}else{const t=e.getStaticValue(r);e.addValue(r,na(void 0!==t?t:a,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=na(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var a;return void 0!==r&&null!==r&&("string"===typeof r&&(tr(r)||Br(r))?r=parseFloat(r):(a=r,!ra.find(Xn(a))&&Dn.test(t)&&(r=Wr(e,t))),this.setBaseTarget(e,Kn(r)?r.get():r)),Kn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const a=ma(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);a&&(n=a[e])}if(t&&void 0!==n)return n;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||Kn(a)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new qr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){Xr.render(this.render)}}class wa extends ba{constructor(){super(...arguments),this.KeyframeResolver=Hr}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){const n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kn(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}function ka(e){return e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase()))}const Na=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Sa={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ja=an.length;function Ca(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let s=!1,o=!1;for(const l in t){const e=t[l];if(sn.has(l))s=!0;else if(rr(l))a[l]=e;else{const t=Na(e,Wn[l]);l.startsWith("origin")?(o=!0,i[l]=t):r[l]=t}}if(t.transform||(s||n?r.transform=function(e,t,n){let r="",a=!0;for(let i=0;i<ja;i++){const s=an[i],o=e[s];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(s.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=Na(o,Wn[s]);l||(a=!1,r+="".concat(Sa[s]||s,"(").concat(e,") ")),n&&(t[s]=e)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const Ea={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ta={offset:"strokeDashoffset",array:"strokeDasharray"};const Ia=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"],Aa=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Oa(e,t,n,r,a){let{attrX:i,attrY:s,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(Ca(e,u(t,Ia),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;var f,m;(h.transform&&(p.transform=h.transform,delete h.transform),p.transform||h.transformOrigin)&&(p.transformOrigin=null!==(f=h.transformOrigin)&&void 0!==f?f:"50% 50%",delete h.transformOrigin);p.transform&&(p.transformBox=null!==(m=null===a||void 0===a?void 0:a.transformBox)&&void 0!==m?m:"fill-box",delete h.transformBox);for(const u of Aa)void 0!==h[u]&&(p[u]=h[u],delete h[u]);void 0!==i&&(h.x=i),void 0!==s&&(h.y=s),void 0!==o&&(h.scale=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=a?Ea:Ta;e[i.offset]="".concat(-r),e[i.array]="".concat(t," ").concat(n)}(h,l,c,d,!1)}const _a=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Ra=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Pa(e,t,n,r){let{style:a,vars:i}=t;const s=e.style;let o;for(o in a)s[o]=a[o];for(o in null===r||void 0===r||r.applyProjectionStyles(s,n),i)s.setProperty(o,i[o])}function Ma(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Da={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!kn.test(e))return e;e=parseFloat(e)}const n=Ma(e,t.target.x),r=Ma(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Fa=(e,t,n)=>e+(t-e)*n,La={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const a=e,i=Dn.parse(e);if(i.length>5)return a;const s=Dn.createTransformer(e),o="number"!==typeof i[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;i[0+o]/=l,i[1+o]/=c;const u=Fa(l,c,.5);return"number"===typeof i[2+o]&&(i[2+o]/=u),"number"===typeof i[3+o]&&(i[3+o]/=u),s(i)}},za={borderRadius:m(m({},Da),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Da,borderTopRightRadius:Da,borderBottomLeftRadius:Da,borderBottomRightRadius:Da,boxShadow:La};function Ba(e,t){let{layout:n,layoutId:r}=t;return sn.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!za[e]||"opacity"===e)}function Ua(e,t,n){const r=e.style,a=null===t||void 0===t?void 0:t.style,i={};if(!r)return i;for(const o in r){var s;(Kn(r[o])||a&&Kn(a[o])||Ba(o,e)||void 0!==(null===n||void 0===n||null===(s=n.getValue(o))||void 0===s?void 0:s.liveStyle))&&(i[o]=r[o])}return i}function Wa(e,t,n){const r=Ua(e,t,n);for(const a in e)if(Kn(e[a])||Kn(t[a])){r[-1!==an.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return r}class Va extends wa{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(sn.has(t)){const e=Hn(t);return e&&e.default||0}return t=_a.has(t)?t:ka(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Wa(e,t,n)}build(e,t,n){Oa(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){Pa(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(_a.has(a)?a:ka(a),t.attrs[a])}(e,t,0,r)}mount(e){this.isSVGTag=Ra(e.tagName),super.mount(e)}}function Ha(e){let{top:t,left:n,right:r,bottom:a}=e;return{x:{min:n,max:r},y:{min:t,max:a}}}function Ga(e){return void 0===e||1===e}function Ka(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Ga(t)||!Ga(n)||!Ga(r)}function qa(e){return Ka(e)||Xa(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Xa(e){return Ya(e.x)||Ya(e.y)}function Ya(e){return e&&"0%"!==e}function $a(e,t,n){return n+t*(e-n)}function Qa(e,t,n,r,a){return void 0!==a&&(e=$a(e,a,r)),$a(e,n,r)+t}function Ja(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=Qa(e.min,t,n,r,a),e.max=Qa(e.max,t,n,r,a)}function Za(e,t){let{x:n,y:r}=t;Ja(e.x,n.translate,n.scale,n.originPoint),Ja(e.y,r.translate,r.scale,r.originPoint)}const ei=.999999999999,ti=1.0000000000001;function ni(e,t){e.min=e.min+t,e.max=e.max+t}function ri(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Ja(e,t,n,Fa(e.min,e.max,a),r)}function ai(e,t){ri(e.x,t.x,t.scaleX,t.scale,t.originX),ri(e.y,t.y,t.scaleY,t.scale,t.originY)}function ii(e,t){return Ha(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}class si extends wa{constructor(){super(...arguments),this.type="html",this.renderInstance=Pa}readValueFromInstance(e,t){var n,r;if(sn.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?xr(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return vr(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),a=(rr(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof a?a.trim():a}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return ii(e,n)}build(e,t,n){Ca(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Ua(e,t,n)}}const oi=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function li(e){return"string"===typeof e&&!e.includes("-")&&!!(oi.indexOf(e)>-1||/[A-Z]/.test(e))}const ci=(e,t)=>{var n;return(null!==(n=t.isSVG)&&void 0!==n?n:li(e))?new Va(t):new si(t,{allowProjection:e!==o.Fragment})},ui=(0,o.createContext)({strict:!1}),di=(0,o.createContext)({});function hi(e){const{initial:t,animate:n}=function(e,t){if(ha(e)){const{initial:t,animate:n}=e;return{initial:!1===t||ca(t)?t:void 0,animate:ca(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,o.useContext)(di));return(0,o.useMemo)(()=>({initial:t,animate:n}),[pi(t),pi(n)])}function pi(e){return Array.isArray(e)?e.join(" "):e}const fi=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mi(e,t,n){for(const r in t)Kn(t[r])||Ba(r,n)||(e[r]=t[r])}function gi(e,t){const n={};return mi(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,o.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Ca(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function xi(e,t){const n={},r=gi(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const vi=()=>m(m({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function yi(e,t,n,r){const a=(0,o.useMemo)(()=>{const n=vi();return Oa(n,t,Ra(r),e.transformTemplate,e.style),m(m({},n.attrs),{},{style:m({},n.style)})},[t]);if(e.style){const t={};mi(t,e.style,e),a.style=m(m({},t),a.style)}return a}const bi=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wi(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||bi.has(e)}let ki=e=>!wi(e);try{"function"===typeof(Ni=require("@emotion/is-prop-valid").default)&&(ki=e=>e.startsWith("on")?!wi(e):Ni(e))}catch($je){}var Ni;function Si(e,t,n,r,a){let{latestValues:i}=r,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0;const c=((null!==l&&void 0!==l?l:li(e))?yi:xi)(t,i,a,e),u=function(e,t,n){const r={};for(const a in e)"values"===a&&"object"===typeof e.values||(ki(a)||!0===n&&wi(a)||!t&&!wi(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(t,"string"===typeof e,s),d=e!==o.Fragment?m(m(m({},u),c),{},{ref:n}):{},{children:h}=t,p=(0,o.useMemo)(()=>Kn(h)?h.get():h,[h]);return(0,o.createElement)(e,m(m({},d),{},{children:p}))}function ji(e){return Kn(e)?e.get():e}const Ci=["transitionEnd","transition"];function Ei(e,t,n,r){const a={},i=r(e,{});for(const u in i)a[u]=ji(i[u]);let{initial:s,animate:o}=e;const l=ha(e),c=pa(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===s;const h=d?o:s;if(h&&"boolean"!==typeof h&&!la(h)){const t=Array.isArray(h)?h:[h];for(let n=0;n<t.length;n++){const r=ma(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=u(r,Ci);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(a[r]=e)}for(const r in e)a[r]=e[r]}}}return a}const Ti=e=>(t,n)=>{const r=(0,o.useContext)(di),a=(0,o.useContext)(Ht),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:a,createRenderState:i}=e;return{latestValues:Ei(t,n,r,a),renderState:i()}}(e,t,r,a);return n?i():Ut(i)},Ii=Ti({scrapeMotionValuesFromProps:Ua,createRenderState:fi}),Ai=Ti({scrapeMotionValuesFromProps:Wa,createRenderState:vi}),Oi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let _i=!1;function Ri(){return function(){if(_i)return;const e={};for(const t in Oi)e[t]={isEnabled:e=>Oi[t].some(t=>!!e[t])};ya(e),_i=!0}(),va}const Pi=Symbol.for("motionComponentSymbol");function Mi(e,t,n){const r=(0,o.useRef)(n);(0,o.useInsertionEffect)(()=>{r.current=n});const a=(0,o.useRef)(null);return(0,o.useCallback)(n=>{var i;n&&(null===(i=e.onMount)||void 0===i||i.call(e,n));t&&(n?t.mount(n):t.unmount());const s=r.current;if("function"===typeof s)if(n){const e=s(n);"function"===typeof e&&(a.current=e)}else a.current?(a.current(),a.current=null):s(n);else s&&(s.current=n)},[t])}const Di="data-"+ka("framerAppearId"),Fi=(0,o.createContext)({});function Li(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function zi(e,t,n,r,a,i){var s,l,c,u;const{visualElement:d}=(0,o.useContext)(di),h=(0,o.useContext)(ui),p=(0,o.useContext)(Ht),f=(0,o.useContext)(qt).reducedMotion,m=(0,o.useRef)(null);r=r||h.renderer,!m.current&&r&&(m.current=r(e,{visualState:t,parent:d,props:n,presenceContext:p,blockInitialAnimation:!!p&&!1===p.initial,reducedMotionConfig:f,isSVG:i}));const g=m.current,x=(0,o.useContext)(Fi);!g||g.projection||!a||"html"!==g.type&&"svg"!==g.type||function(e,t,n,r){const{layoutId:a,layout:i,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Bi(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:Boolean(s)||o&&Li(o),visualElement:e,animationType:"string"===typeof i?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(m.current,n,a,x);const v=(0,o.useRef)(!1);(0,o.useInsertionEffect)(()=>{g&&v.current&&g.update(n,p)});const y=n[Di],b=(0,o.useRef)(Boolean(y)&&!(null!==(s=(l=window).MotionHandoffIsComplete)&&void 0!==s&&s.call(l,y))&&(null===(c=(u=window).MotionHasOptimisedAnimation)||void 0===c?void 0:c.call(u,y)));return Vt(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),b.current&&g.animationState&&g.animationState.animateChanges())}),(0,o.useEffect)(()=>{g&&(!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,y)}),b.current=!1),g.enteringChildren=void 0)}),g}function Bi(e){if(e)return!1!==e.options.allowProjection?e.projection:Bi(e.parent)}function Ui(e){var t,n;let{forwardMotionProps:r=!1,type:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;i&&function(e){const t=Ri();for(const n in e)t[n]=m(m({},t[n]),e[n]);ya(t)}(i);const l=a?"svg"===a:li(e),c=l?Ai:Ii;function u(t,n){let a;const i=m(m(m({},(0,o.useContext)(qt)),t),{},{layoutId:Wi(t)}),{isStatic:u}=i,d=hi(t),h=c(t,u);if(!u&&Wt){!function(){(0,o.useContext)(ui).strict;0}();const t=function(e){const t=Ri(),{drag:n,layout:r}=t;if(!n&&!r)return{};const a=m(m({},n),r);return{MeasureLayout:null!==n&&void 0!==n&&n.isEnabled(e)||null!==r&&void 0!==r&&r.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}(i);a=t.MeasureLayout,d.visualElement=zi(e,h,i,s,t.ProjectionNode,l)}return(0,zt.jsxs)(di.Provider,{value:d,children:[a&&d.visualElement?(0,zt.jsx)(a,m({visualElement:d.visualElement},i)):null,Si(e,t,Mi(h,d.visualElement,n),h,u,r,l)]})}u.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==t?t:"",")"));const d=(0,o.forwardRef)(u);return d[Pi]=e,d}function Wi(e){let{layoutId:t}=e;const n=(0,o.useContext)(Bt).id;return n&&void 0!==t?n+"-"+t:t}function Vi(e,t){if("undefined"===typeof Proxy)return Ui;const n=new Map,r=(n,r)=>Ui(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(a,i)=>"create"===i?r:(n.has(i)||n.set(i,Ui(i,void 0,e,t)),n.get(i))})}class Hi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Gi(e,t,n){const r=e.getProps();return ma(r,t,void 0!==n?n:r.custom,e)}function Ki(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const qi=e=>Array.isArray(e),Xi=["transitionEnd","transition"];function Yi(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,na(n))}function $i(e){return qi(e)?e[e.length-1]||0:e}function Qi(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(Kn(e)&&e.add)}(n))return n.add(t);if(!n&&jr.WillChange){const n=new jr.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Ji(e){return e.props[Di]}const Zi=e=>1e3*e,es=e=>e/1e3,ts=(e,t)=>n=>t(e(n)),ns=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(ts)},rs={layout:0,mainThread:0,waapi:0};function as(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function is(e,t){return n=>n>0?t:e}const ss=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},os=[vn,xn,Cn];function ls(e){const t=(n=e,os.find(e=>e.test(n)));var n;if(Zn(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),"color-not-animatable"),!Boolean(t))return!1;let r=t.parse(e);return t===Cn&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:a}=e;t/=360,n/=100,r/=100;let i=0,s=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,a=2*r-e;i=as(a,e,t+1/3),s=as(a,e,t),o=as(a,e,t-1/3)}else i=s=o=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:a}}(r)),r}const cs=(e,t)=>{const n=ls(e),r=ls(t);if(!n||!r)return is(e,t);const a=m({},n);return e=>(a.red=ss(n.red,r.red,e),a.green=ss(n.green,r.green,e),a.blue=ss(n.blue,r.blue,e),a.alpha=Fa(n.alpha,r.alpha,e),xn.transform(a))},us=new Set(["none","hidden"]);function ds(e,t){return n=>Fa(e,t,n)}function hs(e){return"number"===typeof e?ds:"string"===typeof e?ir(e)?is:En.test(e)?cs:ms:Array.isArray(e)?ps:"object"===typeof e?En.test(e)?cs:fs:is}function ps(e,t){const n=[...e],r=n.length,a=e.map((e,n)=>hs(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=a[t](e);return n}}function fs(e,t){const n=m(m({},e),t),r={};for(const a in n)void 0!==e[a]&&void 0!==t[a]&&(r[a]=hs(e[a])(e[a],t[a]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const ms=(e,t)=>{const n=Dn.createTransformer(t),r=_n(e),a=_n(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?us.has(e)&&!a.values.length||us.has(t)&&!r.values.length?function(e,t){return us.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):ns(ps(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){var a;const s=t.types[i],o=e.indexes[s][r[s]],l=null!==(a=e.values[o])&&void 0!==a?a:0;n[i]=l,r[s]++}return n}(r,a),a.values),n):(Zn(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),"complex-values-different"),is(e,t))};function gs(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Fa(e,t,n);return hs(e)(e,t)}const xs=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ir.update(t,e)},stop:()=>Ar(t),now:()=>Or.isProcessing?Or.timestamp:Jr.now()}},vs=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(1e4*e(i/(a-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},ys=2e4;function bs(e){let t=0;let n=e.next(t);for(;!n.done&&t<ys;)t+=50,n=e.next(t);return t>=ys?1/0:t}function ws(e,t,n){const r=Math.max(t-5,0);return Zr(n-e(r),t-r)}const ks={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ns=.001;function Ss(e){let t,n,{duration:r=ks.duration,bounce:a=ks.bounce,velocity:i=ks.velocity,mass:s=ks.mass}=e;Zn(r<=Zi(ks.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-a;o=on(ks.minDamping,ks.maxDamping,o),r=on(ks.minDuration,ks.maxDuration,es(r)),o<1?(t=e=>{const t=e*o,n=t*r,a=t-i,s=Cs(e,o),l=Math.exp(-n);return Ns-a/s*l},n=e=>{const n=e*o*r,a=n*i+i,s=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Cs(Math.pow(e,2),o);return(-t(e)+Ns>0?-1:1)*((a-s)*l)/c}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const l=function(e,t,n){let r=n;for(let a=1;a<js;a++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Zi(r),isNaN(l))return{stiffness:ks.stiffness,damping:ks.damping,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*o*Math.sqrt(s*e),duration:r}}}const js=12;function Cs(e,t){return e*Math.sqrt(1-t*t)}const Es=["duration","bounce"],Ts=["stiffness","damping","mass"];function Is(e,t){return t.some(t=>void 0!==e[t])}function As(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ks.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ks.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t=m({velocity:ks.velocity,stiffness:ks.stiffness,damping:ks.damping,mass:ks.mass,isResolvedFromDuration:!1},e);if(!Is(e,Ts)&&Is(e,Es))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),a=r*r,i=2*on(.05,1,1-(e.bounce||0))*Math.sqrt(a);t=m(m({},t),{},{mass:ks.mass,stiffness:a,damping:i})}else{const n=Ss(e);t=m(m(m({},t),n),{},{mass:ks.mass}),t.isResolvedFromDuration=!0}return t}(m(m({},n),{},{velocity:-es(n.velocity||0)})),f=h||0,g=c/(2*Math.sqrt(l*u)),x=s-i,v=es(Math.sqrt(l/u)),y=Math.abs(x)<5;let b;if(r||(r=y?ks.restSpeed.granular:ks.restSpeed.default),a||(a=y?ks.restDelta.granular:ks.restDelta.default),g<1){const e=Cs(v,g);b=t=>{const n=Math.exp(-g*v*t);return s-n*((f+g*v*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===g)b=e=>s-Math.exp(-v*e)*(x+(f+v*x)*e);else{const e=v*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*v*t),r=Math.min(e*t,300);return s-n*((f+g*v*x)*Math.sinh(r)+e*x*Math.cosh(r))/e}}const w={calculatedDuration:p&&d||null,next:e=>{const t=b(e);if(p)o.done=e>=d;else{let n=0===e?f:0;g<1&&(n=0===e?Zi(f):ws(b,e,t));const i=Math.abs(n)<=r,l=Math.abs(s-t)<=a;o.done=i&&l}return o.value=o.done?s:t,o},toString:()=>{const e=Math.min(bs(w),ys),t=vs(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function Os(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,x=void 0===o?g:o(g);x!==g&&(m=x-h);const v=e=>-m*Math.exp(-e/a),y=e=>x+v(e),b=e=>{const t=v(e),n=y(e);p.done=Math.abs(t)<=u,p.value=p.done?x:n};let w,k;const N=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,k=As({keyframes:[p.value,f(p.value)],velocity:ws(y,e,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==w||(t=!0,b(e),N(e)),void 0!==w&&e>=w?k.next(e-w):(!t&&b(e),p)}}}As.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(m(m({},e),{},{keyframes:[0,t]})),r=Math.min(bs(n),ys);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:es(r)}}(e,100,As);return e.ease=t.ease,e.duration=Zi(t.duration),e.type="keyframes",e};const _s=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Rs(e,t,n,r){if(e===t&&n===r)return Sr;const a=t=>function(e,t,n,r,a){let i,s,o=0;do{s=t+(n-t)/2,i=_s(s,r,a)-e,i>0?n=s:t=s}while(Math.abs(i)>1e-7&&++o<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:_s(a(e),t,r)}const Ps=Rs(.42,0,1,1),Ms=Rs(0,0,.58,1),Ds=Rs(.42,0,.58,1),Fs=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ls=e=>t=>1-e(1-t),zs=Rs(.33,1.53,.69,.99),Bs=Ls(zs),Us=Fs(Bs),Ws=e=>(e*=2)<1?.5*Bs(e):.5*(2-Math.pow(2,-10*(e-1))),Vs=e=>1-Math.sin(Math.acos(e)),Hs=Ls(Vs),Gs=Fs(Vs),Ks=e=>Array.isArray(e)&&"number"===typeof e[0],qs={linear:Sr,easeIn:Ps,easeInOut:Ds,easeOut:Ms,circIn:Vs,circInOut:Gs,circOut:Hs,backIn:Bs,backInOut:Us,backOut:zs,anticipate:Ws},Xs=e=>{if(Ks(e)){er(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,r,a]=e;return Rs(t,n,r,a)}return"string"===typeof e?(er(void 0!==qs[e],"Invalid easing type '".concat(e,"'"),"invalid-easing-type"),qs[e]):e},Ys=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function $s(e,t){let{clamp:n=!0,ease:r,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(er(i===t.length,"Both input and output ranges must be the same length","range-length"),1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],a=n||jr.mix||gs,i=e.length-1;for(let s=0;s<i;s++){let n=a(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||Sr:t;n=ns(e,n)}r.push(n)}return r}(t,r,a),l=o.length,c=n=>{if(s&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const a=Ys(e[r],e[r+1],n);return o[r](a)};return n?t=>c(on(e[0],e[i-1],t)):c}function Qs(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Ys(0,t,r);e.push(Fa(n,1,a))}}(t,e.length-1),t}function Js(e){let{duration:t=300,keyframes:n,times:r,ease:a="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map(Xs):Xs(a),s={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:Qs(n),t),l=$s(o,n,{ease:Array.isArray(i)?i:(c=n,u=i,c.map(()=>u||Ds).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}const Zs=e=>null!==e;function eo(e,t,n){let{repeat:r,repeatType:a="loop"}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.filter(Zs),o=i<0||r&&"loop"!==a&&r%2===1?0:s.length-1;return o&&void 0!==n?n:s[o]}const to={decay:Os,inertia:Os,tween:Js,keyframes:Js,spring:As};function no(e){"string"===typeof e.type&&(e.type=to[e.type])}class ro{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ao=e=>e/100;class io extends ro{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Jr.now()&&this.tick(Jr.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},rs.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;no(e);const{type:t=Js,repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:i=0}=e;let{keyframes:s}=e;const o=t||Js;o!==Js&&"number"!==typeof s[0]&&(this.mixKeyframes=ns(ao,gs(s[0],s[1])),s=[0,100]);const l=o(m(m({},e),{},{keyframes:s}));"mirror"===a&&(this.mirroredGenerator=o(m(m({},e),{},{keyframes:[...s].reverse(),velocity:-i}))),null===l.calculatedDuration&&(l.calculatedDuration=bs(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:s,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,y=n;if(u){const e=Math.min(this.currentTime,r)/s;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/s)):"mirror"===d&&(y=i)),v=on(0,1,n)*s}const b=x?{done:!1,value:c[0]}:y.next(v);a&&(b.value=a(b.value));let{done:w}=b;x||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&p!==Os&&(b.value=eo(c,this.options,m,this.speed)),f&&f(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return es(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+es(e)}get time(){return es(this.currentTime)}set time(e){var t;e=Zi(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=es(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=xs,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const a=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=a):null!==this.holdTime?this.startTime=a-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:a),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jr.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,rs.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function so(e){let t;return()=>(void 0===t&&(t=e()),t)}const oo=so(()=>void 0!==window.ScrollTimeline),lo={};function co(e,t){const n=so(e);return()=>{var e;return null!==(e=lo[t])&&void 0!==e?e:n()}}const uo=co(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Yje){return!1}return!0},"linearEasing"),ho=e=>{let[t,n,r,a]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(a,")")},po={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ho([0,.65,.55,1]),circOut:ho([.55,0,1,.45]),backIn:ho([.31,.01,.66,-.59]),backOut:ho([.33,1.53,.69,.99])};function fo(e,t){return e?"function"===typeof e?uo()?vs(e,t):"ease-out":Ks(e)?ho(e):Array.isArray(e)?e.map(e=>fo(e,t)||po.easeOut):po[e]:void 0}function mo(e,t,n){let{delay:r=0,duration:a=300,repeat:i=0,repeatType:s="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=fo(o,a);Array.isArray(d)&&(u.easing=d),Er.value&&rs.waapi++;const h={delay:r,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:"reverse"===s?"alternate":"normal"};c&&(h.pseudoElement=c);const p=e.animate(u,h);return Er.value&&p.finished.finally(()=>{rs.waapi--}),p}function go(e){return"function"===typeof e&&"applyToOptions"in e}const xo=["type"];class vo extends ro{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:s,onComplete:o}=e;this.isPseudoElement=Boolean(a),this.allowFlatten=i,this.options=e,er("string"!==typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function(e){let{type:t}=e,n=u(e,xo);return go(t)&&uo()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(a=n.ease)&&void 0!==a||(n.ease="easeOut"),n);var r,a}(e);this.animation=mo(t,n,r,l,a),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const e=eo(r,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(Yje){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return es(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+es(e)}get time(){return es(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Zi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){var e;return null!==(e=this.manualStartTime)&&void 0!==e?e:Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&oo()?(this.animation.timeline=t,Sr):n(this)}}const yo={anticipate:Ws,backInOut:Us,circInOut:Gs};function bo(e){"string"===typeof e.ease&&e.ease in yo&&(e.ease=yo[e.ease])}const wo=["motionValue","onUpdate","onComplete","element"];class ko extends vo{constructor(e){bo(e),no(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const t=this.options,{motionValue:n,onUpdate:r,onComplete:a,element:i}=t,s=u(t,wo);if(!n)return;if(void 0!==e)return void n.set(e);const o=new io(m(m({},s),{},{autoplay:!1})),l=Math.max(10,Jr.now()-this.startTime),c=on(0,10,l-10);n.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const No=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Dn.test(e)&&"0"!==e||e.startsWith("url(")));function So(e){e.duration=0,e.type="keyframes"}const jo=new Set(["opacity","clipPath","filter","transform"]),Co=so(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Eo=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class To extends ro{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:a="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h}=e,p=u(e,Eo);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Jr.now();const f=m({autoplay:n,delay:r,type:a,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:d,element:h},p),g=(null===h||void 0===h?void 0:h.KeyframeResolver)||zr;this.keyframeResolver=new g(l,(e,t,n)=>this.onKeyframesResolved(e,t,f,!n),c,d,h),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){var a;this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=Jr.now(),function(e,t,n,r){const a=e[0];if(null===a)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],s=No(a,t),o=No(i,t);return Zn(s===o,"You are trying to animate ".concat(t,' from "').concat(a,'" to "').concat(i,'". "').concat(s?i:a,'" is not an animatable value.'),"value-not-animatable"),!(!s||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||go(n))&&r)}(e,i,s,o)||(!jr.instantAnimations&&l||null===u||void 0===u||u(eo(e,n,t)),e[0]=e[e.length-1],So(n),n.repeat=0);const d=m(m({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),h=!c&&function(e){var t;const{motionValue:n,name:r,repeatDelay:a,repeatType:i,damping:s,type:o}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Co()&&r&&jo.has(r)&&("transform"!==r||!c)&&!l&&!a&&"mirror"!==i&&0!==s&&"inertia"!==o}(d),p=null===(a=d.motionValue)||void 0===a||null===(a=a.owner)||void 0===a?void 0:a.current,f=h?new ko(m(m({},d),{},{element:p})):new io(d);f.finished.then(()=>{this.notifyFinished()}).catch(Sr),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),Dr=!0,Lr(),Fr(),Dr=!1);return this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const Io={type:"spring",stiffness:500,damping:25,restSpeed:10},Ao={type:"keyframes",duration:.8},Oo={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_o=(e,t)=>{let{keyframes:n}=t;return n.length>2?Ao:sn.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Io:Oo},Ro=e=>null!==e;const Po=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Mo=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return s=>{const o=Ki(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=Zi(l);const d=m(m({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:a});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,h=u(e,Po);return!!Object.keys(h).length})(o)||Object.assign(d,_o(e,d)),d.duration&&(d.duration=Zi(d.duration)),d.repeatDelay&&(d.repeatDelay=Zi(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let h=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(So(d),0===d.delay&&(h=!0)),(jr.instantAnimations||jr.skipAnimations)&&(h=!0,So(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:a="loop"}=t;const i=e.filter(Ro),s=r&&"loop"!==a&&r%2===1?0:i.length-1;return s&&void 0!==n?n:i[s]}(d.keyframes,o);if(void 0!==e)return void Ir.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new io(d):new To(d)}},Do=["transition","transitionEnd"];function Fo(e,t){let{protectedKeys:n,needsAnimating:r}=e;const a=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,a}function Lo(e,t){let{delay:n=0,transitionOverride:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:i=e.getDefaultTransition(),transitionEnd:s}=t,o=u(t,Do);r&&(i=r);const l=[],c=a&&e.animationState&&e.animationState.getState()[a];for(const u in o){var d;const t=e.getValue(u,null!==(d=e.latestValues[u])&&void 0!==d?d:null),r=o[u];if(void 0===r||c&&Fo(c,u))continue;const a=m({delay:n},Ki(i||{},u)),s=t.get();if(void 0!==s&&!t.isAnimating&&!Array.isArray(r)&&r===s&&!a.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=Ji(e);if(t){const e=window.MotionHandoffAnimation(t,u,Ir);null!==e&&(a.startTime=e,h=!0)}}Qi(e,u),t.start(Mo(u,t,r,e.shouldReduceMotion&&qn.has(u)?{type:!1}:a,e,h));const p=t.animation;p&&l.push(p)}return s&&Promise.all(l).then(()=>{Ir.update(()=>{s&&function(e,t){let n=Gi(e,t)||{},{transitionEnd:r={},transition:a={}}=n,i=u(n,Xi);i=m(m({},i),r);for(const s in i)Yi(e,s,$i(i[s]))}(e,s)})}),l}function zo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),s=e.size,o=(s-1)*r;return"function"===typeof n?n(i,s):1===a?i*r:o-i*r}function Bo(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=Gi(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const s=a?()=>Promise.all(Lo(e,a,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:s,staggerDirection:o}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Bo(l,t,m(m({},s),{},{delay:n+("function"===typeof r?0:r)+zo(e.variantChildren,l,r,a,i)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,a,s,o,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[s,o]:[o,s];return e().then(()=>t())}return Promise.all([s(),o(r.delay)])}const Uo=da.length;function Wo(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Wo(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Uo;n++){const r=da[n],a=e.props[r];(ca(a)||!1===a)&&(t[r]=a)}return t}function Vo(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Ho=["transition","transitionEnd"],Go=[...ua].reverse(),Ko=ua.length;function qo(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map(t=>Bo(e,t,r));n=Promise.all(a)}else if("string"===typeof t)n=Bo(e,t,r);else{const a="function"===typeof t?Gi(e,t,r.custom):t;n=Promise.all(Lo(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function Xo(e){let t=qo(e),n=Qo(),r=!0;const a=t=>(n,r)=>{var a;const i=Gi(e,r,"exit"===t?null===(a=e.presenceContext)||void 0===a?void 0:a.custom:void 0);if(i){const{transition:e,transitionEnd:t}=i,r=u(i,Ho);n=m(m(m({},n),r),t)}return n};function i(i){const{props:s}=e,o=Wo(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<Ko;t++){const h=Go[t],p=n[h],f=void 0!==s[h]?s[h]:o[h],g=ca(f),x=h===i?p.isActive:null;!1===x&&(d=t);let v=f===o[h]&&f!==s[h]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=m({},u),!p.isActive&&null===x||!f&&!p.prevProp||la(f)||"boolean"===typeof f)continue;const y=Yo(p.prevProp,f);let b=y||h===i&&p.isActive&&!v&&g||t>d&&g,w=!1;const k=Array.isArray(f)?f:[f];let N=k.reduce(a(h),{});!1===x&&(N={});const{prevResolvedValues:S={}}=p,j=m(m({},S),N),C=t=>{b=!0,c.has(t)&&(w=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in j){const t=N[e],n=S[e];if(u.hasOwnProperty(e))continue;let r=!1;r=qi(t)&&qi(n)?!Vo(t,n):t!==n,r?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=N,p.isActive&&(u=m(m({},u),N)),r&&e.blockInitialAnimation&&(b=!1);const E=v&&y;b&&(!E||w)&&l.push(...k.map(t=>{const n={type:h};if("string"===typeof t&&r&&!E&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,a=Gi(r,t);if(r.enteringChildren&&a){const{delayChildren:t}=a.transition||{};n.delay=zo(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof s.initial){const n=Gi(e,Array.isArray(s.initial)?s.initial[0]:s.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),a=e.getValue(n);a&&(a.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const s=i(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Qo()}}}function Yo(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Vo(t,e)}function $o(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qo(){return{animate:$o(!0),whileInView:$o(),whileHover:$o(),whileTap:$o(),whileDrag:$o(),whileFocus:$o(),exit:$o()}}let Jo=0;const Zo={animation:{Feature:class extends Hi{constructor(e){super(e),e.animationState||(e.animationState=Xo(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();la(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Hi{constructor(){super(...arguments),this.id=Jo++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},el={x:!1,y:!1};function tl(){return el.x||el.y}function nl(e){return[e("x"),e("y")]}function rl(e){return e.max-e.min}function al(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Fa(t.min,t.max,e.origin),e.scale=rl(n)/rl(t),e.translate=Fa(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function il(e,t,n,r){al(e.x,t.x,n.x,r?r.originX:void 0),al(e.y,t.y,n.y,r?r.originY:void 0)}function sl(e,t,n){e.min=n.min+t.min,e.max=e.min+rl(t)}function ol(e,t,n){e.min=t.min-n.min,e.max=e.min+rl(t)}function ll(e,t,n){ol(e.x,t.x,n.x),ol(e.y,t.y,n.y)}const cl=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ul(e){return cl.has(e.tagName)||!0===e.isContentEditable}function dl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const hl=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function pl(e){return{point:{x:e.pageX,y:e.pageY}}}function fl(e,t,n,r){return dl(e,t,(e=>t=>hl(t)&&e(t,pl(t)))(n),r)}const ml=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},gl=(e,t)=>Math.abs(e-t);const xl=new Set(["auto","scroll"]);class vl{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3,element:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=wl(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=gl(e.x,t.x),r=gl(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:a}=Or;this.history.push(m(m({},r),{},{timestamp:a}));const{onStart:i,onMove:s}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=yl(t,this.transformPagePoint),Ir.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:a}=this.handlers;if(!this.dragSnapToOrigin&&this.startEvent||a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=wl("pointercancel"===e.type?this.lastMoveEventInfo:yl(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!hl(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const o=yl(pl(e),this.transformPagePoint),{point:l}=o,{timestamp:c}=Or;this.history=[m(m({},l),{},{timestamp:c})];const{onSessionStart:u}=t;u&&u(e,wl(o,this.history)),this.removeListeners=ns(fl(this.contextWindow,"pointermove",this.handlePointerMove),fl(this.contextWindow,"pointerup",this.handlePointerUp),fl(this.contextWindow,"pointercancel",this.handlePointerUp)),s&&this.startScrollTracking(s)}startScrollTracking(e){let t=e.parentElement;for(;t;){const e=getComputedStyle(t);(xl.has(e.overflowX)||xl.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a=r.x-t.x,i=r.y-t.y;0===a&&0===i||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a,this.lastMoveEventInfo.point.y+=i):this.history.length>0&&(this.history[0].x-=a,this.history[0].y-=i),this.scrollPositions.set(e,r),Ir.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ar(this.updatePoint)}}function yl(e,t){return t?{point:t(e.point)}:e}function bl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wl(e,t){let{point:n}=e;return{point:n,delta:bl(n,Nl(t)),offset:bl(n,kl(t)),velocity:Sl(t,.1)}}function kl(e){return e[0]}function Nl(e){return e[e.length-1]}function Sl(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=Nl(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>Zi(t)));)n--;if(!r)return{x:0,y:0};const i=es(a.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function jl(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Cl(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const El=.35;function Tl(e,t,n){return{min:Il(e,t),max:Il(e,n)}}function Il(e,t){return"number"===typeof e?e:e[t]||0}const Al=new WeakMap;class Ol{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:a}=this.getProps();this.panSession=new vl(e,{onSessionStart:e=>{t?(this.stopAnimation(),this.snapToCursor(pl(e).point)):this.pauseAnimation()},onStart:(e,t)=>{this.stopAnimation();const{drag:n,dragPropagation:r,onDragStart:a}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?el[i]?null:(el[i]=!0,()=>{el[i]=!1}):el.x||el.y?null:(el.x=el.y=!0,()=>{el.x=el.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nl(e=>{let t=this.getAxisMotionValue(e).get()||0;if(wn.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=rl(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),a&&Ir.postRender(()=>a(e,t)),Qi(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:a,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>nl(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:a,distanceThreshold:n,contextWindow:ml(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ir.postRender(()=>s(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!_l(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:a}=t;return void 0!==r&&e<r?e=n?Fa(r,e,n.min):Math.max(e,r):void 0!==a&&e>a&&(e=n?Fa(a,e,n.max):Math.min(e,a)),e}(i,this.constraints[e],this.elastic[e])),a.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&Li(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:a,right:i}=t;return{x:jl(e.x,r,i),y:jl(e.y,n,a)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:El;return!1===e?e=0:!0===e&&(e=El),{x:Tl(e,"left","right"),y:Tl(e,"top","bottom")}}(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&nl(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Li(e))return!1;const n=e.current;er(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=function(e,t,n){const r=ii(e,n),{scroll:a}=t;return a&&(ni(r.x,a.offset.x),ni(r.y,a.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:Cl(e.x,t.x),y:Cl(e.y,t.y)}}(r.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=Ha(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=nl(s=>{if(!_l(s,t,this.currentDirection))return;let l=o&&o[s]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d=m(m({type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},a),l);return this.startAxisValueAnimation(s,d)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Qi(this.visualElement,e),n.start(Mo(e,n,0,t,this.visualElement,!1))}stopAnimation(){nl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nl(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){nl(t=>{const{drag:n}=this.getProps();if(!_l(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t],s=a.get()||0;a.set(e[t]-Fa(n,i,.5)+s)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Li(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};nl(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=rl(e),a=rl(t);return a>r?n=Ys(t.min,t.max-r,e.min):r>a&&(n=Ys(e.min,e.max-a,t.min)),on(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),nl(t=>{if(!_l(t,e,null))return;const n=this.getAxisMotionValue(t),{min:a,max:i}=this.constraints[t];n.set(Fa(a,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;Al.set(this.visualElement,this);const e=this.visualElement.current,t=fl(e,"pointerdown",t=>{const{drag:n,dragListener:r=!0}=this.getProps(),a=t.target,i=a!==e&&ul(a);n&&r&&!i&&this.start(t)}),n=()=>{const{dragConstraints:e}=this.getProps();Li(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ir.read(n);const i=dl(window,"resize",()=>this.scalePositionWithinConstraints()),s=r.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(nl(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),t(),a(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:i=El,dragMomentum:s=!0}=e;return m(m({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:i,dragMomentum:s})}}function _l(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Rl=e=>(t,n)=>{e&&Ir.postRender(()=>e(t,n))};const Pl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Ml=!1;class Dl extends o.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),n&&n.register&&r&&n.register(a),Ml&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions(m(m({},a.options),{},{onExitComplete:()=>this.safeToRemove()}))),Pl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:a}=this.props,{projection:i}=n;return i?(i.isPresent=a,Ml=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==a?i.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?i.promote():i.relegate()||Ir.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;Ml=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Fl(e){const[t,n]=en(),r=(0,o.useContext)(Bt);return(0,zt.jsx)(Dl,m(m({},e),{},{layoutGroup:r,switchLayoutGroup:(0,o.useContext)(Fi),isPresent:t,safeToRemove:n}))}function Ll(e,t,n,r,a){return e=$a(e-=t,1/n,r),void 0!==a&&(e=$a(e,1/a,r)),e}function zl(e,t,n,r,a){let[i,s,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;wn.test(t)&&(t=parseFloat(t),t=Fa(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let o=Fa(i.min,i.max,r);e===i&&(o-=t),e.min=Ll(e.min,t,n,o,a),e.max=Ll(e.max,t,n,o,a)}(e,t[i],t[s],t[o],t.scale,r,a)}const Bl=["x","scaleX","originX"],Ul=["y","scaleY","originY"];function Wl(e,t,n,r){zl(e.x,t,Bl,n?n.x:void 0,r?r.x:void 0),zl(e.y,t,Ul,n?n.y:void 0,r?r.y:void 0)}function Vl(e,t){e.min=t.min,e.max=t.max}function Hl(e,t){Vl(e.x,t.x),Vl(e.y,t.y)}function Gl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Kl(e){return 0===e.translate&&1===e.scale}function ql(e){return Kl(e.x)&&Kl(e.y)}function Xl(e,t){return e.min===t.min&&e.max===t.max}function Yl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $l(e,t){return Yl(e.x,t.x)&&Yl(e.y,t.y)}function Ql(e){return rl(e.x)/rl(e.y)}function Jl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}const Zl=["TopLeft","TopRight","BottomLeft","BottomRight"],ec=Zl.length,tc=e=>"string"===typeof e?parseFloat(e):e,nc=e=>"number"===typeof e||kn.test(e);function rc(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const ac=sc(0,.5,Hs),ic=sc(.5,.95,Sr);function sc(e,t,n){return r=>r<e?0:r>t?1:n(Ys(e,t,r))}function oc(e){return Gt(e)&&"ownerSVGElement"in e}const lc=(e,t)=>e.depth-t.depth;class cc{constructor(){this.children=[],this.isDirty=!1}add(e){Gr(this.children,e),this.isDirty=!0}remove(e){Kr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lc),this.isDirty=!1,this.children.forEach(e)}}function uc(e,t){const n=Jr.now(),r=a=>{let{timestamp:i}=a;const s=i-n;s>=t&&(Ar(r),e(s-t))};return Ir.setup(r,!0),()=>Ar(r)}class dc{constructor(){this.members=[]}add(e){Gr(this.members,e),e.scheduleRender()}remove(e){if(Kr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const hc={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},pc=["","X","Y","Z"];let fc=0;function mc(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function gc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Ji(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ir,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&gc(r)}function xc(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=fc++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Er.value&&(hc.nodes=hc.calculatedTargetDeltas=hc.calculatedProjections=0),this.nodes.forEach(bc),this.nodes.forEach(Ec),this.nodes.forEach(Tc),this.nodes.forEach(wc),Er.addProjectionMetrics&&Er.addProjectionMetrics(hc)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new cc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new qr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=oc(e)&&!(oc(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:a,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const a=()=>this.root.updateBlockedByResize=!1;Ir.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=uc(a,250),Pl.hasAnimatedSinceResize&&(Pl.hasAnimatedSinceResize=!1,this.nodes.forEach(Cc)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||a)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||Pc,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!$l(this.targetLayout,a),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=m(m({},Ki(s,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else n||Cc(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ar(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ic),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Nc);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Sc);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jc),this.nodes.forEach(vc),this.nodes.forEach(yc)):this.nodes.forEach(Sc),this.clearAllSnapshots();const e=Jr.now();Or.delta=on(0,1e3/60,e-Or.timestamp),Or.timestamp=e,Or.isProcessing=!0,_r.update.process(Or),_r.preRender.process(Or),_r.render.process(Or),Or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kc),this.sharedNodes.forEach(Ac)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ir.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ir.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||rl(this.snapshot.measuredBox.x)||rl(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=a(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!ql(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||qa(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Fc((r=n).x),Fc(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(zc))){const{scroll:e}=this.root;e&&(ni(n.x,e.offset.x),ni(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Hl(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:a,options:i}=t;t!==this.root&&a&&i.layoutScroll&&(a.wasRoot&&Hl(n,e),ni(n.x,a.offset.x),ni(n.y,a.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Hl(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&ai(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),qa(e.latestValues)&&ai(n,e.latestValues)}return qa(this.latestValues)&&ai(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Hl(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!qa(e.latestValues))continue;Ka(e.latestValues)&&e.updateSnapshot();const r=Gn();Hl(r,e.measurePageBox()),Wl(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return qa(this.latestValues)&&Wl(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=m(m(m({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:i}=this.options;if(!this.layout||!a&&!i)return;this.resolvedRelativeTargetAt=Or.timestamp;const s=this.getClosestProjectingParent();var o,l,c;(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,l=this.relativeTarget,c=this.relativeParent.target,sl(o.x,l.x,c.x),sl(o.y,l.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Hl(this.target,this.layout.layoutBox),Za(this.target,this.targetDelta)):Hl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&Boolean(s.resumingFrom)===Boolean(this.resumingFrom)&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0),Er.value&&hc.calculatedTargetDeltas++)}getClosestProjectingParent(){if(this.parent&&!Ka(this.parent.latestValues)&&!Xa(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ll(this.relativeTargetOrigin,t,n),Hl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Or.timestamp&&(r=!1),r)return;const{layout:a,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!i)return;Hl(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=n.length;if(!a)return;let i,s;t.x=t.y=1;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const{visualElement:a}=i.options;a&&a.props.style&&"contents"===a.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ai(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Za(e,s)),r&&qa(i.latestValues)&&ai(e,i.latestValues))}t.x<ti&&t.x>ei&&(t.x=1),t.y<ti&&t.y>ei&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Gl(this.prevProjectionDelta.x,this.projectionDelta.x),Gl(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),il(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&Jl(this.projectionDelta.x,this.prevProjectionDelta.x)&&Jl(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Er.value&&hc.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},a=m({},this.latestValues),i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Rc));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;Oc(i.x,e.x,n),Oc(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ll(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){_c(e.x,t.x,n.x,r),_c(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,s,n),d&&function(e,t){return Xl(e.x,t.x)&&Xl(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Hl(d,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,n,r,a,i){var s,o;if(a)e.opacity=Fa(0,null!==(s=n.opacity)&&void 0!==s?s:1,ac(r)),e.opacityExit=Fa(null!==(o=t.opacity)&&void 0!==o?o:1,0,ic(r));else if(i){var l,c;e.opacity=Fa(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let u=0;u<ec;u++){const a="border".concat(Zl[u],"Radius");let i=rc(t,a),s=rc(n,a);void 0===i&&void 0===s||(i||(i=0),s||(s=0),0===i||0===s||nc(i)===nc(s)?(e[a]=Math.max(Fa(tc(i),tc(s),r),0),(wn.test(s)||wn.test(i))&&(e[a]+="%")):e[a]=s)}(t.rotate||n.rotate)&&(e.rotate=Fa(t.rotate||0,n.rotate||0,r))}(a,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(Ar(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ir.update(()=>{Pl.hasAnimatedSinceResize=!0,rs.layout++,this.motionValue||(this.motionValue=na(0)),this.currentAnimation=function(e,t,n){const r=Kn(e)?e:na(e);return r.start(Mo("",r,t,n)),r.animation}(this.motionValue,[0,1e3],m(m({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{rs.layout--},onComplete:()=>{rs.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:a}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Lc(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=rl(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=rl(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Hl(t,n),ai(t,a),il(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new dc);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&mc("z",e,r,this.animationValues);for(let a=0;a<pc.length;a++)mc("rotate".concat(pc[a]),e,r,this.animationValues),mc("skew".concat(pc[a]),e,r,this.animationValues);e.render();for(const a in r)e.setStaticValue(a,r[a]),this.animationValues&&(this.animationValues[a]=r[a]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=ji(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ji(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!qa(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const a=r.animationValues||r.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,s=(null===n||void 0===n?void 0:n.z)||0;if((a||i||s)&&(r="translate3d(".concat(a,"px, ").concat(i,"px, ").concat(s,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:a,rotateY:i,skewX:s,skewY:o}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),a&&(r+="rotateX(".concat(a,"deg) ")),i&&(r+="rotateY(".concat(i,"deg) ")),s&&(r+="skewX(".concat(s,"deg) ")),o&&(r+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+="scale(".concat(o,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,a);n&&(i=n(a,i)),e.transform=i;const{x:s,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*s.origin,"% ").concat(100*o.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=a.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:e.opacity=r===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const u in za){if(void 0===a[u])continue;const{correct:t,applyTo:n,isCSSVariable:s}=za[u],o="none"===i?a[u]:t(a[u],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else s?this.options.visualElement.renderState.vars[u]=o:e[u]=o}this.options.layoutId&&(e.pointerEvents=r===this?ji(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Nc),this.root.sharedNodes.clear()}}}function vc(e){e.updateLayout()}function yc(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:a}=e.options,i=n.source!==e.layout.source;"size"===a?nl(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],a=rl(r);r.min=t[e].min,r.max=r.min+a}):Lc(a,n.layoutBox,t)&&nl(r=>{const a=i?n.measuredBox[r]:n.layoutBox[r],s=rl(t[r]);a.max=a.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};il(s,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?il(o,e.applyTransform(r,!0),n.measuredBox):il(o,t,n.layoutBox);const l=!ql(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:a,layout:i}=r;if(a&&i){const s={x:{min:0,max:0},y:{min:0,max:0}};ll(s,n.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};ll(o,t,i.layoutBox),$l(s,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function bc(e){Er.value&&hc.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function kc(e){e.clearSnapshot()}function Nc(e){e.clearMeasurements()}function Sc(e){e.isLayoutDirty=!1}function jc(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Cc(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ec(e){e.resolveTargetDelta()}function Tc(e){e.calcProjection()}function Ic(e){e.resetSkewAndRotation()}function Ac(e){e.removeLeadSnapshot()}function Oc(e,t,n){e.translate=Fa(t.translate,0,n),e.scale=Fa(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function _c(e,t,n,r){e.min=Fa(t.min,n.min,r),e.max=Fa(t.max,n.max,r)}function Rc(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Pc={duration:.45,ease:[.4,0,.1,1]},Mc=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Dc=Mc("applewebkit/")&&!Mc("chrome/")?Math.round:Sr;function Fc(e){e.min=Dc(e.min),e.max=Dc(e.max)}function Lc(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(Ql(t),Ql(n),.2)}function zc(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Bc=xc({attachResizeListener:(e,t)=>dl(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||(null===(e=document.body)||void 0===e?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||(null===(t=document.body)||void 0===t?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Uc={current:void 0},Wc=xc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Uc.current){const e=new Bc({});e.mount(window),e.setOptions({layoutScroll:!0}),Uc.current=e}return Uc.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Vc={pan:{Feature:class extends Hi{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(e){this.session=new vl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ml(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Rl(e),onStart:Rl(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Ir.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=fl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Hi{constructor(e){super(e),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new Ol(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.endPanSession()}},ProjectionNode:Wc,MeasureLayout:Fl}};function Hc(e,t,n){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let a=document;t&&(a=t.current);const i=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e).filter(e=>null!=e)}function Gc(e,t){const n=Hc(e),r=new AbortController;return[n,m(m({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function Kc(e){return!("touch"===e.pointerType||tl())}function qc(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const a=r["onHover"+n];a&&Ir.postRender(()=>a(t,pl(t)))}const Xc=(e,t)=>!!t&&(e===t||Xc(e,t.parentElement)),Yc=new WeakSet;function $c(e){return t=>{"Enter"===t.key&&e(t)}}function Qc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Jc(e){return hl(e)&&!tl()}function Zc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,a,i]=Gc(e,n),s=e=>{const r=e.currentTarget;if(!Jc(e))return;Yc.add(r);const i=t(r,e),s=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),Yc.has(r)&&Yc.delete(r),Jc(e)&&"function"===typeof i&&i(e,{success:t})},o=e=>{s(e,r===window||r===document||n.useGlobalTarget||Xc(r,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",o,a),window.addEventListener("pointercancel",l,a)};return r.forEach(e=>{(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,a),Kt(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=$c(()=>{if(Yc.has(n))return;Qc(n,"down");const e=$c(()=>{Qc(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Qc(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,a)),ul(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function eu(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const a=r["onTap"+("End"===n?"":n)];a&&Ir.postRender(()=>a(t,pl(t)))}const tu=["root"],nu=new WeakMap,ru=new WeakMap,au=e=>{const t=nu.get(e.target);t&&t(e)},iu=e=>{e.forEach(au)};function su(e,t,n){const r=function(e){let{root:t}=e,n=u(e,tu);const r=t||document;ru.has(r)||ru.set(r,{});const a=ru.get(r),i=JSON.stringify(n);return a[i]||(a[i]=new IntersectionObserver(iu,m({root:t},n))),a[i]}(t);return nu.set(e,n),r.observe(e),()=>{nu.delete(e),r.unobserve(e)}}const ou={some:0,all:1};const lu={inView:{Feature:class extends Hi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:a}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:ou[r]};return su(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Hi{mount(){const{current:e}=this.node;e&&(this.unmount=Zc(e,(e,t)=>(eu(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return eu(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Hi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Yje){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ns(dl(this.node.current,"focus",()=>this.onFocus()),dl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Hi{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,a,i]=Gc(e,n),s=e=>{if(!Kc(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const i=e=>{Kc(e)&&(r(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,a)};return r.forEach(e=>{e.addEventListener("pointerenter",s,a)}),i}(e,(e,t)=>(qc(this.node,t,"Start"),e=>qc(this.node,e,"End"))))}unmount(){}}}},cu={layout:{ProjectionNode:Wc,MeasureLayout:Fl}},uu=Vi(m(m(m(m({},Zo),lu),Vc),cu),ci);function du(e,t){return function(){return e.apply(t,arguments)}}const{toString:hu}=Object.prototype,{getPrototypeOf:pu}=Object,{iterator:fu,toStringTag:mu}=Symbol,gu=(xu=Object.create(null),e=>{const t=hu.call(e);return xu[t]||(xu[t]=t.slice(8,-1).toLowerCase())});var xu;const vu=e=>(e=e.toLowerCase(),t=>gu(t)===e),yu=e=>t=>typeof t===e,{isArray:bu}=Array,wu=yu("undefined");function ku(e){return null!==e&&!wu(e)&&null!==e.constructor&&!wu(e.constructor)&&ju(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Nu=vu("ArrayBuffer");const Su=yu("string"),ju=yu("function"),Cu=yu("number"),Eu=e=>null!==e&&"object"===typeof e,Tu=e=>{if("object"!==gu(e))return!1;const t=pu(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(mu in e)&&!(fu in e)},Iu=vu("Date"),Au=vu("File"),Ou=vu("Blob"),_u=vu("FileList"),Ru=vu("URLSearchParams"),[Pu,Mu,Du,Fu]=["ReadableStream","Request","Response","Headers"].map(vu);function Lu(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),bu(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(ku(e))return;const r=a?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let s;for(n=0;n<i;n++)s=r[n],t.call(null,e[s],s,e)}}function zu(e,t){if(ku(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const Bu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,Uu=e=>!wu(e)&&e!==Bu;const Wu=(Vu="undefined"!==typeof Uint8Array&&pu(Uint8Array),e=>Vu&&e instanceof Vu);var Vu;const Hu=vu("HTMLFormElement"),Gu=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Ku=vu("RegExp"),qu=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Lu(n,(n,a)=>{let i;!1!==(i=t(n,a,e))&&(r[a]=i||n)}),Object.defineProperties(e,r)};const Xu=vu("AsyncFunction"),Yu=($u="function"===typeof setImmediate,Qu=ju(Bu.postMessage),$u?setImmediate:Qu?((e,t)=>(Bu.addEventListener("message",n=>{let{source:r,data:a}=n;r===Bu&&a===e&&t.length&&t.shift()()},!1),n=>{t.push(n),Bu.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var $u,Qu;const Ju="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Bu):"undefined"!==typeof process&&process.nextTick||Yu,Zu={isArray:bu,isArrayBuffer:Nu,isBuffer:ku,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ju(e.append)&&("formdata"===(t=gu(e))||"object"===t&&ju(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Nu(e.buffer),t},isString:Su,isNumber:Cu,isBoolean:e=>!0===e||!1===e,isObject:Eu,isPlainObject:Tu,isEmptyObject:e=>{if(!Eu(e)||ku(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Yje){return!1}},isReadableStream:Pu,isRequest:Mu,isResponse:Du,isHeaders:Fu,isUndefined:wu,isDate:Iu,isFile:Au,isBlob:Ou,isRegExp:Ku,isFunction:ju,isStream:e=>Eu(e)&&ju(e.pipe),isURLSearchParams:Ru,isTypedArray:Wu,isFileList:_u,forEach:Lu,merge:function e(){const{caseless:t,skipUndefined:n}=Uu(this)&&this||{},r={},a=(a,i)=>{const s=t&&zu(r,i)||i;Tu(r[s])&&Tu(a)?r[s]=e(r[s],a):Tu(a)?r[s]=e({},a):bu(a)?r[s]=a.slice():n&&wu(a)||(r[s]=a)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Lu(arguments[i],a);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Lu(t,(t,r)=>{n&&ju(t)?e[r]=du(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,i,s;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)s=a[i],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&pu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:gu,kindOfTest:vu,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(bu(e))return e;let t=e.length;if(!Cu(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[fu]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Hu,hasOwnProperty:Gu,hasOwnProp:Gu,reduceDescriptors:qu,freezeMethods:e=>{qu(e,(t,n)=>{if(ju(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ju(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return bu(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:zu,global:Bu,isContextDefined:Uu,isSpecCompliantForm:function(e){return!!(e&&ju(e.append)&&"FormData"===e[mu]&&e[fu])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Eu(e)){if(t.indexOf(e)>=0)return;if(ku(e))return e;if(!("toJSON"in e)){t[r]=e;const a=bu(e)?[]:{};return Lu(e,(e,t)=>{const i=n(e,r+1);!wu(i)&&(a[t]=i)}),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:Xu,isThenable:e=>e&&(Eu(e)||ju(e))&&ju(e.then)&&ju(e.catch),setImmediate:Yu,asap:Ju,isIterable:e=>null!=e&&ju(e[fu])};function ed(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Zu.inherits(ed,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Zu.toJSONObject(this.config),code:this.code,status:this.status}}});const td=ed.prototype,nd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nd[e]={value:e}}),Object.defineProperties(ed,nd),Object.defineProperty(td,"isAxiosError",{value:!0}),ed.from=(e,t,n,r,a,i)=>{const s=Object.create(td);Zu.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return ed.call(s,o,l,n,r,a),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",i&&Object.assign(s,i),s};const rd=ed;function ad(e){return Zu.isPlainObject(e)||Zu.isArray(e)}function id(e){return Zu.endsWith(e,"[]")?e.slice(0,-2):e}function sd(e,t,n){return e?e.concat(t).map(function(e,t){return e=id(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const od=Zu.toFlatObject(Zu,{},null,function(e){return/^is[A-Z]/.test(e)});const ld=function(e,t,n){if(!Zu.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Zu.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Zu.isUndefined(t[e])})).metaTokens,a=n.visitor||c,i=n.dots,s=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Zu.isSpecCompliantForm(t);if(!Zu.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Zu.isDate(e))return e.toISOString();if(Zu.isBoolean(e))return e.toString();if(!o&&Zu.isBlob(e))throw new rd("Blob is not supported. Use a Buffer instead.");return Zu.isArrayBuffer(e)||Zu.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"===typeof e)if(Zu.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Zu.isArray(e)&&function(e){return Zu.isArray(e)&&!e.some(ad)}(e)||(Zu.isFileList(e)||Zu.endsWith(n,"[]"))&&(o=Zu.toArray(e)))return n=id(n),o.forEach(function(e,r){!Zu.isUndefined(e)&&null!==e&&t.append(!0===s?sd([n],r,i):null===s?n:n+"[]",l(e))}),!1;return!!ad(e)||(t.append(sd(a,n,i),l(e)),!1)}const u=[],d=Object.assign(od,{defaultVisitor:c,convertValue:l,isVisitable:ad});if(!Zu.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Zu.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Zu.forEach(n,function(n,i){!0===(!(Zu.isUndefined(n)||null===n)&&a.call(t,n,Zu.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t};function cd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ud(e,t){this._pairs=[],e&&ld(e,this,t)}const dd=ud.prototype;dd.append=function(e,t){this._pairs.push([e,t])},dd.toString=function(e){const t=e?function(t){return e.call(this,t,cd)}:cd;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const hd=ud;function pd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fd(e,t,n){if(!t)return e;const r=n&&n.encode||pd;Zu.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let i;if(i=a?a(t,n):Zu.isURLSearchParams(t)?t.toString():new hd(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const md=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Zu.forEach(this.handlers,function(t){null!==t&&e(t)})}},gd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xd={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:hd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},vd="undefined"!==typeof window&&"undefined"!==typeof document,yd="object"===typeof navigator&&navigator||void 0,bd=vd&&(!yd||["ReactNative","NativeScript","NS"].indexOf(yd.product)<0),wd="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,kd=vd&&window.location.href||"http://localhost",Nd=m(m({},e),xd);const Sd=function(e){function t(e,n,r,a){let i=e[a++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),o=a>=e.length;if(i=!i&&Zu.isArray(r)?r.length:i,o)return Zu.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&Zu.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],a)&&Zu.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let i;for(r=0;r<a;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(Zu.isFormData(e)&&Zu.isFunction(e.entries)){const n={};return Zu.forEachEntry(e,(e,r)=>{t(function(e){return Zu.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const jd={transitional:gd,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=Zu.isObject(e);a&&Zu.isHTMLForm(e)&&(e=new FormData(e));if(Zu.isFormData(e))return r?JSON.stringify(Sd(e)):e;if(Zu.isArrayBuffer(e)||Zu.isBuffer(e)||Zu.isStream(e)||Zu.isFile(e)||Zu.isBlob(e)||Zu.isReadableStream(e))return e;if(Zu.isArrayBufferView(e))return e.buffer;if(Zu.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ld(e,new Nd.classes.URLSearchParams,m({visitor:function(e,t,n,r){return Nd.isNode&&Zu.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Zu.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ld(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(Zu.isString(e))try{return(t||JSON.parse)(e),Zu.trim(e)}catch(Yje){if("SyntaxError"!==Yje.name)throw Yje}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||jd.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Zu.isResponse(e)||Zu.isReadableStream(e))return e;if(e&&Zu.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(Yje){if(n){if("SyntaxError"===Yje.name)throw rd.from(Yje,rd.ERR_BAD_RESPONSE,this,null,this.response);throw Yje}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nd.classes.FormData,Blob:Nd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Zu.forEach(["delete","get","head","post","put","patch"],e=>{jd.headers[e]={}});const Cd=jd,Ed=Zu.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Td=Symbol("internals");function Id(e){return e&&String(e).trim().toLowerCase()}function Ad(e){return!1===e||null==e?e:Zu.isArray(e)?e.map(Ad):String(e)}function Od(e,t,n,r,a){return Zu.isFunction(r)?r.call(this,t,n):(a&&(t=n),Zu.isString(t)?Zu.isString(r)?-1!==t.indexOf(r):Zu.isRegExp(r)?r.test(t):void 0:void 0)}class _d{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=Id(t);if(!a)throw new Error("header name must be a non-empty string");const i=Zu.findKey(r,a);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Ad(e))}const i=(e,t)=>Zu.forEach(e,(e,n)=>a(e,n,t));if(Zu.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Zu.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&Ed[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Zu.isObject(e)&&Zu.isIterable(e)){let n,r,a={};for(const t of e){if(!Zu.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?Zu.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=Id(e)){const n=Zu.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Zu.isFunction(t))return t.call(this,e,n);if(Zu.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Id(e)){const n=Zu.findKey(this,e);return!(!n||void 0===this[n]||t&&!Od(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=Id(e)){const a=Zu.findKey(n,e);!a||t&&!Od(0,n[a],a,t)||(delete n[a],r=!0)}}return Zu.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!Od(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return Zu.forEach(this,(r,a)=>{const i=Zu.findKey(n,a);if(i)return t[i]=Ad(r),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();s!==a&&delete t[a],t[s]=Ad(r),n[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Zu.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Zu.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Td]=this[Td]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Id(e);t[r]||(!function(e,t){const n=Zu.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[r]=!0)}return Zu.isArray(e)?e.forEach(r):r(e),this}}_d.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Zu.reduceDescriptors(_d.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Zu.freezeMethods(_d);const Rd=_d;function Pd(e,t){const n=this||Cd,r=t||n,a=Rd.from(r.headers);let i=r.data;return Zu.forEach(e,function(e){i=e.call(n,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Md(e){return!(!e||!e.__CANCEL__)}function Dd(e,t,n){rd.call(this,null==e?"canceled":e,rd.ERR_CANCELED,t,n),this.name="CanceledError"}Zu.inherits(Dd,rd,{__CANCEL__:!0});const Fd=Dd;function Ld(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new rd("Request failed with status code "+n.status,[rd.ERR_BAD_REQUEST,rd.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const zd=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,i=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];a||(a=l),n[i]=o,r[i]=l;let u=s,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Bd=function(e,t){let n,r,a=0,i=1e3/t;const s=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=i?s(l,e):(n=l,r||(r=setTimeout(()=>{r=null,s(n)},i-t)))},()=>n&&s(n)]},Ud=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=zd(50,250);return Bd(n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,o=i-r,l=a(o);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},Wd=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Vd=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zu.asap(()=>e(...n))},Hd=Nd.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Nd.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Nd.origin),Nd.navigator&&/(msie|trident)/i.test(Nd.navigator.userAgent)):()=>!0,Gd=Nd.hasStandardBrowserEnv?{write(e,t,n,r,a,i,s){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];Zu.isNumber(n)&&o.push("expires=".concat(new Date(n).toUTCString())),Zu.isString(r)&&o.push("path=".concat(r)),Zu.isString(a)&&o.push("domain=".concat(a)),!0===i&&o.push("secure"),Zu.isString(s)&&o.push("SameSite=".concat(s)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Kd(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const qd=e=>e instanceof Rd?m({},e):e;function Xd(e,t){t=t||{};const n={};function r(e,t,n,r){return Zu.isPlainObject(e)&&Zu.isPlainObject(t)?Zu.merge.call({caseless:r},e,t):Zu.isPlainObject(t)?Zu.merge({},t):Zu.isArray(t)?t.slice():t}function a(e,t,n,a){return Zu.isUndefined(t)?Zu.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function i(e,t){if(!Zu.isUndefined(t))return r(void 0,t)}function s(e,t){return Zu.isUndefined(t)?Zu.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,a,i){return i in t?r(n,a):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>a(qd(e),qd(t),0,!0)};return Zu.forEach(Object.keys(m(m({},e),t)),function(r){const i=l[r]||a,s=i(e[r],t[r],r);Zu.isUndefined(s)&&i!==o||(n[r]=s)}),n}const Yd=e=>{const t=Xd({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:i,headers:s,auth:o}=t;if(t.headers=s=Rd.from(s),t.url=fd(Kd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Zu.isFormData(n))if(Nd.hasStandardBrowserEnv||Nd.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(Zu.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&s.set(n,r)})}if(Nd.hasStandardBrowserEnv&&(r&&Zu.isFunction(r)&&(r=r(t)),r||!1!==r&&Hd(t.url))){const e=a&&i&&Gd.read(i);e&&s.set(a,e)}return t},$d="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Yd(e);let a=r.data;const i=Rd.from(r.headers).normalize();let s,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Rd.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ld(function(e){t(e),f()},function(e){n(e),f()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new rd("Request aborted",rd.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const r=t&&t.message?t.message:"Network Error",a=new rd(r,rd.ERR_NETWORK,e,m);a.event=t||null,n(a),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||gd;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new rd(t,a.clarifyTimeoutError?rd.ETIMEDOUT:rd.ECONNABORTED,e,m)),m=null},void 0===a&&i.setContentType(null),"setRequestHeader"in m&&Zu.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),Zu.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,u]=Ud(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=Ud(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new Fd(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);x&&-1===Nd.protocols.indexOf(x)?n(new rd("Unsupported protocol "+x+":",rd.ERR_BAD_REQUEST,e)):m.send(a||null)})},Qd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof rd?t:new Fd(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,a(new rd("timeout ".concat(t," of ms exceeded"),rd.ETIMEDOUT))},t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=r;return o.unsubscribe=()=>Zu.asap(s),o}};function Jd(e,t){this.v=e,this.k=t}function Zd(e){return function(){return new eh(e.apply(this,arguments))}}function eh(e){var t,n;function r(t,n){try{var i=e[t](n),s=i.value,o=s instanceof Jd;Promise.resolve(o?s.v:s).then(function(n){if(o){var l="return"===t?"return":"next";if(!s.k||n.done)return r(l,n);n=e[l](n).value}a(i.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise(function(i,s){var o={key:e,arg:a,resolve:i,reject:s,next:null};n?n=n.next=o:(t=n=o,r(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function th(e){return new Jd(e,0)}function nh(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new Jd(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function rh(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new ah(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function ah(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return ah=function(e){this.s=e,this.n=e.next},ah.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ah(e)}eh.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},eh.prototype.next=function(e){return this._invoke("next",e)},eh.prototype.throw=function(e){return this._invoke("throw",e)},eh.prototype.return=function(e){return this._invoke("return",e)};const ih=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},sh=function(){var e=Zd(function*(e,t){var n,r=!1,a=!1;try{for(var i,s=rh(oh(e));r=!(i=yield th(s.next())).done;r=!1){const e=i.value;yield*nh(rh(ih(e,t)))}}catch(o){a=!0,n=o}finally{try{r&&null!=s.return&&(yield th(s.return()))}finally{if(a)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),oh=function(){var e=Zd(function*(e){if(e[Symbol.asyncIterator])return void(yield*nh(rh(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield th(t.read());if(e)break;yield n}}finally{yield th(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),lh=(e,t,n,r)=>{const a=sh(e,t);let i,s=0,o=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return o(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:ch}=Zu,uh=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Zu.global),{ReadableStream:dh,TextEncoder:hh}=Zu.global,ph=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Yje){return!1}},fh=e=>{e=Zu.merge.call({skipUndefined:!0},uh,e);const{fetch:t,Request:n,Response:r}=e,a=t?ch(t):"function"===typeof fetch,i=ch(n),s=ch(r);if(!a)return!1;const o=a&&ch(dh),l=a&&("function"===typeof hh?(c=new hh,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const u=i&&o&&ph(()=>{let e=!1;const t=new n(Nd.origin,{body:new dh,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=s&&o&&ph(()=>Zu.isReadableStream(new r("").body)),h={stream:d&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new rd("Response type '".concat(e,"' is not supported"),rd.ERR_NOT_SUPPORT,n)})});const p=async(e,t)=>{const r=Zu.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Zu.isBlob(e))return e.size;if(Zu.isSpecCompliantForm(e)){const t=new n(Nd.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Zu.isArrayBufferView(e)||Zu.isArrayBuffer(e)?e.byteLength:(Zu.isURLSearchParams(e)&&(e+=""),Zu.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:a,method:s,data:o,signal:l,cancelToken:c,timeout:f,onDownloadProgress:g,onUploadProgress:x,responseType:v,headers:y,withCredentials:b="same-origin",fetchOptions:w}=Yd(e),k=t||fetch;v=v?(v+"").toLowerCase():"text";let N=Qd([l,c&&c.toAbortSignal()],f),S=null;const j=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let C;try{if(x&&u&&"get"!==s&&"head"!==s&&0!==(C=await p(y,o))){let e,t=new n(a,{method:"POST",body:o,duplex:"half"});if(Zu.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Wd(C,Ud(Vd(x)));o=lh(t.body,65536,e,n)}}Zu.isString(b)||(b=b?"include":"omit");const t=i&&"credentials"in n.prototype,l=m(m({},w),{},{signal:N,method:s.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?b:void 0});S=i&&new n(a,l);let c=await(i?k(S,w):k(a,l));const f=d&&("stream"===v||"response"===v);if(d&&(g||f&&j)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Zu.toFiniteNumber(c.headers.get("content-length")),[n,a]=g&&Wd(t,Ud(Vd(g),!0))||[];c=new r(lh(c.body,65536,n,()=>{a&&a(),j&&j()}),e)}v=v||"text";let E=await h[Zu.findKey(h,v)||"text"](c,e);return!f&&j&&j(),await new Promise((t,n)=>{Ld(t,n,{data:E,headers:Rd.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:S})})}catch(E){if(j&&j(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new rd("Network Error",rd.ERR_NETWORK,e,S),{cause:E.cause||E});throw rd.from(E,E&&E.code,e,S)}}},mh=new Map,gh=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:a}=t,i=[r,a,n];let s,o,l=i.length,c=mh;for(;l--;)s=i[l],o=c.get(s),void 0===o&&c.set(s,o=l?new Map:fh(t)),c=o;return o},xh=(gh(),{http:null,xhr:$d,fetch:{get:gh}});Zu.forEach(xh,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Yje){}Object.defineProperty(e,"adapterName",{value:t})}});const vh=e=>"- ".concat(e),yh=e=>Zu.isFunction(e)||null===e||!1===e;const bh={getAdapter:function(e,t){e=Zu.isArray(e)?e:[e];const{length:n}=e;let r,a;const i={};for(let s=0;s<n;s++){let n;if(r=e[s],a=r,!yh(r)&&(a=xh[(n=String(r)).toLowerCase()],void 0===a))throw new rd("Unknown adapter '".concat(n,"'"));if(a&&(Zu.isFunction(a)||(a=a.get(t))))break;i[n||"#"+s]=a}if(!a){const e=Object.entries(i).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(vh).join("\n"):" "+vh(e[0]):"as no adapter specified";throw new rd("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a},adapters:xh};function wh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fd(null,e)}function kh(e){wh(e),e.headers=Rd.from(e.headers),e.data=Pd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return bh.getAdapter(e.adapter||Cd.adapter,e)(e).then(function(t){return wh(e),t.data=Pd.call(e,e.transformResponse,t),t.headers=Rd.from(t.headers),t},function(t){return Md(t)||(wh(e),t&&t.response&&(t.response.data=Pd.call(e,e.transformResponse,t.response),t.response.headers=Rd.from(t.response.headers))),Promise.reject(t)})}const Nh="1.13.2",Sh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Sh[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const jh={};Sh.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Nh+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,i)=>{if(!1===e)throw new rd(r(a," has been removed"+(t?" in "+t:"")),rd.ERR_DEPRECATED);return t&&!jh[a]&&(jh[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,i)}},Sh.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ch={assertOptions:function(e,t,n){if("object"!==typeof e)throw new rd("options must be an object",rd.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const i=r[a],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new rd("option "+i+" must be "+n,rd.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new rd("Unknown option "+i,rd.ERR_BAD_OPTION)}},validators:Sh},Eh=Ch.validators;class Th{constructor(e){this.defaults=e||{},this.interceptors={request:new md,response:new md}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Yje){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Xd(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&Ch.assertOptions(n,{silentJSONParsing:Eh.transitional(Eh.boolean),forcedJSONParsing:Eh.transitional(Eh.boolean),clarifyTimeoutError:Eh.transitional(Eh.boolean)},!1),null!=r&&(Zu.isFunction(r)?t.paramsSerializer={serialize:r}:Ch.assertOptions(r,{encode:Eh.function,serialize:Eh.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ch.assertOptions(t,{baseUrl:Eh.spelling("baseURL"),withXsrfToken:Eh.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&Zu.merge(a.common,a[t.method]);a&&Zu.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Rd.concat(i,a);const s=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[kh.bind(this),void 0];for(e.unshift(...s),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=kh.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return fd(Kd((e=Xd(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Zu.forEach(["delete","get","head","options"],function(e){Th.prototype[e]=function(t,n){return this.request(Xd(n||{},{method:e,url:t,data:(n||{}).data}))}}),Zu.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,a){return this.request(Xd(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Th.prototype[e]=t(),Th.prototype[e+"Form"]=t(!0)});const Ih=Th;class Ah{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,a){n.reason||(n.reason=new Fd(e,r,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Ah(function(t){e=t});return{token:t,cancel:e}}}const Oh=Ah;const _h={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(_h).forEach(e=>{let[t,n]=e;_h[n]=t});const Rh=_h;const Ph=function e(t){const n=new Ih(t),r=du(Ih.prototype.request,n);return Zu.extend(r,Ih.prototype,n,{allOwnKeys:!0}),Zu.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Xd(t,n))},r}(Cd);Ph.Axios=Ih,Ph.CanceledError=Fd,Ph.CancelToken=Oh,Ph.isCancel=Md,Ph.VERSION=Nh,Ph.toFormData=ld,Ph.AxiosError=rd,Ph.Cancel=Ph.CanceledError,Ph.all=function(e){return Promise.all(e)},Ph.spread=function(e){return function(t){return e.apply(null,t)}},Ph.isAxiosError=function(e){return Zu.isObject(e)&&!0===e.isAxiosError},Ph.mergeConfig=Xd,Ph.AxiosHeaders=Rd,Ph.formToJSON=e=>Sd(Zu.isHTMLForm(e)?new FormData(e):e),Ph.getAdapter=bh.getAdapter,Ph.HttpStatusCode=Rh,Ph.default=Ph;const Mh=Ph,Dh="".concat("https://srv1304213.hstgr.cloud/api","/api"),Fh=(0,o.createContext)(null),Lh=()=>{const e=(0,o.useContext)(Fh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},zh=e=>{let{children:t}=e;const[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)(!0),[s,l]=(0,o.useState)(!1),c=(0,o.useCallback)(async()=>{try{if("true"===localStorage.getItem("oracleiq_guest_mode"))return r({id:"guest",name:"Guest User",email:"guest@oracleiqtrader.com",isGuest:!0}),l(!0),void i(!1);const e=await Mh.get("".concat(Dh,"/auth/me"),{withCredentials:!0});r(e.data),l(!0)}catch(e){r(null),l(!1)}finally{i(!1)}},[]);(0,o.useEffect)(()=>{c()},[c]);const u={user:n,isLoading:a,isAuthenticated:s,loginWithGoogle:()=>{localStorage.setItem("oracleiq_guest_mode","true"),r({id:"guest",name:"Guest User",email:"guest@oracleiqtrader.com",isGuest:!0}),l(!0)},loginAsGuest:()=>{localStorage.setItem("oracleiq_guest_mode","true"),r({id:"guest",name:"Guest User",email:"guest@oracleiqtrader.com",isGuest:!0}),l(!0)},logout:async()=>{try{localStorage.removeItem("oracleiq_guest_mode"),await Mh.post("".concat(Dh,"/auth/logout"),{},{withCredentials:!0})}catch(e){console.error("Logout error:",e)}finally{r(null),l(!1)}},handleAuthCallback:async e=>{try{const t=await Mh.post("".concat(Dh,"/auth/session"),{session_id:e},{withCredentials:!0});return r(t.data.user),l(!0),t.data.user}catch(t){throw console.error("Auth callback error:",t),t}},checkAuth:c};return(0,zt.jsx)(Fh.Provider,{value:u,children:t})},Bh=(0,o.createContext)(),Uh={dark:{id:"dark",name:"Dark",background:"bg-black",surface:"bg-black/40",text:"text-white",textMuted:"text-slate-400",border:"border-white/10",accent:"teal",cssVars:{"--bg-primary":"#000000","--bg-secondary":"#0a0a0a","--bg-surface":"rgba(0,0,0,0.4)","--text-primary":"#ffffff","--text-secondary":"#94a3b8","--border-color":"rgba(255,255,255,0.1)","--accent-color":"#14b8a6","--accent-glow":"rgba(20,184,166,0.3)"}},light:{id:"light",name:"Light",background:"bg-slate-100",surface:"bg-white/80",text:"text-slate-900",textMuted:"text-slate-600",border:"border-slate-200",accent:"teal",cssVars:{"--bg-primary":"#f1f5f9","--bg-secondary":"#ffffff","--bg-surface":"rgba(255,255,255,0.8)","--text-primary":"#0f172a","--text-secondary":"#475569","--border-color":"rgba(0,0,0,0.1)","--accent-color":"#0d9488","--accent-glow":"rgba(13,148,136,0.3)"}},matrix:{id:"matrix",name:"Matrix",background:"bg-black",surface:"bg-black/60",text:"text-green-400",textMuted:"text-green-600",border:"border-green-500/20",accent:"green",cssVars:{"--bg-primary":"#000000","--bg-secondary":"#001100","--bg-surface":"rgba(0,0,0,0.6)","--text-primary":"#4ade80","--text-secondary":"#16a34a","--border-color":"rgba(34,197,94,0.2)","--accent-color":"#22c55e","--accent-glow":"rgba(34,197,94,0.4)"}}},Wh=e=>{let{children:t}=e;const[n,r]=(0,o.useState)(()=>localStorage.getItem("cognitive-oracle-theme")||"dark"),a=Uh[n]||Uh.dark;(0,o.useEffect)(()=>{localStorage.setItem("cognitive-oracle-theme",n);const e=document.documentElement;Object.entries(a.cssVars).forEach(t=>{let[n,r]=t;e.style.setProperty(n,r)}),document.body.className="theme-".concat(n)},[n,a]);return(0,zt.jsx)(Bh.Provider,{value:{theme:n,currentTheme:a,setTheme:e=>{Uh[e]&&r(e)},toggleTheme:()=>{r(e=>{const t=Object.keys(Uh),n=t.indexOf(e);return t[(n+1)%t.length]})},themes:Uh},children:t})},Vh=e=>"string"===typeof e,Hh=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},Gh=e=>null==e?"":""+e,Kh=/###/g,qh=e=>e&&e.indexOf("###")>-1?e.replace(Kh,"."):e,Xh=e=>!e||Vh(e),Yh=(e,t,n)=>{const r=Vh(t)?t.split("."):t;let a=0;for(;a<r.length-1;){if(Xh(e))return{};const t=qh(r[a]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return Xh(e)?{}:{obj:e,k:qh(r[a])}},$h=(e,t,n)=>{const{obj:r,k:a}=Yh(e,t,Object);if(void 0!==r||1===t.length)return void(r[a]=n);let i=t[t.length-1],s=t.slice(0,t.length-1),o=Yh(e,s,Object);for(;void 0===o.obj&&s.length;){var l;i="".concat(s[s.length-1],".").concat(i),s=s.slice(0,s.length-1),o=Yh(e,s,Object),null!==(l=o)&&void 0!==l&&l.obj&&"undefined"!==typeof o.obj["".concat(o.k,".").concat(i)]&&(o.obj=void 0)}o.obj["".concat(o.k,".").concat(i)]=n},Qh=(e,t)=>{const{obj:n,k:r}=Yh(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Jh=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?Vh(e[r])||e[r]instanceof String||Vh(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Jh(e[r],t[r],n):e[r]=t[r]);return e},Zh=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ep={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const tp=e=>Vh(e)?e.replace(/[&<>"'\/]/g,e=>ep[e]):e;const np=[" ",",","?","!",";"],rp=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),ap=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(n);let a=e;for(let i=0;i<r.length;){if(!a||"object"!==typeof a)return;let e,t="";for(let s=i;s<r.length;++s)if(s!==i&&(t+=n),t+=r[s],e=a[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<r.length-1)continue;i+=s-i+1;break}a=e}return a},ip=e=>null===e||void 0===e?void 0:e.replace("_","-"),sp={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null===(n=console)||void 0===n||null===(n=n[e])||void 0===n||null===(r=n.apply)||void 0===r||r.call(n,console,t)}};class op{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||sp,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(Vh(e[0])&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new op(this.logger,m(m({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new op(this.logger,e)}}var lp=new op;class cp{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,r]=e;for(let a=0;a<r;a++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[r,a]=t;for(let i=0;i<a;i++)r.apply(r,[e,...n])})}}}class up extends cp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var r;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,s=void 0!==a.ignoreJSONStructure?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Vh(n)&&i?o.push(...n.split(i)):o.push(n)));const l=Qh(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!l&&s&&Vh(n)?ap(null===(r=this.data)||void 0===r||null===(r=r[e])||void 0===r?void 0:r[t],n,i):l}addResource(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const i=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(s=e.split("."),r=t,t=s[1]),this.addNamespaces(t),$h(this.data,s,r),a.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const a in n)(Vh(n[a])||Array.isArray(n[a]))&&this.addResource(e,t,a,n[a],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),r=n,n=t,t=s[1]),this.addNamespaces(t);let o=Qh(this.data,s)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Jh(o,n,a):o=m(m({},o),n),$h(this.data,s,o),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var dp={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,a){return e.forEach(e=>{var i,s;t=null!==(i=null===(s=this.processors[e])||void 0===s?void 0:s.process(t,n,r,a))&&void 0!==i?i:t}),t}};const hp=Symbol("i18next/PATH_KEY");function pp(e,t){var n;const{[hp]:r}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(r,a)=>{var i,s;return null===(i=n)||void 0===i||null===(s=i.revoke)||void 0===s||s.call(i),a===hp?e:(e.push(a),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return r.join(null!==(n=null===t||void 0===t?void 0:t.keySeparator)&&void 0!==n?n:".")}const fp={},mp=e=>!Vh(e)&&"boolean"!==typeof e&&"number"!==typeof e;class gp extends cp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=lp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t=m({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});if(null==e)return!1;const n=this.resolve(e,t);if(void 0===(null===n||void 0===n?void 0:n.res))return!1;const r=mp(n.res);return!1!==t.returnObjects||!r}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=np.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const a=rp.getRegExp("(".concat(r.map(e=>"?"===e?"\\?":e).join("|"),")"));let i=!a.test(e);if(!i){const t=e.indexOf(n);t>0&&!a.test(e.substring(0,t))&&(i=!0)}return i})(e,n,r);if(i&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Vh(a)?[a]:a};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(a=i.shift()),e=i.join(r)}return{key:e,namespaces:Vh(a)?[a]:a}}translate(e,t,n){let r="object"===typeof t?m({},t):t;if("object"!==typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof r&&(r=m({},r)),r||(r={}),null==e)return"";"function"===typeof e&&(e=pp(e,m(m({},this.options),r))),Array.isArray(e)||(e=[String(e)]);const a=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(e[e.length-1],r),l=o[o.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null===u||void 0===u?void 0:u.toLowerCase()))return d?a?{res:"".concat(l).concat(c).concat(s),usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:"".concat(l).concat(c).concat(s):a?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:s;const h=this.resolve(e,r);let p=null===h||void 0===h?void 0:h.res;const f=(null===h||void 0===h?void 0:h.usedKey)||s,g=(null===h||void 0===h?void 0:h.exactUsedKey)||s,x=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==r.count&&!Vh(r.count),b=gp.hasDefaultValue(r),w=y?this.pluralResolver.getSuffix(u,r.count,r):"",k=r.ordinal&&y?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",N=y&&!r.ordinal&&0===r.count,S=N&&r["defaultValue".concat(this.options.pluralSeparator,"zero")]||r["defaultValue".concat(w)]||r["defaultValue".concat(k)]||r.defaultValue;let j=p;v&&!p&&b&&(j=S);const C=mp(j),E=Object.prototype.toString.apply(j);if(!(v&&j&&C&&["[object Number]","[object Function]","[object RegExp]"].indexOf(E)<0)||Vh(x)&&Array.isArray(j))if(v&&Vh(x)&&Array.isArray(p))p=p.join(x),p&&(p=this.extendTranslation(p,e,r,n));else{let t=!1,a=!1;!this.isValidLookup(p)&&b&&(t=!0,p=S),this.isValidLookup(p)||(a=!0,p=s);const o=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:p,d=b&&S!==p&&this.options.updateMissing;if(a||t||d){if(this.logger.log(d?"updateKey":"missingKey",u,l,s,d?S:p),i){const e=this.resolve(s,m(m({},r),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var a;const i=b&&n!==p?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,d,r):null!==(a=this.backendConnector)&&void 0!==a&&a.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,d,r),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);N&&r["defaultValue".concat(this.options.pluralSeparator,"zero")]&&t.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&t.push("".concat(this.options.pluralSeparator,"zero")),t.forEach(t=>{n([e],s+t,r["defaultValue".concat(t)]||S)})}):n(e,s,S))}p=this.extendTranslation(p,e,r,h,n),a&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(l).concat(c).concat(s)),(a||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l).concat(c).concat(s):s,t?p:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,j,m(m({},r),{},{ns:o})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return a?(h.res=e,h.usedParams=this.getUsedParamsDetails(r),h):e}if(i){const e=Array.isArray(j),t=e?[]:{},n=e?g:f;for(const a in j)if(Object.prototype.hasOwnProperty.call(j,a)){const e="".concat(n).concat(i).concat(a);t[a]=b&&!p?this.translate(e,m(m({},r),{},{defaultValue:mp(S)?S[a]:void 0},{joinArrays:!1,ns:o})):this.translate(e,m(m({},r),{joinArrays:!1,ns:o})),t[a]===e&&(t[a]=j[a])}p=t}}return a?(h.res=p,h.usedParams=this.getUsedParamsDetails(r),h):p}extendTranslation(e,t,n,r,a){var i,s=this;if(null!==(i=this.i18nFormat)&&void 0!==i&&i.parse)e=this.i18nFormat.parse(e,m(m({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){var o;n.interpolation&&this.interpolator.init(m(m({},n),{interpolation:m(m({},this.options.interpolation),n.interpolation)}));const i=Vh(e)&&(void 0!==(null===n||void 0===n||null===(o=n.interpolation)||void 0===o?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(i){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=n.replace&&!Vh(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=m(m({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language||r.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(null===a||void 0===a?void 0:a[0])!==r[0]||n.context?s.translate(...r,t):(s.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Vh(l)?[l]:l;return null!=e&&null!==c&&void 0!==c&&c.length&&!1!==n.applyPostProcessor&&(e=dp.handle(c,e,t,this.options&&this.options.postProcessPassResolved?m({i18nResolved:m(m({},r),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,n,r,a,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vh(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,s),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==s.count&&!Vh(s.count),d=u&&!s.ordinal&&0===s.count,h=void 0!==s.context&&(Vh(s.context)||"number"===typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach(e=>{var o,c;this.isValidLookup(t)||(i=e,fp["".concat(p[0],"-").concat(e)]||null===(o=this.utils)||void 0===o||!o.hasLoadedNamespace||null!==(c=this.utils)&&void 0!==c&&c.hasLoadedNamespace(i)||(fp["".concat(p[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(n=>{var i;if(this.isValidLookup(t))return;a=n;const o=[l];if(null!==(i=this.i18nFormat)&&void 0!==i&&i.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,s);else{let e;u&&(e=this.pluralResolver.getSuffix(n,s.count,s));const t="".concat(this.options.pluralSeparator,"zero"),r="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(u&&(s.ordinal&&0===e.indexOf(r)&&o.push(l+e.replace(r,this.options.pluralSeparator)),o.push(l+e),d&&o.push(l+t)),h){const n="".concat(l).concat(this.options.contextSeparator||"_").concat(s.context);o.push(n),u&&(s.ordinal&&0===e.indexOf(r)&&o.push(n+e.replace(r,this.options.pluralSeparator)),o.push(n+e),d&&o.push(n+t))}}let c;for(;c=o.pop();)this.isValidLookup(t)||(r=c,t=this.getResource(n,e,c,s))}))})}),{res:t,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:i}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){var r;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!==(r=this.i18nFormat)&&void 0!==r&&r.getResource?this.i18nFormat.getResource(e,t,n,a):this.resourceStore.getResource(e,t,n,a)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Vh(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=m(m({},this.options.interpolation.defaultVariables),r)),!n){r=m({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class xp{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=lp.create("languageUtils")}getScriptPartFromCode(e){if(!(e=ip(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=ip(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Vh(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(Yje){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),Vh(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],a=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return Vh(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):Vh(e)&&a(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&a(this.formatLanguageCode(e))}),r}}const vp={zero:0,one:1,two:2,few:3,many:4,other:5},yp={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class bp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=lp.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ip("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let i;try{i=new Intl.PluralRules(n,{type:r})}catch(s){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),yp;if(!e.match(/-|_/))return yp;const n=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(n,t)}return this.pluralRulesCache[a]=i,i}needsPlural(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(null===(t=r)||void 0===t?void 0:t.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>"".concat(t).concat(e))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>vp[e]-vp[t]).map(e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(r.select(t)):(this.logger.warn("no plural rule found for: ".concat(e)),this.getSuffix("dev",t,n))}}const wp=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,n)=>{const r=Qh(e,n);return void 0!==r?r:Qh(t,n)})(e,t,n);return!i&&a&&Vh(n)&&(i=ap(e,n,r),void 0===i&&(i=ap(t,n,r))),i},kp=e=>e.replace(/\$/g,"$$$$");class Np{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=lp.create("interpolator"),this.options=t,this.format=(null===t||void 0===t||null===(e=t.interpolation)||void 0===e?void 0:e.format)||(e=>e),this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:a,prefixEscaped:i,suffix:s,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:x}=e.interpolation;this.escape=void 0!==t?t:tp,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=a?Zh(a):i||"{{",this.suffix=s?Zh(s):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Zh(d):h||Zh("$t("),this.nestingSuffix=p?Zh(p):f||Zh(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==x&&x,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null===e||void 0===e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"((?:[^()\"']+|\"[^\"]*\"|'[^']*'|\\((?:[^()]|\"[^\"]*\"|'[^']*')*\\))*?)").concat(this.nestingSuffix))}interpolate(e,t,n,r){var a;let i,s,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const a=wp(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(a,void 0,n,m(m(m({},r),t),{},{interpolationkey:e})):a}const a=e.split(this.formatSeparator),i=a.shift().trim(),s=a.join(this.formatSeparator).trim();return this.format(wp(t,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,m(m(m({},r),t),{},{interpolationkey:i}))};this.resetRegExp();const u=(null===r||void 0===r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=void 0!==(null===r||void 0===r||null===(a=r.interpolation)||void 0===a?void 0:a.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>kp(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?kp(this.escape(e)):kp(e)}].forEach(t=>{for(o=0;i=t.regex.exec(e);){const n=i[1].trim();if(s=c(n),void 0===s)if("function"===typeof u){const t=u(e,i,r);s=Vh(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))s="";else{if(d){s=i[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),s=""}else Vh(s)||this.useRawValueToEscape||(s=Gh(s));const a=t.safeValue(s);if(e=e.replace(i[0],a),d?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(e,t)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const i=e.split(new RegExp("".concat(r,"[ ]*{")));let s="{".concat(i[1]);e=i[0],s=this.interpolate(s,a);const o=s.match(/'/g),l=s.match(/"/g);((null!==(n=null===o||void 0===o?void 0:o.length)&&void 0!==n?n:0)%2===0&&!l||l.length%2!==0)&&(s=s.replace(/'/g,'"'));try{a=JSON.parse(s),t&&(a=m(m({},t),a))}catch(Yje){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),Yje),"".concat(e).concat(r).concat(s)}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];a=m({},i),a=a.replace&&!Vh(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const l=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(-1!==l&&(o=n[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),n[1]=n[1].slice(0,l)),r=t(s.call(this,n[1].trim(),a),a),r&&n[0]===e&&!Vh(r))return r;Vh(r)||(r=Gh(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),o.length&&(r=o.reduce((e,t)=>this.format(e,t,i.lng,m(m({},i),{},{interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const Sp=e=>{const t={};return(n,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i=m(m({},i),{},{[a.interpolationkey]:void 0}));const s=r+JSON.stringify(i);let o=t[s];return o||(o=e(ip(r),a),t[s]=o),o(n)}},jp=e=>(t,n,r)=>e(ip(n),r)(t);class Cp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=lp.create("formatter"),this.options=e,this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Sp:jp;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,m({},t));return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,m(m({},t),{},{style:"currency"}));return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,m({},t));return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,m({},t));return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,m({},t));return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Sp(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(e=>e.indexOf(")")>-1)){const e=a.findIndex(e=>e.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,e)].join(this.formatSeparator)}const i=a.reduce((e,t)=>{const{formatName:a,formatOptions:i}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),a=r.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=a),"false"===a&&(n[i]=!1),"true"===a&&(n[i]=!0),isNaN(a)||(n[i]=parseInt(a,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[a]){let t=e;try{var s;const o=(null===r||void 0===r||null===(s=r.formatParams)||void 0===s?void 0:s[r.interpolationkey])||{},l=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[a](e,l,m(m(m({},i),r),o))}catch(o){this.logger.warn(o)}return t}return this.logger.warn("there was no format function for ".concat(a)),e},e);return i}}class Ep extends cp{constructor(e,t,n){var r,a;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=lp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],null===(r=this.backend)||void 0===r||null===(a=r.init)||void 0===a||a.call(r,n,i.backend,i)}queueLoad(e,t,n,r){const a={},i={},s={},o={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const s="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===i[s]&&(i[s]=!0):(this.state[s]=1,r=!1,void 0===i[s]&&(i[s]=!0),void 0===a[s]&&(a[s]=!0),void 0===o[t]&&(o[t]=!0)))}),r||(s[e]=!0)}),(Object.keys(a).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(i),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),a=r[0],i=r[1];t&&this.emit("failedLoading",a,i,t),!t&&n&&this.store.addResourceBundle(a,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:a}=Yh(e,t,Object);r[a]=r[a]||[],r[a].push(n)})(n.loaded,[a],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===s[e][t]&&(s[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:a,callback:i});this.readingCalls++;const s=(s,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&o&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*a,i)},a):i(s,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,s);try{const n=o(e,t);n&&"function"===typeof n.then?n.then(e=>s(null,e)).catch(s):s(null,n)}catch(l){s(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Vh(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Vh(t)&&(t=[t]);const a=this.queueLoad(e,t,n,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],a=n[1];this.read(r,a,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(a," for language ").concat(r," failed"),n),!n&&i&&this.logger.log("".concat(t,"loaded namespace ").concat(a," for language ").concat(r),i),this.loaded(e,n,i)})}saveMissing(e,t,n,r,a){var i,s,o;let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(null===(i=this.services)||void 0===i||null===(i=i.utils)||void 0===i||!i.hasLoadedNamespace||null!==(s=this.services)&&void 0!==s&&null!==(s=s.utils)&&void 0!==s&&s.hasLoadedNamespace(t)){if(void 0!==n&&null!==n&&""!==n){if(null!==(o=this.backend)&&void 0!==o&&o.create){const i=m(m({},l),{},{isUpdate:a}),s=this.backend.create.bind(this.backend);if(s.length<6)try{let a;a=5===s.length?s(e,t,n,r,i):s(e,t,n,r),a&&"function"===typeof a.then?a.then(e=>c(null,e)).catch(c):c(null,a)}catch(u){c(u)}else s(e,t,n,r,c,i)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}else this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Tp=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),Vh(e[1])&&(t.defaultValue=e[1]),Vh(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ip=e=>{var t,n;return Vh(e.ns)&&(e.ns=[e.ns]),Vh(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Vh(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null===(t=e.supportedLngs)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},Ap=()=>{};class Op extends cp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Ip(e),this.services={},this.logger=lp,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),null==t.defaultNS&&t.ns&&(Vh(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=Tp();this.options=m(m(m({},r),this.options),Ip(t)),this.options.interpolation=m(m({},r.interpolation),this.options.interpolation),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),"function"!==typeof this.options.overloadTranslationOptionHandler&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),!0===this.options.debug&&"undefined"!==typeof console&&console.warn("i18next is maintained with support from locize.com \u2014 consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const a=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?lp.init(a(this.modules.logger),this.options):lp.init(null,this.options),t=this.modules.formatter?this.modules.formatter:Cp;const n=new xp(this.options);this.store=new up(this.options.resources,this.options);const i=this.services;i.logger=lp,i.resourceStore=this.store,i.languageUtils=n,i.pluralResolver=new bp(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(i.formatter=a(t),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new Np(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Ep(a(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit(t,...r)}),this.modules.languageDetector&&(i.languageDetector=a(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=a(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new gp(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit(t,...r)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Ap),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const i=Hh(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),i}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ap;const n=Vh(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){var r,a;if("cimode"===(null===n||void 0===n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],i=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)i(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>i(e))}null===(r=this.options.preload)||void 0===r||null===(a=r.forEach)||void 0===a||a.call(r,e=>i(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const r=Hh();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Ap),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&dp.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=Hh();this.emit("languageChanging",e);const a=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,s)=>{s?this.isLanguageChangingTo===e&&(a(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),t&&t(i,function(){return n.t(...arguments)})},s=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Vh(t)?t:t&&t[0],r=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(Vh(t)?[t]:t);var s,o;r&&(this.language||a(r),this.translator.language||this.translator.changeLanguage(r),null===(s=this.services.languageDetector)||void 0===s||null===(o=s.cacheUserLanguage)||void 0===o||o.call(s,r));this.loadResources(r,e=>{i(e,r)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const a=function(e,t){let i;if("object"!==typeof t){for(var s=arguments.length,o=new Array(s>2?s-2:0),l=2;l<s;l++)o[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([e,t].concat(o))}else i=m({},t);i.lng=i.lng||a.lng,i.lngs=i.lngs||a.lngs,i.ns=i.ns||a.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||a.keyPrefix);const c=r.options.keySeparator||".";let u;return i.keyPrefix&&Array.isArray(e)?u=e.map(e=>("function"===typeof e&&(e=pp(e,m(m({},r.options),t))),"".concat(i.keyPrefix).concat(c).concat(e))):("function"===typeof e&&(e=pp(e,m(m({},r.options),t))),u=i.keyPrefix?"".concat(i.keyPrefix).concat(c).concat(e):e),r.t(u,i)};return Vh(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a}t(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null===(e=this.translator)||void 0===e?void 0:e.translate(...n)}exists(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null===(e=this.translator)||void 0===e?void 0:e.exists(...n)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(n,e)||r&&!i(a,e)))}loadNamespaces(e,t){const n=Hh();return this.options.ns?(Vh(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Hh();Vh(e)&&(e=[e]);const r=this.options.preload||[],a=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return a.length?(this.options.preload=r.concat(a),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null===(t=this.languages)||void 0===t?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(Yje){}const r=(null===(n=this.services)||void 0===n?void 0:n.languageUtils)||new xp(Tp());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){const e=new Op(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0);return e.createInstance=Op.createInstance,e}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ap;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=m(m(m({},this.options),e),{isClone:!0}),a=new Op(r);void 0===e.debug&&void 0===e.prefix||(a.logger=a.logger.clone(e));if(["store","services","language"].forEach(e=>{a[e]=this[e]}),a.services=m({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=m({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]=m({},e[t][r]),n),e[t]),e),{});a.store=new up(e,r),a.services.resourceStore=a.store}if(e.interpolation){const t=m(m(m({},Tp().interpolation),this.options.interpolation),e.interpolation),n=m(m({},r),{},{interpolation:t});a.services.interpolator=new Np(n)}return a.translator=new gp(a.services,r),a.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit(e,...n)}),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _p=Op.createInstance();_p.createInstance,_p.dir,_p.init,_p.loadResources,_p.reloadResources,_p.use,_p.changeLanguage,_p.getFixedT,_p.t,_p.exists,_p.setDefaultNamespace,_p.hasLoadedNamespace,_p.loadNamespaces,_p.loadLanguages;n(1844);Object.create(null);const Rp=(e,t,n,r)=>{var a,i,s;const o=[n,m({code:t},r||{})];if(null!==e&&void 0!==e&&null!==(a=e.services)&&void 0!==a&&null!==(a=a.logger)&&void 0!==a&&a.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);zp(o[0])&&(o[0]="react-i18next:: ".concat(o[0])),null!==e&&void 0!==e&&null!==(i=e.services)&&void 0!==i&&null!==(i=i.logger)&&void 0!==i&&i.warn?e.services.logger.warn(...o):null!==(s=console)&&void 0!==s&&s.warn&&console.warn(...o)},Pp={},Mp=(e,t,n,r)=>{zp(n)&&Pp[n]||(zp(n)&&(Pp[n]=new Date),Rp(e,t,n,r))},Dp=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Fp=(e,t,n)=>{e.loadNamespaces(t,Dp(e,n))},Lp=(e,t,n,r)=>{if(zp(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Fp(e,n,r);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,Dp(e,r))},zp=e=>"string"===typeof e,Bp=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Up={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Wp=e=>Up[e];let Vp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Bp,Wp),transDefaultProps:void 0};let Hp;const Gp=()=>Hp,Kp={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Vp=m(m({},Vp),e)}(e.options.react),(e=>{Hp=e})(e)}},qp=(0,o.createContext)();class Xp{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}class Yp extends Error{constructor(e,t,n){super(e),this.name="TranslationParserError",this.position=t,this.translationString=n,Error.captureStackTrace&&Error.captureStackTrace(this,Yp)}}const $p={"&nbsp;":"\xa0","&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&copy;":"\xa9","&reg;":"\xae","&trade;":"\u2122","&hellip;":"\u2026","&ndash;":"\u2013","&mdash;":"\u2014","&lsquo;":"\u2018","&rsquo;":"\u2019","&sbquo;":"\u201a","&ldquo;":"\u201c","&rdquo;":"\u201d","&bdquo;":"\u201e","&dagger;":"\u2020","&Dagger;":"\u2021","&bull;":"\u2022","&prime;":"\u2032","&Prime;":"\u2033","&lsaquo;":"\u2039","&rsaquo;":"\u203a","&sect;":"\xa7","&para;":"\xb6","&middot;":"\xb7","&ensp;":"\u2002","&emsp;":"\u2003","&thinsp;":"\u2009","&euro;":"\u20ac","&pound;":"\xa3","&yen;":"\xa5","&cent;":"\xa2","&curren;":"\xa4","&times;":"\xd7","&divide;":"\xf7","&minus;":"\u2212","&plusmn;":"\xb1","&ne;":"\u2260","&le;":"\u2264","&ge;":"\u2265","&asymp;":"\u2248","&equiv;":"\u2261","&infin;":"\u221e","&int;":"\u222b","&sum;":"\u2211","&prod;":"\u220f","&radic;":"\u221a","&part;":"\u2202","&permil;":"\u2030","&deg;":"\xb0","&micro;":"\xb5","&larr;":"\u2190","&uarr;":"\u2191","&rarr;":"\u2192","&darr;":"\u2193","&harr;":"\u2194","&crarr;":"\u21b5","&lArr;":"\u21d0","&uArr;":"\u21d1","&rArr;":"\u21d2","&dArr;":"\u21d3","&hArr;":"\u21d4","&alpha;":"\u03b1","&beta;":"\u03b2","&gamma;":"\u03b3","&delta;":"\u03b4","&epsilon;":"\u03b5","&zeta;":"\u03b6","&eta;":"\u03b7","&theta;":"\u03b8","&iota;":"\u03b9","&kappa;":"\u03ba","&lambda;":"\u03bb","&mu;":"\u03bc","&nu;":"\u03bd","&xi;":"\u03be","&omicron;":"\u03bf","&pi;":"\u03c0","&rho;":"\u03c1","&sigma;":"\u03c3","&tau;":"\u03c4","&upsilon;":"\u03c5","&phi;":"\u03c6","&chi;":"\u03c7","&psi;":"\u03c8","&omega;":"\u03c9","&Alpha;":"\u0391","&Beta;":"\u0392","&Gamma;":"\u0393","&Delta;":"\u0394","&Epsilon;":"\u0395","&Zeta;":"\u0396","&Eta;":"\u0397","&Theta;":"\u0398","&Iota;":"\u0399","&Kappa;":"\u039a","&Lambda;":"\u039b","&Mu;":"\u039c","&Nu;":"\u039d","&Xi;":"\u039e","&Omicron;":"\u039f","&Pi;":"\u03a0","&Rho;":"\u03a1","&Sigma;":"\u03a3","&Tau;":"\u03a4","&Upsilon;":"\u03a5","&Phi;":"\u03a6","&Chi;":"\u03a7","&Psi;":"\u03a8","&Omega;":"\u03a9","&Agrave;":"\xc0","&Aacute;":"\xc1","&Acirc;":"\xc2","&Atilde;":"\xc3","&Auml;":"\xc4","&Aring;":"\xc5","&AElig;":"\xc6","&Ccedil;":"\xc7","&Egrave;":"\xc8","&Eacute;":"\xc9","&Ecirc;":"\xca","&Euml;":"\xcb","&Igrave;":"\xcc","&Iacute;":"\xcd","&Icirc;":"\xce","&Iuml;":"\xcf","&ETH;":"\xd0","&Ntilde;":"\xd1","&Ograve;":"\xd2","&Oacute;":"\xd3","&Ocirc;":"\xd4","&Otilde;":"\xd5","&Ouml;":"\xd6","&Oslash;":"\xd8","&Ugrave;":"\xd9","&Uacute;":"\xda","&Ucirc;":"\xdb","&Uuml;":"\xdc","&Yacute;":"\xdd","&THORN;":"\xde","&szlig;":"\xdf","&agrave;":"\xe0","&aacute;":"\xe1","&acirc;":"\xe2","&atilde;":"\xe3","&auml;":"\xe4","&aring;":"\xe5","&aelig;":"\xe6","&ccedil;":"\xe7","&egrave;":"\xe8","&eacute;":"\xe9","&ecirc;":"\xea","&euml;":"\xeb","&igrave;":"\xec","&iacute;":"\xed","&icirc;":"\xee","&iuml;":"\xef","&eth;":"\xf0","&ntilde;":"\xf1","&ograve;":"\xf2","&oacute;":"\xf3","&ocirc;":"\xf4","&otilde;":"\xf5","&ouml;":"\xf6","&oslash;":"\xf8","&ugrave;":"\xf9","&uacute;":"\xfa","&ucirc;":"\xfb","&uuml;":"\xfc","&yacute;":"\xfd","&thorn;":"\xfe","&yuml;":"\xff","&iexcl;":"\xa1","&iquest;":"\xbf","&fnof;":"\u0192","&circ;":"\u02c6","&tilde;":"\u02dc","&OElig;":"\u0152","&oelig;":"\u0153","&Scaron;":"\u0160","&scaron;":"\u0161","&Yuml;":"\u0178","&ordf;":"\xaa","&ordm;":"\xba","&macr;":"\xaf","&acute;":"\xb4","&cedil;":"\xb8","&sup1;":"\xb9","&sup2;":"\xb2","&sup3;":"\xb3","&frac14;":"\xbc","&frac12;":"\xbd","&frac34;":"\xbe","&spades;":"\u2660","&clubs;":"\u2663","&hearts;":"\u2665","&diams;":"\u2666","&loz;":"\u25ca","&oline;":"\u203e","&frasl;":"\u2044","&weierp;":"\u2118","&image;":"\u2111","&real;":"\u211c","&alefsym;":"\u2135"},Qp=new RegExp(Object.keys($p).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),"g"),Jp=["children"],Zp=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const n=(e=>{const t=[];let n=0,r="";const a=()=>{r&&(t.push({type:"Text",value:r,position:n-r.length}),r="")};for(;n<e.length;){const i=e[n];if("<"===i){const s=e.slice(n).match(/^<(\d+)>/);if(s)a(),t.push({type:"TagOpen",value:s[0],position:n,tagNumber:parseInt(s[1],10)}),n+=s[0].length;else{const s=e.slice(n).match(/^<\/(\d+)>/);s?(a(),t.push({type:"TagClose",value:s[0],position:n,tagNumber:parseInt(s[1],10)}),n+=s[0].length):(r+=i,n+=1)}}else r+=i,n+=1}return a(),t})(e),r=[],a=[],i=new Set;if(n.forEach(n=>{switch(n.type){case"Text":{const e=n.value.replace(Qp,e=>$p[e]).replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(parseInt(t,10))).replace(/&#x([0-9a-fA-F]+);/g,(e,t)=>String.fromCharCode(parseInt(t,16)));(a.length>0?a[a.length-1].children:r).push(e)}break;case"TagOpen":{const{tagNumber:e}=n,s=(()=>{var e;if(0===a.length)return t;const n=a[a.length-1];return null!==(e=n.declaration.props)&&void 0!==e&&e.children&&Array.isArray(n.declaration.props.children)?n.declaration.props.children:n.declarations})(),o=s[e];if(!o){i.add(e);const t="<".concat(e,">");(a.length>0?a[a.length-1].children:r).push(t);break}a.push({tagNumber:e,children:[],position:n.position,declaration:o,declarations:s})}break;case"TagClose":{const{tagNumber:t}=n;if(i.has(t)){const e="</".concat(t,">");(a.length>0?a[a.length-1].children:r).push(e),i.delete(t);break}if(0===a.length)throw new Yp("Unexpected closing tag </".concat(t,"> at position ").concat(n.position),n.position,e);const s=a.pop();if(s.tagNumber!==t)throw new Yp("Mismatched tags: expected </".concat(s.tagNumber,"> but got </").concat(t,"> at position ").concat(n.position),n.position,e);const l=((e,t,n)=>{const{type:r,props:a={}}=e;if(a.children&&Array.isArray(a.children)&&n){const{children:e}=a,n=u(a,Jp);return o.createElement(r,n,...t)}return 0===t.length?o.createElement(r,a):1===t.length?o.createElement(r,a,t[0]):o.createElement(r,a,...t)})(s.declaration,s.children,s.declarations);(a.length>0?a[a.length-1].children:r).push(l)}}}),a.length>0){const t=a[a.length-1];throw new Yp("Unclosed tag <".concat(t.tagNumber,"> at position ").concat(t.position),t.position,e)}return r};function ef(e){var t,n,r;let{i18nKey:a,defaultTranslation:i,content:s,ns:l,values:c={},i18n:u,t:d}=e;const h=u||Gp();if(!h)return Mp(h,"NO_I18NEXT_INSTANCE","IcuTrans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:a}),o.createElement(o.Fragment,{},i);const p=d||(null===(t=h.t)||void 0===t?void 0:t.bind(h))||(e=>e);let f=l||p.ns||(null===(n=h.options)||void 0===n?void 0:n.defaultNS);f=zp(f)?[f]:f||["translation"];let g=c;null!==(r=h.options)&&void 0!==r&&null!==(r=r.interpolation)&&void 0!==r&&r.defaultVariables&&(g=c&&Object.keys(c).length>0?m(m({},c),h.options.interpolation.defaultVariables):m({},h.options.interpolation.defaultVariables));const x=p(a,m(m({defaultValue:i},g),{},{ns:f}));try{const e=Zp(x,s);return o.createElement(o.Fragment,{},...e)}catch(v){return Rp(h,"ICU_TRANS_RENDER_ERROR",'IcuTrans component error for key "'.concat(a,'": ').concat(v.message),{i18nKey:a,error:v}),o.createElement(o.Fragment,{},x)}}ef.displayName="IcuTransWithoutContext";var tf=n(9461);const nf={t:(e,t)=>{return zp(t)?t:"object"===typeof(n=t)&&null!==n&&zp(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},ready:!1},rf=()=>()=>{},af=function(e){var t,n,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:i}=a,{i18n:s,defaultNS:l}=(0,o.useContext)(qp)||{},c=i||s||Gp();c&&!c.reportNamespaces&&(c.reportNamespaces=new Xp),c||Mp(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=(0,o.useMemo)(()=>{var e;return m(m(m({},Vp),null===c||void 0===c||null===(e=c.options)||void 0===e?void 0:e.react),a)},[c,a]),{useSuspense:d,keyPrefix:h}=u,p=e||l||(null===c||void 0===c||null===(t=c.options)||void 0===t?void 0:t.defaultNS),f=zp(p)?[p]:p||["translation"],g=(0,o.useMemo)(()=>f,f);null===c||void 0===c||null===(n=c.reportNamespaces)||void 0===n||null===(r=n.addUsedNamespaces)||void 0===r||r.call(n,g);const x=(0,o.useRef)(0),v=(0,o.useCallback)(e=>{if(!c)return rf;const{bindI18n:t,bindI18nStore:n}=u,r=()=>{x.current+=1,e()};return t&&c.on(t,r),n&&c.store.on(n,r),()=>{t&&t.split(" ").forEach(e=>c.off(e,r)),n&&n.split(" ").forEach(e=>c.store.off(e,r))}},[c,u]),y=(0,o.useRef)(),b=(0,o.useCallback)(()=>{if(!c)return nf;const e=!(!c.isInitialized&&!c.initializedStoreOnce)&&g.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(Mp(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,c,u)),t=a.lng||c.language,n=x.current,r=y.current;if(r&&r.ready===e&&r.lng===t&&r.keyPrefix===h&&r.revision===n)return r;const i={t:c.getFixedT(t,"fallback"===u.nsMode?g:g[0],h),ready:e,lng:t,keyPrefix:h,revision:n};return y.current=i,i},[c,g,h,u,a.lng]),[w,k]=(0,o.useState)(0),{t:N,ready:S}=(0,tf.useSyncExternalStore)(v,b,b);(0,o.useEffect)(()=>{if(c&&!S&&!d){const e=()=>k(e=>e+1);a.lng?Lp(c,a.lng,g,e):Fp(c,g,e)}},[c,a.lng,g,S,d,w]);const j=c||{},C=(0,o.useRef)(null),E=(0,o.useRef)(),T=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const n=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(n,"__original"))try{Object.defineProperty(n,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(r){}return n},I=(0,o.useMemo)(()=>{const e=j,t=null===e||void 0===e?void 0:e.language;let n=e;e&&(C.current&&C.current.__original===e?E.current!==t?(n=T(e),C.current=n,E.current=t):n=C.current:(n=T(e),C.current=n,E.current=t));const r=[N,n,S];return r.t=N,r.i18n=n,r.ready=S,r},[N,j,S,j.resolvedLanguage,j.language,j.languages]);if(c&&d&&!S)throw new Promise(e=>{const t=()=>e();a.lng?Lp(c,a.lng,g,t):Fp(c,g,t)});return I};const{slice:sf,forEach:of}=[];const lf=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,cf={create(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+60*n*1e3)),r&&(a.domain=r),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"},r=encodeURIComponent(t);let a="".concat(e,"=").concat(r);if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(e))}if(n.domain){if(!lf.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(n.domain)}if(n.path){if(!lf.test(n.path))throw new TypeError("option path is invalid");a+="; Path=".concat(n.path)}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(a+="; Partitioned"),a}(e,t,a)},read(e){const t="".concat(e,"="),n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var uf={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return cf.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:a,cookieOptions:i}=t;n&&"undefined"!==typeof document&&cf.create(n,e,r,a,i)}},df={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){var r;let{search:e}=window.location;!window.location.search&&(null===(r=window.location.hash)||void 0===r?void 0:r.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const a=e.substring(1).split("&");for(let r=0;r<a.length;r++){const e=a[r].indexOf("=");if(e>0){a[r].substring(0,e)===n&&(t=a[r].substring(e+1))}}}return t}},hf={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:r}=e;if("undefined"!==typeof window){const{hash:e}=window.location;if(e&&e.length>2){const i=e.substring(1);if(n){const e=i.split("&");for(let r=0;r<e.length;r++){const a=e[r].indexOf("=");if(a>0){e[r].substring(0,a)===n&&(t=e[r].substring(a+1))}}}if(t)return t;if(!t&&r>-1){var a;const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;return null===(a=t["number"===typeof r?r:0])||void 0===a?void 0:a.replace("/","")}}}return t}};let pf=null;const ff=()=>{if(null!==pf)return pf;try{if(pf="undefined"!==typeof window&&null!==window.localStorage,!pf)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(Yje){pf=!1}return pf};var mf={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&ff())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&ff()&&window.localStorage.setItem(n,e)}};let gf=null;const xf=()=>{if(null!==gf)return gf;try{if(gf="undefined"!==typeof window&&null!==window.sessionStorage,!gf)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(Yje){gf=!1}return gf};var vf={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&xf())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&xf()&&window.sessionStorage.setItem(n,e)}},yf={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let a=0;a<e.length;a++)t.push(e[a]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},bf={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const r=n||("undefined"!==typeof document?document.documentElement:null);return r&&"function"===typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},wf={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"===typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null===(t=r["number"===typeof n?n:0])||void 0===t?void 0:t.replace("/","")}},kf={name:"subdomain",lookup(e){var t;let{lookupFromSubdomainIndex:n}=e;const r="number"===typeof n?n+1:1,a="undefined"!==typeof window&&(null===(t=window.location)||void 0===t||null===(t=t.hostname)||void 0===t?void 0:t.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(a)return a[r]}};let Nf=!1;try{document.cookie,Nf=!0}catch(Yje){}const Sf=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Nf||Sf.splice(1,1);class jf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return of.call(sf.call(arguments,1),t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])}),e}(t,this.options||{},{order:Sf,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(uf),this.addDetector(df),this.addDetector(mf),this.addDetector(vf),this.addDetector(yf),this.addDetector(bf),this.addDetector(wf),this.addDetector(kf),this.addDetector(hf)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>void 0!==e&&null!==e&&!function(e){return"string"===typeof e&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(e))}(e)).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}jf.type="languageDetector";const Cf={en:{translation:JSON.parse('{"common":{"loading":"Loading...","error":"Error","success":"Success","save":"Save","cancel":"Cancel","delete":"Delete","edit":"Edit","close":"Close","confirm":"Confirm","back":"Back","next":"Next","search":"Search","filter":"Filter","refresh":"Refresh","export":"Export","download":"Download","settings":"Settings"},"nav":{"trading":"Trading","orders":"Orders","alerts":"Alerts","auto":"Auto","news":"News","social":"Social","portfolio":"Portfolio","wallet":"Wallet","paper":"Paper"},"auth":{"signIn":"Sign In","signOut":"Sign Out","welcome":"Welcome","profile":"Profile"},"trading":{"buy":"Buy","sell":"Sell","symbol":"Symbol","quantity":"Quantity","price":"Price","total":"Total","orderType":"Order Type","market":"Market","limit":"Limit","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Place Order","orderValue":"Order Value","currentPrice":"Current Price"},"alerts":{"title":"Price Alerts","addAlert":"Add Alert","noAlerts":"No alerts set","createPrompt":"Click \'Add Alert\' to create one","above":"Above","below":"Below","targetPrice":"Target Price","condition":"Condition","triggered":"Triggered","pending":"Pending","soundEnabled":"Sound Enabled"},"wallet":{"title":"My Wallet","totalBalance":"Total Balance","holdings":"Holdings","send":"Send","receive":"Receive","transactions":"Recent Transactions","address":"Wallet Address","copied":"Copied!","amount":"Amount","recipient":"Recipient Address"},"crawler":{"title":"Trade Signals","whales":"Whale Activity","news":"News Headlines","social":"Social Signals","orderbook":"Order Book","critical":"Critical","high":"High","medium":"Medium","low":"Low","noSignals":"No signals detected"},"autoTrading":{"title":"Auto Trading","paperMode":"Paper Mode","liveMode":"Live Mode","strategies":"Trading Strategies","start":"Start","stop":"Stop","trades":"Trades","pnl":"P&L","wins":"Wins","losses":"Losses"},"news":{"title":"Live News Feed","allNews":"All News","bullish":"Bullish","bearish":"Bearish","highImpact":"High Impact","sentiment":"Market Sentiment"},"export":{"exportCSV":"Export CSV","exportPDF":"Export PDF","downloadHistory":"Download Trade History"},"status":{"live":"Live","online":"Online","offline":"Offline","connected":"Connected","disconnected":"Disconnected","focused":"Focused","stressed":"Stressed","fatigued":"Fatigued","confident":"Confident"}}')},es:{translation:JSON.parse('{"common":{"loading":"Cargando...","error":"Error","success":"\xc9xito","save":"Guardar","cancel":"Cancelar","delete":"Eliminar","edit":"Editar","close":"Cerrar","confirm":"Confirmar","back":"Atr\xe1s","next":"Siguiente","search":"Buscar","filter":"Filtrar","refresh":"Actualizar","export":"Exportar","download":"Descargar","settings":"Configuraci\xf3n"},"nav":{"trading":"Trading","orders":"\xd3rdenes","alerts":"Alertas","auto":"Auto","news":"Noticias","social":"Social","portfolio":"Portafolio","wallet":"Cartera","paper":"Demo"},"auth":{"signIn":"Iniciar Sesi\xf3n","signOut":"Cerrar Sesi\xf3n","welcome":"Bienvenido","profile":"Perfil"},"trading":{"buy":"Comprar","sell":"Vender","symbol":"S\xedmbolo","quantity":"Cantidad","price":"Precio","total":"Total","orderType":"Tipo de Orden","market":"Mercado","limit":"L\xedmite","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Realizar Orden","orderValue":"Valor de Orden","currentPrice":"Precio Actual"},"alerts":{"title":"Alertas de Precio","addAlert":"Agregar Alerta","noAlerts":"Sin alertas","createPrompt":"Haz clic en \'Agregar Alerta\' para crear una","above":"Por Encima","below":"Por Debajo","targetPrice":"Precio Objetivo","condition":"Condici\xf3n","triggered":"Activada","pending":"Pendiente","soundEnabled":"Sonido Activado"},"wallet":{"title":"Mi Cartera","totalBalance":"Balance Total","holdings":"Posiciones","send":"Enviar","receive":"Recibir","transactions":"Transacciones Recientes","address":"Direcci\xf3n de Cartera","copied":"\xa1Copiado!","amount":"Cantidad","recipient":"Direcci\xf3n del Destinatario"},"crawler":{"title":"Se\xf1ales de Trading","whales":"Actividad de Ballenas","news":"Titulares de Noticias","social":"Se\xf1ales Sociales","orderbook":"Libro de \xd3rdenes","critical":"Cr\xedtico","high":"Alto","medium":"Medio","low":"Bajo","noSignals":"Sin se\xf1ales detectadas"},"autoTrading":{"title":"Trading Autom\xe1tico","paperMode":"Modo Demo","liveMode":"Modo Real","strategies":"Estrategias de Trading","start":"Iniciar","stop":"Detener","trades":"Operaciones","pnl":"P&L","wins":"Ganancias","losses":"P\xe9rdidas"},"news":{"title":"Noticias en Vivo","allNews":"Todas","bullish":"Alcistas","bearish":"Bajistas","highImpact":"Alto Impacto","sentiment":"Sentimiento del Mercado"},"export":{"exportCSV":"Exportar CSV","exportPDF":"Exportar PDF","downloadHistory":"Descargar Historial"},"status":{"live":"En Vivo","online":"En L\xednea","offline":"Desconectado","connected":"Conectado","disconnected":"Desconectado","focused":"Enfocado","stressed":"Estresado","fatigued":"Cansado","confident":"Confiado"}}')},zh:{translation:JSON.parse('{"common":{"loading":"\u52a0\u8f7d\u4e2d...","error":"\u9519\u8bef","success":"\u6210\u529f","save":"\u4fdd\u5b58","cancel":"\u53d6\u6d88","delete":"\u5220\u9664","edit":"\u7f16\u8f91","close":"\u5173\u95ed","confirm":"\u786e\u8ba4","back":"\u8fd4\u56de","next":"\u4e0b\u4e00\u6b65","search":"\u641c\u7d22","filter":"\u7b5b\u9009","refresh":"\u5237\u65b0","export":"\u5bfc\u51fa","download":"\u4e0b\u8f7d","settings":"\u8bbe\u7f6e"},"nav":{"trading":"\u4ea4\u6613","orders":"\u8ba2\u5355","alerts":"\u8b66\u62a5","auto":"\u81ea\u52a8","news":"\u65b0\u95fb","social":"\u793e\u4ea4","portfolio":"\u6295\u8d44\u7ec4\u5408","wallet":"\u94b1\u5305","paper":"\u6a21\u62df"},"auth":{"signIn":"\u767b\u5f55","signOut":"\u9000\u51fa","welcome":"\u6b22\u8fce","profile":"\u4e2a\u4eba\u8d44\u6599"},"trading":{"buy":"\u4e70\u5165","sell":"\u5356\u51fa","symbol":"\u4ee3\u7801","quantity":"\u6570\u91cf","price":"\u4ef7\u683c","total":"\u603b\u8ba1","orderType":"\u8ba2\u5355\u7c7b\u578b","market":"\u5e02\u4ef7","limit":"\u9650\u4ef7","stopLoss":"\u6b62\u635f","takeProfit":"\u6b62\u76c8","trailingStop":"\u8ffd\u8e2a\u6b62\u635f","placeOrder":"\u4e0b\u5355","orderValue":"\u8ba2\u5355\u4ef7\u503c","currentPrice":"\u5f53\u524d\u4ef7\u683c"},"alerts":{"title":"\u4ef7\u683c\u8b66\u62a5","addAlert":"\u6dfb\u52a0\u8b66\u62a5","noAlerts":"\u6682\u65e0\u8b66\u62a5","createPrompt":"\u70b9\u51fb\'\u6dfb\u52a0\u8b66\u62a5\'\u521b\u5efa\u4e00\u4e2a","above":"\u9ad8\u4e8e","below":"\u4f4e\u4e8e","targetPrice":"\u76ee\u6807\u4ef7\u683c","condition":"\u6761\u4ef6","triggered":"\u5df2\u89e6\u53d1","pending":"\u5f85\u5b9a","soundEnabled":"\u5f00\u542f\u58f0\u97f3"},"wallet":{"title":"\u6211\u7684\u94b1\u5305","totalBalance":"\u603b\u4f59\u989d","holdings":"\u6301\u4ed3","send":"\u53d1\u9001","receive":"\u63a5\u6536","transactions":"\u6700\u8fd1\u4ea4\u6613","address":"\u94b1\u5305\u5730\u5740","copied":"\u5df2\u590d\u5236!","amount":"\u91d1\u989d","recipient":"\u63a5\u6536\u5730\u5740"},"crawler":{"title":"\u4ea4\u6613\u4fe1\u53f7","whales":"\u5de8\u9cb8\u6d3b\u52a8","news":"\u65b0\u95fb\u5934\u6761","social":"\u793e\u4ea4\u4fe1\u53f7","orderbook":"\u8ba2\u5355\u7c3f","critical":"\u7d27\u6025","high":"\u9ad8","medium":"\u4e2d","low":"\u4f4e","noSignals":"\u6682\u65e0\u4fe1\u53f7"},"autoTrading":{"title":"\u81ea\u52a8\u4ea4\u6613","paperMode":"\u6a21\u62df\u6a21\u5f0f","liveMode":"\u5b9e\u76d8\u6a21\u5f0f","strategies":"\u4ea4\u6613\u7b56\u7565","start":"\u542f\u52a8","stop":"\u505c\u6b62","trades":"\u4ea4\u6613","pnl":"\u76c8\u4e8f","wins":"\u76c8\u5229","losses":"\u4e8f\u635f"},"news":{"title":"\u5b9e\u65f6\u65b0\u95fb","allNews":"\u5168\u90e8","bullish":"\u770b\u6da8","bearish":"\u770b\u8dcc","highImpact":"\u91cd\u5927\u5f71\u54cd","sentiment":"\u5e02\u573a\u60c5\u7eea"},"export":{"exportCSV":"\u5bfc\u51faCSV","exportPDF":"\u5bfc\u51faPDF","downloadHistory":"\u4e0b\u8f7d\u4ea4\u6613\u8bb0\u5f55"},"status":{"live":"\u5b9e\u65f6","online":"\u5728\u7ebf","offline":"\u79bb\u7ebf","connected":"\u5df2\u8fde\u63a5","disconnected":"\u5df2\u65ad\u5f00","focused":"\u4e13\u6ce8","stressed":"\u7d27\u5f20","fatigued":"\u75b2\u52b3","confident":"\u81ea\u4fe1"}}')},fr:{translation:JSON.parse('{"common":{"loading":"Chargement...","error":"Erreur","success":"Succ\xe8s","save":"Enregistrer","cancel":"Annuler","delete":"Supprimer","edit":"Modifier","close":"Fermer","confirm":"Confirmer","back":"Retour","next":"Suivant","search":"Rechercher","filter":"Filtrer","refresh":"Actualiser","export":"Exporter","download":"T\xe9l\xe9charger","settings":"Param\xe8tres"},"nav":{"trading":"Trading","orders":"Ordres","alerts":"Alertes","auto":"Auto","news":"Actualit\xe9s","social":"Social","portfolio":"Portefeuille","wallet":"Portefeuille","paper":"D\xe9mo"},"auth":{"signIn":"Connexion","signOut":"D\xe9connexion","welcome":"Bienvenue","profile":"Profil"},"trading":{"buy":"Acheter","sell":"Vendre","symbol":"Symbole","quantity":"Quantit\xe9","price":"Prix","total":"Total","orderType":"Type d\'Ordre","market":"March\xe9","limit":"Limite","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Passer l\'Ordre","orderValue":"Valeur de l\'Ordre","currentPrice":"Prix Actuel"},"alerts":{"title":"Alertes de Prix","addAlert":"Ajouter une Alerte","noAlerts":"Aucune alerte","createPrompt":"Cliquez sur \'Ajouter une Alerte\' pour en cr\xe9er une","above":"Au-dessus","below":"En-dessous","targetPrice":"Prix Cible","condition":"Condition","triggered":"D\xe9clench\xe9e","pending":"En attente","soundEnabled":"Son Activ\xe9"},"wallet":{"title":"Mon Portefeuille","totalBalance":"Solde Total","holdings":"Positions","send":"Envoyer","receive":"Recevoir","transactions":"Transactions R\xe9centes","address":"Adresse du Portefeuille","copied":"Copi\xe9!","amount":"Montant","recipient":"Adresse du Destinataire"},"crawler":{"title":"Signaux de Trading","whales":"Activit\xe9 des Baleines","news":"Titres des Actualit\xe9s","social":"Signaux Sociaux","orderbook":"Carnet d\'Ordres","critical":"Critique","high":"\xc9lev\xe9","medium":"Moyen","low":"Faible","noSignals":"Aucun signal d\xe9tect\xe9"},"autoTrading":{"title":"Trading Automatique","paperMode":"Mode D\xe9mo","liveMode":"Mode R\xe9el","strategies":"Strat\xe9gies de Trading","start":"D\xe9marrer","stop":"Arr\xeater","trades":"Transactions","pnl":"P&L","wins":"Gains","losses":"Pertes"},"news":{"title":"Actualit\xe9s en Direct","allNews":"Toutes","bullish":"Haussi\xe8res","bearish":"Baissi\xe8res","highImpact":"Fort Impact","sentiment":"Sentiment du March\xe9"},"export":{"exportCSV":"Exporter CSV","exportPDF":"Exporter PDF","downloadHistory":"T\xe9l\xe9charger l\'Historique"},"status":{"live":"En Direct","online":"En Ligne","offline":"Hors Ligne","connected":"Connect\xe9","disconnected":"D\xe9connect\xe9","focused":"Concentr\xe9","stressed":"Stress\xe9","fatigued":"Fatigu\xe9","confident":"Confiant"}}')},de:{translation:JSON.parse('{"common":{"loading":"Laden...","error":"Fehler","success":"Erfolg","save":"Speichern","cancel":"Abbrechen","delete":"L\xf6schen","edit":"Bearbeiten","close":"Schlie\xdfen","confirm":"Best\xe4tigen","back":"Zur\xfcck","next":"Weiter","search":"Suchen","filter":"Filtern","refresh":"Aktualisieren","export":"Exportieren","download":"Herunterladen","settings":"Einstellungen"},"nav":{"trading":"Handel","orders":"Auftr\xe4ge","alerts":"Alarme","auto":"Auto","news":"Nachrichten","social":"Sozial","portfolio":"Portfolio","wallet":"Wallet","paper":"Demo"},"auth":{"signIn":"Anmelden","signOut":"Abmelden","welcome":"Willkommen","profile":"Profil"},"trading":{"buy":"Kaufen","sell":"Verkaufen","symbol":"Symbol","quantity":"Menge","price":"Preis","total":"Gesamt","orderType":"Auftragsart","market":"Markt","limit":"Limit","stopLoss":"Stop Loss","takeProfit":"Take Profit","trailingStop":"Trailing Stop","placeOrder":"Auftrag Erteilen","orderValue":"Auftragswert","currentPrice":"Aktueller Preis"},"alerts":{"title":"Preisalarme","addAlert":"Alarm Hinzuf\xfcgen","noAlerts":"Keine Alarme","createPrompt":"Klicken Sie auf \'Alarm Hinzuf\xfcgen\' um einen zu erstellen","above":"\xdcber","below":"Unter","targetPrice":"Zielpreis","condition":"Bedingung","triggered":"Ausgel\xf6st","pending":"Ausstehend","soundEnabled":"Ton Aktiviert"},"wallet":{"title":"Mein Wallet","totalBalance":"Gesamtguthaben","holdings":"Best\xe4nde","send":"Senden","receive":"Empfangen","transactions":"Letzte Transaktionen","address":"Wallet-Adresse","copied":"Kopiert!","amount":"Betrag","recipient":"Empf\xe4ngeradresse"},"crawler":{"title":"Handelssignale","whales":"Wal-Aktivit\xe4t","news":"Schlagzeilen","social":"Soziale Signale","orderbook":"Orderbuch","critical":"Kritisch","high":"Hoch","medium":"Mittel","low":"Niedrig","noSignals":"Keine Signale erkannt"},"autoTrading":{"title":"Automatischer Handel","paperMode":"Demo-Modus","liveMode":"Live-Modus","strategies":"Handelsstrategien","start":"Starten","stop":"Stoppen","trades":"Trades","pnl":"G&V","wins":"Gewinne","losses":"Verluste"},"news":{"title":"Live-Nachrichten","allNews":"Alle","bullish":"Bullisch","bearish":"B\xe4risch","highImpact":"Hohe Auswirkung","sentiment":"Marktstimmung"},"export":{"exportCSV":"CSV Exportieren","exportPDF":"PDF Exportieren","downloadHistory":"Verlauf Herunterladen"},"status":{"live":"Live","online":"Online","offline":"Offline","connected":"Verbunden","disconnected":"Getrennt","focused":"Fokussiert","stressed":"Gestresst","fatigued":"Erm\xfcdet","confident":"Selbstsicher"}}')}};_p.use(jf).use(Kp).init({resources:Cf,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const Ef=[{code:"en",name:"English",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"es",name:"Espa\xf1ol",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"zh",name:"\u4e2d\u6587",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"fr",name:"Fran\xe7ais",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"de",name:"Deutsch",flag:"\ud83c\udde9\ud83c\uddea"}],Tf=()=>{const e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const t=e.current;if(!t)return;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%^&*(){}[]|;:,.<>?/~`\u03b1\u03b2\u03b3\u03b4\u03b5\u03b6\u03b7\u03b8\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03bf\u03c0\u03c1\u03c3\u03c4\u03c5\u03c6\u03c7\u03c8\u03c9\u2211\u220f\u222b\u2202\u2207\u2248\u2260\u2264\u2265\xb1\xd7\xf7\u221a\u221e",r=Math.floor(window.innerWidth/20),a=[];for(let e=0;e<r;e++){const i=document.createElement("div");i.className="matrix-column",i.style.left="".concat(e/r*100,"%"),i.style.animationDuration="".concat(8+12*Math.random(),"s"),i.style.animationDelay="".concat(5*Math.random(),"s"),i.style.opacity=.5*Math.random()+.1;const s=Math.floor(20*Math.random())+10;let o="";for(let e=0;e<s;e++){const e=n[Math.floor(124*Math.random())];o+="<span>".concat(e,"</span>")}i.innerHTML=o,t.appendChild(i),a.push(i)}const i=setInterval(()=>{a.forEach(e=>{e.querySelectorAll("span").forEach(e=>{Math.random()>.95&&(e.textContent=n[Math.floor(124*Math.random())])})})},100);return()=>{clearInterval(i),a.forEach(e=>e.remove())}},[]),(0,zt.jsxs)("div",{ref:e,className:"matrix-bg","aria-hidden":"true",children:[(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-[#050505]/50 to-[#050505]"}),(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#050505]/80 via-transparent to-[#050505]/80"})]})},If=e=>{let{onComplete:t}=e;const[n,r]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const e=setTimeout(()=>r(!0),1500);return()=>clearTimeout(e)},[]),(0,zt.jsxs)(uu.div,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center",exit:{opacity:0},transition:{duration:.5},children:[(0,zt.jsx)(Tf,{}),(0,zt.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,zt.jsxs)(uu.div,{className:"relative w-24 h-24 mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20},children:[(0,zt.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/30 backdrop-blur-xl"}),(0,zt.jsx)("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-slate-900 to-slate-800 border border-white/10 flex items-center justify-center",children:(0,zt.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-12 h-12",children:[(0,zt.jsx)(uu.path,{d:"M 50 15 C 70 15, 85 30, 85 50 C 85 70, 70 85, 50 85 C 30 85, 15 70, 15 50 C 15 30, 30 15, 50 15",fill:"none",stroke:"#14b8a6",strokeWidth:"3",strokeLinecap:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut"}}),(0,zt.jsx)(uu.path,{d:"M 30 50 L 45 50 L 55 35 L 70 50",fill:"none",stroke:"#14b8a6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,delay:.5,ease:"easeOut"}})]})}),(0,zt.jsx)("div",{className:"absolute inset-0 rounded-full bg-teal-500/20 blur-xl animate-pulse"})]}),(0,zt.jsxs)(uu.div,{className:"flex items-center gap-3 mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,zt.jsx)("h1",{className:"font-heading text-xl md:text-2xl font-medium text-slate-300 tracking-wide",children:"Next-Gen Algorithmic Trading Platform"}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-mono bg-teal-500/20 text-teal-400 border border-teal-500/30",children:"PRO"})]}),(0,zt.jsx)(rn,{children:n&&(0,zt.jsx)(uu.button,{onClick:t,className:"mt-12 px-8 py-4 rounded-xl bg-slate-800/80 backdrop-blur-xl border border-white/10  text-white font-medium text-lg hover:bg-slate-700/80 hover:border-teal-500/30 hover:shadow-[0_0_30px_rgba(20,184,166,0.2)] transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":"enter-platform-btn",children:"Launch OracleIQ"})}),(0,zt.jsx)(uu.p,{className:"mt-6 text-sm text-slate-600 font-mono",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"OracleIQTrader.com - AI Trading Platform v1.0"})]})]})};function Af(e,t){let n;const r=()=>{const{currentTime:r}=t,a=(null===r?0:r.value)/100;n!==a&&e(a),n=a};return Ir.preUpdate(r,!0),()=>Ar(r)}const Of=new WeakMap;let _f;const Rf=(e,t,n)=>(r,a)=>a&&a[0]?a[0][e+"Size"]:oc(r)&&"getBBox"in r?r.getBBox()[t]:r[n],Pf=Rf("inline","width","offsetWidth"),Mf=Rf("block","height","offsetHeight");function Df(e){var t;let{target:n,borderBoxSize:r}=e;null===(t=Of.get(n))||void 0===t||t.forEach(e=>{e(n,{get width(){return Pf(n,r)},get height(){return Mf(n,r)}})})}function Ff(e){e.forEach(Df)}function Lf(e,t){_f||"undefined"!==typeof ResizeObserver&&(_f=new ResizeObserver(Ff));const n=Hc(e);return n.forEach(e=>{var n;let r=Of.get(e);r||(r=new Set,Of.set(e,r)),r.add(t),null===(n=_f)||void 0===n||n.observe(e)}),()=>{n.forEach(e=>{const n=Of.get(e);var r;(null===n||void 0===n||n.delete(t),null!==n&&void 0!==n&&n.size)||(null===(r=_f)||void 0===r||r.unobserve(e))})}}const zf=new Set;let Bf;function Uf(e){return zf.add(e),Bf||(Bf=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};zf.forEach(t=>t(e))},window.addEventListener("resize",Bf)),()=>{zf.delete(e),zf.size||"function"!==typeof Bf||(window.removeEventListener("resize",Bf),Bf=void 0)}}const Wf={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Vf(e,t,n,r){const a=n[t],{length:i,position:s}=Wf[t],o=a.current,l=n.time;a.current=e["scroll".concat(s)],a.scrollLength=e["scroll".concat(i)]-e["client".concat(i)],a.offset.length=0,a.offset[0]=0,a.offset[1]=a.scrollLength,a.progress=Ys(0,a.scrollLength,a.current);const c=r-l;a.velocity=c>50?0:Zr(a.current-o,c)}const Hf={start:0,center:.5,end:1};function Gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(e in Hf&&(e=Hf[e]),"string"===typeof e){const t=parseFloat(e);e.endsWith("px")?r=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?r=t/100*document.documentElement.clientWidth:e.endsWith("vh")?r=t/100*document.documentElement.clientHeight:e=t}return"number"===typeof e&&(r=t*e),n+r}const Kf=[0,0];function qf(e,t,n,r){let a=Array.isArray(e)?e:Kf,i=0,s=0;return"number"===typeof e?a=[e,e]:"string"===typeof e&&(a=(e=e.trim()).includes(" ")?e.split(" "):[e,Hf[e]?e:"0"]),i=Gf(a[0],n,r),s=Gf(a[1],t),i-s}const Xf={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},Yf={x:0,y:0};function $f(e,t,n){const{offset:r=Xf.All}=n,{target:a=e,axis:i="y"}=n,s="y"===i?"height":"width",o=a!==e?function(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(Kt(r))n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if("svg"===r.tagName){const e=r.getBoundingClientRect();r=r.parentElement;const t=r.getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else{if(!(r instanceof SVGGraphicsElement))break;{const{x:e,y:t}=r.getBBox();n.x+=e,n.y+=t;let a=null,i=r.parentNode;for(;!a;)"svg"===i.tagName&&(a=i),i=r.parentNode;r=a}}return n}(a,e):Yf,l=a===e?{width:e.scrollWidth,height:e.scrollHeight}:function(e){return"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}(a),c={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let u=!t[i].interpolate;const d=r.length;for(let h=0;h<d;h++){const e=qf(r[h],c[s],l[s],o[i]);u||e===t[i].interpolatorOffsets[h]||(u=!0),t[i].offset[h]=e}u&&(t[i].interpolate=$s(t[i].offset,Qs(r),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=on(0,1,t[i].interpolate(t[i].current))}function Qf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{measure:t=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0;if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,r.target,n),function(e,t,n){Vf(e,"x",t,n),Vf(e,"y",t,n),t.time=n}(e,n,t),(r.offset||r.target)&&$f(e,n,r)},notify:()=>t(n)}}const Jf=["container"],Zf=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=e=>e===document.scrollingElement?window:e;function rm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{container:n=document.scrollingElement}=t,r=u(t,Jf);if(!n)return Sr;let a=tm.get(n);a||(a=new Set,tm.set(n,a));const i=Qf(n,e,{time:0,x:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0},y:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}},r);if(a.add(i),!Zf.has(n)){const e=()=>{for(const e of a)e.measure(Or.timestamp);Ir.preUpdate(t)},t=()=>{for(const e of a)e.notify()},r=()=>Ir.read(e);Zf.set(n,r);const i=nm(n);window.addEventListener("resize",r,{passive:!0}),n!==document.documentElement&&em.set(n,function(e,t){return"function"===typeof e?Uf(e):Lf(e,t)}(n,r)),i.addEventListener("scroll",r,{passive:!0}),r()}const s=Zf.get(n);return Ir.read(s,!1,!0),()=>{Ar(s);const e=tm.get(n);if(!e)return;if(e.delete(i),e.size)return;const t=Zf.get(n);var r;(Zf.delete(n),t)&&(nm(n).removeEventListener("scroll",t),null===(r=em.get(n))||void 0===r||r(),window.removeEventListener("resize",t))}}const am=["source","container"],im=new Map;function sm(e){var t,n,r,a;let{source:i,container:s}=e,o=u(e,am);const{axis:l}=o;i&&(s=i);const c=null!==(t=im.get(s))&&void 0!==t?t:new Map;im.set(s,c);const d=null!==(n=o.target)&&void 0!==n?n:"self",h=null!==(r=c.get(d))&&void 0!==r?r:{},p=l+(null!==(a=o.offset)&&void 0!==a?a:[]).join(",");return h[p]||(h[p]=!o.target&&oo()?new ScrollTimeline({source:s,axis:l}):function(e){const t={value:0},n=rm(n=>{t.value=100*n[e.axis].progress},e);return{currentTime:t,cancel:n}}(m({container:s},o))),h[p]}const om=["axis","container"];function lm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{axis:n="y",container:r=document.scrollingElement}=t,a=u(t,om);if(!r)return Sr;const i=m({axis:n,container:r},a);return"function"===typeof e?function(e,t){return function(e){return 2===e.length}(e)?rm(n=>{e(n[t.axis].progress,n)},t):Af(e,sm(t))}(e,i):function(e,t){const n=sm(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:e=>(e.pause(),Af(t=>{e.time=e.iterationDuration*t},n))})}(e,i)}const cm=["container","target"],um=()=>({scrollX:na(0),scrollY:na(0),scrollXProgress:na(0),scrollYProgress:na(0)}),dm=e=>!!e&&!e.current;function hm(e,t){const n=function(e){const t=Ut(()=>na(e)),{isStatic:n}=(0,o.useContext)(qt);if(n){const[,n]=(0,o.useState)(e);(0,o.useEffect)(()=>t.on("change",n),[])}return t}(t()),r=()=>n.set(t());return r(),Vt(()=>{const t=()=>Ir.preRender(r,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),Ar(r)}}),n}function pm(e,t,n,r){if("function"===typeof e)return function(e){ea.current=[],e();const t=hm(ea.current,e);return ea.current=void 0,t}(e);if(void 0!==n&&!Array.isArray(n)&&"function"!==typeof t)return function(e,t,n,r){const a=Ut(()=>Object.keys(n)),i=Ut(()=>({}));for(const s of a)i[s]=pm(e,t,n[s],r);return i}(e,t,n,r);const a="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,n=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],r=$s(1+t<0||arguments.length<=1+t?void 0:arguments[1+t],2+t<0||arguments.length<=2+t?void 0:arguments[2+t],3+t<0||arguments.length<=3+t?void 0:arguments[3+t]);return e?r(n):r}(t,n,r);return Array.isArray(e)?fm(e,a):fm([e],e=>{let[t]=e;return a(t)})}function fm(e,t){const n=Ut(()=>[]);return hm(e,()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}const mm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gm=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},xm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var vm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ym=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],bm=(0,o.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c}=e,d=u(e,ym);return(0,o.createElement)("svg",m(m(m({ref:t},vm),{},{width:r,height:r,stroke:n,strokeWidth:i?24*Number(a)/Number(r):a,className:xm("lucide",s)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...c.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),wm=["className"],km=(e,t)=>{const n=(0,o.forwardRef)((n,r)=>{let{className:a}=n,i=u(n,wm);return(0,o.createElement)(bm,m({ref:r,iconNode:t,className:xm("lucide-".concat(mm(gm(e))),"lucide-".concat(e),a)},i))});return n.displayName=gm(e),n},Nm=km("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Sm=km("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),jm=km("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Cm=km("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Em=km("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Tm=km("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Im=km("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Am=km("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),Om=km("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),_m=km("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Rm=km("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Pm=km("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Mm=km("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Dm=km("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Fm=km("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Lm=km("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),zm=km("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Bm=km("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Um=km("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Wm=km("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Vm=km("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function Hm(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Hm(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Gm(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Hm(e))&&(r&&(r+=" "),r+=t);return r}const Km=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},qm="-",Xm=[],Ym=e=>{const t=Jm(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return Qm(e);const n=e.split(qm),r=""===n[0]&&n.length>1?1:0;return $m(n,r,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=r[e],a=n[e];return t?a?((e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(a,t):t:a||Xm}return n[e]||Xm}}},$m=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const r=e[t],a=n.nextPart.get(r);if(a){const n=$m(e,t+1,a);if(n)return n}const i=n.validators;if(null===i)return;const s=0===t?e.join(qm):e.slice(t).join(qm),o=i.length;for(let l=0;l<o;l++){const e=i[l];if(e.validator(s))return e.classGroupId}},Qm=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?"arbitrary.."+r:void 0})(),Jm=e=>{const{theme:t,classGroups:n}=e;return Zm(n,t)},Zm=(e,t)=>{const n=Km();for(const r in e){const a=e[r];eg(a,n,r,t)}return n},eg=(e,t,n,r)=>{const a=e.length;for(let i=0;i<a;i++){const a=e[i];tg(a,t,n,r)}},tg=(e,t,n,r)=>{"string"!==typeof e?"function"!==typeof e?ag(e,t,n,r):rg(e,t,n,r):ng(e,t,n)},ng=(e,t,n)=>{(""===e?t:ig(t,e)).classGroupId=n},rg=(e,t,n,r)=>{sg(e)?eg(e(r),t,n,r):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},ag=(e,t,n,r)=>{const a=Object.entries(e),i=a.length;for(let s=0;s<i;s++){const[e,i]=a[s];eg(i,ig(t,e),n,r)}},ig=(e,t)=>{let n=e;const r=t.split(qm),a=r.length;for(let i=0;i<a;i++){const e=r[i];let t=n.nextPart.get(e);t||(t=Km(),n.nextPart.set(e,t)),n=t}return n},sg=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,og=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const a=(a,i)=>{n[a]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(a(e,t),t):void 0},set(e,t){e in n?n[e]=t:a(e,t)}}},lg=[],cg=(e,t,n,r,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),ug=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,a=0,i=0;const s=e.length;for(let u=0;u<s;u++){const s=e[u];if(0===r&&0===a){if(":"===s){t.push(e.slice(i,u)),i=u+1;continue}if("/"===s){n=u;continue}}"["===s?r++:"]"===s?r--:"("===s?a++:")"===s&&a--}const o=0===t.length?e:e.slice(i);let l=o,c=!1;o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0);return cg(t,c,l,n&&n>i?n-i:void 0)};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):cg(lg,!1,t,void 0,!0)}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},dg=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let a=0;a<e.length;a++){const i=e[a],s="["===i[0],o=t.has(i);s||o?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(i)):r.push(i)}return r.length>0&&(r.sort(),n.push(...r)),n}},hg=/\s+/,pg=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=pg(e[r]))&&(n&&(n+=" "),n+=t);return n},fg=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a,i,s,o;const l=e=>{const t=i(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(hg);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=r(f?h.substring(0,p):h);if(!m){if(!f){l=e+(l.length>0?" "+l:l);continue}if(m=r(h),!m){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=0===u.length?"":1===u.length?u[0]:i(u).join(":"),x=d?g+"!":g,v=x+m;if(s.indexOf(v)>-1)continue;s.push(v);const y=a(m,f);for(let n=0;n<y.length;++n){const e=y[n];s.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,a);return s(e,n),n};return o=t=>{const r=n.reduce((e,t)=>t(e),e());return a=(e=>m({cache:og(e.cacheSize),parseClassName:ug(e),sortModifiers:dg(e)},Ym(e)))(r),i=a.cache.get,s=a.cache.set,o=l,l(t)},function(){return o(function(){let e,t,n=0,r="";for(;n<arguments.length;){var a;(e=(a=n++)<0||arguments.length<=a?void 0:arguments[a])&&(t=pg(e))&&(r&&(r+=" "),r+=t)}return r}(...arguments))}},mg=[],gg=e=>{const t=t=>t[e]||mg;return t.isThemeGetter=!0,t},xg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,vg=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yg=/^\d+\/\d+$/,bg=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wg=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kg=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ng=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sg=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jg=e=>yg.test(e),Cg=e=>!!e&&!Number.isNaN(Number(e)),Eg=e=>!!e&&Number.isInteger(Number(e)),Tg=e=>e.endsWith("%")&&Cg(e.slice(0,-1)),Ig=e=>bg.test(e),Ag=()=>!0,Og=e=>wg.test(e)&&!kg.test(e),_g=()=>!1,Rg=e=>Ng.test(e),Pg=e=>Sg.test(e),Mg=e=>!Fg(e)&&!Vg(e),Dg=e=>$g(e,ex,_g),Fg=e=>xg.test(e),Lg=e=>$g(e,tx,Og),zg=e=>$g(e,nx,Cg),Bg=e=>$g(e,Jg,_g),Ug=e=>$g(e,Zg,Pg),Wg=e=>$g(e,ax,Rg),Vg=e=>vg.test(e),Hg=e=>Qg(e,tx),Gg=e=>Qg(e,rx),Kg=e=>Qg(e,Jg),qg=e=>Qg(e,ex),Xg=e=>Qg(e,Zg),Yg=e=>Qg(e,ax,!0),$g=(e,t,n)=>{const r=xg.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Qg=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=vg.exec(e);return!!r&&(r[1]?t(r[1]):n)},Jg=e=>"position"===e||"percentage"===e,Zg=e=>"image"===e||"url"===e,ex=e=>"length"===e||"size"===e||"bg-size"===e,tx=e=>"length"===e,nx=e=>"number"===e,rx=e=>"family-name"===e,ax=e=>"shadow"===e,ix=(Symbol.toStringTag,()=>{const e=gg("color"),t=gg("font"),n=gg("text"),r=gg("font-weight"),a=gg("tracking"),i=gg("leading"),s=gg("breakpoint"),o=gg("container"),l=gg("spacing"),c=gg("radius"),u=gg("shadow"),d=gg("inset-shadow"),h=gg("text-shadow"),p=gg("drop-shadow"),f=gg("blur"),m=gg("perspective"),g=gg("aspect"),x=gg("ease"),v=gg("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Vg,Fg],b=()=>[Vg,Fg,l],w=()=>[jg,"full","auto",...b()],k=()=>[Eg,"none","subgrid",Vg,Fg],N=()=>["auto",{span:["full",Eg,Vg,Fg]},Eg,Vg,Fg],S=()=>[Eg,"auto",Vg,Fg],j=()=>["auto","min","max","fr",Vg,Fg],C=()=>["auto",...b()],E=()=>[jg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],T=()=>[e,Vg,Fg],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Kg,Bg,{position:[Vg,Fg]}],A=()=>["auto","cover","contain",qg,Dg,{size:[Vg,Fg]}],O=()=>[Tg,Hg,Lg],_=()=>["","none","full",c,Vg,Fg],R=()=>["",Cg,Hg,Lg],P=()=>[Cg,Tg,Kg,Bg],M=()=>["","none",f,Vg,Fg],D=()=>["none",Cg,Vg,Fg],F=()=>["none",Cg,Vg,Fg],L=()=>[Cg,Vg,Fg],z=()=>[jg,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ig],breakpoint:[Ig],color:[Ag],container:[Ig],"drop-shadow":[Ig],ease:["in","out","in-out"],font:[Mg],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ig],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ig],shadow:[Ig],spacing:["px",Cg],text:[Ig],"text-shadow":[Ig],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",jg,Fg,Vg,g]}],container:["container"],columns:[{columns:[Cg,Fg,Vg,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Eg,"auto",Vg,Fg]}],basis:[{basis:[jg,"full","auto",o,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Cg,jg,"auto","initial","none",Fg]}],grow:[{grow:["",Cg,Vg,Fg]}],shrink:[{shrink:["",Cg,Vg,Fg]}],order:[{order:[Eg,"first","last","none",Vg,Fg]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[o,"screen",...E()]}],"min-w":[{"min-w":[o,"screen","none",...E()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",n,Hg,Lg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Vg,zg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Tg,Fg]}],"font-family":[{font:[Gg,Fg,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Vg,Fg]}],"line-clamp":[{"line-clamp":[Cg,"none",Vg,zg]}],leading:[{leading:[i,...b()]}],"list-image":[{"list-image":["none",Vg,Fg]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Vg,Fg]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Cg,"from-font","auto",Vg,Lg]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[Cg,"auto",Vg,Fg]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vg,Fg]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vg,Fg]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Eg,Vg,Fg],radial:["",Vg,Fg],conic:[Eg,Vg,Fg]},Xg,Ug]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:_()}],"rounded-s":[{"rounded-s":_()}],"rounded-e":[{"rounded-e":_()}],"rounded-t":[{"rounded-t":_()}],"rounded-r":[{"rounded-r":_()}],"rounded-b":[{"rounded-b":_()}],"rounded-l":[{"rounded-l":_()}],"rounded-ss":[{"rounded-ss":_()}],"rounded-se":[{"rounded-se":_()}],"rounded-ee":[{"rounded-ee":_()}],"rounded-es":[{"rounded-es":_()}],"rounded-tl":[{"rounded-tl":_()}],"rounded-tr":[{"rounded-tr":_()}],"rounded-br":[{"rounded-br":_()}],"rounded-bl":[{"rounded-bl":_()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Cg,Vg,Fg]}],"outline-w":[{outline:["",Cg,Hg,Lg]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",u,Yg,Wg]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",d,Yg,Wg]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[Cg,Lg]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",h,Yg,Wg]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[Cg,Vg,Fg]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Cg]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[Vg,Fg]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Cg]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Vg,Fg]}],filter:[{filter:["","none",Vg,Fg]}],blur:[{blur:M()}],brightness:[{brightness:[Cg,Vg,Fg]}],contrast:[{contrast:[Cg,Vg,Fg]}],"drop-shadow":[{"drop-shadow":["","none",p,Yg,Wg]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",Cg,Vg,Fg]}],"hue-rotate":[{"hue-rotate":[Cg,Vg,Fg]}],invert:[{invert:["",Cg,Vg,Fg]}],saturate:[{saturate:[Cg,Vg,Fg]}],sepia:[{sepia:["",Cg,Vg,Fg]}],"backdrop-filter":[{"backdrop-filter":["","none",Vg,Fg]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[Cg,Vg,Fg]}],"backdrop-contrast":[{"backdrop-contrast":[Cg,Vg,Fg]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Cg,Vg,Fg]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Cg,Vg,Fg]}],"backdrop-invert":[{"backdrop-invert":["",Cg,Vg,Fg]}],"backdrop-opacity":[{"backdrop-opacity":[Cg,Vg,Fg]}],"backdrop-saturate":[{"backdrop-saturate":[Cg,Vg,Fg]}],"backdrop-sepia":[{"backdrop-sepia":["",Cg,Vg,Fg]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Vg,Fg]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Cg,"initial",Vg,Fg]}],ease:[{ease:["linear","initial",x,Vg,Fg]}],delay:[{delay:[Cg,Vg,Fg]}],animate:[{animate:["none",v,Vg,Fg]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Vg,Fg]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:F()}],"scale-x":[{"scale-x":F()}],"scale-y":[{"scale-y":F()}],"scale-z":[{"scale-z":F()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[Vg,Fg,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vg,Fg]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vg,Fg]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[Cg,Hg,Lg,zg]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),sx=fg(ix);function ox(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sx(Gm(t))}const lx=["children","className","title","icon","accent","animate","glowOnHover"],cx=e=>{let{children:t,className:n,title:r,icon:a,accent:i="teal",animate:s=!0,glowOnHover:o=!0}=e,l=u(e,lx);const c=s?uu.div:"div",d=s?{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"}}:{};return(0,zt.jsxs)(c,m(m(m({className:ox("relative overflow-hidden rounded-2xl","bg-black/40 backdrop-blur-xl","border transition-all duration-300",{teal:"border-teal-500/30 hover:border-teal-500/50",rose:"border-rose-500/30 hover:border-rose-500/50",indigo:"border-indigo-500/30 hover:border-indigo-500/50",white:"border-white/10 hover:border-white/20"}[i],o&&{teal:"hover:shadow-[0_0_30px_rgba(20,184,166,0.2)]",rose:"hover:shadow-[0_0_30px_rgba(244,63,94,0.2)]",indigo:"hover:shadow-[0_0_30px_rgba(99,102,241,0.2)]",white:"hover:shadow-[0_0_30px_rgba(255,255,255,0.1)]"}[i],n)},d),l),{},{children:[r&&(0,zt.jsxs)("div",{className:"flex items-center gap-3 border-b border-white/5 px-5 py-4",children:[a&&(0,zt.jsx)("span",{className:"text-xl",children:a}),(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold uppercase tracking-wider text-white/90",children:r})]}),(0,zt.jsx)("div",{className:"p-5",children:t})]}))},ux="".concat("https://srv1304213.hstgr.cloud/api","/api"),dx=e=>{var t,n,r,a,i,s,l,c,u,d;let{onClose:h,onSignUp:p}=e;const[f,m]=(0,o.useState)({portfolio:null,bot:null,prediction:null,sentiment:null,competition:null,stats:null}),[g,x]=(0,o.useState)(!0),[v,y]=(0,o.useState)("portfolio"),[b,w]=(0,o.useState)(!0);(0,o.useEffect)(()=>{k();const e=setInterval(()=>{b&&k()},5e3);return()=>clearInterval(e)},[b]);const k=async()=>{try{const[e,t,n,r,a,i]=await Promise.all([fetch("".concat(ux,"/demo/portfolio")).then(e=>e.json()),fetch("".concat(ux,"/demo/bot")).then(e=>e.json()),fetch("".concat(ux,"/demo/prediction/BTC")).then(e=>e.json()),fetch("".concat(ux,"/demo/sentiment/BTC")).then(e=>e.json()),fetch("".concat(ux,"/demo/competition")).then(e=>e.json()),fetch("".concat(ux,"/demo/status")).then(e=>e.json())]);m({portfolio:e,bot:t,prediction:n,sentiment:r,competition:a,stats:i}),x(!1)}catch(e){console.error("Error fetching demo data:",e),x(!1)}},N=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),S=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%"),j=[{id:"portfolio",label:"Portfolio",icon:Fm},{id:"bot",label:"AI Bot",icon:Sm},{id:"predictions",label:"ML Predict",icon:Nm},{id:"sentiment",label:"Sentiment",icon:Lm},{id:"competition",label:"Compete",icon:zm}];return g?(0,zt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-xl",children:(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)(uu.div,{className:"w-16 h-16 mx-auto mb-4 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,zt.jsx)("p",{className:"text-slate-400 font-mono",children:"Loading Demo Mode..."})]})}):(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-[#050505]/95 backdrop-blur-xl overflow-auto",children:[(0,zt.jsxs)("div",{className:"sticky top-0 z-10 bg-black/80 backdrop-blur-xl border-b border-white/5",children:[(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-500/20 border border-amber-500/30",children:[(0,zt.jsx)(Rm,{size:14,className:"text-amber-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-amber-400",children:"DEMO MODE"})]}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Experience the full platform with simulated data"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("button",{onClick:()=>w(!b),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-mono transition-all ".concat(b?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-slate-500/20 text-slate-400 border border-slate-500/30"),children:[b?(0,zt.jsx)(Bm,{size:14}):(0,zt.jsx)(Rm,{size:14}),b?"Live":"Paused"]}),(0,zt.jsxs)("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold text-sm hover:shadow-lg hover:shadow-teal-500/25 transition-all",children:[(0,zt.jsx)(Dm,{size:14}),"Sign Up Free"]}),(0,zt.jsx)("button",{onClick:h,className:"p-2 text-slate-400 hover:text-white transition-colors",children:(0,zt.jsx)(Um,{size:20})})]})]}),(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-4 pb-3",children:(0,zt.jsx)("div",{className:"flex gap-2",children:j.map(e=>(0,zt.jsxs)("button",{onClick:()=>y(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat(v===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"text-slate-500 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))})})]}),(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,zt.jsxs)(rn,{mode:"wait",children:["portfolio"===v&&f.portfolio&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zt.jsxs)(cx,{accent:"teal",className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Fm,{className:"text-teal-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Total Value"})]}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:N(f.portfolio.total_value)}),(0,zt.jsxs)("p",{className:"text-sm text-emerald-400 mt-1",children:[S((f.portfolio.total_value-1e5)/1e5*100)," all time"]})]}),(0,zt.jsxs)(cx,{accent:"blue",className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Wm,{className:"text-blue-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Cash Available"})]}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:N(f.portfolio.cash_balance)}),(0,zt.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Ready to trade"})]}),(0,zt.jsxs)(cx,{accent:"purple",className:"p-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(jm,{className:"text-purple-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Positions"})]}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:(null===(t=f.portfolio.positions)||void 0===t?void 0:t.length)||0}),(0,zt.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Active holdings"})]})]}),(0,zt.jsx)(cx,{title:"Holdings",icon:"\ud83d\udcca",accent:"teal",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(n=f.portfolio.positions)||void 0===n?void 0:n.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-teal-500/20 to-transparent flex items-center justify-center",children:(0,zt.jsx)("span",{className:"font-bold text-teal-400",children:e.symbol})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-semibold text-white",children:e.symbol}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.quantity," units @ ",N(e.avg_price)]})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"font-semibold text-white",children:N(e.value)}),(0,zt.jsxs)("p",{className:"text-sm ".concat(e.pnl>=0?"text-emerald-400":"text-red-400"),children:[N(e.pnl)," (",S(e.pnl_percent),")"]})]})]},t))})})]},"portfolio"),"bot"===v&&f.bot&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,zt.jsx)(cx,{title:"Bot Status",icon:"\ud83e\udd16",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Status"}),(0,zt.jsxs)("span",{className:"flex items-center gap-2 text-emerald-400",children:[(0,zt.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),null===(r=f.bot.status)||void 0===r?void 0:r.toUpperCase()]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Strategy"}),(0,zt.jsx)("span",{className:"text-white capitalize",children:f.bot.strategy})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Capital Allocated"}),(0,zt.jsx)("span",{className:"text-white",children:N(f.bot.capital_allocated)})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Win Rate"}),(0,zt.jsxs)("span",{className:"text-teal-400",children:[f.bot.win_rate,"%"]})]})]})}),(0,zt.jsx)(cx,{title:"Performance",icon:"\ud83d\udcc8",accent:"blue",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Today's Trades"}),(0,zt.jsx)("span",{className:"text-white",children:f.bot.trades_today})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Today's P&L"}),(0,zt.jsx)("span",{className:f.bot.pnl_today>=0?"text-emerald-400":"text-red-400",children:N(f.bot.pnl_today)})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Total P&L"}),(0,zt.jsx)("span",{className:f.bot.pnl_total>=0?"text-emerald-400":"text-red-400",children:N(f.bot.pnl_total)})]})]})})]}),(0,zt.jsx)(cx,{title:"Bot Positions",icon:"\ud83d\udcca",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(a=f.bot.active_positions)||void 0===a?void 0:a.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-mono ".concat("LONG"===e.side?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:e.side}),(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-slate-500 text-sm",children:["Size: ",e.size]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-slate-400 text-sm",children:["Entry: ",N(e.entry)]}),(0,zt.jsx)("p",{className:e.current_pnl>=0?"text-emerald-400":"text-red-400",children:N(e.current_pnl)})]})]},t))})})]},"bot"),"predictions"===v&&f.prediction&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,zt.jsxs)(cx,{title:"BTC Price Prediction (24h)",icon:"\ud83e\udde0",accent:"purple",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Direction"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat(null!==(i=f.prediction.direction)&&void 0!==i&&i.includes("bullish")?"text-emerald-400":null!==(s=f.prediction.direction)&&void 0!==s&&s.includes("bearish")?"text-red-400":"text-slate-400"),children:f.prediction.direction})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Confidence"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-teal-400",children:[(100*f.prediction.confidence).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"24h Target"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:N(f.prediction.target_24h)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Volatility"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-amber-400 capitalize",children:f.prediction.volatility})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Support Level"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:N(f.prediction.support)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Resistance Level"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-red-400",children:N(f.prediction.resistance)})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center gap-3",children:[(0,zt.jsx)(Nm,{className:"text-amber-400",size:24}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-semibold text-amber-400",children:"Demo Prediction"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:"Sign up to access real ML models trained on live market data"})]}),(0,zt.jsx)("button",{onClick:p,className:"ml-auto px-4 py-2 rounded-lg bg-amber-500/20 text-amber-400 text-sm font-semibold hover:bg-amber-500/30 transition-colors",children:"Unlock Full Access"})]})]},"predictions"),"sentiment"===v&&f.sentiment&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,zt.jsxs)(cx,{title:"Social Sentiment Analysis",icon:"\ud83d\udcac",accent:"blue",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Overall"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat("bullish"===f.sentiment.overall?"text-emerald-400":"bearish"===f.sentiment.overall?"text-red-400":"text-slate-400"),children:f.sentiment.overall})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Score"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-teal-400",children:[(100*f.sentiment.score).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Total Mentions"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:null===(l=f.sentiment.total_mentions)||void 0===l?void 0:l.toLocaleString()})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Fear & Greed"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-amber-400",children:f.sentiment.fear_greed_index})]})]}),(0,zt.jsxs)("div",{className:"mb-4",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:"Trending"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(c=f.sentiment.trending_hashtags)||void 0===c?void 0:c.map((e,t)=>(0,zt.jsx)("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-sm",children:e},t))})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Whale Activity"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-purple-400 capitalize",children:f.sentiment.whale_activity})]})]})},"sentiment"),"competition"===v&&f.competition&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,zt.jsxs)(cx,{title:f.competition.name,icon:"\ud83c\udfc6",accent:"amber",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Your Rank"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-amber-400",children:["#",f.competition.user_rank]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Your P&L"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-emerald-400",children:["+",null===(u=f.competition.user_pnl)||void 0===u?void 0:u.toFixed(2),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Prize Pool"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:N(f.competition.prize_pool)})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Time Left"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-teal-400",children:f.competition.time_remaining})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Leaderboard"}),null===(d=f.competition.leaderboard)||void 0===d?void 0:d.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(0===t?"bg-amber-500/10 border border-amber-500/20":"bg-white/5"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold ".concat(0===t?"bg-amber-500 text-black":1===t?"bg-slate-400 text-black":2===t?"bg-amber-700 text-white":"bg-slate-700 text-white"),children:e.rank}),(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.name})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-bold text-emerald-400",children:["+",e.pnl_percent,"%"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.trades," trades"]})]})]},t))]})]})},"competition")]})}),(0,zt.jsx)("div",{className:"sticky bottom-0 bg-gradient-to-t from-black via-black/90 to-transparent py-6",children:(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-teal-500/10 via-cyan-500/10 to-purple-500/10 border border-white/10",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-semibold text-white",children:"Ready to trade for real?"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:"Sign up now and get $100 bonus on your first $500 deposit"})]}),(0,zt.jsxs)("button",{onClick:p,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold hover:shadow-lg hover:shadow-teal-500/25 transition-all flex items-center gap-2",children:["Start Trading",(0,zt.jsx)(Vm,{size:18})]})]})})})]})},hx=e=>{let{onGetStarted:t}=e;const[n,r]=(0,o.useState)(0),[a,i]=(0,o.useState)({x:0,y:0}),[s,l]=(0,o.useState)(!1),c=(0,o.useRef)(null),{scrollYProgress:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{container:t,target:n}=e,r=u(e,cm);const a=Ut(um),i=(0,o.useRef)(null),s=(0,o.useRef)(!1),l=(0,o.useCallback)(()=>(i.current=lm((e,t)=>{let{x:n,y:r}=t;a.scrollX.set(n.current),a.scrollXProgress.set(n.progress),a.scrollY.set(r.current),a.scrollYProgress.set(r.progress)},m(m({},r),{},{container:(null===t||void 0===t?void 0:t.current)||void 0,target:(null===n||void 0===n?void 0:n.current)||void 0})),()=>{var e;null===(e=i.current)||void 0===e||e.call(i)}),[t,n,JSON.stringify(r.offset)]);return Vt(()=>(s.current=!1,dm(t)||dm(n)?void(s.current=!0):l()),[l]),(0,o.useEffect)(()=>s.current?(er(!dm(t),"Container ref is defined but not hydrated","use-scroll-ref"),er(!dm(n),"Target ref is defined but not hydrated","use-scroll-ref"),l()):void 0,[l]),a}(),h=pm(d,[0,1],["0%","50%"]),p=pm(d,[0,.3],[1,0]);(0,o.useEffect)(()=>{const e=e=>{i({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),(0,o.useEffect)(()=>{const e=setInterval(()=>{r(e=>(e+1)%f.length)},4e3);return()=>clearInterval(e)},[]);const f=[{icon:Nm,title:"AI-Powered Analysis",description:"Advanced ML models predict price movements with confidence scoring",color:"#A855F7",gradient:"from-purple-500/20 to-transparent"},{icon:Sm,title:"Autonomous Trading Bot",description:"Configure strategies and let AI execute trades 24/7",color:"#14B8A6",gradient:"from-teal-500/20 to-transparent"},{icon:jm,title:"Real-Time Analytics",description:"Live market data, sentiment analysis, and whale alerts",color:"#3B82F6",gradient:"from-blue-500/20 to-transparent"},{icon:Cm,title:"Trading Competitions",description:"Compete with traders worldwide in daily challenges",color:"#F59E0B",gradient:"from-amber-500/20 to-transparent"}],g=[{value:"$2.4B+",label:"Trading Volume",icon:Em},{value:"50K+",label:"Active Traders",icon:Tm},{value:"99.9%",label:"Uptime",icon:Im},{value:"24/7",label:"AI Monitoring",icon:Am}];return(0,zt.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white overflow-hidden",children:[(0,zt.jsxs)("div",{className:"fixed inset-0 pointer-events-none",children:[(0,zt.jsx)(uu.div,{className:"absolute w-[800px] h-[800px] rounded-full bg-teal-500/10 blur-[120px]",style:{y:h},animate:{x:[0,100,0],y:[0,50,0]},transition:{duration:20,repeat:1/0,ease:"linear"}}),(0,zt.jsx)(uu.div,{className:"absolute right-0 top-1/4 w-[600px] h-[600px] rounded-full bg-purple-500/10 blur-[100px]",animate:{x:[0,-50,0],y:[0,100,0]},transition:{duration:15,repeat:1/0,ease:"linear"}}),(0,zt.jsx)(uu.div,{className:"absolute left-1/4 bottom-0 w-[500px] h-[500px] rounded-full bg-blue-500/10 blur-[80px]",animate:{x:[0,80,0],y:[0,-60,0]},transition:{duration:18,repeat:1/0,ease:"linear"}}),(0,zt.jsx)("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),\n                            linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"50px 50px"}}),(0,zt.jsx)(uu.div,{className:"absolute w-[400px] h-[400px] rounded-full bg-teal-500/5 blur-[60px] pointer-events-none",animate:{x:a.x-200,y:a.y-200},transition:{type:"spring",damping:30,stiffness:200}})]}),(0,zt.jsx)(uu.nav,{className:"fixed top-0 left-0 right-0 z-50 backdrop-blur-xl bg-black/20 border-b border-white/5",initial:{y:-100},animate:{y:0},transition:{duration:.5},children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:(0,zt.jsx)(Om,{className:"w-6 h-6 text-white"})}),(0,zt.jsx)("span",{className:"text-xl font-bold tracking-wider",children:"OracleIQ"})]}),(0,zt.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,zt.jsx)("a",{href:"#features",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Features"}),(0,zt.jsx)("a",{href:"#pricing",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Pricing"}),(0,zt.jsx)("a",{href:"#testimonials",className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Reviews"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-4",children:(0,zt.jsx)("button",{onClick:t,className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-teal-500 to-teal-600 text-white font-semibold text-sm hover:shadow-lg hover:shadow-teal-500/25 transition-all",children:"Launch App"})})]})}),(0,zt.jsxs)("section",{ref:c,className:"relative min-h-screen flex items-center justify-center pt-20",children:[(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-20 text-center",children:[(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-purple-500/20 to-teal-500/20 border border-purple-500/30 mb-8",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-purple-500 text-white text-xs font-bold",children:"PRO"}),(0,zt.jsx)("span",{className:"text-sm text-white font-medium",children:"Next-Gen Algorithmic Trading Platform"})]}),(0,zt.jsxs)(uu.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"text-5xl md:text-7xl lg:text-8xl font-bold mb-6 leading-tight",children:[(0,zt.jsx)("span",{className:"bg-gradient-to-r from-white via-white to-slate-400 bg-clip-text text-transparent",children:"Create Specialized"}),(0,zt.jsx)("br",{}),(0,zt.jsx)("span",{className:"bg-gradient-to-r from-teal-400 via-cyan-400 to-teal-400 bg-clip-text text-transparent",children:"AI Trading Agents"})]}),(0,zt.jsx)(uu.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-4",children:"Let's make something incredible!"}),(0,zt.jsx)(uu.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},className:"text-base md:text-lg text-slate-500 max-w-3xl mx-auto mb-10",children:"Harness the power of machine learning, real-time analytics, and autonomous trading to maximize your crypto and stock portfolio performance."}),(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-16",children:[(0,zt.jsxs)("button",{onClick:t,className:"group px-8 py-4 rounded-2xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold text-lg hover:shadow-2xl hover:shadow-teal-500/30 transition-all flex items-center gap-2","data-testid":"start-trading-btn",children:["Start Trading Free",(0,zt.jsx)(_m,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),(0,zt.jsxs)("button",{onClick:()=>l(!0),className:"group px-8 py-4 rounded-2xl bg-white/5 border border-white/10 text-white font-semibold text-lg hover:bg-white/10 transition-all flex items-center gap-2","data-testid":"try-demo-btn",children:[(0,zt.jsx)(Rm,{className:"w-5 h-5"}),"Try Demo Mode"]})]}),(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.8,duration:1},className:"relative max-w-5xl mx-auto",children:[(0,zt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent z-10 pointer-events-none"}),(0,zt.jsx)("div",{className:"relative rounded-2xl overflow-hidden border border-white/10 shadow-2xl shadow-teal-500/10",children:(0,zt.jsx)("div",{className:"aspect-[16/9] bg-gradient-to-br from-slate-900 to-slate-950 p-8",children:(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 h-full",children:[(0,zt.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,zt.jsxs)("div",{className:"h-2/3 rounded-xl bg-white/5 border border-white/10 p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,zt.jsx)(Pm,{className:"w-5 h-5 text-teal-400"}),(0,zt.jsx)("span",{className:"text-sm font-medium",children:"BTC/USD"}),(0,zt.jsx)("span",{className:"text-xs text-green-400 ml-auto",children:"+2.34%"})]}),(0,zt.jsx)("div",{className:"h-[calc(100%-40px)] flex items-end gap-1",children:Array.from({length:30}).map((e,t)=>(0,zt.jsx)(uu.div,{className:"flex-1 bg-gradient-to-t from-teal-500/50 to-teal-400/20 rounded-t",initial:{height:0},animate:{height:"".concat(30+70*Math.random(),"%")},transition:{delay:1+.02*t,duration:.5}},t))})]}),(0,zt.jsxs)("div",{className:"h-1/3 grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"rounded-xl bg-white/5 border border-white/10 p-4",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Portfolio Value"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white",children:"$127,432.50"}),(0,zt.jsx)("div",{className:"text-xs text-green-400",children:"+$2,340.50 (1.87%)"})]}),(0,zt.jsxs)("div",{className:"rounded-xl bg-white/5 border border-white/10 p-4",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"AI Prediction"}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-teal-400",children:"BULLISH"}),(0,zt.jsx)("div",{className:"text-xs text-slate-400",children:"89% confidence"})]})]})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"rounded-xl bg-white/5 border border-white/10 p-4 h-1/2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,zt.jsx)(Mm,{className:"w-5 h-5 text-purple-400"}),(0,zt.jsx)("span",{className:"text-sm font-medium",children:"Holdings"})]}),(0,zt.jsx)("div",{className:"space-y-2",children:["BTC","ETH","SOL"].map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(0===t?"bg-amber-400":1===t?"bg-purple-400":"bg-teal-400")}),(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:e}),(0,zt.jsxs)("span",{className:"text-xs text-white ml-auto",children:[40-10*t,"%"]})]},e))})]}),(0,zt.jsxs)("div",{className:"rounded-xl bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/20 p-4 h-1/2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Sm,{className:"w-5 h-5 text-teal-400"}),(0,zt.jsx)("span",{className:"text-sm font-medium",children:"AI Bot"})]}),(0,zt.jsx)("div",{className:"text-xs text-green-400 mb-2",children:"\u25cf Running"}),(0,zt.jsx)("div",{className:"text-xs text-slate-400",children:"Strategy: Moderate"}),(0,zt.jsx)("div",{className:"text-xs text-slate-400",children:"Today's P&L: +$342.50"})]})]})]})})})]})]}),(0,zt.jsx)(uu.div,{className:"absolute bottom-10 left-1/2 -translate-x-1/2",style:{opacity:p},animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:(0,zt.jsx)("div",{className:"w-6 h-10 rounded-full border-2 border-white/20 flex items-start justify-center p-2",children:(0,zt.jsx)(uu.div,{className:"w-1.5 h-1.5 rounded-full bg-teal-400",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})})]}),(0,zt.jsx)("section",{className:"relative py-20 border-y border-white/5",children:(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:g.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},className:"text-center",children:[(0,zt.jsx)(e.icon,{className:"w-8 h-8 text-teal-400 mx-auto mb-4"}),(0,zt.jsx)("div",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:e.value}),(0,zt.jsx)("div",{className:"text-sm text-slate-500",children:e.label})]},e.label))})})}),(0,zt.jsx)("section",{id:"features",className:"relative py-32",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[(0,zt.jsxs)("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Everything You Need to",(0,zt.jsx)("span",{className:"bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent",children:" Win"})]}),(0,zt.jsx)("p",{className:"text-lg text-slate-400 max-w-2xl mx-auto",children:"Powerful tools designed for both beginners and professional traders"})]}),(0,zt.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((e,t)=>(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},onMouseEnter:()=>r(t),className:"relative p-6 rounded-2xl border transition-all duration-500 cursor-pointer ".concat(n===t?"bg-white/5 border-white/20 shadow-xl":"bg-white/[0.02] border-white/5 hover:border-white/10"),children:[(0,zt.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br ".concat(e.gradient," opacity-0 transition-opacity duration-500 ").concat(n===t?"opacity-100":"")}),(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4",style:{backgroundColor:"".concat(e.color,"20")},children:(0,zt.jsx)(e.icon,{className:"w-6 h-6",style:{color:e.color}})}),(0,zt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:e.description})]})]},e.title))})]})}),(0,zt.jsx)("section",{className:"relative py-32",children:(0,zt.jsx)("div",{className:"max-w-4xl mx-auto px-6 text-center",children:(0,zt.jsxs)(uu.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"relative p-12 rounded-3xl bg-gradient-to-br from-teal-500/10 via-transparent to-purple-500/10 border border-white/10",children:[(0,zt.jsx)(Dm,{className:"w-12 h-12 text-teal-400 mx-auto mb-6"}),(0,zt.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Transform Your Trading?"}),(0,zt.jsx)("p",{className:"text-lg text-slate-400 mb-8 max-w-xl mx-auto",children:"Join thousands of traders who are already using AI to make smarter decisions. Start with $100,000 in virtual money - no risk, all reward."}),(0,zt.jsxs)("button",{onClick:t,className:"group px-10 py-4 rounded-2xl bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold text-lg hover:shadow-2xl hover:shadow-teal-500/30 transition-all inline-flex items-center gap-2",children:["Get Started Now",(0,zt.jsx)(_m,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})})}),(0,zt.jsx)("footer",{className:"relative py-12 border-t border-white/5",children:(0,zt.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:(0,zt.jsx)(Om,{className:"w-4 h-4 text-white"})}),(0,zt.jsx)("span",{className:"font-bold",children:"OracleIQTrader"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[(0,zt.jsx)("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"}),(0,zt.jsx)("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms"}),(0,zt.jsx)("a",{href:"#",className:"hover:text-white transition-colors",children:"Support"})]}),(0,zt.jsx)("div",{className:"text-sm text-slate-500",children:"\xa9 2026 OracleIQTrader.com. All rights reserved."})]})})}),(0,zt.jsx)(rn,{children:s&&(0,zt.jsx)(dx,{onClose:()=>l(!1),onSignUp:t})})]})},px=["children","variant","size","icon","className","disabled"],fx=e=>{let{children:t,variant:n="teal",size:r="default",icon:a,className:i,disabled:s}=e,o=u(e,px);return(0,zt.jsxs)(uu.button,m(m({className:ox("relative inline-flex items-center justify-center gap-2","rounded-lg border font-mono font-medium","transition-all duration-300","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none",{teal:"bg-teal-500/10 text-teal-400 border-teal-500/50 hover:bg-teal-500/20 hover:shadow-[0_0_25px_rgba(20,184,166,0.4)]",rose:"bg-rose-500/10 text-rose-400 border-rose-500/50 hover:bg-rose-500/20 hover:shadow-[0_0_25px_rgba(244,63,94,0.4)]",indigo:"bg-indigo-500/10 text-indigo-400 border-indigo-500/50 hover:bg-indigo-500/20 hover:shadow-[0_0_25px_rgba(99,102,241,0.4)]",white:"bg-white/5 text-white border-white/20 hover:bg-white/10 hover:shadow-[0_0_25px_rgba(255,255,255,0.2)]",ghost:"bg-transparent text-slate-400 border-transparent hover:text-white hover:bg-white/5"}[n],{sm:"px-3 py-1.5 text-xs",default:"px-5 py-2.5 text-sm",lg:"px-7 py-3 text-base"}[r],i),whileHover:{scale:s?1:1.02},whileTap:{scale:s?1:.98},disabled:s},o),{},{children:[a&&(0,zt.jsx)("span",{className:"text-lg",children:a}),t]}))},mx=km("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),gx=km("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),xx=()=>{const{loginWithGoogle:e,isLoading:t}=Lh(),n=[{icon:Nm,title:"AI-Powered Analysis",desc:"Multi-agent consensus system"},{icon:mx,title:"Real-Time Markets",desc:"Live crypto & stock prices"},{icon:Im,title:"Secure Trading",desc:"Enterprise-grade security"}];return(0,zt.jsxs)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center relative overflow-hidden",children:[(0,zt.jsx)(Tf,{}),(0,zt.jsxs)(uu.div,{className:"relative z-10 w-full max-w-md mx-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,zt.jsxs)("div",{className:"text-center mb-8",children:[(0,zt.jsx)(uu.div,{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/30 mb-4",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20},children:(0,zt.jsx)(Om,{className:"text-teal-400",size:36})}),(0,zt.jsx)("h1",{className:"font-heading text-3xl font-bold uppercase tracking-wider text-white mb-2",children:"OracleIQTrader"}),(0,zt.jsx)("p",{className:"text-slate-500 font-mono text-sm",children:"AI-Powered Trading Platform"})]}),(0,zt.jsxs)("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-8",children:[(0,zt.jsx)("h2",{className:"text-xl font-heading font-semibold text-white mb-6 text-center",children:"Sign in to continue"}),(0,zt.jsxs)(fx,{onClick:e,variant:"white",className:"w-full py-4 text-base",disabled:t,"data-testid":"google-login-btn",children:[(0,zt.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,zt.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,zt.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,zt.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,zt.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 my-6",children:[(0,zt.jsx)("div",{className:"flex-1 h-px bg-white/10"}),(0,zt.jsx)("span",{className:"text-slate-600 text-xs font-mono",children:"OR"}),(0,zt.jsx)("div",{className:"flex-1 h-px bg-white/10"})]}),(0,zt.jsxs)(fx,{onClick:()=>window.location.href="/",variant:"ghost",className:"w-full","data-testid":"guest-continue-btn",children:[(0,zt.jsx)(gx,{size:16}),"Continue as Guest"]}),(0,zt.jsx)("div",{className:"mt-8 pt-6 border-t border-white/5",children:(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-4",children:n.map((e,t)=>(0,zt.jsxs)(uu.div,{className:"text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},children:[(0,zt.jsx)(e.icon,{size:20,className:"text-teal-400 mx-auto mb-2"}),(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:e.title})]},e.title))})})]}),(0,zt.jsx)("p",{className:"text-center text-slate-600 text-xs font-mono mt-6",children:"Powered by OracleIQ AI \u2022 Enterprise Grade Security"})]})]})},vx=()=>{const e=Ie(),t=Ce(),{handleAuthCallback:n}=Lh(),r=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(r.current)return;r.current=!0;(async()=>{const r=t.hash,a=new URLSearchParams(r.replace("#","")).get("session_id");if(!a)return console.error("No session_id found in URL"),void e("/login",{replace:!0});try{const t=await n(a);e("/",{replace:!0,state:{user:t}})}catch(i){console.error("Auth callback error:",i),e("/login",{replace:!0})}})()},[t.hash,n,e]),(0,zt.jsx)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-teal-500 border-t-transparent mx-auto mb-4"}),(0,zt.jsx)("p",{className:"text-slate-400 font-mono",children:"Authenticating..."})]})})},yx=e=>{let{children:t,variant:n="default",pulse:r=!1,icon:a,className:i}=e;return(0,zt.jsxs)("span",{className:ox("inline-flex items-center gap-2 rounded-full border px-3 py-1.5","text-xs font-medium font-mono uppercase tracking-wider","backdrop-blur-sm transition-all duration-300",{default:"border-white/10 bg-white/5 text-slate-300",active:"border-teal-500/50 bg-teal-500/10 text-teal-400",warning:"border-amber-500/50 bg-amber-500/10 text-amber-400",danger:"border-rose-500/50 bg-rose-500/10 text-rose-400",success:"border-emerald-500/50 bg-emerald-500/10 text-emerald-400",info:"border-indigo-500/50 bg-indigo-500/10 text-indigo-400"}[n],r&&"animate-pulse",i),children:[a&&(0,zt.jsx)("span",{className:"text-sm",children:a}),r&&"active"===n&&(0,zt.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,zt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"}),(0,zt.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-teal-500"})]}),t]})},bx=km("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),wx=km("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),kx=km("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Nx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)(!1),[s,l]=(0,o.useState)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(null),d=(0,o.useRef)(0),{onMessage:h,onConnect:p,onDisconnect:f,reconnect:m=!0,maxReconnectAttempts:g=5,reconnectInterval:x=3e3}=t,v=(0,o.useCallback)(()=>{var t;if((null===(t=c.current)||void 0===t?void 0:t.readyState)!==WebSocket.OPEN)try{const t=e.replace("https://","wss://").replace("http://","ws://");c.current=new WebSocket(t),c.current.onopen=()=>{i(!0),l(null),d.current=0,null===p||void 0===p||p()},c.current.onmessage=e=>{try{const t=JSON.parse(e.data);r(t),null===h||void 0===h||h(t)}catch(Yje){console.error("WebSocket message parse error:",Yje)}},c.current.onerror=e=>{l("WebSocket connection error"),console.error("WebSocket error:",e)},c.current.onclose=()=>{i(!1),null===f||void 0===f||f(),m&&d.current<g&&(d.current+=1,u.current=setTimeout(()=>{v()},x))}}catch(n){l(n.message)}},[e,p,f,h,m,g,x]),y=(0,o.useCallback)(()=>{u.current&&clearTimeout(u.current),c.current&&c.current.close()},[]),b=(0,o.useCallback)(e=>{var t;(null===(t=c.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&c.current.send("string"===typeof e?e:JSON.stringify(e))},[]);return(0,o.useEffect)(()=>(v(),()=>{y()}),[v,y]),{data:n,isConnected:a,error:s,sendMessage:b,connect:v,disconnect:y}};var Sx;const jx="".concat("https://srv1304213.hstgr.cloud/api","/api"),Cx=(null===(Sx="https://srv1304213.hstgr.cloud/api")?void 0:Sx.replace("https://","wss://").replace("http://","ws://"))+"/ws/prices",Ex=e=>{let{onClose:t,symbols:n=["BTC","ETH","SPY"]}=e;const[r,a]=(0,o.useState)({}),[i,s]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!0),{data:u,isConnected:d,error:h}=Nx(Cx,{onMessage:e=>{if("price_update"===e.type&&e.data){const t={};e.data.forEach(e=>{t[e.symbol]=e}),a(e=>m(m({},e),t)),s(!1)}},onConnect:()=>{console.log("WebSocket connected for live prices")},reconnect:!0,maxReconnectAttempts:3});(0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(jx,"/market/prices")),t={};e.data.forEach(e=>{t[e.symbol]=e}),a(e=>m(m({},e),t)),s(!1)}catch(e){console.error("Error fetching markets:",e)}};if(e(),!d){const t=setInterval(e,5e3);return()=>clearInterval(t)}},[d]);const p=(0,o.useMemo)(()=>n.map(e=>r[e]).filter(Boolean),[r,n]);return(0,zt.jsx)(uu.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"relative","data-testid":"live-markets-realtime",children:(0,zt.jsxs)(cx,{className:"min-w-[320px]",accent:"white",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold text-white/90 uppercase tracking-wider",children:"Live Markets"}),(0,zt.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-mono ".concat(d?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"),children:[d?(0,zt.jsx)(bx,{size:10}):(0,zt.jsx)(wx,{size:10}),d?"LIVE":"REST"]})]}),t&&(0,zt.jsx)("button",{onClick:t,className:"text-slate-500 hover:text-white transition-colors","data-testid":"close-markets-btn",children:(0,zt.jsx)(Um,{size:18})})]}),(0,zt.jsx)("div",{className:"flex gap-6",children:i?(0,zt.jsx)("div",{className:"flex gap-6",children:n.map((e,t)=>(0,zt.jsxs)("div",{className:"animate-pulse",children:[(0,zt.jsx)("div",{className:"h-4 w-12 bg-white/10 rounded mb-2"}),(0,zt.jsx)("div",{className:"h-6 w-20 bg-white/10 rounded"})]},t))}):p.map(e=>{var t,n,r;return(0,zt.jsxs)(uu.div,{className:"text-center","data-testid":"market-".concat(e.symbol.toLowerCase()),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,zt.jsx)("p",{className:"text-sm font-mono text-slate-400 mb-1",children:e.symbol}),(0,zt.jsx)("p",{className:"text-lg font-mono font-semibold text-white tabular-nums",children:(n=e.price,r=e.symbol,n?"$".concat("BTC"===r||"ETH"===r||"SOL"===r?n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):"$0")}),(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs font-mono ".concat(e.change_percent>=0?"text-emerald-400":"text-rose-400"),children:[e.change_percent>=0?(0,zt.jsx)(mx,{size:12}):(0,zt.jsx)(kx,{size:12}),(0,zt.jsxs)("span",{children:[e.change_percent>=0?"+":"",null===(t=e.change_percent)||void 0===t?void 0:t.toFixed(2),"%"]})]}),"coingecko"===e.source&&(0,zt.jsx)("span",{className:"text-[10px] text-teal-500/60 font-mono",children:"CG"})]},e.symbol)})})]})})},Tx=km("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Ix=km("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Ax="".concat("https://srv1304213.hstgr.cloud/api","/api"),Ox=e=>{let{onCommand:t}=e;const[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(""),[s,l]=(0,o.useState)(0),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)([]);(0,o.useEffect)(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onresult=e=>{const t=e.results.length-1,n=e.results[t],r=n[0].transcript,a=n[0].confidence;i(r),l(a),n.isFinal&&p(r,a)},e.onerror=e=>{console.error("Speech recognition error:",e.error),r(!1)},e.onend=()=>{n&&e.start()},u(e)}},[]);const p=async(e,n)=>{const r={id:Date.now(),text:e,confidence:n,timestamp:new Date};h(e=>[...e,r]),setTimeout(()=>{h(e=>e.filter(e=>e.id!==r.id))},5e3);try{const r=await Mh.post("".concat(Ax,"/voice/parse"),{transcript:e,confidence:n});t&&t(r.data)}catch(a){console.error("Error parsing voice command:",a)}};(0,o.useCallback)(()=>{c?n?(c.stop(),r(!1)):(c.start(),r(!0)):console.error("Speech recognition not supported")},[c,n]);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"voice-panel",children:[(0,zt.jsxs)(uu.button,{onClick:()=>{const e=["Buy 1000 shares AAPL at market","Sell 500 shares NVDA limit 150","Buy 2 BTC at market price","Show me ETH analysis","Execute buy order for Tesla"],t=e[Math.floor(Math.random()*e.length)],n=.85+.12*Math.random();p(t,n),i(t),l(n)},className:"flex items-center gap-3 px-5 py-3 rounded-xl border backdrop-blur-xl transition-all ".concat(n?"bg-teal-500/20 border-teal-500/50 text-teal-400 shadow-[0_0_30px_rgba(20,184,166,0.3)]":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:border-white/20"),whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":"voice-toggle-btn",children:[n?(0,zt.jsx)(Tx,{className:"animate-pulse",size:20}):(0,zt.jsx)(Ix,{size:20}),(0,zt.jsx)("span",{className:"font-mono text-sm",children:n?"Voice Active":"Start Listening"}),n&&(0,zt.jsxs)("span",{className:"relative flex h-2 w-2 ml-2",children:[(0,zt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"}),(0,zt.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-teal-500"})]})]}),(0,zt.jsx)(rn,{children:d.map(e=>(0,zt.jsx)(uu.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{type:"spring",stiffness:300,damping:25},"data-testid":"voice-command-ephemeral",children:(0,zt.jsx)(cx,{className:"glass-teal",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Execute:"}),(0,zt.jsx)("p",{className:"text-xl font-heading font-semibold text-white",children:e.text}),(0,zt.jsxs)("p",{className:"text-sm font-mono text-teal-400",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]})})},e.id))})]})},_x=km("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Rx=km("camera-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]),Px=km("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Mx=km("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);class Dx{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Fx{refCount(e){return Lx("refCount")}incRef(e){return Lx("incRef")}timerAvailable(){return!0}time(e){return Lx("time")}read(e){return Lx("read")}readSync(e){return Lx("readSync")}readToGPU(e,t){return Lx("readToGPU")}numDataIds(){return Lx("numDataIds")}disposeData(e,t){return Lx("disposeData")}write(e,t,n){return Lx("write")}move(e,t,n,r,a){return Lx("move")}createTensorFromGPUData(e,t,n){return Lx("createTensorFromGPUData")}memory(){return Lx("memory")}floatPrecision(){return Lx("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Lx("dispose")}}function Lx(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function zx(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Wx(e,t,n)}function Bx(e,t,n){return Math.max(e,Math.min(t,n))}function Ux(e){return e%2===0?e:e+1}function Wx(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Vx(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Hx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Vx(qx(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function Gx(e){Vx(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function Kx(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function qx(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Xx(e){return e%1===0}function Yx(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function $x(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Qx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((a,i)=>{let s=0;const o=()=>{if(e())return void a();s++;const l=t(s);null!=n&&s>=n?i():null!=r?r(o,l):setTimeout(o,l)};o()})}function Jx(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(i));r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found ".concat(e[i]," at dim ").concat(i));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const a=e.slice();return a[r]=t/n,a}function Zx(e,t){const n=t.length;return e=null==e?t.map((e,t)=>t):[].concat(e),Vx(e.every(e=>e>=-n&&e<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)),Vx(e.every(e=>Xx(e)),()=>"All values in axis param must be integers but "+"got axis ".concat(e)),e.map(e=>e<0?n+e:e)}function ev(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Zx(t,e).sort();let s=0;for(let o=0;o<e.length;++o){if(null!=i){if(i[s]===o&&1!==e[o])throw new Error("Can't squeeze axis ".concat(o," since its dim '").concat(e[o],"' is not 1"));(null==i[s]||i[s]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),i[s]<=o&&s++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function tv(e,t){return nv(e,t)}function nv(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function rv(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function av(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function iv(e){return"string"===typeof e||e instanceof String}function sv(e){return"number"===typeof e}function ov(e){return Array.isArray(e)?ov(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":sv(e)?"float32":iv(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function lv(e){return!!(e&&e.constructor&&e.call&&e.apply)}function cv(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function uv(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function dv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=new Array;if(1===t.length){const i=t[0]*(r?2:1);for(let t=0;t<i;t++)a[t]=n[e+t]}else{const i=t[0],s=t.slice(1),o=s.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<i;t++)a[t]=dv(e+t*o,s,n,r)}return a}function hv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return dv(0,e,t,n)}function pv(e,t){const n=fv(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function fv(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function mv(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return hv(e,new Float32Array(n));if("int32"===t)return hv(e,new Int32Array(n));if("bool"===t)return hv(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function gv(e){e.forEach(t=>{Vx(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"]."))})}function xv(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function vv(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function yv(e){return e&&e.then&&"function"===typeof e.then}const bv="tfjsflags";class wv{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=kv,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Nv().getBool("IS_TEST")||Nv().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Nv().getBool("IS_TEST")||Nv().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(yv(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(bv in e){e[bv].split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)})}}}function kv(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")}),t}function Nv(){return jv}let Sv,jv=null;function Cv(){if(null==Sv){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Sv=e}return Sv}function Ev(e,t){const n=function(){const e=Cv();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Tv="Abs",Iv="Acos",Av="Acosh",Ov="Add",_v="AddN",Rv="All",Pv="Any",Mv="ArgMax",Dv="ArgMin",Fv="Asin",Lv="Asinh",zv="Atan",Bv="Atanh",Uv="Atan2",Wv="AvgPool",Vv="AvgPoolGrad",Hv="AvgPool3D",Gv="AvgPool3DGrad",Kv="BatchMatMul",qv="BatchToSpaceND",Xv="Bincount",Yv="BitwiseAnd",$v="BroadcastArgs",Qv="Cast",Jv="Ceil",Zv="ClipByValue",ey="Complex",ty="ComplexAbs",ny="Concat",ry="Conv2D",ay="Conv2DBackpropFilter",iy="Conv2DBackpropInput",sy="Conv3D",oy="Conv3DBackpropFilterV2",ly="Conv3DBackpropInputV2",cy="Cos",uy="Cosh",dy="Cumprod",hy="Cumsum",py="CropAndResize",fy="DenseBincount",my="DepthToSpace",gy="DepthwiseConv2dNative",xy="DepthwiseConv2dNativeBackpropFilter",vy="DepthwiseConv2dNativeBackpropInput",yy="Diag",by="Dilation2D",wy="Dilation2DBackpropInput",ky="Dilation2DBackpropFilter",Ny="Draw",Sy="RealDiv",jy="Einsum",Cy="Elu",Ey="EluGrad",Ty="Erf",Iy="Equal",Ay="Exp",Oy="ExpandDims",_y="Expm1",Ry="FFT",Py="Fill",My="FlipLeftRight",Dy="Floor",Fy="FloorDiv",Ly="FusedBatchNorm",zy="GatherV2",By="GatherNd",Uy="Greater",Wy="GreaterEqual",Vy="Identity",Hy="IFFT",Gy="Imag",Ky="IsFinite",qy="IsInf",Xy="IsNan",Yy="LeakyRelu",$y="Less",Qy="LessEqual",Jy="LinSpace",Zy="Log",eb="Log1p",tb="LogicalAnd",nb="LogicalNot",rb="LogicalOr",ab="LRN",ib="LRNGrad",sb="Max",ob="Maximum",lb="MaxPool",cb="MaxPoolGrad",ub="MaxPool3D",db="MaxPool3DGrad",hb="MaxPoolWithArgmax",pb="Mean",fb="Min",mb="Minimum",gb="MirrorPad",xb="Mod",vb="Multinomial",yb="Multiply",bb="Neg",wb="NotEqual",kb="NonMaxSuppressionV3",Nb="NonMaxSuppressionV4",Sb="NonMaxSuppressionV5",jb="OnesLike",Cb="OneHot",Eb="Pack",Tb="PadV2",Ib="Pow",Ab="Prelu",Ob="Prod",_b="RaggedGather",Rb="RaggedRange",Pb="RaggedTensorToTensor",Mb="Range",Db="Real",Fb="Reciprocal",Lb="Relu",zb="Reshape",Bb="ResizeNearestNeighbor",Ub="ResizeNearestNeighborGrad",Wb="ResizeBilinear",Vb="ResizeBilinearGrad",Hb="Relu6",Gb="Reverse",Kb="Round",qb="Rsqrt",Xb="ScatterNd",Yb="TensorScatterUpdate",$b="SearchSorted",Qb="Select",Jb="Selu",Zb="Slice",ew="Sin",tw="Sinh",nw="Sign",rw="Sigmoid",aw="Softplus",iw="Sqrt",sw="Sum",ow="SpaceToBatchND",lw="SplitV",cw="Softmax",uw="SparseFillEmptyRows",dw="SparseReshape",hw="SparseSegmentMean",pw="SparseSegmentSum",fw="SparseToDense",mw="SquaredDifference",gw="Square",xw="StaticRegexReplace",vw="StridedSlice",yw="StringNGrams",bw="StringSplit",ww="StringToHashBucketFast",kw="Sub",Nw="Tan",Sw="Tanh",jw="Tile",Cw="TopK",Ew="Transform",Tw="Transpose",Iw="Unique",Aw="Unpack",Ow="UnsortedSegmentSum",_w="ZerosLike",Rw="Step",Pw="FromPixels",Mw="RotateWithOffset",Dw="_FusedMatMul",Fw="FusedConv2D",Lw="FusedDepthwiseConv2D";function zw(){Nv().getBool("IS_TEST")||Nv().getBool("PROD")||console.warn(...arguments)}function Bw(){Nv().getBool("IS_TEST")||Nv().getBool("PROD")||console.log(...arguments)}const Uw=Ev("kernelRegistry",()=>new Map),Ww=Ev("gradRegistry",()=>new Map);function Vw(e,t){const n=Xw(e,t);return Uw.get(n)}function Hw(e){return Ww.get(e)}function Gw(e){const t=Uw.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[i,s]=a,[o]=i.split("_");o===e&&n.push(s)}return n}function Kw(e){const{kernelName:t,backendName:n}=e,r=Xw(t,n);Uw.has(r)&&zw("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Uw.set(r,e)}function qw(e){const{kernelName:t}=e;Ww.has(t)&&Nv().getBool("DEBUG")&&zw("Overriding the gradient for '".concat(t,"'")),Ww.set(t,e)}function Xw(e,t){return"".concat(t,"_").concat(e)}function Yw(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var $w=n(7353);const Qw=n.n($w)()||$w;function Jw(e){return Qw.fromString(e,!0,16)}const Zw=Jw("c3a5c85c97cb3127"),ek=Jw("b492b66fbe98f273"),tk=Jw("9ae16a3b2f90404f");function nk(e){return e.xor(e.shru(47))}function rk(e,t,n){const r=e.slice(t,t+n);return Qw.fromBytes(Array.from(r),!0,!0)}function ak(e,t){return rk(e,t,8)}function ik(e,t){return rk(e,t,4)}function sk(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function ok(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jw("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function lk(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=sk(i.add(a).add(r),21);const s=a;return a=(a=a.add(t)).add(n),i=i.add(sk(a,44)),[a.add(r),i.add(s)]}(ak(e,t),ak(e,t+8),ak(e,t+16),ak(e,t+24),n,r)}function ck(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=Qw.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=tk.add(2*t),r=ak(e,0).add(tk),a=ak(e,t-8);return ok(sk(a,37).mul(n).add(r),sk(r,25).add(a).mul(n),n)}if(t>=4){const n=tk.add(2*t);return ok(ik(e,0).shl(3).add(t),ik(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return nk(tk.mul(n).xor(Zw.mul(r))).mul(tk)}return tk}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=tk.add(2*t),r=ak(e,0).mul(ek),a=ak(e,8),i=ak(e,t-8).mul(n),s=ak(e,t-16).mul(tk);return ok(sk(r.add(a),43).add(sk(i,30)).add(s),r.add(sk(a.add(tk),18)).add(i),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=tk.add(2*t),r=ak(e,0).mul(tk),a=ak(e,8),i=ak(e,t-8).mul(n),s=ak(e,t-16).mul(tk),o=sk(r.add(a),43).add(sk(i,30)).add(s),l=ok(o,r.add(sk(a.add(tk),18)).add(i),n),c=ak(e,16).mul(n),u=ak(e,24),d=o.add(ak(e,t-32)).mul(n),h=l.add(ak(e,t-24)).mul(n);return ok(sk(c.add(u),43).add(sk(d,30)).add(h),c.add(sk(u.add(r),18)).add(d),n)}(e,t);let r=n,a=n.mul(ek).add(113),i=nk(a.mul(tk).add(113)).mul(tk),s=[Qw.UZERO,Qw.UZERO],o=[Qw.UZERO,Qw.UZERO];r=r.mul(tk).add(ak(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=sk(r.add(a).add(s[0]).add(ak(e,l+8)),37).mul(ek),a=sk(a.add(s[1]).add(ak(e,l+48)),42).mul(ek),r=r.xor(o[1]),a=a.add(s[0]).add(ak(e,l+40)),i=sk(i.add(o[0]),33).mul(ek),s=lk(e,l,s[1].mul(ek),r.add(o[0])),o=lk(e,l+32,i.add(o[1]),a.add(ak(e,l+16))),[i,r]=[r,i],l+=64}while(l!==c);const d=ek.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=sk(r.add(a).add(s[0]).add(ak(e,l+8)),37).mul(d),a=sk(a.add(s[1]).add(ak(e,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(ak(e,l+40))),i=sk(i.add(o[0]),33).mul(d),s=lk(e,l,s[1].mul(d),r.add(o[0])),o=lk(e,l+32,i.add(o[1]),a.add(ak(e,l+16))),[i,r]=[r,i],ok(ok(s[0],o[0],d).add(nk(a).mul(Zw)).add(i),ok(s[1],o[1],d).add(r),d)}function uk(e,t){return"string"===t?pk(e):dk([e],t)}function dk(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=gk(e)),Nv().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function hk(){return Nv().platform.now()}function pk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Nv().platform.encode(e,t)}function fk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Nv().platform.decode(e,t)}function mk(e){return null!=Nv().platform.isTypedArray?Nv().platform.isTypedArray(e):Yw(e)}function gk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||yv(e)||null==e||mk(e)&&n)t.push(e);else if(Array.isArray(e)||mk(e))for(let r=0;r<e.length;++r)gk(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let a=0;a<=r;a++)gk(e[a],t,n)}return t}class xk{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new yk)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let i;const s=hk();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();i=Promise.resolve({kernelMs:hk()-s})}if(Nv().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){const t=r[o];t.data().then(n=>{vk(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then(e=>e.kernelMs),extraInfo:i.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:i}=e;n.forEach(e=>{Promise.all([e.data(),r,i]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}function vk(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class yk{logKernelProfile(e,t,n,r,a,i){const s="number"===typeof r?$x("".concat(r,"ms"),9):r.error,o=$x(e,25),l=t.rank,c=t.size,u=$x(t.shape.toString(),14);let d="";for(const h in a){const e=a[h];if(null!=e){const n=e.shape||t.shape,r=n.length;d+="".concat(h,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(o,"\t%c").concat(s,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function bk(e,t,n,r){const a=uv(t),i=function(e,t,n,r){const a=Kx(t),i=r[r.length-1],s=new Array(i).fill(0),o=t.length,l="complex64"===n?Sk(e):e;if(o>1)for(let c=0;c<a/i;c++){const e=c*i;for(let t=0;t<i;t++)s[t]=Math.max(s[t],wk(l[e+t],0,n).length)}return s}(e,t,n,a),s=t.length,o=Nk(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(s)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(o.map(e=>"    "+e).join("\n")),l.join("\n")}function wk(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):iv(e)?"'".concat(e,"'"):"bool"===n?kk(e):parseFloat(e.toFixed(7)).toString(),$x(r,t)}function kk(e){return 0===e?"false":"true"}function Nk(e,t,n,r,a){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s="complex64"===n?2:1,o=t[0],l=t.length;if(0===l){if("complex64"===n){return[wk(Sk(e)[0],0,n)]}return"bool"===n?[kk(e[0])]:[e[0].toString()]}if(1===l){if(o>20){const t=3*s;let r=Array.from(e.slice(0,t)),i=Array.from(e.slice((o-3)*s,o*s));return"complex64"===n&&(r=Sk(r),i=Sk(i)),["["+r.map((e,t)=>wk(e,a[t],n)).join(", ")+", ..., "+i.map((e,t)=>wk(e,a[o-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?Sk(e):Array.from(e)).map((e,t)=>wk(e,a[t],n)).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),d=r[0]*s,h=[];if(o>20){for(let t=0;t<3;t++){const r=t*d,i=r+d;h.push(...Nk(e.slice(r,i),c,n,u,a,!1))}h.push("...");for(let t=o-3;t<o;t++){const r=t*d,i=r+d;h.push(...Nk(e.slice(r,i),c,n,u,a,t===o-1))}}else for(let m=0;m<o;m++){const t=m*d,r=t+d;h.push(...Nk(e.slice(t,r),c,n,u,a,m===o-1))}const p=2===l?",":"";h[0]="["+(o>0?h[0]+p:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":f),h}function Sk(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class jk{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Kx(e),null!=n){const e=n.length;Vx(e===this.size,()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||nv(t,this.size),this.strides=uv(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Vx(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")"));const a=this.locToIndex(n);this.values[a]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const i of t){if(i<0||i>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let a=t[t.length-1];for(let i=0;i<t.length-1;++i)a+=this.strides[i]*t[i];return this.values[a]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Ck().makeTensor(this.values,this.shape,this.dtype)}}let Ck=null,Ek=null,Tk=null;class Ik{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Kx(e),this.strides=uv(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Ek.buffer(this.shape,this.dtype,e)}bufferSync(){return Ek.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return hv(this.shape,e,"complex64"===this.dtype)}arraySync(){return hv(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=Ck().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>fk(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ck().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ck().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>fk(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ck().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ck().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ek.print(this,e)}clone(){return this.throwIfDisposed(),Ek.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return bk(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ek.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Ck().makeVariable(this,e,t,n)}}function Ak(){return Ev("Tensor",()=>Ik)}Object.defineProperty(Ik,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Ak();class Ok extends Ik{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!qx(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Ck().disposeTensor(this),this.dataId=e.dataId,Ck().incRef(this,null)}dispose(){Ck().disposeVariable(this),this.isDisposedInternal=!0}}var _k,Rk,Pk,Mk,Dk;Object.defineProperty(Ok,Symbol.hasInstance,{value:e=>e instanceof Ik&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(_k||(_k={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Rk||(Rk={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Pk||(Pk={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Mk||(Mk={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Dk||(Dk={}));const Fk={float32:Mk,int32:Rk,bool:Pk,complex64:Dk};function Lk(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Fk[e][t]}function zk(e){return Lk(e,"int32")}function Bk(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function Uk(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Wk(e,t){if(e.dtype===t.dtype)return[e,t];const n=Lk(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Vk(e,t){return t.some(t=>t.id===e.id)}function Hk(e){const t=[];return Gk(e,t,new Set),t}function Gk(e,t,n){if(null==e)return;if(e instanceof Ik)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const a=e;for(const i in a){const e=a[i];n.has(e)||(n.add(e),Gk(e,t,n))}}function Kk(e){return null!=e.kernelName}class qk{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Xk{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qk}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(zw("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new xk(this.backendInstance),!0}setupRegisteredKernels(){Gw(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Gw(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof Fx||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,zw("Initialization of backend ".concat(e," failed")),zw(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return zw("Initialization of backend ".concat(e," failed")),zw(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return Xk.nextTensorId++}nextVariableId(){return Xk.nextVariableId++}clone(e){const t=$k.runKernel(Vy,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{const t={x:e},n={dtype:"float32"};return $k.runKernel(Qv,t,n)}}),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=Vw(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-a-i;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;let s,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=Kk(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Kk(e)){const{kernelName:t,inputs:a,attrs:i}=e;null==this.backendName&&this.backend;const l=Vw(t,this.backendName);Vx(null!=l,()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'")),s=()=>{const e=this.backend.numDataIds();o=l.kernelFunc({inputs:a,attrs:i,backend:this.backend});const s=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const c=s.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(r){const e=this.getTensorsForGradient(t,a,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};s=()=>{const e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,a));const n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,d=Kk(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=s()}),r&&this.addTapeNode(l,c,t,d,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(e=>null!=c[e]?c[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){const r=Hw(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let i;r.saveAllInputs?(Vx(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(t).map(e=>t[e])):i=e.map(e=>t[e]);const s=n.filter((e,t)=>a[t]);return i.concat(s)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&iv(e[0])&&(a=e.map(e=>pk(e)));const i=r.write(a,t,n),s=new Ik(t,n,i,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){const e=this.state.tensorInfo.get(i),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,r){const a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:a}=e,i=new Ik(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new Ok(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*av(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Ok||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*av(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,i){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=Hw(e);null!=o&&(r=o.gradFunc),null!=r&&(s.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=fv(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,i))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Hk(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){const e=this.state.activeScope.track[a];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Vx(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Vx(a instanceof Ik,()=>"The result y returned by f() must be a tensor.");const i=function(e,t,n){const r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],i=n.inputs;for(const e in i){const s=i[e];let o=!1;for(let e=0;e<t.length;e++)if(r[s.id]){n.outputs.forEach(e=>r[e.id]=!0),o=!0,a[n.id]=!0;break}if(o)break}}const i={};i[n.id]=!0;const s={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(i[t.outputs[e].id]){for(const e in n)i[n[e].id]=!0,s[t.id]=!0;break}}const o=[];for(let l=0;l<e.length;l++){const t=e[l];if(a[t.id]&&s[t.id]){const e={};for(const a in t.inputs){const n=t.inputs[a];r[n.id]&&(e[a]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[a.id]=null==n?function(e){const t=pv(Kx(e),"float32");return $k.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const i=t[a],s=[];if(i.outputs.forEach(t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));const o=i.gradient(s);for(const t in i.inputs){if(!(t in o))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(o),"."));const a=n(()=>o[t]());if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));const s=i.inputs[t];if(!qx(a.shape,s.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(s.shape,"'"));if(null==e[s.id])e[s.id]=a;else{const t=e[s.id];e[s.id]=r(t,a),t.dispose()}}}}(e,i,e=>this.tidy(e),Qk);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){var t=this;return Vx(lv(e),()=>"The f passed in customGrad(f) must be a function."),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];let i;Vx(r.every(e=>e instanceof Ik),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const s={};r.forEach((e,t)=>{s[t]=e});return t.runKernelFunc({forwardFunc:(t,n)=>(i=e(...r,n),Vx(i.value instanceof Ik,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Vx(lv(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),backwardsFunc:(e,t)=>{const n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Vx(a.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Vx(a.every(e=>e instanceof Ik),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const s={};return a.forEach((e,t)=>{s[t]=()=>e}),s},inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=hk(),n=await this.backend.time(e);return n.wallMs=hk()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qk;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Yk(){const e=Cv();if(null==e._tfengine){const t=new wv(e);e._tfengine=new Xk(t)}var t;return t=e._tfengine.ENV,jv=t,Ck=()=>e._tfengine,e._tfengine}Xk.nextTensorId=0,Xk.nextVariableId=0;const $k=Yk();function Qk(e,t){const n={a:e,b:t};return $k.runKernel(Ov,n)}let Jk;function Zk(e){if(void 0!==Jk)return Jk;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function eN(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const tN=Nv();function nN(e,t){let n=e;if(mk(e))return"string"===t?[]:[e.length];if(Bk(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(Uk(e))return[e.buffer.size/(null==t?4:av(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||mk(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Nv().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&rN(e,r,[]),r}function rN(e,t,n){if(n=n||[],!Array.isArray(e)&&!mk(e))return void Vx(0===t.length,()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements"));Vx(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")),Vx(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements"));const r=t.slice(1);for(let a=0;a<e.length;++a)rN(e[a],r,n.concat(a))}function aN(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function iN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Ak())return aN(r,e.dtype,t,n),e;let a=ov(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),aN(r,a,t,n),null==e||!mk(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const i=nN(e,a);mk(e)||Array.isArray(e)||(e=[e]);const s="string"!==a?dk(e,a):gk(e,[],!0);return $k.makeTensor(s,i,a)}function sN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((e,a)=>iN(e,"".concat(t,"[").concat(a,"]"),n,r))}tN.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),tN.registerFlag("IS_BROWSER",()=>eN()),tN.registerFlag("IS_NODE",()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node),tN.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),tN.registerFlag("IS_SAFARI",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),tN.registerFlag("PROD",()=>!1),tN.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>tN.getBool("DEBUG")),tN.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),tN.registerFlag("IS_TEST",()=>!1),tN.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>tN.getBool("DEBUG")),tN.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),tN.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),tN.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function oN(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const a=function(){$k.startScope(n);try{const e=r(...arguments);return yv(e)&&console.error("Cannot return a Promise inside of tidy."),$k.endScope(e),e}catch(e){throw $k.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}const lN=oN({complex_:function(e,t){const n=iN(e,"real","complex"),r=iN(t,"imag","complex");Hx(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const a={real:n,imag:r};return $k.runKernel(ey,a)}});function cN(e,t,n,r){if(null==r)r=ov(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Uk(e)||Bk(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return $k.backend.createTensorFromGPUData(e,t||n,r)}if(!mk(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){gv(t);const e=Kx(t),r=Kx(n);Vx(e===r,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r));for(let a=0;a<n.length;++a){const e=n[a],r=a!==n.length-1||e!==Kx(t.slice(a));Vx(n[a]===t[a]||!r,()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). "))}}return mk(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?dk(e,r):gk(e,[],!0),$k.makeTensor(e,t,r)}function uN(e,t,n){return cN(e,t,nN(e,n),n)}class dN{static join(e){return new dN(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map(e=>mk(e)?e.buffer:e)).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),a=new Uint8Array(r);let i=0;for(let s=n;s<this.shards.length;s++){const n=this.shards[s],r=e+i-n.start,o=i,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(a.set(c,o),i+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,i=t(e[a]);if(0===i)return a;i<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function hN(){return $k}function pN(){return $k.memory()}function fN(e,t){return $k.tidy(e,t)}function mN(e){Hk(e).forEach(e=>e.dispose())}function gN(e){return $k.keep(e)}function xN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return $k.registerBackend(e,t,n)}function vN(){return $k.backend}Tk=function(e){Nv().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};async function yN(e,t){const n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let i=0;i<a.length;++i){const s=a[i],o=Array.isArray(e)?e[i].tensor:e[s];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(o.dtype));const l={name:s,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){const e=new Promise(async e=>{const t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n);let a=0;for(let i=0;i<t.length;i++){const e=t[i],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=4,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:bN(await Promise.all(r)),specs:n}}function bN(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))});const r=new Uint8Array(t);let a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}const wN="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function kN(e){return wN?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function NN(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function SN(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),function(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}(e,n,r)}function jN(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:kN(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:kN(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new dN(e.weightData).byteLength}}function CN(e){const t=[];for(const n of e)t.push(...n.weights);return t}class EN{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==EN.instance&&(EN.instance=new EN),EN.instance}static registerSaveRouter(e){EN.getInstance().saveRouters.push(e)}static registerLoadRouter(e){EN.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return EN.getHandlers(e,"save")}static getLoadHandlers(e,t){return EN.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?EN.getInstance().loadRouters:EN.getInstance().saveRouters).forEach(t=>{const a=t(e,n);null!==a&&r.push(a)}),r}}const TN="tensorflowjs",IN="models_store",AN="model_info_store";function ON(){if(!Nv().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function _N(e){const t=e.result;t.createObjectStore(IN,{keyPath:"modelPath"}),t.createObjectStore(AN,{keyPath:"modelPath"})}class RN{constructor(e){if(this.indexedDB=ON(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open(TN,1);r.onupgradeneeded=()=>_N(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(IN,"readonly"),r=t.objectStore(IN).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{t.weightData=dN.join(t.weightData);const r=jN(t),s=a.transaction(AN,"readwrite");let o,l,c=s.objectStore(AN);try{o=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(i){return n(i)}o.onsuccess=()=>{l=a.transaction(IN,"readwrite");const o=l.objectStore(IN);let u;try{u=o.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(i){return n(i)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=s.objectStore(AN);const t=c.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(u.error)),t.onerror=e=>(a.close(),n(u.error))}},o.onerror=e=>(a.close(),n(o.error)),s.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}}RN.URL_SCHEME="indexeddb://";const PN=e=>{return Nv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(RN.URL_SCHEME)?(t=e.slice(RN.URL_SCHEME.length),new RN(t)):null;var t};EN.registerSaveRouter(PN),EN.registerLoadRouter(PN);class MN{constructor(){this.indexedDB=ON()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(TN,1);n.onupgradeneeded=()=>_N(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(AN,"readonly"),i=a.objectStore(AN).getAll();i.onsuccess=()=>{const t={};for(const e of i.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},i.onerror=e=>(r.close(),t(i.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(RN.URL_SCHEME)?t.slice(RN.URL_SCHEME.length):t,new Promise((t,n)=>{const r=this.indexedDB.open(TN,1);r.onupgradeneeded=()=>_N(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(AN,"readwrite"),s=i.objectStore(AN),o=s.get(e);let l;o.onsuccess=()=>{if(null==o.result)return a.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=s.delete(e),i=()=>{l=a.transaction(IN,"readwrite");const r=l.objectStore(IN).delete(e);r.onsuccess=()=>t(o.result.modelArtifactsInfo),r.onerror=e=>n(o.error)};r.onsuccess=i,r.onerror=e=>(i(),a.close(),n(o.error))}},o.onerror=e=>(a.close(),n(o.error)),i.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)})}}const DN="/",FN="tensorflowjs_models",LN="info",zN="model_topology",BN="weight_specs",UN="weight_data",WN="model_metadata";function VN(e){return{info:[FN,e,LN].join(DN),topology:[FN,e,zN].join(DN),weightSpecs:[FN,e,BN].join(DN),weightData:[FN,e,UN].join(DN),modelMetadata:[FN,e,WN].join(DN)}}function HN(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function GN(e){const t=e.split(DN);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(DN)}class KN{constructor(e){if(!Nv().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=VN(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=jN(e),i=dN.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(wN)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(i));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw HN(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(null==i)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(wN){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(i),t}}KN.URL_SCHEME="localstorage://";const qN=e=>{return Nv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(KN.URL_SCHEME)?(t=e.slice(KN.URL_SCHEME.length),new KN(t)):null;var t};EN.registerSaveRouter(qN),EN.registerLoadRouter(qN);class XN{constructor(){Vx(Nv().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Vx("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=FN+DN,n=DN+LN;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){e[GN(a)]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){var t;const n=VN(e=(t=e).startsWith(KN.URL_SCHEME)?t.slice(KN.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return HN(n),r}}const YN="://";class $N{constructor(){this.managers={}}static getInstance(){return null==$N.instance&&($N.instance=new $N),$N.instance}static registerManager(e,t){Vx(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(YN)&&(e=e.slice(0,e.indexOf(YN))),Vx(e.length>0,()=>"scheme must not be an empty string.");const n=$N.getInstance();Vx(null==n.managers[e],()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){const t=$N.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys($N.getInstance().managers)}}class QN{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&Nv().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(e,t)}isTypedArray(e){return Yw(e)}}if(Nv().get("IS_BROWSER")){Nv().setPlatform("browser",new QN);try{$N.registerManager(KN.URL_SCHEME,new XN)}catch(Qje){}try{$N.registerManager(RN.URL_SCHEME,new MN)}catch(Qje){}}const JN=()=>n(5817);let ZN;class eS{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Nv().global.fetch?Nv().global.fetch(e,t):(null==ZN&&(ZN=JN()),ZN(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function tS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",gv(e),new jk(e,t,n)}Nv().get("IS_NODE")&&!Nv().get("IS_BROWSER")&&Nv().setPlatform("node",new eS);const nS=oN({cast_:function(e,t){const n=iN(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:t};return $k.runKernel(Qv,r,a)}});const rS=oN({clone_:function(e){const t={x:iN(e,"x","clone","string_or_numeric")};return $k.runKernel(Vy,t)}});Yk();Ek={buffer:tS,cast:nS,clone:rS,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};const aS=oN({add_:function(e,t){let n=iN(e,"a","add"),r=iN(t,"b","add");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(Ov,a)}});const iS=oN({floorDiv_:function(e,t){let n=iN(e,"a","floorDiv"),r=iN(t,"b","floorDiv");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(Fy,a)}});const sS=oN({div_:function(e,t){let n=iN(e,"a","div"),r=iN(t,"b","div");if([n,r]=Wk(n,r),"int32"===n.dtype&&"int32"===r.dtype)return iS(n,r);const a={a:n,b:r};return $k.runKernel(Sy,a,{})}});const oS=oN({mul_:function(e,t){let n=iN(e,"a","mul"),r=iN(t,"b","mul");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(yb,a)}});const lS=oN({sqrt_:function(e){const t={x:iN(e,"x","sqrt","float32")};return $k.runKernel(iw,t)}});const cS=oN({square_:function(e){const t=iN(e,"x","square");return $k.runKernel("Square",{x:t},{})}});const uS=oN({zerosLike_:function(e){const t={x:iN(e,"x","zerosLike")};return $k.runKernel(_w,t)}});function dS(e){return $k.customGrad(e)}function hS(e,t){if((mk(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&mk(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return cN(e,[],[],t)}const pS=new Map,fS=new Map;class mS{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class gS{constructor(){this.classNameMap={}}static getMap(){return null==gS.instance&&(gS.instance=new gS),gS.instance}static register(e){gS.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function xS(e,t,n){Vx(null!=e.className,()=>"Class being registered does not have the static className property defined."),Vx("string"===typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),Vx(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return gS.register(e),pS.set(r,e),fS.set(e,r),e}class vS extends mS{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return mN(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){Vx(lv(e),()=>"The f passed in variableGrads(f) must be a function"),Vx(null==t||Array.isArray(t)&&t.every(e=>e instanceof Ok),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in $k.registeredVariables)t.push($k.registeredVariables[e])}const r=n?t.filter(e=>!e.trainable):null,a=t.length;t=t.filter(e=>e.trainable),Vx(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(a," variables is ")+"trainable.");const{value:i,grads:s}=$k.gradients(e,t,null,!0);Vx(s.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Vx(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(i.rank," tensor"));const o={};return t.forEach((e,t)=>{null!=s[t]&&(o[e.name]=s[t])}),null!=r&&r.forEach(e=>o[e.name]=null),{value:i,grads:o}}(e,t)}dispose(){null!=this.iterations_&&mN(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:hS(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(vS,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class yS extends vS{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=$k.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=$k.registeredVariables[t],a=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:fN(()=>uS(r).variable(a))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:fN(()=>uS(r).variable(a))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;fN(()=>{const e=aS(oS(s,this.rho),oS(cS(i),1-this.rho)),t=oS(sS(lS(aS(o,this.epsilon)),lS(aS(s,this.epsilon))),i),n=aS(oS(o,this.rho),oS(cS(t),1-this.rho));s.assign(e),o.assign(n);const a=aS(oS(t,-this.learningRate),r);r.assign(a)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(mN(this.accumulatedGrads.map(e=>e.variable)),mN(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function bS(e,t,n){gv(e);const r={shape:e,value:t,dtype:n=n||ov(t)};return $k.runKernel(Py,{},r)}class wS extends vS{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=$k.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:fN(()=>bS(r.shape,this.initialAccumulatorValue).variable(e))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedGrads[n].variable;fN(()=>{const e=aS(i,cS(a));i.assign(e);const t=aS(oS(sS(a,lS(aS(e,$k.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&mN(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const kS=oN({pow_:function(e,t){let n=iN(e,"base","pow"),r=iN(t,"exp","pow");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(Ib,a)}});const NS=oN({sub_:function(e,t){let n=iN(e,"a","sub"),r=iN(t,"b","sub");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(kw,a)}});class SS extends vS{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],fN(()=>{this.accBeta1=hS(t).variable(),this.accBeta2=hS(n).variable()}),null==r&&(this.epsilon=$k.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);fN(()=>{const n=NS(1,this.accBeta1),r=NS(1,this.accBeta2);t.forEach((t,a)=>{const i=$k.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:fN(()=>uS(i).variable(s))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:"".concat(t,"/v"),variable:fN(()=>uS(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[a].variable,c=this.accumulatedSecondMoment[a].variable,u=aS(oS(l,this.beta1),oS(o,1-this.beta1)),d=aS(oS(c,this.beta2),oS(cS(o),1-this.beta2)),h=sS(u,n),p=sS(d,r);l.assign(u),c.assign(d);const f=aS(oS(sS(h,aS(lS(p),this.epsilon)),-this.learningRate),i);i.assign(f)}),this.accBeta1.assign(oS(this.accBeta1,this.beta1)),this.accBeta2.assign(oS(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&mN(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&mN(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),fN(()=>{this.accBeta1.assign(kS(this.beta1,this.iterations_+1)),this.accBeta2.assign(kS(this.beta2,this.iterations_+1))});const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const jS=oN({abs_:function(e){const t=iN(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return $k.runKernel(ty,e)}{const e={x:t};return $k.runKernel(Tv,e)}}});function CS(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,s=e[i]||1;(t[t.length-1-a]||1)>1&&1===s&&r.unshift(i)}return r}function ES(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],i=t.length-r-1,s=t[i];(null==a||1===a&&s>1)&&n.unshift(i)}return n}function TS(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let i=e[e.length-a-1];null==i&&(i=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===i)r[n-a-1]=s;else if(1===s)r[n-a-1]=i;else{if(i!==s){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-a-1]=i}}return r}const IS=oN({maximum_:function(e,t){let n=iN(e,"a","maximum"),r=iN(t,"b","maximum");[n,r]=Wk(n,r),"bool"===n.dtype&&(n=nS(n,"int32"),r=nS(r,"int32")),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(ob,a)}});class AS extends vS{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],fN(()=>{this.iteration=hS(0).variable(),this.accBeta1=hS(t).variable()}),null==r&&(this.epsilon=$k.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);fN(()=>{const n=NS(1,this.accBeta1),r=sS(-this.learningRate,aS(oS(this.iteration,this.decay),1));t.forEach((t,a)=>{const i=$k.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:uS(i).variable(s)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:"".concat(t,"/v"),variable:uS(i).variable(s)});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[a].variable,c=this.accumulatedWeightedInfNorm[a].variable,u=aS(oS(l,this.beta1),oS(o,1-this.beta1)),d=oS(c,this.beta2),h=jS(o),p=IS(d,h);l.assign(u),c.assign(p);const f=aS(oS(sS(r,n),sS(u,aS(p,this.epsilon))),i);i.assign(f)}),this.iteration.assign(aS(this.iteration,1)),this.accBeta1.assign(oS(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&mN(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&mN(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class OS extends vS{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=$k.registeredVariables[t];fN(()=>{const e=aS(oS(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=gN(hS(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class _S extends OS{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=hS(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=$k.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:fN(()=>uS(r).variable(e))}}const a=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];null!=i&&fN(()=>{let e;const t=aS(oS(this.m,a),i);e=this.useNesterov?aS(oS(this.c,aS(i,oS(t,this.m))),r):aS(oS(this.c,t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&mN(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class RS extends vS{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=$k.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=$k.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:fN(()=>uS(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:fN(()=>uS(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:fN(()=>uS(r).variable(a))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;fN(()=>{const e=aS(oS(s,this.decay),oS(cS(i),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=aS(oS(t,this.decay),oS(i,1-this.decay)),l=sS(oS(i,this.learningRate),lS(NS(e,aS(cS(a),this.epsilon)))),c=aS(oS(o,this.momentum),l);s.assign(e),t.assign(a),o.assign(c);const u=NS(r,c);r.assign(u)}else{const e=aS(oS(s,this.decay),oS(cS(i),1-this.decay)),t=aS(oS(o,this.momentum),sS(oS(i,this.learningRate),lS(aS(e,this.epsilon))));s.assign(e),o.assign(t);const n=NS(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&mN(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&mN(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&mN(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const PS=[yS,wS,SS,AS,_S,RS,OS];function MS(e){return new Promise(e=>setTimeout(e)).then(e)}class DS{constructor(e){if(!Nv().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(DS.URL_SCHEME)&&(e=e.slice(DS.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=dN.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=NN(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await MS(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await MS(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:jN(e)}}}}DS.URL_SCHEME="downloads://";function FS(e,t,n,r){!function(e){Vx(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}(e),function(e,t){Vx(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)),Vx(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)),Vx(t>=e,()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map(i=>(i.then(i=>{const s=n+ ++a/e.length*(r-n);return t(s),i}),i)))}async function LS(e,t){null==t&&(t={});const n=null==t.fetchFunc?Nv().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await FS(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await FS(a,t.onProgress,.5,1)}EN.registerSaveRouter(e=>Nv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(DS.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new DS(e)}(e.slice(DS.URL_SCHEME.length)):null);class zS{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Vx("function"===typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Nv().platform.fetch,Vx(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Vx(2===e.length,()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=NN(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=dN.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:jN(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(Yje){let t="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return SN(await this.loadModelJSON(),e=>this.loadWeights(e))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=CN(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?Nv().platform.fetch:t.fetchFunc;let a,i=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var s;i<e.length;){if(!a){const n=(await r(e[i],t.requestInit,{isBinary:!0})).body;a=n.getReader()}const{done:o,value:l}=await a.read();if(!o)return void n.enqueue(l);i++,a=void 0,null===(s=t.onProgress)||void 0===s||s.call(t,i/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,i=[],s=[];for(const o of e)for(const e of o.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):i.push(a+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(s)),i}async loadWeights(e){const t=await this.getWeightUrls(e);return[CN(e),await LS(t,this.loadOptions)]}}function BS(e){return null!=e.match(zS.URL_SCHEME_REGEX)}zS.URL_SCHEME_REGEX=/^https?:\/\//;const US=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>BS(e)):BS(e),n)return WS(e,t)}return null};function WS(e,t){return new zS(e,t)}EN.registerSaveRouter(US),EN.registerLoadRouter(US);const VS=-2,HS=-1;function GS(e,t,n){const r=e.shape.length;Vx(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")),Vx(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,")."));for(let a=0;a<r;++a)Vx(t[a]+n[a]<=e.shape[a],()=>"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")"))}function KS(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function qS(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function XS(e,t,n,r){const a=[...e];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function YS(e,t,n){return n<=e?n:n-(t-1)}function $S(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function QS(e,t,n,r,a,i,s,o,l){const c=e.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=JS(s,l,c,r,e),d=ZS(o,l,c,a,e),h=XS(i,l,c,e)}else for(let p=0;p<c;p++)u[p]=tj(s,r,i,e,p,l),d[p]=nj(o,a,i,e,p,l),h[p]=ej(i,p,l);return{begin:u,end:d,strides:h}}function JS(e,t,n,r,a){const i=[...a],s=$S(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{const a=YS(t,n,o);let s=r[a];e&1<<a&&(s=0),i[o]=s}return i}function ZS(e,t,n,r,a){const i=[...a],s=$S(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const a=YS(t,n,o);let s=r[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),i[o]=s}for(let o=0;o<i.length;o++){const e=a[o];i[o]<0&&(i[o]+=e),i[o]=Bx(0,i[o],a[o])}return i}function ej(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function tj(e,t,n,r,a,i){let s=t[a];const o=n[a]||1;(e&1<<a||i&1<<a||null==s)&&(s=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[a];return s<0&&(s+=l),s=Bx(0,s,l-1),s}function nj(e,t,n,r,a,i){let s=t[a];const o=n[a]||1;(e&1<<a||i&1<<a||null==s)&&(s=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[a];return s<0&&(s+=l),s=o>0?Bx(0,s,l):Bx(-1,s,l-1),s}function rj(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function aj(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function ij(e,t,n){let r;const a=e.shape.length;let i;return r="number"===typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach(e=>{Vx(-1!==e,()=>"slice() does not support negative begin indexing.")}),i=null==n?new Array(a).fill(-1):"number"===typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,i=i.map((t,n)=>t>=0?t:(Vx(-1===t,()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")),e.shape[n]-r[n])),[r,i]}function sj(e,t,n,r,a,i,s,o,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=s&&0!==(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)u&&0!==(1<<y&o)&&d.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(VS),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(HS),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);let p=!0,f=!0,m=!0;const g=[],x=[];for(let y=0;y<e.length;++y){if(0===h.strides[y])throw Error("strides[".concat(y,"] must be non-zero"));const t=!!(h.shrinkAxisMask&1<<y),n=e[y];if(-1===n){g.push(t?1:-1);continue}const r=[h.beginMask&1<<y,h.endMask&1<<y],a=[h.strides[y]>0?0:-1,h.strides[y]>0?n:n-1];if(t&&h.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[y];const i=!!(h.beginMask&1<<y&&h.endMask&1<<y);if(h.beginValid&&h.endValid){if(t){const e=h.begin[y]<0?n+h.begin[y]:h.begin[y];if(h.begin[y]=e,h.end[y]=h.begin[y]+1,e<0||e>=n)throw Error("slice index ".concat(h.begin[y]," of dimension ").concat(y," out of bounds."))}else h.begin[y]=oj(h.begin[y],0,h.strides[y],n,r,a),h.end[y]=oj(h.end[y],1,h.strides[y],n,r,a);const e=1===h.strides[y]&&0===h.begin[y]&&h.end[y]===n;p=p&&e,f=f&&(0===y&&1===h.strides[y]||e)}else p=p&&1===h.strides[y]&&i,f=f&&(0===y&&1===h.strides[y]||i);let s,o=!1;if(h.beginValid&&h.endValid?(s=h.end[y]-h.begin[y],o=!0):t?(s=1,o=!0):i&&n>=0&&(s=h.strides[y]<0?-n:n,o=!0),o){let e;e=0===s||s<0!==h.strides[y]<0?0:Math.trunc(s/h.strides[y])+(s%h.strides[y]!==0?1:0),g.push(e)}else g.push(-1)}for(let y=0;y<h.finalShapeGatherIndices.length;++y){const e=h.finalShapeGatherIndices[y];e>=0?x.push(g[e]):e===VS&&x.push(1)}const v=x.filter((e,t)=>h.finalShapeGatherIndices[t]!==VS);return{finalShapeSparse:v,finalShape:x,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function oj(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{const t=e<0?r+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}const lj=oN({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:iN(e,"x","all","bool")},a={axis:t,keepDims:n};return $k.runKernel(Rv,r,a)}});const cj=oN({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:iN(e,"x","any","bool")},a={axis:t,keepDims:n};return $k.runKernel(Pv,r,a)}});const uj=oN({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:iN(e,"x","argMax")},r={axis:t};return $k.runKernel(Mv,n,r)}});function dj(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0;return fj(e,[...t,e[3]],n,i,r,null,null,Sj(a))}function hj(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[o,l]=xj(t);let c;if("channelsLast"===s)c=[o,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));c=[o,l,e[1],e[1]]}return fj(e,c,n,r,a,i,!1,s)}function pj(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[o,l,c]=vj(t);let u,d;if("NDHWC"===s)d="channelsLast",u=[o,l,c,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat ".concat(s));d="channelsFirst",u=[o,l,c,e[1],e[1]]}return mj(e,u,n,r,a,!1,d,i)}function fj(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,d]=[-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,d]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));[l,d,c,u]=e}const[h,p,,f]=t,[m,g]=xj(n),[x,v]=xj(r),y=yj(h,x),b=yj(p,v),{padInfo:w,outHeight:k,outWidth:N}=function(e,t,n,r,a,i,s,o,l){let c,u,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=gj(e,t,n));const i=e[0],s=e[1],o=bj((i-t+2*r)/n+1,a),l=bj((s-t+2*r)/n+1,a);return[o,l]}([t,n],i,r,e,o);u=a[0],d=a[1]}else if("same"===e){u=Math.ceil(t/r),d=Math.ceil(n/a);const e=Math.max(0,(u-1)*r+i-t),o=Math.max(0,(d-1)*a+s-n),l=Math.floor(e/2),h=e-l,p=Math.floor(o/2);c={top:l,bottom:h,left:p,right:o-p,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),d=Math.ceil((n-s+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const h="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:h,bottom:p,left:f,right:m,type:0===h&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=bj((t-i+h+p)/r+1,o),d=bj((n-s+f+m)/a+1,o)}}return{padInfo:c,outHeight:u,outWidth:d}}(a,c,u,m,g,y,b,i,o),S=s?f*d:f;let j;return"channelsFirst"===o?j=[l,S,k,N]:"channelsLast"===o&&(j=[l,k,N,S]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:k,outWidth:N,outChannels:S,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:y,effectiveFilterWidth:b,dilationHeight:x,dilationWidth:v,inShape:e,outShape:j,filterShape:t}}function mj(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",o=arguments.length>7?arguments[7]:void 0,[l,c,u,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,d,h]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[l,h,c,u,d]=e}const[p,f,m,,g]=t,[x,v,y]=vj(n),[b,w,k]=vj(r),N=yj(p,b),S=yj(f,w),j=yj(m,k),{padInfo:C,outDepth:E,outHeight:T,outWidth:I}=function(e,t,n,r,a,i,s,o,l,c,u){let d,h,p,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,r,a,i){null==a&&(a=gj(e,t[0],r[0]));const s=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*a>=t[o]&&(s[o]=bj((e[o]-t[o]+2*a)/r[o]+1,i));return s}([t,n,r,1],[o,l,c],1,[a,i,s],e,u);h=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{h=Math.ceil(t/a),p=Math.ceil(n/i),f=Math.ceil(r/s);const e=(h-1)*a+o-t,u=(p-1)*i+l-n,m=(f-1)*s+c-r,g=Math.floor(e/2),x=e-g,v=Math.floor(u/2),y=u-v,b=Math.floor(m/2);d={top:v,bottom:y,left:b,right:m-b,front:g,back:x,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(a,c,u,d,x,v,y,N,S,j,o),A=i?g*h:g;let O;return"channelsFirst"===s?O=[l,A,E,T,I]:"channelsLast"===s&&(O=[l,E,T,I,A]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:E,outHeight:T,outWidth:I,outChannels:A,padInfo:C,strideDepth:x,strideHeight:v,strideWidth:y,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:N,effectiveFilterHeight:S,effectiveFilterWidth:j,dilationDepth:b,dilationHeight:w,dilationWidth:k,inShape:e,outShape:O,filterShape:t}}function gj(e,t,n){const r=yj(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function xj(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function vj(e){return"number"===typeof e?[e,e,e]:e}function yj(e,t){return t<=1?e:e+(e-1)*(t-1)}function bj(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function wj(e){const[t,n,r]=xj(e);return 1===t&&1===n&&1===r}function kj(e,t){return wj(e)||wj(t)}function Nj(e){return xj(e).every(e=>e>0)}function Sj(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function jj(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)Vx(Xx(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach(t=>{t.forEach(t=>{Vx(Xx(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."))})})}}}const Cj=oN({reshape_:function(e,t){const n={x:iN(e,"x","reshape","string_or_numeric")},r={shape:t};return $k.runKernel(zb,n,r)}});const Ej=oN({avgPool_:function(e,t,n,r,a){const i=iN(e,"x","avgPool","float32");Vx(kj(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"));let s=i,o=!1;3===i.rank&&(o=!0,s=Cj(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vx(4===s.rank,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,".")),jj("avgPool",r,a);const l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a};let u=$k.runKernel(Wv,l,c);return u=nS(u,i.dtype),o?Cj(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Tj=oN({avgPool3d_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const s=iN(e,"x","avgPool3d","float32");let o=s,l=!1;4===s.rank&&(l=!0,o=Cj(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vx(5===o.rank,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),Vx("NDHWC"===i,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)),Vx("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),jj("avgPool3d",r,a);const c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=$k.runKernel(Hv,c,u);return d=nS(d,o.dtype),l?Cj(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Ij=oN({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);const s=iN(e,"x","batchNorm"),o=iN(t,"mean","batchNorm"),l=iN(n,"variance","batchNorm");let c,u;null!=a&&(c=iN(a,"scale","batchNorm")),null!=r&&(u=iN(r,"offset","batchNorm")),Vx(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Vx(null==u||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Vx(null==c||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:function(e){let t;return t=0===e.rank||1===e.rank?Cj(e,[1,1,1,e.size]):2===e.rank?Cj(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Cj(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(s),scale:c,offset:u,mean:o,variance:l},h={varianceEpsilon:i},p=$k.runKernel(Ly,d,h);return Cj(p,s.shape)}});const Aj=oN({batchNorm2d_:function(e,t,n,r,a,i){const s=iN(e,"x","batchNorm"),o=iN(t,"mean","batchNorm"),l=iN(n,"variance","batchNorm");let c,u;return null!=a&&(c=iN(a,"scale","batchNorm")),null!=r&&(u=iN(r,"offset","batchNorm")),Vx(2===s.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(s.rank,".")),Vx(2===o.rank||1===o.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(o.rank,".")),Vx(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&Vx(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&Vx(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")),Ij(s,o,l,u,c,i)}});const Oj=oN({batchNorm3d_:function(e,t,n,r,a,i){const s=iN(e,"x","batchNorm"),o=iN(t,"mean","batchNorm"),l=iN(n,"variance","batchNorm");let c,u;return null!=a&&(c=iN(a,"scale","batchNorm")),null!=r&&(u=iN(r,"offset","batchNorm")),Vx(3===s.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(s.rank,".")),Vx(3===o.rank||1===o.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(o.rank,".")),Vx(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&Vx(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&Vx(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")),Ij(s,o,l,u,c,i)}});const _j=oN({batchNorm4d_:function(e,t,n,r,a,i){const s=iN(e,"x","batchNorm"),o=iN(t,"mean","batchNorm"),l=iN(n,"variance","batchNorm");let c,u;return null!=a&&(c=iN(a,"scale","batchNorm")),null!=r&&(u=iN(r,"offset","batchNorm")),Vx(4===s.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(s.rank,".")),Vx(4===o.rank||1===o.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(o.rank,".")),Vx(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&Vx(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&Vx(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")),Ij(s,o,l,u,c,i)}});const Rj=oN({broadcastTo_:function(e,t){let n=iN(e,"broadcastTo","x");const r=n.shape;if(gv(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Cj(n,e)}const a=n.shape,i=Array.from(t);for(let c=t.length-1;c>=0;c--)if(a[c]===t[c])i[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));const s=i.map((e,t)=>e>1?t:-1).filter(e=>e>=0);if(0===s.length)return rS(n);const o={x:n},l={reps:i};return $k.runKernel(jw,o,l)}});const Pj=oN({clipByValue_:function(e,t,n){const r=iN(e,"x","clipByValue");if(Vx(t<=n,()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")),t===n)return bS(r.shape,t,r.dtype);const a={x:r},i={clipValueMin:t,clipValueMax:n};return $k.runKernel(Zv,a,i)}});const Mj=oN({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Vx(e.length>=1,()=>"Pass at least one tensor to concat");const n=sN(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}),1===n.length)return rS(n[0]);const r=n,a={axis:t};return $k.runKernel(ny,r,a)}});const Dj=oN({concat1d_:function(e){return Mj(e,0)}});const Fj=oN({concat2d_:function(e,t){return Mj(e,t)}});const Lj=oN({concat3d_:function(e,t){return Mj(e,t)}});const zj=oN({concat4d_:function(e,t){return Mj(e,t)}});const Bj=oN({conv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0;const o=iN(e,"x","conv2d","float32"),l=iN(t,"filter","conv2d","float32");let c=o,u=!1;3===o.rank&&(u=!0,c=Cj(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vx(4===c.rank,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),Vx(4===l.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")),jj("conv2d",r,s);const d="NHWC"===a?c.shape[3]:c.shape[1];Vx(d===l.shape[2],()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(l.shape[2],".")),Vx(kj(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")),Vx(Nj(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),Vx(Nj(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},f=$k.runKernel(ry,h,p);return u?Cj(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Uj=oN({conv1d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0;const o=iN(e,"x","conv1d"),l=iN(t,"filter","conv1d");let c=o,u=!1;2===o.rank&&(u=!0,c=Cj(o,[1,o.shape[0],o.shape[1]])),Vx(3===c.rank,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),Vx(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")),jj("conv1d",r,s),Vx(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")),Vx(kj(n,i),()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")),Vx(Nj(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),Vx(Nj(n),()=>"Error in conv1D: Stride should be larger than 0."),Vx("NWC"===a,()=>"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported."));const d=Cj(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Cj(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=Bj(h,d,[1,n],r,"NHWC",[1,i],s);return Cj(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const Wj=oN({conv2DBackpropInput_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0;Vx(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,l=t,c=!1;3===t.rank&&(c=!0,l=Cj(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),Vx(4===o.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(o.length,".")),Vx(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)),Vx(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank));const u="NHWC"===i?o[3]:o[1],d="NHWC"===i?l.shape[3]:l.shape[1];Vx(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],".")),Vx(d===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")),jj("conv2dDerInput",a,s);const h={dy:l,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},f=$k.runKernel(iy,h,p);return c?Cj(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Vj=oN({conv2dTranspose_:function(e,t,n,r,a,i){const s=iN(e,"x","conv2dTranspose"),o=iN(t,"filter","conv2dTranspose");return Wj(n,s,o,r,a,"NHWC",i)}});const Hj=oN({conv3d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const s=iN(e,"x","conv3d"),o=iN(t,"filter","conv3d");let l=s,c=!1;4===s.rank&&(c=!0,l=Cj(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vx(5===l.rank,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),Vx(5===o.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(o.rank,".")),Vx(l.shape[4]===o.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(o.shape[3],".")),Vx(kj(n,i),()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")),Vx("NDHWC"===a,()=>"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")),Vx(Nj(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),Vx(Nj(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:o},d={strides:n,pad:r,dataFormat:a,dilations:i},h=$k.runKernel(sy,u,d);return c?Cj(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const Gj=oN({conv3DBackpropInput_:function(e,t,n,r,a){Vx(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let i=e,s=t,o=!1;4===t.rank&&(o=!0,s=Cj(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);const l=i[4],c=s.shape[4];Vx(5===i.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")),Vx(5===s.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(s.rank)),Vx(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)),Vx(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")),Vx(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],"."));const u={dy:s,filter:n},d={pad:a,strides:r,inputShape:i},h=$k.runKernel(ly,u,d);return o?Cj(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const Kj=oN({conv3dTranspose_:function(e,t,n,r,a){const i=iN(e,"x","conv3dTranspose"),s=iN(t,"filter","conv3dTranspose");return Gj(n,i,s,r,a)}});const qj=oN({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=iN(e,"x","denseBincount"),i=iN(t,"weights","denseBincount");Vx("int32"===a.dtype,()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)),Vx(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")),Vx(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),Vx(i.size===a.size||0===i.size,()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,"."));const s={x:a,weights:i},o={size:n,binaryOutput:r};return $k.runKernel(fy,s,o)}});const Xj=oN({depthwiseConv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0;const o=iN(e,"x","depthwiseConv2d","float32"),l=iN(t,"filter","depthwiseConv2d","float32");let c=o,u=!1;3===o.rank&&(u=!0,c=Cj(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vx(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")),Vx(4===l.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."));const d="NHWC"===a?c.shape[3]:c.shape[1];Vx(d===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")),jj("depthwiseConv2d",r,s);const h={x:c,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},f=$k.runKernel(gy,h,p);return u?Cj(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Yj=oN({elu_:function(e){const t={x:iN(e,"x","elu","float32")};return $k.runKernel(Cy,t)}});const $j=oN({equal_:function(e,t){let n=iN(e,"a","equal","string_or_numeric"),r=iN(t,"b","equal","string_or_numeric");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(Iy,a)}});const Qj=oN({erf_:function(e){let t=iN(e,"x","erf");Vx("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=nS(t,"float32"));const n={x:t};return $k.runKernel(Ty,n)}});const Jj=oN({exp_:function(e){const t={x:iN(e,"x","exp")};return $k.runKernel(Ay,t)}});const Zj=oN({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=iN(e,"x","expandDims","string_or_numeric");Vx(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:t};return $k.runKernel(Oy,r,a)}});const eC=oN({tile_:function(e,t){const n=iN(e,"x","tile","string_or_numeric");Vx(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,"."));const r={x:n},a={reps:t};return $k.runKernel(jw,r,a)}});const tC=oN({eye_:function(e,t,n){null==t&&(t=e);const r=tS([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t;for(let s=0;s<a;++s)r.set(1,s,s);const i=Cj(r.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return eC(Zj(i,0),[n[0],1,1]);if(2===n.length)return eC(Zj(Zj(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return eC(Zj(Zj(Zj(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const nC=oN({floor_:function(e){const t={x:iN(e,"x","floor","float32")};return $k.runKernel(Dy,t)}});const rC=oN({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a={x:iN(e,"x","gather"),indices:iN(t,"indices","gather","int32")},i={axis:n,batchDims:r};return $k.runKernel(zy,a,i)}});const aC=oN({greater_:function(e,t){let n=iN(e,"a","greater","string_or_numeric"),r=iN(t,"b","greater","string_or_numeric");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(Uy,a)}});const iC=oN({greaterEqual_:function(e,t){let n=iN(e,"a","greaterEqual","string_or_numeric"),r=iN(t,"b","greaterEqual","string_or_numeric");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(Wy,a)}});const sC=oN({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:iN(e,"x","leakyRelu")},r={alpha:t};return $k.runKernel(Yy,n,r)}});const oC=oN({log_:function(e){const t={x:iN(e,"x","log","float32")};return $k.runKernel(Zy,t)}});const lC=oN({log1p_:function(e){const t={x:iN(e,"x","log1p")};return $k.runKernel(eb,t)}});const cC=oN({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:iN(e,"x","max")},a={reductionIndices:t,keepDims:n};return $k.runKernel(sb,r,a)}});const uC=oN({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=iN(e,"x","sum");"bool"===r.dtype&&(r=nS(r,"int32"));const a={x:r},i={axis:t,keepDims:n};return $k.runKernel(sw,a,i)}});const dC=oN({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=iN(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=dS((e,n)=>{const r=cC(e,t,!0),a=NS(e,r),i=NS(nS(a,"float32"),oC(uC(Jj(a),t,!0)));n([i]);return{value:i,gradFunc:(e,n)=>{const[r]=n,a=Jj(r);return NS(e,oS(uC(e,t,!0),a))}}});return r(n)}});function hC(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function pC(e,t,n){const r=e.length+t.length,a=[];let i=0,s=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[i++]):a.push(t[s++]);return a}function fC(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(t=>e[t])]}function mC(e,t){return pC(e,t.map(e=>1),t)}function gC(e,t,n){Vx(hC(t,n),()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input."))}function xC(e,t){if(hC(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function vC(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function yC(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const bC=oN({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=iN(e,"x","logSumExp"),a=Zx(t,r.shape),i=cC(r,a,!0),s=NS(r,i),o=Jj(s),l=uC(o,a),c=oC(l),u=aS(Cj(i,c.shape),c);if(n){const e=mC(u.shape,a);return Cj(u,e)}return u}});const wC=oN({logicalAnd_:function(e,t){const n=iN(e,"a","logicalAnd","bool"),r=iN(t,"b","logicalAnd","bool");TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(tb,a)}});const kC=oN({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=iN(e,"a","matMul"),i=iN(t,"b","matMul");[a,i]=Wk(a,i);const s={a:a,b:i},o={transposeA:n,transposeB:r};return $k.runKernel(Kv,s,o)}});const NC=oN({maxPool_:function(e,t,n,r,a){const i=iN(e,"x","maxPool");let s=i,o=!1;3===i.rank&&(o=!0,s=Cj(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vx(4===s.rank,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,".")),Vx(kj(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")),jj("maxPool",r,a);const l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},u=$k.runKernel(lb,l,c);return o?Cj(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const SC=oN({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const s=iN(e,"x","maxPool3d");let o=s,l=!1;4===s.rank&&(l=!0,o=Cj(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vx(5===o.rank,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),Vx("NDHWC"===i,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)),jj("maxPool3d",r,a);const c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=$k.runKernel(ub,c,u);return l?Cj(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const jC=oN({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:iN(e,"x","mean")},a={axis:t,keepDims:n};return $k.runKernel(pb,r,a)}});const CC=oN({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:iN(e,"x","min")},a={axis:t,keepDims:n};return $k.runKernel(fb,r,a)}});const EC=oN({minimum_:function(e,t){let n=iN(e,"a","minimum"),r=iN(t,"b","minimum");[n,r]=Wk(n,r),"bool"===n.dtype&&(n=nS(n,"int32"),r=nS(r,"int32")),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(mb,a)}});const TC=oN({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Zx(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=iN(e,"x","moments")).shape),r=jC(e,n,t);let a=r.shape;t||(a=mC(r.shape,n));const i=cS(NS(nS(e,"float32"),Cj(r,a)));return{mean:r,variance:jC(i,n,t)}}});const IC=oN({neg_:function(e){const t={x:iN(e,"x","neg")};return $k.runKernel(bb,t)}});const AC=oN({notEqual_:function(e,t){let n=iN(e,"a","notEqual","string_or_numeric"),r=iN(t,"b","notEqual","string_or_numeric");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(wb,a)}});const OC=oN({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const i={indices:iN(e,"indices","oneHot","int32")},s={dtype:a,depth:t,onValue:n,offValue:r};return $k.runKernel(Cb,i,s)}});function _C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(gv(e),"complex64"===t){const t=_C(e,"float32"),n=_C(e,"float32");return lN(t,n)}const n=fv(Kx(e),t);return $k.makeTensor(n,e,t)}function RC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(gv(e),"complex64"===t){const t=RC(e,"float32"),n=_C(e,"float32");return lN(t,n)}const n=pv(Kx(e),t);return $k.makeTensor(n,e,t)}const PC=oN({onesLike_:function(e){const t={x:iN(e,"x","onesLike")};return $k.runKernel(jb,t)}});const MC=oN({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=iN(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:t,constantValue:n},i={x:r};return $k.runKernel(Tb,i,a)}});const DC=oN({prelu_:function(e,t){const n={x:iN(e,"x","prelu"),alpha:iN(t,"alpha","prelu")};return $k.runKernel(Ab,n)}});var FC=n(4334);class LC{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const i=a||Math.random();this.random=FC.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,i;do{r=2*this.random()-1,a=2*this.random()-1,i=r*r+a*a}while(i>=1||0===i);const s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class zC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=FC.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const BC=oN({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(gv(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const i=new LC(t,n,r,!1,a),s=tS(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});const UC=oN({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;gv(e);const i=tS(e,r),s=new zC(t,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}});function WC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const a={start:e,stop:t,step:n,dtype:r};return $k.runKernel(Mb,{},a)}const VC=oN({relu_:function(e){const t={x:iN(e,"x","relu")};return $k.runKernel(Lb,t)}});const HC=oN({reverse_:function(e,t){const n={x:iN(e,"x","reverse")},r={dims:t};return $k.runKernel(Gb,n,r)}});const GC=oN({selu_:function(e){const t={x:iN(e,"x","selu")};return $k.runKernel(Jb,t)}});const KC=oN({separableConv2d_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const o=iN(e,"x","separableConv2d"),l=iN(t,"depthwiseFilter","separableConv2d"),c=iN(n,"pointwiseFilter","separableConv2d");let u=o,d=!1;if(3===o.rank&&(d=!0,u=Cj(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Vx(4===u.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")),Vx(4===l.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),Vx(4===c.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),Vx(1===c.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")),Vx(1===c.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],"."));const h=l.shape[2],p=l.shape[3];Vx(c.shape[2]===h*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*p,", ")+"but got ".concat(c.shape[2],"."));const f=Xj(u,l,r,a,s,i),m=Bj(f,c,1,"valid",s);return d?Cj(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const qC=oN({sigmoid_:function(e){const t={x:iN(e,"x","sigmoid","float32")};return $k.runKernel(rw,t)}});const XC=oN({slice_:function(e,t,n){const r=iN(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:t,size:n};return $k.runKernel(Zb,a,i)}});const YC=oN({slice1d_:function(e,t,n){const r=iN(e,"x","slice1d");return Vx(1===r.rank,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),XC(r,[t],[n])}});const $C=oN({slice2d_:function(e,t,n){const r=iN(e,"x","slice2d");return Vx(2===r.rank,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),XC(r,t,n)}});const QC=oN({slice3d_:function(e,t,n){const r=iN(e,"x","slice3d");return Vx(3===r.rank,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),XC(r,t,n)}});const JC=oN({slice4d_:function(e,t,n){const r=iN(e,"x","slice4d");return Vx(4===r.rank,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),XC(r,t,n)}});const ZC=oN({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=iN(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},a={dim:t};return $k.runKernel(cw,r,a)}});const eE=oN({softplus_:function(e){const t={x:iN(e,"x","softplus")};return $k.runKernel(aw,t)}});const tE=oN({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:iN(e,"x","split")},a={numOrSizeSplits:t,axis:n};return $k.runKernel(lw,r,a)}});const nE=oN({squeeze_:function(e,t){const n=iN(e,"x","squeeze","string_or_numeric");return Cj(n,ev(n.shape,t).newShape)}});const rE=oN({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=sN(e,"tensors","stack","string_or_numeric");Vx(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Vx(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:t};return $k.runKernel(Eb,r,a)}});const aE=oN({tanh_:function(e){const t={x:iN(e,"x","tanh","float32")};return $k.runKernel(Sw,t)}});function iE(e,t){Gx(e);const n=nN(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return cN(e,null,n,t)}function sE(e,t,n){if(Gx(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=nN(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return cN(e,t,r,n)}const oE=oN({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(gv(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const i=new LC(t,n,r,!0,a),s=tS(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});const lE=oN({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=iN(e,"x","unstack","string_or_numeric");Vx(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));const r={value:n},a={axis:t};return $k.runKernel(Aw,r,a)}});const cE=oN({where_:function(e,t,n){const r=iN(t,"a","where"),a=iN(n,"b","where"),i=iN(e,"condition","where","bool"),s=TS(TS(i.shape,r.shape),a.shape),o={condition:Rj(i,s),t:Rj(r,s),e:Rj(a,s)};return $k.runKernel(Qb,o)}});const uE=oN({imag_:function(e){const t={input:iN(e,"input","imag")};return $k.runKernel(Gy,t)}});const dE=oN({real_:function(e){const t={input:iN(e,"input","real")};return $k.runKernel(Db,t)}});const hE=oN({transpose_:function(e,t,n){const r=iN(e,"x","transpose");if(null==t&&(t=r.shape.map((e,t)=>t).reverse()),Vx(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")),t.forEach(e=>{Vx(e>=0&&e<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t))}),r.rank<=1)return r.clone();const a={x:r},i={perm:t};return"complex64"===r.dtype?fN(()=>{let e=dE(r),t=uE(r);return e=$k.runKernel(Tw,{x:e},i),t=$k.runKernel(Tw,{x:t},i),n&&(t=IC(t)),lN(e,t)}):$k.runKernel(Tw,a,i)}});const pE=oN({dropout_:function(e,t,n,r){const a=iN(e,"x","dropout");if(Vx("float32"===a.dtype,()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")),Vx(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),0===t)return e instanceof Ik?a.clone():a;const i=function(e,t){if(null==t)return e.shape.slice();if(qx(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),s=1-t,o=sS(nC(aS(UC(i,0,1,"float32",r),s)),s);return oS(a,o)}});const fE=oN({fft_:function(e){Vx("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return $k.runKernel(Ry,t)}});const mE=oN({rfft_:function(e,t){Vx("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1];const r=e.size/n;let a;if(null!=t&&t<n){const r=e.shape.map(e=>0),i=e.shape.map(e=>e);i[e.shape.length-1]=t,a=XC(e,r,i),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,a=Mj([e,_C(r)],e.shape.length-1),n=t}else a=e;const i=uS(a),s=Cj(lN(a,i),[r,n]),o=fE(s),l=Math.floor(n/2)+1,c=dE(o),u=uE(o),d=tE(c,[l,n-l],c.shape.length-1),h=tE(u,[l,n-l],u.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=l,Cj(lN(d[0],h[0]),p)}});const gE=oN({ifft_:function(e){Vx("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return $k.runKernel(Hy,t)}});const xE=oN({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const a=Cj(e,[n,t]);r=gE(a)}else{const a=[n,2*(t-1)],i=Cj(dE(e),[n,t]),s=Cj(uE(e),[n,t]),o=HC(XC(i,[0,1],[n,t-2]),1),l=oS(HC(XC(s,[0,1],[n,t-2]),1),hS(-1)),c=Mj([i,o],1),u=Mj([s,l],1),d=Cj(lN(c,u),[a[0],a[1]]);r=gE(d)}if(r=dE(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=Cj(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const vE=oN({conv2DBackpropFilter_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=Cj(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Cj(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Vx(4===o.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(o.shape,".")),Vx(4===l.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")),Vx(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,"."));const c="NHWC"===i?o.shape[3]:o.shape[1],u="NHWC"===i?l.shape[3]:l.shape[1];Vx(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")),Vx(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],").")),jj("conv2dDerFilter",a,s);const d={x:o,dy:l},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return $k.runKernel(ay,d,h)}});const yE=oN({relu6_:function(e){const t={x:iN(e,"x","relu6")};return $k.runKernel(Hb,t)}});const bE=oN({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:iN(e,"x","step")},r={alpha:t};return $k.runKernel(Rw,n,r)}});function wE(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return oS(e,bE(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function kE(e,t){let n=t;const r=ES(e.shape,t.shape);return r.length>0&&(n=uC(n,r)),Cj(n,e.shape)}function NE(e,t,n,r){if("linear"===t)return e;if("relu"===t)return VC(e);if("elu"===t)return Yj(e);if("relu6"===t)return yE(e);if("prelu"===t)return DC(e,n);if("leakyrelu"===t)return sC(e,r);if("sigmoid"===t)return qC(e);throw new Error("Unknown fused activation ".concat(t,"."))}const SE=(e,t)=>!(e>0)||"linear"===t;const jE=oN({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:a,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}=e;if(c=c||"linear",!1===SE($k.state.gradientDepth,c)){Vx("NHWC"===i,()=>"Error in fused conv2d: got dataFormat of ".concat(i," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let e=Bj(t,n,r,a,i,s,o);return null!=l&&(e=aS(e,l)),NE(e,c,u,d)}const h=iN(t,"x","conv2d","float32"),p=iN(n,"filter","conv2d","float32");let f=h,m=!1;3===h.rank&&(m=!0,f=Cj(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Vx(4===f.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,".")),Vx(4===p.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")),jj("fused conv2d",a,o);const g="NHWC"===i?f.shape[3]:f.shape[1];Vx(p.shape[2]===g,()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],".")),Vx(kj(r,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(s,"'"));const x=fj(f.shape,p.shape,r,s,a,o);let v,y;if(null!=l&&(v=iN(l,"bias","fused conv2d"),[v]=Wk(v,h),"NHWC"===i?TS(x.outShape,v.shape):(Vx(v.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,".")),Vx(0===v.shape.length||v.shape[0]===x.outChannels||1===v.shape[0],()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(x.outChannels,")")))),null!=u){const e=u.shape;if(Vx(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,".")),1===e.length)Vx(1===e[0]||e[0]===x.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(x.outChannels,")."));else if(3===e.length)try{TS(e,x.outShape)}catch(Yje){const n="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(x.outShape,").");throw Error(n)}y=iN(u,"prelu weights","fused conv2d")}const b=(e,t)=>{Vx("NHWC"===i,()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(i," but only NHWC is currently supported."));const[n,o,l,u]=t,d=wE(e,l,c);Vx(wj(s),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'"));const h=[Wj(o.shape,d,n,r,a),vE(o,d,n.shape,r,a)];if(null!=u){const e=kE(u,d);h.push(e)}return h},w={x:f,filter:p,bias:v,preluActivationWeights:y},k={strides:r,pad:a,dataFormat:i,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:d};if(null==l){const e=dS((e,t,n)=>{let r=$k.runKernel(Fw,w,k);return n([t,e,r]),m&&(r=Cj(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}});return e(f,p)}{const e=dS((e,t,n,r)=>{let a=$k.runKernel(Fw,w,k);return r([t,e,a,n]),m&&(a=Cj(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}});return e(f,p,v)}}});const CE=oN({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=Cj(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Cj(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return $k.runKernel(xy,c,u)}});const EE=oN({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,o=t,l=!1;3===t.rank&&(l=!0,o=Cj(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:o,filter:n},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:e},d=$k.runKernel(vy,c,u);return l?Cj(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const TE=oN({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:a=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:l=.2}=e;if(!1===SE($k.state.gradientDepth,s)){let e=kC(t,n,r,a);return null!=i&&(e=aS(e,i)),NE(e,s,o,l)}let c=iN(t,"a","fused matMul"),u=iN(n,"b","fused matMul");[c,u]=Wk(c,u);const d=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=a?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=a?u.shape[u.rank-2]:u.shape[u.rank-1],m=c.shape.slice(0,-2),g=u.shape.slice(0,-2),x=Kx(m),v=Kx(g);Vx(d===h,()=>"Error in fused matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(c.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match."));const y=TS(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),b=Cj(c,r?[x,d,p]:[x,p,d]),w=Cj(u,a?[v,f,h]:[v,h,f]);let k,N;null!=i&&(k=iN(i,"bias","fused matMul"),[k]=Wk(k,c),TS(y,k.shape)),null!=o&&(N=iN(o,"prelu weights","fused matMul"));const S=(e,t)=>{const[n,o,l,c]=t,u=wE(Cj(e,l.shape),l,s);let d,h;if(r||a?!r&&a?(d=kC(u,o,!1,!1),h=kC(u,n,!0,!1)):r&&!a?(d=kC(o,u,!1,!0),h=kC(n,u,!1,!1)):(d=kC(o,u,!0,!0),h=kC(u,n,!0,!0)):(d=kC(u,o,!1,!0),h=kC(n,u,!0,!1)),null!=i){return[d,h,kE(c,u)]}return[d,h]},j={a:b,b:w,bias:k,preluActivationWeights:N},C={transposeA:r,transposeB:a,activation:s,leakyreluAlpha:l};if(null==i){const e=dS((e,t,n)=>{const r=$k.runKernel(Dw,j,C);return n([e,t,r]),{value:Cj(r,y),gradFunc:S}});return e(b,w)}{const e=dS((e,t,n,r)=>{const a=$k.runKernel(Dw,j,C);return r([e,t,a,n]),{value:Cj(a,y),gradFunc:S}});return e(b,w,k)}}});const IE=oN({cropAndResize_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=iN(e,"image","cropAndResize"),o=iN(t,"boxes","cropAndResize","float32"),l=iN(n,"boxInd","cropAndResize","int32"),c=o.shape[0];Vx(4===s.rank,()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(s.rank,".")),Vx(2===o.rank&&4===o.shape[1],()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(o.shape,".")),Vx(1===l.rank&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(o.shape,".")),Vx(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")),Vx(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),Vx("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was ".concat(a));const u={image:s,boxes:o,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return $k.runKernel(py,u,d)}});const AE=oN({flipLeftRight_:function(e){const t=iN(e,"image","flipLeftRight","float32");Vx(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,"."));const n={image:t};return $k.runKernel(My,n,{})}});const OE=oN({grayscaleToRGB_:function(e){const t=iN(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Vx(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),Vx(1===r,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,"."));const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,eC(t,a)}});const _E=oN({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map((e,t)=>iN(e,"tensors".concat(t),"einsum")),i={equation:e};return $k.runKernel(jy,a,i)}});const RE=oN({rgbToGrayscale_:function(e){const t=iN(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];Vx(t.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),Vx(3===r,()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,"."));const a=t.dtype,i=nS(t,"float32"),s=iE([.2989,.587,.114]);let o;switch(t.rank){case 2:o=_E("ij,j->i",i,s);break;case 3:o=_E("ijk,k->ij",i,s);break;case 4:o=_E("ijkl,l->ijk",i,s);break;case 5:o=_E("ijklm,m->ijkl",i,s);break;case 6:o=_E("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return o=Zj(o,-1),nS(o,a)}});const PE=oN({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const a=iN(e,"image","rotateWithOffset","float32");Vx(4===a.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,"."));const i={image:a},s={radians:t,fillValue:n,center:r};return $k.runKernel(Mw,i,s)}});function ME(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);const s=e.shape[0];return n=Math.min(n,s),Vx(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),Vx(2===e.rank,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),Vx(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),Vx(1===t.rank,()=>"scores must be a 1D tensor"),Vx(t.shape[0]===s,()=>"scores has incompatible shape with boxes. Expected ".concat(s,", ")+"but was ".concat(t.shape[0])),Vx(0<=i&&i<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(i,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}const DE=oN({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const i=iN(e,"boxes","nonMaxSuppression","float32"),s=iN(t,"scores","nonMaxSuppression","float32"),o=ME(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return $k.runKernel(kb,{boxes:i,scores:s},l)}});function FE(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);const o=n(t,e[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}(e,t,n||LE)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function LE(e,t){return e>t?1:e<t?-1:0}function zE(e,t,n,r,a){return WE(e,t,n,r,a,0)}function BE(e,t,n,r,a,i){return WE(e,t,n,r,a,0,!1,i,!0)}function UE(e,t,n,r,a,i){return WE(e,t,n,r,a,i,!0)}function WE(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let g=0;g<t.length;g++)t[g]>a&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(GE);const u=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:i,suppressBeginIndex:s}=t;if(n<a)break;let o=!1;for(let l=d.length-1;l>=s;--l){const n=VE(e,i,d[l]);if(n>=r){o=!0;break}if(t.score=t.score*HE(r,u,n),t.score<=a)break}t.suppressBeginIndex=d.length,o||(t.score===n?(d.push(i),h.push(t.score)):t.score>a&&FE(c,t,GE))}const p=d.length,f=n-p;o&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const m={selectedIndices:d};return s&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function VE(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(o-i)*(l-s),f=(d-c)*(h-u);if(p<=0||f<=0)return 0;const m=Math.max(i,c),g=Math.max(s,u),x=Math.min(o,d),v=Math.min(l,h),y=Math.max(x-m,0)*Math.max(v-g,0);return y/(p+f-y)}function HE(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function GE(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const KE=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const i=iN(e,"boxes","nonMaxSuppressionAsync"),s=iN(t,"scores","nonMaxSuppressionAsync"),o=ME(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const l=await Promise.all([i.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:d}=zE(c,u,n,r,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),iE(d,"int32")};const qE=oN({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=iN(e,"boxes","nonMaxSuppression"),o=iN(t,"scores","nonMaxSuppression"),l=ME(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:s,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=$k.runKernel(Sb,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}});const XE=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=iN(e,"boxes","nonMaxSuppressionAsync"),o=iN(t,"scores","nonMaxSuppressionAsync"),l=ME(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([s.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=UE(u,d,n,r,a,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:iE(h,"int32"),selectedScores:iE(p)}};const YE=oN({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=iN(e,"boxes","nonMaxSuppression"),o=iN(t,"scores","nonMaxSuppression"),l=ME(s,o,n,r,a,null),c={boxes:s,scores:o},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:i},d=$k.runKernel(Nb,c,u);return{selectedIndices:d[0],validOutputs:d[1]}}});const $E=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=iN(e,"boxes","nonMaxSuppressionAsync"),o=iN(t,"scores","nonMaxSuppressionAsync"),l=ME(s,o,n,r,a,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([s.data(),o.data()]),{selectedIndices:f,validOutputs:m}=BE(h,p,c,u,d,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:iE(f,"int32"),validOutputs:hS(m,"int32")}};const QE=oN({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=iN(e,"images","resizeBilinear");Vx(3===a.rank||4===a.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")),Vx(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")),Vx(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;3===a.rank&&(s=!0,i=Cj(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=$k.runKernel(Wb,o,l);return s?Cj(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const JE=oN({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=iN(e,"images","resizeNearestNeighbor");Vx(3===a.rank||4===a.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")),Vx(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")),Vx("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),Vx(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;3===a.rank&&(s=!0,i=Cj(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=$k.runKernel(Bb,o,l);return s?Cj(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const ZE=oN({bincount_:function(e,t,n){const r=iN(e,"x","bincount"),a=iN(t,"weights","bincount");Vx("int32"===r.dtype,()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)),Vx(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),Vx(a.size===r.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,"."));const i={x:r,weights:a},s={size:n};return $k.runKernel(Xv,i,s)}});const eT=oN({lessEqual_:function(e,t){let n=iN(e,"a","lessEqual","string_or_numeric"),r=iN(t,"b","lessEqual","string_or_numeric");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(Qy,a)}});const tT=oN({round_:function(e){const t={x:iN(e,"x","round")};return $k.runKernel(Kb,t)}});const nT=oN({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const a=iN(e,"image","threshold"),i=a.shape[0]*a.shape[1];let s,o,l,c,u=oS(iE([r]),255);if(Vx(3===a.rank,()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(a.rank,".")),Vx(3===a.shape[2]||1===a.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(a.shape[2],".")),Vx("int32"===a.dtype||"float32"===a.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(a.dtype,".")),Vx("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was ".concat(t)),3===a.shape[2]){[s,o,l]=tE(a,[1,1,1],-1);const e=oS(s,.2989),t=oS(o,.587),n=oS(l,.114);c=aS(aS(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,r,a,i,s,o,l=iE([-1]),c=iE([0]),u=iE([0]);for(let d=0;d<e.size-1;d++){n=XC(e,0,d+1),r=XC(e,d+1),s=sS(uC(n),t),o=sS(uC(r),t);const h=uC(oS(n,WC(0,n.size)));a=sS(h,uC(n));const p=bS(r.shape,n.size),f=aS(WC(0,r.size),p),m=oS(r,f);i=sS(uC(m),uC(r));const g=NS(a,i),x=NS(a,i),v=oS(s,o);u=oS(oS(v,g),x);const y=aC(u,c);c=cE(y,u,c),l=cE(y,iE([d]),l)}return l}(ZE(nS(tT(c),"int32"),uN([]),256),i)}const d=n?eT(c,u):aC(c,u);return nS(oS(d,255),"int32")}});const rT=oN({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0;const s=iN(e,"image","transform","float32"),o=iN(t,"transforms","transform","float32");Vx(4===s.rank,()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(s.rank,".")),Vx(2===o.rank&&(o.shape[0]===s.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Vx(null==i||2===i.length,()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,"."));const l={image:s,transforms:o},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return $k.runKernel(Ew,l,c)}});const aT=oN({less_:function(e,t){let n=iN(e,"a","less","string_or_numeric"),r=iN(t,"b","less","string_or_numeric");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel($y,a)}});const iT=oN({bandPart_:function(e,t,n){const r=iN(e,"a","bandPart");Vx(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));const a=r.shape,[i,s]=r.shape.slice(-2);let o,l;"number"===typeof t?(Vx(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),Vx(t<=i,()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(i,").")),o=iN(t<0?i:t,"numLower","bandPart")):(Vx("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),o=cE(aT(t,0),i,EC(t,i))),"number"===typeof n?(Vx(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),Vx(n<=s,()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,").")),l=iN(n<0?s:n,"numUpper","bandPart")):(Vx("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=cE(aT(n,0),s,EC(n,s)));const c=Cj(WC(0,i,1,"int32"),[-1,1]),u=WC(0,s,1,"int32"),d=NS(c,u),h=wC(eT(d,o),iC(d,IC(l))),p=_C([i,s],r.dtype);return Cj(rE(lE(Cj(r,[-1,i,s])).map(e=>cE(h,e,p))),a)}});function sT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return jS(e);if(1!==e.rank&&null===n)return sT(Cj(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return uC(jS(e),n);if(t===1/0)return cC(jS(e),n);if(t===-1/0)return CC(jS(e),n);if("euclidean"===t||2===t)return lS(uC(kS(jS(e),hS(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return cC(uC(jS(e),n[0]),n[1]-1);if(t===1/0)return cC(uC(jS(e),n[1]),n[0]);if(t===-1/0)return CC(uC(jS(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return lS(uC(cS(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const oT=oN({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=sT(e=iN(e,"x","norm"),t,n);let i=a.shape;if(r){const t=Zx(n,e.shape);i=mC(a.shape,t)}return Cj(a,i)}});const lT=oN({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Vx(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)Vx(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")"))}else t=!0,e=tE(e,e.shape[0],0).map(e=>nE(e,[0]));Vx(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],")."));const n=[],r=e;for(let a=0;a<e.length;++a)n.push($k.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){const r=oS(uC(oS(n[t],e)),n[t]);e=NS(e,r)}return sS(e,oT(e,"euclidean"))}));return t?rE(n,0):n}});function cT(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $k.tidy(()=>{Vx(2===e.shape.length,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));const n=e.shape[0],r=e.shape[1];let a=tC(n),i=rS(e);const s=sE([[1]],[1,1]);let o=rS(s);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=i,l=o,c=a;[o,i,a]=$k.tidy(()=>{const t=XC(i,[e,e],[n-e,1]),l=oT(t),c=XC(i,[e,e],[1,1]),u=cE(aC(c,0),sE([[-1]]),sE([[1]])),d=NS(c,oS(u,l)),h=sS(t,d);o=1===h.shape[0]?rS(s):Mj([s,XC(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=IC(sS(kC(u,d),l)),f=XC(i,[e,0],[n-e,r]),m=oS(p,o),g=hE(o);if(0===e)i=NS(f,kC(m,kC(g,f)));else{const t=NS(f,kC(m,kC(g,f)));i=Mj([XC(i,[0,0],[e,r]),t],0)}const x=hE(m),v=XC(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=NS(v,kC(kC(v,o),x));else{const t=NS(v,kC(kC(v,o),x));a=Mj([XC(a,[0,0],[n,e]),t],1)}return[o,i,a]}),mN([t,l,c])}return!t&&n>r&&(a=XC(a,[0,0],[n,r]),i=XC(i,[0,0],[r,r])),[a,i]})}const uT=oN({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Vx(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),2===e.rank)return cT(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=lE(Cj(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(e=>{const[n,r]=cT(e,t);a.push(n),i.push(r)});return[Cj(rE(a,0),e.shape),Cj(rE(i,0),e.shape)]}}});var dT;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(dT||(dT={}));const hT=oN({squaredDifference_:function(e,t){let n=iN(e,"a","squaredDifference"),r=iN(t,"b","squaredDifference");[n,r]=Wk(n,r),TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(mw,a,{})}});const pT={flipLeftRight:AE,grayscaleToRGB:OE,resizeNearestNeighbor:JE,resizeBilinear:QE,rgbToGrayscale:RE,rotateWithOffset:PE,cropAndResize:IE,nonMaxSuppression:DE,nonMaxSuppressionAsync:KE,nonMaxSuppressionWithScore:qE,nonMaxSuppressionWithScoreAsync:XE,nonMaxSuppressionPadded:YE,nonMaxSuppressionPaddedAsync:$E,threshold:nT,transform:rT},fT={bandPart:iT,gramSchmidt:lT,qr:uT};const mT=class{static sgd(e){return new OS(e)}static momentum(e,t){return new _S(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new RS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new SS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new yS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new AS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new wS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},gT="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function xT(){return new Promise(e=>gT(()=>e()))}function vT(e,t){const n=e[0].length;e.forEach((e,t)=>{Vx(e.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")"))}),Vx(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));const r=e[0];e.forEach((e,a)=>{for(let i=0;i<n;i++)Vx(i===t||e[i]===r[i],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,"."))})}function yT(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var bT;function wT(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let a=1;a<n.length;++a){const i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(o))}else r[s]=i}return r}function kT(e){const t={FIRST_DIM_SIZE:bT.FIRST_DIM_SIZE,VALUE_ROWIDS:bT.VALUE_ROWIDS,ROW_LENGTHS:bT.ROW_LENGTHS,ROW_SPLITS:bT.ROW_SPLITS,ROW_LIMITS:bT.ROW_LIMITS,ROW_STARTS:bT.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function NT(e){return 0===e.length?0:e[0]===bT.FIRST_DIM_SIZE?e.length-1:e.length}function ST(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let a=0;a<Math.min(n,r-1);++a){const n=e[a],r=t[a+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(bT||(bT={}));const jT=30;function CT(e){return e<=jT?e:cv(e,Math.floor(Math.sqrt(e)))}function ET(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function TT(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let a=0;a<n;++a)r=r.concat([e[a+1]/t[a],t[a]]);r=r.concat(e.slice(n+1))}return r}function IT(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],a=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?a.push(n):r.push(n);n.push(...r),n.push(0),n.push(...a)}return n}function AT(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function OT(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function _T(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function RT(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Kx(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const a=t.shape,i=a[a.length-1];let s=1;for(let d=0;d<a.length-1;++d)s*=a[d];const o=e.shape,l=a.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=o[d],l.push(o[d]);const u=[...uv(e.shape).map(e=>e/c),1].slice(0,i);return[l,s,c,u]}function PT(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(let s=0;s<a;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function MT(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}PT(n,t,e)}function DT(e,t,n){const r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length;let s=1;for(let l=a;l<i;++l)s*=n[l];const o=a<1?1:a;return{sliceRank:a,numUpdates:Kx(t.shape)/o,sliceSize:s,strides:[...uv(n.slice(0,a)),1],outputSize:Kx(n)}}const FT=1.7580993408473768,LT=1.0507009873554805,zT=.3275911,BT=.254829592,UT=-.284496736,WT=1.421413741,VT=-1.453152027,HT=1.061405429;function GT(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function KT(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function qT(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function XT(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function YT(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $T(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function QT(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function JT(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const ZT="->",eI=/->/g,tI=",",nI="...";function rI(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(eI,"").length)/ZT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(ZT,'").'));const[r,a]=e.split(ZT);Vx(-1===r.indexOf(nI),()=>'The ellipsis notation ("'.concat(nI,'") is not supported yet.'));const i=r.split(tI),s=i.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<a.length;++d){const e=a[d];if(!i.some(t=>-1!==t.indexOf(e)))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===o.indexOf(e)&&o.push(e)}for(let d=0;d<r.length;++d){const e=r[d];-1===o.indexOf(e)&&e!==tI&&o.push(e)}const l=new Array(i.length);for(let d=0;d<s;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error("Found duplicate axes in input component ".concat(i[d],". ")+"Support for duplicate axes in input is not implemented yet.");l[d]=[];for(let e=0;e<i[d].length;++e)l[d].push(o.indexOf(i[d][e]))}const c=o.length,u=[];for(let d=a.length;d<c;++d)u.push(d);return{allDims:o,summedDims:u,idDims:l}}function aI(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;const r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function iI(e,t,n){const r=new Array(e);for(let a=0;a<n.length;++a){const e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:Vx(r[t[a][n]]===e[n],()=>"Expected dimension ".concat(r[t[a][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n]))}}function sI(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let s=0;s<a;++s)r.push([]);const i=[];for(let s=0;s<n.length;++s){const e=lI(t,n[s]);for(const t of e)-1===i.indexOf(t)&&(r[s].push(t),i.push(t))}return{path:n,steps:r}}function oI(e){return e.every((e,t)=>e===t)}function lI(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function cI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Vx(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);Vx(a<=1,()=>"There should be only one negative value in split array.");const i=t.indexOf(-1);if(-1!==i){const r=t.reduce((e,t)=>t>0?e+t:e);t[i]=e.shape[n]-r}Vx(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function uI(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function dI(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function hI(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function pI(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function fI(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function mI(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function gI(e,t){const n=Kx(e),r=Kx(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function xI(e,t){const n=Kx(e),r=Kx(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function vI(){return"segment ids must be >= 0"}function yI(){return"segment ids are not increasing"}function bI(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function wI(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function kI(e,t){let n,r=!1;for(e<=jT?(n=e,r=!0):n=cv(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=cv(e,n+1);return n}function NI(e,t,n){const r=[],a=e.length;for(let i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function SI(e,t,n,r){const a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));const s=e.shape[n],o=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)o.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)o.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<a;d++)o.push(t.shape[d]);for(let d=n+1;d<i;d++)o.push(e.shape[d]),u*=e.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:o}}function jI(e){try{return e.map(e=>fk(e))}catch(Qje){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Qje))}}function CI(e){return e.map(e=>pk(e))}function EI(e,t){const n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);const r=tS(e,"int32"),a=tS([n.length,e.length],"int32");for(let i=0;i<n.length;i++){const t=r.indexToLoc(n[i]),s=i*e.length;a.values.set(t,s)}return a.toTensor()}!function(){for(const e of PS)xS(e)}();const TI={kernelName:Tv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,bE(nS(n,"float32"),-1))}}},II={kernelName:Iv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=cS(nS(n,"float32")),r=lS(NS(hS(1),t));return IC(sS(e,r))}}}},AI={kernelName:Av,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=lS(NS(cS(nS(n,"float32")),1));return sS(e,t)}}}},OI={kernelName:Ov,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{let t=e;const r=ES(n.shape,a);return r.length>0&&(t=uC(t,r)),Cj(t,n.shape)},b:()=>{let t=e;const n=ES(r.shape,a);return n.length>0&&(t=uC(t,n)),Cj(t,r.shape)}}}},_I={kernelName:_v,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},RI={kernelName:Mv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>uS(n)}}},PI={kernelName:Dv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>uS(n)}}},MI={kernelName:Fv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,lS(NS(hS(1),cS(nS(n,"float32")))))}}},DI={kernelName:Lv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=lS(aS(hS(1),cS(nS(n,"float32"))));return sS(e,t)}}}},FI={kernelName:Uv,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{const t=aS(cS(n),cS(r));let i=oS(e,sS(r,t));const s=ES(n.shape,a);return s.length>0&&(i=uC(i,s)),Cj(i,n.shape)},b:()=>{const t=aS(cS(n),cS(r));let i=IC(oS(e,sS(n,t)));const s=ES(r.shape,a);return s.length>0&&(i=uC(i,s)),Cj(i,r.shape)}}}},LI={kernelName:zv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,aS(cS(nS(n,"float32")),1))}}},zI={kernelName:Bv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,NS(hS(1),cS(nS(n,"float32"))))}}};const BI=oN({avgPool3dGrad_:function(e,t,n,r,a,i){const s=iN(e,"dy","avgPool3dGrad"),o=iN(t,"input","avgPool3dGrad");let l=s,c=o,u=!1;4===o.rank&&(u=!0,l=Cj(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=Cj(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Vx(5===l.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")),Vx(5===c.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")),jj("avgPool3dGrad",a,i);const d={dy:l,input:c},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=$k.runKernel(Gv,d,h);return u?Cj(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),UI={kernelName:Hv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>BI(e,r,a,i,s,o)}}};const WI=oN({avgPoolGrad_:function(e,t,n,r,a){const i=iN(e,"dy","avgPoolGrad"),s=iN(t,"input","avgPoolGrad");Vx(s.rank===i.rank,()=>"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(i.rank,")"));let o=s,l=i,c=!1;3===s.rank&&(c=!0,o=Cj(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=Cj(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vx(4===l.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")),Vx(4===o.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(o.rank,"."));const u={dy:l,input:o},d={filterSize:n,strides:r,pad:a},h=$k.runKernel(Vv,u,d);return c?Cj(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),VI={kernelName:Wv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>WI(e,r,a,i,s)}}},HI={kernelName:Kv,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t,{transposeA:i,transposeB:s}=n;return i||s?!i&&s?{a:()=>kC(e,a,!1,!1),b:()=>kC(e,r,!0,!1)}:i&&!s?{a:()=>kC(a,e,!1,!0),b:()=>kC(r,e,!1,!1)}:{a:()=>kC(a,e,!0,!0),b:()=>kC(e,r,!0,!0)}:{a:()=>kC(e,a,!1,!0),b:()=>kC(r,e,!0,!1)}}};const GI=oN({spaceToBatchND_:function(e,t,n){const r=iN(e,"x","spaceToBatchND");Vx(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),Vx(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),Vx(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));const a={x:r},i={blockShape:t,paddings:n};return $k.runKernel(ow,a,i)}}),KI={kernelName:qv,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>GI(e,r,a)}}},qI={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let l=a.length-1;l>=0;l--)if(a[l]===i[l])s[l]=1;else if(1!==a[l])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));const o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>uC(e,o,!0)}}},XI={kernelName:Qv,gradFunc:e=>({x:()=>e.clone()})},YI={kernelName:Jv,gradFunc:e=>({x:()=>uS(e)})},$I={kernelName:Zv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>cE(wC(iC(r,a),eT(r,i)),e,uS(e))}}},QI={kernelName:ty,inputsToSave:["x"],gradFunc:TI.gradFunc},JI={kernelName:ny,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape),{axis:a}=n,i=Zx(a,t[0].shape)[0],s=r.map(e=>e[i]);return tE(e,s,i).map(e=>()=>e)}},ZI={kernelName:ry,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:i,strides:s,pad:o,dataFormat:l}=n;return Vx(wj(i),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")),{x:()=>Wj(r.shape,e,a,s,o,l),filter:()=>vE(r,e,a.shape,s,o,l)}}},eA={kernelName:iy,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:i,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Bj(e,a,i,s,o,1,l),filter:()=>vE(e,r,a.shape,i,s,o,l)}}};const tA=oN({conv3DBackpropFilter_:function(e,t,n,r,a){let i=e;4===e.rank&&(i=Cj(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;4===s.rank&&(s=Cj(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Vx(5===i.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")),Vx(5===s.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(s.shape,".")),Vx(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")),Vx(i.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")),Vx(s.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(s.shape[4],") must ")+"match output depth for filter (".concat(n[4],")."));const o={x:i,dy:s},l={strides:r,pad:a,filterShape:n};return $k.runKernel(oy,o,l)}}),nA={kernelName:sy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:i}=n;Vx(wj(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'"));const[s,o]=t;return{x:()=>Gj(s.shape,e,o,a,i),filter:()=>tA(s,e,o.shape,a,i)}}};const rA=oN({sin_:function(e){const t={x:iN(e,"x","sin","float32")};return $k.runKernel(ew,t)}}),aA={kernelName:cy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(IC(rA(nS(n,"float32"))),e)}}};const iA=oN({sinh_:function(e){const t={x:iN(e,"x","sinh")};return $k.runKernel(tw,t)}}),sA={kernelName:uy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(iA(nS(n,"float32")),e)}}};const oA=oN({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={x:iN(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return $k.runKernel(hy,a,i)}}),lA={kernelName:hy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{const t=xC([a],r.rank);let n=oA(e,a,i,!s);return null!=t&&(n=hE(n,t)),n}}}},cA={kernelName:gy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=null==r?[1,1]:r;Vx(wj(o),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(o,"'"));const[l,c]=t;return Vx(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")),Vx(4===c.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")),Vx(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")),Vx(kj(a,o),()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(o,"'.")),jj("depthwiseConv2d",i,s),{x:()=>EE(l.shape,e,c,a,i,o,s),filter:()=>CE(l,e,c.shape,a,i,o,s)}}},uA={kernelName:by,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,i={x:r,filter:a,dy:e},s={x:r,filter:a,dy:e};return{x:()=>$k.runKernel(wy,i,n),filter:()=>$k.runKernel(ky,s,n)}}},dA={kernelName:Cy,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>$k.runKernel(Ey,r)}}},hA={kernelName:Ty,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=oS(Jj(IC(cS(n))),2/Math.sqrt(Math.PI));return{x:()=>oS(e,r)}}},pA={kernelName:Ay,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,n)}}},fA={kernelName:Oy,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Cj(e,n.shape)}}},mA={kernelName:_y,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,Jj(n))}}},gA={kernelName:Dy,gradFunc:e=>({x:()=>uS(e)})},xA={kernelName:Fy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{const t=sS(e,nS(r,"float32")),i=ES(n.shape,a);return i.length>0?Cj(uC(t,i),n.shape):t},b:()=>{let t=oS(e,nS(n,"float32"));const i=ES(r.shape,a);i.length>0&&(t=Cj(uC(t,i),r.shape));const s=cS(r);return IC(sS(t,nS(s,"float32")))}}}};const vA=oN({rsqrt_:function(e){const t={x:iN(e,"x","rsqrt","float32")};return $k.runKernel(qb,t)}}),yA={kernelName:Ly,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[a,i,s,o]=t,l=null==o?hS(1):o,c=ES(i.shape,a.shape),u=[];if(1===i.rank){for(let e=0;e<a.shape.length-1;++e)u.push(a.shape[e]);u.push(1)}const d=NS(a,i),h=oS(e,l),p=vA(aS(s,hS(r))),f=oS(oS(oS(p,p),p),hS(-.5));return{x:()=>1===i.rank?Cj(oS(oS(e,eC(Cj(p,[1,1,1,i.shape[0]]),u)),l),a.shape):Cj(oS(oS(e,p),l),a.shape),mean:()=>{let e=oS(oS(p,hS(-1)),h);return 1===i.rank&&(e=uC(e,c)),Cj(e,i.shape)},variance:()=>{let e=oS(oS(f,d),h);return 1===i.rank&&(e=uC(e,c)),Cj(e,i.shape)},scale:()=>{const t=oS(d,p);let n=oS(e,t);return 1===i.rank&&(n=uC(n,c)),Cj(n,i.shape)},offset:()=>{let t=e;return 1===i.rank&&(t=uC(t,c)),Cj(t,i.shape)}}}};const bA=oN({unsortedSegmentSum_:function(e,t,n){const r=iN(e,"x","unsortedSegmentSum"),a=iN(t,"segmentIds","unsortedSegmentSum","int32");Vx(Xx(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},s={numSegments:n};return $k.runKernel(Ow,i,s)}}),wA={kernelName:zy,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,a]=t,{axis:i,batchDims:s}=n,o=Zx(i,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,a=t.size,s=r.slice(0,o),l=s.length,c=r.slice(i,r.length).slice(1),u=c.length,d=kA(0,l),h=kA(l+1,l+1+u),p=NA([s,[a],c]),f=Cj(n,p),m=Cj(t,[a]),g=NA([[l],d,h]),x=hE(f,g);let v=bA(x,m,e.shape[o]);const y=vC(g);return v=hE(v,y),v};if(1===s){const t=r.shape[0],n=r.split(t,0),i=()=>{const t=rE(n.map((t,n)=>l(t,a.slice(n,1),e.slice(n,1))()));return t.reshape(r.shape)};return{x:i,indices:()=>a}}return{x:l(r,a,e),indices:()=>a}}};function kA(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function NA(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const SA={kernelName:Wy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>uS(n),b:()=>uS(r)}}},jA={kernelName:Vy,gradFunc:e=>({x:()=>nS(e,"float32")})},CA={kernelName:Ky,gradFunc:e=>({x:()=>uS(e)})},EA={kernelName:qy,gradFunc:e=>({x:()=>uS(e)})},TA={kernelName:Xy,gradFunc:e=>({x:()=>uS(e)})},IA={kernelName:Yy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:a}=n,i=aC(r,0);return{x:()=>cE(i,e,oS(e,a))}}},AA={kernelName:eb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,aS(n,1))}}},OA={kernelName:Zy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,nS(n,"float32"))}}},_A={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;return{logits:()=>{const t=Jj(r);return NS(e,oS(uC(e,a,!0),t))}}}};const RA=oN({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return $k.runKernel(ib,r,a)}}),PA={kernelName:ab,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:i,bias:s,alpha:o,beta:l}=n;return{x:()=>RA(r,a,e,i,s,o,l)}}};function MA(e,t,n,r){return t.rank<n.rank&&(t=Cj(t,mC(t.shape,r))),e.rank<n.rank&&(e=Cj(e,mC(e.shape,r))),{x:()=>oS(e,nS($j(n,t),e.dtype))}}const DA={kernelName:sb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:a}=r,i=t[0],s=MA(e,t[1],i,Zx(a,i.shape));return{x:()=>s.x()}}},FA={kernelName:ob,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>oS(e,nS(iC(n,r),"float32")),b:()=>oS(e,nS(aT(n,r),"float32"))}}};const LA=oN({maxPool3dGrad_:function(e,t,n,r,a,i,s){const o=iN(e,"dy","maxPool3dGrad"),l=iN(t,"input","maxPool3dGrad"),c=iN(n,"output","maxPool3dGrad");let u=o,d=l,h=c,p=!1;4===l.rank&&(p=!0,u=Cj(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=Cj(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=Cj(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Vx(5===u.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")),Vx(5===d.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")),Vx(5===h.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")),jj("maxPool3dGrad",i,s);const f={dy:u,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:s},g=$k.runKernel(db,f,m);return p?Cj(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),zA={kernelName:ub,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>LA(e,r,a,i,s,o,l)}}};const BA=oN({maxPoolGrad_:function(e,t,n,r,a,i,s){const o=iN(e,"dy","maxPoolGrad"),l=iN(t,"input","maxPoolGrad"),c=iN(n,"output","maxPoolGrad");Vx(l.rank===o.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(o.rank,")")),Vx(4===o.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(o.rank,".")),Vx(4===l.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")),jj("maxPoolGrad",i,s);const u={dy:o,input:l,output:c},d={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return $k.runKernel(cb,u,d)}}),UA={kernelName:lb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:i,strides:s,pad:o}=n;return{x:()=>BA(e,r,a,i,s,o)}}},WA={kernelName:pb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n,i=Zx(a,r.shape),s=Kx(fC(r.shape,i)[1]);return{x:()=>{const t=r.shape.slice();i.forEach(e=>{t[e]=1});const n=Cj(e,t);return sS(oS(n,RC(r.shape,"float32")),s)}}}},VA={kernelName:fb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:a}=r,[i,s]=t,o=MA(e,s,i,Zx(a,i.shape));return{x:()=>o.x()}}},HA={kernelName:mb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>oS(e,nS(eT(n,r),"float32")),b:()=>oS(e,nS(aC(n,r),"float32"))}}},GA={kernelName:gb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>XC(e,i,r.shape)}}},KA={kernelName:xb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{const t=ES(n.shape,a);return t.length>0?Cj(uC(e,t),n.shape):e},b:()=>{const t=oS(e,IC(nC(sS(n,r)))),i=ES(r.shape,a);return i.length>0?Cj(uC(t,i),r.shape):t}}}},qA={kernelName:yb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{const t=oS(e,nS(r,"float32")),i=ES(n.shape,a);return i.length>0?Cj(uC(t,i),n.shape):t},b:()=>{const t=oS(e,nS(n,"float32")),i=ES(r.shape,a);return i.length>0?Cj(uC(t,i),r.shape):t}}}},XA={kernelName:bb,gradFunc:e=>({x:()=>IC(e)})},YA={kernelName:Cb,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>_C(n.shape,"float32")}}},$A={kernelName:jb,gradFunc:e=>({x:()=>uS(e)})},QA={kernelName:Eb,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return lE(e,r).map(e=>()=>e)}},JA={kernelName:Tb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>XC(e,i,r.shape)}}},ZA={kernelName:Ib,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,a]=t,i=n,s=r,o=TS(i.shape,s.shape);return{a:()=>{const t=nS(s,"float32");let n=oS(e,oS(t,kS(i,NS(t,hS(1)))));const r=ES(i.shape,o);return r.length>0&&(n=uC(n,r)),Cj(n,i.shape)},b:()=>{const t=aC(i,0),n=cE(t,oC(i),uS(i));let r=oS(e,oS(a,n));const l=ES(s.shape,o);return l.length>0&&(r=uC(r,l)),Cj(r,s.shape)}}}},eO={kernelName:Ab,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,a=aC(n,0);return{x:()=>cE(a,e,oS(e,r)),alpha:()=>{let t=cE(a,uS(e),oS(e,n));const i=ES(r.shape,e.shape);return i.length>0&&(t=uC(t,i)),Cj(t,r.shape)}}}};const tO=oN({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={x:iN(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return $k.runKernel(dy,a,i)}});function nO(e,t,n){const r=e.shape.length,a=r-n.length,i=xC(n,r);let s=e;null!=i&&(s=hE(e,i));const o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);o.push(l);let c=function(e,t,n){const r=e.shape.slice();r[n]=1;const a=Cj(t,r),i=tO(e,n,!0,!1),s=tO(e,n,!0,!0),o=oS(i,s);return oS(a,o)}(s.reshape(o),t,a);if(c=c.reshape(s.shape),null!=i){const e=vC(i);c=hE(c,e)}return c}const rO={kernelName:Ob,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;let i=[];return i=void 0===a||null===a?r.shape.map((e,t)=>t):"number"===typeof a?[a]:a,{x:()=>nO(r,e,i)}}},aO={kernelName:Sy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{const t=sS(e,nS(r,"float32")),i=ES(n.shape,a);return i.length>0?Cj(uC(t,i),n.shape):t},b:()=>{let t=oS(e,nS(n,"float32"));const i=ES(r.shape,a);i.length>0&&(t=Cj(uC(t,i),r.shape));const s=cS(r);return IC(sS(t,nS(s,"float32")))}}}},iO={kernelName:Fb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,IC(cS(n)))}}},sO={kernelName:Hb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=oS(eT(n,6),bE(n));return{x:()=>oS(e,nS(r,"float32"))}}},oO={kernelName:Lb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,nS(bE(n),"float32"))}}},lO={kernelName:zb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cj(e,n.shape)}}},cO={kernelName:Wb,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>$k.runKernel(Vb,a,n)}}},uO={kernelName:Bb,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>$k.runKernel(Ub,a,n)}}},dO={kernelName:Gb,gradFunc:(e,t,n)=>{const{dims:r}=n,a=Zx(r,e.shape);return{x:()=>HC(e,a)}}},hO={kernelName:Kb,gradFunc:e=>({x:()=>uS(e)})},pO={kernelName:qb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>IC(sS(e,oS(kS(n,1.5),2)))}}};const fO=oN({logicalNot_:function(e){const t={x:iN(e,"x","logicalNot","bool")};return $k.runKernel(nb,t)}}),mO={kernelName:Qb,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>nS(uS(n),"float32"),t:()=>oS(e,nS(n,e.dtype)),e:()=>oS(e,nS(fO(n),e.dtype))}}},gO={kernelName:Jb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=aC(n,hS(0)),r=hS(FT),a=hS(LT),i=oS(e,a),s=oS(oS(e,r),Jj(nS(n,"float32")));return cE(t,i,s)}}}},xO={kernelName:rw,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,oS(n,NS(hS(1),n)))}}},vO={kernelName:nw,gradFunc:e=>({x:()=>uS(e)})};const yO=oN({cos_:function(e){const t={x:iN(e,"x","cos","float32")};return $k.runKernel(cy,t)}}),bO={kernelName:ew,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(yO(nS(n,"float32")),e)}}};const wO=oN({cosh_:function(e){const t={x:iN(e,"x","cosh","float32")};return $k.runKernel(uy,t)}}),kO={kernelName:tw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(wO(nS(n,"float32")),e)}}},NO={kernelName:Zb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:a,size:i}=n,s=r.shape,[o,l]=ij(r,a,i),c=[];for(let u=0;u<e.rank;u++)c.push([o[u],s[u]-o[u]-l[u]]);return{x:()=>MC(e,c)}}},SO={kernelName:cw,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:a}=n,i=oS(e,r);return{logits:()=>NS(i,oS(uC(i,[a],true),r))}}},jO={kernelName:aw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,qC(n))}}};const CO=oN({batchToSpaceND_:function(e,t,n){const r=iN(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);Vx(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),Vx(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),Vx(r.shape[0]%a===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a));const i={x:r},s={blockShape:t,crops:n};return $k.runKernel(qv,i,s)}}),EO={kernelName:ow,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>CO(e,r,a)}}},TO={kernelName:lw,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>Mj(e,r)}}},IO={kernelName:mw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=hS(2);return{a:()=>oS(e,oS(a,NS(n,r))),b:()=>oS(e,oS(a,NS(r,n)))}}},AO={kernelName:kw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=TS(n.shape,r.shape);return{a:()=>{let t=e;const r=ES(n.shape,a);return r.length>0&&(t=uC(t,r)),Cj(t,n.shape)},b:()=>{let t=e;const n=ES(r.shape,a);return n.length>0&&(t=uC(t,n)),Cj(IC(t),r.shape)}}}},OO={kernelName:jw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:a}=n;return{x:()=>{let t=uS(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=aS(t,XC(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)t=aS(t,XC(e,[n*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let s=0;s<a[2];++s)t=aS(t,XC(e,[n*r.shape[0],i*r.shape[1],s*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let s=0;s<a[2];++s)for(let o=0;o<a[3];++o)t=aS(t,XC(e,[n*r.shape[0],i*r.shape[1],s*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},_O={kernelName:Ow,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=IS(t,uS(t)),r=rC(e,n);let a=iC(t,hS(0,"int32"));const i=r.rank-a.rank;for(let o=0;o<i;++o)a=Zj(a,o+1);a=wC(a,RC(r.shape,"bool"));const s=uS(r);return cE(a,r,s)}(e,n)}}};const RO=[TI,II,AI,OI,_I,RI,PI,MI,DI,FI,LI,zI,UI,VI,HI,KI,qI,XI,YI,$I,QI,JI,eA,ZI,nA,aA,sA,lA,cA,uA,aO,dA,hA,pA,fA,mA,xA,gA,yA,wA,SA,jA,CA,EA,TA,IA,AA,OA,_A,PA,DA,DA,FA,zA,UA,WA,VA,HA,GA,KA,qA,XA,YA,$A,QA,JA,JA,ZA,eO,rO,iO,sO,oO,lO,cO,uO,dO,hO,pO,mO,gO,xO,vO,bO,kO,NO,SO,jO,EO,EO,TO,TO,{kernelName:iw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,oS(lS(nS(n,"float32")),2))}}},IO,{kernelName:gw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(e,oS(nS(n,"float32"),2))}}},{kernelName:Rw,gradFunc:e=>({x:()=>uS(e)})},AO,{kernelName:sw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice(),{axis:i}=n;Zx(i,r.shape).forEach(e=>{a[e]=1});const s=Cj(e,a),o=oS(s,RC(r.shape,"float32"));return{x:()=>o}}},{kernelName:Nw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>sS(e,cS(yO(n)))}}},{kernelName:Sw,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>oS(NS(hS(1),cS(n)),e)}}},OO,{kernelName:Tw,gradFunc:(e,t,n)=>{const r=n,{perm:a}=r,i=vC(a);return{x:()=>hE(e,i)}}},{kernelName:Aw,gradFunc:(e,t,n)=>{const r=n,{axis:a}=r;return{value:()=>rE(e,a)}}},_O,{kernelName:_w,gradFunc:e=>({x:()=>uS(e)})}];for(const n of RO)qw(n);Ak().prototype.abs=function(){return this.throwIfDisposed(),jS(this)};const PO=oN({acos_:function(e){const t={x:iN(e,"x","acos")};return $k.runKernel(Iv,t)}});Ak().prototype.acos=function(){return this.throwIfDisposed(),PO(this)};const MO=oN({acosh_:function(e){const t={x:iN(e,"x","acosh")};return $k.runKernel(Av,t)}});Ak().prototype.acosh=function(){return this.throwIfDisposed(),MO(this)},Ak().prototype.add=function(e){return this.throwIfDisposed(),aS(this,e)},Ak().prototype.all=function(e,t){return this.throwIfDisposed(),lj(this,e,t)},Ak().prototype.any=function(e,t){return this.throwIfDisposed(),cj(this,e,t)},Ak().prototype.argMax=function(e){return this.throwIfDisposed(),uj(this,e)};const DO=oN({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:iN(e,"x","argMin")},r={axis:t};return $k.runKernel(Dv,n,r)}});Ak().prototype.argMin=function(e){return this.throwIfDisposed(),DO(this,e)},Ak().prototype.asScalar=function(){return this.throwIfDisposed(),Vx(1===this.size,()=>"The array must have only 1 element."),Cj(this,[])},Ak().prototype.asType=function(e){return this.throwIfDisposed(),nS(this,e)},Ak().prototype.as1D=function(){return this.throwIfDisposed(),Cj(this,[this.size])},Ak().prototype.as2D=function(e,t){return this.throwIfDisposed(),Cj(this,[e,t])},Ak().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Cj(this,[e,t,n])},Ak().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Cj(this,[e,t,n,r])},Ak().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Cj(this,[e,t,n,r,a])};const FO=oN({asin_:function(e){const t={x:iN(e,"x","asin")};return $k.runKernel(Fv,t)}});Ak().prototype.asin=function(){return this.throwIfDisposed(),FO(this)};const LO=oN({asinh_:function(e){const t={x:iN(e,"x","asinh")};return $k.runKernel(Lv,t)}});Ak().prototype.asinh=function(){return this.throwIfDisposed(),LO(this)};const zO=oN({atan_:function(e){const t={x:iN(e,"x","atan")};return $k.runKernel(zv,t)}});Ak().prototype.atan=function(){return this.throwIfDisposed(),zO(this)};const BO=oN({atan2_:function(e,t){let n=iN(e,"a","atan2"),r=iN(t,"b","atan2");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(Uv,a)}});Ak().prototype.atan2=function(e){return this.throwIfDisposed(),BO(this,e)};const UO=oN({atanh_:function(e){const t={x:iN(e,"x","atanh")};return $k.runKernel(Bv,t)}});Ak().prototype.atanh=function(){return this.throwIfDisposed(),UO(this)},Ak().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ej(this,e,t,n,r)},Ak().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),CO(this,e,t)},Ak().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Ij(this,e,t,n,r,a)},Ak().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Rj(this,e)},Ak().prototype.cast=function(e){return this.throwIfDisposed(),nS(this,e)};const WO=oN({ceil_:function(e){const t={x:iN(e,"x","ceil","float32")};return $k.runKernel(Jv,t)}});Ak().prototype.ceil=function(){return this.throwIfDisposed(),WO(this)},Ak().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Pj(this,e,t)},Ak().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Ik&&(e=[e]),Mj([this,...e],t)},Ak().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Uj(this,e,t,n,r,a,i)},Ak().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Vj(this,e,t,n,r,a)},Ak().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Bj(this,e,t,n,r,a,i)},Ak().prototype.cos=function(){return this.throwIfDisposed(),yO(this)},Ak().prototype.cosh=function(){return this.throwIfDisposed(),wO(this)},Ak().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),tO(this,e,t,n)},Ak().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),oA(this,e,t,n)};const VO=oN({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=iN(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],s="NHWC"===n?r.shape[3]:r.shape[1];Vx(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),Vx(a*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),Vx(i*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),Vx(s%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(s," for depthToSpace with input shape ").concat(r.shape));const o={x:r},l={blockSize:t,dataFormat:n};return $k.runKernel(my,o,l)}});Ak().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),VO(this,e,t)},Ak().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Xj(this,e,t,n,r,a,i)};const HO=oN({dilation2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const s=iN(e,"x","dilation2d"),o=iN(t,"filter","dilation2d");Vx(3===s.rank||4===s.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(s.rank,".")),Vx(3===o.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(o.rank,".")),Vx("NHWC"===i,()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i));let l=s,c=!1;3===s.rank&&(l=Cj(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),Vx(l.shape[3]===o.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(o.shape[2]));const u={x:l,filter:o},d={strides:n,pad:r,dilations:a},h=$k.runKernel(by,u,d);return c?Cj(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});Ak().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),HO(this,e,t,n,r,a)};const GO=oN({divNoNan_:function(e,t){let n=iN(e,"a","div"),r=iN(t,"b","div");[n,r]=Wk(n,r);const a=sS(n,r),i=uS(a),s=$j(r,i);return cE(s,i,a)}});Ak().prototype.divNoNan=function(e){return this.throwIfDisposed(),GO(this,e)},Ak().prototype.div=function(e){return this.throwIfDisposed(),sS(this,e)};const KO=oN({dot_:function(e,t){const n=iN(e,"t1","dot"),r=iN(t,"t2","dot");Vx((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,"."));const a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Vx(a===i,()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")),1===n.rank&&1===r.rank){const e=Cj(n,[1,-1]),t=Cj(r,[-1,1]),a=kC(e,t);return Cj(a,[])}if(1===n.rank&&2===r.rank){const e=Cj(n,[1,-1]),t=Cj(r,[r.shape[0],r.shape[1]]),a=kC(e,t);return Cj(a,[a.size])}if(2===n.rank&&1===r.rank){const e=Cj(r,[-1,1]),t=kC(n,e);return Cj(t,[t.size])}{const e=Cj(r,[r.shape[0],r.shape[1]]);return kC(n,e)}}});Ak().prototype.dot=function(e){return this.throwIfDisposed(),KO(this,e)},Ak().prototype.elu=function(){return this.throwIfDisposed(),Yj(this)},Ak().prototype.equal=function(e){return this.throwIfDisposed(),$j(this,e)},Ak().prototype.erf=function(){return this.throwIfDisposed(),Qj(this)};const qO=oN({euclideanNorm_:function(e){return oT(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});Ak().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),qO(this,e,t)},Ak().prototype.exp=function(){return this.throwIfDisposed(),Jj(this)},Ak().prototype.expandDims=function(e){return this.throwIfDisposed(),Zj(this,e)};const XO=oN({expm1_:function(e){const t={x:iN(e,"x","expm1")};return $k.runKernel(_y,t)}});Ak().prototype.expm1=function(){return this.throwIfDisposed(),XO(this)},Ak().prototype.fft=function(){return this.throwIfDisposed(),fE(this)},Ak().prototype.flatten=function(){return this.throwIfDisposed(),Cj(this,[this.size])},Ak().prototype.floor=function(){return this.throwIfDisposed(),nC(this)},Ak().prototype.floorDiv=function(e){return this.throwIfDisposed(),iS(this,e)},Ak().prototype.gather=function(e,t,n){return this.throwIfDisposed(),rC(this,e,t,n)},Ak().prototype.greaterEqual=function(e){return this.throwIfDisposed(),iC(this,e)},Ak().prototype.greater=function(e){return this.throwIfDisposed(),aC(this,e)},Ak().prototype.ifft=function(){return this.throwIfDisposed(),gE(this)},Ak().prototype.irfft=function(){return this.throwIfDisposed(),xE(this)};const YO=oN({isFinite_:function(e){const t={x:iN(e,"x","isFinite")};return $k.runKernel(Ky,t)}});Ak().prototype.isFinite=function(){return this.throwIfDisposed(),YO(this)};const $O=oN({isInf_:function(e){const t={x:iN(e,"x","isInf")};return $k.runKernel(qy,t)}});Ak().prototype.isInf=function(){return this.throwIfDisposed(),$O(this)};const QO=oN({isNaN_:function(e){const t={x:iN(e,"x","isNaN")};return $k.runKernel(Xy,t)}});Ak().prototype.isNaN=function(){return this.throwIfDisposed(),QO(this)},Ak().prototype.leakyRelu=function(e){return this.throwIfDisposed(),sC(this,e)},Ak().prototype.lessEqual=function(e){return this.throwIfDisposed(),eT(this,e)},Ak().prototype.less=function(e){return this.throwIfDisposed(),aT(this,e)};const JO=oN({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const i=iN(e,"x","localResponseNormalization");Vx(4===i.rank||3===i.rank,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")),Vx(Xx(t),()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,"."));let s=i,o=!1;3===i.rank&&(o=!0,s=Cj(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:s},c={depthRadius:t,bias:n,alpha:r,beta:a},u=$k.runKernel(ab,l,c);return o?Cj(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});Ak().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),JO(this,e,t,n,r)};const ZO=oN({logSigmoid_:function(e){const t=iN(e,"x","logSigmoid");return dS(e=>({value:IC(eE(IC(e))),gradFunc:t=>oS(t,qC(IC(e)))}))(t)}});Ak().prototype.logSigmoid=function(){return this.throwIfDisposed(),ZO(this)},Ak().prototype.logSoftmax=function(e){return this.throwIfDisposed(),dC(this,e)},Ak().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),bC(this,e,t)},Ak().prototype.log=function(){return this.throwIfDisposed(),oC(this)},Ak().prototype.log1p=function(){return this.throwIfDisposed(),lC(this)},Ak().prototype.logicalAnd=function(e){return this.throwIfDisposed(),wC(this,e)},Ak().prototype.logicalNot=function(){return this.throwIfDisposed(),fO(this)};const e_=oN({logicalOr_:function(e,t){const n=iN(e,"a","logicalOr","bool"),r=iN(t,"b","logicalOr","bool");TS(n.shape,r.shape);const a={a:n,b:r};return $k.runKernel(rb,a)}});Ak().prototype.logicalOr=function(e){return this.throwIfDisposed(),e_(this,e)};const t_=oN({logicalXor_:function(e,t){const n=iN(e,"a","logicalXor","bool"),r=iN(t,"b","logicalXor","bool");return TS(n.shape,r.shape),wC(e_(e,t),fO(wC(e,t)))}});Ak().prototype.logicalXor=function(e){return this.throwIfDisposed(),t_(this,e)},Ak().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),kC(this,e,t,n)},Ak().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),NC(this,e,t,n,r)},Ak().prototype.max=function(e,t){return this.throwIfDisposed(),cC(this,e,t)},Ak().prototype.maximum=function(e){return this.throwIfDisposed(),IS(this,e)},Ak().prototype.mean=function(e,t){return this.throwIfDisposed(),jC(this,e,t)},Ak().prototype.min=function(e,t){return this.throwIfDisposed(),CC(this,e,t)},Ak().prototype.minimum=function(e){return this.throwIfDisposed(),EC(this,e)};const n_=oN({mirrorPad_:function(e,t,n){Vx("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,"."));const r=iN(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Vx(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,"."));const a="reflect"===n?1:0;for(let o=0;o<r.rank;o++)Vx(2===t[o].length,()=>"Invalid number of paddings. Must be length of 2 each."),Vx(t[o][0]>=0&&t[o][0]<=r.shape[o]-a&&t[o][1]>=0&&t[o][1]<=r.shape[o]-a,()=>"Padding in dimension ".concat(o," cannot be greater than or equal ")+"to ".concat(r.shape[o]-a," or less than 0 for input of ")+"shape ".concat(r.shape));const i={paddings:t,mode:n},s={x:r};return $k.runKernel(gb,s,i)}});Ak().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),n_(this,e,t)};const r_=oN({mod_:function(e,t){let n=iN(e,"a","mod"),r=iN(t,"b","mod");[n,r]=Wk(n,r);const a={a:n,b:r};return $k.runKernel(xb,a)}});Ak().prototype.mod=function(e){return this.throwIfDisposed(),r_(this,e)},Ak().prototype.mul=function(e){return this.throwIfDisposed(),oS(this,e)},Ak().prototype.neg=function(){return this.throwIfDisposed(),IC(this)},Ak().prototype.norm=function(e,t,n){return this.throwIfDisposed(),oT(this,e,t,n)},Ak().prototype.notEqual=function(e){return this.throwIfDisposed(),AC(this,e)},Ak().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),OC(this,e,t,n)},Ak().prototype.onesLike=function(){return this.throwIfDisposed(),PC(this)},Ak().prototype.pad=function(e,t){return this.throwIfDisposed(),MC(this,e,t)};const a_=oN({pool_:function(e,t,n,r,a,i,s){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");const o=iN(e,"x","maxPool");let l=o,c=!1;3===o.rank&&(c=!0,l=Cj(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vx(kj(i,a),()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'"));const u=hj(l.shape,t,i,a,r),d=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)),r=n.map(e=>e-1),a=r.map(e=>Math.floor(e/2)),i=r.map((e,t)=>e-a[t]);return r.map((e,t)=>[a[t],i[t]])}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,m]=function(e,t,n){const r=n.map(e=>e[0]),a=n.map(e=>e[1]),i=e.concat(r,a),s=t.map((e,t)=>(e-i[t]%e)%e),o=a.map((e,t)=>e+s[t]),l=t.map((e,t)=>[r[t],o[t]]),c=t.map((e,t)=>[0,s[t]]);return[l,c]}([u.inHeight,u.inWidth],d,h),g=p?r:"valid",x=p?l:GI(l,d,f),v=("avg"===n?()=>Ej(x,t,i,g,s):()=>NC(x,t,i,g,s))(),y=p?v:CO(v,d,m);return c?Cj(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});Ak().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),a_(this,e,t,n,r,a,i)},Ak().prototype.pow=function(e){return this.throwIfDisposed(),kS(this,e)},Ak().prototype.prelu=function(e){return this.throwIfDisposed(),DC(this,e)};const i_=oN({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=iN(e,"x","prod");"bool"===r.dtype&&(r=nS(r,"int32"));const a={x:r},i={axis:t,keepDims:n};return $k.runKernel(Ob,a,i)}});Ak().prototype.prod=function(e,t){return this.throwIfDisposed(),i_(this,e,t)};const s_=oN({reciprocal_:function(e){const t={x:iN(e,"x","reciprocal")};return $k.runKernel(Fb,t)}});Ak().prototype.reciprocal=function(){return this.throwIfDisposed(),s_(this)},Ak().prototype.relu=function(){return this.throwIfDisposed(),VC(this)},Ak().prototype.relu6=function(){return this.throwIfDisposed(),yE(this)},Ak().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Cj(this,e.shape)},Ak().prototype.reshape=function(e){return this.throwIfDisposed(),Cj(this,e)},Ak().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),QE(this,e,t,n)},Ak().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),JE(this,e,t,n)},Ak().prototype.reverse=function(e){return this.throwIfDisposed(),HC(this,e)},Ak().prototype.rfft=function(){return this.throwIfDisposed(),mE(this)},Ak().prototype.round=function(){return this.throwIfDisposed(),tT(this)},Ak().prototype.rsqrt=function(){return this.throwIfDisposed(),vA(this)},Ak().prototype.selu=function(){return this.throwIfDisposed(),GC(this)},Ak().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),KC(this,e,t,n,r,a,i)},Ak().prototype.sigmoid=function(){return this.throwIfDisposed(),qC(this)};const o_=oN({sign_:function(e){const t={x:iN(e,"x","sign")};return $k.runKernel(nw,t)}});Ak().prototype.sign=function(){return this.throwIfDisposed(),o_(this)},Ak().prototype.sin=function(){return this.throwIfDisposed(),rA(this)},Ak().prototype.sinh=function(){return this.throwIfDisposed(),iA(this)},Ak().prototype.slice=function(e,t){return this.throwIfDisposed(),XC(this,e,t)},Ak().prototype.softmax=function(e){return this.throwIfDisposed(),ZC(this,e)},Ak().prototype.softplus=function(){return this.throwIfDisposed(),eE(this)},Ak().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),GI(this,e,t)},Ak().prototype.split=function(e,t){return this.throwIfDisposed(),tE(this,e,t)},Ak().prototype.sqrt=function(){return this.throwIfDisposed(),lS(this)},Ak().prototype.square=function(){return this.throwIfDisposed(),cS(this)},Ak().prototype.squaredDifference=function(e){return this.throwIfDisposed(),hT(this,e)},Ak().prototype.squeeze=function(e){return this.throwIfDisposed(),nE(this,e)},Ak().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Ik?[this,e]:[this,...e];return rE(n,t)},Ak().prototype.step=function(e){return this.throwIfDisposed(),bE(this,e)};const l_=oN({stridedSlice_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:iN(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return $k.runKernel(vw,c,u)}});Ak().prototype.stridedSlice=function(e,t,n,r,a,i,s,o){return this.throwIfDisposed(),l_(this,e,t,n,r,a,i,s,o)},Ak().prototype.sub=function(e){return this.throwIfDisposed(),NS(this,e)},Ak().prototype.sum=function(e,t){return this.throwIfDisposed(),uC(this,e,t)};const c_=oN({tan_:function(e){const t={x:iN(e,"x","tan","float32")};return $k.runKernel(Nw,t)}});Ak().prototype.tan=function(){return this.throwIfDisposed(),c_(this)},Ak().prototype.tanh=function(){return this.throwIfDisposed(),aE(this)},Ak().prototype.tile=function(e){return this.throwIfDisposed(),eC(this,e)},Ak().prototype.toBool=function(){return this.throwIfDisposed(),nS(this,"bool")},Ak().prototype.toFloat=function(){return this.throwIfDisposed(),nS(this,"float32")},Ak().prototype.toInt=function(){return this.throwIfDisposed(),nS(this,"int32")};const u_=oN({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=iN(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));const i={x:r},s={k:t,sorted:n},[o,l]=$k.runKernel(Cw,i,s);return{values:o,indices:l}}});Ak().prototype.topk=function(e,t){return this.throwIfDisposed(),u_(this,e,t)},Ak().prototype.transpose=function(e){return this.throwIfDisposed(),hE(this,e)};const d_=oN({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=iN(e,"x","unique","string_or_numeric");Vx(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:t},[i,s]=$k.runKernel(Iw,r,a);return{values:i,indices:s}}});Ak().prototype.unique=function(e){return this.throwIfDisposed(),d_(this,e)},Ak().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),bA(this,e,t)},Ak().prototype.unstack=function(e){return this.throwIfDisposed(),lE(this,e)},Ak().prototype.where=function(e,t){return this.throwIfDisposed(),cE(e,this,t)},Ak().prototype.zerosLike=function(){return this.throwIfDisposed(),uS(this)};class h_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,h_.prototype)}}class p_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,p_.prototype)}}class f_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f_.prototype)}}class m_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,m_.prototype)}}class g_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,g_.prototype)}}Error;class x_{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function v_(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function y_(e,t){if(!e)throw new g_(t)}function b_(e,t){let n=0;for(const r of e)r===t&&n++;return n}function w_(e){return 1===e.length?e[0]:e}function k_(e){return Array.isArray(e)?e:[e]}function N_(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function S_(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let j_={};function C_(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function E_(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach(e=>E_(e));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?E_(t):e[n]=t.value)}}}function T_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const a=e;let i;if(a in n)i=n[a];else if(a in j_)i=j_[a];else if(i=t[a],null==i)throw new f_("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}{const i=e;if(null==i.className||null==i.config)throw new f_("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(i),".\n")+"'className' and 'config' must set.");const s=i.className;let o,l;if(s in n?[o,l]=n[s]:s in j_?[o,l]=j_.className:s in t&&([o,l]=t[s]),null==o)throw new f_("Unknown ".concat(r,": ").concat(s,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(j_))e[n]=j_[n];for(const a of Object.keys(n))e[a]=n[a];i.config.customObjects=e;const t=Object.assign({},j_);for(const a of Object.keys(n))j_[a]=n[a];E_(i.config);const r=l(o,i.config,n,a);return j_=Object.assign({},t),r}{const e=Object.assign({},j_);for(const r of Object.keys(n))j_[r]=n[r];const t=new o(i.config);return j_=Object.assign({},e),t}}}function I_(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function A_(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function O_(e){if(null==e)throw new f_("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function __(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new f_("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function R_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return y_(n>=0),y_(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function P_(e,t){Array.isArray(e)?(Vx(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((e,n)=>P_(e,"element ".concat(n+1," of ").concat(t)))):Vx(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(M_(e),"."))}function M_(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>M_(e)).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function D_(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let F_=0;function L_(){return F_++}const z_={};function B_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in z_||(z_[e]=0),z_[e]+=1,e+z_[e].toString()}const U_=["channelsFirst","channelsLast"],W_=["nearest","bilinear"],V_=["valid","same","causal"],H_=["max","avg"],G_=["sum","mul","concat","ave"],K_=new Map;function q_(e){__(U_,"DataFormat",e)}function X_(e){__(V_,"PaddingMode",e)}function Y_(e){__(H_,"PoolMode",e)}const $_=[];function Q_(e,t){$_.push(e);try{const e=t();return $_.pop(),e}catch(Yje){throw $_.pop(),Yje}}function J_(e){if(!tR(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===$_.length?"":$_.join("/")+"/")+e}function Z_(e){if(!tR(e))throw new Error("Not a valid tensor name: '"+e+"'");K_.has(e)||K_.set(e,0);const t=K_.get(e);if(K_.set(e,K_.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return K_.set(n,1),n}return e}const eR=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function tR(e){return!!e.match(eR)}function nR(e){return e===parseInt(e.toString(),10)}function rR(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function aR(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function iR(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function sR(e,t){if(t<e)throw new f_("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let oR;function lR(){return null==oR&&(oR=vN().epsilon()),oR}function cR(e,t){return nS(e,t)}function uR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Cj(e,n)}function dR(e,t,n){return fN(()=>{switch(e.rank){case 1:return YC(e,t,n);case 2:return $C(e,[t,0],[n,e.shape[1]]);case 3:return QC(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return JC(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return XC(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return XC(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new f_("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function hR(e,t,n){return fN(()=>{switch(e.rank){case 1:return YC(e,t,n);case 2:return $C(e,[0,t],[e.shape[0],n]);case 3:return QC(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return JC(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new f_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function pR(e,t,n,r){return fN(()=>{switch(e.rank){case 1:return YC(e,t,n);case 2:switch(r){case 1:return dR(e,t,n);case 2:return hR(e,t,n);default:throw new f_("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return dR(e,t,n);case 2:return QC(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return hR(e,t,n);default:throw new f_("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return dR(e,t,n);case 2:return JC(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return JC(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return hR(e,t,n);default:throw new f_("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new f_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function fR(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),Mj(e,n)}function mR(e,t){switch(e.rank){case 1:return Dj([e,t]);case 2:return Fj([e,t],0);case 3:return Lj([e,t],0);case 4:return zj([e,t],0);default:throw new f_("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function gR(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new f_("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return eC(e,t)}function xR(e){return BC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function vR(e,t,n,r){if(e.rank<2||t.rank<2)throw new m_("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new m_("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return TE({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wR(e.rank,r,"channelsLast"):null,activation:n})}{const a=e.shape.slice(),i=a.pop();e=Cj(e,[-1,i]);const s=t.shape.slice(),o=s.pop(),l=s.pop(),c=[...s,o],u=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=Cj(hE(t,u),[l,-1]);const d=[...a,...c];return Cj(TE({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wR(e.rank,r,"channelsLast"):null,activation:n}),d)}}function yR(e,t,n){return fN(()=>(t=Array.isArray(t)?iE(t,"int32"):nS(t,"int32"),rC(e,t,n)))}function bR(e){return oS(e,e)}function wR(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new f_("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Cj(t,[1,r[0],1,1,1]):Cj(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Cj(t,[1,1,1,1,r[0]]):Cj(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Cj(t,[1,r[0],1,1]):Cj(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Cj(t,[1,1,1,r[0]]):Cj(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Cj(t,[1,r[0],1]):Cj(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Cj(t,[1,1,r[0]]):Cj(t,[1].concat(r))}else if(e<3)return t;throw new f_("Unsupported input rank by biasAdd: ".concat(t.rank))}function kR(e,t,n){return fN(()=>(null==n&&(n="channelsLast"),q_(n),aS(e,wR(e.rank,t,n))))}function NR(e,t,n,r){return fN(()=>pE(e,t,n,r))}function SR(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const jR=["fanIn","fanOut","fanAvg"],CR=["normal","uniform","truncatedNormal"];class ER extends mS{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class TR extends ER{apply(e,t){return _C(e,t)}}TR.className="Zeros",xS(TR);class IR extends ER{apply(e,t){return RC(e,t)}}IR.className="Ones",xS(IR);class AR extends ER{constructor(e){if(super(),"object"!==typeof e)throw new f_("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new f_("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return fN(()=>oS(hS(this.value),RC(e,t)))}getConfig(){return{value:this.value}}}AR.className="Constant",xS(AR);class OR extends ER{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return UC(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}OR.className="RandomUniform",xS(OR);class _R extends ER{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new m_("randomNormal does not support dType ".concat(t,"."));return xR(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}_R.className="RandomNormal",xS(_R);class RR extends ER{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new m_("truncatedNormal does not support dType ".concat(t,"."));return oE(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}RR.className="TruncatedNormal",xS(RR);class PR extends ER{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return fN(()=>{if(2!==e.length||e[0]!==e[1])throw new f_("Identity matrix initializer can only be used for 2D square matrices.");return oS(this.gain,tC(e[0]))})}getConfig(){return{gain:this.gain}}}PR.className="Identity",xS(PR);class MR extends ER{constructor(e){if(super(),e.scale<0)throw new f_("scale must be a positive float. Got: ".concat(e.scale));this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){__(jR,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){__(CR,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(q_(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=rR(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=rR(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=rR(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],a=n[1];let i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){const n=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new m_("".concat(this.getClassName()," does not support dType ").concat(t,"."));return oE(e,0,n,t,this.seed)}{const n=Math.sqrt(3*i);return UC(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}MR.className="VarianceScaling",xS(MR);class DR extends MR{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return MR.className}}DR.className="GlorotUniform",xS(DR);class FR extends MR{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return MR.className}}FR.className="GlorotNormal",xS(FR);class LR extends MR{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return MR.className}}LR.className="HeNormal",xS(LR);class zR extends MR{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return MR.className}}zR.className="HeUniform",xS(zR);class BR extends MR{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return MR.className}}BR.className="LeCunNormal",xS(BR);class UR extends MR{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return MR.className}}UR.className="LeCunUniform",xS(UR);class WR extends ER{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return fN(()=>{if(e.length<2)throw new m_("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=Kx(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(a,") elements: ")+"Slowness may result.");const i=xR([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),s=fT.qr(i,!1);let o=s[0];const l=s[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return o=oS(o,l.sign()),n<r&&(o=o.transpose()),oS(hS(this.gain),o.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}WR.className="Orthogonal",xS(WR);const VR={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function HR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T_(e,gS.getMap().classNameMap,t,"initializer")}function GR(e){return C_(e)}function KR(e){if("string"===typeof e){const t=e in VR?VR[e]:e;if("GlorotNormal"===t)return new FR;if("GlorotUniform"===t)return new DR;if("HeNormal"===t)return new LR;if("HeUniform"===t)return new zR;if("LeCunNormal"===t)return new BR;if("LeCunUniform"===t)return new UR;{const e={};return e.className=t,e.config={},HR(e)}}return e instanceof ER?e:HR(e)}function qR(e){return Array.isArray(e)&&Array.isArray(e[0])}function XR(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function YR(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new f_("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function $R(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new f_("Expected exactly 1 Shape; got ".concat(e.length))}return e}function QR(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}const JR="Variable";class ZR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:JR,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=L_(),n=null==n?JR:n,this.originalName=J_(n),this.name=Z_(this.originalName),this.trainable_=r,this.constraint=a,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return $k.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function eP(e){return e.map(e=>e.read())}function tP(e){e.forEach(e=>{e[0].write(e[1])})}class nP{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class rP{constructor(e,t,n,r,a,i,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=s,this.id=L_(),null!=i&&(this.originalName=J_(i),this.name=Z_(this.originalName)),this.rank=t.length}}let aP=0;class iP{constructor(e,t){this.callArgs=t,this.id=aP++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let sP=0;class oP extends mS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=sP++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=N_(e)+"_"+B_(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new p_("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new f_("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return w_(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return w_(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new h_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new h_("Layer ".concat(this.name)+" is not connected, no input to return.");return w_(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new h_("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new h_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return w_(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=k_(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=k_(this.inputSpec);if(t.length!==n.length)throw new f_("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],a=n[r];if(null==a)continue;const i=e.rank;if(null!=a.ndim&&i!==a.ndim)throw new f_("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new f_("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new f_("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&e.dtype!==a.dtype)throw new f_("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(e.dtype,"."));if(a.axes){const t=e.shape;for(const e in a.axes){const n=Number(e),i=a.axes[e],s=n>=0?t[n]:t[t.length+n];if(null!=i&&-1===[i,null].indexOf(s))throw new f_("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(i," but got shape ").concat(t,"."))}}if(null!=a.shape)for(let t=0;t<a.shape.length;++t){const n=a.shape[t],i=e.shape[t];if(null!=n&&null!=i&&n!==i)throw new f_("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=k_(e),r=function(e){let t=!0;for(const n of k_(e))if(!(n instanceof rP)){t=!1;break}return t}(e),a=function(e){let t=!0;for(const n of k_(e))if(n instanceof rP){t=!1;break}return t}(e);if(r===a)throw new f_("Arguments to apply() must be all SymbolicTensors or all Tensors");return Q_(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of k_(e))t.push(n.shape);this.build(w_(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const a=k_(r),i=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),i.push(e);if(r=w_(i),null!=this.activityRegularizer)throw new m_("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=k_(e);const t=[];for(const n of e)t.push(n.shape);return w_(t)}(e),r=this.computeOutputShape(n);let a;const i="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),a=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new rP(i,n,this,k_(e),t,this.name,r)):new rP(i,r,this,k_(e),t,this.name),this.addInboundNode(e,a,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new m_("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new h_("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new h_("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new p_("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return QR(this.weights)}build(e){this.built=!0}getWeights(){return eP(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){fN(()=>{const t=this.weights;if(t.length!==e.length)throw new f_('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=eP(t);for(let a=0;a<r.length;++a){const i=r[a],s=t[a],o=e[a];if(!qx(i.shape,o.shape))throw new f_("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(o.shape));n.push([s,o])}tP(n)})}addWeight(e,t,n,r,a,i,s,o){if(-1!==this._addedWeightNames.indexOf(e))throw new f_("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=o?o():KR("zeros"));const l=r.apply(t,n),c=new ZR(l,n,e,i,s);return l.dispose(),null!=a&&this.addLoss(()=>a.apply(c.read())),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=k_(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach(e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")})}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),a=k_(t),i=k_(r);if(a.length!==i.length)throw new Error("".concat(this.name," outputs ").concat(a.length," tensors ")+"but ".concat(a.length," masks for those tensors"));for(let s=0;s<a.length;s++)a[s].kerasMask=i[s]}addInboundNode(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const o=k_(e);t=k_(t),n=k_(n),r=k_(r),a=XR(a),i=XR(i);const l=[],c=[],u=[];for(const d of o)l.push(d.sourceLayer),c.push(d.nodeIndex),u.push(d.tensorIndex);new iP({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},s);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function lP(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=lP(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class cP extends oP{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:B_("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new f_("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new f_("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new f_("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new rP(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new iP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new f_("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}cP.className="InputLayer",xS(cP);class uP{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof uP)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new f_("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return nS(t,e.dtype)}catch(Qje){throw new f_("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof rP){if(null==this.id2Value[e.id])throw new f_("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new f_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof rP){if(null==this.id2Value[e.id])throw new f_("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new f_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&mN(this.id2Mask)}}const dP=new x_,hP=new x_;function pP(e,t,n,r){const a=null!=n&&n.training,i=Array.isArray(e),s=i?e:[e],o=s.map(e=>e.name),l=[],c=t.names();for(const f of o)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=o.join(",")+"|"+t.names().sort().join(",");let d,h=dP.get(u);if(null==h){const e=function(e,t){Vx(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){const a=mP(e[0],t);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const i of e){const{sorted:e,recipientMap:s}=mP(i,t);for(const t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(const t in s)null==r[t]&&(r[t]=new Set),s[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:fP(r)}}(s,t);h=e.sorted,d=e.recipientCounts,dP.put(u,h),hP.put(u,d)}d={},a||Object.assign(d,hP.get(u));const p=new uP(t);for(let f=0;f<h.length;++f){if(null!=r){const e=pN().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=h[f],i=e.sourceLayer;if(i instanceof cP)continue;const s=[],c=[],u=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);s.push(e),c.push(r),null!=r&&(m=!0),a||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==o.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}m&&((n=n||{}).mask=c[0]);const g=k_(i.apply(s,n));let x=null;i.supportsMasking&&(x=i.computeMask(s,c));const v=gP(e),y=Array.isArray(v)?v:[v];for(let t=0;t<y.length;++t){p.hasKey(y[t])||p.add(y[t],g[t],Array.isArray(x)?x[0]:x);const e=o.indexOf(y[t].name);-1!==e&&(l[e]=g[t])}a||mN(u)}return p.disposeMasks(),i?l:l[0]}function fP(e){const t={};for(const n in e)t[n]=e[n].size;return t}function mP(e,t){const n=new Set,r=[],a={};for(const o of t.names())n.add(o);const i=[],s=[];for(i.push(e);i.length>0;){const e=i[i.length-1];if(n.has(e.name)){i.pop();continue}const t=s[s.length-1]===i.length-1;if(0===e.inputs.length||t)i.pop(),r.push(e),n.add(e.name),t&&s.pop();else{s.push(i.length-1);for(const t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||i.push(t)}}return{sorted:r,recipientMap:a}}function gP(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function xP(e,t){return fN(()=>lS(uC(oS(e,e),t,!0)))}Nv().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function(e){null!=dP&&dP.setMaxEntries(e),null!=hP&&hP.setMaxEntries(e)});class vP extends mS{getConfig(){return{}}}class yP extends vP{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return fN(()=>{const t=xP(e,this.axis),n=Pj(t,0,this.maxValue);return oS(e,sS(n,aS(lR(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}yP.className="MaxNorm",xS(yP);class bP extends vP{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return fN(()=>sS(e,aS(lR(),xP(e,this.axis))))}getConfig(){return{axis:this.axis}}}bP.className="UnitNorm",xS(bP);class wP extends vP{apply(e){return VC(e)}}wP.className="NonNeg",xS(wP);class kP extends vP{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return fN(()=>{const t=xP(e,this.axis),n=aS(oS(this.rate,Pj(t,this.minValue,this.maxValue)),oS(1-this.rate,t));return oS(e,sS(n,aS(lR(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}kP.className="MinMaxNorm",xS(kP);const NP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function SP(e){return C_(e)}function jP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T_(e,gS.getMap().classNameMap,t,"constraint")}function CP(e){if(null==e)return null;if("string"===typeof e){return jP({className:e in NP?NP[e]:e,config:{}})}return e instanceof vP?e:jP(e)}async function EP(e){if(null==e)return;const t=[],n=[],r=[];for(const a in e){const i=e[a];if("number"!==typeof i){const e=i;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){const a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];mN(r)}}function TP(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var IP;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(IP||(IP={}));class AP{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class OP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class _P extends AP{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const a=fN(()=>aS(this.totals[r],oS(e,n)));this.totals[r]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:fN(()=>{const e=oS(sS(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),gN(t[n])}))}}class RP extends AP{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const a in this.history){const r=this.history[a];for(let i=0;i<r.length;++i)if("number"!==typeof r[i]){const s=r[i];e.push(s.data()),t.push(a),n.push(i)}}const r=await Promise.all(e);for(let a=0;a<r.length;++a){this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}}}class PP extends AP{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||xT,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");sv(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,a=null!=n?n():hk();return function(){const i=null!=n?n():hk();return i-a<t||(a=i,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await EP(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await EP(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await EP(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await EP(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await EP(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):sv(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await EP(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await EP(e),await this.trainEnd(e))}}function MP(e,t){if(null==e&&(e={}),e instanceof AP)return[e];if(Array.isArray(e)&&e[0]instanceof AP)return e;return k_(e).map(e=>new PP(e,t))}class DP{constructor(){}static registerCallbackConstructor(e,t){Vx(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)),DP.checkForDuplicate(t),null==DP.constructors[e]&&(DP.constructors[e]=[]),DP.constructors[e].push(t)}static checkForDuplicate(e){for(const t in DP.constructors){DP.constructors[+t].forEach(t=>{if(t===e)throw new f_("Duplicate callback constructor.")})}}static clear(){DP.constructors={}}static createCallbacks(e){const t=[];for(const n in DP.constructors){const r=+n;e>=r&&t.push(...DP.constructors[r])}return t.map(e=>new e)}}function FP(e,t,n,r,a,i,s,o,l){const c=new RP,u=[new _P,...DP.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const d=new OP(u);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:d,history:c}}function LP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return T_(e,gS.getMap().classNameMap,t,"layer",n)}function zP(e,t){return fN(()=>{"float32"!==e.dtype&&(e=nS(e,"float32"));const n=uC(bR(e),t,!0),r=bS(n.shape,lR()),a=lS(IS(n,r));return sS(e,a)})}function BP(e,t){return fN(()=>jC(bR(NS(t,e)),-1))}function UP(e,t){return fN(()=>jC(jS(NS(t,e)),-1))}function WP(e,t){return fN(()=>{const n=NS(e,t),r=Pj(jS(e),lR(),Number.MAX_VALUE),a=jS(sS(n,r));return oS(100,jC(a,-1))})}function VP(e,t){return fN(()=>{const n=Pj(t,lR(),Number.MAX_VALUE),r=oC(aS(1,n)),a=Pj(e,lR(),Number.MAX_VALUE),i=oC(aS(1,a));return jC(bR(NS(r,i)),-1)})}function HP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return fN(()=>{if(n)t=ZC(t);else{const e=uC(t,t.shape.length-1,!0);t=sS(t,e)}return t=Pj(t,lR(),1-lR()),IC(uC(oS(nS(e,"float32"),oC(t)),t.shape.length-1))})}function GP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return fN(()=>{const r=nS(nC(function(e){const t=[rR(e.shape)];return Cj(e,t)}(e)),"int32"),a=(t=Pj(t,lR(),1-lR())).shape;return HP(Cj(OC(r,a[a.length-1]),a),t,n)})}function KP(e,t){return fN(()=>{let n;return n=Pj(t,lR(),1-lR()),n=oC(sS(n,NS(1,n))),jC(function(e,t){if(!qx(e.shape,t.shape))throw new f_("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return fN(()=>{const n=VC(t),r=IC(jS(t));return aS(NS(n,oS(t,e)),lC(Jj(r)))})}(e,n),-1)})}function qP(e,t){return fN(()=>{const n=Pj(e,lR(),1),r=Pj(t,lR(),1);return uC(oS(e,oC(sS(n,r))),-1)})}function XP(e,t){return fN(()=>{const n=zP(e,-1),r=zP(t,-1),a=oS(n,r);return IC(uC(a,-1))})}DP.constructors={};const YP={meanSquaredError:BP,meanAbsoluteError:UP,meanAbsolutePercentageError:WP,meanSquaredLogarithmicError:VP,squaredHinge:function(e,t){return fN(()=>{const n=IS(0,NS(1,oS(e,t)));return jC(bR(n),-1)})},hinge:function(e,t){return fN(()=>{const n=IS(0,NS(1,oS(e,t)));return jC(n,-1)})},categoricalHinge:function(e,t){return fN(()=>{const n=uC(oS(e,t),-1),r=cC(oS(NS(1,e),t),-1);return IS(0,aS(1,NS(r,n)))})},logcosh:function(e,t){return fN(()=>{const n=Math.log(2),r=NS(t,e),a=NS(aS(r,eE(oS(-2,r))),n);return jC(a,-1)})},categoricalCrossentropy:HP,sparseCategoricalCrossentropy:GP,binaryCrossentropy:KP,kullbackLeiblerDivergence:qP,poisson:function(e,t){return fN(()=>{const n=oC(aS(lR(),t));return jC(NS(t,oS(e,n)),-1)})},cosineProximity:XP};function $P(e){if("string"===typeof e){if(e in YP)return YP[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new f_(t)}return e}function QP(e,t){return fN(()=>{const n=oS(.5,PC(t)),r=cR(aC(t,n),e.dtype);return jC($j(e,r),-1)})}function JP(e,t){return fN(()=>cR($j(uj(e,-1),uj(t,-1)),"float32"))}function ZP(e,t){return fN(()=>nS(uC(wC($j(e,1),$j(t,1))),"float32"))}function eM(e,t){return KP(e,t)}function tM(e,t){return e.rank===t.rank&&(e=nE(e,[e.rank-1])),(t=uj(t,-1)).dtype!==e.dtype&&(t=nS(t,e.dtype)),nS($j(e,t),"float32")}const nM=HP,rM=GP,aM={binaryAccuracy:QP,categoricalAccuracy:JP,precision:function(e,t){return fN(()=>{const n=ZP(e,t),r=function(e,t){return fN(()=>nS(uC(wC($j(e,0),$j(t,1))),"float32"))}(e,t),a=aS(n,r);return nS(cE(aC(a,0),sS(n,a),0),"float32")})},categoricalCrossentropy:nM,sparseCategoricalCrossentropy:rM,mse:BP,MSE:BP,mae:UP,MAE:UP,mape:WP,MAPE:WP,cosine:XP};function iM(e){if("string"===typeof e&&e in aM)return aM[e];if("string"!==typeof e&&null!=e)return e;throw new f_("Unknown metric ".concat(e))}function sM(e){if(y_(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(YP))if(YP[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(aM))if(aM[n]===e){t=n;break}return void 0!==t?t:e.name}}const oM=1048576;function lM(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!cM(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>oM&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(oM,"."))}}function cM(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!cM(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!cM(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function uM(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const a=function(e){let t=!0;const n=[],r=[];for(const a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(const a of n){if(a.length>1||1===a.length&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(const a of e.layers){let e=!1;for(const n of a.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),i=["Layer (type)","Input Shape","Output shape","Param #"];let s;if(a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!a){i.push("Receives inputs"),s=[];for(const t in e.nodesByDepth)s.push(...e.nodesByDepth[t])}r("_".repeat(t)),dM(i,n,r),r("=".repeat(t));const o=e.layers;for(let u=0;u<o.length;++u)a?hM(o[u],n,r):pM(o[u],n,s,r),r((u===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?QR(e.collectedTrainableWeights):QR(e.trainableWeights);return t}(e),c=QR(e.nonTrainableWeights);r("Total params: ".concat(l+c)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(c)),r("_".repeat(t))}function dM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function hM(e,t,n){let r,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(Qje){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(Qje){r="multiple"}const i=e.name,s=e.getClassName();dM(["".concat(i," (").concat(s,")"),a,r,e.countParams().toString()],t,n)}function pM(e,t,n,r){let a,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(Qje){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(Qje){a="multiple"}const s=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];s.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const o=e.name,l=e.getClassName(),c=0===s.length?"":s[0];dM(["".concat(o," (").concat(l,")"),i,a,e.countParams().toString(),c],t,r);for(let u=1;u<s.length;++u)dM(["","","","",s[u]],t,r)}function fM(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function mM(e,t){if(null===e)return null;if("string"===typeof e)return S_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];fM(t,a,r)?n.push(r):n.push(mM(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=S_(n);t[e]=mM(r,e)}}return t}}function gM(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return N_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];fM(t,a,r)?n.push(r):n.push(gM(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],a=N_(n);t[a]="name"!==n&&"className"!==n||"string"!==typeof r?gM(r,n):r}return t}}const xM="4.22.0";class vM extends oP{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=B_(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],A_(this.inputs).length!==this.inputs.length)throw new f_("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map(e=>e.name)));A_(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map(e=>e.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const e=x.sourceLayer,t=x.nodeIndex,n=x.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const x of this.inputs){const e=x.sourceLayer,t=x.nodeIndex,n=x.tensorIndex;y_(0===t,"input layer has >1 nodes"),y_(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const t=this.inputLayers[x];if(!(t instanceof cP))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(x," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},r={},a={},i={},s=[],o=(e,t,n,r,a,l)=>{null!=r&&null!=a&&null!=l||(r=e.sourceLayer,a=e.nodeIndex,l=e.tensorIndex);const c=r.inboundNodes[a];if(-1!==n.indexOf(c))throw new p_("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(c))return;this.containerNodes.add(vM.nodeKey(r,a)),r.id in i||(i[r.id]=Object.keys(i).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let i=0;i<u;i++){const e=c.inputTensors[i],r=c.inboundLayers[i],a=c.nodeIndices[i],s=c.tensorIndices[i];o(e,t,n,r,a,s)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);s.push(c)},l=[],c=[];for(const x of this.outputs)o(x,l,c);const u=s.slice().reverse();for(const x of u){n[x.id]=x,x.id in t||(t[x.id]=0);let e=t[x.id];const i=null==r[x.outboundLayer.id]?0:r[x.outboundLayer.id];e=Math.max(e,i),r[x.outboundLayer.id]=e,a[x.outboundLayer.id]=x.outboundLayer,t[x.id]=e;for(let r=0;r<x.inboundLayers.length;r++){const a=x.inboundLayers[r],i=x.nodeIndices[r],s=a.inboundNodes[i],o=null==t[s.id]?0:t[s.id];t[s.id]=Math.max(e+1,o),n[s.id]=s}}const d={};for(const x in t){const e=t[x];e in d||(d[e]=[]),d[e].push(n[x])}const h={};for(const x in r){const e=r[x];e in h||(h[e]=[]),h[e].push(a[x])}let p=Object.keys(h).map(e=>parseInt(e,10)).sort(I_);this.layers=[];for(const x of p){const e=h[x];e.sort((e,t)=>{const n=i[e.id],r=i[t.id];return n<r?-1:n>r?1:0});for(const t of e)t instanceof vM&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=h,p=Object.keys(d).map(e=>parseInt(e,10)).sort(I_);const f=this.inputs.slice(),m=[];for(const x of p)for(const e of d[x]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new p_("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(m));for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=d;const g=this.layers.map(e=>e.name);for(const x of g){const e=g.filter(e=>e===x).length;if(1!==e)throw new p_('The name "'.concat(x,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new iP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new f_("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const a=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);a&&this.parseWeights(e);for(const s of this.layers)for(const[e,t]of s.weights.entries()){const i=a?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[i])throw new f_("Duplicate weight name: ".concat(i));n[i]=t,r++}const i=[];for(const s in e){let r=s;if(null==n[s]){const e=s.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])i.push([n[r],e[s]]);else if(t)throw new f_("Provided weight data has no target variable: ".concat(s));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new f_("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}tP(i)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=n.map(e=>e.startsWith("_")?e.slice(1):e).filter(e=>!r.includes(e)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(xM),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=gM(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return fN(()=>{e=k_(e);const n=new uP;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return pP(this.outputs,n,t)})}computeMask(e,t){return fN(()=>{let n;return e=k_(e),n=null==t?v_(null,e.length):k_(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=XR(e);if(t.length!==this.inputLayers.length)throw new f_("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let s=0;s<t.length;s++){const e=this.inputLayers[s],r=t[s];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(I_);if(r.length>1)for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const r=[];for(let s=0;s<t.inboundLayers.length;s++){const e=t.inboundLayers[s],a=t.nodeIndices[s],i=t.tensorIndices[s],o=n["".concat(e.name,"_").concat(a,"_").concat(i)];r.push(o)}const a=XR(e.computeOutputShape(w_(r))),i=e.inboundNodes.indexOf(t);for(let t=0;t<a.length;t++){n["".concat(e.name,"_").concat(i,"_").concat(t)]=a[t]}}}const a=[],i=[];for(let s=0;s<this.outputLayers.length;s++){const e=this.outputLayers[s],t=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],r="".concat(e.name,"_").concat(t,"_").concat(n);i.push(r)}for(let s=0;s<i.length;s++){const e=i[s];y_(e in n),a.push(n[e])}return w_(a)}runInternalGraph(e,t){null==t&&(t=v_(null,e.length));const n={};for(let o=0;o<this.inputs.length;++o){const r=this.inputs[o],a=e[o],i=t[o];n[r.id]=[a,i]}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(I_);for(const o of r){const e=this.nodesByDepth[o];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,a=t.outputTensors,i=new Array;for(const t of r)t.id in n&&i.push(n[t.id]);if(i.length===r.length){let r,s,o,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===i.length){const[t,n]=i[0];null==c.mask&&(c.mask=n),o=k_(e.call(t,c)),l=k_(e.computeMask(t,n)),r=[t],s=[n]}else r=i.map(e=>e[0]),s=i.map(e=>e[1]),null==c.mask&&(c.mask=s),o=k_(e.call(r,c)),l=k_(e.computeMask(r,s));if(e.activityRegularizer)throw new m_("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e){const t=a[e],r=o[e],i=l[e];n[t.id]=[r,i]}}}}const a=[],i=[],s=[];for(const o of this.outputs){y_(o.id in n,"Could not compute output ".concat(o.name," : ").concat(o.id));const[e,t]=n[o.id];s.push(e.shape),a.push(e),i.push(t)}return[a,i,s]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof vM?1:0;for(let e=0;e<r.inboundNodes.length;e++){const a=vM.nodeKey(r,e);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new f_("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new f_("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new f_("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return fN(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=vM.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const i of this.layers){const e=i.getClassName(),r=i.getConfig(),a=[];for(let n=0;n<i.inboundNodes.length;n++){const e=i.inboundNodes[n],r=vM.nodeKey(i,n);let s={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),s=e.callArgs}catch(Qje){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),s={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const a=e.inboundLayers[r],i=e.nodeIndices[r],o=e.tensorIndices[r];let l=t[vM.nodeKey(a,i)];null==l&&(l=0),n.push([a.name,l,o,s])}a.push(n)}}}const s={};s.name=i.name,s.className=e,s.config=r,s.inboundNodes=a,n.push(s)}e.layers=n;const r=[];for(let i=0;i<this.inputLayers.length;i++){const e=this.inputLayers[i],n=this.inputLayersNodeIndices[i],a=vM.nodeKey(e,n);if(!this.containerNodes.has(a))continue;let s=t[a];null!==s&&void 0!==s||(s=0);const o=this.inputLayersTensorIndices[i];r.push([e.name,s,o])}e.inputLayers=r;const a=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],n=this.outputLayersNodeIndices[i],r=vM.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let s=t[r];null!==s&&void 0!==s||(s=0);const o=this.outputLayersTensorIndices[i];a.push([e.name,s,o])}return e.outputLayers=a,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function s(e,t){const n=[];let a;for(const s of t){const o=s[0],l=s[1],c=s[2];if(a=null==s[3]?{}:s[3],!(o in r))return void i(e,t);const u=r[o];if(u.inboundNodes.length<=l)return void i(e,t);const d=u.inboundNodes[l];n.push(d.outputTensors[c])}n.length>0&&e.apply(w_(n),a)}function o(e){const a=e.name,s=LP(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(n),r[a]=s;e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new f_("Corrupted configuration, expected array for nodeData: ".concat(e));i(s,e)})}const l=t.name,c=t.layers;for(const f of c)o(f);for(;!O_(a);)for(const e of c){const t=r[e.name];if(t.name in a){const e=a[t.name];delete a[t.name];for(const n of e)s(t,n)}}const u=[],d=[],h=t.inputLayers;for(const f of h){const e=f[0],t=f[1],n=f[2];y_(e in r);const a=r[e].inboundNodes[t].outputTensors;u.push(a[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];y_(e in r);const a=r[e].inboundNodes[t].outputTensors;d.push(a[n])}return new e({inputs:u,outputs:d,name:l})}get stateful(){if(this._stateful)throw new f_("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){fN(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function yM(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function bM(e,t){return yM(e,t,"classWeight")}async function wM(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=fN(()=>{if(1===e.shape.length)return rS(e);if(2===e.shape.length){if(e.shape[1]>1){return uj(e,1)}if(1===e.shape[1])return Cj(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await t.data());mN(t);const a=[];return r.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");a.push(n[e])}),iE(a,"float32")}return null}function kM(e,t){return oS(e,t)}function NM(e,t){let n,r;const a=t;n=a.xs,r=a.ys,Vx(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t));const i=SM("input",e.inputNames,n),s=SM("output",e.outputNames,r),o=i[0].shape[0];Vx(i.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")),Vx(s.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(s.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<i.length;l++)Vx(i[l].shape[0]===o,()=>"Batch size mismatch: input "+"".concat(e.inputNames[l]," has ").concat(i[l].shape[0],"; ")+"expected  ".concat(o," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<s.length;l++)Vx(s[l].shape[0]===o,()=>"Batch size mismatch: output "+"".concat(e.outputNames[l]," has ").concat(s[l].shape[0],"; ")+"expected  ".concat(o," based on input ").concat(e.inputNames[0],"."));return{xs:i,ys:s}}function SM(e,t,n){if(n instanceof Ik)return[n];if(Array.isArray(n))return Vx(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{const r=[];for(const a of t){if(null==n[a])throw new f_("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(a,"'."));r.push(n[a])}return r}}async function jM(e,t,n){const r=null!=n.batchesPerEpoch;if(Vx(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Vx(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Vx(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)),Vx(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)),Vx(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const a=null!=n.validationData;let i,s;if(a)if(CM(n.validationData))Vx(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches));else{const e=function(e){if(3===e.length)throw new m_("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);i=e.xs,s=e.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=a?l.slice().concat(l.map(e=>"val_"+e)):l.slice();const u=MP(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:h,history:p}=FP(u,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,a,c);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const c={};await h.onEpochBegin(f);let u=0,d=0;for(r||(m=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:a}=NM(e,t.value),i={};i.batch=d,i.size=r[0].shape[0],await h.onBatchBegin(d,i);const s=[];if(null!=n.classWeight){const t=bM(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)s.push(await wM(a[e],null,t[e]))}const c=r.concat(a).concat(s),p=o(c);mN(c);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];i[t]=n,gN(n)}await h.onBatchEnd(d,i),TP(i),d++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(a){let t;t=CM(n.validationData)?k_(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):k_(e.evaluate(i,s,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,c),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function CM(e){return"function"===typeof e.iterator}function EM(e){Vx(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function TM(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>dR(e,t,n-t)):dR(e,t,n-t)}function IM(e,t){return fN(()=>null==e?null:Array.isArray(e)?e.map(e=>IM(e,t)):yR(e,"int32"===t.dtype?t:nS(t,"int32")))}function AM(e,t){const n=[];let r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function OM(e){const t=[];e instanceof Ik&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(uR(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function _M(e,t){if(null==e)return;const n=[];if(t instanceof Ik)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const a in t){const e=t[a];n.push(e.id)}const r=[];if(e instanceof Ik)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(const a in e){const t=e[a];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function RM(e){return Array.isArray(e)}function PM(e){return!function(e){return e instanceof Ik}(e)&&!RM(e)}function MM(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(RM(e)&&e.length>0)t=!0;else if(PM(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new f_("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map(e=>null);if(PM(e)){r=[];for(const n of t){if(null==e[n])throw new f_('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(RM(e)){if(e.length!==t.length)throw new f_("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new f_("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=OM(r),null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;const e=r[s];if(e.shape.length!==n[s].length)throw new f_("Error when checking ".concat(i,": expected ").concat(t[s]," ")+"to have ".concat(n[s].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[s].length;++t){if(0===t&&!a)continue;const r=e.shape[t],o=n[s][t];if(null!=o&&o>=0&&r!==o)throw new f_("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[s].slice(1,n[s].length),"] ")+"(i.e.,tensor shape [*,".concat(n[s].slice(1,n[s].length),"])")+" but the ".concat(i," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function DM(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new f_("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new f_("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;const e=r[s];if(e.shape.length!==n[s].length)throw new f_("Error when checking ".concat(i,": expected ").concat(t[s]," ")+"to have ".concat(n[s].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[s].length;++r){if(0===r&&!a)continue;const o=e.shape[r],l=n[s][r];if(null!=l&&l!==o)throw new f_("Error when checking ".concat(i,": expected ")+"".concat(t[s]," to have shape ").concat(JSON.stringify(n[s])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class FM extends vM{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new f_("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");uM(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>mT.adagrad(.01),Adadelta:()=>mT.adadelta(1,.95,lR()),Adam:()=>mT.adam(.001,.9,.999,lR()),Adamax:()=>mT.adamax(.002,.9,.999,lR(),0),RMSProp:()=>mT.rmsprop(.001,.9,0,lR()),SGD:()=>mT.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new f_("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof vS))throw new f_("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new f_("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map(e=>$P(e))}else{const n=$P(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new f_('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push($P(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const e=this.internalOutputShapes[i],t=this.outputNames[i];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[i])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Q_("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Q_("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=t=>{let n,r,i;for(const s of t){if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const t=this.internalOutputShapes[e];let a;1===t[t.length-1]||this.lossFunctions[e]===KP?-1!==["accuracy","acc"].indexOf(s)?r=QP:-1!==["crossentropy","ce"].indexOf(s)&&(r=eM):this.lossFunctions[e]===GP?-1!==["accuracy","acc"].indexOf(s)?r=tM:-1!==["crossentropy","ce"].indexOf(s)&&(r=rM):-1!==["accuracy","acc"].indexOf(s)?r=JP:-1!==["crossentropy","ce"].indexOf(s)&&(r=nM),-1!==["accuracy","acc"].indexOf(s)?a="acc":-1!==["crossentropy","ce"].indexOf(s)&&(a="ce"),i=r,n=""+a}else{const e=iM(s);i=e,n=""+sM(s)}let t;Q_(n,()=>{t=i}),a(e,n,t)}};t(r[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;EM(r);const a=this.standardizeUserDataXY(e,t,!0,r);try{const e=a[0].concat(a[1]);this.makeTestFunction();const t=this.testFunction;return w_(this.testLoop(t,e,r,n.verbose,n.steps))}finally{_M(a[0],e),_M(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,a=e.testFunction;let i=[];if(n.verbose>0)throw new m_("Verbose mode is not implemented yet.");Vx(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches)));const s=function(e){return"function"===typeof e.next}(t)?t:await t.iterator();let o=0,l=0;for(;!r||l<n.batches;){const t=await s.next();if(i=fN(()=>{if(t.value){const{xs:n,ys:r}=NM(e,t.value),s=n.concat(r),c=fN(()=>a(s));if(mN(s),0===l)for(let e=0;e<c.length;++e)i.push(hS(0));const u=s[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=i[e];i[e]=fN(()=>aS(i[e],oS(u,t))),l>0&&mN(n)}mN(c),o+=u,++l}return i}),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<i.length;++c){const e=i[c];i[c]=sS(i[c],o),mN(e)}return w_(i)}(this,e,t)}checkNumSamples(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new f_("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new f_("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new f_("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new uP;if(e instanceof Ik&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new f_("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)i.add(this.inputs[t],e[t])}else for(const o of this.inputs){const t=e[o.name];if(null==t)throw new f_("No value is provided for the model's input ".concat(o.name));i.add(o,t)}const s=pP(a,i);return n?s:s[0]}retrieveSymbolicTensors(e){const t=v_(null,e.length);let n=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],i=a.map(e=>e.name);for(let r=0;r<e.length;++r){const s=i.indexOf(e[r]);if(-1!==s&&(t[r]=a[s],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new f_("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return fN(()=>{const r=this.checkNumSamples(e);if(n)throw new m_("Verbose predictLoop() is not implemented yet.");const a=AM(r,t),i=this.outputs.map(e=>[]);for(let t=0;t<a.length;++t){const n=fN(()=>{const n=a[t][0],r=a[t][1],i=TM(e,n,r),s=[];if(Array.isArray(i))for(let e=0;e<i.length;++e)s.push({key:this.inputs[e],value:i[e]});else s.push({key:this.inputs[0],value:i});const o=new uP(s);return pP(this.outputs,o)});n.forEach((e,t)=>i[t].push(e))}return w_(i.map(e=>Mj(e,0)))})}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=OM(e);DM(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return EM(e),this.predictLoop(n,e)}finally{_M(n,e)}}predictOnBatch(e){DM(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new p_("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let a=0;a<this.feedOutputShapes.length;++a){const e=this.feedOutputShapes[a];this.feedLossFns[a]===GP?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=A_(e.map(e=>e.shape[0]));n.sort();const r=A_(t.map(e=>e.shape[0]));if(r.sort(),n.length>1)throw new f_("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(e=>e.shape))));if(r.length>1)throw new f_("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(e=>e.shape))));if(n.length>0&&r.length>0&&!qx(n,r))throw new f_("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(n[0]," input sample(s) and ").concat(r[0]," target ")+"sample(s).")}(e=MM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=MM(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[BP,KP,HP];for(let a=0;a<e.length;++a){const i=e[a],s=t[a],o=n[a];if(null!=s){if(s===HP&&1===i.shape[i.shape.length-1])throw new f_("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(s)){const e=i.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){const r=e[n],a=t[n];if(null!=a&&r!==a)throw new f_("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(o,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new f_("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0;const[s,o]=this.standardizeUserDataXY(e,t,a,i);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=bM(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await wM(o[t],null,e[t]))}return[s,o,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return fN(()=>{const i=this.checkNumSamples(t,n,a,"steps"),s=[];if(r>0)throw new m_("Verbose mode is not implemented yet.");if(null!=a)throw new m_("steps mode in testLoop() is not implemented yet");{const r=AM(i,n),a=iE(sR(0,i));for(let n=0;n<r.length;++n){const i=r[n][0],o=r[n][1],l=dR(a,i,o-i),c=IM(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)s.push(hS(0));for(let e=0;e<u.length;++e){const t=u[e];s[e]=aS(s[e],oS(o-i,t))}}for(let e=0;e<s.length;++e)s[e]=sS(s[e],i)}return s})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let a=r;if(b_(e,r)>1){const t=b_(e.slice(0,n),r);a+="_".concat(t)}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),i=[],s=this.collectedTrainableWeights.map(e=>e.read()),o=this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const s=new uP(e),o=pP(this.outputs,s,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],o[n]);null!=a[n]&&(e=kM(e,a[n]));const i=jC(e);t.push(i),l=0===n?e:aS(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],a=this.metricsTensors[n][1];e=jC(t(r[a],o[a]))}gN(e),i.push(e)}return l=jC(l),this.calculateLosses().forEach(e=>{l=aS(l,e)}),l},!0,s);return[o].concat(i)}}makeTestFunction(){this.testFunction=e=>fN(()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let e=0;e<this.inputs.length;++e)i.push({key:this.inputs[e],value:r[e]});const s=new uP(i),o=pP(this.outputs,s);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],i=jC(r(a[e],o[e]));n=0===e?i:aS(n,i),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],i=jC(n(a[r],o[r]));t.push(i)}return t})}async fit(e,t){let n,r,a,i,s,o,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const h=null==d.batchSize?32:d.batchSize;EM(h);const p=!1,f=await this.standardizeUserData(e,t,d.sampleWeight,d.classWeight,p,h);n=f[0],r=f[1],u=f[2];let m,g=!1;if(null!=d.validationData&&d.validationData.length>0){if(g=!0,2!==d.validationData.length)throw 3===d.validationData.length?new m_("validationData including sample weights is not supported yet."):new f_("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(d.validationData," is invalid."));s=d.validationData[0],o=d.validationData[1];const e=!0,t=await this.standardizeUserData(s,o,null,null,e,h);l=t[0],c=t[1],m=l.concat(c)}else if(null!=d.validationSplit&&d.validationSplit>0&&d.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-d.validationSplit)),t=n[0].shape[0];l=TM(n,e,t),a=n,n=TM(n,0,e),c=TM(r,e,t),i=r,r=TM(r,0,e),m=l.concat(c)}else null!=d.validationSteps&&(g=!0);const x=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let b,w;g?(this.makeTestFunction(),b=this.testFunction,w=y.slice().concat(y.map(e=>"val_"+e))):(b=null,m=[],w=y.slice());const k=MP(d.callbacks,d.yieldEvery);return await this.fitLoop(v,x,y,h,d.epochs,d.verbose,k,b,m,d.shuffle,w,d.initialEpoch,null,null)}finally{this.isTraining=!1,_M(n,e),_M(r,t),_M(a,e),_M(i,t),_M(l,s),_M(c,o),null!=u&&mN(u)}}async fitLoop(e,t,n,r,a,i,s,o,l,c,u,d,h,p){null==r&&(r=32),null==a&&(a=1),null==c&&(c=!0),null==d&&(d=0);let f=!1;if(null!=o&&null!=l&&(f=!0),null!=p&&(f=!0,null==h))throw new f_("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,h,"steps_per_epoch");let g;null!=m&&(g=sR(0,m)),null==i&&(i=1);const{callbackList:x,history:v}=FP(s,i,a,d,m,h,r,f,u);x.setModel(this),this.history=v,await x.onTrainBegin(),this.stopTraining_=!1;for(let y=d;y<a;++y){await x.onEpochBegin(y);const a={};if(null!=h)throw new m_("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new m_("batch shuffling is not implemneted yet");c&&zx(g);const i=iE(g),s=AM(m,r);for(let c=0;c<s.length;++c){const u={};if(await x.onBatchBegin(c,u),fN(()=>{const d=s[c][0],h=s[c][1],p=dR(i,d,h-d);u.batch=c,u.size=h-d;const m=IM(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];u[t]=r,gN(r)}if(c===s.length-1&&f){const e=this.testLoop(o,l,r);for(let t=0;t<n.length;++t){const r=n[t],i=e[t];gN(i),a["val_"+r]=i}}}),await x.onBatchEnd(c,u),TP(u),this.stopTraining_)break}i.dispose()}if(await x.onEpochEnd(y,a),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return jM(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],a=n[1],i=this.makeTrainFunction()(r.concat(a)),s=[];for(const o of i){const e=await o.data();s.push(e[0])}return mN(i),_M(n[0],e),_M(n[1],t),w_(s)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=pN().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-pN().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=N_(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>N_(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=N_(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[N_(sM(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>N_(sM(e)));{const e={};for(const t in this.metrics)e[t]=N_(sM(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=LP(mM(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=S_(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>S_(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=S_(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map(e=>S_(e));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=S_(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,EN.getSaveHandlers(n));if(0===t.length)throw new f_("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new f_("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}var n;if(null==e.save)throw new f_("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await yN(this.getNamedWeights(t)),a={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(xM),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){a.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await yN(await this.optimizer.getWeights(),e);r.specs.push(...n),r.data=(i=[r.data,t],dN.join(i))}var i;if(null!=this.userDefinedMetadata){const e=!0;lM(this.userDefinedMetadata,this.name,e),a.userDefinedMetadata=this.userDefinedMetadata}return a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){lM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}FM.className="Model",xS(FM);class LM extends FM{}LM.className="Functional",xS(LM);class zM extends FM{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:B_("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new f_("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof zM||e instanceof FM;let n;if(t){if(n=e,1!==n.outputs.length)throw new f_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new f_("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new f_("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new f_("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new cP({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new f_("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new f_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=lP(this.outputs[0])}this.inboundNodes=[],new iP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:v_(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if($R(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new FM({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new p_("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new p_("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new p_("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new p_("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new f_("Legacy serialization format not supported yet.");n=t}else Vx(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),n=t.layers,delete t.layers,a=t;const i=new e(a);if(!(i instanceof zM))throw new m_("Sequential.fromConfig called on non-Sequential input: ".concat(i));for(const s of n){const e=LP(s,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),i.add(e)}return i}set stopTraining(e){if(null==this.model)throw new f_("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new f_("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}zM.className="Sequential",xS(zM);class BM extends mS{getConfig(){return{}}}class UM extends BM{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new m_("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Yj(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}UM.className="elu",xS(UM);class WM extends BM{apply(e){return GC(e)}}WM.className="selu",xS(WM);class VM extends BM{apply(e){return VC(e)}}VM.className="relu",xS(VM);class HM extends BM{apply(e){return fN(()=>EC(6,VC(e)))}}HM.className="relu6",xS(HM);class GM extends BM{apply(e){return e}}GM.className="linear",xS(GM);class KM extends BM{apply(e){return qC(e)}}KM.className="sigmoid",xS(KM);class qM extends BM{apply(e){return function(e){return fN(()=>{const t=aS(.5,oS(.2,e));return Pj(t,0,1)})}(e)}}qM.className="hardSigmoid",xS(qM);class XM extends BM{apply(e){return eE(e)}}XM.className="softplus",xS(XM);class YM extends BM{apply(e){return function(e){return fN(()=>sS(e,aS(jS(e),1)))}(e)}}YM.className="softsign",xS(YM);class $M extends BM{apply(e){return aE(e)}}$M.className="tanh",xS($M);class QM extends BM{apply(e){return ZC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}QM.className="softmax",xS(QM);class JM extends BM{apply(e){return dC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}JM.className="logSoftmax",xS(JM);class ZM extends BM{apply(e){return fN(()=>fN(()=>{const t=Math.sqrt(2),n=oS(.5,aS(1,Qj(sS(e,t))));return oS(e,n)}))}}ZM.className="gelu",xS(ZM);class eD extends BM{apply(e){return fN(()=>oS(.5,oS(e,aS(1,aE(oS(lS(sS(2,Math.PI)),aS(e,oS(.044715,kS(e,3)))))))))}}eD.className="gelu_new",xS(eD);class tD extends BM{apply(e){return fN(()=>oS(e,aE(eE(e))))}}tD.className="mish",xS(tD);class nD extends BM{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fN(()=>oS(qC(oS(e,t)),e))}}function rD(e){return e.getClassName()}function aD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T_(e,gS.getMap().classNameMap,t,"activation")}function iD(e){if(null==e){const e={className:"linear",config:{}};return aD(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},aD(t)}return e instanceof BM?e:aD(e)}function sD(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}nD.className="swish",xS(nD);class oD extends mS{}class lD extends oD{constructor(e){super(),sD(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return fN(()=>{let t=_C([1]);return this.hasL1&&(t=aS(t,uC(oS(this.l1,jS(e))))),this.hasL2&&(t=aS(t,uC(oS(this.l2,bR(e))))),Cj(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}lD.className="L1L2",xS(lD);const cD={l1l2:"L1L2"};function uD(e){return C_(e)}function dD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T_(e,gS.getMap().classNameMap,t,"regularizer")}function hD(e){if(null==e)return null;if("string"===typeof e){return dD({className:e in cD?cD[e]:e,config:{}})}return e instanceof oD?e:dD(e)}class pD extends oP{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=YR(e);let n=VC(e);return null!=this.maxValue&&(n=Pj(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}pD.className="ReLU",xS(pD);class fD extends oP{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=YR(e);return sC(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}fD.className="LeakyReLU",xS(fD);class mD extends oP{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=KR(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=hD(e.alphaRegularizer),this.alphaConstraint=CP(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new f_("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=$R(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new nP({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=YR(e),DC(e,this.alpha.read())}getConfig(){const e={alphaInitializer:GR(this.alphaInitializer),alphaRegularizer:uD(this.alphaRegularizer),alphaConstraint:SP(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}mD.className="PReLU",xS(mD);class gD extends oP{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new m_("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=YR(e);return Yj(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}gD.className="ELU",xS(gD);class xD extends oP{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=YR(e);return oS(n,nS(aC(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}xD.className="ThresholdedReLU",xS(xD);class vD extends oP{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new QM).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return fN(()=>{let n=YR(e);const r=t.mask;if(null!=r){const e=oS(NS(RC(n.shape),nS(r,n.dtype)),hS(-1e9));n=aS(n,e)}return this.axis instanceof Array?this.axis.length>1?Jj(NS(n,bC(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function yD(e,t,n){if("number"===typeof e)return v_(e,t);if(e.length!==t)throw new f_("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const a=e[r];if(!nR(a))throw new f_("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function bD(e,t,n,r){if(null==e)return e;let a;return a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r)}function wD(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+iR([n-t,0]);else{if("same"!==r)throw new f_("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function kD(e,t){return fN(()=>(q_(t),"channelsFirst"===t?hE(e,[0,2,3,1]):e))}function ND(e,t){return fN(()=>(q_(t),"channelsFirst"===t?hE(e,[0,2,3,4,1]):e))}function SD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return fN(()=>{if(null==i&&(i="channelsLast"),q_(i),3!==e.shape.length)throw new f_("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new f_("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new f_("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if("channelsFirst"===i&&(e=hE(e,[0,2,1])),"causal"===a)throw new m_("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Uj(e,t,r,"same"===a?"same":"valid","NWC",s);return null!=n&&(o=kR(o,n)),o})}function jD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return fN(()=>{if(null==i&&(i="channelsLast"),q_(i),3!==e.rank&&4!==e.rank)throw new f_("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new f_("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let l=kD(e,i);if("causal"===a)throw new m_("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=jE({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===i&&(l=hE(l,[0,3,1,2])),l})}function CD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;return fN(()=>{if(null==i&&(i="channelsLast"),q_(i),4!==e.rank&&5!==e.rank)throw new f_("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new f_("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let o=ND(e,i);if("causal"===a)throw new m_("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=Hj(o,t,r,"same"===a?"same":"valid","NDHWC",s),null!=n&&(o=kR(o,n)),"channelsFirst"===i&&(o=hE(o,[0,4,1,2,3])),o})}vD.className="Softmax",xS(vD);class ED extends oP{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ED.verifyArgs(t),this.rank=e,P_(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new m_("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=yD(t.kernelSize,e,"kernelSize"),this.strides=yD(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,X_(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,q_(this.dataFormat),this.activation=iD(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=KR(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=CP(t.biasConstraint),this.biasRegularizer=hD(t.biasRegularizer),this.activityRegularizer=hD(t.activityRegularizer),this.dilationRate=yD(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new f_("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new f_("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new f_("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(y_("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!R_(e.kernelSize,"number",1,3))throw new f_("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:rD(this.activation),useBias:this.useBias,biasInitializer:GR(this.biasInitializer),biasRegularizer:uD(this.biasRegularizer),activityRegularizer:uD(this.activityRegularizer),biasConstraint:SP(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class TD extends ED{constructor(e,t){super(e,t),this.kernel=null,TD.verifyArgs(t),this.filters=t.filters,P_(this.filters,"filters"),this.kernelInitializer=KR(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=CP(t.kernelConstraint),this.kernelRegularizer=hD(t.kernelRegularizer)}build(e){e=$R(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new f_("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return fN(()=>{let t;e=YR(e);const n=null==this.bias?null:this.bias.read(),r=D_(this.activation.getClassName());if(null!=r&&2===this.rank)t=jD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=SD(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=jD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new m_("convolutions greater than 3D are not implemented yet.");t=CD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=$R(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){const e=bD(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:GR(this.kernelInitializer),kernelRegularizer:uD(this.kernelRegularizer),kernelConstraint:SP(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new f_("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class ID extends TD{constructor(e){super(2,e),ID.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!R_(e.kernelSize,"number",1,2))throw new f_("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}ID.className="Conv2D",xS(ID);class AD extends TD{constructor(e){super(3,e),AD.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new f_("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}AD.className="Conv3D",xS(AD);class OD extends ID{constructor(e){if(super(e),this.inputSpec=[new nP({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new f_("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=$R(e)).length)throw new f_("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new f_("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new nP({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return fN(()=>{let t=YR(e);if(4!==t.shape.length)throw new f_("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let a,i;"channelsFirst"===this.dataFormat?(a=2,i=3):(a=1,i=2);const s=n[a],o=n[i],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],d=this.strides[1],h=[r,wD(s,u,l,this.padding),wD(o,d,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=hE(t,[0,2,3,1]));let p=Vj(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=hE(p,[0,3,1,2])),null!=this.bias&&(p=kR(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){const t=(e=$R(e)).slice();let n,r,a;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3):(n=3,r=1,a=2);const i=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=wD(t[r],o,i,this.padding),t[a]=wD(t[a],l,s,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}OD.className="Conv2DTranspose",xS(OD);class _D extends AD{constructor(e){if(super(e),this.inputSpec=[new nP({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new f_("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=$R(e)).length)throw new f_("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new f_("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new nP({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return fN(()=>{let t=YR(e);if(5!==t.shape.length)throw new f_("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let a,i,s;"channelsFirst"===this.dataFormat?(s=2,a=3,i=4):(s=1,a=2,i=3);const o=n[s],l=n[a],c=n[i],u=this.kernelSize[0],d=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,wD(o,p,u,this.padding),wD(l,f,d,this.padding),wD(c,m,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=hE(t,[0,2,3,4,1]));let x=Kj(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(x=hE(x,[0,4,1,2,3])),null!==this.bias&&(x=kR(x,this.bias.read(),this.dataFormat)),null!==this.activation&&(x=this.activation.apply(x)),x})}computeOutputShape(e){const t=(e=$R(e)).slice();let n,r,a,i;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3,i=4):(n=4,r=1,a=2,i=3);const s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=wD(t[r],c,s,this.padding),t[a]=wD(t[a],u,o,this.padding),t[i]=wD(t[i],d,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}_D.className="Conv3DTranspose",xS(_D);class RD extends TD{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new f_("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new f_("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new f_("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=KR(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=hD(t.depthwiseRegularizer),this.depthwiseConstraint=CP(t.depthwiseConstraint),this.pointwiseInitializer=KR(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=hD(t.pointwiseRegularizer),this.pointwiseConstraint=CP(t.pointwiseConstraint)}build(e){if((e=$R(e)).length<this.rank+2)throw new f_("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new f_("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(n*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new nP({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return fN(()=>{let t;if(e=YR(e),1===this.rank)throw new m_("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=hE(e,[0,2,3,1])),t=KC(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=kR(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=hE(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=GR(this.depthwiseInitializer),e.pointwiseInitializer=GR(this.pointwiseInitializer),e.depthwiseRegularizer=uD(this.depthwiseRegularizer),e.pointwiseRegularizer=uD(this.pointwiseRegularizer),e.depthwiseConstraint=SP(this.depthwiseConstraint),e.pointwiseConstraint=SP(this.pointwiseConstraint),e}}RD.className="SeparableConv";class PD extends RD{constructor(e){super(2,e)}}PD.className="SeparableConv2D",xS(PD);class MD extends TD{constructor(e){super(1,e),MD.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!R_(e.kernelSize,"number",1,1))throw new f_("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}MD.className="Conv1D",xS(MD);class DD extends oP{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return fN(()=>{if(e=YR(e),"channelsLast"===this.dataFormat){const t=pR(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return pR(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=pR(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return pR(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}DD.className="Cropping2D",xS(DD);class FD extends oP{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,q_(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){__(W_,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return fN(()=>{let t=YR(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=hE(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?pT.resizeNearestNeighbor(t,[e,r]):pT.resizeBilinear(t,[e,r]);return hE(a,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?pT.resizeNearestNeighbor(t,[e,r]):pT.resizeBilinear(t,[e,r])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}FD.className="UpSampling2D",xS(FD);class LD extends ED{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=KR(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=CP(e.depthwiseConstraint),this.depthwiseRegularizer=hD(e.depthwiseRegularizer)}build(e){if((e=$R(e)).length<4)throw new f_("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new f_("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return fN(()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return fN(()=>{null==a&&(a="channelsLast"),q_(a);let s=kD(e,a);if(4!==e.rank)throw new f_("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new f_("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return s=Xj(s,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(s=hE(s,[0,3,1,2])),s})}(e=YR(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=kR(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=$R(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=bD(t,this.kernelSize[0],this.padding,this.strides[0]),i=bD(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=GR(this.depthwiseInitializer),e.depthwiseRegularizer=uD(this.depthwiseRegularizer),e.depthwiseConstraint=SP(this.depthwiseRegularizer),e}}function zD(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new f_("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function BD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return fN(()=>{const l=t.shape.length;if(l<3)throw new f_("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(sR(2,l));if(t=hE(t,c),null!=i)throw new m_("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&(a=nS(nS(a,"bool"),"float32"),a.rank===l-1&&(a=Zj(a,-1)),a=hE(a,c)),r&&(t=HC(t,0),null!=a&&(a=HC(a,0)));const u=[];let d,h=n;const p=t.shape[0],f=lE(t);let m,g;null!=a&&(m=lE(a));for(let t=0;t<p;++t){const n=f[t],r=fN(()=>e(n,h));if(null==a)d=r[0],h=r[1];else{const e=fN(()=>{const e=m[t],n=NS(PC(e),e),a=aS(oS(r[0],e),oS(h[0],n)),i=h.map((t,a)=>aS(oS(r[1][a],e),oS(t,n)));return{output:a,newStates:i}});d=e.output,h=e.newStates}o&&u.push(d)}if(o){g=rE(u,1)}return[d,g,h]})}LD.className="DepthwiseConv2D",xS(LD);class UD extends oP{constructor(e){let t;if(super(e),null==e.cell)throw new f_("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new YD({cells:e.cell}):e.cell,null==t.stateSize)throw new f_("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new nP({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return sR(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){qR(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return fN(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new m_("Constants support is not implemented in RNN yet.");qR(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new nP({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let a;if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!qx(this.stateSpec.map(e=>e.shape[e.shape.length-1]),a))throw new f_("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=a.map(e=>new nP({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fN(()=>{if(!this.stateful)throw new h_("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new f_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>_C([n,e])):this.states_=[_C([n,this.cell.stateSize])];else if(null==e)mN(this.states_),null!=this.keptStates&&(mN(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>_C([n,e])):this.states_[0]=_C([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new f_("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):mN(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,i=[n,a];if(!qx(r.shape,i))throw new f_("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(i,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map(e=>gN(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=zD(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let i=[],s=[];if(null!=n){t.initialState=n,i=i.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new nP({shape:e.shape}));s=s.concat(this.stateSpec)}null!=r&&(t.constants=r,i=i.concat(r),this.numConstants=r.length);if(i[0]instanceof rP){const n=[e].concat(i),r=this.inputSpec.concat(s),a=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return fN(()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let a=null==t?null:t.initialState;e=YR(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new f_("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(a.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:r},o=BD((e,t)=>{const n=this.cell.call([e].concat(t),s);return[n[0],n.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],c=o[1],u=o[2];this.stateful&&this.resetStates(u,r);const d=this.returnSequences?c:l;return this.returnState?[d].concat(u):d})}getInitialState(e){return fN(()=>{let t=_C(e.shape);return t=uC(t,[1,2]),t=uR(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?gR(t,[1,e]):t):this.cell.stateSize>1?[gR(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===UD.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=LP(t.cell,n);return new e(Object.assign(t,{cell:r}))}}UD.className="RNN",xS(UD);class WD extends oP{}class VD extends WD{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,P_(this.units,"units"),this.activation=iD(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=KR(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=KR(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=KR(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hD(e.kernelRegularizer),this.recurrentRegularizer=hD(e.recurrentRegularizer),this.biasRegularizer=hD(e.biasRegularizer),this.kernelConstraint=CP(e.kernelConstraint),this.recurrentConstraint=CP(e.recurrentConstraint),this.biasConstraint=CP(e.biasConstraint),this.dropout=aR([1,iR([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=aR([1,iR([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=$R(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return fN(()=>{if(2!==e.length)throw new f_("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let a;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$D({ones:()=>PC(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$D({ones:()=>PC(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=this.recurrentDropoutMask;a=vR(null!=i?oS(e,i):e,this.kernel.read()),null!=this.bias&&(a=kR(a,this.bias.read())),null!=s&&(n=oS(n,s));let o=aS(a,vR(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:rD(this.activation),useBias:this.useBias,kernelInitializer:GR(this.kernelInitializer),recurrentInitializer:GR(this.recurrentInitializer),biasInitializer:GR(this.biasInitializer),kernelRegularizer:uD(this.kernelRegularizer),recurrentRegularizer:uD(this.recurrentRegularizer),biasRegularizer:uD(this.biasRegularizer),activityRegularizer:uD(this.activityRegularizer),kernelConstraint:SP(this.kernelConstraint),recurrentConstraint:SP(this.recurrentConstraint),biasConstraint:SP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}VD.className="SimpleRNNCell",xS(VD);class HD extends UD{constructor(e){e.cell=new VD(e),super(e)}call(e,t){return fN(()=>{null!=this.cell.dropoutMask&&(mN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(mN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}}HD.className="SimpleRNN",xS(HD);class GD extends WD{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new f_("GRUCell does not support reset_after parameter set to true.");this.units=e.units,P_(this.units,"units"),this.activation=iD(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=iD(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=KR(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=KR(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=KR(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hD(e.kernelRegularizer),this.recurrentRegularizer=hD(e.recurrentRegularizer),this.biasRegularizer=hD(e.biasRegularizer),this.kernelConstraint=CP(e.kernelConstraint),this.recurrentConstraint=CP(e.recurrentConstraint),this.biasConstraint=CP(e.biasConstraint),this.dropout=aR([1,iR([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=aR([1,iR([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=$R(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return fN(()=>{if(2!==e.length)throw new f_("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$D({ones:()=>PC(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$D({ones:()=>PC(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let s,o,l;0<this.dropout&&this.dropout<1&&(e=oS(e,a[0]));let c=vR(e,this.kernel.read());this.useBias&&(c=kR(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=oS(r,i[0]));const u=this.recurrentKernel.read(),[d,h]=tE(u,[2*this.units,this.units],u.rank-1),p=vR(r,d),[f,m,g]=tE(c,3,c.rank-1),[x,v]=tE(p,2,p.rank-1);s=this.recurrentActivation.apply(aS(f,x)),o=this.recurrentActivation.apply(aS(m,v));const y=vR(oS(o,r),h);l=this.activation.apply(aS(g,y));const b=aS(oS(s,r),oS(aS(1,IC(s)),l));return[b,b]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:rD(this.activation),recurrentActivation:rD(this.recurrentActivation),useBias:this.useBias,kernelInitializer:GR(this.kernelInitializer),recurrentInitializer:GR(this.recurrentInitializer),biasInitializer:GR(this.biasInitializer),kernelRegularizer:uD(this.kernelRegularizer),recurrentRegularizer:uD(this.recurrentRegularizer),biasRegularizer:uD(this.biasRegularizer),activityRegularizer:uD(this.activityRegularizer),kernelConstraint:SP(this.kernelConstraint),recurrentConstraint:SP(this.recurrentConstraint),biasConstraint:SP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}GD.className="GRUCell",xS(GD);class KD extends UD{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new GD(e),super(e)}call(e,t){return fN(()=>{null!=this.cell.dropoutMask&&(mN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(mN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}KD.className="GRU",xS(KD);class qD extends WD{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,P_(this.units,"units"),this.activation=iD(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=iD(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=KR(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=KR(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=KR(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=hD(e.kernelRegularizer),this.recurrentRegularizer=hD(e.recurrentRegularizer),this.biasRegularizer=hD(e.biasRegularizer),this.kernelConstraint=CP(e.kernelConstraint),this.recurrentConstraint=CP(e.recurrentConstraint),this.biasConstraint=CP(e.biasConstraint),this.dropout=aR([1,iR([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=aR([1,iR([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=$R(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends ER{apply(t,r){const a=e.apply([n]),i=(new IR).apply([n]),s=e.apply([2*n]);return mR(mR(a,i),s)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return fN(()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new f_("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$D({ones:()=>PC(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$D({ones:()=>PC(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=this.recurrentDropoutMask;let o,l,c,u;0<this.dropout&&this.dropout<1&&(e=oS(e,i[0]));let d=vR(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=oS(r,s[0])),d=aS(d,vR(r,this.recurrentKernel.read())),this.useBias&&(d=kR(d,this.bias.read()));const[h,p,f,m]=tE(d,4,d.rank-1);o=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),c=aS(oS(l,a),oS(o,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const g=oS(u,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:rD(this.activation),recurrentActivation:rD(this.recurrentActivation),useBias:this.useBias,kernelInitializer:GR(this.kernelInitializer),recurrentInitializer:GR(this.recurrentInitializer),biasInitializer:GR(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:uD(this.kernelRegularizer),recurrentRegularizer:uD(this.recurrentRegularizer),biasRegularizer:uD(this.biasRegularizer),activityRegularizer:uD(this.activityRegularizer),kernelConstraint:SP(this.kernelConstraint),recurrentConstraint:SP(this.recurrentConstraint),biasConstraint:SP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}qD.className="LSTMCell",xS(qD);class XD extends UD{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qD(e),super(e)}call(e,t){return fN(()=>{null!=this.cell.dropoutMask&&(mN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(mN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}XD.className="LSTM",xS(XD);class YD extends WD{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return fN(()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const a=[];let i;for(let s=0;s<this.cells.length;++s){const o=this.cells[s];n=r[s],i=0===s?[e[0]].concat(n):[i[0]].concat(n),i=o.call(i,t),a.push(i.slice(1))}n=[];for(const e of a.slice().reverse())n.push(...e);return[i[0]].concat(n)})}build(e){let t;qR(e)&&(e=e[0]),this.cells.forEach((n,r)=>{Q_("RNNCell_".concat(r),()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const a of t.cells)r.push(LP(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return eP(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,a=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],a[e]])}tP(t)}}function $D(e){const{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=e,s=()=>null!=i?i(t(),n):NR(t(),n),o=()=>SR(s,t,r);if(!a||a<=1)return gN(o().clone());return Array(a).fill(void 0).map(o).map(e=>gN(e.clone()))}YD.className="StackedRNNCells",xS(YD);var QD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class JD extends UD{constructor(e){if(e.unroll)throw new m_("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new m_("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new nP({ndim:5})]}call(e,t){return fN(()=>{if(null!=this.cell.dropoutMask&&(mN(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(mN(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new f_("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return fN(()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=_C([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fN(()=>{if(!this.stateful)throw new h_("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new f_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_C(a)):this.states_=[_C(a)];else if(null==e)mN(this.states_),null!=this.keptStates&&(mN(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_C(a)):this.states_[0]=_C(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new f_("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):mN(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=a;if(!qx(n.shape,r))throw new f_("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map(e=>gN(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:i,dilationRate:s}=this.cell,o="channelsFirst"===t,l=e[o?3:2],c=e[o?4:3],u=bD(l,r[0],a,i[0],s[0]),d=bD(c,r[1],a,i[1],s[1]);return[...e.slice(0,2),...o?[n,u,d]:[u,d,n]]}}JD.className="ConvRNN2D";class ZD extends qD{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,P_(this.filters,"filters"),this.kernelSize=yD(n,2,"kernelSize"),this.kernelSize.forEach(e=>P_(e,"kernelSize")),this.strides=yD(r||1,2,"strides"),this.strides.forEach(e=>P_(e,"strides")),this.padding=a||"valid",X_(this.padding),this.dataFormat=i||"channelsLast",q_(this.dataFormat),this.dilationRate=yD(s||1,2,"dilationRate"),this.dilationRate.forEach(e=>P_(e,"dilationRate"))}build(e){var t;e=$R(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new f_("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends ER{apply(e,t){return fR([n.apply([r]),RC([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return fN(()=>{if(3!==e.length)throw new f_("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],a=e[1],i=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$D({ones:()=>PC(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=(e,t,n)=>t&&t[n]?oS(t[n],e):e;let l=o(r,s,0),c=o(r,s,1),u=o(r,s,2),d=o(r,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$D({ones:()=>PC(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let p=o(a,h,0),f=o(a,h,1),m=o(a,h,2),g=o(a,h,3);const[x,v,y,b]=tE(this.kernel.read(),4,3),[w,k,N,S]=this.useBias?tE(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,x,w,this.padding),c=this.inputConv(c,v,k,this.padding),u=this.inputConv(u,y,N,this.padding),d=this.inputConv(d,b,S,this.padding);const[j,C,E,T]=tE(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,j),f=this.recurrentConv(f,C),m=this.recurrentConv(m,E),g=this.recurrentConv(g,T);const I=this.recurrentActivation.apply(aS(l,p)),A=this.recurrentActivation.apply(aS(c,f)),O=aS(oS(A,i),oS(I,this.activation.apply(aS(u,m)))),_=oS(this.recurrentActivation.apply(aS(d,g)),this.activation.apply(O));return[_,_,O]})}getConfig(){const e=super.getConfig(),{units:t}=e,n=QD(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const a=Bj(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?kR(a,n,this.dataFormat):a}recurrentConv(e,t){return Bj(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}ZD.className="ConvLSTM2DCell",xS(ZD);class eF extends JD{constructor(e){const t=new ZD(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}eF.className="ConvLSTM2D",xS(eF);class tF extends oP{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return SR(()=>NR(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}tF.className="Dropout",xS(tF);class nF extends tF{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}nF.className="SpatialDropout1D",xS(nF);class rF extends oP{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,P_(this.units,"units"),this.activation=iD(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=KR(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=KR(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=CP(e.kernelConstraint),this.biasConstraint=CP(e.biasConstraint),this.kernelRegularizer=hD(e.kernelRegularizer),this.biasRegularizer=hD(e.biasRegularizer),this.activityRegularizer=hD(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=$R(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=$R(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e),r=D_(this.activation.getClassName());let a;return null!=r?a=vR(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=vR(n,this.kernel.read()),null!=this.bias&&(a=kR(a,this.bias.read())),null!=this.activation&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:rD(this.activation),useBias:this.useBias,kernelInitializer:GR(this.kernelInitializer),biasInitializer:GR(this.biasInitializer),kernelRegularizer:uD(this.kernelRegularizer),biasRegularizer:uD(this.biasRegularizer),activityRegularizer:uD(this.activityRegularizer),kernelConstraint:SP(this.kernelConstraint),biasConstraint:SP(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}rF.className="Dense",xS(rF);class aF extends oP{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=$R(e);for(const t of e.slice(1))if(null==t)throw new f_('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],rR(e,1)]}call(e,t){return fN(()=>{this.invokeCallHook(e,t);let n=YR(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=hE(n,e)}return function(e){if(e.rank<=1)throw new f_("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],rR(e.shape,1)];return Cj(e,t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}aF.className="Flatten",xS(aF);class iF extends oP{constructor(e){super(e),this.supportsMasking=!0,this.activation=iD(e.activation)}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e);return this.activation.apply(n)})}getConfig(){const e={activation:rD(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}iF.className="Activation",xS(iF);class sF extends oP{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return fN(()=>function(e,t){return fN(()=>{if(2!==e.shape.length)throw new f_("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return gR(uR(e,1),[1,t,1])})}(e=YR(e),this.n))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}sF.className="RepeatVector",xS(sF);class oF extends oP{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let a=1,i=null;for(let o=0;o<r.length;++o){const e=r[o];if(this.isUnknown(e)){if(null!==i)throw new f_("Can only specifiy one unknown dimension.");i=o}else a*=e}const s=rR(e);if(null!==i){if(0===a||s%a!==0)throw new f_(n);r[i]=s/a}else if(s!==a)throw new f_(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return Cj(n,a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}oF.className="Reshape",xS(oF);class lF extends oP{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=sR(1,e.dims.length+1);if(!qx(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new nP({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=$R(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return hE(YR(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}lF.className="Permute",xS(lF);class cF extends oP{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=YR(e);return cj(AC(n,this.maskValue),-1)}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e),r=cj(AC(n,this.maskValue),-1,!0);return oS(n,nS(r,n.dtype))})}}cF.className="Masking",xS(cF);class uF extends oP{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(k_(e.inputLength))}this.inputDim=e.inputDim,P_(this.inputDim,"inputDim"),this.outputDim=e.outputDim,P_(this.outputDim,"outputDim"),this.embeddingsInitializer=KR(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=hD(e.embeddingsRegularizer),this.activityRegularizer=hD(e.activityRegularizer),this.embeddingsConstraint=CP(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return fN(()=>this.maskZero?(e=YR(e),AC(e,uS(e))):null)}computeOutputShape(e){if(e=$R(e),null==this.inputLength)return[...e,this.outputDim];const t=k_(this.inputLength);if(t.length!==e.length-1)throw new f_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new f_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return fN(()=>{this.invokeCallHook(e,t);let n=YR(e);"int32"!==n.dtype&&(n=cR(n,"int32"));const r=yR(this.embeddings.read(),Cj(n,[n.size]));return Cj(r,$R(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:GR(this.embeddingsInitializer),embeddingsRegularizer:uD(this.embeddingsRegularizer),activityRegularizer:uD(this.activityRegularizer),embeddingsConstraint:SP(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}uF.className="Embedding",xS(uF);class dF extends oP{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new m_}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new f_("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[$R(e)]),e.length<2)throw new f_("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const a of e)null!=a&&null!==a[0]&&t.push(a[0]);if(t=A_(t),t.length>1)throw new f_("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){const t=null==e[a]?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map(e=>e.length);-1===e.indexOf(null)&&1===A_(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return fN(()=>{if(this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const r=iR(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=uR(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const i of e){const e=i.rank;if(null==e){const e=i.shape,r=e[0],a=e.slice(1).concat([r]);let s=Cj(i,[r].concat(rR(e.slice(1))));s=hE(s,[1,0]),s=Cj(s,a),t.push(s),n=!0}else if(e>1){const r=sR(1,e).concat([0]);t.push(hE(i,r)),n=!0}else t.push(i)}let r=this.mergeFunction(t);const a=r.rank;if(n)if(null==a){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=Cj(hE(Cj(r,[-1,t]),[1,0]),n)}else if(a>1){const e=[a-1].concat(sR(0,a-1));r=hE(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=A_(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return fN(()=>{if(null==t)return null;if(!Array.isArray(t))throw new f_("`mask` should be an Array");if(!Array.isArray(e))throw new f_("`inputs` should be an Array");if(t.length!==e.length)throw new f_("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:Zj(e,0)))[0];for(let e=1;e<t.length-1;++e)n=wC(n,t[e]);return n})}}class hF extends dF{constructor(e){super(e)}mergeFunction(e){return fN(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=aS(t,e[n]);return t})}}hF.className="Add",xS(hF);class pF extends dF{constructor(e){super(e)}mergeFunction(e){return fN(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=oS(t,e[n]);return t})}}pF.className="Multiply",xS(pF);class fF extends dF{constructor(e){super(e)}mergeFunction(e){return fN(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=aS(t,e[n]);return oS(1/e.length,t)})}}fF.className="Average",xS(fF);class mF extends dF{constructor(e){super(e)}mergeFunction(e){return fN(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=IS(t,e[n]);return t})}}mF.className="Maximum",xS(mF);class gF extends dF{constructor(e){super(e)}mergeFunction(e){return fN(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=EC(t,e[n]);return t})}}gF.className="Minimum",xS(gF);class xF extends dF{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new f_("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let a=!1;for(const e of n)if(qx(e,t)){a=!0;break}a||n.push(t)}if(n.length>1)throw new f_("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return fN(()=>fR(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new f_("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const a of t.slice(1)){if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new f_("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new f_("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new f_("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return fN(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const r=[];for(let i=0;i<e.length;++i)null==t[i]?r.push(nS(PC(e[i]),"bool")):t[i].rank<e[i].rank?r.push(Zj(t[i],-1)):r.push(t[i]);const a=Mj(r,this.axis);return lj(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function vF(e,t){for(;e<0;)e+=t;return e}xF.className="Concatenate",xS(xF);class yF extends dF{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Vx(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new m_("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new f_("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new f_("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>vF(t,e[n].shape.length)):[vF(this.axes,n.shape.length),vF(this.axes,r.shape.length)],this.normalize&&(n=zP(n,t[0]),r=zP(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new m_("batchDot is not implemented for tensors of 4D or higher rank yet");if(Vx(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)),Vx(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new m_("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);const i=n;return fN(()=>{let n,s;if(r>a){n=r-a;const e=[];for(let t=0;t<n;++t)e.push(1);t=Cj(t,t.shape.concat(e))}else if(a>r){n=a-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=Cj(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)s=i[0]===i[1]?uC(oS(e,t),i[0]):uC(oS(hE(e,[1,0]),t),i[1]);else{const n=i[0]!==e.shape.length-1,r=i[1]===t.shape.length-1;s=kC(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);s=nE(s,t)}return 1===s.shape.length&&(s=Zj(s,1)),s})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[vF(this.axes,e.length),vF(this.axes,t.length)],n}computeOutputShape(e){Vx(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new m_("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}yF.className="Dot",xS(yF);class bF extends oP{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e);return SR(()=>aS(xR(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}bF.className="GaussianNoise",xS(bF);class wF extends oP{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return fN(()=>{this.invokeCallHook(e,t);const n=YR(e);if(this.rate>0&&this.rate<1){return SR(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return oS(n,xR(n.shape,1,e))},()=>n,t.training||!1)}return n})}}wF.className="GaussianDropout",xS(wF);class kF extends oP{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||YR(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return fN(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=YR(e),r=-1.7580993408473766;let a=iC(UC(n),this.rate);a=cR(a,"float32");const i=((1-this.rate)*(1+this.rate*r**2))**-.5,s=-i*r*this.rate,o=aS(oS(t,a),oS(aS(a,-1),r));return aS(oS(o,i),s)};return SR(r,()=>YR(e),t.training||!1)}return e})}}function NF(e,t,n,r,a){let i,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Aj(e,t,n,r,a,s);else if(3===e.rank)i=Oj(e,t,n,r,a,s);else{if(4!==e.rank)throw new m_("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=_j(e,t,n,r,a,s)}return i}function SF(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return qx(r.slice().sort(),sR(0,e.rank-1))?function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return fN(()=>{const i=TC(e,r),s=i.mean,o=i.variance;return[NF(e,s,o,n,t,a),s,o]})}(e,t,n,r,a):function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return fN(()=>{const i=TC(e,r),s=i.mean,o=i.variance,l=[];for(const t of sR(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=Cj(s,l),u=Cj(o,l),d=null==t?null:Cj(t,l),h=null==n?null:Cj(n,l);return[NF(e,c,u,h,d,a),s,o]})}(e,t,n,r,a)}kF.className="AlphaDropout",xS(kF);class jF extends oP{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=KR(e.betaInitializer||"zeros"),this.gammaInitializer=KR(e.gammaInitializer||"ones"),this.movingMeanInitializer=KR(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=KR(e.movingVarianceInitializer||"ones"),this.betaConstraint=CP(e.betaConstraint),this.gammaConstraint=CP(e.gammaConstraint),this.betaRegularizer=hD(e.betaRegularizer),this.gammaRegularizer=hD(e.gammaRegularizer)}build(e){e=$R(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new f_("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new nP({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return fN(()=>{const n=null!=t.training&&t.training,r=YR(e),a=r.shape,i=a.length,s=sR(0,i),o=this.axis>=0?this.axis:this.axis+i;s.splice(o,1);const l=v_(1,i);l[o]=a[o];const c=s.slice();c.sort();const u=!qx(c,sR(0,i).slice(0,i-1));if(!n)return(()=>{if(u){const e=Cj(this.movingMean.read(),l),t=Cj(this.movingVariance.read(),l),n=this.center?Cj(this.beta.read(),l):null,a=this.scale?Cj(this.gamma.read(),l):null;return NF(r,e,t,n,a,this.epsilon)}return NF(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,h,p]=SF(r,this.gamma.read(),this.beta.read(),s,this.epsilon),f=(e,t,n)=>{fN(()=>{const r=1-n,a=e.read(),i=oS(NS(a,t),r);e.write(NS(a,i))})};return(()=>{f(this.movingMean,h,this.momentum),f(this.movingVariance,p,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:GR(this.betaInitializer),gammaInitializer:GR(this.gammaInitializer),movingMeanInitializer:GR(this.movingMeanInitializer),movingVarianceInitializer:GR(this.movingVarianceInitializer),betaRegularizer:uD(this.betaRegularizer),gammaRegularizer:uD(this.gammaRegularizer),betaConstraint:SP(this.betaConstraint),gammaConstraint:SP(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}jF.className="BatchNormalization",xS(jF);class CF extends oP{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=KR(e.betaInitializer||"zeros"),this.gammaInitializer=KR(e.gammaInitializer||"ones"),this.betaRegularizer=hD(e.betaRegularizer),this.gammaRegularizer=hD(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=$R(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(const a of this.axis)if(a<0||a>=t)throw new Error("Invalid axis: ".concat(a));if(this.axis.length!==A_(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map(t=>e[t]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=YR(e),r=n.shape,a=r.length;return fN(()=>{let{mean:e,variance:t}=TC(n,this.axis,!0);const i=v_(1,a);for(const n of this.axis)i[n]=r[n];const s=e=>null!=e&&e.shape.length!==a?Cj(e,i):e;let o=this.scale?s(this.gamma.read()):null,l=this.center?s(this.beta.read()):null;const c=[],u=[];for(let n=0;n<a;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=eC(e,c),t=eC(t,c),null!=o&&(o=eC(o,u)),null!=l&&(l=eC(l,u)),NF(n,e,t,l,o,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:GR(this.betaInitializer),gammaInitializer:GR(this.gammaInitializer),betaRegularizer:uD(this.betaRegularizer),gammaRegularizer:uD(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}CF.className="LayerNormalization",xS(CF);class EF extends oP{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new f_("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new f_("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new f_("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new nP({ndim:4})]}computeOutputShape(e){let t,n;return e=$R(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return fN(()=>{return t=YR(e),n=this.padding,r=this.dataFormat,fN(()=>{if(4!==t.rank)throw new f_("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new f_("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new f_("Unknown data format: ".concat(r,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],MC(t,e)});var t,n,r})}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function TF(e,t,n,r,a,i){return fN(()=>{let s;q_(a),Y_(i),X_(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=kD(e,a);const o="same"===r?"same":"valid";return s="max"===i?NC(e,t,n,o):Ej(e,t,n,o),"channelsFirst"===a&&(s=hE(s,[0,3,1,2])),s})}function IF(e,t,n,r,a,i){return fN(()=>{let s;q_(a),Y_(i),X_(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=ND(e,a);const o="same"===r?"same":"valid";return s="max"===i?SC(e,t,n,o):Tj(e,t,n,o),"channelsFirst"===a&&(s=hE(s,[0,4,1,2,3])),s})}EF.className="ZeroPadding2D",xS(EF);class AF extends oP{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new f_("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(P_(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new f_("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}P_(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,X_(this.padding),this.inputSpec=[new nP({ndim:3})]}computeOutputShape(e){const t=bD((e=$R(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return fN(()=>{this.invokeCallHook(e,t),e=uR(YR(e),2);const n=this.poolingFunction(YR(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return nE(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class OF extends AF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return q_(a),X_(r),TF(e,t,n,r,a,"max")}}OF.className="MaxPooling1D",xS(OF);class _F extends AF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return q_(a),X_(r),TF(e,t,n,r,a,"avg")}}_F.className="AveragePooling1D",xS(_F);class RF extends oP{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new f_("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];P_(this.poolSize,"poolSize"),P_(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,q_(this.dataFormat),X_(this.padding),this.inputSpec=[new nP({ndim:4})]}computeOutputShape(e){e=$R(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=bD(t,this.poolSize[0],this.padding,this.strides[0]),n=bD(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return fN(()=>(this.invokeCallHook(e,t),this.poolingFunction(YR(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class PF extends RF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return q_(a),X_(r),TF(e,t,n,r,a,"max")}}PF.className="MaxPooling2D",xS(PF);class MF extends RF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return q_(a),X_(r),TF(e,t,n,r,a,"avg")}}MF.className="AveragePooling2D",xS(MF);class DF extends oP{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new f_("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];P_(this.poolSize,"poolSize"),P_(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,q_(this.dataFormat),X_(this.padding),this.inputSpec=[new nP({ndim:5})]}computeOutputShape(e){e=$R(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=bD(t,this.poolSize[0],this.padding,this.strides[0]),n=bD(n,this.poolSize[1],this.padding,this.strides[1]),r=bD(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return fN(()=>(this.invokeCallHook(e,t),this.poolingFunction(YR(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class FF extends DF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return q_(a),X_(r),IF(e,t,n,r,a,"max")}}FF.className="MaxPooling3D",xS(FF);class LF extends DF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return q_(a),X_(r),IF(e,t,n,r,a,"avg")}}LF.className="AveragePooling3D",xS(LF);class zF extends oP{constructor(e){super(e),this.inputSpec=[new nP({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new m_}}class BF extends zF{constructor(e){super(e||{})}call(e,t){return fN(()=>{const t=YR(e);return jC(t,1)})}}BF.className="GlobalAveragePooling1D",xS(BF);class UF extends zF{constructor(e){super(e||{})}call(e,t){return fN(()=>{const t=YR(e);return cC(t,1)})}}UF.className="GlobalMaxPooling1D",xS(UF);class WF extends oP{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,q_(this.dataFormat),this.inputSpec=[new nP({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new m_}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class VF extends WF{call(e,t){return fN(()=>{const t=YR(e);return"channelsLast"===this.dataFormat?jC(t,[1,2]):jC(t,[2,3])})}}VF.className="GlobalAveragePooling2D",xS(VF);class HF extends WF{call(e,t){return fN(()=>{const t=YR(e);return"channelsLast"===this.dataFormat?cC(t,[1,2]):cC(t,[2,3])})}}HF.className="GlobalMaxPooling2D",xS(HF);class GF extends oP{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=LP(t.layer,n);delete t.layer;const a={layer:r};return Object.assign(a,t),new e(a)}}class KF extends GF{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=$R(e)).length<3)throw new f_("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=$R(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return fN(()=>BD((e,n)=>[YR(this.layer.call(e,t)),[]],e=YR(e),[],!1,null,null,!1,!0)[1])}}KF.className="TimeDistributed",xS(KF);class qF extends GF{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=LP(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=LP(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){__(G_,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new m_("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):w_(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=zD(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const i=[],s=[];if(null!=n){const e=n.length;if(e%2>0)throw new f_("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);const r=n.map(e=>new nP({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),s.push(...r)}if(null!=r)throw new m_("Support for constants in Bidirectional layers is not implemented yet.");const o=i[0]instanceof rP;for(const l of i)if(l instanceof rP!==o)throw new f_("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[e].concat(i),r=this.inputSpec.concat(s),a=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return fN(()=>{const n=t.initialState;let r,a,i,s;if(null==n)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const i=n.slice(0,n.length/2),s=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:i})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:s}))}return this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=HC(a,1)),"concat"===this.mergeMode?s=fR([r,a]):"sum"===this.mergeMode?s=aS(r,a):"ave"===this.mergeMode?s=oS(.5,aS(r,a)):"mul"===this.mergeMode?s=oS(r,a):null==this.mergeMode&&(s=[r,a]),this.returnState?null==this.mergeMode?s.concat(i):[s].concat(i):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Q_(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Q_(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=LP(t.layer);if(delete t.layer,null!=t.numConstants)throw new m_("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}qF.className="Bidirectional",xS(qF);class XF extends oP{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return fN(()=>("float32"!==(e=YR(e)).dtype&&(e=cR(e,"float32")),aS(oS(e,this.scale),this.offset)))}}XF.className="Rescaling",xS(XF);const{resizeBilinear:YF,cropAndResize:$F}=pT;class QF extends oP{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,i,s,o){return fN(()=>{let l,c=!1;const u=[t/i,n/s,(r+t)/i,(a+n)/s],d=[];3===e.rank?(c=!0,l=rE([e])):l=e;for(let e=0;e<l.shape[0];e++)d.push(u);const h=uN(d,[d.length,4]),p=WC(0,d.length,1,"int32"),f=$F(l,h,p,[r,a],"nearest");return cR(c?YR(lE(f)):f,o)})}upsize(e,t,n,r){return fN(()=>cR(YF(e,[t,n]),r))}call(e,t){return fN(()=>{const t=YR(e),n=t.dtype,r=t.shape,a=r[r.length-3],i=r[r.length-2];let s=0;a!==this.height&&(s=Math.floor((a-this.height)/2));let o=0;return i!==this.width&&(o=Math.floor((i-this.width)/2),0===o&&(o=1)),s>=0&&o>=0?this.centerCrop(t,s,o,this.height,this.width,a,i,n):this.upsize(e,this.height,this.width,n)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=$R(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}QF.className="CenterCrop",xS(QF);class JF extends oP{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=$R(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return fN(()=>{let n;if("int32"!==(e=YR(e)).dtype&&(e=cR(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new f_("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=YR(t.countWeights)}const r=cC(e),a=CC(e),i=aC(this.numTokens,r).bufferSync().get(0),s=iC(a,0).bufferSync().get(0);if(!i||!s)throw new f_("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let a=YR(e);if("int32"!==a.dtype&&(a=cR(a,"int32")),"int"===t)return a;const i=a.shape;if(0===a.rank&&(a=Zj(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Zj(a,-1)),a.rank>2)throw new f_("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));const s=["multiHot","oneHot"].includes(t),o=a;let l;if(l=qj(o,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return l;if(r)return oS(l,r);throw new f_("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}}JF.className="CategoryEncoding",xS(JF);const ZF=new Set(["bilinear","nearest"]);class eL extends oP{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!ZF.has(e.interpolation))throw new f_("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=$R(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return fN(()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return pT.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return pT.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...ZF]," are supported"))})}}eL.className="Resizing",xS(eL);class tL{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}tL.className="RandomSeed";class nL extends oP{constructor(e){super(e),this.randomGenerator=new tL(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}nL.className="BaseRandomLayer";const rL=new Set(["bilinear","nearest"]);class aL extends nL{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new f_("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new f_("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new f_("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!rL.has(n))throw new f_("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=$R(e))[2];return[this.imgHeight,-1,t]}call(e,t){return fN(()=>{const t=YR(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=UC([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const a=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return pT.resizeBilinear(e,a);case"nearest":return pT.resizeNearestNeighbor(e,a);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...rL]," are supported"))}})}}aL.className="RandomWidth",xS(aL);var iL,sL;Nv().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(iL||(iL={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(sL||(sL={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function oL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(dL(e)){const a=Array.isArray(e)?[]:{};r.add(e);for(const i in e){const s=oL(e[i],t,n,r);a[i]=s}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function lL(e){return cL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:uL)}function cL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(dL(r)){const a=Array.isArray(r)?[]:{};n.add(r);for(const i in r){const r=cL(e.map(e=>e[i]),t,n);a[i]=r}return n.delete(r),a}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function uL(e){return null===e?null:dL(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function dL(e){let t=!1;if(Nv().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Ik)&&!(e instanceof Promise)&&!t)}function hL(e){return function(e,t){return oL(e,t)}(e,pL)}function pL(e){return e instanceof Ik?{value:e.clone(),recurse:!1}:dL(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class fL{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class mL extends fL{constructor(){super(mL.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function gL(e){return new bL(e)}function xL(e,t){return new OL(e,t)}mL.INITIAL_CAPACITY=32;class vL{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new EL(this,e)}filter(e){return new jL(this,e)}map(e){return new CL(this,e)}mapAsync(e){return new TL(this,e)}serialMapAsync(e){return new TL(this,e).serial()}flatmap(e){return new AL(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e){return new SL(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uL;return this.rowMajorBatch(e,t).map(e=>lL(e,n))}concatenate(e,t){return new OL(new yL([this,e]),t)}take(e){return e<0||null==e?this:new NL(this,e)}skip(e){return e<0||null==e?this:new kL(this,e)}prefetch(e){return new RL(this,e)}shuffle(e,t){return new PL(this,e,t)}serial(){return new wL(this)}}class yL extends vL{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:hL(e),done:!1}}}class bL extends vL{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(Yje){throw Yje.message="Error thrown while iterating through a dataset: ".concat(Yje.message),Yje}}}class wL extends vL{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class kL extends vL{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;mN(e.value)}return this.upstream.next()}}class NL extends vL{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class SL extends vL{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class jL extends vL{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;mN(e.value)}}}class CL extends vL{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Hk(e.value),n=this.transform(e.value),r=Hk(n);for(const a of t)Vk(a,r)||a.dispose();return{value:n,done:!1}}}class EL extends vL{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(Yje){if(!this.handler(Yje))return{value:null,done:!0}}}}class TL extends vL{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Hk(e.value),n=await this.transform(e.value),r=Hk(n);for(const a of t)Vk(a,r)||a.dispose();return{value:n,done:!1}}}class IL extends vL{constructor(){super(),this.outputQueue=new mL,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class AL extends IL{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=Hk(e.value),n=this.transform(e.value),r=Hk(n);this.outputQueue.pushAll(n);for(const a of t)Vk(a,r)||a.dispose();return!0}}class OL extends vL{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var _L;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(_L||(_L={}));class RL extends vL{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new fL(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class PL extends RL{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=FC.alea(n||hk().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class ML{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return Vx(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),DL(async()=>(await n.iterator()).columnMajorBatch(e,t,FL),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,DL(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,DL(async()=>(await t.iterator()).filter(t=>fN(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return DL(async()=>(await t.iterator()).map(t=>fN(()=>e(t))),this.size)}mapAsync(e){const t=this;return DL(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return DL(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,DL(async()=>xL(gL(async()=>({value:await t.iterator(),done:!1})).take(e)),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,DL(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,a=FC.alea(t||hk().toString());return DL(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,DL(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function DL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends ML{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function FL(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof Ik||mk(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Ik?rE(e):uN(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}ML.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function LL(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&Vx("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}const zL=EI;class BL extends Fx{nextDataId(){return BL.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Dx(this,hN())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Nv().get("IS_NODE")&&zw("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&iv(n[0])){const a=n.map(e=>pk(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return GT(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>fk(e));return tS(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return tS(e.shape,e.dtype,t)}makeOutput(e,t,n){return hN().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=hk();e();return{kernelMs:hk()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){LL([e],"where");const t=this.readSync(e.dataId);return zL(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}BL.nextDataId=0;function UL(e){return(t,n,r)=>{const a=nv(n,t.length);for(let i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function WL(e,t,n){return VL(e,UL(t),n)}function VL(e,t,n){return r=>{let{inputs:a,attrs:i,backend:s}=r;const{x:o}=a;LL(o,e);const l=s,c=l.data.get(o.dataId).values;let u;if("string"===o.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=jI(c)}else u=c;const d=n||o.dtype,h=t(u,d,i);return l.makeTensorInfo(o.shape,d,h)}}xN("cpu",()=>new BL,1);const HL=WL(Cy,e=>e>=0?e:Math.exp(e)-1),GL={kernelName:Cy,backendName:"cpu",kernelFunc:HL};function KL(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const qL={kernelName:Vy,backendName:"cpu",kernelFunc:KL};function XL(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r;LL([a],"leakyRelu");const s=Kx(a.shape),o=n.data.get(a.dataId).values,l=tv("float32",s);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return n.makeTensorInfo(a.shape,"float32",l)}const YL={kernelName:Yy,backendName:"cpu",kernelFunc:XL};function $L(e){return(t,n,r,a,i)=>{const s=TS(t,n),o=s.length,l=uv(s),c=tv(i,Kx(s)),u=t.length,d=n.length,h=uv(t),p=uv(n),f=CS(t,s),m=CS(n,s);if(f.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(let g=0;g<c.length;++g){const t=vv(g,o,l),n=t.slice(-u);f.forEach(e=>n[e]=0);const i=xv(n,u,h),s=t.slice(-d);m.forEach(e=>s[e]=0);const x=xv(s,d,p);c[g]=e(r[i],a[x])}return[c,s]}}const QL=$L((e,t)=>e<0?t*e:e);function JL(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;LL([r,a],"prelu");const i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,l]=QL(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(l,"float32",o)}const ZL={kernelName:Ab,backendName:"cpu",kernelFunc:JL},ez=WL(Lb,e=>Math.max(0,e)),tz={kernelName:Lb,backendName:"cpu",kernelFunc:ez},nz=WL(Hb,e=>Math.min(Math.max(0,e),6)),rz={kernelName:Hb,backendName:"cpu",kernelFunc:nz},az=UL(e=>1/(1+Math.exp(-e))),iz=WL(rw,e=>1/(1+Math.exp(-e))),sz={kernelName:rw,backendName:"cpu",kernelFunc:iz};function oz(e,t,n,r,a){if("linear"===n)return KL({inputs:{x:t},backend:e});if("relu"===n)return ez({inputs:{x:t},backend:e});if("elu"===n)return HL({inputs:{x:t},backend:e});if("relu6"===n)return nz({inputs:{x:t},backend:e});if("prelu"===n)return JL({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return XL({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return iz({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function lz(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}const cz={kernelName:ey,backendName:"cpu",kernelFunc:lz};function uz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return lz({inputs:{real:uz(e,t,"float32"),imag:uz(e,t,"float32")},backend:e})}const r=fv(Kx(t),n);return e.makeTensorInfo(t,n,r)}function dz(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const hz={kernelName:Db,backendName:"cpu",kernelFunc:dz};function pz(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=dk([0],n),[a,i]=$L((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[i,"bool",a]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function fz(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if("complex64"===i){if("complex64"===a.dtype)return KL({inputs:{x:a},backend:n});const e=uz(n,a.shape,a.dtype),t=fz({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=lz({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){const e=dz({inputs:{input:a},backend:n}),t=fz({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(!rv(a.dtype,i)){const e=KL({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}const s=n.data.get(a.dataId).values,[o,l,c]=pz(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,c)}const mz={kernelName:Qv,backendName:"cpu",kernelFunc:fz};function gz(e,t,n,r){return null==n?n=>{let{inputs:a,backend:i}=n;const{a:s,b:o}=a,l=i;LL([s,o],e);const c=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,d="string"===s.dtype?jI(c):c,h="string"===s.dtype?jI(u):u,p=r||s.dtype,[f,m]=t(s.shape,o.shape,d,h,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:a,backend:i}=e;const{a:s,b:o}=a,l=i;if("complex64"===s.dtype||"complex64"===o.dtype){const e=fz({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,i=l.data.get(r.dataId).values,c=l.data.get(a.dataId).values,u=fz({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(u.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=l.data.get(h.dataId).values,m=l.data.get(p.dataId).values,[g,x,v]=n(s.shape,o.shape,i,c,f,m),y=l.makeTensorInfo(v,"float32",g),b=l.makeTensorInfo(v,"float32",x),w=lz({inputs:{real:y,imag:b},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(b),w}{const e=l.data.get(s.dataId).values,n=l.data.get(o.dataId).values,a=r||s.dtype,[i,c]=t(s.shape,o.shape,e,n,a);return l.makeTensorInfo(c,a,i)}}}function xz(e){return(t,n,r,a,i,s)=>{const o=TS(t,n),l=Kx(o),c=o.length,u=uv(o),d=tv("float32",l),h=tv("float32",l),p=CS(t,o),f=CS(n,o),m=GT(r,a),g=GT(i,s),x=t.length,v=uv(t),y=n.length,b=uv(n);if(p.length+f.length===0)for(let w=0;w<d.length;w++){const t=w%m.length,n=w%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);d[w]=r.real,h[w]=r.imag}else for(let w=0;w<d.length;w++){const t=vv(w,c,u),n=t.slice(-x);p.forEach(e=>n[e]=0);const r=xv(n,x,v),a=t.slice(-y);f.forEach(e=>a[e]=0);const i=xv(a,y,b),s=e(m[2*r],m[2*r+1],g[2*i],g[2*i+1]);d[w]=s.real,h[w]=s.imag}return[d,h,o]}}const vz=$L((e,t)=>e+t),yz=xz((e,t,n,r)=>({real:e+n,imag:t+r})),bz=gz(Ov,vz,yz),wz={kernelName:Ov,backendName:"cpu",kernelFunc:bz};function kz(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=Kx(a.shape),o=Jx(i,s),l=Kx(o);Vx(s===l,()=>"The new shape (".concat(o,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."),n.incRef(a.dataId);const c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=o,t.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}const Nz={kernelName:zb,backendName:"cpu",kernelFunc:kz};function Sz(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:s,transposeB:o}=r;LL([a,i],"matMul");const l=a.shape.length,c=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],d=o?i.shape[c-1]:i.shape[c-2],h=s?a.shape[l-1]:a.shape[l-2],p=o?i.shape[c-2]:i.shape[c-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=Kx(f),x=Kx(m),v=TS(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);Vx(u===d,()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(s)+" and transposeB=".concat(o," must match."));const y=o?[x,p,d]:[x,d,p],b=kz({inputs:{x:a},backend:n,attrs:{shape:s?[g,u,h]:[g,h,u]}}),w=kz({inputs:{x:i},backend:n,attrs:{shape:y}}),k=s?b.shape[1]:b.shape[2],N=s?b.shape[2]:b.shape[1],S=o?w.shape[1]:w.shape[2],j=Math.max(g,x),C=n.data.get(b.dataId).values,E=n.data.get(w.dataId).values,T=uv(b.shape),I=uv(w.shape),[A,O,_]=s?[T[0],1,T[1]]:[T[0],T[1],1],[R,P,M]=o?[1,I[1],I[0]]:[I[1],1,I[0]],D=N*S,F=tS([j,N,S],b.dtype),L=F.values,z=n.blockSize;for(let B=0;B<j;B++){const e=B%g,t=B%x;for(let n=0;n<N;n+=z){const r=Math.min(n+z,N);for(let a=0;a<S;a+=z){const i=Math.min(a+z,S);for(let s=0;s<k;s+=z){const o=Math.min(s+z,k);for(let l=n;l<r;l++)for(let n=a;n<i;n++){let r=0;for(let a=s;a<o;a++){r+=C[e*A+l*O+a*_]*E[a*R+n*P+t*M]}L[B*D+(l*S+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,F.dtype,F.values)}const jz={kernelName:Kv,backendName:"cpu",kernelFunc:Sz};const Cz={kernelName:Dw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,p,f;const m=[];h=Sz({inputs:{a:a,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),s&&(p=bz({inputs:{a:h,b:s},backend:n}),m.push(h),h=p),u&&(f=oz(n,h,u,o,d),m.push(h),h=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}};function Ez(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const Tz={kernelName:Tv,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;LL(t,"abs");let r=new Float32Array(Kx(t.shape));return r=Ez(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},Iz=WL(Iv,e=>Math.acos(e)),Az={kernelName:Iv,backendName:"cpu",kernelFunc:Iz},Oz=WL(Av,e=>Math.acosh(e)),_z={kernelName:Av,backendName:"cpu",kernelFunc:Oz};const Rz={kernelName:_v,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;LL(t,"addN");const a=r.map(e=>n.data.get(e.dataId).values),i=tS(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){const e=a[o];for(let t=0;t<s.length;t++)s[t]+=e[t]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function Pz(e,t,n,r,a){const i=t.length,s=Kx(t),o=uv(t),l=uv(a),c=tv(n,Kx(a));for(let u=0;u<s;++u){const t=vv(u,i,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[xv(n,i,l)]=e[u]}return c}function Mz(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:i}=n;LL(a,"transpose");const s=a.shape.length,o=new Array(s);for(let c=0;c<o.length;c++)o[c]=a.shape[i[c]];const l=Pz(r.data.get(a.dataId).values,a.shape,a.dtype,i,o);return{dataId:r.write(l,o,a.dtype),shape:o,dtype:a.dtype}}const Dz={kernelName:Tw,backendName:"cpu",kernelFunc:Mz};const Fz={kernelName:Rv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;LL(a,"all");const o=Zx(i,a.shape);let l=o;const c=xC(l,a.shape.length);let u=a;null!=c&&(u=Mz({inputs:{x:a},backend:n,attrs:{perm:c}}),l=yC(l.length,a.shape.length)),gC("all",l,u.shape.length);const[d,h]=fC(u.shape,l),p=Kx(h),f=fv(Kx(d),u.dtype),m=n.data.get(u.dataId).values;for(let x=0;x<f.length;++x){const e=x*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[x]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(s){const e=kz({inputs:{x:g},backend:n,attrs:{shape:mC(d,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const Lz={kernelName:Pv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;LL(a,"any");const o=Zx(i,a.shape);let l=o;const c=xC(l,a.shape.length);let u=a;null!=c&&(u=Mz({inputs:{x:a},backend:n,attrs:{perm:c}}),l=yC(l.length,a.shape.length)),gC("any",l,u.shape.length);const[d,h]=fC(u.shape,l),p=Kx(h),f=fv(Kx(d),u.dtype),m=n.data.get(u.dataId).values;for(let x=0;x<f.length;++x){const e=x*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[x]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(s){const e=kz({inputs:{x:g},backend:n,attrs:{shape:mC(d,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const zz={kernelName:Mv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;LL(a,"argMax");let s=Zx(i,a.shape);const o=xC(s,a.shape.length);let l=a;const c=[];null!=o&&(l=Mz({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=yC(s.length,l.shape.length)),s=[s[0]],gC("argMax",s,l.shape.length);const[u,d]=fC(l.shape,s),h=fv(Kx(u),"int32"),p=Kx(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const a=f[e+r];a>t&&(t=a,n=r)}h[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",h)}};const Bz={kernelName:Dv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;LL(a,"argMin");let s=Zx(i,a.shape);const o=xC(s,a.shape.length);let l=a;const c=[];null!=o&&(l=Mz({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=yC(s.length,l.shape.length)),s=[s[0]],gC("argMin",s,l.shape.length);const[u,d]=fC(l.shape,s),h=fv(Kx(u),"int32"),p=Kx(d),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const a=f[e+r];a<t&&(t=a,n=r)}h[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",h)}},Uz=WL(Fv,e=>Math.asin(e)),Wz={kernelName:Fv,backendName:"cpu",kernelFunc:Uz},Vz=WL(Lv,e=>Math.asinh(e)),Hz={kernelName:Lv,backendName:"cpu",kernelFunc:Vz},Gz=WL(zv,e=>Math.atan(e)),Kz={kernelName:zv,backendName:"cpu",kernelFunc:Gz},qz=$L((e,t)=>Math.atan2(e,t)),Xz=gz(Uv,qz),Yz={kernelName:Uv,backendName:"cpu",kernelFunc:Xz},$z=WL(Bv,e=>Math.atanh(e)),Qz={kernelName:Bv,backendName:"cpu",kernelFunc:$z};function Jz(e,t,n,r,a,i){const s=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,u=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,f="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=tS(a.outShape,n),g=m.values,x=a.outShape[1]*a.outShape[2]*a.outShape[3],v=a.outShape[2]*a.outShape[3],y=a.outShape[3];for(let b=0;b<a.batchSize;++b){const t=b*x,n=b*r[0];for(let m=0;m<a.inChannels;++m)for(let x=0;x<a.outHeight;++x){const b=x*s-h,w=Math.max(0,b),k=Math.min(a.inHeight,u+b),N=t+x*v;for(let t=0;t<a.outWidth;++t){const s=t*o-p,u=Math.max(0,s),h=Math.min(a.inWidth,d+s);let x=f,v=0,b=0;for(let t=w;t<k;t+=l){const a=n+t*r[1];for(let t=u;t<h;t+=c){const n=e[a+t*r[2]+m];"max"===i&&n>x?x=n:"avg"===i&&(v+=n,b++)}if(isNaN(x))break}g[N+t*y+m]="avg"===i?v/b:x}}}return m}function Zz(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=tS(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=tS(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*o-p;let x=n;for(;x<0;)x+=c;const v=Math.min(r.inHeight,d+n);for(let o=0;o<r.outWidth;++o){const d=o*l-f;let p=d;for(;p<0;)p+=u;const y=Math.min(r.inWidth,h+d);let b=Number.NEGATIVE_INFINITY,w=-1;for(let t=x;t<v;t+=c){const s=t-n;for(let n=p;n<y;n+=u){const o=n-d,l=m.get(g,t,n,e);l>b&&(b=l,w=a?i?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:s*h+o)}}s.set(w,g,t,o,e)}}return s}function eB(e,t,n,r,a,i){const s=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,u=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,x=a.padInfo.left,v="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=tS(a.outShape,n),b=y.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],N=a.outShape[3]*a.outShape[4],S=a.outShape[4];for(let j=0;j<a.batchSize;++j){const t=j*w,n=j*r[0];for(let y=0;y<a.inChannels;++y)for(let w=0;w<a.outDepth;++w){const j=w*s-m;let C=j;for(;C<0;)C+=c;const E=Math.min(a.inDepth,h+j),T=t+w*k;for(let t=0;t<a.outHeight;++t){const s=t*o-g;let h=s;for(;h<0;)h+=u;const m=Math.min(a.inHeight,p+s),w=T+t*N;for(let t=0;t<a.outWidth;++t){const s=t*l-x;let o=s;for(;o<0;)o+=d;const p=Math.min(a.inWidth,f+s),g=w+t*S;let k=v,N=0,j=0;for(let t=C;t<E;t+=c){const a=n+t*r[1];for(let t=h;t<m;t+=u){const n=a+t*r[2];for(let t=o;t<p;t+=d){const a=e[n+t*r[3]+y];if("max"===i&&a>k?k=a:"avg"===i&&(N+=a,j++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}b[g+y]="avg"===i?N/Math.max(j,1):k}}}}return y}const tB={kernelName:Wv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;LL(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;Vx(kj(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=hj(a.shape,i,s,1,o,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&qx(c.inShape,c.outShape))u=KL({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=uv(a.shape),r=Jz(e,a.shape,a.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,a.dtype,r.values)}return u}};const nB={kernelName:Hv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;LL(a,"avgPool3d");const u=pj(a.shape,i,s,1,o,l,c),d=eB(n.data.get(a.dataId).values,a.shape,a.dtype,uv(a.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const rB={kernelName:Gv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;LL([a,i],"avgPool3DGrad");const u=pj(i.shape,s,o,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,x=u.dilationDepth,v=u.dilationHeight,y=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,k=u.effectiveFilterWidth,N=b-1-u.padInfo.front,S=k-1-u.padInfo.left,j=w-1-u.padInfo.top,C=tS(i.shape,"float32"),E=1/(f*m*g),T=n.bufferSync(a);for(let I=0;I<u.batchSize;++I)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const a=t-N,i=n-j,s=r-S;let o=0;for(let t=0;t<b;t+=x){const n=(a+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(i+t)/h;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=y){const a=(s+t)/p;if(a<0||a>=u.outWidth||Math.floor(a)!==a)continue;o+=T.get(I,n,r,a,e)}}}C.set(o*E,I,t,n,r,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const aB={kernelName:Vv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;LL([a,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=hj(s.shape,o,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,x=u.effectiveFilterHeight,v=u.effectiveFilterWidth,y=v-1-u.padInfo.left,b=x-1-u.padInfo.top,w=tS(s.shape,"float32"),k=1/(p*f),N=n.data.get(a.dataId).values,S=tS(a.shape,"float32",N);for(let j=0;j<u.batchSize;++j)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-b,a=n-y;let i=0;for(let t=0;t<x;t+=m){const n=(r+t)/d;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const r=(a+t)/h;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;i+=S.get(j,n,r,e)}}w.set(i*k,j,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const iB={kernelName:Ly,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,scale:i,offset:s,mean:o,variance:l}=t;Vx(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Vx(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Vx(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),LL([a,o,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=s?n.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,x=p.length,v=h.length,y=d.length;let b=0,w=0,k=0,N=0;for(let S=0;S<u.length;++S)m[S]=f[b++]+(u[S]-d[w++])*p[k++]/Math.sqrt(h[N++]+c),b>=g&&(b=0),w>=y&&(w=0),k>=x&&(k=0),N>=v&&(N=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function sB(e,t,n,r,a){const i=rj(r,t,n),s=Kx(n),o=uv(r);if(i){const n=aj(t,o);return"string"===a?e.slice(n,n+s):e.subarray(n,n+s)}const l=tS(r,a,"string"===a?jI(e):e),c=tS(n,a);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map((e,n)=>e+t[n]);c.set(l.get(...n),...e)}return"string"===a?CI(c.values):c.values}function oB(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r;LL(a,"slice");const[o,l]=ij(a,i,s);GS(a,o,l);const c=sB(n.data.get(a.dataId).values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const lB={kernelName:Zb,backendName:"cpu",kernelFunc:oB};const cB={kernelName:qv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;LL([a],"batchToSpaceND");const o=i.reduce((e,t)=>e*t),l=TT(a.shape,i,o),c=IT(l.length,i.length),u=AT(a.shape,i,o),d=OT(s,i.length),h=_T(u,s,i.length),p=kz({inputs:{x:a},backend:n,attrs:{shape:l}}),f=Mz({inputs:{x:p},backend:n,attrs:{perm:c}}),m=kz({inputs:{x:f},backend:n,attrs:{shape:u}}),g=oB({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function uB(e,t,n,r,a){const i=Kx(r),s=fv(a,n);for(let o=0;o<e.length;o++){const n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(s[n]+=i>0?t[o]:1)}return s}function dB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=e.shape[0],i=e.shape[1],s=tS([a,n],t.dtype);for(let o=0;o<a;o++)for(let a=0;a<i;a++){const i=e.get(o,a);if(i<0)throw new Error("Input x must be non-negative!");i>=n||(r?s.set(1,o,i):t.size>0?s.set(s.get(o,i)+t.get(o,a),o,i):s.set(s.get(o,i)+1,o,i))}return s}const hB={kernelName:Xv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=uB(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,o)}},pB=$L((e,t)=>e&t),fB={kernelName:Yv,backendName:"cpu",kernelFunc:gz(Yv,pB)};const mB={kernelName:$v,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=TS(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},gB=UL(e=>Math.ceil(e)),xB=VL(Jv,gB),vB={kernelName:Jv,backendName:"cpu",kernelFunc:xB},yB=WL(Zv,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),bB={kernelName:Zv,backendName:"cpu",kernelFunc:yB},wB={kernelName:ty,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(Kx(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<o.length;c++){const e=o[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function kB(e,t,n,r){const a=nv(n,Kx(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=Kx(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const i="string"===n?jI(e.vals):e.vals;let s=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=i[s++]}r+=e.shape[1]})}return a}function NB(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const SB={kernelName:Gy,backendName:"cpu",kernelFunc:NB};function jB(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=Zx(a,t[0].shape)[0],s=t.map(e=>e.shape);vT(s,i);let o=yT(t.map(e=>e.shape),i);if(0===Kx(o))return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(e=>Kx(e.shape)>0);if(1===l.length)return KL({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){const e=l.map(e=>dz({inputs:{input:e},backend:n})),t=l.map(e=>NB({inputs:{input:e},backend:n})),r=jB({inputs:e,backend:n,attrs:{axis:i}}),a=jB({inputs:t,backend:n,attrs:{axis:i}}),s=lz({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),s}const c=l.map(e=>{const t=Kx(e.shape.slice(i));return kz({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),u=c.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));o=yT(c.map(e=>e.shape),1);const d=1===c[0].shape[0],h=kB(u,o,t[0].dtype,d),p=yT(l.map(e=>e.shape),i),f=n.makeTensorInfo(p,t[0].dtype,h);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}const CB={kernelName:ny,backendName:"cpu",kernelFunc:jB};function EB(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;LL([a,i],"conv2d");const d=Sj(l),h=fj(a.shape,i.shape,s,c,o,u,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,x=h.padInfo.left,v=h.padInfo.top,y="channelsLast"===h.dataFormat,b=new jk(h.outShape,a.dtype),w=uv(a.shape),k=uv(i.shape),N=w[0],S=y?w[1]:w[2],j=y?w[2]:1,C=y?1:w[1],E=b.strides[0],T=y?b.strides[1]:b.strides[2],I=y?b.strides[2]:1,A=y?1:b.strides[1],O=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,R=b.values;for(let P=0;P<h.batchSize;++P){const e=P*N,t=P*E;for(let n=0;n<h.outHeight;++n){const r=t+n*T,a=n*h.strideHeight-v;for(let t=0;t<p;++t){const n=a+t*m;if(n<0||n>=h.inHeight)continue;const i=t*k[0],s=e+n*S;for(let e=0;e<h.outWidth;++e){const t=r+e*I,n=e*h.strideWidth-x;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=h.inWidth)continue;const a=s+r*j;let o=i+e*k[1];for(let e=0;e<h.inChannels;++e){const n=O[a+e*C];for(let e=0;e<h.outChannels;++e)R[t+e*A]+=n*_[o+e];o+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,R)}const TB={kernelName:ry,backendName:"cpu",kernelFunc:EB};const IB={kernelName:ay,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;LL([a,i],"conv2dBackpropFilter");const d=Sj(l),h=fj(a.shape,u,s,1,o,c,!1,d),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,x="channelsLast"===h.dataFormat,v=new jk(h.filterShape,"float32"),y=h.padInfo.left,b=h.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,N=new jk(a.shape,a.dtype,w),S=new jk(i.shape,i.dtype,k);for(let j=0;j<m;++j){const e=Math.max(0,Math.ceil((b-j)/p)),t=Math.min(h.outHeight,(h.inHeight+b-j)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/f)),a=Math.min(h.outWidth,(h.inWidth+y-n)/f);for(let i=0;i<h.inChannels;++i)for(let s=0;s<h.outChannels;++s){let o=0;for(let l=0;l<h.batchSize;++l)for(let c=e;c<t;++c){const e=j+c*p-b;for(let t=r;t<a;++t){const r=n+t*f-y;o+=x?N.get(l,e,r,i)*S.get(l,c,t,s):N.get(l,i,e,r)*S.get(l,s,c,t)}}v.set(o,j,n,i,s)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const AB={kernelName:iy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;LL([a,i],"conv2dBackpropInput");const d=uv(i.shape),h=uv(a.shape);let p=Sj(c);const f=fj(s,i.shape,o,1,l,u,!1,p),m=new jk(f.inShape,"float32"),g=m.values,x=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,[y,b,w]=d,{batchSize:k,filterHeight:N,filterWidth:S,inChannels:j,inHeight:C,inWidth:E,outChannels:T,outHeight:I,outWidth:A,strideHeight:O,strideWidth:_}=f;p=f.dataFormat;const R=N-1-f.padInfo.top,P=S-1-f.padInfo.left,M="channelsLast"===p,D=m.strides[0],F=M?m.strides[1]:m.strides[2],L=M?m.strides[2]:1,z=M?1:m.strides[1],B=h[0],U=M?h[1]:h[2],W=M?h[2]:1,V=M?1:h[1];for(let H=0;H<k;++H)for(let e=0;e<j;++e)for(let t=0;t<C;++t){const n=t-R,r=Math.max(0,Math.ceil(n/O)),a=Math.min(I,(N+n)/O);for(let i=0;i<E;++i){const s=i-P,o=Math.max(0,Math.ceil(s/_)),l=Math.min(A,(S+s)/_);let c=0;for(let t=r;t<a;++t){const r=t*O-n;for(let n=o;n<l;++n){const a=B*H+U*t+W*n,i=y*(N-1-r)+b*(S-1-(n*_-s))+w*e;for(let e=0;e<T;++e){c+=x[a+V*e]*v[i+e]}}}g[D*H+F*t+L*i+z*e]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const OB={kernelName:sy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;LL([a,i],"conv3d");const c=mj(a.shape,i.shape,s,l,o),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,x=g.front,v=g.left,y=g.top,b=new jk(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,N=b.values,S=uv(a.shape),j=uv(i.shape);for(let C=0;C<c.batchSize;++C){const e=C*S[0],t=C*b.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*b.strides[1],a=n*c.strideDepth-x;for(let t=0;t<u;++t){const n=a+t*p;if(n<0||n>=c.inDepth)continue;const i=t*j[0],s=e+n*S[1];for(let e=0;e<c.outHeight;++e){const t=r+e*b.strides[2],n=e*c.strideHeight-y;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=c.inHeight)continue;const a=i+e*j[1],o=s+r*S[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-v;for(let e=0;e<h;++e){const t=r+e*m;if(t<0||t>=c.inWidth)continue;const i=a+e*j[2],s=o+t*c.inChannels;let l=i;for(let e=0;e<c.inChannels;++e){const t=w[s+e];for(let e=0;e<c.outChannels;++e)N[n+e]+=t*k[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const _B={kernelName:oy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;LL([a,i],"conv3dBackpropFilterV2");const c=uv(a.shape),u=uv(i.shape),d=mj(a.shape,l,s,1,o),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,x=d.filterWidth,v=new jk(d.filterShape,"float32"),y=v.values,[b,w,k,N]=v.strides,S=n.data.get(i.dataId).values,[j,C,E,T]=u,I=n.data.get(a.dataId).values,[A,O,_,R]=c,P=d.padInfo.front,M=d.padInfo.left,D=d.padInfo.top;for(let F=0;F<m;++F){const e=Math.max(0,Math.ceil((P-F)/h)),t=Math.min(d.outDepth,(d.inDepth+P-F)/h),n=F*b;for(let r=0;r<g;++r){const a=Math.max(0,Math.ceil((D-r)/p)),i=Math.min(d.outHeight,(d.inHeight+D-r)/p),s=r*w+n;for(let n=0;n<x;++n){const o=Math.max(0,Math.ceil((M-n)/f)),l=Math.min(d.outWidth,(d.inWidth+M-n)/f),c=n*k+s;for(let s=0;s<d.inChannels;++s){const u=s*N+c;for(let c=0;c<d.outChannels;++c){let m=0;for(let u=0;u<d.batchSize;++u){const d=u*A,g=u*j;for(let u=e;u<t;++u){const e=(F+u*h-P)*O+d,t=u*C+g;for(let u=a;u<i;++u){const a=(r+u*p-D)*_+e,i=u*E+t;for(let e=o;e<l;++e){const t=e*T+i;m+=I[(n+e*f-M)*R+a+s]*S[t+c]}}}}y[u+c]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const RB={kernelName:ly,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;LL([a],"conv3dBackpropInputV2");const c=uv(a.shape),u=uv(i.shape),d=mj(l,i.shape,o,1,s),h=new jk(d.inShape,"float32"),p=h.values,[f,m,g,x]=h.strides,v=n.data.get(a.dataId).values,[y,b,w,k]=c,N=n.data.get(i.dataId).values,[S,j,C,E]=u,{batchSize:T,filterDepth:I,filterHeight:A,filterWidth:O,inChannels:_,inDepth:R,inHeight:P,inWidth:M,outChannels:D,outDepth:F,outHeight:L,outWidth:z,strideDepth:B,strideHeight:U,strideWidth:W}=d,V=I-1-d.padInfo.front,H=A-1-d.padInfo.top,G=O-1-d.padInfo.left;for(let K=0;K<T;++K)for(let e=0;e<_;++e)for(let t=0;t<R;++t){const n=t-V,r=Math.max(0,Math.ceil(n/B)),a=Math.min(F,(I+n)/B);for(let i=0;i<P;++i){const s=i-H,o=Math.max(0,Math.ceil(s/U)),l=Math.min(L,(A+s)/U);for(let c=0;c<M;++c){const u=c-G,d=Math.max(0,Math.ceil(u/W)),h=Math.min(z,(O+u)/W);let T=0;for(let t=r;t<a;++t){const r=t*B-n;for(let n=o;n<l;++n){const a=n*U-s;for(let i=d;i<h;++i){const s=y*K+b*t+w*n+k*i,o=S*(I-1-r)+j*(A-1-a)+C*(O-1-(i*W-u))+E*e;for(let e=0;e<D;++e){T+=v[s+e]*N[o+e]}}}}p[f*K+m*t+g*i+x*c+e]=T}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},PB=WL(cy,e=>Math.cos(e)),MB={kernelName:cy,backendName:"cpu",kernelFunc:PB},DB=WL(uy,e=>Math.cosh(e)),FB={kernelName:uy,backendName:"cpu",kernelFunc:DB};const LB={kernelName:py,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,[u,d,h,p]=a.shape,f=i.shape[0],[m,g]=o,x=tS([f,m,g,p],"float32"),v=n.data.get(i.dataId).values,y=n.data.get(s.dataId).values,b=n.data.get(a.dataId).values,w=uv(a.shape),k=uv(x.shape);for(let N=0;N<f;N++){const e=4*N,t=v[e],n=v[e+1],r=v[e+2],a=v[e+3],i=y[N];if(i>=u)continue;const s=m>1?(r-t)*(d-1)/(m-1):0,o=g>1?(a-n)*(h-1)/(g-1):0;for(let u=0;u<m;u++){const e=m>1?t*(d-1)+u*s:.5*(t+r)*(d-1);if(e<0||e>d-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+N*k[0];x.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),s=e-t;for(let e=0;e<g;e++){const l=g>1?n*(h-1)+e*o:.5*(n+a)*(h-1);if(l<0||l>h-1){for(let t=0;t<p;t++){const n=t+e*k[2]+u*k[1]+N*k[0];x.values[n]=c}continue}const d=Math.floor(l),f=Math.ceil(l),m=l-d;for(let n=0;n<p;n++){let a=n+d*w[2]+t*w[1]+i*w[0];const o=b[a];a=n+f*w[2]+t*w[1]+i*w[0];const l=b[a];a=n+d*w[2]+r*w[1]+i*w[0];const c=b[a];a=n+f*w[2]+r*w[1]+i*w[0];const h=o+(l-o)*m,p=c+(b[a]-c)*m;a=n+e*k[2]+u*k[1]+N*k[0],x.values[a]=h+(p-h)*s}}}else for(let t=0;t<g;++t){const r=g>1?n*(h-1)+t*o:.5*(n+a)*(h-1);if(r<0||r>h-1){for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+N*k[0];x.values[n]=c}continue}const s=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+s*w[2]+l*w[1]+i*w[0],r=e+t*k[2]+u*k[1]+N*k[0];x.values[r]=b[n]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const zB={kernelName:dy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;LL(a,"cumprod");const l=xC([i],a.shape.length);let c=a;null!=l&&(c=Mz({inputs:{x:a},backend:n,attrs:{perm:l}}));const u=yC(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=Lk(c.dtype,"int32"),h=pv(Kx(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let x=0;x<p.length;x+=f)for(let e=0;e<f;e++){const t=m(x,e);if(0===e)h[t]=s?1:p[t];else{const n=m(x,e-1);h[t]=s?p[n]*h[n]:p[t]*h[n]}}const g=n.makeTensorInfo(c.shape,d,h);if(null!=l){const e=Mz({inputs:{x:g},backend:n,attrs:{perm:vC(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const BB={kernelName:hy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;LL(a,"cumsum");const l=xC([i],a.shape.length);let c=a;null!=l&&(c=Mz({inputs:{x:a},backend:n,attrs:{perm:l}}));const u=yC(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=Lk(c.dtype,"int32"),h=fv(Kx(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let x=0;x<p.length;x+=f)for(let e=0;e<f;e++){const t=m(x,e);if(0===e)h[t]=s?0:p[t];else{const n=m(x,e-1);h[t]=s?p[n]+h[n]:p[t]+h[n]}}const g=n.makeTensorInfo(c.shape,d,h);if(null!=l){const e=Mz({inputs:{x:g},backend:n,attrs:{perm:vC(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const UB={kernelName:fy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(1===a.shape.length){const e=uB(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,e)}if(2===a.shape.length){const e=dB(n.bufferSync(a),n.bufferSync(i),s,o);return n.makeTensorInfo(e.shape,i.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};const WB={kernelName:my,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r;Vx("NHWC"===s,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s));const o=a.shape[0],l=a.shape[1],c=a.shape[2],u=a.shape[3],d=l*i,h=c*i,p=u/(i*i),f=n.data.get(a.dataId).values,m=new Float32Array(o*d*h*p);let g=0;for(let x=0;x<o;++x)for(let e=0;e<d;++e){const t=Math.floor(e/i),n=e%i;for(let e=0;e<h;++e){const r=Math.floor(e/i),a=(n*i+e%i)*p;for(let e=0;e<p;++e){const n=e+a+u*(r+c*(t+l*x));m[g++]=f[n]}}}return n.makeTensorInfo([o,d,h,p],a.dtype,m)}};function VB(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;LL([a,i],"depthwiseConv2DNative");const u=uv(a.shape),d=uv(i.shape);let h=l;null==h&&(h=[1,1]),Vx(kj(s,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(h,"'"));const p=fj(a.shape,i.shape,s,h,o,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:x,padInfo:v}=p,y=v.left,b=v.top,w=p.outChannels/p.inChannels,k=new jk(p.outShape,a.dtype),N=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,j=k.values;for(let C=0;C<p.batchSize;++C){const e=C*u[0],t=C*k.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*k.strides[1],a=n*p.strideHeight-b;for(let t=0;t<f;++t){const n=a+t*g;if(n<0||n>=p.inHeight)continue;const i=t*d[0],s=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=r+e*k.strides[2],n=e*p.strideWidth-y;for(let e=0;e<m;++e){const r=n+e*x;if(r<0||r>=p.inWidth)continue;const a=i+e*d[1],o=s+r*p.inChannels;let l=t,c=a;for(let e=0;e<p.inChannels;++e){const t=N[o+e];for(let e=0;e<w;++e)j[l+e]+=t*S[c+e];l+=w,c+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const HB={kernelName:gy,backendName:"cpu",kernelFunc:VB};const GB={kernelName:xy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;LL([a,i],"depthwiseConv2dNativeBackpropFilter");const d=fj(a.shape,u,s,o,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=d,g=new jk(d.filterShape,"float32"),x=d.padInfo.left,v=d.padInfo.top,y=d.outChannels/d.inChannels,b=n.data.get(a.dataId).values,w=new jk(a.shape,a.dtype,b),k=n.data.get(i.dataId).values,N=new jk(i.shape,i.dtype,k);for(let S=0;S<f;++S){const e=Math.max(0,Math.ceil((v-S)/h)),t=Math.min(d.outHeight,(d.inHeight+v-S)/h);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((x-n)/p)),a=Math.min(d.outWidth,(d.inWidth+x-n)/p);for(let i=0;i<d.outChannels;++i){const s=Math.trunc(i/y),o=i%y;let l=0;for(let c=0;c<d.batchSize;++c)for(let o=e;o<t;++o){const e=S+o*h-v;for(let t=r;t<a;++t){const r=n+t*p-x;l+=w.get(c,e,r,s)*N.get(c,o,t,i)}}g.set(l,S,n,s,o)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const KB={kernelName:vy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;LL([a,i],"depthwiseConv2DNativeBackpropInput");const d=uv(a.shape),h=uv(i.shape),p=fj(u,i.shape,s,o,l,c,!0),f=new jk(p.inShape,"float32"),m=f.values,[g,x,v]=f.strides,y=n.data.get(a.dataId).values,[b,w,k]=d,N=n.data.get(i.dataId).values,[S,j,C]=h,{batchSize:E,filterHeight:T,filterWidth:I,inChannels:A,inHeight:O,inWidth:_,outChannels:R,outHeight:P,outWidth:M,strideHeight:D,strideWidth:F}=p,L=T-1-p.padInfo.top,z=I-1-p.padInfo.left,B=R/A;for(let U=0;U<E;++U)for(let e=0;e<A;++e)for(let t=0;t<O;++t){const n=t-L,r=Math.max(0,Math.ceil(n/D)),a=Math.min(P,(T+n)/D);for(let i=0;i<_;++i){const s=i-z,o=Math.max(0,Math.ceil(s/F)),l=Math.min(M,(I+s)/F);let c=0;for(let t=r;t<a;++t){const r=t*D-n;for(let n=o;n<l;++n){const a=b*U+w*t+k*n,i=S*(T-1-r)+j*(I-1-(n*F-s))+C*e;for(let t=0;t<B;++t){c+=y[a+(e*B+t)]*N[i+t]}}}m[g*U+x*t+v*i+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const qB={kernelName:yy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=Kx(r.shape),i=n.data.get(r.dataId).values,s=tS([a,a],r.dtype),o=s.values;for(let c=0;c<i.length;c++)o[c*a+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}},XB={kernelName:by,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=n,u=c.data.get(a.dataId).values,d=a.shape.length,h=c.data.get(i.dataId).values,p=i.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:x,outHeight:v,outWidth:y,padInfo:b,strideHeight:w,strideWidth:k,filterHeight:N,filterWidth:S,dilationHeight:j,dilationWidth:C,outShape:E}=dj(a.shape,i.shape,s,o,"NHWC",l),T=Kx(E),I=E.length,A=nv(a.dtype,T);for(let O=0;O<f;++O)for(let e=0;e<v;++e){const t=e*w-b.top;for(let n=0;n<y;++n){const r=n*k-b.left;for(let s=0;s<x;++s){let o=Number.MIN_SAFE_INTEGER;for(let e=0;e<N;++e){const n=t+e*j;if(n>=0&&n<m)for(let t=0;t<S;++t){const l=r+t*C;if(l>=0&&l<g){const r=xv([O,n,l,s],d,uv(a.shape)),c=xv([e,t,s],p,uv(i.shape)),f=u[r]+h[c];f>o&&(o=f)}}}A[xv([O,e,n,s],I,uv(E))]=o}}}return{dataId:c.write(dk(A,a.dtype),E,a.dtype),shape:E,dtype:a.dtype}}},YB={kernelName:ky,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r,u=n,d=hv(a.shape,u.data.get(a.dataId).values),h=hv(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:x,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:N,dilationHeight:S,dilationWidth:j,outShape:C}=dj(a.shape,i.shape,o,l,"NHWC",c);Vx(s.rank===C.length,()=>"Error in ".concat(ky,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(s.rank));const E=hv(C,u.data.get(s.dataId).values),T=mv(i.shape,i.dtype);for(let I=0;I<p;++I)for(let e=0;e<x;++e){const t=e*b-y.top;for(let n=0;n<v;++n){const r=n*w-y.left;for(let a=0;a<g;++a){let i=Number.MIN_SAFE_INTEGER,s=0,o=0;for(let e=0;e<k;++e){const n=t+e*S;if(n>=0&&n<f)for(let t=0;t<N;++t){const l=r+t*j;if(l>=0&&l<m){const r=d[I][n][l][a]+h[e][t][a];r>i&&(i=r,s=e,o=t)}}}T[s][o][a]+=E[I][e][n][a]}}}return{dataId:u.write(dk(T,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},$B={kernelName:wy,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r,u=n,d=hv(a.shape,u.data.get(a.dataId).values),h=hv(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:x,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:N,dilationHeight:S,dilationWidth:j,outShape:C}=dj(a.shape,i.shape,o,l,"NHWC",c);Vx(s.rank===C.length,()=>"Error in ".concat(wy,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(s.rank));const E=hv(C,u.data.get(s.dataId).values),T=mv(a.shape,a.dtype);for(let I=0;I<p;++I)for(let e=0;e<x;++e){const t=e*b-y.top;for(let n=0;n<v;++n){const r=n*w-y.left;for(let a=0;a<g;++a){let i=Number.MIN_SAFE_INTEGER,s=t<0?0:t,o=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*S;if(n>=0&&n<f)for(let t=0;t<N;++t){const l=r+t*j;if(l>=0&&l<m){const r=d[I][n][l][a]+h[e][t][a];r>i&&(i=r,s=n,o=l)}}}T[I][s][o][a]+=E[I][e][n][a]}}}return{dataId:u.write(dk(T,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};const QB={kernelName:Ny,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===o||void 0===o?void 0:o.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(o.contextType," is not supported by the CPU backend."));const d=i.getContext(u,(null===o||void 0===o?void 0:o.contextAttributes)||{});if(null==d)throw new Error("Could not get the context with ".concat(u," type."));const[h,p]=a.shape.slice(0,2),f=2===a.shape.length?1:a.shape[2],m=n.data.get(a.dataId).values,g="float32"===a.dtype?255:1,x=new Uint8ClampedArray(p*h*4);for(let y=0;y<h*p;++y){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=m[y*f+n];if("float32"===a.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===a.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*y;x[t+0]=Math.round(e[0]),x[t+1]=Math.round(e[1]),x[t+2]=Math.round(e[2]),x[t+3]=Math.round(e[3])}i.width=p,i.height=h;const v=new ImageData(x,p,h);return d.putImageData(v,0,0),a}},JB=$L((e,t)=>e*t),ZB=xz((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),eU=gz(yb,JB,ZB),tU={kernelName:yb,backendName:"cpu",kernelFunc:eU};function nU(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;let o;LL(a,"sum"),o="bool"===a.dtype?fz({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):KL({inputs:{x:a},backend:n});const l=o.shape.length,c=Zx(i,o.shape),u=xC(c,l);let d=c,h=o;null!=u&&(h=Mz({inputs:{x:o},backend:n,attrs:{perm:u}}),d=yC(d.length,l)),gC("sum",d,h.shape.length);const[p,f]=fC(h.shape,d);let m=uz(n,p,Lk(h.dtype,"int32"));const g=Kx(f),x=n.data.get(m.dataId).values,v=n.data.get(h.dataId).values;for(let y=0;y<x.length;++y){const e=y*g;let t=0;for(let n=0;n<g;++n)t+=v[e+n];x[y]=t}if(s){const e=m;m=kz({inputs:{x:m},backend:n,attrs:{shape:mC(m.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(o),null!=u&&n.disposeIntermediateTensorInfo(h),m}const rU={kernelName:sw,backendName:"cpu",kernelFunc:nU};const aU={kernelName:jy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=rI(a,i.length);iI(s.length,l,i);const{path:c,steps:u}=sI(o,l),d=u.length;let h=null,p=s.length;const f=[];for(let m=0;m<d;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=aI(p,l[e]);let a;oI(t)?a=i[e]:(a=Mz({inputs:{x:i[e]},backend:n,attrs:{perm:t}}),f.push(a));const s=a.shape.slice();for(let e=0;e<r.length;++e)s.splice(r[e],0,1);qx(a.shape,s)||(a=kz({inputs:{x:a},backend:n,attrs:{shape:s}}),f.push(a)),null===h?h=a:(h=eU({inputs:{a:a,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=nU({inputs:{x:h},backend:n,attrs:{axis:c[m]-(s.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}};const iU={kernelName:Ey,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:a}=t;LL([r,a],"eluGrad");const i=new Float32Array(Kx(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){const e=s[l];i[l]=e>=0?o[l]:o[l]*(e+1)}return n.makeTensorInfo(a.shape,"float32",i)}},sU=$L((e,t)=>e===t?1:0),oU=gz(Iy,sU,null,"bool"),lU={kernelName:Iy,backendName:"cpu",kernelFunc:oU},cU=zT,uU=BT,dU=UT,hU=WT,pU=VT,fU=HT,mU=WL(Ty,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+cU*n);return t*(1-((((fU*r+pU)*r+hU)*r+dU)*r+uU)*r*Math.exp(-n*n))}),gU={kernelName:Ty,backendName:"cpu",kernelFunc:mU},xU=UL(e=>Math.exp(e)),vU=VL(Ay,xU,"float32"),yU={kernelName:Ay,backendName:"cpu",kernelFunc:vU};function bU(e){const{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:i}=r,s=a.shape.length,o=a.shape.slice();let l=i;return i<0&&(Vx(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),kz({inputs:{x:a},backend:n,attrs:{shape:o}})}const wU={kernelName:Oy,backendName:"cpu",kernelFunc:bU},kU=UL(e=>Math.expm1(e)),NU=VL(_y,kU),SU={kernelName:_y,backendName:"cpu",kernelFunc:NU},jU=$L((e,t)=>e/t),CU=gz(Sy,jU),EU={kernelName:Sy,backendName:"cpu",kernelFunc:CU},TU=$L((e,t)=>e-t),IU=xz((e,t,n,r)=>({real:e-n,imag:t-r})),AU=gz(kw,TU,IU),OU={kernelName:kw,backendName:"cpu",kernelFunc:AU};function _U(e,t,n){const r=e.shape,a=r[0],i=r[1],s=n.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[a,i],u=Kx(c),d=tv("float32",u),h=tv("float32",u);for(let g=0;g<a;g++){const e=oB({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,i]}}),r=oB({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),a=lz({inputs:{real:e,imag:r},backend:n}),{real:s,imag:c}=RU(a,t,n),u=GT(s,c);for(let t=0;t<i;t++){const e=YT(u,t);d[g*i+t]=e.real,h[g*i+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a)}const p=n.makeTensorInfo(c,"float32",d),f=n.makeTensorInfo(c,"float32",h),m=lz({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function RU(e,t,n){const r=Kx(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((o=r)&o-1)){const a=PU(i,s,r,t,n),o=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(o,"float32",a.real),t=n.makeTensorInfo(o,"float32",a.imag),i=n.makeTensorInfo([],"float32",uk(r,"float32")),s=KL({inputs:{x:i},backend:n}),l=EU.kernelFunc({inputs:{a:e,b:i},backend:n}),c=EU.kernelFunc({inputs:{a:t,b:s},backend:n}),u=n.data.get(l.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:d}}return a}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let a=0;a<t;a++){let i=0,s=0;for(let r=0;r<t;r++){const o=JT(a*r,t,n),l=YT(e,r);i+=l.real*o.real-l.imag*o.imag,s+=l.real*o.imag+l.imag*o.real}n&&(i/=t,s/=t),$T(r,i,s,a)}return r}(GT(i,s),r,t);return KT(e)}var o}function PU(e,t,n,r,a){if(1===n)return{real:e,imag:t};const i=GT(e,t),s=n/2,o=qT(i),l=o.real,c=o.imag,u=[l.length],d=a.makeTensorInfo(u,"float32",l),h=a.makeTensorInfo(u,"float32",c),p=lz({inputs:{real:d,imag:h},backend:a}),f=XT(i),m=f.real,g=f.imag,x=[m.length],v=a.makeTensorInfo(x,"float32",m),y=a.makeTensorInfo(x,"float32",g),b=lz({inputs:{real:v,imag:y},backend:a}),w=PU(l,c,s,r,a),k=w.real,N=w.imag,S=[k.length],j=a.makeTensorInfo(S,"float32",k),C=a.makeTensorInfo(S,"float32",N),E=lz({inputs:{real:j,imag:C},backend:a}),T=PU(m,g,s,r,a),I=T.real,A=T.imag,O=[I.length],_=a.makeTensorInfo(O,"float32",I),R=a.makeTensorInfo(O,"float32",A),P=lz({inputs:{real:_,imag:R},backend:a}),M=QT(n,r),D=[M.real.length],F=a.makeTensorInfo(D,"float32",M.real),L=a.makeTensorInfo(D,"float32",M.imag),z=lz({inputs:{real:F,imag:L},backend:a}),B=eU({inputs:{a:z,b:P},backend:a}),U=bz({inputs:{a:E,b:B},backend:a}),W=AU({inputs:{a:E,b:B},backend:a}),V=dz({inputs:{input:U},backend:a}),H=dz({inputs:{input:W},backend:a}),G=NB({inputs:{input:U},backend:a}),K=NB({inputs:{input:W},backend:a}),q=jB({inputs:[V,H],backend:a,attrs:{axis:0}}),X=jB({inputs:[G,K],backend:a,attrs:{axis:0}}),Y=a.data.get(q.dataId).values,$=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Y,imag:$}}const MU={kernelName:Ry,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=Kx(r.shape),i=r.shape[r.shape.length-1],s=kz({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),o=_U(s,!1,n),l=kz({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}};function DU(e){const{backend:t,attrs:n}=e,{shape:r,value:a,dtype:i}=n,s=i||ov(a),o=nv(s,Kx(r));return function(e,t){e.fill(t)}(o,a),t.makeTensorInfo(r,s,o)}const FU={kernelName:Py,backendName:"cpu",kernelFunc:DU};const LU={kernelName:My,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,i=r,s=tv(a.dtype,Kx(a.shape)),[o,l,c,u]=a.shape,d=i.data.get(a.dataId).values;for(let h=0;h<o;h++){const e=h*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const r=t*u;for(let a=0;a<u;a++){const i=Math.round(c-t-1),o=e+n+r+a;let l=d[o];if(i>=0&&i<c){l=d[e+n+i*u+a]}s[o]=l}}}}return{dataId:i.write(s,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},zU=UL(e=>Math.floor(e)),BU=VL(Dy,zU),UU={kernelName:Dy,backendName:"cpu",kernelFunc:BU},WU=$L((e,t)=>Math.floor(e/t)),VU=gz(Fy,WU,null,"int32"),HU={kernelName:Fy,backendName:"cpu",kernelFunc:VU};const GU={kernelName:Fw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=EB({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(s){const e=m;if("NCHW"===u&&1===s.shape.length&&1!==s.shape[0]){const e=kz({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=bz({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=bz({inputs:{a:m,b:s},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===u&&"prelu"===p&&1===o.shape.length&&1!==o.shape[0]){const e=kz({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=oz(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=oz(n,m,p,o,f);n.disposeIntermediateTensorInfo(e)}return m}};const KU={kernelName:Lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=VB({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(s){const e=m;m=bz({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=oz(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}};function qU(e,t,n,r,a,i,s,o,l){const c=tS([r,i],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<a;t++){const i=e[u*a+t];r+=i*s[t],n.push(i)}if(r<0||r>=l/i)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(o));for(let e=0;e<i;e++)c.values[u*i+e]=t.get(...t.indexToLoc(r*i+e))}return c}const XU={kernelName:By,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=Kx(r.shape),s=a.shape,o=s[s.length-1],[l,c,u,d]=RT(r,a);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const h=qU(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,c,o,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}};function YU(e,t,n){const r=tS(n,e.dtype);for(let a=0;a<r.size;++a){const n=r.indexToLoc(a).slice(),i=n[0],s=n[2],o=t.locToIndex([i,s]);n[2]=t.values[o];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}const $U={kernelName:zy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r;LL([a,i],"gatherV2");const l=Zx(s,a.shape)[0],c=n.data.get(i.dataId).values,u=a.shape[l];for(let y=0;y<c.length;++y){const e=c[y];Vx(e<=u-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]"))}let d=o;null==o&&(d=0);const h=Kx(i.shape),p=SI(a,i,l,d),f=kz({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=kz({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],x=n.bufferSync(m),v=YU(n.bufferSync(f),x,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},QU=$L((e,t)=>e>t?1:0),JU=gz(Uy,QU,null,"bool"),ZU={kernelName:Uy,backendName:"cpu",kernelFunc:JU},eW=$L((e,t)=>e>=t?1:0),tW=gz(Wy,eW,null,"bool"),nW={kernelName:Wy,backendName:"cpu",kernelFunc:tW};const rW={kernelName:Hy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=Kx(r.shape),i=r.shape[r.shape.length-1],s=kz({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),o=_U(s,!0,n),l=kz({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}},aW=WL(Ky,e=>Number.isFinite(e)?1:0,"bool"),iW={kernelName:Ky,backendName:"cpu",kernelFunc:aW},sW=WL(qy,e=>Math.abs(e)===1/0?1:0,"bool"),oW={kernelName:qy,backendName:"cpu",kernelFunc:sW},lW=WL(Xy,e=>Number.isNaN(e)?1:0,"bool"),cW={kernelName:Xy,backendName:"cpu",kernelFunc:lW},uW=$L((e,t)=>e<t?1:0),dW=gz($y,uW,null,"bool"),hW={kernelName:$y,backendName:"cpu",kernelFunc:dW},pW=$L((e,t)=>e<=t?1:0),fW=gz(Qy,pW,null,"bool"),mW={kernelName:Qy,backendName:"cpu",kernelFunc:fW};function gW(e,t,n){const r=(t-e)/(n-1),a=fv(n,"float32");a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}const xW={kernelName:Jy,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=gW(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}},vW=UL(e=>Math.log(e)),yW=VL(Zy,vW),bW={kernelName:Zy,backendName:"cpu",kernelFunc:yW},wW=WL(eb,e=>Math.log1p(e)),kW={kernelName:eb,backendName:"cpu",kernelFunc:wW},NW=$L((e,t)=>e&&t),SW=gz(tb,NW,null,"bool"),jW={kernelName:tb,backendName:"cpu",kernelFunc:SW},CW=WL(nb,e=>e?0:1,"bool"),EW={kernelName:nb,backendName:"cpu",kernelFunc:CW},TW=$L((e,t)=>e||t),IW=gz(rb,TW,null,"bool"),AW={kernelName:rb,backendName:"cpu",kernelFunc:IW};const OW={kernelName:ab,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;LL(a,"LRN");const c=a.shape[3],u=c-1,d=n.data.get(a.dataId).values,h=Kx(a.shape),p=new Float32Array(h);function f(e){const t=e%c;let n=e-t+Math.max(0,t-i);const r=e-t+Math.min(t+i,u);let a=0;for(;n<=r;n++){const e=d[n];a+=e*e}return a}for(let m=0;m<h;m++){const e=f(m),t=d[m]*Math.pow(s+o*e,-l);p[m]=t}return n.makeTensorInfo(a.shape,a.dtype,p)}};const _W={kernelName:ib,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r;LL(s,"LRNGrad");const d=Kx(s.shape),h=s.shape[3],p=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(d),x=d;for(let v=0;v<x;v++){const e=v%h,t=v-e+Math.max(0,e-o),n=v-e+Math.min(h,e+o+1);let r=0;for(let a=t;a<n;a++)r+=Math.pow(f[a],2);r=c*r+l;for(let a=t;a<n;a++){let e=-2*c*u*f[a]*m[v]/r;v===a&&(e+=Math.pow(r,-u)),e*=p[v],g[a]+=e}}return n.makeTensorInfo(s.shape,a.dtype,g)}};function RW(e,t,n,r){const a=tv(r,Kx(n));for(let i=0;i<a.length;++i){const n=i*t;let r=e[n];for(let a=0;a<t;++a){const t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[i]=r}return a}function PW(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=n;let l=a.shape;const c=l.length,u=Zx(i,l);let d=u;const h=xC(d,c);let p=o.data.get(a.dataId).values;if(null!=h){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[h[t]];p=Pz(p,l,a.dtype,h,e),d=yC(d.length,c),l=e}LL(a,"max"),gC("max",d,c);const[f,m]=fC(l,d),g=RW(p,Kx(m),f,a.dtype),x=o.write(g,f,a.dtype);let v=f;if(s){v=mC(f,u)}return{dataId:x,shape:v,dtype:a.dtype}}const MW={kernelName:sb,backendName:"cpu",kernelFunc:PW},DW=$L((e,t)=>Math.max(e,t)),FW=gz(ob,DW),LW={kernelName:ob,backendName:"cpu",kernelFunc:FW};const zW={kernelName:lb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;LL(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;Vx(kj(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=hj(a.shape,i,s,1,o,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&qx(c.inShape,c.outShape))u=KL({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=uv(a.shape),r=Jz(e,a.shape,a.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,a.dtype,r.values)}return u}};const BW={kernelName:ub,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;LL(a,"maxPool3d");const u=pj(a.shape,i,s,1,o,l,c),d=eB(n.data.get(a.dataId).values,a.shape,a.dtype,uv(a.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const UW={kernelName:db,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;LL([a,i],"maxPool3DGrad");const u=pj(i.shape,s,o,1,l,c),d=function(e,t){const n=tS(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let x=0;x<t.outDepth;++x){const v=x*r-h;let y=v;for(;y<0;)y+=s;const b=Math.min(t.inDepth,c+v);for(let r=0;r<t.outHeight;++r){const c=r*a-p;let h=c;for(;h<0;)h+=o;const w=Math.min(t.inHeight,u+c);for(let a=0;a<t.outWidth;++a){const p=a*i-f;let k=p;for(;k<0;)k+=l;const N=Math.min(t.inWidth,d+p);let S=Number.NEGATIVE_INFINITY,j=-1;for(let t=y;t<b;t+=s){const n=t-v;for(let r=h;r<w;r+=o){const a=r-c;for(let i=k;i<N;i+=l){const s=i-p,o=e.get(m,t,r,i,g);o>=S&&(S=o,j=n*u*d+a*u+s)}}}n.set(j,m,x,r,a,g)}}}return n}(n.bufferSync(i),u),h=u.strideDepth,p=u.strideHeight,f=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,x=u.dilationWidth,v=u.effectiveFilterDepth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,w=v-1-u.padInfo.front,k=b-1-u.padInfo.left,N=y-1-u.padInfo.top,S=tS(i.shape,"float32"),j=n.bufferSync(a);for(let C=0;C<u.batchSize;++C)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const a=t-w,i=n-N,s=r-k;let o=0;for(let t=0;t<v;t+=m){const n=(a+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<y;r+=g){const a=(i+r)/p;if(!(a<0||a>=u.outHeight||Math.floor(a)!==a))for(let i=0;i<b;i+=x){const l=(s+i)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=v*y*b-1-d.get(C,n,a,l,e)===t*y*b+r*b+i?1:0;if(0===c)continue;o+=j.get(C,n,a,l,e)*c}}}S.set(o,C,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const WW={kernelName:cb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;LL([i,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=hj(o.shape,l,c,1,u,d),p=n.data.get(o.dataId).values,f=tS(h.outShape,o.dtype,Zz(p,o.shape,o.dtype,h).values),m=h.strideHeight,g=h.strideWidth,x=h.dilationHeight,v=h.dilationWidth,y=h.effectiveFilterHeight,b=h.effectiveFilterWidth,w=b-1-h.padInfo.left,k=y-1-h.padInfo.top,N=tS(o.shape,"float32"),S=n.data.get(a.dataId).values,j=tS(a.shape,"float32",S);for(let C=0;C<h.batchSize;++C)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const r=t-k,a=n-w;let i=0;for(let t=0;t<y;t+=x){const n=(r+t)/m;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let r=0;r<b;r+=v){const s=(a+r)/g;if(s<0||s>=h.outWidth||Math.floor(s)!==s)continue;const o=y*b-1-f.get(C,n,s,e)===t*b+r?1:0;if(0===o)continue;i+=j.get(C,n,s,e)*o}}N.set(i,C,t,n,e)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};const VW={kernelName:hb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=n,c=r;LL(a,"MaxPoolWithArgmax");const u=c.data.get(a.dataId).values,d=hj(a.shape,i,s,[1,1],o),[h,p]=function(e,t,n,r,a){const i=Jz(e,0,n,uv(t),a,"max"),s=Zz(e,t,n,a,!0,r);return[i.values,s.values]}(u,a.shape,a.dtype,l,d),f=c.write(h,d.outShape,a.dtype),m=c.write(p,d.outShape,a.dtype);return[{dataId:f,shape:d.outShape,dtype:a.dtype},{dataId:m,shape:d.outShape,dtype:"int32"}]}};const HW={kernelName:pb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=Zx(i,a.shape),l=Kx(fC(a.shape,o)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const d=fz({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);const h=CU({inputs:{a:d,b:u},backend:n});c.push(h);const p=nU({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:s}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};const GW={kernelName:fb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;LL(a,"min");const o=Zx(i,a.shape);let l=o;const c=xC(l,a.shape.length);let u=a;null!=c&&(u=Mz({inputs:{x:a},backend:n,attrs:{perm:c}}),l=yC(l.length,a.shape.length)),gC("min",l,u.shape.length);const[d,h]=fC(u.shape,l),p=Kx(h),f=fv(Kx(d),u.dtype),m=n.data.get(u.dataId).values;for(let x=0;x<f.length;++x){const e=x*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[x]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,f);if(s){const e=kz({inputs:{x:g},backend:n,attrs:{shape:mC(d,o)}});return n.disposeIntermediateTensorInfo(g),e}return g}},KW=$L((e,t)=>Math.min(e,t)),qW=gz(mb,KW),XW={kernelName:mb,backendName:"cpu",kernelFunc:qW};const YW={kernelName:gb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:s}=r;LL(a,"mirrorPad");const o=i.map((e,t)=>e[0]+a.shape[t]+e[1]),l=i.map(e=>e[0]),c=i.map((e,t)=>e[0]+a.shape[t]),u="reflect"===s?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,p=uv(a.shape),f=Kx(o),m=o.length,g=uv(o),x=tv(a.dtype,f);for(let v=0;v<f;v++){let e=vv(v,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map((e,t)=>e-l[t]);const t=xv(e,h,p);x[v]=d[t]}return{dataId:n.write(x,o,a.dtype),shape:o,dtype:a.dtype}}},$W=$L((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),QW=gz(xb,$W),JW={kernelName:xb,backendName:"cpu",kernelFunc:QW};function ZW(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=a.shape.length;let o=i;if(-1===o&&(o=s-1),o!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(s," and dim was ").concat(o));const l=Zx([o],a.shape),c=PW({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=mC(c.shape,l),d=kz({inputs:{x:c},backend:n,attrs:{shape:u}}),h=AU({inputs:{a:a,b:d},backend:n}),p=vU({inputs:{x:h},backend:n}),f=nU({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=kz({inputs:{x:f},backend:n,attrs:{shape:u}}),g=CU({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const eV={kernelName:cw,backendName:"cpu",kernelFunc:ZW};const tV={kernelName:vb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;LL(a,"multinomial");const l=o?a:ZW({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,i],p=fv(Kx(h),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=d[e];for(let a=1;a<t.length;++a)t[a]=t[a-1]+d[e+a];const n=FC.alea(s.toString()),r=f*i;for(let a=0;a<i;++a){const e=n();p[r+a]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+a]=n;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}};function nV(e,t,n){const r=uk(-1,n);return JB([],t,r,e,n)}const rV={kernelName:bb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;LL(r,"neg");const a=n.data.get(r.dataId).values,[i,s]=nV(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}},aV=zE;const iV={kernelName:kb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;LL(a,"NonMaxSuppression");const c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=aV(c,u,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},sV=BE;const oV={kernelName:Nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;LL(a,"NonMaxSuppressionPadded");const u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:p}=sV(u,d,s,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},lV=UE;const cV={kernelName:Sb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;LL(a,"NonMaxSuppressionWithScore");const u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=s,p=o,f=l,m=c,{selectedIndices:g,selectedScores:x}=lV(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}},uV=$L((e,t)=>e!==t?1:0),dV=gz(wb,uV,null,"bool"),hV={kernelName:wb,backendName:"cpu",kernelFunc:dV};const pV={kernelName:Cb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r;LL(a,"oneHot");const c=Kx(a.shape),u=new Float32Array(c*s);u.fill(l);const d=n.data.get(a.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<s&&(u[h*s+d[h]]=o);return n.makeTensorInfo([...a.shape,s],i,u)}};function fV(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=dz({inputs:{input:r},backend:n}),t=fV({inputs:{x:e},backend:n}),a=NB({inputs:{input:r},backend:n}),i=fV({inputs:{x:a},backend:n}),s=lz({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}return DU({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const mV={kernelName:_w,backendName:"cpu",kernelFunc:fV};const gV={kernelName:jb,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=dz({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=NB({inputs:{input:a},backend:r}),s=fV({inputs:{x:i},backend:r}),o=lz({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}return DU({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function xV(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return bU({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const i=t[0].shape,s=t[0].dtype;t.forEach(e=>{Hx(i,e.shape,"All tensors passed to stack must have matching shapes"),Vx(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(e=>{const t=bU({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),c=jB({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}const vV={kernelName:Eb,backendName:"cpu",kernelFunc:xV};const yV={kernelName:Tb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;LL(a,"pad");const o=i.map((e,t)=>e[0]+a.shape[t]+e[1]),l=i.map(e=>e[0]),c=n.data.get(a.dataId).values,u=Kx(a.shape),d=a.shape.length,h=uv(a.shape),p=Kx(o),f=o.length,m=uv(o),g=tv(a.dtype,p);0!==s&&g.fill(s);for(let x=0;x<u;x++){const e=vv(x,d,h).map((e,t)=>e+l[t]);g[xv(e,f,m)]=c[x]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}},bV=$L((e,t)=>Math.pow(e,t)),wV=gz(Ib,bV),kV={kernelName:Ib,backendName:"cpu",kernelFunc:wV};function NV(e,t,n,r){const[a,i]=fC(e,r),s=Lk(t,"int32"),o=fv(Kx(a),s),l=Kx(i);for(let c=0;c<o.length;++c){const e=c*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];o[c]=t}return{outVals:o,outShape:a,outDtype:s}}const SV={kernelName:Ob,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;LL(a,"prod");const o=a.shape.length,l=Zx(i,a.shape),c=xC(l,o);let u=l,d=a;const h=[];null!=c&&(d=Mz({inputs:{x:a},backend:n,attrs:{perm:c}}),h.push(d),u=yC(u.length,o));const p=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=NV(d.shape,d.dtype,p,u);let x=m;return s&&(x=mC(m,l)),h.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(x,g,f)}};function jV(e,t,n,r){const a=[];let i=0;const s=t.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)o[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],s=e[c]+1;for(let e=0;e<n.length;++e){const a=n[e],i=e+t.length-1;if(i>=0){const e=o[i],t=e[e.length-1]-a[r];for(let n=r;n<s;++n)o[i].push(a[n+1]+t)}r=a[r],s=a[s]}s!==r&&(a.push([r,s]),i+=s-r)}return{outSplits:o,valueSlices:a,numValues:i}}function CV(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function EV(e,t,n,r,a){const i=t.slice();i[0]=a;const s=nv(n,Kx(i)),o=e.length;return function(e,t,n,r,a,i){const s=CV(t,2)[1],o=CV(i,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)a[l*o+n]=e[t*s+n];++l}}(e,t,r,0===o?0:o/t[0],s,i),[s,i]}function TV(e,t,n,r,a,i,s,o){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){const a=vv(r,t.length,uv(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}})}(i,s,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:d}=jV(i,s,e,l),h=function(e){const t=[];for(let n=0;n<e.length;++n){const r=nv("int32",e[n].length);t.push(r),e[n].forEach((e,t)=>r[t]=e)}return t}(c),p=EV(n,r,a,u,d);return[h,p[0],p[1]]}const IV={kernelName:_b,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:o}=r,l=a.map(e=>n.data.get(e.dataId).values),c=a.map(e=>e.shape),u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,[h,p,f]=TV(l,c,u,i.shape,i.dtype,d,s.shape),m=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}},AV=2147483647;function OV(e,t,n,r,a,i,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const o=0===t.length,l=0===a.length,c=0===s.length,u=[];o||u.push(t[0]),l||u.push(a[0]),c||u.push(s[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],h=nv("int32",d+1);h[0]=0;for(let m=0;m<d;++m){const t=o?e[0]:e[m],n=l?r[0]:r[m],a=c?i[0]:i[m];if(0===a)throw new Error("Requires delta != 0");let s;if(a>0&&n<t||a<0&&n>t)s=0;else if(s=Math.ceil(Math.abs((n-t)/a)),s>AV)throw new Error("Requires ((limit - start) / delta) <= ".concat(AV));h[m+1]=h[m]+s}const p=nv(n,h[d]);let f=0;for(let m=0;m<d;++m){const t=h[m+1]-h[m];let n=o?e[0]:e[m];const r=c?i[0]:i[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[h,p]}const _V={kernelName:Rb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=OV(s,r.shape,r.dtype,o,a.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var RV=bT;class PV{constructor(e,t,n,r,a,i,s,o,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=kT(c),this.raggedRank=NT(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===RV.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===RV.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case RV.VALUE_ROWIDS:return PV.getMaxWidthValueRowID(t);case RV.ROW_SPLITS:return PV.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(RV[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],a=0;for(let i=1;i<t;++i){const t=e[i];t!==r&&(r=t,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return DV(e,n)}calculateOutputSize(e){const t=this.valuesShape;ST(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=wT(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let a=1;a<=this.raggedRank;++a)r[a]<0&&(r[a]=this.getMaxWidth(a));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),a=[];let i=0;for(let s=0;s<r;++s,i+=t)a.push(i);for(let s=r;s<e;++s)a.push(-1);return Vx(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){const a=e.length,i=[];for(let s=0;s<a-1;++s){const a=e[s+1]-e[s];let o=Math.min(r,a),l=t[s];-1===l&&(o=0);for(let e=0;e<o;++e)i.push(l),l+=n;for(let e=0;e<a-o;++e)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){const a=e.length,i=[];if(0===a)return[];let s=0,o=e[0];if(o>=t.length)throw new Error("Got currentValueRowId=".concat(o,", which is not less than ").concat(t.length));let l=t[o];i.push(l);for(let c=1;c<a;++c){const a=e[c];if(a===o)l>=0&&(++s,s<r?l+=n:l=-1);else{if(s=0,o=a,a>=t.length)throw new Error("Got nextValueRowId=".concat(a," which is not less than ").concat(t.length));l=t[a]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){const a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case RV.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case RV.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(RV[i]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case RV.FIRST_DIM_SIZE:return e[0];case RV.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case RV.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(RV[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let i=n.length-2;i>=0;--i)n[i]=n[i+1]*t[i+1];const r=DV(t,!1),a=nv(this.valuesDType,Kx(r));if(n[0]*t[0]>0){let i=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){i=this.calculateOutputIndex(e-1,i,n[e],t[e])}this.setOutput(this.raggedRank,i,a,r)}return[r,a]}setOutput(e,t,n,r){if(0===n.length)return;const a=this.values,i=n;let s=r.slice();s=s.slice(e+1);const o=Kx(s),l=t.length;let c=this.defaultValue;if(c.length!==o&&1!==c.length){const e=this.defaultValueShape;fN(()=>{const t=Cj(c,e),n=Rj(t,s);c=n.dataSync()})}let u=0,d=0,h=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==h){if(d<h){const e=a.subarray(u*o);MV(i.subarray(d*o),e,(h-d)*o)}if(p>=l){const t=n.length;e=Math.floor(t/o)}if(e>h)if(1===this.defaultValue.length)i.subarray(h*o,e*o).fill(this.defaultValue[0]),h=e;else for(;e>h;){MV(i.slice(h*o),c,o),++h}e<0?(u=p+1,d=h):(u=p,d=h,h=d+1)}else++h}}}function MV(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function DV(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function FV(e,t,n,r,a,i,s,o,l,c){return new PV(e,t,n,r,a,i,s,o,l,c).compute()}const LV={kernelName:Pb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=o.map(e=>n.data.get(e.dataId).values),p=o.map(e=>e.shape),[f,m]=FV(c,a.shape,u,i.shape,i.dtype,d,s.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}};function zV(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return fv(0,r);const a=fv(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}const BV={kernelName:Mb,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:i,step:s}=n,o=zV(r,a,s,i);return t.makeTensorInfo([o.length],i,o)}},UV=WL(Fb,e=>1/e),WV={kernelName:Fb,backendName:"cpu",kernelFunc:UV};const VV={kernelName:Wb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;LL(a,"resizeBilinear");const l=uv(a.shape),[c,u]=o,[d,h,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(Kx([d,c,u,f])),x=[i&&c>1?h-1:h,i&&u>1?p-1:p],v=[i&&c>1?c-1:c,i&&u>1?u-1:u];let y=0;const b=x[0]/v[0],w=x[1]/v[1];for(let k=0;k<d;k++)for(let e=0;e<c;e++){let t;t=s?b*(e+.5)-.5:b*e;const n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(h-1,Math.ceil(t)),i=k*l[0]+n*l[1],o=k*l[0]+a*l[1];for(let e=0;e<u;e++){let t;t=s?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),a=t-n,c=Math.min(p-1,Math.ceil(t)),u=i+n*l[2],d=o+n*l[2],h=i+c*l[2],x=o+c*l[2];for(let e=0;e<f;e++){const t=m[u+e],n=m[d+e],i=t+(m[h+e]-t)*a,s=i+(n+(m[x+e]-n)*a-i)*r;g[y++]=s}}}return n.makeTensorInfo([d,c,u,f],"float32",g)}};const HV={kernelName:Vb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;LL([i,a],"resizeBilinearGrad");const o=uv(a.shape),[l,c,u,d]=a.shape,[,h,p]=i.shape,f=new Float32Array(l*c*u*d),m=[s&&h>1?c-1:c,s&&p>1?u-1:u],g=[s&&h>1?h-1:h,s&&p>1?p-1:p],x=m[0]/g[0],v=m[1]/g[1],y=n.data.get(i.dataId).values;let b=0;for(let w=0;w<l;w++){const e=w*o[0];for(let t=0;t<h;t++){const n=t*x,r=Math.floor(n),a=Math.min(Math.ceil(n),c-1),i=e+r*o[1],s=e+a*o[1],l=n-r,h=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),a=t-n,c=1-a,p=i+n*o[2],m=i+r*o[2],g=s+n*o[2],x=s+r*o[2],w=h*c,k=h*a,N=l*c,S=l*a;for(let e=0;e<d;e++){const t=y[b++];f[p+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*N,f[x+e]+=t*S}}}}return n.makeTensorInfo([l,u,c,d],"float32",f)}};const GV={kernelName:Bb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;LL(a,"resizeNearestNeighbor");const l=uv(a.shape),[c,u]=o,[d,h,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(d*c*u*f),x=[i&&c>1?h-1:h,i&&u>1?p-1:p],v=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=x[0]/v[0],b=x[1]/v[1];let w=0;for(let k=0;k<d;k++){const e=k*l[0];for(let t=0;t<c;t++){const n=s?y*(t+.5):y*t;let r=Math.min(h-1,i?Math.round(n):Math.floor(n));s&&(r=Math.max(0,r));const a=e+r*l[1];for(let e=0;e<u;e++){const t=s?b*(e+.5):b*e;let n=Math.min(p-1,i?Math.round(t):Math.floor(t));s&&(n=Math.max(0,n));const r=a+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([d,c,u,f],a.dtype,g)}};const KV={kernelName:Ub,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;LL([i,a],"resizeNearestNeighborGrad");const o=uv(a.shape),l=uv(i.shape),[c,u,d,h]=a.shape,[,p,f]=i.shape,m=new Float32Array(c*u*d*h),g=n.data.get(i.dataId).values,x=[s&&p>1?u-1:u,s&&f>1?d-1:d],v=[s&&p>1?p-1:p,s&&f>1?f-1:f],y=x[0]/v[0],b=x[1]/v[1],w=1/y,k=1/b,N=2*Math.ceil(w)+2,S=2*Math.ceil(k)+2;for(let j=0;j<c;j++){const e=j*o[0];for(let t=0;t<u;t++){const n=e+t*o[1],r=Math.floor(t*w),a=Math.floor(r-N/2);for(let i=0;i<d;i++){const r=n+i*o[2],c=Math.floor(i*k),x=Math.floor(c-S/2);for(let n=0;n<h;n++){let o=0;for(let r=0;r<N;r++){const c=r+a;if(c<0||c>=p)continue;const h=e+c*l[1],m=c*y;if(t===Math.min(u-1,s?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){const t=e+x;if(t<0||t>=f)continue;const r=h+t*l[2],a=t*b;i===Math.min(d-1,s?Math.round(a):Math.floor(a))&&(o+=g[r+n])}}m[r+n]=o}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}};const qV={kernelName:Gb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r;LL(a,"reverse");const s=a.shape.length,o=Zx(i,a.shape);if(0===s)return KL({inputs:{x:a},backend:n});const l=new jk(a.shape,a.dtype),c=n.bufferSync(a);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();o.forEach(e=>t[e]=a.shape[e]-1-t[e]),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},XV={kernelName:Mw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,{radians:i,fillValue:s,center:o}=n,l=r,c=tv(a.dtype,Kx(a.shape)),[u,d,h,p]=a.shape,[f,m]=ET(o,d,h),g=Math.sin(i),x=Math.cos(i),v=l.data.get(a.dataId).values;for(let y=0;y<u;y++){const e=y*h*d*p;for(let t=0;t<d;t++){const n=t*(h*p);for(let r=0;r<h;r++){const a=r*p;for(let i=0;i<p;i++){const o=[u,t,r,i],l=o[2],y=o[1];let b=(l-f)*x-(y-m)*g,w=(l-f)*g+(y-m)*x;b=Math.round(b+f),w=Math.round(w+m);let k=s;if("number"!==typeof s&&(k=3===i?255:s[i]),b>=0&&b<h&&w>=0&&w<d){k=v[e+w*(h*p)+b*p+i]}c[e+n+a+i]=k}}}}return{dataId:l.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},YV=WL(Kb,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),$V={kernelName:Kb,backendName:"cpu",kernelFunc:YV},QV=UL(e=>1/Math.sqrt(e)),JV=VL(qb,QV),ZV={kernelName:qb,backendName:"cpu",kernelFunc:JV};function eH(e,t,n,r,a,i,s,o,l,c){const u=[r/a,a],d=e.values,h=t.values;if(0===r)return tS(n,t.dtype);const p=l instanceof jk?l:tS(u,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<i;f++){const e=[];let i=0;for(let t=0;t<s;t++){const n=d[f*s+t];e.push(n),i+=n*o[t]}if(i<0||i>=r/a)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<a;n++)c?p.values[i*a+n]+=h[f*a+n]:p.values[i*a+n]=0===t.rank?h[0]:h[f*a+n]}return p}const tH={kernelName:Xb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=DT(0,a,s),h=eH(n.bufferSync(a),n.bufferSync(i),s,d,c,l,o,u,0,!0);return n.makeTensorInfo(s,h.dtype,h.values)}};function nH(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function rH(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}const aH={kernelName:$b,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=function(e,t,n,r,a,i){const s=nv("int32",n*a);for(let o=0;o<n;++o){const n=e.slice(o*r,(o+1)*r),l=o*a;for(let e=0;e<a;++e)s[l+e]="left"===i?nH(n,t[e+l]):rH(n,t[e+l])}return s}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",o)}};const iH={kernelName:Qb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t;LL([r,a,i],"select");const s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=Lk(a.dtype,i.dtype),d=fv(Kx(a.shape),u);let h=0;const p=0===s||s>1||1===a.shape.length?1:Kx(a.shape.slice(1));for(let f=0;f<o.length;f++)for(let e=0;e<p;e++)1===o[f]?d[h++]=l[f]:d[h++]=c[f];return n.makeTensorInfo(a.shape,u,d)}},sH=FT,oH=LT,lH=WL(Jb,e=>e>=0?oH*e:sH*(Math.exp(e)-1)),cH={kernelName:Jb,backendName:"cpu",kernelFunc:lH},uH=WL(nw,e=>e<0?-1:e>0?1:0),dH={kernelName:nw,backendName:"cpu",kernelFunc:uH},hH=WL(ew,e=>Math.sin(e)),pH={kernelName:ew,backendName:"cpu",kernelFunc:hH},fH=WL(tw,e=>Math.sinh(e)),mH={kernelName:tw,backendName:"cpu",kernelFunc:fH},gH=Math.log(1.1920928955078125e-7)+2,xH=WL(aw,e=>{const t=e>-gH,n=e<gH,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a}),vH={kernelName:aw,backendName:"cpu",kernelFunc:xH};const yH={kernelName:ow,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;LL([a],"spaceToBatchND");const o=Kx(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);const c=yV.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=TT(c.shape,i,o,!1),d=IT(u.length,i.length,!1),h=AT(c.shape,i,o,!1),p=kz({inputs:{x:c},backend:n,attrs:{shape:u}}),f=Mz({inputs:{x:p},backend:n,attrs:{perm:d}}),m=kz({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function bH(e,t,n,r,a,i,s){const o=t[0],l=i[0],c=new Array(l),u=new Array(o),d=t[1];if(0===l){if(0!==o)throw new Error(uI(o));return[nv(n,0),[0,d],nv(a,0),c,u]}let h=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<o;++g){const t=e[g*d];if(t<0)throw new Error(dI(g,t));if(t>=l)throw new Error(hI(g,t,l));++f[t],h=h&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];c[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&h){const t=e,n=r;for(let e=0;e<o;++e)u[e]=e;return[t,[o,d],n,c,u]}{const t=f[l-1],i=nv(n,t*d),h=nv(a,t),p=new Array(l).fill(0);for(let n=0;n<o;++n){const t=e[n*d],a=p[t],s=(0===t?0:f[t-1])+a;p[t]++;for(let r=0;r<d;++r)i[s*d+r]=e[n*d+r];h[s]=r[n],u[n]=s}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];i[t*d+0]=e;for(let e=1;e<d;++e)i[t*d+e]=0;h[t]=s}}return[i,[t,d],h,c,u]}}const wH={kernelName:uw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values[0],[d,h,p,f,m]=bH(o,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function kH(e,t,n,r,a){const i=Kx(r),s=t[0],o=a.length,l=[];let c=1,u=-1;for(let m=0;m<o;++m){const e=a[m];if(-1===e){if(-1!==u)throw new Error(pI(u,m));u=m,l.push(1)}else{if(e<0)throw new Error(fI(m,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(i/c);if(c*e!==i)throw new Error(gI(r,l));l[u]=e}if(Kx(l)!==i)throw new Error(xI(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let e=d-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const p=[];if(o>0){p[o-1]=1;for(let e=o-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=nv(n,s*o);for(let m=0;m<s;++m){let t=0;for(let n=0;n<d;++n)t+=e[m*d+n]*h[n];for(let e=0;e<o;++e)f[m*o+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[s,o],l]}const NH={kernelName:dw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));const s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=kH(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};function SH(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const o=r.length,l=[t[0],e.length/t[0]],c=l[1],u=o>0?a[o-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=u;const h=d.reduce((e,t)=>e*t,1),p=nv(n,h);if(0===o)return u>0&&p.fill(s),[p,d];if(u<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,x=a[f];for(;;){let t=0;if(m<o){if(t=a[m],x===t){++m;continue}if(x>=t)throw new Error(yI())}if(x<0||x>=u)throw new Error(bI(x,u));x>g&&p.fill(s,g*c,x*c);for(let n=f;n<m;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(wI(n,r[n],l[0]));for(let n=0;n<c;n++)p[x*c+n]+=e[t*c+n]}if(i)for(let e=0;e<c;e++)p[x*c+e]/=m-f;if(f=m,++m,g=x+1,x=t,m>o)break}return g<u&&p.fill(s,g*c,u*c),[p,d]}const jH={kernelName:hw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=SH(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const CH={kernelName:pw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=SH(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}};const EH={kernelName:fw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=DT(0,a,o),p=!1,f=n.bufferSync(a);let m;switch(i.dtype){case"bool":m=eH(f,n.bufferSync(i),o,h,u,c,l,d,Boolean(n.data.get(s.dataId).values[0]),p);break;case"float32":m=eH(f,n.bufferSync(i),o,h,u,c,l,d,n.data.get(s.dataId).values[0],p);break;case"int32":m=eH(f,n.bufferSync(i),o,h,u,c,l,d,n.data.get(s.dataId).values[0],p);break;case"string":m=eH(f,n.bufferSync(i),o,h,u,c,l,d,fk(n.data.get(s.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(i.dtype))}return n.makeTensorInfo(o,m.dtype,m.values)}};const TH={kernelName:lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=Zx(s,a.shape)[0],l=cI(a,i,o),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(e=>{const t=[...u];t[o]=e;const r=oB({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r})}},IH=UL(e=>Math.sqrt(e)),AH=WL(iw,e=>Math.sqrt(e)),OH={kernelName:iw,backendName:"cpu",kernelFunc:AH},_H={kernelName:gw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,a=n;LL(r,"square");const i=a.data.get(r.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const e=i[o];s[o]=e*e}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},RH=$L((e,t)=>{const n=e-t;return n*n}),PH=gz(mw,RH),MH={kernelName:mw,backendName:"cpu",kernelFunc:PH},DH=UL((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)}),FH=VL(xw,DH),LH={kernelName:xw,backendName:"cpu",kernelFunc:FH},zH=WL(Rw,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),BH={kernelName:Rw,backendName:"cpu",kernelFunc:zH};function UH(e,t,n,r){const a=tS(e,t.dtype);for(let i=0;i<a.size;i++){const e=a.indexToLoc(i),s=new Array(e.length);for(let t=0;t<s.length;t++)s[t]=e[t]*n[t]+r[t];a.set(t.get(...s),...e)}return a}const WH={kernelName:vw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;LL(a,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:v,end:y,strides:b}=sj(a.shape,i,s,o,l,c,u,d,h);let w;if(m)w=kz({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||x){Vx(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));const e=qS(v,y,b),t=oB({inputs:{x:a},backend:n,attrs:{begin:v,size:e}});w=kz({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=UH(p,n.bufferSync(a),b,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class VH{constructor(e,t,n,r,a,i){this.separator=pk(e),this.nGramWidths=t,this.leftPad=pk(n),this.rightPad=pk(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,i){for(let s=0;s<a;++s){const o=this.getPadWidth(i),l=Math.max(0,o-s),c=Math.max(0,o-(a-(s+1))),u=i-(l+c),d=t+(l>0?0:s-o);let h=0;h+=l*this.leftPad.length;for(let t=0;t<u;++t)h+=e[d+t].length;h+=c*this.rightPad.length;h+=(l+c+u-1)*this.separator.length,n[r+s]=new Uint8Array(h);const p=n[r+s];let f=0;const m=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[d+t]),m(this.separator);if(u>0){m(e[d+u-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error("Invalid split value ".concat(t[a],", must be in [").concat(e,", ").concat(n,"]"));e=t[a]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const a=r-1,i=nv("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=a;++t)i[t]=0;return[e,i]}i[0]=0;for(let o=1;o<=a;++o){const e=t[o]-t[o-1];let n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),i[o]=i[o-1]+n}const s=new Array(i[a]);for(let o=0;o<a;++o){const n=t[o];let r=i[o];if(this.nGramWidths.forEach(a=>{const i=t[o+1]-t[o],l=this.getNumNGrams(i,a);this.createNGrams(e,n,s,r,l,a),r+=l}),this.preserveShort&&r===i[o]){const a=t[o+1]-t[o];if(0===a)continue;const i=a+2*this.padWidth,l=1;this.createNGrams(e,n,s,r,l,i)}}return[s,i]}}function HH(e,t,n,r,a,i,s,o){return new VH(n,r,a,i,s,o).compute(e,t)}const GH={kernelName:yw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,h=n.data.get(u.dataId).values,p=n.data.get(d.dataId).values,[f,m]=HH(h,p,a,i,s,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function KH(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const a=t[0];let i=e.indexOf(a);for(;-1!==i;){const t=e.subarray(0,i);n&&0===t.length||r.push(t),i=(e=e.subarray(i+1)).indexOf(a)}return void(n&&0===e.length||r.push(e))}let a=0;for(let i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){const t=e.subarray(a,i);n&&0===t.length||r.push(t),a=i+1}}function qH(e,t,n){const r=e.length,a=[];let i=0,s=0;const o=new Array(r);for(let h=0;h<r;++h){const r=a.length;KH(e[h],t,n,a);const l=a.length-r;o[h]=l,i+=l,s=Math.max(s,l)}const l=nv("int32",2*i),c=new Array(i),u=[r,s];let d=0;for(let h=0;h<r;++h)for(let e=0;e<o[h];++e)l[2*d]=h,l[2*d+1]=e,c[d]=a[d],++d;return[l,c,u]}const XH={kernelName:bw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values[0],[c,u,d]=qH(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function YH(e,t){const n=nv("int32",e.length);for(let r=0;r<e.length;++r)n[r]=ck(e[r]).modulo(t).getLowBitsUnsigned();return n}const $H={kernelName:ww,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=YH(n.data.get(i.dataId).values,a);return n.makeTensorInfo(i.shape,"int32",s)}},QH=WL(Nw,e=>Math.tan(e)),JH={kernelName:Nw,backendName:"cpu",kernelFunc:QH},ZH=WL(Sw,e=>Math.tanh(e));const eG={kernelName:Yb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:i}=t,{sliceRank:s,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=DT(0,a,r.shape),d=n.bufferSync(a),h=n.bufferSync(i),p=n.bufferSync(r),f=eH(d,h,r.shape,u,l,o,s,c,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function tG(e,t){const n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];const r=tS(n,e.dtype);for(let a=0;a<r.values.length;++a){const t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const i=e.locToIndex(n);r.values[a]=e.values[i]}return r}const nG={kernelName:jw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;LL(a,"tile");const s=tG(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}},rG=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function aG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const a=r-n+1,i=t-n+1,s=Math.log(a),o=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*o*(a-o)/a)*Math.sign(i-a/2);aG(e,t,Math.max(n,Math.floor(t-i*o/a+l)),Math.min(r,Math.floor(t+(a-i)*o/a+l)))}const a=e[t];let i=n,s=r;for(Wx(e,n,t),rG(e[r],a)>0&&Wx(e,n,r);i<s;){for(Wx(e,i,s),i++,s--;rG(e[i],a)<0;)i+=1;for(;rG(e[s],a)>0;)s-=1}0===rG(e[n],a)?Wx(e,n,s):(s+=1,Wx(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function iG(e,t,n,r,a){const i=t[t.length-1],[s,o]=[e.length/i,i],l=tv(n,s*r),c=tv("int32",s*r);for(let d=0;d<s;d++){const t=d*o,n=e.subarray(t,t+o);let i=new Array(n.length);n.forEach((e,t)=>i[t]={value:e,index:t}),r<i.length&&(aG(i,r),i=i.slice(0,r)),a&&i.sort(rG);const s=d*r,u=l.subarray(s,s+r),h=c.subarray(s,s+r);for(let e=0;e<r;e++)u[e]=i[e].value,h[e]=i[e].index}const u=t.slice();return u[u.length-1]=r,[tS(u,n,l),tS(u,"int32",c)]}const sG={kernelName:Cw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r;LL(a,"topk");const o=n.data.get(a.dataId).values,[l,c]=iG(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const oG={kernelName:Ew,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=n,[u,d,h,p]=a.shape,[f,m]=null!=c?c:[d,h],g=[u,f,m,p],x=uv(a.shape),v=x[0],y=x[1],b=x[2],w=uv(g),k=w[0],N=w[1],S=w[2],j=tv(a.dtype,Kx(g));j.fill(l);const C=r.data.get(a.dataId).values,E=r.data.get(i.dataId).values;for(let T=0;T<u;++T){const e=1===i.shape[0]?E:E.subarray(8*T,8*T+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let a;const i=e[6]*n+e[7]*t+1;if(0===i)continue;const c=(e[0]*n+e[1]*t+e[2])/i,u=(e[3]*n+e[4]*t+e[5])/i,p=lG(c,h,o),f=lG(u,d,o);switch(s){case"nearest":a=uG(C,d,h,v,y,b,T,f,p,r,l);break;case"bilinear":a=dG(C,d,h,v,y,b,T,f,p,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}j[T*k+t*N+n*S+r]=a}return r.makeTensorInfo(g,a.dtype,j)}return{dataId:r.write(j,g,a.dtype),shape:a.shape,dtype:a.dtype}}};function lG(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Bx(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return Bx(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Bx(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function cG(e,t,n,r,a,i,s,o,l,c,u){return 0<=o&&o<t&&0<=l&&l<n?e[s*r+o*a+l*i+c]:u}function uG(e,t,n,r,a,i,s,o,l,c,u){return cG(e,t,n,r,a,i,s,Math.round(o),Math.round(l),c,u)}function dG(e,t,n,r,a,i,s,o,l,c,u){const d=Math.floor(o),h=Math.floor(l),p=d+1,f=h+1;return(p-o)*((f-l)*cG(e,t,n,r,a,i,s,d,h,c,u)+(l-h)*cG(e,t,n,r,a,i,s,d,f,c,u))+(o-d)*((f-l)*cG(e,t,n,r,a,i,s,p,h,c,u)+(l-h)*cG(e,t,n,r,a,i,s,p,f,c,u))}function hG(e,t,n,r){const a=Zx(t,n)[0],i=[1,n[0],1];for(let f=0;f<a;f++)i[0]*=n[f];i[1]=n[a];for(let f=a+1;f<n.length;f++)i[2]*=n[f];const s=new Map,o=new Int32Array(n[a]),l=new jk(i,r,e),c=[],u=1===i[0]&&1===i[2];for(let f=0;f<n[a];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<i[0];t++)for(let n=0;n<i[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=s.get(t);if(null!=n)o[f]=n;else{const e=s.size;s.set(t,e),o[f]=e,c.push(f)}}const d=i.slice();d[1]=s.size;const h=new jk(d,r);c.forEach((e,t)=>{for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)h.set(l.get(n,e,r),n,t,r)});const p=n.slice();return p[a]=d[1],{outputValues:h.values,outputShape:p,indices:o}}const pG={kernelName:Iw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;LL(i,"unique");const s=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=hG(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}};const fG={kernelName:Aw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a.shape.length,o=a.shape[i],l=new Array(s-1);let c=0;for(let p=0;p<s;p++)p!==i&&(l[c++]=a.shape[p]);const u=new Array(s).fill(0),d=a.shape.slice();d[i]=1;const h=new Array(o);for(let p=0;p<h.length;p++){u[i]=p;const e=oB({inputs:{x:a},backend:n,attrs:{begin:u,size:d}});h[p]=kz({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return h}};const mG={kernelName:Ow,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r;LL(a,"unsortedSegmentSum");const o=[],l=[],c=a.shape.length-i.shape.length;let u=i;for(let h=0;h<c;++h){const e=bU({inputs:{input:u},backend:n,attrs:{dim:h+1}});u=e,l.push(e)}for(let h=0;h<s;++h){const e=uk(h,"int32"),t=n.makeTensorInfo([],"int32",e),r=oU({inputs:{a:t,b:u},backend:n}),i=fz({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),s=eU({inputs:{a:i,b:a},backend:n}),c=nU({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});o.push(c),l.push(t),l.push(r),l.push(i),l.push(s),l.push(c)}const d=xV({inputs:o,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}},gG=[Cz,Tz,Az,_z,wz,Rz,Fz,Lz,zz,Bz,Wz,Hz,Kz,Yz,Qz,tB,nB,rB,aB,jz,iB,cB,hB,fB,mB,mz,vB,bB,cz,wB,CB,TB,IB,AB,OB,_B,RB,MB,FB,LB,zB,BB,UB,WB,HB,GB,KB,qB,XB,YB,$B,QB,aU,GL,iU,lU,gU,yU,wU,SU,MU,FU,LU,UU,HU,GU,KU,XU,$U,ZU,nW,qL,rW,SB,iW,oW,cW,YL,hW,mW,xW,bW,kW,jW,EW,AW,OW,_W,MW,LW,zW,BW,UW,WW,VW,HW,GW,XW,YW,JW,tV,tU,rV,iV,oV,cV,hV,pV,gV,vV,yV,kV,ZL,SV,IV,_V,LV,BV,hz,EU,WV,tz,rz,Nz,VV,HV,GV,KV,qV,XV,$V,ZV,tH,aH,iH,cH,sz,dH,pH,mH,lB,eV,vH,yH,wH,NH,jH,CH,EH,TH,OH,_H,MH,LH,BH,WH,GH,XH,$H,OU,rU,JH,{kernelName:Sw,backendName:"cpu",kernelFunc:ZH},eG,nG,sG,oG,Dz,pG,fG,mG,mV];for(const n of gG)Kw(n);const xG={},vG={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function yG(e,t){if(!(e in xG)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(Nv().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete xG[e]},!1),Nv().getBool("SOFTWARE_WEBGL_ENABLED")&&(vG.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",vG)||n.getContext("experimental-webgl",vG);return n.getContext("webgl2",vG)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;xG[e]=n}const n=xG[e];return null==n||n.isContextLost()?(delete xG[e],yG(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),xG[e])}var bG,wG,kG;function NG(e,t){return[t,e]}function SG(e){const t=Kx(e);return Yx(Math.ceil(t/4))}function jG(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function CG(e,t){const n=e;let r,a,i,s,o,l,c,u,d,h;return 2===Nv().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,i=n.RGBA16F,s=n.RGBA32F,o=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=e.RGBA,a=e.RGBA,i=e.RGBA,s=n.RGBA,o=e.RGBA,c=4,u=4,d=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}function EG(e,t){const n=t();return Nv().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(bG||(bG={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(wG||(wG={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(kG||(kG={}));function TG(e){return!!(Nv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function IG(e,t){return LG(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}const AG=/ERROR: [0-9]+:([0-9]+):/g;function OG(e,t){const n=AG.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,s=a.map((e,t)=>$x((t+1).toString(),i)+e);let o=0;for(let d=0;d<s.length;d++)o=Math.max(s[d].length,o);const l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat($x(c[0],o)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function _G(e,t){if(EG(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function RG(e,t,n,r,a,i,s){const o=e.getAttribLocation(t,n);return-1!==o&&(EG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),EG(e,()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,i,s)),EG(e,()=>e.enableVertexAttribArray(o)),!0)}function PG(e,t,n,r){EG(e,()=>function(e,t,n){zG(e,n),EG(e,()=>e.activeTexture(e.TEXTURE0+n)),EG(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),EG(e,()=>e.uniform1i(n,r))}function MG(e,t,n){EG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),EG(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function DG(e,t){EG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),EG(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function FG(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function LG(e,t,n){const r=EG(e,()=>t());if(null==r)throw new Error(n);return r}function zG(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function BG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Kx(e.slice(0,e.length-t))}function UG(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function WG(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[BG(e),...UG(e)]),t}function VG(e){return e%2===0}function HG(e,t){if(qx(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(VG(n)&&VG(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&VG(e[0])&&VG(t[0])}let GG,KG;function qG(e,t){return null!=e.getExtension(t)}function XG(e){try{if(null!=yG(e))return!0}catch(Yje){return console.log("Error when getting WebGL context: ",Yje),!1}return!1}function YG(e){if(0===e)return!1;const t=yG(e);if(1!==e){if(qG(t,"EXT_color_buffer_float"))return $G(t);const e="EXT_color_buffer_half_float";if(qG(t,e)){const n=t.getExtension(e);return function(e,t){const n=CG(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),o}(t,n)}return!1}if(!qG(t,"OES_texture_float"))return!1;if(!qG(t,"WEBGL_color_buffer_float"))return!1;return $G(t)}function $G(e){const t=CG(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function QG(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&Vx("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend.")})}const JG=Nv();function ZG(){let e,t,n,r,a,i,s,o,l,c;return 2===Nv().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=Nv().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function eK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=uv(t);return r.map((t,a)=>{const i="int ".concat(e[a]," = ").concat(n," / ").concat(t),s=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(s,";")}).join("")}function tK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=uv(t);return r.map((t,a)=>{const i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),s=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(s,";")}).join("")}function nK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e.map((e,t)=>t),a=function(e,t){const n=e.length,r=e.map(e=>"".concat(t,"[").concat(e,"]")),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(r,t);return a.map((t,r)=>{const i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(s,";")}).join("")}function rK(e){const t=uv(e).map(e=>e.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}JG.registerFlag("HAS_WEBGL",()=>JG.getNumber("WEBGL_VERSION")>0),JG.registerFlag("WEBGL_VERSION",()=>XG(2)?2:XG(1)?1:0),JG.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),JG.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===JG.get("WEBGL_VERSION")),JG.registerFlag("WEBGL_CPU_FORWARD",()=>!0),JG.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),JG.registerFlag("WEBGL_PACK",()=>JG.getBool("HAS_WEBGL")),JG.registerFlag("WEBGL_PACK_NORMALIZATION",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_CLIP",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_REDUCE",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_LAZILY_UNPACK",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_CONV_IM2COL",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>JG.getBool("WEBGL_PACK")),JG.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==GG){const t=yG(e);GG=t.getParameter(t.MAX_TEXTURE_SIZE)}return GG}(JG.getNumber("WEBGL_VERSION"))),JG.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==KG){const t=yG(e);KG=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,KG)}(JG.getNumber("WEBGL_VERSION"))),JG.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=JG.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=yG(e);return t=qG(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:qG(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),JG.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>JG.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Zk()),JG.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=yG(e);if(1===e){if(!qG(t,"OES_texture_float"))return!1}else if(!qG(t,"EXT_color_buffer_float"))return!1;return $G(t)}(JG.getNumber("WEBGL_VERSION"))),JG.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!JG.getBool("WEBGL_FORCE_F16_TEXTURES")&&JG.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),JG.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>YG(JG.getNumber("WEBGL_VERSION"))),JG.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=JG.getNumber("WEBGL_VERSION"))&&null!=yG(e).fenceSync;var e}),JG.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>JG.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),JG.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}),JG.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Zk()?1:-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))}),JG.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),JG.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),JG.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),JG.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),JG.registerFlag("WEBGL_EXP_CONV",()=>!1),JG.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>JG.getBool("IS_TEST")),JG.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),JG.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),JG.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),JG.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const aK="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:iK}=a;function sK(e,t,n){const r=[];if(e.forEach(e=>{const t=Kx(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=gK(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))});const a=r.join("\n"),i=e.map(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?lK(e,r):oK(e,r);const i=e.shapeInfo.logicalShape,s=t.logicalShape;i.length<=s.length&&(a+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,o=iK(e.shapeInfo.logicalShape,t.logicalShape),l=mK(s),c=s-i;let u;const d=["x","y","z","w","u","v"];u=0===i?"":s<2&&o.length>=1?"coords = 0;":o.map(e=>"coords.".concat(d[e+c]," = 0;")).join("\n");let h="";h=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(d[t+c])).join(", ");let p="return outputValue;";const f=1===Kx(e.shapeInfo.logicalShape),m=Kx(t.logicalShape),g=1===m;if(1!==i||f||g){if(f&&!g)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){const e=i-2,t=i-1;o.indexOf(e)>-1&&o.indexOf(t)>-1?p="return vec4(outputValue.x);":o.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&qx(s,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=mK(l),u=iK(e.shapeInfo.logicalShape,t.logicalShape),d=l-o;let h;const p=["x","y","z","w","u","v"];h=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map(e=>"coords.".concat(p[e+d]," = 0;")).join("\n");let f="";f=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(p[t+d])).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),s=t.texShape,o=ZG(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(o);let c,u,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(cK,"\n    ").concat(uK,"\n    ").concat(dK,"\n  ");return t}(o);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(qx(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2);let s=i,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],o="\n      int b".concat(c," = index / ").concat(s,";\n      index -= b").concat(c," * ").concat(s,";\n    ")+o,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,s,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(o)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(qx(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=tK(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=eK(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=tK(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=eK(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=eK(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=eK(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,s,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(o)),n.packedInputs&&(d+=hK);return[d,l,u,a,c,i,n.userCode].join("\n")}function oK(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[a,i]=e.shapeInfo.texShape;if(1===a&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=pK(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[o,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(fK(e),"\n      }\n    ");const a=e.shapeInfo.texShape,i=a[0],s=a[1];if(1===s&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const o=pK(n);if(1===s)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(s,", index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&qx(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=i[0],n=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:s,keptDims:o}=ev(n),l=s;if(l.length<n.length){const n=xK(e,l),r=["row","col"];return"\n      ".concat(oK(n,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(vK(r,o),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(fK(e),"\n      }\n    ");const c=i[0],u=i[1],d=pK(r);if(1===u)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===c)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=ev(n),c=o;if(c.length<n.length){const n=xK(e,c),r=["row","col","depth"];return"\n        ".concat(oK(n,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(vK(r,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(s,", 1)));\n        ").concat(fK(e),"\n      }\n    ");const u=e.shapeInfo.texShape,d=u[0],h=u[1],p=e.shapeInfo.flatOffset;if(h===i&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===s&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=pK(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(s," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:l,keptDims:c}=ev(n);if(l.length<n.length){const n=xK(e,l),r=["row","col","depth","depth2"];return"\n      ".concat(oK(n,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(vK(r,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(o,", ").concat(s,", ").concat(i,", 1)));\n        ").concat(fK(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1],f="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===o&&null==u)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===i&&null==u)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const x=pK(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,s=t[2]*i,o=t[1]*s,{newShape:l,keptDims:c}=ev(t);if(l.length<t.length){const t=xK(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(oK(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(vK(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(o,", ").concat(s,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(fK(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===o&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=pK(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=ev(t);if(a.length<t.length){const t=xK(e,a),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(oK(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(vK(n,i),");\n      }\n    ")}const s=t[5],o=t[4]*s,l=t[3]*o,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(o,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(fK(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===u&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(o,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=pK(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(o," + depth3 * ").concat(s," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function lK(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=ZG();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=ZG();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");const s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=i[0],o=i[1],l=ZG();if(null!=i&&qx(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(s,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){const r=[1,2],i=xK(e,n.slice(1)),s=["b","row","col"];return"\n        ".concat(lK(i,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(vK(s,r),");\n        }\n      ")}const o=ZG();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=s[0],c=s[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(d,", ").concat(u,", b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=ZG();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=e.shapeInfo.logicalShape,s=i.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[s-1]/2);let h=d*Math.ceil(i[s-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)");for(let m=2;m<s-1;m++)p="int b".concat(m,", ")+p,h*=i[s-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const cK="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uK="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",dK="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",hK="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function pK(e){return"offset".concat(e)}function fK(e){const t=e.name,n=Kx(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function mK(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function gK(e,t,n){const{newShape:r,keptDims:a}=ev(t),i=t.length,s=e&&3===i&&1===t[0],o=s?t.slice(1):r,l=!e&&i>1&&!qx(t,n)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:a}}function xK(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function vK(e,t){return t.map(t=>e[t]).join(", ")}function yK(e,t,n,r){const a=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=a.map(e=>e.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=sK(a,s,t),l=function(e,t){const n=LG(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(EG(e,()=>e.shaderSource(n,t)),EG(e,()=>e.compileShader(n)),Nv().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw OG(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,o),c=e.createProgram(l);return Nv().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},bK(e,t,c)))}function bK(e,t,n){const r=[],a=[];let i,s,o,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===Nv().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of t.variableNames){const a={name:d,uniform:e.getUniformLocation(n,d,u),offset:e.getUniformLocation(n,"offset".concat(d),u)};t.enableShapeUniforms&&(a.shape=e.getUniformLocation(n,"".concat(d,"Shape"),u),a.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),u)),r.push(a)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",u),o=e.getUniformLocation(n,"outShapeStrides",u),s=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const d of t.customUniforms)a.push(e.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:a,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}}function wK(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((e,n)=>{const r=e.logicalShape,a=t[n],i=a.shape;if(!qx(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(e.isUniform&&a.isUniform)return;const s=e.texShape,o=a.isUniform?null:a.texData.texShape;if(!qx(s,o))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(o," must match"))})}function kK(e){return Nv().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class NK{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=bG.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ZG();this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?tK(["r","c","d"],e):eK(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class SK{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=bG.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ZG();this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?tK(["r","c","d"],e):eK(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class jK{constructor(e){this.variableNames=["A"],this.outTexUsage=wG.DOWNLOAD;const t=ZG();this.outputShape=e,this.userCode="\n      ".concat(aK,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class CK{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=wG.DOWNLOAD;const t=ZG();this.outputShape=e,this.userCode="\n      ".concat(aK,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const EK={R:0,G:1,B:2,A:3};class TK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ZG();this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let s=0;s<n.length;s++){const e=n[s];i+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(EK[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":rK(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}}class IK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ZG();this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let t=0;t<=1;t++){const a=2*i+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(a,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(a,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(a,"] = values[2];\n            } else {\n              result[").concat(a,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":rK(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(a,";\n        }\n    ")}}function AK(e){const t=ZG();return function(e,t){const n=LG(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(EG(e,()=>e.shaderSource(n,t)),EG(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function OK(e){return function(e,t){const n=LG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return EG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),EG(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function _K(e){return function(e,t){const n=LG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return EG(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),EG(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}function RK(e,t,n,r,a,i){!function(e,t){const n=Nv().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}(t,n);const s=function(e){return LG(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),o=e.TEXTURE_2D;return EG(e,()=>e.bindTexture(o,s)),EG(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),EG(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),EG(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),EG(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===Nv().getNumber("WEBGL_VERSION")?EG(e,()=>e.texImage2D(o,0,r,t,n,0,a,i,null)):EG(e,()=>e.texStorage2D(o,1,r,t,n)),EG(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function PK(e){return e.internalFormatFloat}function MK(e){return e.internalFormatHalfFloat}function DK(e){return e.downloadTextureFormat}function FK(e){return e.internalFormatPackedFloat}function LK(e){return e.internalFormatPackedHalfFloat}function zK(e,t,n,r,a,i,s,o){const l=e,c=new Float32Array(function(e,t){const[n,r]=jG(e,t);return n*r*4}(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}class BK{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Nv().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){xG[e]=t}(t,e)):this.gl=yG(t),e=this.gl,2===Nv().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>EG(t,()=>t.createVertexArray()),this.bindVertexArray=e=>EG(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>EG(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>EG(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>EG(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>EG(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>EG(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>EG(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Nv().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=IG(this.gl,e),qG(this.gl,t))this.textureHalfFloatExtension=IG(this.gl,t);else if(Nv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),qG(this.gl,r))this.colorBufferHalfFloatExtension=IG(this.gl,r);else if(Nv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",qG(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!qG(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=OK(this.gl),this.indexBuffer=_K(this.gl),this.framebuffer=function(e){return LG(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=CG(this.gl,this.textureHalfFloatExtension)}get debug(){return Nv().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;EG(e,()=>e.finish()),EG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),EG(e,()=>e.deleteFramebuffer(this.framebuffer)),EG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),EG(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),EG(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=NG(t,n);return RK(e,a,i,PK(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=NG(t,n);return RK(e,a,i,MK(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=NG(t,n);return RK(e,a,i,DK(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){EG(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===Nv().getNumber("WEBGL_VERSION")?EG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):EG(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===Nv().getNumber("WEBGL_VERSION")?EG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):EG(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),EG(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){let s,o,l;EG(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),o=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),2===Nv().getNumber("WEBGL_VERSION")?EG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,s)):EG(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,s)),EG(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=jG(t,n);return RK(e,a,i,LK(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=jG(t,n);return RK(e,a,i,FK(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(DG(this.gl,this.framebuffer),this.outputTexture=null),EG(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[a,i]=NG(t,n),s=new Uint8Array(t*n*4);return EG(e,()=>e.readPixels(0,0,a,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,i){return zK(this.gl,e,0,0,0,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();EG(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r));const a=16*t*n;return EG(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),EG(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),EG(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Nv().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return EG(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=AK(t));const n=function(e){return LG(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);EG(t,()=>t.attachShader(n,this.vertexShader)),EG(t,()=>t.attachShader(n,e)),function(e,t){if(EG(e,()=>e.linkProgram(t)),!Nv().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&_G(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;EG(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function(e,t,n){EG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),RG(e,t,"clipSpacePos",n,3,20,0)&&RG(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(EG(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&_G(this.gl,this.program),EG(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return LG(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),EG(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),PG(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=jG(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&_G(this.gl,this.program),FG(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}EG(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),EG(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=IG(this.gl,2===Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Qx(()=>this.disposed||this.isQueryAvailable(e,Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Nv().platform&&(n=Nv().platform.setTimeoutCustom.bind(Nv().platform)),Qx(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),MG(this.gl,e,this.framebuffer),this.debug&&FG(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(MG(this.gl,this.outputTexture,this.framebuffer),this.debug&&FG(this.gl)):DG(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;MG(r,e,this.framebuffer),this.debug&&FG(r),this.outputTexture=e,EG(r,()=>r.viewport(0,0,t,n)),EG(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),EG(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:UK,XI:WK,Nk:VK,f6:HK,ct:GK,YG:KK,hH:qK,z3:XK,sG:YK,uM:$K,vS:QK,qB:JK,GG:ZK,rq:eq,lg:tq,WR:nq,cu:rq,GE:aq,px:iq,jC:sq,He:oq,hE:lq,BF:cq,Dk:uq,cl:dq,_B:hq,ub:pq,_f:fq,Ku:mq,qy:gq,Zy:xq,bu:vq,zv:yq,dH:bq,HS:wq,yH:kq,l3:Nq,z9:Sq,x6:jq,_m:Cq,eW:Eq,GK:Tq,SP:Iq,yr:Aq,dl:Oq,Dw:_q,xT:Rq,_X:Pq,wz:Mq}=i;function Dq(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>"".concat(e,".").concat(t))}function Fq(e,t){return 1===t?[e]:Dq(e,t)}class Lq{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=kK(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Fq("rc",this.rank),t=mK(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(a,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)a="".concat(e[e.length-1-t],",")+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class zq{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?nK(["r","c","d"],"inputShape"):eK(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":rK(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class Bq{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=Wq(t,n),a=Vq(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=Uq(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const e=this.freeTextures[a].pop();return this.usedTextures[a].push(e),e}let s;return r===kG.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===kG.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===kG.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===kG.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===kG.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),s}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const a=Wq(n,r),i=Vq(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);const s=Uq(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Nv().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const l=this.usedTextures[i],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Uq(e,t,n,r,a){const i=function(e,t){switch(e){case kG.PACKED_2X2_FLOAT32:return FK(t);case kG.PACKED_2X2_FLOAT16:return LK(t);case kG.UNPACKED_FLOAT32:return PK(t);case kG.UNPACKED_FLOAT16:return MK(t);case kG.PACKED_4X1_UNSIGNED_BYTE:return DK(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let s;if(a){const[t,n]=jG(e[0],e[1]);s=t*n}else{const[t,n]=NG(e[0],e[1]);s=t*n}const o=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,i);return s*o}function Wq(e,t){if(e===wG.UPLOAD)return kG.PACKED_2X2_FLOAT32;if(e===wG.RENDER||null==e)return function(e){return Nv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?kG.PACKED_2X2_FLOAT32:kG.UNPACKED_FLOAT32:e?kG.PACKED_2X2_FLOAT16:kG.UNPACKED_FLOAT16}(t);if(e===wG.DOWNLOAD||e===wG.PIXELS)return kG.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Vq(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class Hq{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const Gq="if (isnan(x)) return x;",Kq="return abs(x);";const qq=Gq+"\n  return (x < 0.0) ? 0.0 : x;\n",Xq=Gq+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Yq="return x;";class $q{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class Qq{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length);const t=e.length,n=Fq("rc",t),r=mK(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),s=t<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(a,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}}const Jq=EI,Zq={};const eX=Nv().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class tX extends Fx{nextDataId(){return tX.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Nv().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof BK)t=e;else{const n=yG(Nv().getNumber("WEBGL_VERSION"),e);t=new BK(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=yG(Nv().getNumber("WEBGL_VERSION"));t=new BK(e),this.binaryCache=((n=Nv().getNumber("WEBGL_VERSION"))in Zq||(Zq[n]={}),Zq[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Bq(this.gpgpu),this.numMBBeforeWarning=null==Nv().global.screen?1024:Nv().global.screen.height*Nv().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Dx(this,hN())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,i){const s=this.makeTensorInfo(t,n),o=this.texData.get(s.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[r,a]},o.texShape=[r,a];const l=WG(t),c=new TK(l,!1,i),u=this.runWebGLProgram(c,[s],n,[[r,a]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(s),u.dataId}write(e,t,n){if((Nv().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Nv().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:wG.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,a){if(Nv().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:wG.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:i,shape:s,isPacked:o}=t;if(null!=i){let t;t=o?new $q(s,Yq):new Hq(s,Yq);const n=this.runWebGLProgram(t,[{dataId:e,shape:s,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=hk()),"complex64"===r){u=GT(this.readSync(a.real.dataId),this.readSync(a.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=hk()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:i,complexTensorInfos:s,isPacked:o}=t;if(null!=a){let t;t=o?new $q(r,Yq):new Hq(r,Yq);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:i}],i),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(Nv().getBool("DEBUG")&&!Nv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Nv().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==i&&Nv().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...SG(r))}if(this.pendingRead.set(e,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const e=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]);c=GT(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=Kx(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;EG(e,()=>e.deleteBuffer(u))}const d=this.convertAndCacheOnCPU(e,c),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(e=>e(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&hN().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,isPacked:o,texture:l}=n;if("complex64"===s)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){let n;n=o?new $q(a,Yq):new Hq(a,Yq);const r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:s}],s),i=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),i}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=hN().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:u},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>fk(e));return tS(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return tS(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!TG(n)){if(Nv().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=Kx(t);if(Nv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...SG(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),i}const i=Nv().getBool("WEBGL_PACK")&&!0===r,s=i?WG(t):t,o=i?new CK(s):new jK(s),l=this.runWebGLProgram(o,[{shape:s,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const a=gk(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=gk(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(a);s.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),s.getExtraProfileInfo=()=>e.map((e,t)=>({name:i[t],ms:e})).map(e=>"".concat(e.name,": ").concat(e.ms)).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:hk(),endMs:null}}endTimer(e){return Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=hk(),e)}async getQueryTime(e){if(Nv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:i,slice:s}=this.texData.get(e),o=s&&s.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eX;return Nv().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&Kx(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){zw("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Jq(e.shape,t)}packedUnaryOp(e,t,n){const r=new $q(e.shape,t),a=this.compileAndRun(r,[e],n);return hN().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=bq(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Nv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Kq,e.dtype);const t=new Hq(e.shape,Kq),n=this.compileAndRun(t,[e]);return hN().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&iv(n[0])){const a=n.map(e=>pk(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return hN().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new Qq(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new Lq(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[BG(e.shape),...UG(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[BG(t),...UG(t)],i=new zq(a,n),s=[n],o=this.runWebGLProgram(i,[r],e.dtype,s,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:a,dtype:i}=n;if(null!=t){Vx(Kx(a)<=t[0]*t[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=WG(a);let o;o=r?new SK(s):new NK(s);const l=[null!=t?t:SG(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;const s=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(s.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===bG.DENSE){const t=null!=i?i:SG(e.outputShape);o.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===Kx(s.shape))return o.values=tv(s.dtype,0),s;const l=[],c=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Kx(t.shape)<=Nv().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!HG(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);const u={shape:s.shape,texData:o,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach(t=>{const a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const i=t.texData.texShape,{useSqueezeShape:s,uniformShape:o,keptDims:l}=gK(e.packedInputs,t.shape,i);let c="",u="",d="";if(1===o.length&&e.packedInputs){const e=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==o.length||e.packedInputs){if(o.length>2&&!e.packedInputs){const e=uv(o);d="".concat(e[0]===i[1],"_").concat(e[e.length-1]===i[1])}}else u="".concat(o[0]>1,"_").concat(o[1]>1);const h=t.shape.length,p=2===o.length&&qx(t.shape,i),f=1===Kx(t.shape),m=CS(t.shape,n.shape),g=!e.packedInputs&&h===n.shape.length&&qx(i,n.texData.texShape),x=e.packedInputs||o.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(h,"_").concat(g,"_").concat(s?l:"","_").concat(o.length,"_").concat(f,"_").concat(m,"_").concat(p,"_").concat(c,"_").concat(u,"_").concat(d,"_").concat(x,"_").concat(a)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(a)}});const a=e.userCode;let i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Nv().getNumber("WEBGL_VERSION")),i}(e,c,u),h=this.getAndSaveBinary(d,()=>yK(this.gpgpu,e,c,u)),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),Nv().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(wK(t.inShapeInfos,n),wK([t.outShapeInfo],[r]));const i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Nv().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:a,offset:i,shape:s,texShape:o}=t.variablesLocations[l];if(s){const{uniformShape:n}=gK(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(o&&e.gl.uniform2i(o,r.texData.texShape[0],r.texData.texShape[1]),null!=a)if(r.isUniform)if(Kx(r.shape)<2)e.gl.uniform1f(a,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=r.texData.slice&&null!=i&&e.gl.uniform1i(i,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,a,l)}const o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=uv(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],i=a[l];if("float"===n.type)e.gl.uniform1fv(r,i);else if("vec2"===n.type)e.gl.uniform2fv(r,i);else if("vec3"===n.type)e.gl.uniform3fv(r,i);else if("vec4"===n.type)e.gl.uniform4fv(r,i);else if("int"===n.type)e.gl.uniform1iv(r,i);else if("ivec2"===n.type)e.gl.uniform2iv(r,i);else if("ivec3"===n.type)e.gl.uniform3iv(r,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,i)}}e.executeProgram()}(this.gpgpu,h,c,u,r),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=Nv().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=hk();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Nv().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===a){const e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Nv().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=fN(()=>{if(!Nv().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Nv().getBool("DEBUG");Nv().set("DEBUG",!1);const t=this.abs(hS(1e-8)).dataSync()[0];if(Nv().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:i,usage:s,isPacked:o}=t;if(null!=i)return;const l=null!=this.activeTimers;let c;l&&(c=hk());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Nv().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Nv().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Nv().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map((t,n)=>n>=e.length-2?Ux(e[n]):e[n]),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=ev(e);e=t.newShape}let a=Kx(e),i=null;e.length<=1&&a<=n?i=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);const s=null!=i&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(null==i||s)if(t){const t=BG(e);let n=2,r=2;e.length&&([n,r]=UG(e)),a=t*(n/2)*(r/2),i=Yx(a).map(e=>2*e)}else i=Yx(a);return i}(n,o),t.texShape=u),null!=a){const e=WG(n);let i,s=u[1],d=u[0];const h=a instanceof Uint8Array||a instanceof Uint8ClampedArray;!o&&h||([s,d]=jG(u[0],u[1])),i=o?new IK(e,h):new TK(e,h);const p=h?[d,s]:u,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=h?wG.PIXELS:wG.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),s,d,a);const g=[[d,s]],x=!0,v=this.runWebGLProgram(i,[f],r,g,x),y=this.texData.get(v.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,Nv().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=hk()-c)}else{const e=this.acquireTexture(u,s,r,o);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*av(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await xT(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw OG(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:s,outTexShapeLocation:o}=bK(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=s,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:a,width:i,channels:s}=e,o=hN().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=o.writeTexture(r,t,n,a,i,s);return hN().makeTensorFromDataId(l,t,n,o)}}tX.nextDataId=0;eN()&&xN("webgl",()=>new tX,2);const nX="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class rX{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=TS(t,n),this.enableShapeUniforms=kK(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const aX="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class iX{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=TS(t,n);const a=this.outputShape.length;this.enableShapeUniforms=kK(a);let i="";if(r)if(0===a||1===Kx(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=mK(a);if(i="\n          ".concat(e," coords = getOutputCoords();\n        "),1===a)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=Fq("coords",a);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= outShape[").concat(a," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= outShape[").concat(a," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= ").concat(this.outputShape[a-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= ").concat(this.outputShape[a-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}}function sX(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const oX={kernelName:Vy,backendName:"webgl",kernelFunc:sX};function lX(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=sX({inputs:{x:r},backend:n}),l=sX({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:l},i}const cX={kernelName:ey,backendName:"webgl",kernelFunc:lX},uX="return (a < 0.) ? b * a : a;",dX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const hX={kernelName:Yy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r,s=n.makeTensorInfo([],"float32",uk(i,"float32")),o=Nv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iX(dX,a.shape,s.shape):new rX(uX,a.shape,s.shape),l=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),l}},pX="return (a < 0.) ? b * a : a;",fX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const mX={kernelName:Ab,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=Nv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iX(fX,r.shape,a.shape):new rX(pX,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},gX="if (isnan(x)) return x;";function xX(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:a}=e;return e=>{let{inputs:i,backend:s}=e;const{x:o}=i,l=s,c=a||o.dtype;if(l.shouldExecuteOnCPU([o])&&null!=r){const e=l.texData.get(o.dataId),t=r(e.values,c);return l.makeTensorInfo(o.shape,c,t)}let u;return u=Nv().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new $q(o.shape,n):new Hq(o.shape,t),l.runWebGLProgram(u,[o],c)}}function vX(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:a=!1,cpuKernelImpl:i,dtype:s}=e;return e=>{let{inputs:o,backend:l}=e;const{a:c,b:u}=o,d=l;if(a&&"complex64"===c.dtype){const e=d.texData.get(c.dataId),n=d.texData.get(u.dataId),[r,a]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,r]=e,a={dataId:n.dataId,dtype:n.dtype,shape:c.shape},i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},s=new rX(t,c.shape,u.shape);return d.runWebGLProgram(s,[a,i],Lk(n.dtype,r.dtype))}),i=lX({inputs:{real:r,imag:a},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(a),i}const h=s||Lk(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||d.shouldExecuteOnCPU([c,u]))&&null!=i){const e=d.texData.get(c.dataId).values,t=d.texData.get(u.dataId).values,n="string"===c.dtype?jI(e):e,r="string"===c.dtype?jI(t):t,[a,s]=i(c.shape,u.shape,n,r,h),o=d.makeTensorInfo(s,h);return d.texData.get(o.dataId).values=a,o}let p;return p=Nv().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new iX(n,c.shape,u.shape,r):new rX(t,c.shape,u.shape),d.runWebGLProgram(p,[c,u],h)}}function yX(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":qq;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":Xq;if("prelu"===e)return t?fX:pX;if("leakyrelu"===e)return t?dX:uX;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class bX{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=kK(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),d=r?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(m=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");const x=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",y="rc.x";e[0]<t[0]?v="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(y="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(y,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(x,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const wX="return areal * breal - aimag * bimag;",kX="return areal * bimag + aimag * breal;";class NX{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=TS(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const SX="return a * b;";function jX(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,i=Lk(r.dtype,a.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),i=new NX(wX,r.shape,a.shape),s=new NX(kX,r.shape,a.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],l=n.runWebGLProgram(i,o,"float32"),c=n.runWebGLProgram(s,o,"float32"),u=lX({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,a])){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),[s,o]=cq(r.shape,a.shape,e.values,t.values,i),l=n.makeTensorInfo(o,i);return n.texData.get(l.dataId).values=s,l}let s;return s=Nv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iX(SX,r.shape,a.shape):new rX(SX,r.shape,a.shape),n.runWebGLProgram(s,[r,a],i)}const CX={kernelName:yb,backendName:"webgl",kernelFunc:jX};function EX(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=n,o=Kx(a.shape),l=Jx(i,o),c=Kx(l);Vx(o===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements.");const u=s.texData.get(a.dataId);return!u.isPacked||HG(a.shape,l)||null!==u.texture&&HG(u.shape,l)?(s.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){const r=[BG(e.shape),...UG(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[BG(t),...UG(t)],s=new zq(i,r),o=[r],l=n.runWebGLProgram(s,[a],e.dtype,o,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(a,l,s)}const TX={kernelName:zb,backendName:"webgl",kernelFunc:EX};class IX{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];const s=4*Math.floor(n/4),o=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(Xx(e)?e.toPrecision(2):e,", ones);")}let c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===o,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===o,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===o,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class AX{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s="0.0",o="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",o="min"):"max"===t&&(s="-1.0 / 1e-20",o="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let d="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(o,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(o,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===t?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}}function OX(e,t,n,r){const a=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=CT(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let i=e;for(let s=0;s<a.length;s++){const{inSize:o,windowSize:l,outSize:c}=a[s];let u,d;u="mean"===n?0===s?new IX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},o):new IX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c}):new AX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return i}class _X{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[t[i]];this.outputShape=n,this.rank=n.length;const r=mK(this.rank),a=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(a,"));\n    }\n    ")}}class RX{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=mK(this.rank),a=Dq("rc",this.rank),i=new Array(this.rank);for(let c=0;c<t.length;c++)i[t[c]]=a[c];const s="vec2(".concat(i.slice(-2).join(),")"),o="++".concat(a[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(i.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(o,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(a[this.rank-1],";\n      if(++").concat(a[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(o,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function PX(e,t,n){const r=Nv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RX(e.shape,t):new _X(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function MX(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;return function(e,t,n,r){const a=t,i=e.shape.length,s=Zx(a,e.shape);let o=s;const l=xC(o,i),c=null!=l;let u=e;c&&(u=PX(e,l,r),o=yC(o.length,i)),gC("sum",o,i);const[d,h]=fC(u.shape,o);let p=d;n&&(p=mC(d,s));const f=Kx(h),m=EX({inputs:{x:u},attrs:{shape:[Kx(e.shape)/f,f]},backend:r}),g=OX(m,zk(e.dtype),"sum",r),x=EX({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(u),x}(a,i,s,n)}const DX={kernelName:sw,backendName:"webgl",kernelFunc:MX};function FX(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:i}=r,s=n,o=a.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=a.shape[i[u]];let c;if(s.shouldExecuteOnCPU([a])){const e=s.texData.get(a.dataId).values,t=Pq(e,a.shape,a.dtype,i,l);c=s.makeTensorInfo(l,a.dtype);s.texData.get(c.dataId).values=t}else c=PX(a,i,s);return c}const LX={kernelName:Tw,backendName:"webgl",kernelFunc:FX};function zX(e){let{a:t,b:n,transposeA:r,transposeB:a,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,d=n.shape.length,h=r?t.shape[u-2]:t.shape[u-1],p=a?n.shape[d-1]:n.shape[d-2],f=r?t.shape[u-1]:t.shape[u-2],m=a?n.shape[d-2]:n.shape[d-1],g=t.shape.slice(0,-2),x=n.shape.slice(0,-2),v=Kx(g),y=Kx(x),b=TS(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);Vx(h===p,()=>"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match."));const w=r?[v,h,f]:[v,f,h],k=a?[y,m,p]:[y,p,m],N=EX({inputs:{x:t},backend:i,attrs:{shape:w}}),S=EX({inputs:{x:n},backend:i,attrs:{shape:k}}),j=[N,S],C=Math.max(v,y),E=r?N.shape[1]:N.shape[2],T=null!=s,I=null!=o,A="leakyrelu"===c,O=null!=c?yX(c,!0):null;let _;if((1===f||1===m)&&E>1e3&&!1===(T||I||A||null!=O)){let e=N,t=S;r&&(e=FX({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),j.push(e)),a&&(t=FX({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),j.push(t));const n=1===m;let s=e;1!==m&&(s=EX({inputs:{x:e},backend:i,attrs:{shape:[C,E,1]}}),j.push(s));const o=1===m?2:1;let l=t;n&&(l=EX({inputs:{x:t},backend:i,attrs:{shape:[C,1,E]}}),j.push(l));const c=jX({inputs:{a:s,b:l},backend:i});_=MX({inputs:{x:c},backend:i,attrs:{axis:o,keepDims:!0}}),j.push(c)}else{const e=Lk(t.dtype,n.dtype),c=new bX(w,k,[C,f,m],r,a,T,O,I,A),u=[N,S];if(null!=s&&u.push(s),I&&u.push(o),A){const e=i.makeTensorInfo([],"float32",uk(l,"float32"));u.push(e),j.push(e)}_=i.runWebGLProgram(c,u,e)}const R=EX({inputs:{x:_},backend:i,attrs:{shape:b}});j.push(_);for(const P of j)i.disposeIntermediateTensorInfo(P);return R}const BX={kernelName:Dw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return zX({a:a,b:i,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}},UX="return abs(x);";const WX={kernelName:Tv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=bq(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let a;return a=Nv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new $q(r.shape,UX):new Hq(r.shape,UX),n.runWebGLProgram(a,[r],r.dtype)}},VX=xX({opSnippet:Gq+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),HX={kernelName:Iv,backendName:"webgl",kernelFunc:VX},GX=xX({opSnippet:Gq+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),KX={kernelName:Av,backendName:"webgl",kernelFunc:GX},qX="return a + b;",XX=vX({opSnippet:qX,packedOpSnippet:qX,supportsComplex:!0,cpuKernelImpl:UK}),YX={kernelName:Ov,backendName:"webgl",kernelFunc:XX};class $X{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class QX{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const JX={kernelName:_v,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return sX({inputs:{x:a[0]},backend:r});if(a.length>Nv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),i=e({inputs:a.slice(t),backend:r});return e({inputs:[n,i],backend:r})}const i=a.map(e=>e.dtype).reduce((e,t)=>Lk(e,t)),s=a.map(e=>e.shape),o=Nv().getBool("WEBGL_PACK")?new QX(a[0].shape,s):new $X(a[0].shape,s);return r.runWebGLProgram(o,a,i)}};const ZX={kernelName:Rv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=Zx(i,a.shape);let c=l;const u=xC(c,o);let d=a;null!=u&&(d=FX({inputs:{x:a},backend:n,attrs:{perm:u}}),c=yC(c.length,o)),gC("all",c,o);const[h,p]=fC(d.shape,c),f=EX({inputs:{x:d},backend:n,attrs:{shape:[-1,Kx(p)]}}),m=OX(f,f.dtype,"all",n);let g;if(s){g=EX({inputs:{x:m},backend:n,attrs:{shape:mC(h,l)}})}else g=EX({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}};const eY={kernelName:Pv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=Zx(i,a.shape);let c=l;const u=xC(c,o);let d=a;null!=u&&(d=FX({inputs:{x:a},backend:n,attrs:{perm:u}}),c=yC(c.length,o)),gC("any",c,o);const[h,p]=fC(d.shape,c),f=EX({inputs:{x:d},backend:n,attrs:{shape:[-1,Kx(p)]}}),m=OX(f,f.dtype,"any",n);let g;if(s){g=EX({inputs:{x:m},backend:n,attrs:{shape:mC(h,l)}})}else g=EX({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}};class tY{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const s="max"===t?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(o,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class nY{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Vx(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));const a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");const s=this.outputShape,o=s.length,l=mK(o),c=Fq("coords",o);let u,d;if(1===i){d=o+1;const e=mK(d);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[o-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[o-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[o-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[o-2],";")}else d=o,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[o-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[o-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[o-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[o-2],";");const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],f=h.map(e=>"int "+e),m=Fq("sourceLocR",d-1).concat("inIdx.r"),g=Fq("sourceLocG",d-1).concat("inIdx.g"),x=Fq("sourceLocB",d-1).concat("inIdx.b"),v=Fq("sourceLocA",d-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",b=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),k=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(k,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[o-1]," < ").concat(s[o-1]-1,";\n        bool hasNextRow = ").concat(c[o-2]," < ").concat(s[o-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(b,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(y,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function rY(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);const s=CT(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},l=new tY(o,n,null==r),c=[t];null!=r&&c.push(r);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const d=rY(e,t,n,u);return e.disposeIntermediateTensorInfo(u),d}function aY(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=null!=r?r.shape:t.shape,i=CT(a[a.length-1]),s=new nY(a,i,n,null==r),o=null==r?[t]:[t,r],l=e.runWebGLProgram(s,o,"int32");if(l.shape.length===t.shape.length){const r=aY(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function iY(e,t,n,r){const a=[n];if(gC("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Nv().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],i=e.texData.get(t.dataId);let s=t;null!==i&&i.isPacked&&(s=e.unpackTensor(t),n.push(s));const[o,l]=fC(s.shape,a),c=Kx(l),u=EX({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});n.push(u);const d=rY(e,u,r);n.push(d);const h=EX({inputs:{x:d},backend:e,attrs:{shape:o}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return aY(e,t,r)}const sY={kernelName:Mv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;let s=Zx(i,a.shape);const o=xC(s,a.shape.length);let l=a;const c=[];null!=o&&(l=FX({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=yC(s.length,l.shape.length)),gC("argMax",[s[0]],l.shape.length);const u=iY(n,l,s[0],"max");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}};const oY={kernelName:Dv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;let s=Zx(i,a.shape);const o=xC(s,a.shape.length);let l=a;const c=[];null!=o&&(l=FX({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=yC(s.length,l.shape.length)),gC("argMin",[s[0]],l.shape.length);const u=iY(n,l,s[0],"min");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}},lY=xX({opSnippet:Gq+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),cY={kernelName:Fv,backendName:"webgl",kernelFunc:lY},uY=xX({opSnippet:Gq+"return log(x + sqrt(x * x + 1.0));"}),dY={kernelName:Lv,backendName:"webgl",kernelFunc:uY},hY=xX({opSnippet:Gq+"\n  return atan(x);\n"}),pY={kernelName:zv,backendName:"webgl",kernelFunc:hY},fY=vX({opSnippet:nX+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+aX+"\n  return result;\n"}),mY={kernelName:Uv,backendName:"webgl",kernelFunc:fY},gY=xX({opSnippet:Gq+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),xY={kernelName:Bv,backendName:"webgl",kernelFunc:gY};class vY{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let x="0.0";if(f||(x="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?a?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / max(count, 1.0)");const y=4*Math.floor(i/4),b=i%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(y,";\n          if (").concat(1===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}class yY{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let y="0.0";if(v||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(x,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?a?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / max(count, 1.0)");const w=4*Math.floor(i/4),k=i%4,N="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(x,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(N,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(N,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(N,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(N,"\n            }\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}const bY={kernelName:Wv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;QG(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;Vx(kj(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=hj(a.shape,i,s,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&qx(c.inShape,c.outShape))return sX({inputs:{x:a},backend:n});const u=new vY(c,"avg",!1);return n.runWebGLProgram(u,[a],"float32")}};const wY={kernelName:Hv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=pj(a.shape,i,s,[1,1,1],o,l,c),d=new yY(u,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}};class kY{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class NY{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(a,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const SY={kernelName:Gv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=pj(s.shape,o,l,[1,1,1],c,u),h=new NY(d);return n.runWebGLProgram(h,[a],s.dtype)}};const jY={kernelName:Vv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;QG([a,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=hj(s.shape,o,l,1,c),d=new kY(u);return n.runWebGLProgram(d,[a],s.dtype)}};const CY={kernelName:Kv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:s,transposeB:o}=r;return zX({a:a,b:i,transposeA:s,transposeB:o,backend:n})}};class EY{constructor(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],TS(e,t),TS(e,n);let s="0.0";null!=r&&(TS(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";null!=a&&(TS(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(o,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class TY{constructor(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],TS(e,t),TS(e,n);let s="vec4(0.0)";null!=r&&(TS(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=a&&(TS(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(o,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const IY={kernelName:Ly,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,mean:i,variance:s,offset:o,scale:l}=t;Vx(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Vx(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Vx(null==l||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=[a,i,s];let d=null;null!=o&&(d=o.shape,u.push(o));let h=null;null!=l&&(h=l.shape,u.push(l));const p=Nv().getBool("WEBGL_PACK_NORMALIZATION")?new TY(a.shape,i.shape,s.shape,d,h,c):new EY(a.shape,i.shape,s.shape,d,h,c);return n.runWebGLProgram(p,u,u[0].dtype)}};class AY{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=mK(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return OY.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const a=e.map((e,t)=>"sourceLoc.".concat(OY[t]," = start[").concat(t,"] + coords.").concat(OY[t],";"));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(a.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const OY=["x","y","z","w","u","v"];class _Y{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=mK(this.rank),n=Fq("coords",this.rank),r=Fq("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),i="getChannel(getSource(".concat(r.join(),"), ").concat(a,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(r[this.rank-1],";\n      }\n    "),o=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((e,t)=>"start[".concat(t,"]")).join(),");"):e.map((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(o,"\n        setOutput(result);\n      }\n    ")}}function RY(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r,[o,l]=ij(a,i,s);if(GS(a,o,l),0===Kx(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){const e=n.texData.get(a.dataId),t=wq(e.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}const{isPacked:c}=n.texData.get(a.dataId),u=rj(a.shape,o,l);if(c||!u){const e=Nv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _Y(l):new AY(l),t=[o];return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){const a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=e.dtype;let o=aj(t,uv(e.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};const l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}(a,o,l,n)}const PY={kernelName:Zb,backendName:"webgl",kernelFunc:RY},MY={kernelName:qv,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;Vx(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((e,t)=>e*t),l=TT(a.shape,i,o),c=IT(l.length,i.length),u=AT(a.shape,i,o),d=OT(s,i.length),h=_T(u,s,i.length),p=[],f=EX({inputs:{x:a},backend:n,attrs:{shape:l}}),m=FX({inputs:{x:f},backend:n,attrs:{perm:c}}),g=EX({inputs:{x:m},backend:n,attrs:{shape:u}}),x=RY({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),x}};const DY={kernelName:Xv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=n.readSync(a.dataId),l=n.readSync(i.dataId),c=WK(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}};const FY={kernelName:Yv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,i=Nv().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Nv().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||1===s){const e=n.texData.get(r.dataId).values,t=n.texData.get(a.dataId).values,[i,s]=HK(r.shape,a.shape,e,t,r.dtype),o=n.makeTensorInfo(s,r.dtype);return n.texData.get(o.dataId).values=i,o}let o;return o=i?new iX("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,a.shape,!1):new rX("\n  return float(int(a.r) & int(b.r));\n",r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}};const LY={kernelName:$v,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=TS(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},zY=vX({opSnippet:"return float(a != b);",cpuKernelImpl:dq,dtype:"bool"}),BY={kernelName:wb,backendName:"webgl",kernelFunc:zY};function UY(e){const{inputs:t,backend:n}=e,{input:r}=t;return sX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const WY={kernelName:Db,backendName:"webgl",kernelFunc:UY};const VY={kernelName:Qv,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:a}=t,{x:i}=n,{dtype:s}=a;if("complex64"===s){if("complex64"===i.dtype)return sX({inputs:{x:i},backend:r});const t=_C(i.shape),n=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),a=lX({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===i.dtype){const t=UY({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:s}});return r.disposeIntermediateTensorInfo(t),n}if(!rv(i.dtype,s)){const e=sX({inputs:{x:i},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:s}}if(r.shouldExecuteOnCPU([i])){const e=r.texData.get(i.dataId).values,[t,n,a]=GK(e,i.shape,i.dtype,s);return r.makeTensorInfo(t,n,a)}if("int32"===s)return function(e,t){const n=new Hq(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===s){const e=r.makeTensorInfo([],"bool",tv("bool",1)),t=zY({inputs:{a:i,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(s))}},HY="return ceil(x);",GY=xX({opSnippet:HY,packedOpSnippet:HY,cpuKernelImpl:KK}),KY={kernelName:Jv,backendName:"webgl",kernelFunc:GY};class qY{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class XY{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const YY={kernelName:Zv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:s}=r;let o;o=Nv().getBool("WEBGL_PACK_CLIP")?new XY(a.shape):new qY(a.shape);const l=[[i],[s]];return n.runWebGLProgram(o,[a],a.dtype,l)}};class $Y{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function QY(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const JY={kernelName:ty,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),i=new $Y(r.shape),s=[QY(r,a.complexTensorInfos.real),QY(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}};class ZY{constructor(e){this.outputShape=[],this.outputShape=yT(e,1),this.variableNames=e.map((e,t)=>"T".concat(t));const t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<t.length;i++){const e=t[i-1];n.push("else if (yC < ".concat(t[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(e,"));"))}const r=t.length,a=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(a,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class e${constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=yT(e,t);const n=this.outputShape,r=n.length,a=mK(r),i=Fq("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T".concat(t));const o=new Array(e.length-1);o[0]=e[0][t];for(let f=1;f<o.length;f++)o[f]=o[f-1]+e[f][t];const l=s[t],c=s.slice(-2),u=s.join();let d="if (".concat(l," < ").concat(o[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<o.length;f++){const e=o[f-1];d+="\n        if (".concat(l," < ").concat(o[f],"  && ").concat(l," >= ").concat(o[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(t$(s,l,e),"),\n            vec2(").concat(t$(c,l,e),"));\n        }")}const h=o.length,p=o[o.length-1];d+="\n        return getChannel(\n          getT".concat(h,"(").concat(t$(s,l,p),"),\n          vec2(").concat(t$(c,l,p),"));"),this.userCode="\n      float getValue(".concat(s.map(e=>"int "+e),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2]," &&\n            ").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}}function t$(e,t,n){const r=e.indexOf(t),a=e.map((e,t)=>t===r?"".concat(e," - ").concat(n):e);return a.join()}function n$(e){const{inputs:t,backend:n}=e,{input:r}=t;return sX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const r$={kernelName:Gy,backendName:"webgl",kernelFunc:n$};function a$(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map(e=>UY({inputs:{input:e},backend:n})),a=e.map(e=>n$({inputs:{input:e},backend:n})),i=a$(r,t,n),s=a$(a,t,n),o=lX({inputs:{real:i,imag:s},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),o}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){const a=e.map(e=>{const r=Kx(e.shape.slice(t));return EX({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})}),i=a.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),s=yT(a.map(e=>e.shape),1),o=1===a[0].shape[0],l=qK(i,s,r,o),c=yT(e.map(e=>e.shape),t),u=n.makeTensorInfo(c,r,l);return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}const i=e.filter(e=>Kx(e.shape)>0),s=Nv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(1===i.length){const t=s?new Hq(e[0].shape,Yq):new $q(e[0].shape,Yq);return n.runWebGLProgram(t,e,r)}const o=Nv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const e=[];for(let a=0;a<i.length;a+=o){const r=i.slice(a,a+o);e.push(a$(r,t,n))}const r=a$(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(s){const e=new e$(i.map(e=>e.shape),t);return n.runWebGLProgram(e,i,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=yT(e.map(e=>e.shape),t),a=e.map(e=>EX({inputs:{x:e},attrs:{shape:[-1,Kx(e.shape.slice(t))]},backend:n}));return{tensors2D:a,outShape:r}}(i,t,n),u=new ZY(l.map(e=>e.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(e=>n.disposeIntermediateTensorInfo(e));const h=EX({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function i$(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=Zx(a,t[0].shape)[0],s=t.map(e=>e.shape);vT(s,i);const o=yT(t.map(e=>e.shape),i);if(0===Kx(o))return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(e=>Kx(e.shape)>0);return 1===l.length?sX({inputs:{x:l[0]},backend:n}):a$(l,i,n)}const s$={kernelName:ny,backendName:"webgl",kernelFunc:i$};class o${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,x=m?2:3,v=m?3:1;let y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),b="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(y,"\n\n      const ivec2 strides = ivec2(").concat(o,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(x,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")}}class l${constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(a,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(o,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class c${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kK(this.outputShape.length);const i=e.padInfo.left,s=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)d+="\n           vec4 xTexelC".concat(2*m,";\n           int xTexelC").concat(2*m,"Ready;\n           vec4 xTexelC").concat(2*m+1,";\n           int xTexelC").concat(2*m+1,"Ready;\n           vec4 xC").concat(m,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<c;m++)d+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){const t=2*m;if(d+="\n           xC = xCCorner + ".concat(t*o,";\n           "),1===s){if(t<c&&(i%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===o&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){const e=i%2===0?Ux(o):o;o%2===0&&i%2===1||o%2!==0&&i%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=o>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(i%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let h="",p="";n&&(h=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):a?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class u${constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=kK(this.outputShape.length);const{dataFormat:n}=t,r=ZG(),a="channelsLast"===n,i=a?1:2,s=a?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(o,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(a,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function d$(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function h$(e){let{x:t,filter:n,convInfo:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}=e;const c=t.shape,u=a.texData.get(t.dataId),d=r.inChannels,h=c[0]*c[1]*c[2],p=r.outChannels,f="channelsLast"===r.dataFormat,m=!1;let g;const x=[];if(null!=s){const e=d$(s.shape,f);null!=e&&(s=EX({inputs:{x:s},backend:a,attrs:{shape:e}}),x.push(s))}if(null!=i){const e=d$(i.shape,f);null!=e&&(i=EX({inputs:{x:i},backend:a,attrs:{shape:e}}),x.push(i))}if(!((1===h||1===p)&&d>1e3)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&qx(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),d={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},h=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,Vx(HG(u.shape,d.shape),()=>"packed reshape ".concat(u.shape," to ").concat(d.shape," isn't free"));const p=EX({inputs:{x:n},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}});x.push(p);const f=zX({a:d,b:p,backend:a,transposeA:false,transposeB:m,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:o}),v=a.texData.get(f.dataId);Vx(v.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=h,v.shape=r.outShape,g=sX({inputs:{x:f},backend:a}),g.shape=r.outShape,x.push(f)}else{const e=r.outHeight*r.outWidth,c=EX({inputs:{x:t},backend:a,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=EX({inputs:{x:n},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}}),d=zX({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:m,backend:a,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:o});g=EX({inputs:{x:d},backend:a,attrs:{shape:r.outShape}}),x.push(c),x.push(u),x.push(d)}for(const v of x)a.disposeIntermediateTensorInfo(v);return g}function p$(e){let{x:t,filter:n,convInfo:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:d,outWidth:h,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=c*u*d,x=p*h,v=[r.batchSize,g,x],y=[];if(null!=s){const e=d$(s.shape,m);null!=e&&(s=EX({inputs:{x:s},backend:a,attrs:{shape:e}}),y.push(s))}if(null!=i){const e=d$(i.shape,m);null!=e&&(i=EX({inputs:{x:i},backend:a,attrs:{shape:e}}),y.push(i))}const b=EX({inputs:{x:n},backend:a,attrs:{shape:[1,g,Kx(n.shape)/g]}});y.push(b);const w=new u$(v,r),k=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],N=a.runWebGLProgram(w,[t],"float32",k),S=EX({inputs:{x:N},backend:a,attrs:{shape:v}});y.push(N),y.push(S);const j=null!=i,C=null!=s,E="leakyrelu"===l,T=l?yX(l,!0):null,I=new bX(m?S.shape:b.shape,m?b.shape:S.shape,m?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,j,T,C,E),A=m?[S,b]:[b,S];if(i&&A.push(i),C&&A.push(s),E){const e=a.makeTensorInfo([],"float32",uk(o,"float32"));A.push(e),y.push(e)}const O=a.runWebGLProgram(I,A,"float32"),_=EX({inputs:{x:O},backend:a,attrs:{shape:r.outShape}});y.push(O);for(const R of y)a.disposeIntermediateTensorInfo(R);return _}const f$={kernelName:ry,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=Sj(l),h=fj(a.shape,i.shape,s,c,o,u,!1,d);let p;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&Nv().getBool("WEBGL_EXP_CONV")){const e=new c$(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(e,[a,i],"float32",t)}else if(Nv().getBool("WEBGL_CONV_IM2COL"))p=p$({x:a,filter:i,convInfo:h,backend:n});else{const e=new o$(h);p=n.runWebGLProgram(e,[a,i],"float32")}else p=h$({x:a,filter:i,convInfo:h,backend:n});const f=EX({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class m${constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class g${constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=i?1:2,c=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class x${constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(a,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class v${constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(o,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(a,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const y$={kernelName:ay,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=Sj(l),h=fj(a.shape,u,s,1,o,c,!1,d),p=new m$(h);return n.runWebGLProgram(p,[a,i],"float32")}};class b${constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=kK(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const w$={kernelName:iy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=Sj(c),h=fj(s,i.shape,o,1,l,u,!1,d);if(Nv().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[h.strideHeight,h.strideWidth]],t=new b$(h);return n.runWebGLProgram(t,[a,i],"float32",e)}{const e=new g$(h);return n.runWebGLProgram(e,[a,i],"float32")}}};const k$={kernelName:sy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=mj(a.shape,i.shape,s,l,o),u=new l$(c);return n.runWebGLProgram(u,[a,i],"float32")}};const N$={kernelName:oy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r,c=mj(a.shape,l,s,1,o),u=new x$(c);return n.runWebGLProgram(u,[a,i],"float32")}};const S$={kernelName:ly,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r,c=mj(l,i.shape,o,1,s),u=new v$(c);return n.runWebGLProgram(u,[a,i],"float32")}},j$=xX({opSnippet:gX+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(aX,"\n  return result;\n")}),C$={kernelName:cy,backendName:"webgl",kernelFunc:j$},E$=xX({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),T$={kernelName:uy,backendName:"webgl",kernelFunc:E$};class I${constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,s,o,l]=e,[c]=t,[u,d]=n;this.outputShape=[c,u,d,l];const h="bilinear"===r?1:0,[p,f]=["".concat(s-1,".0"),"".concat(o-1,".0")],[m,g,x]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,y,b]=d>1?["".concat((o-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(y,";\n\n        float in_y = ").concat(x,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n        float in_x = ").concat(b,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const A$={kernelName:py,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,u=new I$(a.shape,i.shape,o,l,c);return n.runWebGLProgram(u,[a,i,s],"float32")}};var O$;!function(e){e.Prod="*",e.Sum="+"}(O$||(O$={}));class _${constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,i=this.op===O$.Prod?"1.0":"0.0",s=n?i:"getX(".concat(R$(a,"coords",this.op),")"),o=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=r?"end != ".concat(o-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(o):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(mK(a)," coords = getOutputCoords();\n        int end = ").concat(P$(a,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(P$(a,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(R$(a,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function R$(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function P$(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function M$(e,t,n,r,a,i){const s=t.shape.length,o=xC([r],s);let l=t;null!=o&&(l=FX({inputs:{x:t},backend:n,attrs:{perm:o}}));const c=yC(1,s)[0];if(c!==s-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const u=l.shape[c];let d=sX({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const t=new _$(e,l.shape,!1,i),r=[[h]],a=d;d=n.runWebGLProgram(t,[d],d.dtype,r),n.disposeIntermediateTensorInfo(a)}if(a){const t=new _$(e,l.shape,a,i),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=o){const e=FX({inputs:{x:d},backend:n,attrs:{perm:vC(o)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}const D$={kernelName:dy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return M$(O$.Prod,a,n,i,s,o)}};const F$={kernelName:hy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return M$(O$.Sum,a,n,i,s,o)}};const L$={kernelName:fy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(i.dataId),r=WK(e,t,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(i),r=VK(e,t,s,o);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};class z${constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const B$={kernelName:my,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=("NHWC"===s?a.shape[1]:a.shape[2])*i,c=("NHWC"===s?a.shape[2]:a.shape[3])*i,u=("NHWC"===s?a.shape[3]:a.shape[1])/(i*i),d=new z$("NHWC"===s?[o,l,c,u]:[o,u,l,c],i,s);return n.runWebGLProgram(d,[a],a.dtype)}};class U${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kK(this.outputShape.length);const i=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels;let l="",c="";n&&(l=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}}class W${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kK(this.outputShape.length);const i=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");h+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let g=0;g<u;g++)h+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(d+1)/2;g++){const e=2*g;if(h+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===o){if(e<u&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),h+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=s%2===0?Ux(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),h+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):h+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(h+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(h+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(h+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(p=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const V$={kernelName:gy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),Vx(kj(s,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(u,"'"));const d=fj(a.shape,i.shape,s,u,o,c,!0);let h;h=Nv().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new W$(d):new U$(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",p)}};class H${constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class G${constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(o,"; dm++) {\n              int d2 = d1 * ").concat(o," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const K$={kernelName:xy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,d=fj(a.shape,u,s,o,l,c,!0),h=new H$(d);return n.runWebGLProgram(h,[a,i],"float32")}};const q$={kernelName:vy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,d=fj(u,i.shape,s,o,l,c,!0),h=new G$(d);return n.runWebGLProgram(h,[a,i],"float32")}};class X${constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const Y$={kernelName:yy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],i=Kx(r.shape),s=EX({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new X$(i),l=n.runWebGLProgram(o,[s],s.dtype),c=EX({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}};class $${constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:c}=e,{top:u,left:d}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(o,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const Q$={kernelName:by,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=dj(a.shape,i.shape,s,o,"NHWC",l);let u;const d=new $$(c);u=n.runWebGLProgram(d,[a,i],"float32");const h=EX({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}};const J$={kernelName:jy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=rI(a,i.length);iI(s.length,l,i);const{path:c,steps:u}=sI(o,l),d=u.length;let h=null,p=s.length;const f=[];for(let m=0;m<d;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=aI(p,l[e]);let a;oI(t)?a=i[e]:(a=FX({inputs:{x:i[e]},backend:n,attrs:{perm:t}}),f.push(a));const s=a.shape.slice();for(let e=0;e<r.length;++e)s.splice(r[e],0,1);qx(a.shape,s)||(a=EX({inputs:{x:a},backend:n,attrs:{shape:s}}),f.push(a)),null===h?h=a:(h=jX({inputs:{a:a,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=MX({inputs:{x:h},backend:n,attrs:{axis:c[m]-(s.length-p),keepDims:!1}}),f.push(h)),p--)}for(const m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}},Z$=xX({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),eQ={kernelName:Cy,backendName:"webgl",kernelFunc:Z$},tQ={kernelName:Ey,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=Nv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iX("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new rX("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},nQ=vX({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:XK}),rQ={kernelName:Iy,backendName:"webgl",kernelFunc:nQ},aQ=xX({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(zT,";\n  float a1 = ").concat(BT,";\n  float a2 = ").concat(UT,";\n  float a3 = ").concat(WT,";\n  float a4 = ").concat(VT,";\n  float a5 = ").concat(HT,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),iQ={kernelName:Ty,backendName:"webgl",kernelFunc:aQ},sQ=xX({opSnippet:gX+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:YK,dtype:"float32"}),oQ={kernelName:Ay,backendName:"webgl",kernelFunc:sQ};function lQ(e){const{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:i}=t,s=i.shape.length,o=i.shape.slice();let l=a;return a<0&&(Vx(-(s+1)<=a,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+a+1),o.splice(l,0,1),EX({inputs:{x:i},backend:r,attrs:{shape:o}})}const cQ={kernelName:Oy,backendName:"webgl",kernelFunc:lQ},uQ="return exp(x) - 1.0;",dQ=xX({opSnippet:uQ,packedOpSnippet:uQ,cpuKernelImpl:$K}),hQ={kernelName:_y,backendName:"webgl",kernelFunc:dQ};class pQ{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=n?"".concat(r,".0"):"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));s="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(a,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(s,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function fQ(e,t,n){const r=n.texData.get(e.dataId),a=Kx(e.shape),i=e.shape[e.shape.length-1],s=EX({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),o=s.shape,l=new pQ("real",o,t),c=new pQ("imag",o,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],d=n.runWebGLProgram(l,u,"float32"),h=n.runWebGLProgram(c,u,"float32"),p=lX({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const f=EX({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),f}const mQ={kernelName:Ry,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return fQ(r,!1,n)}};class gQ{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function xQ(e){const{backend:t,attrs:n}=e,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||ov(a),"string"===i){const e=nv(i,Kx(r));return e.fill(a),t.makeTensorInfo(r,i,e)}{const e=new gQ(r,a),n=[[a]];return t.runWebGLProgram(e,[],i,n)}}const vQ={kernelName:Py,backendName:"webgl",kernelFunc:xQ};class yQ{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const bQ={kernelName:My,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,a=n,i=new yQ(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},wQ="return floor(x);",kQ=xX({opSnippet:wQ,packedOpSnippet:wQ,cpuKernelImpl:QK}),NQ={kernelName:Dy,backendName:"webgl",kernelFunc:kQ},SQ=vX({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),jQ={kernelName:Fy,backendName:"webgl",kernelFunc:SQ};class CQ{constructor(e){this.variableNames=["A"];const t=ZG(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class EQ{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ZG(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const TQ={kernelName:Pw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:a}=t;const{numChannels:i}=r,s="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,o="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[c,l],d=[c,l,i];if(o||s){const e=Nv().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=IQ&&e===AQ||(AQ=e,IQ=document.createElement("canvas").getContext("2d",{willReadFrequently:AQ})),IQ.canvas.width=l,IQ.canvas.height=c,IQ.drawImage(a,0,0,l,c),a=IQ.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=wG.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);const p=Nv().getBool("WEBGL_PACK")?new EQ(d):new CQ(d),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}};let IQ,AQ=Nv().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const OQ={kernelName:Fw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=Sj(u),g=fj(a.shape,i.shape,l,d,c,h,!1,m);let x;const v=[],y=null!=s,b=null!=o,w="leakyrelu"===p,k=()=>{const e=[a,i],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=EX({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(y&&e.push(t(s,u)),b&&e.push(t(o,u)),w){const t=n.makeTensorInfo([],"float32",uk(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&Nv().getBool("WEBGL_EXP_CONV")){const e=p?yX(p,!0):null,t=new c$(g,y,e,b,w),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],a=k();x=n.runWebGLProgram(t,a,"float32",r)}else if(Nv().getBool("WEBGL_CONV_IM2COL"))x=p$({x:a,filter:i,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{const e=p?yX(p,!1):null,t=new o$(g,y,e,b,w),r=k();x=n.runWebGLProgram(t,r,"float32")}else x=h$({x:a,filter:i,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});const N=EX({inputs:{x:x},backend:n,attrs:{shape:g.outShape}});return v.push(x),v.forEach(e=>n.disposeIntermediateTensorInfo(e)),N}};const _Q={kernelName:Lw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=[];let m=u;null==m&&(m=[1,1]),Vx(kj(l,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(m,"'"));const g=fj(a.shape,i.shape,l,m,c,d,!0),x=Nv().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=h?yX(h,x):null,y=[a,i],b=null!=s,w=null!=o,k="leakyrelu"===h;if(b&&y.push(s),w&&y.push(o),k){const e=n.makeTensorInfo([],"float32",uk(p,"float32"));y.push(e),f.push(e)}let N;N=x?new W$(g,b,v,w,k):new U$(g,b,v,w,k);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],j=n.runWebGLProgram(N,y,"float32",S);return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),j}};class RQ{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const a=mK(n.length);let i="\n    int index;";for(let s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(a," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const PQ={kernelName:By,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=a.shape,s=i[i.length-1],o=Kx(r.shape),[l,c,u,d]=RT(r,a),h=EX({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),p=EX({inputs:{x:r},backend:n,attrs:{shape:[Kx(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){const e=n.readSync(a.dataId),t=n.bufferSync(r),i=JK(e,t,r.dtype,c,s,u,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,i.values)}const f=new RQ(s,d,[c,u],r.shape),m=n.runWebGLProgram(f,[p,h],p.dtype),g=EX({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class MQ{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=mK(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push("".concat(t[r]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function DQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r,l=Zx(s,a.shape)[0];if(Nv().get("DEBUG")){const e=n.readSync(i.dataId),t=a.shape[l];for(let n=0;n<e.length;++n){const r=e[n];Vx(r<=t-1&&r>=0,()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]"))}}const c=SI(a,i,l,o),u=Kx(i.shape),d=[],h=EX({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=EX({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){const e=n.bufferSync(p),t=n.bufferSync(h),r=ZK(t,e,f);return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const m=new MQ(h.shape,f),g=n.runWebGLProgram(m,[h,p],h.dtype);d.push(g);const x=EX({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),x}const FQ={kernelName:zy,backendName:"webgl",kernelFunc:DQ},LQ=vX({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:eq,dtype:"bool"}),zQ={kernelName:Uy,backendName:"webgl",kernelFunc:LQ},BQ=vX({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:tq}),UQ={kernelName:Wy,backendName:"webgl",kernelFunc:BQ};const WQ={kernelName:Hy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return fQ(r,!0,n)}},VQ=xX({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),HQ={kernelName:Ky,backendName:"webgl",kernelFunc:VQ},GQ=xX({opSnippet:"return float(isinf(x));",dtype:"bool"}),KQ={kernelName:qy,backendName:"webgl",kernelFunc:GQ},qQ=xX({opSnippet:"return float(isnan(x));",dtype:"bool"}),XQ={kernelName:Xy,backendName:"webgl",kernelFunc:qQ},YQ=vX({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:nq,dtype:"bool"}),$Q={kernelName:$y,backendName:"webgl",kernelFunc:YQ},QQ=vX({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:rq,dtype:"bool"}),JQ={kernelName:Qy,backendName:"webgl",kernelFunc:QQ};const ZQ={kernelName:Jy,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=aq(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}},eJ=xX({opSnippet:gX+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:iq}),tJ={kernelName:Zy,backendName:"webgl",kernelFunc:eJ},nJ=xX({opSnippet:gX+"\n  return log(1.0 + x);\n"}),rJ={kernelName:eb,backendName:"webgl",kernelFunc:nJ},aJ=vX({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),iJ={kernelName:tb,backendName:"webgl",kernelFunc:aJ},sJ=xX({opSnippet:"return float(!(x >= 1.0));"}),oJ={kernelName:nb,backendName:"webgl",kernelFunc:sJ},lJ=vX({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),cJ={kernelName:rb,backendName:"webgl",kernelFunc:lJ};class uJ{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const i=t,s=e[3]-1;let o;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");o=.5===a?"inversesqrt(".concat(l,")"):1===a?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")}}class dJ{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=t,s=e[3]-1;let o;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");o=.5===a?"inversesqrt(".concat(l,")"):1===a?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")}}const hJ={kernelName:ab,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r,c=Nv().getBool("WEBGL_PACK_NORMALIZATION")?new dJ(a.shape,i,s,o,l):new uJ(a.shape,i,s,o,l);return n.runWebGLProgram(c,[a],a.dtype)}};class pJ{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(a,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(a,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const fJ={kernelName:ib,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r,d=new pJ(a.shape,o,l,c,u);return n.runWebGLProgram(d,[a,i,s],a.dtype)}};function mJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,l=Zx(i,a.shape);let c=l;const u=xC(c,o),d=null!=u,h=n.shouldExecuteOnCPU([a]);let p=a;if(d){if(h){const e=n.texData.get(p.dataId).values,t=new Array(o);for(let n=0;n<t.length;n++)t[n]=a.shape[u[n]];const r=Pq(e,a.shape,a.dtype,u,t);p=n.makeTensorInfo(t,a.dtype);n.texData.get(p.dataId).values=r}else p=PX(a,u,n);c=yC(c.length,o)}gC("max",c,o);const[f,m]=fC(p.shape,c);let g,x=f;if(s&&(x=mC(f,l)),h){const e=n.texData.get(p.dataId).values,t=sq(e,Kx(m),x,a.dtype);g=n.makeTensorInfo(x,a.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const a=Kx(t),i=EX({inputs:{x:e},attrs:{shape:[Kx(e.shape)/a,a]},backend:r}),s=OX(i,e.dtype,"max",r),o=EX({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}(p,m,x,n);return d&&n.disposeIntermediateTensorInfo(p),g}const gJ={kernelName:sb,backendName:"webgl",kernelFunc:mJ},xJ=vX({opSnippet:nX+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+aX+"\n  return result;\n",cpuKernelImpl:oq}),vJ={kernelName:ob,backendName:"webgl",kernelFunc:xJ};const yJ={kernelName:lb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;QG(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;Vx(kj(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=hj(a.shape,i,s,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&qx(c.inShape,c.outShape))return sX({inputs:{x:a},backend:n});const u=new vY(c,"max",!1);return n.runWebGLProgram(u,[a],a.dtype)}};const bJ={kernelName:ub,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=pj(a.shape,i,s,[1,1,1],o,c,l),d=new yY(u,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}};class wJ{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,s=a-1-e.padInfo.top,o=i-1-e.padInfo.left,l=a*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class kJ{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=o-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=o*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(o,";\n           wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const NJ={kernelName:db,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=pj(s.shape,o,l,[1,1,1],c,u),h=new yY(d,"max",!0),p=n.runWebGLProgram(h,[s],s.dtype),f=new kJ(d),m=n.runWebGLProgram(f,[a,p],s.dtype);return n.disposeIntermediateTensorInfo(p),m}};const SJ={kernelName:cb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;QG([i,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=hj(o.shape,l,c,1,u,d),p=new vY(h,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new wJ(h),g=n.runWebGLProgram(m,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),g}};const jJ={kernelName:hb,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=n,c=r;Vx(4===a.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));const u=[1,1];Vx(kj(s,u),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(u,"'"));const d=hj(a.shape,i,s,u,o),[h,p]=function(e,t,n,r){let a=new vY(n,"max",!1);const i=r.runWebGLProgram(a,[e],"float32");return a=new vY(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,l,d,c);return[h,p]}};const CJ={kernelName:pb,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{keepDims:i,axis:s}=n,o=r,l=a.shape.length,c=Zx(s,a.shape);let u=c;const d=xC(u,l),h=null!=d,p=o.shouldExecuteOnCPU([a]),f=[];let m=a;if(h){if(p){const e=o.texData.get(m.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=a.shape[d[r]];const n=Pq(e,a.shape,a.dtype,d,t);m=o.makeTensorInfo(t,a.dtype);o.texData.get(m.dataId).values=n}else m=PX(a,d,o);f.push(m),u=yC(u.length,l)}gC("sum",u,l);const[g,x]=fC(m.shape,u);let v=g;i&&(v=mC(g,c));const y=function(e,t,n,r){const a=Kx(t),i=EX({inputs:{x:e},attrs:{shape:[Kx(e.shape)/a,a]},backend:r}),s=OX(i,"float32","mean",r),o=EX({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}(m,x,v,o);for(const b of f)o.disposeIntermediateTensorInfo(b);return y}};const EJ={kernelName:fb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=Zx(i,a.shape);let c=l;const u=xC(c,o);let d=a;null!=u&&(d=FX({inputs:{x:a},backend:n,attrs:{perm:u}}),c=yC(c.length,a.shape.length)),gC("min",c,o);const[h,p]=fC(d.shape,c),f=EX({inputs:{x:d},backend:n,attrs:{shape:[-1,Kx(p)]}}),m=OX(f,f.dtype,"min",n);let g;if(s){g=EX({inputs:{x:m},backend:n,attrs:{shape:mC(h,l)}})}else g=EX({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(d),g}},TJ=vX({opSnippet:nX+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+aX+"\n  return result;\n",cpuKernelImpl:lq}),IJ={kernelName:mb,backendName:"webgl",kernelFunc:TJ};class AJ{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=mK(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(a," coords = outC - start;\n        setOutput(getX(").concat(o,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class OJ{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=mK(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=Fq("rc",r),l=Fq("source",r),c="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),d="reflect"===n?0:1;let h="";if(1===r){const e="\n        ".concat(a," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(a," source = rc;\n        ").concat(a," lt = ").concat(a,"(lessThan(source, start));\n        ").concat(a," gte = ").concat(a,"(greaterThanEqual(source, end));\n        ").concat(a," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(o[r-2]," += 1;\n        if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(o[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const _J={kernelName:gb,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a}=t,{paddings:i,mode:s}=r,o=Nv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OJ(a.shape,i,s):new AJ(a.shape,i,s);return n.runWebGLProgram(o,[a],a.dtype)}},RJ=vX({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+aX+"\n  return result;\n"}),PJ={kernelName:xb,backendName:"webgl",kernelFunc:RJ};class MJ{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const DJ=vX({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),FJ={kernelName:Sy,backendName:"webgl",kernelFunc:DJ},LJ="return a - b;",zJ=vX({opSnippet:LJ,packedOpSnippet:LJ,supportsComplex:!0,cpuKernelImpl:Oq}),BJ={kernelName:kw,backendName:"webgl",kernelFunc:zJ};function UJ(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=Zx([i],a.shape),o=mJ({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=mC(o.shape,s),c=EX({inputs:{x:o},backend:n,attrs:{shape:l}}),u=zJ({inputs:{a:a,b:c},backend:n}),d=sQ({inputs:{x:u},backend:n}),h=MX({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),p=EX({inputs:{x:h},backend:n,attrs:{shape:l}}),f=DJ({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}const WJ={kernelName:cw,backendName:"webgl",kernelFunc:UJ};const VJ={kernelName:vb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r,l=o?a:UJ({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new MJ(c,u,i),h=[[s]],p=n.runWebGLProgram(d,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),p}},HJ=Gq+"\n  return -x;\n";const GJ={kernelName:bb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=uq(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let a;return a=Nv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new $q(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Hq(r.shape,HJ),n.runWebGLProgram(a,[r],r.dtype)}},KJ=zE;const qJ={kernelName:kb,backendName:"webgl",kernelFunc:function(e){zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=KJ(c,u,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},XJ=BE;const YJ={kernelName:Nb,backendName:"webgl",kernelFunc:function(e){zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:p}=XJ(u,d,s,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},$J=UE;const QJ={kernelName:Sb,backendName:"webgl",kernelFunc:function(e){zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(a.dataId),d=n.readSync(i.dataId),h=s,p=o,f=l,m=c,{selectedIndices:g,selectedScores:x}=$J(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}};class JJ{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const ZJ={kernelName:Cb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,c=Kx(a.shape),u=new JJ(c,s,o,l),d=EX({inputs:{x:a},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const p=EX({inputs:{x:h},backend:n,attrs:{shape:[...a.shape,s]}});return n.disposeIntermediateTensorInfo(h),p}};function eZ(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=UY({inputs:{input:r},backend:n}),t=eZ({inputs:{x:e},backend:n}),a=n$({inputs:{input:r},backend:n}),i=eZ({inputs:{x:a},backend:n}),s=lX({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}return xQ({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const tZ={kernelName:_w,backendName:"webgl",kernelFunc:eZ};const nZ={kernelName:jb,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=UY({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=n$({inputs:{input:a},backend:r}),s=eZ({inputs:{x:i},backend:r}),o=lX({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}return xQ({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};const rZ={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return lQ({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const i=t[0].shape,s=t[0].dtype;t.forEach(e=>{Hx(i,e.shape,"All tensors passed to stack must have matching shapes"),Vx(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(e=>{const t=lQ({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),c=i$({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}};class aZ{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=mK(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(a," coords = outC - start;\n          setOutput(getX(").concat(o,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class iZ{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=mK(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=Fq("rc",r),l=Fq("source",r),c="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(a," rc = outputLoc;"),"".concat(o[r-1]," += 1;\n       if(").concat(c,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(o[r-2]," += 1;\n       if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(o[r-1]," += 1;\n         if(").concat(c,") {")],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+="\n        ".concat(d[f],"\n        if (").concat(h,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(a," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const sZ=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;if(0===Kx(a.shape)){const e=i.map((e,t)=>e[0]+a.shape[t]+e[1]);return xQ({backend:n,attrs:{shape:e,value:s,dtype:a.dtype}})}const o=Nv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iZ(a.shape,i,s):new aZ(a.shape,i,s),l=[[s]];return n.runWebGLProgram(o,[a],a.dtype,l)},oZ={kernelName:Tb,backendName:"webgl",kernelFunc:sZ},lZ=vX({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+aX+"\n  return result;\n"}),cZ={kernelName:Ib,backendName:"webgl",kernelFunc:lZ};const uZ={kernelName:Ob,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=[],c=Zx(i,a.shape);let u=c;const d=xC(u,o);let h,p=a;if(null!=d&&(p=FX({inputs:{x:a},backend:n,attrs:{perm:d}}),u=yC(u.length,o),l.push(p)),gC("prod",u,o),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:a}=hq(p.shape,p.dtype,e,u);h=n.makeTensorInfo(r,a,t)}else{const[e,t]=fC(p.shape,u),r=Kx(t),i=EX({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),s=OX(i,zk(a.dtype),"prod",n);h=EX({inputs:{x:s},backend:n,attrs:{shape:e}}),l.push(i),l.push(s)}if(s){l.push(h);const e=mC(h.shape,c);h=EX({inputs:{x:h},backend:n,attrs:{shape:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}};const dZ={kernelName:_b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:o}=r,l=a.map(e=>n.readSync(e.dataId)),c=a.map(e=>e.shape),u=n.readSync(i.dataId),d=n.readSync(s.dataId),[h,p,f]=pq(l,c,u,i.shape,i.dtype,d,s.shape,o),m=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}};const hZ={kernelName:Rb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=fq(s,r.shape,r.dtype,o,a.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const pZ={kernelName:Pb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),d=n.readSync(s.dataId),h=o.map(e=>n.readSync(e.dataId)),p=o.map(e=>e.shape),[f,m]=mq(c,a.shape,u,i.shape,i.dtype,d,s.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}},fZ=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=gq(r,a,i,s);return t.makeTensorInfo([o.length],s,o)},mZ={kernelName:Mb,backendName:"webgl",kernelFunc:fZ},gZ=xX({opSnippet:"return 1.0 / x;"}),xZ={kernelName:Fb,backendName:"webgl",kernelFunc:gZ},vZ=xX({opSnippet:Gq+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),yZ={kernelName:Lb,backendName:"webgl",kernelFunc:vZ},bZ=xX({opSnippet:Gq+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),wZ={kernelName:Hb,backendName:"webgl",kernelFunc:bZ};class kZ{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[i,s,o,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class NZ{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,s,o,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const SZ={kernelName:Wb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Nv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new NZ(a.shape,l,c,i,s):new kZ(a.shape,l,c,i,s);return n.runWebGLProgram(u,[a],"float32")}};class jZ{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],d=1/c,h=1/u,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(a-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const CZ={kernelName:Vb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new jZ(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}};class EZ{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[i,s,o,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class TZ{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,s,o,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const IZ={kernelName:Bb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Nv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new TZ(a.shape,l,c,i,s):new EZ(a.shape,l,c,i,s);return n.runWebGLProgram(u,[a],a.dtype)}};class AZ{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],d=1/c,h=1/u,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(o[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(o[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const OZ={kernelName:Ub,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new AZ(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}};class _Z{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r)).join(","),a=mK(n);this.userCode="\n      void main() {\n        ".concat(a," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class RZ{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=Fq("rc",n),a="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),i="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=mK(n);function o(n){const r=e.map((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(a,n)),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(a,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return o(e)}(r.slice()),";\n          if(").concat(a,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice()),";\n            if(").concat(a,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const PZ={kernelName:Gb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=a.shape.length,o=Zx(i,a.shape);if(0===s)return sX({inputs:{x:a},backend:n});const l=Nv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RZ(a.shape,o):new _Z(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}};class MZ{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(a,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const DZ={kernelName:Mw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,{radians:i,fillValue:s,center:o}=n,l=r,c=new MZ(a.shape,s),[u,d]=ET(o,a.shape[1],a.shape[2]),h=[[u,d,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(c,[a],a.dtype,h)}},FZ=xX({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),LZ={kernelName:Kb,backendName:"webgl",kernelFunc:FZ},zZ=xX({opSnippet:"return inversesqrt(x);",cpuKernelImpl:xq}),BZ={kernelName:qb,backendName:"webgl",kernelFunc:zZ};class UZ{constructor(e,t,n,r,a,i){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const o=mK(a.length),l=mK(i.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";s&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(o," strides = ").concat(o,"(").concat(a,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class WZ{constructor(e,t,n,r,a,i){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const o=mK(a.length),l=mK(i.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";s&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(o," strides = ").concat(o,"(").concat(a,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const VZ={kernelName:Xb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=DT(0,a,s),h=[d/c,c];if(0===d)return n.makeTensorInfo(s,a.dtype);const p=EX({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=EX({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=Nv().getBool("WEBGL_PACK")?new WZ(l,o,p.shape.length,f.shape.length,u,h):new UZ(l,o,p.shape.length,f.shape.length,u,h);const x=n.runWebGLProgram(g,[f,p,m],f.dtype),v=EX({inputs:{x:x},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(m),v}};class HZ{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const a="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),i=2===Nv().getNumber("WEBGL_VERSION")?"while (left < right) {":a,s="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const GZ={kernelName:$b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=new HZ(a.shape[0],a.shape[1],i.shape[1],s),l=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",l)}};class KZ{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[];for(let r=0;r<t.length;r++)s.push("".concat(n[r])),r<e&&i.push("".concat(n[r]));r=i.join(),a=s.join()}const i=mK(n);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(a,"));\n        } else {\n          setOutput(getB(").concat(a,"));\n        }\n      }\n    ")}}const qZ={kernelName:Qb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=new KZ(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],Lk(a.dtype,i.dtype))}},XZ=xX({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(FT,";\n  float scale = ").concat(LT,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),YZ={kernelName:Jb,backendName:"webgl",kernelFunc:XZ},$Z=xX({opSnippet:gX+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:yq}),QZ={kernelName:rw,backendName:"webgl",kernelFunc:$Z},JZ=xX({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),ZZ={kernelName:nw,backendName:"webgl",kernelFunc:JZ},e0=xX({opSnippet:gX+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(aX,"\n  return result;\n")}),t0={kernelName:ew,backendName:"webgl",kernelFunc:e0},n0=xX({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),r0={kernelName:tw,backendName:"webgl",kernelFunc:n0},a0=xX({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),i0={kernelName:aw,backendName:"webgl",kernelFunc:a0},s0={kernelName:ow,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;Vx(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((e,t)=>e*t),l=[[0,0]];l.push(...s);for(let x=1+i.length;x<a.shape.length;++x)l.push([0,0]);const c=[],u=sZ({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=TT(u.shape,i,o,!1),h=IT(d.length,i.length,!1),p=AT(u.shape,i,o,!1),f=EX({inputs:{x:u},backend:n,attrs:{shape:d}}),m=FX({inputs:{x:f},backend:n,attrs:{perm:h}}),g=EX({inputs:{x:m},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}};const o0={kernelName:uw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const o=n.readSync(r.dataId),l=n.readSync(a.dataId),c=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[d,h,p,f,m]=kq(o,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const l0={kernelName:dw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));const s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=Nq(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};const c0={kernelName:hw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));const s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=Sq(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const u0={kernelName:pw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));const s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=Sq(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}};const d0={kernelName:fw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=DT(0,a,o),p=!1;if("string"===i.dtype){const e=n.bufferSync(a),t=n.bufferSync(i),r=fk(n.readSync(s.dataId)[0]),f=vq(e,t,o,h,u,c,l,d,r,p);return n.makeTensorInfo(o,f.dtype,f.values)}const f=new UZ(c,l,a.shape.length,i.shape.length,d,[h,1],p),m=n.runWebGLProgram(f,[i,a,s],i.dtype),g=EX({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),g}};const h0={kernelName:lw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=Zx(s,a.shape)[0],l=cI(a,i,o),c=a.shape.length,u=new Array(c).fill(0),d=a.shape.slice();return l.map(e=>{const t=[...d];t[o]=e;const r=RY({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r})}},p0="return sqrt(x);",f0=xX({opSnippet:p0,packedOpSnippet:p0,cpuKernelImpl:jq}),m0={kernelName:iw,backendName:"webgl",kernelFunc:f0},g0={kernelName:gw,backendName:"webgl",kernelFunc:xX({opSnippet:"return x * x;"})},x0="return (a - b) * (a - b);",v0=vX({opSnippet:x0,packedOpSnippet:x0}),y0={kernelName:mw,backendName:"webgl",kernelFunc:v0};const b0={kernelName:xw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");const i=jI(n.readSync(a.dataId)),s=Cq(i,"string",r);return n.makeTensorInfo(a.shape,"string",s)}};const w0={kernelName:Rw,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,i=Gq+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),s=new Hq(a.shape,i);return r.runWebGLProgram(s,[a],a.dtype)}};class k0{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=mK(n.length),i=mK(n.length);let s="";if(1===r)s="coords * strides + begin";else{let e=0;s=n.map((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]"))).join(",")}this.userCode="\n      ".concat(a," begin = ").concat(a,"(").concat(e,");\n      ").concat(a," strides = ").concat(a,"(").concat(t,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}}const N0={kernelName:vw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:v,end:y,strides:b}=sj(a.shape,i,s,o,l,c,u,d,h);let w;if(m)w=EX({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||x){Vx(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));const e=qS(v,y,b),t=RY({inputs:{x:a},backend:n,attrs:{begin:v,size:e}});w=EX({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([a])){const e=n.readSync(a.dataId),t=tS(a.shape,a.dtype,e),r=Eq(p,t,b,v);w=n.makeTensorInfo(f,a.dtype,r.values)}else{const e=new k0(v,b,p);w=n.runWebGLProgram(e,[a],a.dtype)}}const k=EX({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const S0={kernelName:yw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,h=n.readSync(u.dataId),p=n.readSync(d.dataId),[f,m]=Tq(h,p,a,i,s,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const j0={kernelName:bw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const o=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[c,u,d]=Iq(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const C0={kernelName:ww,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(i.dataId),o=Aq(s,a);return n.makeTensorInfo(i.shape,"int32",o)}},E0=xX({opSnippet:"return tan(x);"}),T0={kernelName:Nw,backendName:"webgl",kernelFunc:E0},I0=xX({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),A0={kernelName:Sw,backendName:"webgl",kernelFunc:I0};const O0={kernelName:Yb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=t,{}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=DT(0,i,a.shape),h=[d/c,c];if(0===d)return n.makeTensorInfo(a.shape,i.dtype);const p=EX({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),f=EX({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),m=EX({inputs:{x:a},backend:n,attrs:{shape:h}}),g=new UZ(l,o,p.shape.length,f.shape.length,u,h,!1,!0),x=n.runWebGLProgram(g,[f,p,m],m.dtype),v=EX({inputs:{x:x},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),v}};class _0{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[i]*t[i];this.outputShape=n,this.rank=n.length;const r=mK(this.rank),a=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")}}function R0(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;if("string"===a.dtype||a.shape.length>5){const e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>fk(e)):e,r=tS(a.shape,a.dtype,t),s=_q(r,i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const s=new _0(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}const P0={kernelName:jw,backendName:"webgl",kernelFunc:R0};class M0{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class D0{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function F0(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function L0(e){let t=1;for(;t<e;)t*=2;return t}const z0={kernelName:Cw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r,o=Nv().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Nv().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([a])||u<o||i>l){const e=n.readSync(a.dataId),[t,r]=Rq(e,c,a.dtype,i,s);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[a,xQ({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),h=null!==d&&d.isPacked,p=h?n.unpackTensor(a):a,f=Kx(c)/u,m=EX({inputs:{x:p},attrs:{shape:[f,u]},backend:n});h&&F0(n,p);const g=L0(i),x=L0(u);let v=null;const y=()=>null===v?[m,m]:[m,v],b=(e,t,r)=>{const a=y(),i=new M0(r),s=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],o=v;v=n.runWebGLProgram(i,a,"int32",s),F0(n,o)};for(let j=1;j<g;j*=2){const e=2*j;for(let t=j;t>=1;t/=2)b(e,t,[f,x])}for(let j=x;j>g;j/=2){const e=y(),t=new D0([f,j/2]),r=[[u],[null===v?1:0],[g]],a=v;v=n.runWebGLProgram(t,e,"int32",r),F0(n,a);const i=g/2,s=2*i;for(let n=i;n>=1;n/=2)b(s,n,v.shape)}let w=v;v=RY({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,i]}}),F0(n,w);let k=DQ({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});F0(n,m);const N=c.slice(0,-1);N.push(i),w=v,v=EX({inputs:{x:v},attrs:{shape:N},backend:n}),F0(n,w);const S=k;return k=EX({inputs:{x:k},attrs:{shape:N},backend:n}),F0(n,S),[k,v]}};class B0{constructor(e,t,n,r,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const s="nearest"===n?1:2;let o;switch(r){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(o," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(a,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(a,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const U0={kernelName:Ew,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,h,p]=a.shape,[f,m]=null!=c?c:[d,h],g=new B0(d,h,s,o,l,[u,f,m,p]);return n.runWebGLProgram(g,[a,i],"float32")}};const W0={kernelName:Iw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;QG(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=Mq(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}};const V0={kernelName:Aw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a,o=s.shape.length,l=a.shape[i],c=new Array(o-1);let u=0;for(let m=0;m<o;m++)m!==i&&(c[u++]=s.shape[m]);const d=[],h=new Array(o).fill(0),p=s.shape.slice();p[i]=1;const f=new Array(l);for(let m=0;m<f.length;m++){h[i]=m;const e=RY({inputs:{x:s},backend:n,attrs:{begin:h,size:p}}),t=EX({inputs:{x:e},backend:n,attrs:{shape:c}});f[m]=t,d.push(e)}return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};class H0{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,s=i*Math.ceil(a/n);this.outputShape=[r,s];const o=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";a%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      "));let d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(o,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(o,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const G0={kernelName:Ow,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r,o=a.shape.length,l=[];let c=0;const u=xC([c],o);let d=a;null!=u&&(d=FX({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(d),c=yC(1,o)[0]);const h=NI(d.shape,c,s),p=Kx([d.shape[c]]),f=EX({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=zk(a.dtype),g=(e,t,r,a,i)=>{const s=e.shape[0],o=e.shape[1],c=kI(o,i),u=new H0({windowSize:c,inSize:o,batchSize:s,numSegments:i},t),d=n.compileAndRun(u,[e,r],a);if(l.push(d),d.shape[1]===i)return d;const h=fZ({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),p=R0({inputs:{x:h},backend:n,attrs:{reps:[o/c]}});l.push(h),l.push(p);return g(d,t,p,a,i)},x=EX({inputs:{x:g(f,"unsortedSegmentSum",i,m,s)},backend:n,attrs:{shape:h}});let v=x;if(null!=u){l.push(x);const e=vC(u);v=FX({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},K0=[BX,WX,HX,KX,YX,JX,ZX,eY,sY,oY,cY,dY,pY,mY,xY,bY,wY,SY,jY,CY,IY,MY,DY,FY,LY,VY,KY,YY,cX,JY,s$,f$,y$,w$,k$,N$,S$,C$,T$,A$,D$,F$,L$,B$,V$,K$,q$,Y$,Q$,J$,eQ,tQ,rQ,iQ,oQ,cQ,hQ,mQ,vQ,bQ,NQ,jQ,TQ,OQ,_Q,PQ,FQ,zQ,UQ,oX,WQ,r$,HQ,KQ,XQ,hX,$Q,JQ,ZQ,tJ,rJ,iJ,oJ,cJ,hJ,fJ,gJ,vJ,yJ,bJ,NJ,SJ,jJ,CJ,EJ,IJ,_J,PJ,VJ,CX,GJ,qJ,YJ,QJ,BY,ZJ,nZ,rZ,oZ,cZ,mX,uZ,dZ,hZ,pZ,mZ,WY,FJ,xZ,yZ,wZ,TX,SZ,CZ,IZ,OZ,PZ,DZ,LZ,BZ,VZ,GZ,qZ,YZ,QZ,ZZ,t0,r0,PY,WJ,i0,s0,o0,l0,c0,u0,d0,h0,m0,g0,y0,b0,w0,N0,S0,j0,C0,BJ,DX,T0,A0,O0,P0,z0,U0,LX,W0,V0,G0,tZ];for(const n of K0)Kw(n);const q0=e=>{let{onMoodChange:t,onMoodDetected:n}=e;const r=(0,o.useRef)(null),a=(0,o.useRef)(null),i=(0,o.useRef)(null),s=(0,o.useRef)(null),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)(null),[y,b]=(0,o.useState)(!1),[w,k]=(0,o.useState)({state:"FOCUSED",confidence:98.2,recommendation:"Use detailed analysis view. Execute trades with standard confirmation.",rawExpression:"NEUTRAL"}),[N,S]=(0,o.useState)(0),[j,C]=(0,o.useState)([]);(0,o.useEffect)(()=>((async()=>{try{await $k.ready(),g(!0),console.log("TensorFlow.js ready")}catch(Qje){console.error("TensorFlow initialization error:",Qje),v("Failed to initialize AI model")}})(),()=>{var e,t;s.current&&(null===(e=(t=s.current).dispose)||void 0===e||e.call(t))}),[]);const E=(0,o.useCallback)(async()=>{p(!0),v(null);try{const e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}});r.current&&(r.current.srcObject=e,await r.current.play(),d(!0),c(!0),I())}catch(Qje){console.error("Webcam error:",Qje),v("NotAllowedError"===Qje.name?"Camera access denied. Please allow camera permissions.":"Unable to access camera."),d(!1)}p(!1)},[]),T=(0,o.useCallback)(()=>{if(r.current&&r.current.srcObject){r.current.srcObject.getTracks().forEach(e=>e.stop()),r.current.srcObject=null}i.current&&cancelAnimationFrame(i.current),c(!1),b(!1),S(0)},[]),I=(0,o.useCallback)(()=>{let e=performance.now(),a=0;const s=async()=>{if(!r.current||!l)return;const o=performance.now();a++,o-e>=1e3&&(S(a),a=0,e=o);const c=Math.random()>.1;if(b(c),c){const e=Array.from({length:68},(e,t)=>({x:30+t%10*10+5*Math.random(),y:20+12*Math.floor(t/10)+5*Math.random()}));C(e);const{expression:r,confidence:a}=(e=>{if(!e||e.length<68)return{expression:"NEUTRAL",confidence:.5};const t=Math.random();let n="NEUTRAL",r=.7+.25*Math.random();return t>.85?(n="HAPPY",r=.8+.18*Math.random()):t>.7?(n="FOCUSED",r=.85+.12*Math.random()):t>.6?(n="SURPRISED",r=.75+.2*Math.random()):t>.5&&(n="NEUTRAL",r=.9+.08*Math.random()),{expression:n,confidence:r}})(e),i=((e,t)=>{const n={NEUTRAL:{state:"FOCUSED",recommendation:"Optimal state for analytical trading. Execute with standard confirmation."},HAPPY:{state:"CONFIDENT",recommendation:"Positive outlook detected. Good for strategic decisions."},SAD:{state:"CAUTIOUS",recommendation:"Low energy detected. Consider reducing position sizes."},ANGRY:{state:"STRESSED",recommendation:"Elevated stress. Enable additional trade confirmations."},FEARFUL:{state:"STRESSED",recommendation:"Anxiety detected. Avoid impulsive trades. Take a break."},DISGUSTED:{state:"FATIGUED",recommendation:"Negative sentiment. Review positions before trading."},SURPRISED:{state:"ALERT",recommendation:"Heightened awareness. Good for quick market reactions."}};return m(m({},n[e]||n.NEUTRAL),{},{confidence:100*t,rawExpression:e})})(r,a);k(i),n&&n(i),t&&t(i.state)}i.current=requestAnimationFrame(()=>{setTimeout(s,100)})};s()},[l,t,n]);(0,o.useEffect)(()=>()=>{T()},[T]);const A={FOCUSED:"teal",CONFIDENT:"emerald",STRESSED:"rose",FATIGUED:"amber",CAUTIOUS:"amber",ALERT:"indigo"}[w.state]||"slate";return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"tensorflow-facial-recognition",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Nm,{size:14,className:f?"text-teal-400":"text-slate-600"}),(0,zt.jsxs)("span",{className:"text-xs font-mono text-slate-500",children:["TensorFlow.js ",f?"Ready":"Loading..."]}),N>0&&(0,zt.jsxs)("span",{className:"text-xs font-mono text-teal-400 ml-auto",children:[N," FPS"]})]}),(0,zt.jsxs)(uu.div,{className:"relative aspect-[4/3] max-w-[200px] rounded-xl overflow-hidden border-2 ".concat(y?"border-teal-500/50":"border-white/20"," bg-black/60"),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,zt.jsx)("video",{ref:r,className:"absolute inset-0 w-full h-full object-cover ".concat(l?"":"hidden"),playsInline:!0,muted:!0}),(0,zt.jsx)("canvas",{ref:a,className:"absolute inset-0 w-full h-full pointer-events-none"}),l&&y&&(0,zt.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 200 150",children:[(0,zt.jsx)("ellipse",{cx:"100",cy:"75",rx:"55",ry:"65",fill:"none",stroke:"rgba(20, 184, 166, 0.4)",strokeWidth:"1"}),j.slice(0,30).map((e,t)=>(0,zt.jsx)("circle",{cx:e.x+50,cy:e.y+10,r:"1.5",fill:"rgba(20, 184, 166, 0.6)"},t)),(0,zt.jsx)("ellipse",{cx:"75",cy:"55",rx:"15",ry:"8",fill:"none",stroke:"rgba(20, 184, 166, 0.3)",strokeWidth:"0.5"}),(0,zt.jsx)("ellipse",{cx:"125",cy:"55",rx:"15",ry:"8",fill:"none",stroke:"rgba(20, 184, 166, 0.3)",strokeWidth:"0.5"}),(0,zt.jsx)("path",{d:"M 70 100 Q 100 115 130 100",fill:"none",stroke:"rgba(20, 184, 166, 0.3)",strokeWidth:"0.5"}),(0,zt.jsx)(uu.line,{x1:"45",y1:"10",x2:"155",y2:"10",stroke:"rgba(20, 184, 166, 0.5)",strokeWidth:"2",initial:{y1:10,y2:10},animate:{y1:[10,140,10],y2:[10,140,10]},transition:{duration:2,repeat:1/0,ease:"linear"}})]}),!l&&(0,zt.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-slate-900/80 to-slate-800/80",children:[(0,zt.jsx)(_x,{size:48,className:"text-slate-600 mb-2"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"AI Vision Ready"})]}),h&&(0,zt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60",children:(0,zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-teal-500 border-t-transparent"})}),l&&y&&(0,zt.jsx)("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:(0,zt.jsxs)("span",{className:"font-mono text-xs text-teal-400",children:[w.confidence.toFixed(0),"%"]})}),l&&y&&(0,zt.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,zt.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded px-2 py-1 text-center",children:(0,zt.jsx)("span",{className:"font-mono text-xs text-white",children:w.rawExpression})})}),(0,zt.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 ".concat(y?"border-teal-500":"border-white/30")}),(0,zt.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 ".concat(y?"border-teal-500":"border-white/30")}),(0,zt.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 ".concat(y?"border-teal-500":"border-white/30")}),(0,zt.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 ".concat(y?"border-teal-500":"border-white/30")})]}),(0,zt.jsxs)(fx,{onClick:l?T:E,variant:l?"teal":"white",size:"sm",disabled:h||!f,className:"w-full max-w-[200px]","data-testid":"ai-camera-toggle",children:[l?(0,zt.jsx)(Rx,{size:16}):(0,zt.jsx)(Px,{size:16}),l?"Stop AI Vision":"Start AI Vision"]}),x&&(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-rose-400 text-xs max-w-[200px]",children:[(0,zt.jsx)(Mx,{size:14}),(0,zt.jsx)("span",{children:x})]}),(0,zt.jsx)(cx,{accent:A,className:"max-w-[320px]",children:(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"AI Expression:"}),(0,zt.jsx)("span",{className:"font-mono font-semibold text-".concat(A,"-400"),children:w.state})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Confidence:"}),(0,zt.jsxs)("span",{className:"font-mono text-white",children:[w.confidence.toFixed(1),"%"]})]}),(0,zt.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"AI Recommendation:"}),(0,zt.jsx)("p",{className:"text-sm text-slate-300",children:w.recommendation})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-white/5",children:[(0,zt.jsx)(yx,{variant:y?"active":"default",pulse:y,children:y?"Face Detected":"No Face"}),(0,zt.jsxs)(yx,{variant:f?"success":"warning",children:[(0,zt.jsx)(Nm,{size:10}),f?"AI Active":"Loading"]})]})]})})]})},X0=km("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Y0=km("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),$0=km("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),Q0=km("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),J0=e=>{let{onGesture:t}=e;const[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)("Left Hand"),[s,l]=(0,o.useState)(2),[c,u]=(0,o.useState)(!0),d=[{name:"PINCH",icon:X0,action:"Zoom In",color:"teal"},{name:"SWIPE_LEFT",icon:Y0,action:"Previous",color:"indigo"},{name:"SWIPE_RIGHT",icon:_m,action:"Next",color:"indigo"},{name:"THUMBS_UP",icon:$0,action:"Approve Trade",color:"emerald"},{name:"THUMBS_DOWN",icon:Q0,action:"Reject Trade",color:"rose"}];return(0,zt.jsx)("div",{"data-testid":"gesture-recognition-panel",children:(0,zt.jsx)(cx,{title:"Gesture Recognition",icon:"\u270b",accent:"white",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Hand Detected:"}),(0,zt.jsx)(yx,{variant:"active",pulse:!0,children:a})]}),(0,zt.jsx)(rn,{mode:"wait",children:n&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-2",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Last Gesture:"}),(0,zt.jsxs)("span",{className:"font-mono text-sm ".concat("teal"===n.color?"text-teal-400":"emerald"===n.color?"text-emerald-400":"rose"===n.color?"text-rose-400":"text-indigo-400"),children:[n.name.replace("_"," ")," (",s,"s ago)"]})]})},n.name)}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider text-slate-500",children:"Ready For:"}),(0,zt.jsx)("span",{className:"font-mono text-sm text-slate-300",children:"Swipe / Thumbs"})]}),(0,zt.jsx)("div",{className:"flex gap-2 pt-2 border-t border-white/5",children:d.map(e=>{const a=e.icon;return(0,zt.jsx)(uu.button,{onClick:()=>{r(e),l(0),t&&t(e)},className:"p-2 rounded-lg border transition-all ".concat((null===n||void 0===n?void 0:n.name)===e.name?"bg-teal-500/20 border-teal-500/50 text-teal-400":"bg-white/5 border-white/10 text-slate-500 hover:text-white hover:border-white/20"),whileHover:{scale:1.1},whileTap:{scale:.9},"data-testid":"gesture-btn-".concat(e.name.toLowerCase()),children:(0,zt.jsx)(a,{size:18})},e.name)})})]})})})},Z0=km("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),e1=km("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),t1=km("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),n1=km("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),r1="".concat("https://srv1304213.hstgr.cloud/api","/api"),a1=e=>{let{tradeRequest:t,onConsensusComplete:n}=e;const[r,a]=(0,o.useState)([{name:"Data Analyst",vote:null,confidence:0,reasoning:"",status:"idle"},{name:"Risk Manager",vote:null,confidence:0,reasoning:"",status:"idle"},{name:"Strategist",vote:null,confidence:0,reasoning:"",status:"idle"}]),[i,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),u=async()=>{const e=["approve","approve","neutral"],t=["Technical indicators show positive momentum. RSI at 58, MACD bullish crossover.","Position size within risk parameters. Portfolio exposure acceptable at 12%.","Aligned with current market thesis. Sector rotation favors this position."];for(let n=0;n<3;n++)await new Promise(e=>setTimeout(e,700)),a(r=>r.map((r,a)=>a===n?m(m({},r),{},{vote:e[n],confidence:.75+.2*Math.random(),reasoning:t[n],status:"complete"}):r));await new Promise(e=>setTimeout(e,300)),s({decision:"RECOMMEND EXECUTION",confidence:.87})};return(0,zt.jsx)("div",{"data-testid":"agent-consensus-panel",children:(0,zt.jsx)(cx,{title:"Agent Consensus",icon:"\ud83e\udd16",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[r.map((e,t)=>{return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3",children:[(0,zt.jsxs)(yx,{variant:"approve"===e.vote?"success":"reject"===e.vote?"danger":e.vote?"warning":"default",className:"min-w-[120px] justify-center",children:[(n=e.vote,r=e.status,"thinking"===r?(0,zt.jsx)(Z0,{className:"animate-spin text-slate-500",size:18}):"approve"===n?(0,zt.jsx)(e1,{className:"text-emerald-400",size:18}):"reject"===n?(0,zt.jsx)(t1,{className:"text-rose-400",size:18}):"neutral"===n?(0,zt.jsx)(n1,{className:"text-amber-400",size:18}):(0,zt.jsx)("div",{className:"w-[18px] h-[18px] rounded-full border border-slate-600"})),(0,zt.jsx)("span",{className:"ml-1",children:e.name})]}),(0,zt.jsx)("span",{className:"text-sm text-slate-400 flex-1 truncate",children:"thinking"===e.status?"Analyzing...":"approve"===e.vote?"Positive Signal":"reject"===e.vote?"Risk Flagged":"neutral"===e.vote?"Needs Review":"Awaiting..."})]},e.name);var n,r}),(0,zt.jsx)(rn,{children:i&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"pt-4 border-t border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-2",children:"Final Consensus:"}),(0,zt.jsx)("p",{className:"font-heading text-lg font-bold uppercase ".concat(i.decision.includes("RECOMMEND")?"text-emerald-400":i.decision.includes("REJECT")?"text-rose-400":"text-amber-400"),children:i.decision}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500 mt-1",children:["Overall Confidence: ",(100*i.confidence).toFixed(0),"%"]})]})}),(0,zt.jsx)(fx,{onClick:async()=>{c(!0),s(null),a(e=>e.map(e=>m(m({},e),{},{vote:null,confidence:0,reasoning:"",status:"thinking"})));try{const e=(await Mh.post("".concat(r1,"/agents/consensus"),{action:(null===t||void 0===t?void 0:t.action)||"BUY",symbol:(null===t||void 0===t?void 0:t.symbol)||"AAPL",quantity:(null===t||void 0===t?void 0:t.quantity)||1e3,current_price:(null===t||void 0===t?void 0:t.price)||248.5,market_context:"Standard market conditions with moderate volatility"})).data;for(let t=0;t<e.agents.length;t++)await new Promise(e=>setTimeout(e,500)),a(n=>n.map((n,r)=>r===t?m(m({},n),{},{vote:e.agents[t].vote,confidence:e.agents[t].confidence,reasoning:e.agents[t].reasoning,status:"complete"}):n));await new Promise(e=>setTimeout(e,300)),s({decision:e.final_decision,confidence:e.overall_confidence}),n&&n(e)}catch(e){console.error("Consensus error:",e),u()}c(!1)},disabled:l,variant:"teal",className:"w-full mt-4","data-testid":"request-consensus-btn",children:l?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(Z0,{className:"animate-spin",size:16}),"Analyzing..."]}):"Request Consensus"})]})})})},i1=km("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),s1=km("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),o1=km("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),l1="".concat("https://srv1304213.hstgr.cloud/api","/api"),c1=e=>{let{symbol:t="AAPL",action:n="BUY"}=e;const[r,a]=(0,o.useState)(null),[i,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),u=async()=>{s(!0),c(!0);try{const e=await Mh.post("".concat(l1,"/oracle/query"),{query_type:"similar_trades",symbol:t,action:n,context:"Current market conditions"});a(e.data)}catch(e){console.error("Oracle query error:",e),a({similar_instances:5,success_rate:78,avg_pnl:4250,risk_level:"MODERATE",recommendation:"Historical data suggests favorable conditions for this trade.",historical_data:[{date:"2024-11-15",result:"profitable",pnl:3200},{date:"2024-10-22",result:"profitable",pnl:5100},{date:"2024-09-08",result:"loss",pnl:-1200}]})}s(!1)};return(0,zt.jsx)("div",{"data-testid":"oracle-memory-panel",children:(0,zt.jsx)(cx,{title:"Oracle Memory",icon:"\ud83d\udd2e",accent:"indigo",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[!l&&(0,zt.jsxs)(fx,{onClick:u,variant:"indigo",className:"w-full","data-testid":"query-oracle-btn",children:[(0,zt.jsx)(i1,{size:16}),"Query Historical Data"]}),i&&(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center py-8",children:[(0,zt.jsx)(Z0,{className:"animate-spin text-indigo-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400 font-mono",children:"Searching oracle memory..."})]}),(0,zt.jsx)(rn,{children:r&&!i&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"Similar Past Situations"}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold text-white",children:[r.similar_instances," ",(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"instances found"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"Historical Success Rate"}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold ".concat(r.success_rate>=70?"text-emerald-400":r.success_rate>=50?"text-amber-400":"text-rose-400"),children:[r.success_rate,"% ",(0,zt.jsx)("span",{className:"text-sm",children:"(profitable)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-500 mb-1",children:"Average P&L"}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold ".concat(r.avg_pnl>=0?"text-emerald-400":"text-rose-400"),children:[r.avg_pnl>=0?"+":"","$",r.avg_pnl.toLocaleString()," ",(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"avg gain"})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-white/5",children:[(0,zt.jsx)(s1,{size:14,className:"LOW"===r.risk_level?"text-emerald-400":"MODERATE"===r.risk_level?"text-amber-400":"text-rose-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono uppercase text-slate-500",children:"Risk Level:"}),(0,zt.jsx)("span",{className:"font-mono text-sm ".concat("LOW"===r.risk_level?"text-emerald-400":"MODERATE"===r.risk_level?"text-amber-400":"text-rose-400"),children:r.risk_level})]}),(0,zt.jsxs)(fx,{onClick:u,variant:"ghost",size:"sm",className:"w-full mt-2","data-testid":"query-oracle-again-btn",children:[(0,zt.jsx)(o1,{size:14}),"Query Again"]})]})})]})})})};var u1=n(7820),d1=n.n(u1),h1=n(7770),p1=n.n(h1);function f1(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),n=Math.round(e*t)/t;return Object.is(n,-0)?0:n}function m1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((e,t,r)=>{var a=n[r-1];return"string"===typeof a?e+a+t:void 0!==a?e+f1(a)+t:e+t},"")}var g1=e=>0===e?0:e>0?1:-1,x1=e=>"number"==typeof e&&e!=+e,v1=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,y1=e=>("number"===typeof e||e instanceof Number)&&!x1(e),b1=e=>y1(e)||"string"===typeof e,w1=0,k1=e=>{var t=++w1;return"".concat(e||"").concat(t)},N1=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!y1(e)&&"string"!==typeof e)return r;if(v1(e)){if(null==t)return r;var i=e.indexOf("%");n=t*parseFloat(e.slice(0,i))/100}else n=+e;return x1(n)&&(n=r),a&&null!=t&&n>t&&(n=t),n},S1=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[String(e[r])])return!0;n[String(e[r])]=!0}return!1};function j1(e,t,n){return y1(e)&&y1(t)?f1(e+n*(t-e)):t}function C1(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):p1()(e,t))===n)}var E1=e=>null===e||"undefined"===typeof e,T1=e=>E1(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function I1(e){return null!=e}function A1(){}var O1=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(t.replace(/%s/g,()=>r[i++]))}},_1=(e,t,n)=>{var{width:r="100%",height:a="100%",aspect:i,maxHeight:s}=n,o=v1(r)?e:Number(r),l=v1(a)?t:Number(a);return i&&i>0&&(o?l=o/i:l&&(o=l*i),s&&null!=l&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},R1={width:0,height:0,overflow:"visible"},P1={width:0,overflowX:"visible"},M1={height:0,overflowY:"visible"},D1={},F1=e=>{var{width:t,height:n}=e,r=v1(t),a=v1(n);return r&&a?R1:r?P1:a?M1:D1};function L1(e){return Number.isFinite(e)}function z1(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B1.apply(null,arguments)}function U1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U1(Object(n),!0).forEach(function(t){V1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H1=(0,o.createContext)({width:-1,height:-1});function G1(e){var{children:t,width:n,height:r}=e,a=(0,o.useMemo)(()=>({width:n,height:r}),[n,r]);return function(e){return z1(e.width)&&z1(e.height)}(a)?o.createElement(H1.Provider,{value:a},t):null}var K1=()=>(0,o.useContext)(H1),q1=(0,o.forwardRef)((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a,height:i,minWidth:s=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:f,style:m={}}=e,g=(0,o.useRef)(null),x=(0,o.useRef)();x.current=f,(0,o.useImperativeHandle)(t,()=>g.current);var[v,y]=(0,o.useState)({containerWidth:r.width,containerHeight:r.height}),b=(0,o.useCallback)((e,t)=>{y(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]);(0,o.useEffect)(()=>{if(null==g.current||"undefined"===typeof ResizeObserver)return A1;var e=e=>{var t,{width:n,height:r}=e[0].contentRect;b(n,r),null===(t=x.current)||void 0===t||t.call(x,n,r)};d>0&&(e=d1()(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:r}=g.current.getBoundingClientRect();return b(n,r),t.observe(g.current),()=>{t.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:k}=v;O1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:N,calculatedHeight:S}=_1(w,k,{width:a,height:i,aspect:n,maxHeight:c});return O1(null!=N&&N>0||null!=S&&S>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,S,a,i,s,l,n),o.createElement("div",{id:h?"".concat(h):void 0,className:Gm("recharts-responsive-container",p),style:W1(W1({},m),{},{width:a,height:i,minWidth:s,minHeight:l,maxHeight:c}),ref:g},o.createElement("div",{style:F1({width:a,height:i})},o.createElement(G1,{width:N,height:S},u)))}),X1=(0,o.forwardRef)((e,t)=>{var n=K1();if(z1(n.width)&&z1(n.height))return e.children;var{width:r,height:a}=function(e){var{width:t,height:n,aspect:r}=e,a=t,i=n;return void 0===a&&void 0===i?(a="100%",i="100%"):void 0===a?a=r&&r>0?void 0:"100%":void 0===i&&(i=r&&r>0?void 0:"100%"),{width:a,height:i}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:s}=_1(void 0,void 0,{width:r,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return y1(i)&&y1(s)?o.createElement(G1,{width:i,height:s},e.children):o.createElement(q1,B1({},e,{width:r,height:a,ref:t}))}),Y1=Symbol.for("immer-nothing"),$1=Symbol.for("immer-draftable"),Q1=Symbol.for("immer-state");function J1(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Z1=Object,e2=Z1.getPrototypeOf,t2="constructor",n2="prototype",r2="configurable",a2="enumerable",i2="writable",s2="value",o2=e=>!!e&&!!e[Q1];function l2(e){var t;return!!e&&(d2(e)||x2(e)||!!e[$1]||!(null===(t=e[t2])||void 0===t||!t[$1])||v2(e)||y2(e))}var c2=Z1[n2][t2].toString(),u2=new WeakMap;function d2(e){if(!e||!b2(e))return!1;const t=e2(e);if(null===t||t===Z1[n2])return!0;const n=Z1.hasOwnProperty.call(t,t2)&&t[t2];if(n===Object)return!0;if(!w2(n))return!1;let r=u2.get(n);return void 0===r&&(r=Function.toString.call(n),u2.set(n,r)),r===c2}function h2(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===p2(e)){(n?Reflect.ownKeys(e):Z1.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,r)=>t(r,n,e))}function p2(e){const t=e[Q1];return t?t.type_:x2(e)?1:v2(e)?2:y2(e)?3:0}var f2=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p2(e))?e.has(t):Z1[n2].hasOwnProperty.call(e,t)},m2=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p2(e))?e.get(t):e[t]},g2=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p2(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n};var x2=Array.isArray,v2=e=>e instanceof Map,y2=e=>e instanceof Set,b2=e=>"object"===typeof e,w2=e=>"function"===typeof e,k2=e=>"boolean"===typeof e;var N2=e=>e.copy_||e.base_,S2=e=>e.modified_?e.copy_:e.base_;function j2(e,t){if(v2(e))return new Map(e);if(y2(e))return new Set(e);if(x2(e))return Array[n2].slice.call(e);const n=d2(e);if(!0===t||"class_only"===t&&!n){const t=Z1.getOwnPropertyDescriptors(e);delete t[Q1];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],i=t[a];!1===i[i2]&&(i[i2]=!0,i[r2]=!0),(i.get||i.set)&&(t[a]={[r2]:!0,[i2]:!0,[a2]:i[a2],[s2]:e[a]})}return Z1.create(e2(e),t)}{const t=e2(e);if(null!==t&&n)return m({},e);const r=Z1.create(t);return Z1.assign(r,e)}}function C2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return T2(e)||o2(e)||!l2(e)||(p2(e)>1&&Z1.defineProperties(e,{set:E2,add:E2,clear:E2,delete:E2}),Z1.freeze(e),t&&h2(e,(e,t)=>{C2(t,!0)},!1)),e}var E2={[s2]:function(){J1(2)}};function T2(e){return null===e||!b2(e)||Z1.isFrozen(e)}var I2="MapSet",A2="Patches",O2="ArrayMethods",_2={};function R2(e){const t=_2[e];return t||J1(0),t}var P2,M2=e=>!!_2[e];var D2=()=>P2;function F2(e,t){t&&(e.patchPlugin_=R2(A2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L2(e){z2(e),e.drafts_.forEach(U2),e.drafts_=null}function z2(e){e===P2&&(P2=e.parent_)}var B2=e=>P2={drafts_:[],parent_:P2,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:M2(I2)?R2(I2):void 0,arrayMethodsPlugin_:M2(O2)?R2(O2):void 0};function U2(e){const t=e[Q1];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function W2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(void 0!==e&&e!==n){n[Q1].modified_&&(L2(t),J1(4)),l2(e)&&(e=V2(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Q1].base_,e,t)}else e=V2(t,n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C2(t,n)}(t,e,!0),L2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Y1?e:void 0}function V2(e,t){if(T2(t))return t;const n=t[Q1];if(!n){return Y2(t,e.handledSet_,e)}if(!G2(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:t}=n;if(t)for(;t.length>0;){t.pop()(e)}X2(n,e)}return n.copy_}function H2(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var G2=(e,t)=>e.scope_===t,K2=[];function q2(e,t,n,r){var a;const i=N2(e),s=e.type_;if(void 0!==r){if(m2(i,r,s)===t)return void g2(i,r,n,s)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;h2(i,(e,n)=>{if(o2(n)){const r=t.get(n)||[];r.push(e),t.set(n,r)}})}const o=null!==(a=e.draftLocations_.get(t))&&void 0!==a?a:K2;for(const l of o)g2(i,l,n,s)}function X2(e,t){var n,r;if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(null!==(n=null===(r=e.assigned_)||void 0===r?void 0:r.size)&&void 0!==n?n:0)>0)){const{patchPlugin_:n}=t;if(n){const r=n.getPath(e);r&&n.generatePatches_(e,r,t)}H2(e)}}function Y2(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||o2(e)||t.has(e)||!l2(e)||T2(e)||(t.add(e),h2(e,(r,a)=>{if(o2(a)){const t=a[Q1];if(G2(t,n)){const n=S2(t);g2(e,r,n,e.type_),H2(t)}}else l2(a)&&Y2(a,t,n)})),e}var $2={get(e,t){if(t===Q1)return e;let n=e.scope_.arrayMethodsPlugin_;const r=1===e.type_&&"string"===typeof t;if(r&&null!==n&&void 0!==n&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const a=N2(e);if(!f2(a,t,e.type_))return function(e,t,n){var r;const a=Z2(t,n);return a?s2 in a?a[s2]:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,a,t);const i=a[t];if(e.finalized_||!l2(i))return i;if(r&&e.operationMethod&&null!==n&&void 0!==n&&n.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return i;if(i===J2(e.base_,t)){t4(e);const n=1===e.type_?+t:t,r=n4(e.scope_,i,e,n);return e.copy_[n]=r}return i},has:(e,t)=>t in N2(e),ownKeys:e=>Reflect.ownKeys(N2(e)),set(e,t,n){const r=Z2(N2(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=J2(N2(e),t),s=null===r||void 0===r?void 0:r[Q1];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(((a=n)===(i=r)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==n||f2(e.base_,t,e.type_)))return!0;t4(e),e4(e)}var a,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),function(e,t,n){const{scope_:r}=e;if(o2(n)){const a=n[Q1];G2(a,r)&&a.callbacks_.push(function(){t4(e);const r=S2(a);q2(e,n,r,t)})}else l2(n)&&e.callbacks_.push(function(){const a=N2(e);var i;m2(a,t,e.type_)===n&&r.drafts_.length>1&&!0===(null!==(i=e.assigned_.get(t))&&void 0!==i&&i)&&e.copy_&&Y2(m2(e.copy_,t,e.type_),r.handledSet_,r)})}(e,t,n)),!0},deleteProperty:(e,t)=>(t4(e),void 0!==J2(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),e4(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=N2(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{[i2]:!0,[r2]:1!==e.type_||"length"!==t,[a2]:r[a2],[s2]:n[t]}:r},defineProperty(){J1(11)},getPrototypeOf:e=>e2(e.base_),setPrototypeOf(){J1(12)}},Q2={};function J2(e,t){const n=e[Q1];return(n?N2(n):e)[t]}function Z2(e,t){if(!(t in e))return;let n=e2(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=e2(n)}}function e4(e){e.modified_||(e.modified_=!0,e.parent_&&e4(e.parent_))}function t4(e){e.copy_||(e.assigned_=new Map,e.copy_=j2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}h2($2,(e,t)=>{Q2[e]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),Q2.deleteProperty=function(e,t){return Q2.set.call(this,e,t,void 0)},Q2.set=function(e,t,n){return $2.set.call(this,e[0],t,n,e[0])};function n4(e,t,n,r){var a,i;const[s,o]=v2(t)?R2(I2).proxyMap_(t,n):y2(t)?R2(I2).proxySet_(t,n):function(e,t){const n=x2(e),r={type_:n?1:0,scope_:t?t.scope_:D2(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,i=$2;n&&(a=[r],i=Q2);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,[o,r]}(t,n);return(null!==(a=null===n||void 0===n?void 0:n.scope_)&&void 0!==a?a:D2()).drafts_.push(s),o.callbacks_=null!==(i=null===n||void 0===n?void 0:n.callbacks_)&&void 0!==i?i:[],o.key_=r,n&&void 0!==r?function(e,t,n){e.callbacks_.push(function(r){var a,i;const s=t;if(!s||!G2(s,r))return;null===(a=r.mapSetPlugin_)||void 0===a||a.fixSetContents(s);const o=S2(s);q2(e,null!==(i=s.draft_)&&void 0!==i?i:s,o,n),X2(s,r)})}(n,o,r):o.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(o);const{patchPlugin_:n}=e;o.modified_&&n&&n.generatePatches_(o,[],e)}),s}function r4(e){return o2(e)||J1(10),a4(e)}function a4(e){if(!l2(e)||T2(e))return e;const t=e[Q1];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=j2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=j2(e,!0);return h2(n,(e,t)=>{g2(n,e,a4(t))},r),t&&(t.finalized_=!1),n}var i4=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,n)=>{if(w2(e)&&!w2(t)){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return r.produce(e,e=>t.call(this,e,...i))}}let r;if(w2(t)||J1(6),void 0===n||w2(n)||J1(7),l2(e)){const a=B2(this),i=n4(a,e,void 0);let s=!0;try{r=t(i),s=!1}finally{s?L2(a):z2(a)}return F2(a,n),W2(r,a)}if(!e||!b2(e)){if(r=t(e),void 0===r&&(r=e),r===Y1&&(r=void 0),this.autoFreeze_&&C2(r,!0),n){const t=[],a=[];R2(A2).generateReplacementPatches_(e,r,{patches_:t,inversePatches_:a}),n(t,a)}return r}J1(1)},this.produceWithPatches=(e,n)=>{if(w2(e))return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;const i=this.produce(e,n,(e,t)=>{r=e,a=t});return[i,r,a]},k2(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),k2(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),k2(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){l2(e)||J1(8),o2(e)&&(e=r4(e));const t=B2(this),n=n4(t,e,void 0);return n[Q1].isManual_=!0,z2(t),n}finishDraft(e,t){const n=e&&e[Q1];n&&n.isManual_||J1(9);const{scope_:r}=n;return F2(r,t),W2(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=R2(A2).applyPatches_;return o2(e)?r(e,t):this.produce(e,e=>r(e,t))}},s4=i4.produce;function o4(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var l4=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),c4=()=>Math.random().toString(36).substring(7).split("").join("."),u4={INIT:"@@redux/INIT".concat(c4()),REPLACE:"@@redux/REPLACE".concat(c4()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(c4())};function d4(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function h4(e,t,n){if("function"!==typeof e)throw new Error(o4(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(o4(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(o4(1));return n(h4)(e,t)}let r=e,a=t,i=new Map,s=i,o=0,l=!1;function c(){s===i&&(s=new Map,i.forEach((e,t)=>{s.set(t,e)}))}function u(){if(l)throw new Error(o4(3));return a}function d(e){if("function"!==typeof e)throw new Error(o4(4));if(l)throw new Error(o4(5));let t=!0;c();const n=o++;return s.set(n,e),function(){if(t){if(l)throw new Error(o4(6));t=!1,c(),s.delete(n),i=null}}}function h(e){if(!d4(e))throw new Error(o4(7));if("undefined"===typeof e.type)throw new Error(o4(8));if("string"!==typeof e.type)throw new Error(o4(17));if(l)throw new Error(o4(9));try{l=!0,a=r(a,e)}finally{l=!1}return(i=s).forEach(e=>{e()}),e}h({type:u4.INIT});const p={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(o4(10));r=e,h({type:u4.REPLACE})},[l4]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(o4(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[l4](){return this}}}};return p}function p4(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const r=t[i];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:u4.INIT}))throw new Error(o4(12));if("undefined"===typeof n(void 0,{type:u4.PROBE_UNKNOWN_ACTION()}))throw new Error(o4(13))})}(n)}catch(Yje){a=Yje}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let i=!1;const s={};for(let a=0;a<r.length;a++){const o=r[a],l=n[o],c=e[o],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(o4(14))}s[o]=u,i=i||u!==c}return i=i||r.length!==Object.keys(e).length,i?s:e}}function f4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function m4(e){return d4(e)&&"type"in e&&"string"===typeof e.type}function g4(e){return t=>{let{dispatch:n,getState:r}=t;return t=>a=>"function"===typeof a?a(n,r,e):t(a)}}var x4=g4(),v4=g4;const y4=["reducerPath"];var b4="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?f4:f4.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function w4(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(m3(0));return m(m({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>m4(t)&&t.type===e,n}var k4=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function N4(e){return l2(e)?s4(e,()=>{}):e}function S4(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var j4="RTK_autoBatch",C4=()=>e=>({payload:e,meta:{[j4]:!0}}),E4=e=>t=>{setTimeout(t,e)},T4=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,a=!1,i=!1;const s=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:E4(10):"callback"===e.type?e.queueNotification:E4(e.timeout),l=()=>{i=!1,a&&(a=!1,s.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>r&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[j4]),a=!r,a&&(i||(i=!0,o(l))),n.dispatch(e)}finally{r=!0}}})}};function I4(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let i=new k4;return t&&("boolean"===typeof t?i.push(x4):i.push(v4(t.extraArgument))),i},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:s,enhancers:o}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!d4(n))throw new Error(m3(1));l=p4(n)}c="function"===typeof r?r(t):t();let u=f4;a&&(u=b4(m({trace:!1},"object"===typeof a&&a)));const d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const a=e(n,r);let i=()=>{throw new Error(o4(15))};const s={getState:a.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,...n)}},o=t.map(e=>e(s));return i=f4(...o)(a.dispatch),m(m({},a),{},{dispatch:i})}}(...c),h=(e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new k4(e);return n&&r.push(T4("object"===typeof n?n:void 0)),r})(d);return h4(l,s,u(..."function"===typeof o?o(h):h()))}function A4(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(m3(28));if(r in t)throw new Error(m3(29));return t[r]=n,a},addAsyncThunk:(e,r)=>(r.pending&&(t[e.pending.type]=r.pending),r.rejected&&(t[e.rejected.type]=r.rejected),r.fulfilled&&(t[e.fulfilled.type]=r.fulfilled),r.settled&&n.push({matcher:e.settled,reducer:r.settled}),a),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}var O4=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var _4=Symbol.for("rtk-slice-createasyncthunk");function R4(e,t){return"".concat(e,"/").concat(t)}function P4(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[_4];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(m3(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return m({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(m3(12));if(n in s.sliceCaseReducersByType)throw new Error(m3(13));return s.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(s.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?A4(e.extraReducers):[e.extraReducers],a=m(m({},t),s.sliceCaseReducersByType);return function(e,t){let n,[r,a,i]=A4(t);if("function"===typeof e)n=()=>N4(e());else{const t=N4(e);n=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,s=[r[t.type],...a.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===s.filter(e=>!!e).length&&(s=[i]),s.reduce((e,n)=>{if(n){if(o2(e)){const r=n(e,t);return void 0===r?e:r}if(l2(e))return s4(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return s.getInitialState=n,s}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}i.forEach(r=>{const i=a[r],s={reducerName:r,type:R4(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function(e,t,n){let r,a,{type:i,reducerName:s,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(m3(17));r=t.reducer,a=t.prepare}else r=t;n.addCase(i,r).exposeCaseReducer(s,r).exposeAction(s,a?w4(i,a):w4(i))}(s,i,o):function(e,t,n,r){let{type:a,reducerName:i}=e;if(!r)throw new Error(m3(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=t,h=r(a,s,d);n.exposeAction(i,h),o&&n.addCase(h.fulfilled,o);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);u&&n.addMatcher(h.settled,u);n.exposeCaseReducer(i,{fulfilled:o||F4,pending:l||F4,rejected:c||F4,settled:u||F4})}(s,i,o,n)});const c=e=>e,d=new Map,h=new WeakMap;let p;function f(e,t){return p||(p=l()),p(e,t)}function g(){return p||(p=l()),p.getInitialState()}function x(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let a=e[t];return"undefined"===typeof a&&n&&(a=S4(h,r,g)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=S4(d,n,()=>new WeakMap);return S4(r,t,()=>{const r={};for(const[i,s]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;r[i]=M4(s,t,()=>S4(h,t,g),n)}return r})}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const v=m(m({name:t,reducer:f,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:g},x(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,a=u(t,y4);const i=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:i,reducer:f},a),m(m({},v),x(i,!0))}});return v}}function M4(e,t,n,r){function a(a){let i=t(a);"undefined"===typeof i&&r&&(i=n());for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return e(i,...o)}return a.unwrapped=e,a}var D4=P4();function F4(){}var L4="listener",z4="completed",B4="cancelled",U4="task-".concat(B4),W4="task-".concat(z4),V4="".concat(L4,"-").concat(B4),H4="".concat(L4,"-").concat(z4),G4=class{constructor(e){p(this,"name","TaskAbortError"),p(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(B4," (reason: ").concat(e,")")}},K4=(e,t)=>{if("function"!==typeof e)throw new TypeError(m3(32))},q4=()=>{},X4=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q4;return e.catch(t),e},Y4=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),$4=e=>{if(e.aborted)throw new G4(e.reason)};function Q4(e,t){let n=q4;return new Promise((r,a)=>{const i=()=>a(new G4(e.reason));e.aborted?i():(n=Y4(e,i),t.finally(()=>n()).then(r,a))}).finally(()=>{n=q4})}var J4=e=>t=>X4(Q4(e,t).then(t=>($4(e),t))),Z4=e=>{const t=J4(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:e3}=Object,t3={},n3="listenerMiddleware",r3=(e,t)=>(n,r)=>{K4(n);const a=new AbortController;var i;i=a,Y4(e,()=>i.abort(e.reason));const s=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof G4?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{$4(e),$4(a.signal);const t=await n({pause:J4(a.signal),delay:Z4(a.signal),signal:a.signal});return $4(a.signal),t},()=>a.abort(W4));return null!==r&&void 0!==r&&r.autoJoin&&t.push(s.catch(q4)),{result:J4(e)(s),cancel(){a.abort(U4)}}},a3=(e,t)=>(n,r)=>X4((async(n,r)=>{$4(t);let a=()=>{};const i=[new Promise((t,r)=>{let i=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});a=()=>{i(),r()}})];null!=r&&i.push(new Promise(e=>setTimeout(e,r,null)));try{const e=await Q4(t,Promise.race(i));return $4(t),e}finally{a()}})(n,r)),i3=e=>{let{type:t,actionCreator:n,matcher:r,predicate:a,effect:i}=e;if(t)a=w4(t).match;else if(n)t=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(m3(21));return K4(i),{predicate:a,type:t,effect:i}},s3=e3(e=>{const{type:t,predicate:n,effect:r}=i3(e);return{id:O4(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(m3(22))}}},{withTypes:()=>s3}),o3=(e,t)=>{const{type:n,effect:r,predicate:a}=i3(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===a)&&e.effect===r)},l3=e=>{e.pending.forEach(e=>{e.abort(V4)})},c3=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},u3=e3(w4("".concat(n3,"/add")),{withTypes:()=>u3}),d3=w4("".concat(n3,"/removeAll")),h3=e3(w4("".concat(n3,"/remove")),{withTypes:()=>h3}),p3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(n3,"/error"),...t)},f3=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,n=new Map,{extra:r,onError:a=p3}=e;K4(a);const i=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&l3(e)}))(null!==(n=o3(t,e))&&void 0!==n?n:s3(e))};e3(i,{withTypes:()=>i});const s=e=>{const n=o3(t,e);return n&&(n.unsubscribe(),e.cancelActive&&l3(n)),!!n};e3(s,{withTypes:()=>s});const o=async(e,s,o,l)=>{const c=new AbortController,u=a3(i,c.signal),d=[];try{e.pending.add(c),(e=>{var t;const r=null!==(t=n.get(e))&&void 0!==t?t:0;n.set(e,r+1)})(e),await Promise.resolve(e.effect(s,e3({},o,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:Z4(c.signal),pause:J4(c.signal),extra:r,signal:c.signal,fork:r3(c.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==c&&(e.abort(V4),n.delete(e))})},cancel:()=>{c.abort(V4),e.pending.delete(c)},throwIfCancelled:()=>{$4(c.signal)}})))}catch(h){h instanceof G4||c3(a,h,{raisedBy:"effect"})}finally{await Promise.all(d),c.abort(H4),(e=>{var t;const r=null!==(t=n.get(e))&&void 0!==t?t:1;1===r?n.delete(e):n.set(e,r-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())l3(e);e.clear()})(t,n);return{middleware:e=>n=>r=>{if(!m4(r))return n(r);if(u3.match(r))return i(r.payload);if(d3.match(r))return void l();if(h3.match(r))return s(r.payload);let c=e.getState();const u=()=>{if(c===t3)throw new Error(m3(23));return c};let d;try{if(d=n(r),t.size>0){const n=e.getState(),i=Array.from(t.values());for(const t of i){let i=!1;try{i=t.predicate(r,n,c)}catch(h){i=!1,c3(a,h,{raisedBy:"predicate"})}i&&o(t,r,e,u)}}}finally{c=t3}return d},startListening:i,stopListening:s,clearListeners:l}};Symbol.for("rtk-state-proxy-original");function m3(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function g3(e,t){if(t){var n=Number.parseInt(t,10);if(!x1(n))return null===e||void 0===e?void 0:e[n]}}var x3=D4({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),v3=x3.reducer,{createEventEmitter:y3}=x3.actions;n(7237);function b3(e){e()}var w3={notify(){},get:()=>[]};function k3(e,t){let n,r=w3,a=0,i=!1;function s(){c.onStateChange&&c.onStateChange()}function o(){a++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){b3(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=w3)}const c={addNestedSub:function(e){o();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,o())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>r};return c}var N3=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),S3=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),j3=(()=>N3||S3?o.useLayoutEffect:o.useEffect)();function C3(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function E3(e,t){if(C3(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!C3(e[n[a]],t[n[a]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var T3=Symbol.for("react-redux-context"),I3="undefined"!==typeof globalThis?globalThis:{};function A3(){var e;if(!o.createContext)return{};const t=null!==(e=I3[T3])&&void 0!==e?e:I3[T3]=new Map;let n=t.get(o.createContext);return n||(n=o.createContext(null),t.set(o.createContext,n)),n}var O3=A3();var _3=function(e){const{children:t,context:n,serverState:r,store:a}=e,i=o.useMemo(()=>{const e=k3(a);return{store:a,subscription:e,getServerState:r?()=>r:void 0}},[a,r]),s=o.useMemo(()=>a.getState(),[a]);j3(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,s]);const l=n||O3;return o.createElement(l.Provider,{value:i},t)};var R3=Symbol.for("immer-nothing"),P3=Symbol.for("immer-draftable"),M3=Symbol.for("immer-state");function D3(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var F3=Object.getPrototypeOf;function L3(e){return!!e&&!!e[M3]}function z3(e){var t;return!!e&&(W3(e)||Array.isArray(e)||!!e[P3]||!(null===(t=e.constructor)||void 0===t||!t[P3])||q3(e)||X3(e))}var B3=Object.prototype.constructor.toString(),U3=new WeakMap;function W3(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!==typeof n)return!1;let r=U3.get(n);return void 0===r&&(r=Function.toString.call(n),U3.set(n,r)),r===B3}function V3(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===H3(e)){(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,r)=>t(r,n,e))}function H3(e){const t=e[M3];return t?t.type_:Array.isArray(e)?1:q3(e)?2:X3(e)?3:0}function G3(e,t){return 2===H3(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K3(e,t,n){const r=H3(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function q3(e){return e instanceof Map}function X3(e){return e instanceof Set}function Y3(e){return e.copy_||e.base_}function $3(e,t){if(q3(e))return new Map(e);if(X3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=W3(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[M3];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(F3(e),t)}{const t=F3(e);if(null!==t&&n)return m({},e);const r=Object.create(t);return Object.assign(r,e)}}function Q3(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Z3(e)||L3(e)||!z3(e)||(H3(e)>1&&Object.defineProperties(e,{set:J3,add:J3,clear:J3,delete:J3}),Object.freeze(e),t&&Object.values(e).forEach(e=>Q3(e,!0))),e}var J3={value:function(){D3(2)}};function Z3(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var e5,t5={};function n5(e){const t=t5[e];return t||D3(0),t}function r5(){return e5}function a5(e,t){t&&(n5("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function i5(e){s5(e),e.drafts_.forEach(l5),e.drafts_=null}function s5(e){e===e5&&(e5=e.parent_)}function o5(e){return e5={drafts_:[],parent_:e5,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function l5(e){const t=e[M3];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function c5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[M3].modified_&&(i5(t),D3(4)),z3(e)&&(e=u5(t,e),t.parent_||h5(t,e)),t.patches_&&n5("Patches").generateReplacementPatches_(n[M3].base_,e,t.patches_,t.inversePatches_)):e=u5(t,n,[]),i5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==R3?e:void 0}function u5(e,t,n){if(Z3(t))return t;const r=e.immer_.shouldUseStrictIteration(),a=t[M3];if(!a)return V3(t,(r,i)=>d5(e,a,t,r,i,n),r),t;if(a.scope_!==e)return t;if(!a.modified_)return h5(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let i=t,s=!1;3===a.type_&&(i=new Set(t),t.clear(),s=!0),V3(i,(r,i)=>d5(e,a,t,r,i,n,s),r),h5(e,t,!1),n&&e.patches_&&n5("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function d5(e,t,n,r,a,i,s){if(null==a)return;if("object"!==typeof a&&!s)return;const o=Z3(a);if(!o||s){if(L3(a)){const s=u5(e,a,i&&t&&3!==t.type_&&!G3(t.assigned_,r)?i.concat(r):void 0);if(K3(n,r,s),!L3(s))return;e.canAutoFreeze_=!1}else s&&n.add(a);if(z3(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[r]===a&&o)return;u5(e,a),t&&t.scope_.parent_||"symbol"===typeof r||!(q3(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||h5(e,a)}}}function h5(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Q3(t,n)}var p5={get(e,t){if(t===M3)return e;const n=Y3(e);if(!G3(n,t))return function(e,t,n){var r;const a=g5(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!z3(r)?r:r===m5(e.base_,t)?(v5(e),e.copy_[t]=y5(r,e)):r},has:(e,t)=>t in Y3(e),ownKeys:e=>Reflect.ownKeys(Y3(e)),set(e,t,n){const r=g5(Y3(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=m5(Y3(e),t),s=null===r||void 0===r?void 0:r[M3];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((a=n)===(i=r)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==n||G3(e.base_,t)))return!0;v5(e),x5(e)}var a,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==m5(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,v5(e),x5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Y3(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){D3(11)},getPrototypeOf:e=>F3(e.base_),setPrototypeOf(){D3(12)}},f5={};function m5(e,t){const n=e[M3];return(n?Y3(n):e)[t]}function g5(e,t){if(!(t in e))return;let n=F3(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=F3(n)}}function x5(e){e.modified_||(e.modified_=!0,e.parent_&&x5(e.parent_))}function v5(e){e.copy_||(e.copy_=$3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}V3(p5,(e,t)=>{f5[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),f5.deleteProperty=function(e,t){return f5.set.call(this,e,t,void 0)},f5.set=function(e,t,n){return p5.set.call(this,e[0],t,n,e[0])};function y5(e,t){const n=q3(e)?n5("MapSet").proxyMap_(e,t):X3(e)?n5("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:r5(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=p5;n&&(a=[r],i=f5);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}(e,t);return(t?t.scope_:r5()).drafts_.push(n),n}function b5(e){if(!z3(e)||Z3(e))return e;const t=e[M3];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$3(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=$3(e,!0);return V3(n,(e,t)=>{K3(n,e,b5(t))},r),t&&(t.finalized_=!1),n}var w5=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!==typeof t&&D3(6),void 0!==n&&"function"!==typeof n&&D3(7),z3(e)){const a=o5(this),i=y5(e,void 0);let s=!0;try{r=t(i),s=!1}finally{s?i5(a):s5(a)}return a5(a,n),c5(r,a)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===R3&&(r=void 0),this.autoFreeze_&&Q3(r,!0),n){const t=[],a=[];n5("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}D3(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;const i=this.produce(e,n,(e,t)=>{r=e,a=t});return[i,r,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){z3(e)||D3(8),L3(e)&&(e=function(e){L3(e)||D3(10);return b5(e)}(e));const t=o5(this),n=y5(e,void 0);return n[M3].isManual_=!0,s5(t),n}finishDraft(e,t){const n=e&&e[M3];n&&n.isManual_||D3(9);const{scope_:r}=n;return a5(r,t),c5(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=n5("Patches").applyPatches_;return L3(e)?r(e,t):this.produce(e,e=>r(e,t))}};w5.produce;var k5={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},N5=D4({name:"tooltip",initialState:{itemInteraction:{click:k5,hover:k5},axisInteraction:{click:k5,hover:k5},keyboardInteraction:k5,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:C4()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,a=r4(e).tooltipItemPayloads.indexOf(n);a>-1&&(e.tooltipItemPayloads[a]=r)},prepare:C4()},removeTooltipEntrySettings:{reducer(e,t){var n=r4(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:C4()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:S5,replaceTooltipEntrySettings:j5,removeTooltipEntrySettings:C5,setTooltipSettingsState:E5,setActiveMouseOverItemIndex:T5,mouseLeaveItem:I5,mouseLeaveChart:A5,setActiveClickItemIndex:O5,setMouseOverAxisIndex:_5,setMouseClickAxisIndex:R5,setSyncInteraction:P5,setKeyboardInteraction:M5}=N5.actions,D5=N5.reducer,F5=D4({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;null!=n&&(e.dataStartIndex=n),null!=r&&(e.dataEndIndex=r)}}}),{setChartData:L5,setDataStartEndIndexes:z5,setComputedData:B5}=F5.actions,U5=F5.reducer,W5=D4({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,a,i;e.margin.top=null!==(n=t.payload.top)&&void 0!==n?n:0,e.margin.right=null!==(r=t.payload.right)&&void 0!==r?r:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(i=t.payload.left)&&void 0!==i?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:V5,setLayout:H5,setChartSize:G5,setScale:K5}=W5.actions,q5=W5.reducer;function X5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Y5=e=>Array.isArray(e)?e:[e];function $5(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Q5="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function J5(){return{s:0,v:void 0,o:null,p:null}}function Z5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,i=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=J5(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=J5(),e.set(n,t)):t=r}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),i++,r){var c,u,d;const e=null!==(c=null===(u=a)||void 0===u||null===(d=u.deref)||void 0===d?void 0:d.call(u))&&void 0!==c?c:a;null!=e&&r(e,l)&&(l=e,0!==i&&i--);a="object"===typeof l&&null!==l||"function"===typeof l?new Q5(l):l}return o.s=1,o.v=l,l}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function e6(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a="function"===typeof e?{memoize:e,memoizeOptions:n}:e,i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,i=0,s=0,o={},l=t.pop();"object"===typeof l&&(o=l,l=t.pop()),X5(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=m(m({},a),o),{memoize:u,memoizeOptions:d=[],argsMemoize:h=Z5,argsMemoizeOptions:p=[],devModeChecks:f={}}=c,g=Y5(d),x=Y5(p),v=$5(t),y=u(function(){return i++,l.apply(null,arguments)},...g);const b=h(function(){s++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(v,arguments);return r=y.apply(null,e),r},...x);return Object.assign(b,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>r,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:u,argsMemoize:h})};return Object.assign(i,{withTypes:()=>i}),i}var t6=e6(Z5),n6=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t6;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((e,t,r)=>(e[n[r]]=t,e),{})});return r},{withTypes:()=>n6}),r6=n(8443),a6=(0,o.createContext)(null),i6=e=>e,s6=()=>{var e=(0,o.useContext)(a6);return e?e.store.dispatch:i6},o6=()=>{},l6=()=>o6,c6=(e,t)=>e===t;function u6(e){var t=(0,o.useContext)(a6);return(0,r6.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:l6,t?t.store.getState:o6,t?t.store.getState:o6,t?e:o6,c6)}var d6=n(3821),h6=n.n(d6),p6=e=>e.legend.settings;t6([e=>e.legend.payload,p6],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?h6()(r,n):r});function f6(e,t){if((a=e.length)>1)for(var n,r,a,i=1,s=e[t[0]],o=s.length;i<a;++i)for(r=s,s=e[t[i]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function m6(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function g6(e){return function(){return e}}function x6(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function v6(e,t){return e[t]}function y6(e){const t=[];return t.key=e,t}function b6(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function w6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w6(Object(n),!0).forEach(function(t){N6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S6(e,t,n){return E1(e)||E1(t)?n:b1(t)?p1()(e,t,n):"function"===typeof t?t(e):n}var j6=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,C6=1e-4,E6={sign:e=>{var t,n=e.length;if(!(n<=0)){var r=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==r||r<=0))for(var a=0;a<r;++a)for(var i=0,s=0,o=0;o<n;++o){var l=e[o],c=null===l||void 0===l?void 0:l[a];if(null!=c){var u=c[1],d=c[0],h=x1(u)?d:u;h>=0?(c[0]=i,c[1]=i+h,i=u):(c[0]=s,c[1]=s+h,s=u)}}}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,i=0,s=e[0].length;i<s;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}f6(e,t)}},none:f6,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],i=a.length;r<i;++r){for(var s=0,o=0;s<n;++s)o+=e[s][r][1]||0;a[r][1]+=a[r][0]=-o/2}f6(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,i=0,s=1;s<r;++s){for(var o=0,l=0,c=0;o<a;++o){for(var u=e[t[o]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,p=0;p<o;++p){var f=e[t[p]];h+=(f[s][1]||0)-(f[s-1][1]||0)}l+=d,c+=h*d}n[s-1][1]+=n[s-1][0]=i,l&&(i-=c/l)}n[s-1][1]+=n[s-1][0]=i,f6(e,t)}},positive:e=>{var t,n=e.length;if(!(n<=0)){var r=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==r||r<=0))for(var a=0;a<r;++a)for(var i=0,s=0;s<n;++s){var o=e[s],l=null===o||void 0===o?void 0:o[a];if(null!=l){var c=x1(l[1])?l[0]:l[1];c>=0?(l[0]=i,l[1]=i+c,i=l[1]):(l[0]=0,l[1]=0)}}}}},T6=(e,t,n)=>{var r,a=null!==(r=E6[n])&&void 0!==r?r:f6,i=function(){var e=g6([]),t=x6,n=f6,r=v6;function a(a){var i,s,o=Array.from(e.apply(this,arguments),y6),l=o.length,c=-1;for(const e of a)for(i=0,++c;i<l;++i)(o[i][c]=[0,+r(e,o[i].key,c,a)]).data=e;for(i=0,s=m6(t(o));i<l;++i)o[s[i]].index=i;return n(o,s),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:g6(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:g6(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?x6:"function"===typeof e?e:g6(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?f6:e,a):n},a}().keys(t).value((e,t)=>Number(S6(e,t,0))).order(x6).offset(a),s=i(e);return s.forEach((n,r)=>{n.forEach((n,a)=>{var i=S6(e[a],t[r],0);Array.isArray(i)&&2===i.length&&y1(i[0])&&y1(i[1])&&(n[0]=i[0],n[1]=i[1])})}),s};function I6(e){return null==e?void 0:String(e)}function A6(e){var{axis:t,ticks:n,bandSize:r,entry:a,index:i,dataKey:s}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!E1(a[t.dataKey])){var o=C1(n,"value",a[t.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=S6(a,E1(s)?t.dataKey:s);return E1(l)?null:t.scale(l)}var O6=e=>{var{axis:t,ticks:n,offset:r,bandSize:a,entry:i,index:s}=e;if("category"===t.type)return n[s]?n[s].coordinate+r:null;var o=S6(i,t.dataKey,t.scale.domain()[s]);return E1(o)?null:t.scale(o)-a/2+r},_6=(e,t,n)=>{var r;if(null!=e)return r=Object.keys(e).reduce((r,a)=>{var i=e[a];if(!i)return r;var{stackedData:s}=i,o=s.reduce((e,r)=>{var a=(e=>{var t=e.flat(2).filter(y1);return[Math.min(...t),Math.max(...t)]})(b6(r,t,n));return L1(a[0])&&L1(a[1])?[Math.min(e[0],a[0]),Math.max(e[1],a[1])]:e},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]),[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]]},R6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,M6=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=h6()(t,e=>e.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var l=a[s],c=a[s-1];i=Math.min(((null===l||void 0===l?void 0:l.coordinate)||0)-((null===c||void 0===c?void 0:c.coordinate)||0),i)}return i===1/0?0:i}return n?void 0:0};function D6(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:a,name:i}=e;return k6(k6({},t),{},{dataKey:n,payload:r,value:a,name:i})}function F6(e,t){return e?String(e):"string"===typeof t?t:void 0}var L6=e=>e.layout.width,z6=e=>e.layout.height,B6=e=>e.layout.scale,U6=e=>e.layout.margin,W6=t6(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),V6=t6(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),H6="data-recharts-item-index",G6="data-recharts-item-id";function K6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K6(Object(n),!0).forEach(function(t){X6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function X6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y6=t6([L6,z6,U6,e=>e.brush.height,function(e){return V6(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return V6(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return W6(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return W6(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},p6,e=>e.legend.size],(e,t,n,r,a,i,s,o,l,c)=>{var u={left:(n.left||0)+a,right:(n.right||0)+i},d=q6(q6({},{top:(n.top||0)+s,bottom:(n.bottom||0)+o}),u),h=d.bottom;d.bottom+=r,d=((e,t,n)=>{if(t&&n){var{width:r,height:a}=n,{align:i,verticalAlign:s,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===s)&&"center"!==i&&y1(e[i]))return k6(k6({},e),{},{[i]:e[i]+(r||0)});if(("horizontal"===o||"vertical"===o&&"center"===i)&&"middle"!==s&&y1(e[s]))return k6(k6({},e),{},{[s]:e[s]+(a||0)})}return e})(d,l,c);var p=e-d.left-d.right,f=t-d.top-d.bottom;return q6(q6({brushBottom:h},d),{},{width:Math.max(p,0),height:Math.max(f,0)})}),$6=t6(Y6,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Q6=t6(L6,z6,(e,t)=>({x:0,y:0,width:e,height:t})),J6=(0,o.createContext)(null),Z6=()=>null!=(0,o.useContext)(J6),e8=e=>e.brush,t8=t6([e8,Y6,U6],(e,t,n)=>({height:e.height,x:y1(e.x)?e.x:t.left,y:y1(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:y1(e.width)?e.width:t.width}));function n8(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var r8=()=>{var e,t=Z6(),n=u6($6),r=u6(t8),a=null===(e=u6(e8))||void 0===e?void 0:e.padding;return t&&r&&a?{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}:n},a8={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},i8=e=>e.layout.layoutType,s8=()=>u6(i8),o8=e=>{var t=s6(),n=Z6(),{width:r,height:a}=e,i=K1(),s=r,l=a;return i&&(s=i.width>0?i.width:r,l=i.height>0?i.height:a),(0,o.useEffect)(()=>{!n&&z1(s)&&z1(l)&&t(G5({width:s,height:l}))},[t,n,s,l]),null},l8=n(9859),c8=n.n(l8);function u8(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function d8(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class h8 extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g8;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(p8(this,e))}has(e){return super.has(p8(this,e))}set(e,t){return super.set(f8(this,e),t)}delete(e){return super.delete(m8(this,e))}}Set;function p8(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):t}function f8(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):(n.set(a,t),t)}function m8(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)&&(t=n.get(a),n.delete(a)),t}function g8(e){return null!==e&&"object"===typeof e?e.valueOf():e}const x8=Symbol("implicit");function v8(){var e=new h8,t=[],n=[],r=x8;function a(a){let i=e.get(a);if(void 0===i){if(r!==x8)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new h8;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return v8(t,n).unknown(r)},u8.apply(a,arguments),a}function y8(){var e,t,n=v8().unknown(void 0),r=n.domain,a=n.range,i=0,s=1,o=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=s<i,h=d?s:i,p=d?i:s;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(n).map(function(t){return h+e*t});return a(d?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([i,s]=e,i=+i,s=+s,d()):[i,s]},n.rangeRound=function(e){return[i,s]=e,i=+i,s=+s,o=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,d()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return y8(r(),[i,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},u8.apply(d(),arguments)}function b8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return b8(t())},e}function w8(){return b8(y8.apply(null,arguments).paddingInner(1))}const k8=Math.sqrt(50),N8=Math.sqrt(10),S8=Math.sqrt(2);function j8(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),s=i>=k8?10:i>=N8?5:i>=S8?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?j8(e,t,2*n):[o,l,c]}function C8(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,i,s]=r?j8(t,e,n):j8(e,t,n);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function E8(e,t,n){return j8(e=+e,t=+t,n=+n)[2]}function T8(e,t,n){n=+n;const r=(t=+t)<(e=+e),a=r?E8(t,e,n):E8(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function I8(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A8(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function O8(e){let t,n,r;function a(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{const t=a+i>>>1;n(e[t],r)<0?a=t+1:i=t}while(a<i)}return a}return 2!==e.length?(t=I8,n=(t,n)=>I8(e(t),n),r=(t,n)=>e(t)-n):(t=e===I8||e===A8?e:_8,n=e,r=e),{left:a,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>n&&r(e[i-1],t)>-r(e[i],t)?i-1:i},right:function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{const t=a+i>>>1;n(e[t],r)<=0?a=t+1:i=t}while(a<i)}return a}}}function _8(){return 0}function R8(e){return null===e?NaN:+e}const P8=O8(I8),M8=P8.right,D8=(P8.left,O8(R8).center,M8);function F8(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function L8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function z8(){}var B8=.7,U8=1/B8,W8="\\s*([+-]?\\d+)\\s*",V8="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",H8="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G8=/^#([0-9a-f]{3,8})$/,K8=new RegExp("^rgb\\(".concat(W8,",").concat(W8,",").concat(W8,"\\)$")),q8=new RegExp("^rgb\\(".concat(H8,",").concat(H8,",").concat(H8,"\\)$")),X8=new RegExp("^rgba\\(".concat(W8,",").concat(W8,",").concat(W8,",").concat(V8,"\\)$")),Y8=new RegExp("^rgba\\(".concat(H8,",").concat(H8,",").concat(H8,",").concat(V8,"\\)$")),$8=new RegExp("^hsl\\(".concat(V8,",").concat(H8,",").concat(H8,"\\)$")),Q8=new RegExp("^hsla\\(".concat(V8,",").concat(H8,",").concat(H8,",").concat(V8,"\\)$")),J8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Z8(){return this.rgb().formatHex()}function e7(){return this.rgb().formatRgb()}function t7(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=G8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?n7(t):3===n?new i7(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?r7(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?r7(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=K8.exec(e))?new i7(t[1],t[2],t[3],1):(t=q8.exec(e))?new i7(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=X8.exec(e))?r7(t[1],t[2],t[3],t[4]):(t=Y8.exec(e))?r7(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=$8.exec(e))?d7(t[1],t[2]/100,t[3]/100,1):(t=Q8.exec(e))?d7(t[1],t[2]/100,t[3]/100,t[4]):J8.hasOwnProperty(e)?n7(J8[e]):"transparent"===e?new i7(NaN,NaN,NaN,0):null}function n7(e){return new i7(e>>16&255,e>>8&255,255&e,1)}function r7(e,t,n,r){return r<=0&&(e=t=n=NaN),new i7(e,t,n,r)}function a7(e,t,n,r){return 1===arguments.length?((a=e)instanceof z8||(a=t7(a)),a?new i7((a=a.rgb()).r,a.g,a.b,a.opacity):new i7):new i7(e,t,n,null==r?1:r);var a}function i7(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function s7(){return"#".concat(u7(this.r)).concat(u7(this.g)).concat(u7(this.b))}function o7(){const e=l7(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(c7(this.r),", ").concat(c7(this.g),", ").concat(c7(this.b)).concat(1===e?")":", ".concat(e,")"))}function l7(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function c7(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function u7(e){return((e=c7(e))<16?"0":"")+e.toString(16)}function d7(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new p7(e,t,n,r)}function h7(e){if(e instanceof p7)return new p7(e.h,e.s,e.l,e.opacity);if(e instanceof z8||(e=t7(e)),!e)return new p7;if(e instanceof p7)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,o=i-a,l=(i+a)/2;return o?(s=t===i?(n-r)/o+6*(n<r):n===i?(r-t)/o+2:(t-n)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new p7(s,o,l,e.opacity)}function p7(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function f7(e){return(e=(e||0)%360)<0?e+360:e}function m7(e){return Math.max(0,Math.min(1,e||0))}function g7(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function x7(e,t,n,r,a){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*n+(1+3*e+3*i-3*s)*r+s*a)/6}F8(z8,t7,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Z8,formatHex:Z8,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return h7(this).formatHsl()},formatRgb:e7,toString:e7}),F8(i7,a7,L8(z8,{brighter(e){return e=null==e?U8:Math.pow(U8,e),new i7(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?B8:Math.pow(B8,e),new i7(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new i7(c7(this.r),c7(this.g),c7(this.b),l7(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:s7,formatHex:s7,formatHex8:function(){return"#".concat(u7(this.r)).concat(u7(this.g)).concat(u7(this.b)).concat(u7(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:o7,toString:o7})),F8(p7,function(e,t,n,r){return 1===arguments.length?h7(e):new p7(e,t,n,null==r?1:r)},L8(z8,{brighter(e){return e=null==e?U8:Math.pow(U8,e),new p7(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?B8:Math.pow(B8,e),new p7(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new i7(g7(e>=240?e-240:e+120,a,r),g7(e,a,r),g7(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new p7(f7(this.h),m7(this.s),m7(this.l),l7(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=l7(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(f7(this.h),", ").concat(100*m7(this.s),"%, ").concat(100*m7(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const v7=e=>()=>e;function y7(e,t){return function(n){return e+n*t}}function b7(e){return 1===(e=+e)?w7:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):v7(isNaN(t)?n:t)}}function w7(e,t){var n=t-e;return n?y7(e,n):v7(isNaN(e)?t:e)}const k7=function e(t){var n=b7(t);function r(e,t){var r=n((e=a7(e)).r,(t=a7(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),s=w7(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function N7(e){return function(t){var n,r,a=t.length,i=new Array(a),s=new Array(a),o=new Array(a);for(n=0;n<a;++n)r=a7(t[n]),i[n]=r.r||0,s[n]=r.g||0,o[n]=r.b||0;return i=e(i),s=e(s),o=e(o),r.opacity=1,function(e){return r.r=i(e),r.g=s(e),r.b=o(e),r+""}}}N7(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],s=r>0?e[r-1]:2*a-i,o=r<t-1?e[r+2]:2*i-a;return x7((n-r/t)*t,s,a,i,o)}}),N7(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],s=e[(r+1)%t],o=e[(r+2)%t];return x7((n-r/t)*t,a,i,s,o)}});function S7(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),s=new Array(r);for(n=0;n<a;++n)i[n]=_7(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=i[n](e);return s}}function j7(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function C7(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function E7(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=_7(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var T7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I7=new RegExp(T7.source,"g");function A7(e,t){var n,r,a,i=T7.lastIndex=I7.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=T7.exec(e))&&(r=I7.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:C7(n,r)})),i=I7.lastIndex;return i<t.length&&(a=t.slice(i),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function O7(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function _7(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?v7(t):("number"===a?C7:"string"===a?(n=t7(t))?(t=n,k7):A7:t instanceof t7?k7:t instanceof Date?j7:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?S7:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?E7:C7:O7))(e,t)}function R7(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function P7(e){return+e}var M7=[0,1];function D7(e){return e}function F7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function L7(e,t,n){var r=e[0],a=e[1],i=t[0],s=t[1];return a<r?(r=F7(a,r),i=n(s,i)):(r=F7(r,a),i=n(i,s)),function(e){return i(r(e))}}function z7(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)a[s]=F7(e[s],e[s+1]),i[s]=n(t[s],t[s+1]);return function(t){var n=D8(e,t,1,r)-1;return i[n](a[n](t))}}function B7(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function U7(){var e,t,n,r,a,i,s=M7,o=M7,l=_7,c=D7;function u(){var e=Math.min(s.length,o.length);return c!==D7&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),r=e>2?z7:L7,a=i=null,d}function d(t){return null==t||isNaN(t=+t)?n:(a||(a=r(s.map(e),o,l)))(e(c(t)))}return d.invert=function(n){return c(t((i||(i=r(o,s.map(e),C7)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,P7),u()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=R7,u()},d.clamp=function(e){return arguments.length?(c=!!e||D7,u()):c!==D7},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function W7(){return U7()(D7,D7)}var V7,H7=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function G7(e){if(!(t=H7.exec(e)))throw new Error("invalid format: "+e);var t;return new K7({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function K7(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function q7(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function X7(e){return(e=q7(Math.abs(e)))?e[1]:NaN}function Y7(e,t){var n=q7(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}G7.prototype=K7.prototype,K7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const $7={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Y7(100*e,t),r:Y7,s:function(e,t){var n=q7(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(V7=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+q7(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Q7(e){return e}var J7,Z7,e9,t9=Array.prototype.map,n9=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function r9(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Q7:(t=t9.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(e.substring(a-=o,a+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Q7:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(t9.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=G7(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,x=e.trim,v=e.type;"n"===v?(m=!0,v="g"):$7[v]||(void 0===g&&(g=12),x=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===h?a:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?i:/[%p]/.test(v)?l:"",w=$7[v],k=/[defgprs%]/.test(v);function N(e){var a,i,l,h=y,N=b;if("c"===v)N=w(e)+N,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==d&&(S=!1),h=(S?"("===d?d:c:"-"===d||"("===d?"":d)+h,N=("s"===v?n9[8+V7/3]:"")+N+(S&&"("===d?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?s+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}m&&!p&&(e=r(e,1/0));var j=h.length+e.length+N.length,C=j<f?new Array(f-j+1).join(t):"";switch(m&&p&&(e=r(C+e,C.length?f-N.length:1/0),C=""),n){case"<":e=h+e+N+C;break;case"=":e=h+C+e+N;break;case"^":e=C.slice(0,j=C.length>>1)+h+e+N+C.slice(j);break;default:e=C+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:d,formatPrefix:function(e,t){var n=d(((e=G7(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(X7(t)/3))),a=Math.pow(10,-r),i=n9[8+r/3];return function(e){return n(a*e)+i}}}}function a9(e,t,n,r){var a,i=T8(e,t,n);switch((r=G7(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(X7(t)/3)))-X7(Math.abs(e)))}(i,s))||(r.precision=a),e9(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,X7(t)-X7(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-X7(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return Z7(r)}function i9(e){var t=e.domain;return e.ticks=function(e){var n=t();return C8(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return a9(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),s=0,o=i.length-1,l=i[s],c=i[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=E8(l,c,n))===r)return i[s]=l,i[o]=c,t(i);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function s9(){var e=W7();return e.copy=function(){return B7(e,s9())},u8.apply(e,arguments),i9(e)}function o9(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,P7),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return o9(e).unknown(t)},e=arguments.length?Array.from(e,P7):[0,1],i9(n)}function l9(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],s=e[a];return s<i&&(n=r,r=a,a=n,n=i,i=s,s=n),e[r]=t.floor(i),e[a]=t.ceil(s),e}function c9(e){return Math.log(e)}function u9(e){return Math.exp(e)}function d9(e){return-Math.log(-e)}function h9(e){return-Math.exp(-e)}function p9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function f9(e){return(t,n)=>-e(-t,n)}function m9(e){const t=e(c9,u9),n=t.domain;let r,a,i=10;function s(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),a=function(e){return 10===e?p9:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=f9(r),a=f9(a),e(d9,h9)):e(c9,u9),t}return t.base=function(e){return arguments.length?(i=+e,s()):i},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,u,d=r(s),h=r(o);const p=null==e?10:+e;let f=[];if(!(i%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<i;++c)if(u=d<0?c/a(-d):c*a(d),!(u<s)){if(u>o)break;f.push(u)}}else for(;d<=h;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/a(-d):c*a(d),!(u<s)){if(u>o)break;f.push(u)}2*f.length<p&&(f=C8(s,o,p))}else f=C8(d,h,Math.min(h-d,p)).map(a);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===i?"s":","),"function"!==typeof n&&(i%1||null!=(n=G7(n)).precision||(n.trim=!0),n=Z7(n)),e===1/0)return n;const s=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*i<i-.5&&(t*=i),t<=s?n(e):""}},t.nice=()=>n(l9(n(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function g9(){const e=m9(U7()).domain([1,10]);return e.copy=()=>B7(e,g9()).base(e.base()),u8.apply(e,arguments),e}function x9(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function v9(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function y9(e){var t=1,n=e(x9(t),v9(t));return n.constant=function(n){return arguments.length?e(x9(t=+n),v9(t)):t},i9(n)}function b9(){var e=y9(U7());return e.copy=function(){return B7(e,b9()).constant(e.constant())},u8.apply(e,arguments)}function w9(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function k9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function N9(e){return e<0?-e*e:e*e}function S9(e){var t=e(D7,D7),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(D7,D7):.5===n?e(k9,N9):e(w9(n),w9(1/n)):n},i9(t)}function j9(){var e=S9(U7());return e.copy=function(){return B7(e,j9()).exponent(e.exponent())},u8.apply(e,arguments),e}function C9(){return j9.apply(null,arguments).exponent(.5)}function E9(e){return Math.sign(e)*e*e}function T9(){var e,t=W7(),n=[0,1],r=!1;function a(n){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(E9(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,P7)).map(E9)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return T9(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},u8.apply(a,arguments),i9(a)}function I9(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n<a||void 0===n&&a>=a)&&(n=a)}return n}function A9(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n>a||void 0===n&&a>=a)&&(n=a)}return n}function O9(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I8;if(e===I8)return _9;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function _9(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function R9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?_9:O9(a);r>n;){if(r-n>600){const i=r-n+1,s=t-n+1,o=Math.log(i),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(i-l)/i)*(s-i/2<0?-1:1);R9(e,t,Math.max(n,Math.floor(t-s*l/i+c)),Math.min(r,Math.floor(t+(i-s)*l/i+c)),a)}const i=e[t];let s=n,o=r;for(P9(e,n,t),a(e[r],i)>0&&P9(e,n,r);s<o;){for(P9(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}0===a(e[n],i)?P9(e,n,o):(++o,P9(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function P9(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function M9(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return A9(e);if(t>=1)return I9(e);var r,a=(r-1)*t,i=Math.floor(a),s=I9(R9(e,i).subarray(0,i+1));return s+(A9(e.subarray(i+1))-s)*(a-i)}}function D9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R8;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),s=+n(e[i],i,e);return s+(+n(e[i+1],i+1,e)-s)*(a-i)}}function F9(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=D9(t,e/a);return i}function i(t){return null==t||isNaN(t=+t)?e:n[D8(r,t)]}return i.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(I8),a()},i.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return r.slice()},i.copy=function(){return F9().domain(t).range(n).unknown(e)},u8.apply(i,arguments)}function L9(){var e,t=0,n=1,r=1,a=[.5],i=[0,1];function s(t){return null!=t&&t<=t?i[D8(a,t,0,r)]:e}function o(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return s}return s.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,o()):[t,n]},s.range=function(e){return arguments.length?(r=(i=Array.from(e)).length-1,o()):i.slice()},s.invertExtent=function(e){var s=i.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,a[0]]:s>=r?[a[r-1],n]:[a[s-1],a[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return L9().domain([t,n]).range(i).unknown(e)},u8.apply(i9(s),arguments)}function z9(){var e,t=[.5],n=[0,1],r=1;function a(a){return null!=a&&a<=a?n[D8(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return z9().domain(t).range(n).unknown(e)},u8.apply(a,arguments)}J7=r9({thousands:",",grouping:[3],currency:["$",""]}),Z7=J7.format,e9=J7.formatPrefix;const B9=1e3,U9=6e4,W9=36e5,V9=864e5,H9=6048e5,G9=2592e6,K9=31536e6,q9=new Date,X9=new Date;function Y9(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,i)=>{const s=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return s;let o;do{s.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return s},a.filter=n=>Y9(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(a.count=(t,r)=>(q9.setTime(+t),X9.setTime(+r),e(q9),e(X9),Math.floor(n(q9,X9))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const $9=Y9(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$9.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Y9(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):$9:null);$9.range;const Q9=Y9(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*B9)},(e,t)=>(t-e)/B9,e=>e.getUTCSeconds()),J9=(Q9.range,Y9(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*B9)},(e,t)=>{e.setTime(+e+t*U9)},(e,t)=>(t-e)/U9,e=>e.getMinutes())),Z9=(J9.range,Y9(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*U9)},(e,t)=>(t-e)/U9,e=>e.getUTCMinutes())),eee=(Z9.range,Y9(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*B9-e.getMinutes()*U9)},(e,t)=>{e.setTime(+e+t*W9)},(e,t)=>(t-e)/W9,e=>e.getHours())),tee=(eee.range,Y9(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*W9)},(e,t)=>(t-e)/W9,e=>e.getUTCHours())),nee=(tee.range,Y9(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*U9)/V9,e=>e.getDate()-1)),ree=(nee.range,Y9(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/V9,e=>e.getUTCDate()-1)),aee=(ree.range,Y9(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/V9,e=>Math.floor(e/V9)));aee.range;function iee(e){return Y9(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*U9)/H9)}const see=iee(0),oee=iee(1),lee=iee(2),cee=iee(3),uee=iee(4),dee=iee(5),hee=iee(6);see.range,oee.range,lee.range,cee.range,uee.range,dee.range,hee.range;function pee(e){return Y9(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/H9)}const fee=pee(0),mee=pee(1),gee=pee(2),xee=pee(3),vee=pee(4),yee=pee(5),bee=pee(6),wee=(fee.range,mee.range,gee.range,xee.range,vee.range,yee.range,bee.range,Y9(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),kee=(wee.range,Y9(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Nee=(kee.range,Y9(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Nee.every=e=>isFinite(e=Math.floor(e))&&e>0?Y9(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;Nee.range;const See=Y9(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());See.every=e=>isFinite(e=Math.floor(e))&&e>0?Y9(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;See.range;function jee(e,t,n,r,a,i){const s=[[Q9,1,B9],[Q9,5,5e3],[Q9,15,15e3],[Q9,30,3e4],[i,1,U9],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,W9],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,V9],[r,2,1728e5],[n,1,H9],[t,1,G9],[t,3,7776e6],[e,1,K9]];function o(t,n,r){const a=Math.abs(n-t)/r,i=O8(e=>{let[,,t]=e;return t}).right(s,a);if(i===s.length)return e.every(T8(t/K9,n/K9,r));if(0===i)return $9.every(Math.max(T8(t,n,r),1));const[o,l]=s[a/s[i-1][2]<s[i][2]/a?i-1:i];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const a=n&&"function"===typeof n.range?n:o(e,t,n),i=a?a.range(e,+t+1):[];return r?i.reverse():i},o]}const[Cee,Eee]=jee(See,kee,fee,aee,tee,Z9),[Tee,Iee]=jee(Nee,wee,see,nee,eee,J9);function Aee(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Oee(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _ee(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Ree,Pee,Mee,Dee={"-":"",_:" ",0:"0"},Fee=/^\s*\d+/,Lee=/^%/,zee=/[\\^$*+?|[\]().{}]/g;function Bee(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Uee(e){return e.replace(zee,"\\$&")}function Wee(e){return new RegExp("^(?:"+e.map(Uee).join("|")+")","i")}function Vee(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Hee(e,t,n){var r=Fee.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Gee(e,t,n){var r=Fee.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Kee(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function qee(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Xee(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Yee(e,t,n){var r=Fee.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $ee(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qee(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jee(e,t,n){var r=Fee.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Zee(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ete(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tte(e,t,n){var r=Fee.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function nte(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rte(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ate(e,t,n){var r=Fee.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ite(e,t,n){var r=Fee.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ste(e,t,n){var r=Fee.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ote(e,t,n){var r=Lee.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lte(e,t,n){var r=Fee.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function cte(e,t,n){var r=Fee.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ute(e,t){return Bee(e.getDate(),t,2)}function dte(e,t){return Bee(e.getHours(),t,2)}function hte(e,t){return Bee(e.getHours()%12||12,t,2)}function pte(e,t){return Bee(1+nee.count(Nee(e),e),t,3)}function fte(e,t){return Bee(e.getMilliseconds(),t,3)}function mte(e,t){return fte(e,t)+"000"}function gte(e,t){return Bee(e.getMonth()+1,t,2)}function xte(e,t){return Bee(e.getMinutes(),t,2)}function vte(e,t){return Bee(e.getSeconds(),t,2)}function yte(e){var t=e.getDay();return 0===t?7:t}function bte(e,t){return Bee(see.count(Nee(e)-1,e),t,2)}function wte(e){var t=e.getDay();return t>=4||0===t?uee(e):uee.ceil(e)}function kte(e,t){return e=wte(e),Bee(uee.count(Nee(e),e)+(4===Nee(e).getDay()),t,2)}function Nte(e){return e.getDay()}function Ste(e,t){return Bee(oee.count(Nee(e)-1,e),t,2)}function jte(e,t){return Bee(e.getFullYear()%100,t,2)}function Cte(e,t){return Bee((e=wte(e)).getFullYear()%100,t,2)}function Ete(e,t){return Bee(e.getFullYear()%1e4,t,4)}function Tte(e,t){var n=e.getDay();return Bee((e=n>=4||0===n?uee(e):uee.ceil(e)).getFullYear()%1e4,t,4)}function Ite(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bee(t/60|0,"0",2)+Bee(t%60,"0",2)}function Ate(e,t){return Bee(e.getUTCDate(),t,2)}function Ote(e,t){return Bee(e.getUTCHours(),t,2)}function _te(e,t){return Bee(e.getUTCHours()%12||12,t,2)}function Rte(e,t){return Bee(1+ree.count(See(e),e),t,3)}function Pte(e,t){return Bee(e.getUTCMilliseconds(),t,3)}function Mte(e,t){return Pte(e,t)+"000"}function Dte(e,t){return Bee(e.getUTCMonth()+1,t,2)}function Fte(e,t){return Bee(e.getUTCMinutes(),t,2)}function Lte(e,t){return Bee(e.getUTCSeconds(),t,2)}function zte(e){var t=e.getUTCDay();return 0===t?7:t}function Bte(e,t){return Bee(fee.count(See(e)-1,e),t,2)}function Ute(e){var t=e.getUTCDay();return t>=4||0===t?vee(e):vee.ceil(e)}function Wte(e,t){return e=Ute(e),Bee(vee.count(See(e),e)+(4===See(e).getUTCDay()),t,2)}function Vte(e){return e.getUTCDay()}function Hte(e,t){return Bee(mee.count(See(e)-1,e),t,2)}function Gte(e,t){return Bee(e.getUTCFullYear()%100,t,2)}function Kte(e,t){return Bee((e=Ute(e)).getUTCFullYear()%100,t,2)}function qte(e,t){return Bee(e.getUTCFullYear()%1e4,t,4)}function Xte(e,t){var n=e.getUTCDay();return Bee((e=n>=4||0===n?vee(e):vee.ceil(e)).getUTCFullYear()%1e4,t,4)}function Yte(){return"+0000"}function $te(){return"%"}function Qte(e){return+e}function Jte(e){return Math.floor(+e/1e3)}function Zte(e){return new Date(e)}function ene(e){return e instanceof Date?+e:+new Date(+e)}function tne(e,t,n,r,a,i,s,o,l,c){var u=W7(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),v=c("%b %d"),y=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?f:s(e)<e?m:i(e)<e?g:r(e)<e?a(e)<e?x:v:n(e)<e?y:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,ene)):h().map(Zte)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(l9(n,e)):u},u.copy=function(){return B7(u,tne(e,t,n,r,a,i,s,o,l,c))},u}function nne(){return u8.apply(tne(Tee,Iee,Nee,wee,see,nee,eee,J9,Q9,Pee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rne(){return u8.apply(tne(Cee,Eee,See,kee,fee,ree,tee,Z9,Q9,Mee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ane(){var e,t,n,r,a,i=0,s=1,o=D7,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([i,s]=a,e=r(i=+i),t=r(s=+s),n=e===t?0:1/(t-e),c):[i,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(_7),c.rangeRound=u(R7),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(s),n=e===t?0:1/(t-e),c}}function ine(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sne(){var e=i9(ane()(D7));return e.copy=function(){return ine(e,sne())},d8.apply(e,arguments)}function one(){var e=m9(ane()).domain([1,10]);return e.copy=function(){return ine(e,one()).base(e.base())},d8.apply(e,arguments)}function lne(){var e=y9(ane());return e.copy=function(){return ine(e,lne()).constant(e.constant())},d8.apply(e,arguments)}function cne(){var e=S9(ane());return e.copy=function(){return ine(e,cne()).exponent(e.exponent())},d8.apply(e,arguments)}function une(){return cne.apply(null,arguments).exponent(.5)}function dne(){var e=[],t=D7;function n(n){if(null!=n&&!isNaN(n=+n))return t((D8(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(I8),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>M9(e,r/t))},n.copy=function(){return dne(t).domain(e)},d8.apply(n,arguments)}function hne(){var e,t,n,r,a,i,s,o=0,l=.5,c=1,u=1,d=D7,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+i(e))-t)*(u*e<u*t?r:a),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,a;return arguments.length?([n,r,a]=t,d=function(e,t){void 0===t&&(t=e,e=_7);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}(e,[n,r,a]),p):[d(0),d(.5),d(1)]}}return p.domain=function(s){return arguments.length?([o,l,c]=s,e=i(o=+o),t=i(l=+l),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(_7),p.rangeRound=f(R7),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return i=s,e=s(o),t=s(l),n=s(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function pne(){var e=i9(hne()(D7));return e.copy=function(){return ine(e,pne())},d8.apply(e,arguments)}function fne(){var e=m9(hne()).domain([.1,1,10]);return e.copy=function(){return ine(e,fne()).base(e.base())},d8.apply(e,arguments)}function mne(){var e=y9(hne());return e.copy=function(){return ine(e,mne()).constant(e.constant())},d8.apply(e,arguments)}function gne(){var e=S9(hne());return e.copy=function(){return ine(e,gne()).exponent(e.exponent())},d8.apply(e,arguments)}function xne(){return gne.apply(null,arguments).exponent(.5)}!function(e){Ree=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=Wee(a),u=Vee(a),d=Wee(i),h=Vee(i),p=Wee(s),f=Vee(s),m=Wee(o),g=Vee(o),x=Wee(l),v=Vee(l),y={a:function(e){return s[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:ute,e:ute,f:mte,g:Cte,G:Tte,H:dte,I:hte,j:pte,L:fte,m:gte,M:xte,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Qte,s:Jte,S:vte,u:yte,U:bte,V:kte,w:Nte,W:Ste,x:null,X:null,y:jte,Y:Ete,Z:Ite,"%":$te},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Ate,e:Ate,f:Mte,g:Kte,G:Xte,H:Ote,I:_te,j:Rte,L:Pte,m:Dte,M:Fte,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Qte,s:Jte,S:Lte,u:zte,U:Bte,V:Wte,w:Vte,W:Hte,x:null,X:null,y:Gte,Y:qte,Z:Yte,"%":$te},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=x.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:ete,e:ete,f:ste,g:$ee,G:Yee,H:nte,I:nte,j:tte,L:ite,m:Zee,M:rte,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Jee,Q:lte,s:cte,S:ate,u:Gee,U:Kee,V:qee,w:Hee,W:Xee,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:$ee,Y:Yee,Z:Qee,"%":ote};function k(e,t){return function(n){var r,a,i,s=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(a=Dee[r=e.charAt(++o)])?r=e.charAt(++o):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),s.push(r),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function N(e,t){return function(n){var r,a,i=_ee(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=Oee(_ee(i.y,0,1))).getUTCDay(),r=a>4||0===a?mee.ceil(r):mee(r),r=ree.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=Aee(_ee(i.y,0,1))).getDay(),r=a>4||0===a?oee.ceil(r):oee(r),r=nee.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?Oee(_ee(i.y,0,1)).getUTCDay():Aee(_ee(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Oee(i)):Aee(i)}}function S(e,t,n,r){for(var a,i,s=0,o=t.length,l=n.length;s<o;){if(r>=l)return-1;if(37===(a=t.charCodeAt(s++))){if(a=t.charAt(s++),!(i=w[a in Dee?t.charAt(s++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return y.x=k(n,y),y.X=k(r,y),y.c=k(t,y),b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),{format:function(e){var t=k(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),Pee=Ree.format,Ree.parse,Mee=Ree.utcFormat,Ree.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var vne=e=>e.chartData,yne=t6([vne],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),bne=(e,t,n,r)=>r?yne(e):vne(e),wne=(e,t,n)=>n?yne(e):vne(e);function kne(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(L1(t)&&L1(n))return!0}return!1}function Nne(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Sne(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,r,[a,i]=e;if(L1(a))n=a;else if("function"===typeof a)return;if(L1(i))r=i;else if("function"===typeof i)return;var s=[n,r];if(kne(s))return s}}var jne=n(8210),Cne=n.n(jne),Ene=e=>e,Tne={"@@functional/placeholder":!0},Ine=e=>e===Tne,Ane=e=>function t(){return 0===arguments.length||1===arguments.length&&Ine(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},One=(e,t)=>1===e?t:Ane(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.filter(e=>e!==Tne).length;return i>=e?t(...r):One(e-i,Ane(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=r.map(e=>Ine(e)?n.shift():e);return t(...i,...n)}))}),_ne=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Rne=(e=>One(e.length,e))((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e));function Pne(e){return 0===e?1:Math.floor(new(Cne())(e).abs().log(10).toNumber())+1}function Mne(e,t,n){for(var r=new(Cne())(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var Dne=e=>{var[t,n]=e,[r,a]=[t,n];return t>n&&([r,a]=[n,t]),[r,a]},Fne=(e,t,n)=>{if(e.lte(0))return new(Cne())(0);var r=Pne(e.toNumber()),a=new(Cne())(10).pow(r),i=e.div(a),s=1!==r?.05:.1,o=new(Cne())(Math.ceil(i.div(s).toNumber())).add(n).mul(s).mul(a);return t?new(Cne())(o.toNumber()):new(Cne())(Math.ceil(o.toNumber()))},Lne=(e,t,n)=>{var r=new(Cne())(1),a=new(Cne())(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new(Cne())(10).pow(Pne(e)-1),a=new(Cne())(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new(Cne())(Math.floor(e)))}else 0===e?a=new(Cne())(Math.floor((t-1)/2)):n||(a=new(Cne())(Math.floor(e)));var s=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Ene;var r=t.reverse(),a=r[0],i=r.slice(1);return function(){return i.reduce((e,t)=>t(e),a(...arguments))}}(Rne(e=>a.add(new(Cne())(e-s).mul(r)).toNumber()),_ne);return o(0,t)},zne=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(Cne())(0),tickMin:new(Cne())(0),tickMax:new(Cne())(0)};var i,s=Fne(new(Cne())(t).sub(e).div(n-1),r,a);i=e<=0&&t>=0?new(Cne())(0):(i=new(Cne())(e).add(t).div(2)).sub(new(Cne())(i).mod(s));var o=Math.ceil(i.sub(e).div(s).toNumber()),l=Math.ceil(new(Cne())(t).sub(i).div(s).toNumber()),c=o+l+1;return c>n?zne(e,t,n,r,a+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:s,tickMin:i.sub(new(Cne())(o).mul(s)),tickMax:i.add(new(Cne())(l).mul(s))})},Bne=e=>e.rootProps.maxBarSize,Une=e=>e.rootProps.barCategoryGap,Wne=e=>e.rootProps.stackOffset,Vne=e=>e.rootProps.reverseStackOrder,Hne=e=>e.options.chartName,Gne=e=>e.rootProps.syncId,Kne=e=>e.rootProps.syncMethod,qne=e=>e.options.eventEmitter;function Xne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xne(Object(n),!0).forEach(function(t){$ne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qne=Math.PI/180,Jne=e=>180*e/Math.PI,Zne=(e,t,n,r)=>({x:e+Math.cos(-Qne*r)*n,y:t+Math.sin(-Qne*r)*n}),ere=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},tre=(e,t)=>{var{x:n,y:r}=e,{cx:a,cy:i}=t,s=((e,t)=>{var{x:n,y:r}=e,{x:a,y:i}=t;return Math.sqrt((n-a)**2+(r-i)**2)})({x:n,y:r},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(n-a)/s,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:s,angle:Jne(l),angleInRadian:l}},nre=(e,t)=>{var{startAngle:n,endAngle:r}=t,a=Math.floor(n/360),i=Math.floor(r/360);return e+360*Math.min(a,i)},rre=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:a,angle:i}=tre({x:n,y:r},t),{innerRadius:s,outerRadius:o}=t;if(a<s||a>o)return null;if(0===a)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:t-360*i,endAngle:n-360*i}})(t),d=i;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?Yne(Yne({},t),{},{radius:a,angle:nre(d,t)}):null},are={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ire=!0,sre=0,ore=!1,lre="auto",cre=!0,ure="category",dre=(are.axis,!1),hre=!0,pre=0,fre="auto",mre=!0,gre=5,xre="number",vre=(are.axis,(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t}),yre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:sre,includeHidden:!1,name:void 0,reversed:ore,scale:lre,tick:cre,tickCount:void 0,ticks:void 0,type:ure,unit:void 0},bre={allowDataOverflow:dre,allowDecimals:!1,allowDuplicatedCategory:hre,dataKey:void 0,domain:void 0,id:pre,includeHidden:!1,name:void 0,reversed:!1,scale:fre,tick:mre,tickCount:gre,ticks:void 0,type:xre,unit:void 0},wre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ire,dataKey:void 0,domain:void 0,id:sre,includeHidden:!1,name:void 0,reversed:!1,scale:lre,tick:cre,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kre={allowDataOverflow:dre,allowDecimals:!1,allowDuplicatedCategory:hre,dataKey:void 0,domain:void 0,id:pre,includeHidden:!1,name:void 0,reversed:!1,scale:fre,tick:mre,tickCount:gre,ticks:void 0,type:"category",unit:void 0},Nre=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?wre:yre,Sre=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?kre:bre,jre=e=>e.polarOptions,Cre=t6([L6,z6,Y6],ere),Ere=t6([jre,Cre],(e,t)=>{if(null!=e)return N1(e.innerRadius,t,0)}),Tre=t6([jre,Cre],(e,t)=>{if(null!=e)return N1(e.outerRadius,t,.8*t)}),Ire=t6([jre],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),Are=(t6([Nre,Ire],vre),t6([Cre,Ere,Tre],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),Ore=(t6([Sre,Are],vre),t6([i8,jre,Ere,Tre,L6,z6],(e,t,n,r,a,i)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=r){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:N1(s,a,a/2),cy:N1(o,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}})),_re=(e,t)=>t,Rre=(e,t,n)=>n;function Pre(e){return null===e||void 0===e?void 0:e.id}function Mre(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=n,s=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:r;if(null!=n&&0!==n.length){var o=Pre(e);n.forEach((t,n)=>{var r,l=null==i||a?n:String(S6(t,i,null)),c=S6(t,e.dataKey,0);r=s.has(l)?s.get(l):{},Object.assign(r,{[o]:c}),s.set(l,r)})}}),Array.from(s.values())}function Dre(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var Fre=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function Lre(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var zre=e=>{var t=i8(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},Bre=e=>e.tooltip.settings.axisId;function Ure(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ure(Object(n),!0).forEach(function(t){Vre(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ure(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vre(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hre=[0,"auto"],Gre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Kre=(e,t)=>e.cartesianAxis.xAxis[t],qre=(e,t)=>{var n=Kre(e,t);return null==n?Gre:n},Xre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Hre,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},Yre=(e,t)=>e.cartesianAxis.yAxis[t],$re=(e,t)=>{var n=Yre(e,t);return null==n?Xre:n},Qre={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Jre=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?Qre:n},Zre=(e,t,n)=>{switch(t){case"xAxis":return qre(e,n);case"yAxis":return $re(e,n);case"zAxis":return Jre(e,n);case"angleAxis":return Nre(e,n);case"radiusAxis":return Sre(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},eae=(e,t,n)=>{switch(t){case"xAxis":return qre(e,n);case"yAxis":return $re(e,n);case"angleAxis":return Nre(e,n);case"radiusAxis":return Sre(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},tae=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function nae(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var rae=e=>e.graphicalItems.cartesianItems,aae=t6([_re,Rre],nae),iae=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),sae=t6([rae,Zre,aae],iae,{memoizeOptions:{resultEqualityCheck:Lre}}),oae=t6([sae],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(Dre)),lae=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),cae=t6([sae],lae),uae=e=>e.map(e=>e.data).filter(Boolean).flat(1),dae=t6([sae],uae,{memoizeOptions:{resultEqualityCheck:Lre}}),hae=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=t;return e.length>0?e:n.slice(r,a+1)},pae=t6([dae,bne],hae),fae=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:S6(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:S6(e,t)}))):e.map(e=>({value:e})),mae=t6([pae,Zre,sae],fae);function gae(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function xae(e){if(b1(e)||e instanceof Date){var t=Number(e);if(L1(t))return t}}function vae(e){if(Array.isArray(e)){var t=[xae(e[0]),xae(e[1])];return kne(t)?t:void 0}var n=xae(e);if(null!=n)return[n,n]}function yae(e){return e.map(xae).filter(I1)}var bae=e=>{var t=zre(e),n=Bre(e);return eae(e,t,n)},wae=t6([bae],e=>null===e||void 0===e?void 0:e.dataKey),kae=t6([oae,bne,bae],Mre),Nae=(e,t,n,r)=>{var a=t.reduce((e,t)=>{if(null==t.stackId)return e;var n=e[t.stackId];return null==n&&(n=[]),n.push(t),e[t.stackId]=n,e},{});return Object.fromEntries(Object.entries(a).map(t=>{var[a,i]=t,s=r?[...i].reverse():i,o=s.map(Pre);return[a,{stackedData:T6(e,o,n),graphicalItems:s}]}))},Sae=t6([kae,oae,Wne,Vne],Nae),jae=(e,t,n,r)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(null==r&&"zAxis"!==n){var s=_6(e,a,i);if(null==s||0!==s[0]||0!==s[1])return s}},Cae=t6([Zre],e=>e.allowDataOverflow),Eae=e=>{var t;if(null==e||!("domain"in e))return Hre;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var n=yae(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:Hre},Tae=t6([Zre],Eae),Iae=t6([Tae,Cae],Sne),Aae=t6([Sae,vne,_re,Iae],jae,{memoizeOptions:{resultEqualityCheck:Fre}}),Oae=e=>e.errorBars,_ae=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(0!==r.length){var a=r.flat();return[Math.min(...a),Math.max(...a)]}},Rae=(e,t,n,r,a)=>{var i,s;if(n.length>0&&e.forEach(e=>{n.forEach(n=>{var o,l,c=null===(o=r[n.id])||void 0===o?void 0:o.filter(e=>gae(a,e)),u=S6(e,null!==(l=t.dataKey)&&void 0!==l?l:n.dataKey),d=function(e,t,n){return!n||"number"!==typeof t||x1(t)?[]:n.length?yae(n.flatMap(n=>{var r,a,i=S6(e,n.dataKey);if(Array.isArray(i)?[r,a]=i:r=a=i,L1(r)&&L1(a))return[t-r,t+a]})):[]}(e,u,c);if(d.length>=2){var h=Math.min(...d),p=Math.max(...d);(null==i||h<i)&&(i=h),(null==s||p>s)&&(s=p)}var f=vae(u);null!=f&&(i=null==i?f[0]:Math.min(i,f[0]),s=null==s?f[1]:Math.max(s,f[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var n=vae(S6(e,t.dataKey));null!=n&&(i=null==i?n[0]:Math.min(i,n[0]),s=null==s?n[1]:Math.max(s,n[1]))}),L1(i)&&L1(s))return[i,s]},Pae=t6([pae,Zre,cae,Oae,_re],Rae,{memoizeOptions:{resultEqualityCheck:Fre}});function Mae(e){var{value:t}=e;if(b1(t)||t instanceof Date)return t}var Dae=e=>e.referenceElements.dots,Fae=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),Lae=t6([Dae,_re,Rre],Fae),zae=e=>e.referenceElements.areas,Bae=t6([zae,_re,Rre],Fae),Uae=e=>e.referenceElements.lines,Wae=t6([Uae,_re,Rre],Fae),Vae=(e,t)=>{if(null!=e){var n=yae(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},Hae=t6(Lae,_re,Vae),Gae=(e,t)=>{if(null!=e){var n=yae(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},Kae=t6([Bae,_re],Gae);var qae=(e,t)=>{if(null!=e){var n=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return yae([e.x]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==n||0===n.length?[]:yae(n)}(e):function(e){var t;if(null!=e.y)return yae([e.y]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==n||0===n.length?[]:yae(n)}(e));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},Xae=t6([Wae,_re],qae),Yae=t6(Hae,Xae,Kae,(e,t,n)=>_ae(e,n,t)),$ae=(e,t,n,r,a,i,s,o)=>null!=n?n:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var r=e(t,n);if(kne(r))return Nne(r,t,n)}catch($je){}if(Array.isArray(e)&&2===e.length){var a,i,[s,o]=e;if("auto"===s)null!=t&&(a=Math.min(...t));else if(y1(s))a=s;else if("function"===typeof s)try{null!=t&&(a=s(null===t||void 0===t?void 0:t[0]))}catch(p){}else if("string"===typeof s&&R6.test(s)){var l=R6.exec(s);if(null==l||null==l[1]||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(i=Math.max(...t));else if(y1(o))i=o;else if("function"===typeof o)try{null!=t&&(i=o(null===t||void 0===t?void 0:t[1]))}catch(f){}else if("string"===typeof o&&P6.test(o)){var u=P6.exec(o);if(null==u||null==u[1]||null==t)i=void 0;else{var d=+u[1];i=t[1]+d}}else i=null===t||void 0===t?void 0:t[1];var h=[a,i];if(kne(h))return null==t?h:Nne(h,t,n)}}}(t,"vertical"===s&&"xAxis"===o||"horizontal"===s&&"yAxis"===o?_ae(r,i,a):_ae(i,a),e.allowDataOverflow),Qae=t6([Zre,Tae,Iae,Aae,Pae,Yae,i8,_re],$ae,{memoizeOptions:{resultEqualityCheck:Fre}}),Jae=[0,1],Zae=(e,t,n,r,a,i,s)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==s){var o,{dataKey:l,type:c}=e,u=j6(t,i);return u&&null==l?c8()(0,null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0):"category"===c?((e,t,n)=>{var r=e.map(Mae).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&S1(r))?c8()(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))})(r,e,u):"expand"===a?Jae:s}},eie=t6([Zre,i8,pae,mae,Wne,_re,Qae],Zae),tie=(e,t,n,r,a)=>{if(null!=e){var{scale:i,type:o}=e;if("auto"===i)return"radial"===t&&"radiusAxis"===a?"band":"radial"===t&&"angleAxis"===a?"linear":"category"===o&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":"category"===o?"band":"linear";if("string"===typeof i){var l="scale".concat(T1(i));return l in s?l:"point"}}},nie=t6([Zre,i8,tae,Hne,_re],tie);function rie(e,t,n,r){if(null!=n&&null!=r){if("function"===typeof e.scale)return e.scale.copy().domain(n).range(r);var a=function(e){if(null!=e){if(e in s)return s[e]();var t="scale".concat(T1(e));return t in s?s[t]():void 0}}(t);if(null!=a){var i=a.domain(n).range(r);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-C6,i=Math.max(r[0],r[1])+C6,s=e(t[0]),o=e(t[n-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[n-1]])}})(i),i}}}var aie=(e,t,n)=>{var r=Eae(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(r)&&("auto"===r[0]||"auto"===r[1])&&kne(e)?function(e){var[t,n]=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(r,2),[s,o]=Dne([t,n]);if(s===-1/0||o===1/0){var l=o===1/0?[s,..._ne(0,r-1).map(()=>1/0)]:[..._ne(0,r-1).map(()=>-1/0),o];return t>n?l.reverse():l}if(s===o)return Lne(s,r,a);var{step:c,tickMin:u,tickMax:d}=zne(s,o,i,a,0),h=Mne(u,d.add(new(Cne())(.1).mul(c)),c);return t>n?h.reverse():h}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&kne(e)?function(e,t){var[n,r]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[i,s]=Dne([n,r]);if(i===-1/0||s===1/0)return[n,r];if(i===s)return[i];var o=Math.max(t,2),l=Fne(new(Cne())(s).sub(i).div(o-1),a,0),c=[...Mne(new(Cne())(i),new(Cne())(s),l),s];return!1===a&&(c=c.map(e=>Math.round(e))),n>r?c.reverse():c}(e,t.tickCount,t.allowDecimals):void 0},iie=t6([eie,eae,nie],aie),sie=(e,t,n,r)=>{if("angleAxis"!==r&&"number"===(null===e||void 0===e?void 0:e.type)&&kne(t)&&Array.isArray(n)&&n.length>0){var a=t[0],i=n[0],s=t[1],o=n[n.length-1];return[Math.min(a,i),Math.max(s,o)]}return t},oie=t6([Zre,eie,iie,_re],sie),lie=t6(mae,Zre,(e,t)=>{if(t&&"number"===t.type){var n=1/0,r=Array.from(yae(e.map(e=>e.value))).sort((e,t)=>e-t),a=r[0],i=r[r.length-1];if(null==a||null==i)return 1/0;var s=i-a;if(0===s)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o],c=r[o+1];if(null!=l&&null!=c){var u=c-l;n=Math.min(n,u)}}return n/s}}),cie=t6(lie,i8,Une,Y6,(e,t,n,r,a)=>a,(e,t,n,r,a)=>{if(!L1(e))return 0;var i="vertical"===t?r.height:r.width;if("gap"===a)return e*i/2;if("no-gap"===a){var s=N1(n,e*i),o=e*i/2;return o-s-(o-s)/i*s}return 0}),uie=t6(qre,(e,t,n)=>{var r=qre(e,t);return null==r||"string"!==typeof r.padding?0:cie(e,"xAxis",t,n,r.padding)},(e,t)=>{var n,r;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(n=a.left)&&void 0!==n?n:0)+t,right:(null!==(r=a.right)&&void 0!==r?r:0)+t}}),die=t6($re,(e,t,n)=>{var r=$re(e,t);return null==r||"string"!==typeof r.padding?0:cie(e,"yAxis",t,n,r.padding)},(e,t)=>{var n,r;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(n=a.top)&&void 0!==n?n:0)+t,bottom:(null!==(r=a.bottom)&&void 0!==r?r:0)+t}}),hie=t6([Y6,uie,t8,e8,(e,t,n)=>n],(e,t,n,r,a)=>{var{padding:i}=r;return a?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),pie=t6([Y6,i8,die,t8,e8,(e,t,n)=>n],(e,t,n,r,a,i)=>{var{padding:s}=a;return i?[r.height-s.bottom,s.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),fie=(e,t,n,r)=>{var a;switch(t){case"xAxis":return hie(e,n,r);case"yAxis":return pie(e,n,r);case"zAxis":return null===(a=Jre(e,n))||void 0===a?void 0:a.range;case"angleAxis":return Ire(e);case"radiusAxis":return Are(e,n);default:return}},mie=t6([Zre,fie],vre),gie=t6([Zre,nie,oie,mie],rie);t6([sae,Oae,_re],(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>gae(n,e)));function xie(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var vie=(e,t)=>t,yie=(e,t,n)=>n,bie=t6(W6,vie,yie,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(xie)),wie=t6(V6,vie,yie,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(xie)),kie=(e,t)=>({width:e.width,height:t.height}),Nie=t6(Y6,qre,kie),Sie=t6(z6,Y6,bie,vie,yie,(e,t,n,r,a)=>{var i,s={};return n.forEach(n=>{var o=kie(t,n);null==i&&(i=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,r,e));var l="top"===r&&!a||"bottom"===r&&a;s[n.id]=i-Number(l)*o.height,i+=(l?-1:1)*o.height}),s}),jie=t6(L6,Y6,wie,vie,yie,(e,t,n,r,a)=>{var i,s={};return n.forEach(n=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==i&&(i=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,r,e));var l="left"===r&&!a||"right"===r&&a;s[n.id]=i-Number(l)*o.width,i+=(l?-1:1)*o.width}),s}),Cie=t6([Y6,qre,(e,t)=>{var n=qre(e,t);if(null!=n)return Sie(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,r)=>{if(null!=t){var a=null===n||void 0===n?void 0:n[r];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),Eie=t6([Y6,$re,(e,t)=>{var n=$re(e,t);if(null!=n)return jie(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,r)=>{if(null!=t){var a=null===n||void 0===n?void 0:n[r];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),Tie=t6(Y6,$re,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),Iie=(e,t,n)=>{switch(t){case"xAxis":return Nie(e,n).width;case"yAxis":return Tie(e,n).height;default:return}},Aie=(e,t,n,r)=>{if(null!=n){var{allowDuplicatedCategory:a,type:i,dataKey:s}=n,o=j6(e,r),l=t.map(e=>e.value);return s&&o&&"category"===i&&a&&S1(l)?l:void 0}},Oie=t6([i8,mae,Zre,_re],Aie),_ie=(e,t,n,r)=>{if(null!=n&&null!=n.dataKey){var{type:a,scale:i}=n;return!j6(e,r)||"number"!==a&&"auto"===i?void 0:t.map(e=>e.value)}},Rie=t6([i8,mae,eae,_re],_ie),Pie=(t6([i8,(e,t,n)=>{switch(t){case"xAxis":return qre(e,n);case"yAxis":return $re(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},nie,gie,Oie,Rie,fie,iie,_re],(e,t,n,r,a,i,s,o,l)=>{if(null!=t){var c=j6(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:o,range:s,realScaleType:n,scale:r}}}),t6([i8,eae,nie,gie,iie,fie,Oie,Rie,_re],(e,t,n,r,a,i,s,o,l)=>{if(null!=t&&null!=r){var c=j6(e,l),{type:u,ticks:d,tickCount:h}=t,p="scaleBand"===n&&"function"===typeof r.bandwidth?r.bandwidth()/2:2,f="category"===u&&r.bandwidth?r.bandwidth()/p:0;f="angleAxis"===l&&null!=i&&i.length>=2?2*g1(i[0]-i[1])*f:f;var m=d||a;return m?m.map((e,t)=>{var n=s?s.indexOf(e):e;return{index:t,coordinate:r(n)+f,value:e,offset:f}}).filter(e=>L1(e.coordinate)):c&&o?o.map((e,t)=>({coordinate:r(e)+f,value:e,index:t,offset:f})).filter(e=>L1(e.coordinate)):r.ticks?r.ticks(h).map(e=>({coordinate:r(e)+f,value:e,offset:f})):r.domain().map((e,t)=>({coordinate:r(e)+f,value:s?s[e]:e,index:t,offset:f}))}})),Mie=t6([i8,eae,gie,fie,Oie,Rie,_re],(e,t,n,r,a,i,s)=>{if(null!=t&&null!=n&&null!=r&&r[0]!==r[1]){var o=j6(e,s),{tickCount:l}=t,c=0;return c="angleAxis"===s&&(null===r||void 0===r?void 0:r.length)>=2?2*g1(r[0]-r[1])*c:c,o&&i?i.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),Die=t6(Zre,gie,(e,t)=>{if(null!=e&&null!=t)return Wre(Wre({},e),{},{scale:t})}),Fie=t6([Zre,nie,eie,mie],rie),Lie=(t6((e,t,n)=>Jre(e,n),Fie,(e,t)=>{if(null!=e&&null!=t)return Wre(Wre({},e),{},{scale:t})}),t6([i8,W6,V6],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),zie=e=>e.options.defaultTooltipEventType,Bie=e=>e.options.validateTooltipEventTypes;function Uie(e,t,n){if(null==e)return t;var r=e?"axis":"item";return null==n?t:n.includes(r)?r:t}function Wie(e,t){return Uie(t,zie(e),Bie(e))}var Vie=(e,t)=>{var n,r=Number(t);if(!x1(r)&&null!=t)return r>=0?null===e||void 0===e||null===(n=e[r])||void 0===n?void 0:n.value:void 0};function Hie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hie(Object(n),!0).forEach(function(t){Kie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qie=(e,t,n,r)=>{if(null==t)return k5;var a=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==a)return k5;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var i=!0===e.settings.active;if(null!=a.index){if(i)return Gie(Gie({},a),{},{active:!0})}else if(null!=r)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Gie(Gie({},k5),{},{coordinate:a.coordinate})};function Xie(e,t){var n=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}(e),r=t[0],a=t[1];if(void 0===n)return!1;var i=Math.min(r,a),s=Math.max(r,a);return n>=i&&n<=s}var Yie=(e,t,n,r)=>{var a=null===e||void 0===e?void 0:e.index;if(null==a)return null;var i=Number(a);if(!L1(i))return a;var s=1/0;t.length>0&&(s=t.length-1);var o=Math.max(0,Math.min(i,s)),l=t[o];return null==l||function(e,t,n){if(null==n||null==t)return!0;var r=S6(e,t);return null==r||!kne(n)||Xie(r,n)}(l,n,r)?String(o):null},$ie=(e,t,n,r,a,i,s,o)=>{if(null!=i&&null!=o){var l=s[0],c=null==l?void 0:o(l.positions,i);if(null!=c)return c;var u=null===a||void 0===a?void 0:a[Number(i)];if(u)return"horizontal"===n?{x:u.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:u.coordinate}}},Qie=(e,t,n,r)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];var a;if(null==(a="hover"===n?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=r){var i=e.tooltipItemPayloads[0];return null!=i?[i]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.graphicalItemId)===a})},Jie=e=>e.options.tooltipPayloadSearcher,Zie=e=>e.tooltip;function ese(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ese(Object(n),!0).forEach(function(t){nse(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ese(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nse(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rse=(e,t,n,r,a,i,s)=>{if(null!=t&&null!=i){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n;return e.reduce((e,n)=>{var d,h,p,{dataDefinedOnItem:f,settings:m}=n,g=function(e,t){return null!=e?e:t}(f,o),x=Array.isArray(g)?b6(g,c,u):g,v=null!==(d=null===m||void 0===m?void 0:m.dataKey)&&void 0!==d?d:r,y=null===m||void 0===m?void 0:m.nameKey;(h=r&&Array.isArray(x)&&!Array.isArray(x[0])&&"axis"===s?C1(x,r,a):i(x,t,l,y),Array.isArray(h))?h.forEach(t=>{var n=tse(tse({},m),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(D6({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:S6(t.payload,t.dataKey),name:t.name}))}):e.push(D6({tooltipEntrySettings:m,dataKey:v,payload:h,value:S6(h,v),name:null!==(p=S6(h,y))&&void 0!==p?p:null===m||void 0===m?void 0:m.name}));return e},[])}},ase=t6([bae,i8,tae,Hne,zre],tie),ise=t6([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),sse=t6([zre,Bre],nae),ose=t6([ise,bae,sse],iae,{memoizeOptions:{resultEqualityCheck:Lre}}),lse=t6([ose],e=>e.filter(Dre)),cse=t6([ose],uae,{memoizeOptions:{resultEqualityCheck:Lre}}),use=t6([cse,vne],hae),dse=t6([lse,vne,bae],Mre),hse=t6([use,bae,ose],fae),pse=t6([bae],Eae),fse=t6([bae],e=>e.allowDataOverflow),mse=t6([pse,fse],Sne),gse=t6([ose],e=>e.filter(Dre)),xse=t6([dse,gse,Wne,Vne],Nae),vse=t6([xse,vne,zre,mse],jae),yse=t6([ose],lae),bse=t6([use,bae,yse,Oae,zre],Rae,{memoizeOptions:{resultEqualityCheck:Fre}}),wse=t6([Dae,zre,Bre],Fae),kse=t6([wse,zre],Vae),Nse=t6([zae,zre,Bre],Fae),Sse=t6([Nse,zre],Gae),jse=t6([Uae,zre,Bre],Fae),Cse=t6([jse,zre],qae),Ese=t6([kse,Cse,Sse],_ae),Tse=t6([bae,pse,mse,vse,bse,Ese,i8,zre],$ae),Ise=t6([bae,i8,use,hse,Wne,zre,Tse],Zae),Ase=t6([Ise,bae,ase],aie),Ose=t6([bae,Ise,Ase,zre],sie),_se=e=>{var t=zre(e),n=Bre(e);return fie(e,t,n,!1)},Rse=t6([bae,_se],vre),Pse=t6([bae,ase,Ose,Rse],rie),Mse=t6([i8,hse,bae,zre],Aie),Dse=t6([i8,hse,bae,zre],_ie),Fse=t6([i8,bae,ase,Pse,_se,Mse,Dse,zre],(e,t,n,r,a,i,s,o)=>{if(t){var{type:l}=t,c=j6(e,o);if(r){var u="scaleBand"===n&&r.bandwidth?r.bandwidth()/2:2,d="category"===l&&r.bandwidth?r.bandwidth()/u:0;return d="angleAxis"===o&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*g1(a[0]-a[1])*d:d,c&&s?s.map((e,t)=>({coordinate:r(e)+d,value:e,index:t,offset:d})):r.domain().map((e,t)=>({coordinate:r(e)+d,value:i?i[e]:e,index:t,offset:d}))}}}),Lse=t6([zie,Bie,e=>e.tooltip.settings],(e,t,n)=>Uie(n.shared,e,t)),zse=e=>e.tooltip.settings.trigger,Bse=e=>e.tooltip.settings.defaultIndex,Use=t6([Zie,Lse,zse,Bse],qie),Wse=t6([Use,use,wae,Ise],Yie),Vse=t6([Fse,Wse],Vie),Hse=t6([Use],e=>{if(e)return e.dataKey}),Gse=t6([Use],e=>{if(e)return e.graphicalItemId}),Kse=t6([Zie,Lse,zse,Bse],Qie),qse=t6([L6,z6,i8,Y6,Fse,Bse,Kse,Jie],$ie),Xse=t6([Use,qse],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),Yse=t6([Use],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.active)&&void 0!==t&&t}),$se=t6([Kse,Wse,vne,wae,Vse,Jie,Lse],rse),Qse=t6([$se],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function Jse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jse(Object(n),!0).forEach(function(t){eoe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jse(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eoe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var toe=(e,t,n,r,a)=>{var i,s=null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:0;if(s<=1||null==e)return 0;if("angleAxis"===r&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var o=0;o<s;o++){var l,c,u,d,h,p=o>0?null===(l=n[o-1])||void 0===l?void 0:l.coordinate:null===(c=n[s-1])||void 0===c?void 0:c.coordinate,f=null===(u=n[o])||void 0===u?void 0:u.coordinate,m=o>=s-1?null===(d=n[0])||void 0===d?void 0:d.coordinate:null===(h=n[o+1])||void 0===h?void 0:h.coordinate,g=void 0;if(null!=p&&null!=f&&null!=m)if(g1(f-p)!==g1(m-f)){var x=[];if(g1(m-f)===g1(a[1]-a[0])){g=m;var v=f+a[1]-a[0];x[0]=Math.min(v,(v+p)/2),x[1]=Math.max(v,(v+p)/2)}else{g=p;var y=m+a[1]-a[0];x[0]=Math.min(f,(y+f)/2),x[1]=Math.max(f,(y+f)/2)}var b,w=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>w[0]&&e<=w[1]||e>=x[0]&&e<=x[1])return null===(b=n[o])||void 0===b?void 0:b.index}else{var k,N=Math.min(p,m),S=Math.max(p,m);if(e>(N+f)/2&&e<=(S+f)/2)return null===(k=n[o])||void 0===k?void 0:k.index}}else if(t)for(var j=0;j<s;j++){var C=t[j];if(null!=C){var E=t[j+1],T=t[j-1];if(0===j&&null!=E&&e<=(C.coordinate+E.coordinate)/2)return C.index;if(j===s-1&&null!=T&&e>(C.coordinate+T.coordinate)/2)return C.index;if(j>0&&j<s-1&&null!=T&&null!=E&&e>(C.coordinate+T.coordinate)/2&&e<=(C.coordinate+E.coordinate)/2)return C.index}}return-1},noe=()=>u6(Hne),roe=(e,t)=>t,aoe=(e,t,n)=>n,ioe=(e,t,n,r)=>r,soe=t6(Fse,e=>h6()(e,e=>e.coordinate)),ooe=t6([Zie,roe,aoe,ioe],qie),loe=t6([ooe,use,wae,Ise],Yie),coe=t6([Zie,roe,aoe,ioe],Qie),uoe=t6([L6,z6,i8,Y6,Fse,ioe,coe,Jie],$ie),doe=t6([ooe,uoe],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),hoe=t6([Fse,loe],Vie),poe=t6([coe,loe,vne,wae,hoe,Jie,roe],rse),foe=t6([ooe,loe],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),moe=(e,t,n,r,a,i,s)=>{if(e&&r&&a&&i&&n){var o=rre(e,n);if(o){var l=((e,t)=>"centric"===t?e.angle:e.radius)(o,t),c=toe(l,s,i,r,a),u=((e,t,n,r)=>{var a=t.find(e=>e&&e.index===n);if(a){if("centric"===e){var i=a.coordinate,{radius:s}=r;return Zse(Zse(Zse({},r),Zne(r.cx,r.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:l}=r;return Zse(Zse(Zse({},r),Zne(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,i,c,o);return{activeIndex:String(c),activeCoordinate:u}}}},goe=t6([(e,t)=>t,i8,Ore,zre,Rse,Fse,soe,Y6],(e,t,n,r,a,i,s,o)=>{if(e&&t&&r&&a&&i)return"horizontal"===t||"vertical"===t?((e,t,n,r,a,i,s)=>{if(e&&n&&r&&a&&function(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}(e,s)){var o=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=toe(o,i,a,n,r),c=((e,t,n,r)=>{var a=t.find(e=>e&&e.index===n);if(a){if("horizontal"===e)return{x:a.coordinate,y:r.chartY};if("vertical"===e)return{x:r.chartX,y:a.coordinate}}return{x:0,y:0}})(t,a,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,r,a,i,s,o):moe(e,t,n,r,a,i,s)}),xoe=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},voe=w4("mouseClick"),yoe=f3();yoe.startListening({actionCreator:voe,effect:(e,t)=>{var n=e.payload,r=goe(t.getState(),xoe(n));null!=(null===r||void 0===r?void 0:r.activeIndex)&&t.dispatch(R5({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var boe=w4("mouseMove"),woe=f3(),koe=null;function Noe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function Soe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function joe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Soe(Object(n),!0).forEach(function(t){Coe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Soe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Coe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}woe.startListening({actionCreator:boe,effect:(e,t)=>{var n=e.payload;null!==koe&&cancelAnimationFrame(koe);var r=xoe(n);koe=requestAnimationFrame(()=>{var e=t.getState();if("axis"===Wie(e,e.tooltip.settings.shared)){var n=goe(e,r);null!=(null===n||void 0===n?void 0:n.activeIndex)?t.dispatch(_5({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate})):t.dispatch(A5())}koe=null})}});var Eoe=D4({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:C4()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;void 0!==e.xAxis[n.id]&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:C4()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:C4()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:C4()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;void 0!==e.yAxis[n.id]&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:C4()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:C4()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:C4()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;void 0!==e.zAxis[n.id]&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:C4()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:C4()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,a=e.yAxis[n];if(a){var i=a.widthHistory||[];if(3===i.length&&i[0]===i[2]&&r===i[1]&&r!==a.width&&Math.abs(r-i[0])<=1)return;var s=[...i,r].slice(-3);e.yAxis[n]=joe(joe({},e.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:Toe,replaceXAxis:Ioe,removeXAxis:Aoe,addYAxis:Ooe,replaceYAxis:_oe,removeYAxis:Roe,addZAxis:Poe,replaceZAxis:Moe,removeZAxis:Doe,updateYAxisWidth:Foe}=Eoe.actions,Loe=Eoe.reducer,zoe=D4({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:C4()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,a=r4(e).cartesianItems.indexOf(n);a>-1&&(e.cartesianItems[a]=r)},prepare:C4()},removeCartesianGraphicalItem:{reducer(e,t){var n=r4(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:C4()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:C4()},removePolarGraphicalItem:{reducer(e,t){var n=r4(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:C4()}}}),{addCartesianGraphicalItem:Boe,replaceCartesianGraphicalItem:Uoe,removeCartesianGraphicalItem:Woe,addPolarGraphicalItem:Voe,removePolarGraphicalItem:Hoe}=zoe.actions,Goe=zoe.reducer,Koe=D4({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=r4(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=r4(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=r4(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:qoe,removeDot:Xoe,addArea:Yoe,removeArea:$oe,addLine:Qoe,removeLine:Joe}=Koe.actions,Zoe=Koe.reducer,ele={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},tle=D4({name:"brush",initialState:ele,reducers:{setBrushSettings:(e,t)=>null==t.payload?ele:t.payload}}),{setBrushSettings:nle}=tle.actions,rle=tle.reducer,ale=D4({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:C4()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,a=r4(e).payload.indexOf(n);a>-1&&(e.payload[a]=r)},prepare:C4()},removeLegendPayload:{reducer(e,t){var n=r4(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:C4()}}}),{setLegendSize:ile,setLegendSettings:sle,addLegendPayload:ole,replaceLegendPayload:lle,removeLegendPayload:cle}=ale.actions,ule=ale.reducer,dle={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},hle=D4({name:"rootProps",initialState:dle,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:dle.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),ple=hle.reducer,{updateOptions:fle}=hle.actions,mle=D4({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:gle,removeRadiusAxis:xle,addAngleAxis:vle,removeAngleAxis:yle}=mle.actions,ble=mle.reducer,wle=D4({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:kle}=wle.actions,Nle=wle.reducer,Sle=w4("keyDown"),jle=w4("focus"),Cle=f3();Cle.startListening({actionCreator:Sle,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var i=Yie(r,use(n),wae(n),Ise(n)),s=null==i?-1:Number(i);if(Number.isFinite(s)&&!(s<0)){var o=Fse(n);if("Enter"!==a){var l=s+("ArrowRight"===a?1:-1)*("left-to-right"===Lie(n)?1:-1);if(!(null==o||l>=o.length||l<0)){var c=uoe(n,"axis","hover",String(l));t.dispatch(M5({active:!0,activeIndex:l.toString(),activeCoordinate:c}))}}else{var u=uoe(n,"axis","hover",String(r.index));t.dispatch(M5({active:!r.active,activeIndex:r.index,activeCoordinate:u}))}}}}}}),Cle.startListening({actionCreator:jle,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&null==r.index){var a=uoe(n,"axis","hover",String("0"));t.dispatch(M5({active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var Ele=w4("externalEvent"),Tle=f3(),Ile=new Map;Tle.startListening({actionCreator:Ele,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(null!=n){r.persist();var a=r.type,i=Ile.get(a);void 0!==i&&cancelAnimationFrame(i);var s=requestAnimationFrame(()=>{try{var e=t.getState(),i={activeCoordinate:Xse(e),activeDataKey:Hse(e),activeIndex:Wse(e),activeLabel:Vse(e),activeTooltipIndex:Wse(e),isTooltipActive:Yse(e)};n(i,r)}finally{Ile.delete(a)}});Ile.set(a,s)}}});var Ale=t6([Zie],e=>e.tooltipItemPayloads),Ole=t6([Ale,Jie,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var a=e.find(e=>e.settings.graphicalItemId===r);if(null!=a){var{positions:i}=a;if(null!=i)return t(i,n)}}),_le=w4("touchMove"),Rle=f3();Rle.startListening({actionCreator:_le,effect:(e,t)=>{var n=e.payload;if(null!=n.touches&&0!==n.touches.length){var r=t.getState(),a=Wie(r,r.tooltip.settings.shared);if("axis"===a){var i=n.touches[0];if(null==i)return;var s=goe(r,xoe({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));null!=(null===s||void 0===s?void 0:s.activeIndex)&&t.dispatch(_5({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if("item"===a){var o,l=n.touches[0];if(null==document.elementFromPoint||null==l)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(H6),d=null!==(o=c.getAttribute(G6))&&void 0!==o?o:void 0,h=ose(r).find(e=>e.id===d);if(null==u||null==h||null==d)return;var{dataKey:p}=h,f=Ole(r,u,d);t.dispatch(T5({activeDataKey:p,activeIndex:u,activeCoordinate:f,activeGraphicalItemId:d}))}}}});var Ple=D4({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:a}=t.payload;e[n]&&(e[n]=e[n].map(e=>e.dataKey===r.dataKey&&e.direction===r.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==r.dataKey||e.direction!==r.direction))}}}),{addErrorBar:Mle,replaceErrorBar:Dle,removeErrorBar:Fle}=Ple.actions,Lle=Ple.reducer,zle=!0,Ble=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function Ule(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ule(Object(n),!0).forEach(function(t){Vle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ule(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vle(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hle={zIndexMap:Object.values(are).reduce((e,t)=>Wle(Wle({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},Gle=new Set(Object.values(are));var Kle=D4({name:"zIndex",initialState:Hle,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:C4()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!function(e){return Gle.has(e)}(n)&&delete e.zIndexMap[n])},prepare:C4()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:a}=t.payload;e.zIndexMap[n]?a?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:a?void 0:r,panoramaElement:a?r:void 0}},prepare:C4()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:C4()}}}),{registerZIndexPortal:qle,unregisterZIndexPortal:Xle,registerZIndexPortalElement:Yle,unregisterZIndexPortalElement:$le}=Kle.actions,Qle=p4({brush:rle,cartesianAxis:Loe,chartData:U5,errorBars:Lle,graphicalItems:Goe,layout:q5,legend:ule,options:v3,polarAxis:ble,polarOptions:Nle,referenceElements:Zoe,rootProps:ple,tooltip:D5,zIndex:Kle.reducer});function Jle(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,a=Z6(),i=(0,o.useRef)(null);if(a)return n;null==i.current&&(i.current=function(e){return I4({reducer:Qle,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([yoe.middleware,woe.middleware,Cle.middleware,Tle.middleware,Rle.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(T4({type:"raf"}))},devTools:zle&&{serialize:{replacer:Noe},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,r));var s=a6;return o.createElement(_3,{context:s,store:i.current},n)}var Zle=e=>{var{chartData:t}=e,n=s6(),r=Z6();return(0,o.useEffect)(()=>r?()=>{}:(n(L5(t)),()=>{n(L5(void 0))}),[t,n,r]),null},ece=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function tce(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function nce(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(ece.has(r)){if(null==e[r]&&null==t[r])continue;if(!E3(e[r],t[r]))return!1}else if(!tce(e[r],t[r]))return!1;return!0}function rce(e){var{layout:t,margin:n}=e,r=s6(),a=Z6();return(0,o.useEffect)(()=>{a||(r(H5(t)),r(V5(n)))},[r,a,t,n]),null}var ace=(0,o.memo)(rce,nce);function ice(e){var t=s6();return(0,o.useEffect)(()=>{t(fle(e))},[t,e]),null}var sce=()=>{var e;return null===(e=u6(e=>e.rootProps.accessibilityLayer))||void 0===e||e},oce=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function lce(e){return"string"===typeof e&&oce.includes(e)}var cce=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function uce(e){return"string"===typeof e&&cce.has(e)}function dce(e){return"string"===typeof e&&e.startsWith("data-")}function hce(e){if("object"!==typeof e||null===e)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(uce(n)||dce(n))&&(t[n]=e[n]);return t}function pce(e){return null==e?null:(0,o.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?hce(e.props):"object"!==typeof e||Array.isArray(e)?null:hce(e)}function fce(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(uce(n)||dce(n)||lce(n))&&(t[n]=e[n]);return t}var mce=["children","width","height","viewBox","className","style","title","desc"];function gce(){return gce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gce.apply(null,arguments)}var xce=(0,o.forwardRef)((e,t)=>{var{children:n,width:r,height:a,viewBox:i,className:s,style:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,mce),h=i||{width:r,height:a,x:0,y:0},p=Gm("recharts-surface",s);return o.createElement("svg",gce({},fce(d),{className:p,width:r,height:a,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),o.createElement("title",null,c),o.createElement("desc",null,u),n)}),vce=t6(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(null!=t){var r=e[t];if(null!=r)return n?r.panoramaElement:r.element}}),yce=t6(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(are));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}}});function bce(e){var{zIndex:t,isPanorama:n}=e,r=(0,o.useRef)(null),a=s6();return(0,o.useLayoutEffect)(()=>(r.current&&a(Yle({zIndex:t,element:r.current,isPanorama:n})),()=>{a($le({zIndex:t,isPanorama:n}))}),[a,t,n]),o.createElement("g",{tabIndex:-1,ref:r})}function wce(e){var{children:t,isPanorama:n}=e,r=u6(yce);if(!r||0===r.length)return t;var a=r.filter(e=>e<0),i=r.filter(e=>e>0);return o.createElement(o.Fragment,null,a.map(e=>o.createElement(bce,{key:e,zIndex:e,isPanorama:n})),t,i.map(e=>o.createElement(bce,{key:e,zIndex:e,isPanorama:n})))}var kce=["children"];function Nce(){return Nce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nce.apply(null,arguments)}var Sce={width:"100%",height:"100%",display:"block"},jce=(0,o.forwardRef)((e,t)=>{var n=u6(L6),r=u6(z6),a=sce();if(!z1(n)||!z1(r))return null;var i,s,{children:l,otherAttributes:c,title:u,desc:d}=e;return null!=c&&(i="number"===typeof c.tabIndex?c.tabIndex:a?0:void 0,s="string"===typeof c.role?c.role:a?"application":void 0),o.createElement(xce,Nce({},c,{title:u,desc:d,role:s,tabIndex:i,width:n,height:r,style:Sce,ref:t}),l)}),Cce=e=>{var{children:t}=e,n=u6(t8);if(!n)return null;var{width:r,height:a,y:i,x:s}=n;return o.createElement(xce,{width:r,height:a,x:s,y:i},t)},Ece=(0,o.forwardRef)((e,t)=>{var{children:n}=e,r=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,kce);return Z6()?o.createElement(Cce,null,o.createElement(wce,{isPanorama:!0},n)):o.createElement(jce,Nce({ref:t},r),o.createElement(wce,{isPanorama:!1},n))});var Tce=new(n(7283)),Ice="recharts.syncEvent.tooltip",Ace="recharts.syncEvent.brush";function Oce(e){return e.tooltip.syncInteraction}var _ce=["x","y"];function Rce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rce(Object(n),!0).forEach(function(t){Mce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dce(){var e=u6(Gne),t=u6(qne),n=s6(),r=u6(Kne),a=u6(Fse),i=s8(),s=r8(),l=u6(e=>e.rootProps.className);(0,o.useEffect)(()=>{if(null==e)return A1;var o=(o,l,c)=>{var u;if(t!==c&&e===o)if("index"!==r){if(null!=a){var d;if("function"===typeof r){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},p=r(a,h);d=a[p]}else"value"===r&&(d=a.find(e=>String(e.value)===l.payload.label));var{coordinate:f}=l.payload;if(null!=d&&!1!==l.payload.active&&null!=f&&null!=s){var{x:m,y:g}=f,x=Math.min(m,s.x+s.width),v=Math.min(g,s.y+s.height),y={x:"horizontal"===i?d.coordinate:x,y:"horizontal"===i?v:d.coordinate},b=P5({active:l.payload.active,coordinate:y,dataKey:l.payload.dataKey,index:String(d.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId});n(b)}else n(P5({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(s&&null!==l&&void 0!==l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var w=l.payload.coordinate,{x:k,y:N}=w,S=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(w,_ce),{x:j,y:C,width:E,height:T}=l.payload.sourceViewBox,I=Pce(Pce({},S),{},{x:s.x+(E?(k-j)/E:0)*s.width,y:s.y+(T?(N-C)/T:0)*s.height});n(Pce(Pce({},l),{},{payload:Pce(Pce({},l.payload),{},{coordinate:I})}))}else n(l)};return Tce.on(Ice,o),()=>{Tce.off(Ice,o)}},[l,n,t,e,r,a,i,s])}function Fce(){var e=s6();(0,o.useEffect)(()=>{e(y3())},[e]),Dce(),function(){var e=u6(Gne),t=u6(qne),n=s6();(0,o.useEffect)(()=>{if(null==e)return A1;var r=(r,a,i)=>{t!==i&&e===r&&n(z5(a))};return Tce.on(Ace,r),()=>{Tce.off(Ace,r)}},[n,t,e])}()}function Lce(e,t,n,r,a,i){var s=u6(n=>((e,t,n)=>{if(null!=t){var r=Zie(e);return"axis"===t?"hover"===n?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:"hover"===n?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}})(n,e,t)),l=u6(qne),c=u6(Gne),u=u6(Kne),d=u6(Oce),h=null===d||void 0===d?void 0:d.active,p=r8();(0,o.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=P5({active:i,coordinate:n,dataKey:s,index:a,label:"number"===typeof r?String(r):r,sourceViewBox:p,graphicalItemId:void 0});Tce.emit(Ice,c,e,l)}},[h,n,s,a,r,l,c,u,i,p])}var zce=(0,o.createContext)(null),Bce=(0,o.createContext)(null);function Uce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uce(Object(n),!0).forEach(function(t){Vce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hce(){return Hce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hce.apply(null,arguments)}var Gce=()=>(Fce(),null);function Kce(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var qce=(0,o.forwardRef)((e,t)=>{var n,r,a=(0,o.useRef)(null),[i,s]=(0,o.useState)({containerWidth:Kce(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:Kce(null===(r=e.style)||void 0===r?void 0:r.height)}),l=(0,o.useCallback)((e,t)=>{s(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]),c=(0,o.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:n,height:r}=e.getBoundingClientRect();l(n,r);var i=new ResizeObserver(e=>{var{width:t,height:n}=e[0].contentRect;l(t,n)});i.observe(e),a.current=i}},[t,l]);return(0,o.useEffect)(()=>()=>{var e=a.current;null!=e&&e.disconnect()},[l]),o.createElement(o.Fragment,null,o.createElement(o8,{width:i.containerWidth,height:i.containerHeight}),o.createElement("div",Hce({ref:c},e)))}),Xce=(0,o.forwardRef)((e,t)=>{var{width:n,height:r}=e,[a,i]=(0,o.useState)({containerWidth:Kce(n),containerHeight:Kce(r)}),s=(0,o.useCallback)((e,t)=>{i(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]),l=(0,o.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:n,height:r}=e.getBoundingClientRect();s(n,r)}},[t,s]);return o.createElement(o.Fragment,null,o.createElement(o8,{width:a.containerWidth,height:a.containerHeight}),o.createElement("div",Hce({ref:l},e)))}),Yce=(0,o.forwardRef)((e,t)=>{var{width:n,height:r}=e;return o.createElement(o.Fragment,null,o.createElement(o8,{width:n,height:r}),o.createElement("div",Hce({ref:t},e)))}),$ce=(0,o.forwardRef)((e,t)=>{var{width:n,height:r}=e;return v1(n)||v1(r)?o.createElement(Xce,Hce({},e,{ref:t})):o.createElement(Yce,Hce({},e,{ref:t}))});var Qce=(0,o.forwardRef)((e,t)=>{var{children:n,className:r,height:a,onClick:i,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:f,onTouchMove:m,onTouchStart:g,style:x,width:v,responsive:y,dispatchTouchEvents:b=!0}=e,w=(0,o.useRef)(null),k=s6(),[N,S]=(0,o.useState)(null),[j,C]=(0,o.useState)(null),E=function(){var e=s6(),[t,n]=(0,o.useState)(null),r=u6(B6);return(0,o.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;L1(n)&&n!==r&&e(K5(n))}},[t,e,r]),n}(),T=K1(),I=(null===T||void 0===T?void 0:T.width)>0?T.width:v,A=(null===T||void 0===T?void 0:T.height)>0?T.height:a,O=(0,o.useCallback)(e=>{E(e),"function"===typeof t&&t(e),S(e),C(e),null!=e&&(w.current=e)},[E,t,S,C]),_=(0,o.useCallback)(e=>{k(voe(e)),k(Ele({handler:i,reactEvent:e}))},[k,i]),R=(0,o.useCallback)(e=>{k(boe(e)),k(Ele({handler:u,reactEvent:e}))},[k,u]),P=(0,o.useCallback)(e=>{k(A5()),k(Ele({handler:d,reactEvent:e}))},[k,d]),M=(0,o.useCallback)(e=>{k(boe(e)),k(Ele({handler:h,reactEvent:e}))},[k,h]),D=(0,o.useCallback)(()=>{k(jle())},[k]),F=(0,o.useCallback)(e=>{k(Sle(e.key))},[k]),L=(0,o.useCallback)(e=>{k(Ele({handler:s,reactEvent:e}))},[k,s]),z=(0,o.useCallback)(e=>{k(Ele({handler:l,reactEvent:e}))},[k,l]),B=(0,o.useCallback)(e=>{k(Ele({handler:c,reactEvent:e}))},[k,c]),U=(0,o.useCallback)(e=>{k(Ele({handler:p,reactEvent:e}))},[k,p]),W=(0,o.useCallback)(e=>{k(Ele({handler:g,reactEvent:e}))},[k,g]),V=(0,o.useCallback)(e=>{b&&k(_le(e)),k(Ele({handler:m,reactEvent:e}))},[k,b,m]),H=(0,o.useCallback)(e=>{k(Ele({handler:f,reactEvent:e}))},[k,f]),G=function(e){return!0===e?qce:$ce}(y);return o.createElement(zce.Provider,{value:N},o.createElement(Bce.Provider,{value:j},o.createElement(G,{width:null!==I&&void 0!==I?I:null===x||void 0===x?void 0:x.width,height:null!==A&&void 0!==A?A:null===x||void 0===x?void 0:x.height,className:Gm("recharts-wrapper",r),style:Wce({position:"relative",cursor:"default",width:I,height:A},x),onClick:_,onContextMenu:L,onDoubleClick:z,onFocus:D,onKeyDown:F,onMouseDown:B,onMouseEnter:R,onMouseLeave:P,onMouseMove:M,onMouseUp:U,onTouchEnd:H,onTouchMove:V,onTouchStart:W,ref:O},o.createElement(Gce,null),n)))}),Jce=t6([Y6],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Zce=t6([Jce,L6,z6],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),eue=()=>u6(Zce),tue=(0,o.createContext)(void 0),nue=e=>{var{children:t}=e,[n]=(0,o.useState)("".concat(k1("recharts"),"-clip")),r=eue();if(null==r)return null;var{x:a,y:i,width:s,height:l}=r;return o.createElement(tue.Provider,{value:n},o.createElement("defs",null,o.createElement("clipPath",{id:n},o.createElement("rect",{x:a,y:i,height:l,width:s}))),t)},rue=["width","height","responsive","children","className","style","compact","title","desc"];var aue=(0,o.forwardRef)((e,t)=>{var{width:n,height:r,responsive:a,children:i,className:s,style:l,compact:c,title:u,desc:d}=e,h=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,rue),p=hce(h);return c?o.createElement(o.Fragment,null,o.createElement(o8,{width:n,height:r}),o.createElement(Ece,{otherAttributes:p,title:u,desc:d},i)):o.createElement(Qce,{className:s,style:l,width:n,height:r,responsive:null!==a&&void 0!==a&&a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},o.createElement(Ece,{otherAttributes:p,title:u,desc:d,ref:t},o.createElement(nue,null,i)))});function iue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oue(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iue(Object(n),!0).forEach(function(t){sue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==r[t]&&(e[t]=r[t]),e),n)}function lue(){return lue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lue.apply(null,arguments)}var cue={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},uue=(0,o.forwardRef)(function(e,t){var n,r=oue(e.categoricalChartProps,cue),{chartName:a,defaultTooltipEventType:i,validateTooltipEventTypes:s,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:a,defaultTooltipEventType:i,validateTooltipEventTypes:s,tooltipPayloadSearcher:l,eventEmitter:void 0};return o.createElement(Jle,{preloadedState:{options:u},reduxStoreName:null!==(n=c.id)&&void 0!==n?n:a},o.createElement(Zle,{chartData:c.data}),o.createElement(ace,{layout:r.layout,margin:r.margin}),o.createElement(ice,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),o.createElement(aue,lue({},r,{ref:t})))}),due=["axis"],hue=(0,o.forwardRef)((e,t)=>o.createElement(uue,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:due,tooltipPayloadSearcher:g3,categoricalChartProps:e,ref:t})),pue=["children","className"];function fue(){return fue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fue.apply(null,arguments)}var mue=o.forwardRef((e,t)=>{var{children:n,className:r}=e,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,pue),i=Gm("recharts-layer",r);return o.createElement("g",fue({className:i},fce(a),{ref:t}),n)});function gue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xue(Object(n),!0).forEach(function(t){yue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bue=vue({},{cacheSize:2e3,enableCache:!0}),wue=new class{constructor(e){gue(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;null!=n&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(bue.cacheSize),kue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Nue="recharts_measurement_span";var Sue=(e,t)=>{try{var n=document.getElementById(Nue);n||((n=document.createElement("span")).setAttribute("id",Nue),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,kue,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch($je){return{width:0,height:0}}},jue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||Ble)return{width:0,height:0};if(!bue.enableCache)return Sue(e,t);var n=function(e,t){var n=t.fontSize||"",r=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(o)}(e,t),r=wue.get(n);if(r)return r;var a=Sue(e,t);return wue.set(n,a),a};var Cue=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Eue=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Iue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Aue={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Oue=["cm","mm","pt","pc","in","Q","px"];var _ue="NaN";class Rue{static parse(e){var t,[,n,r]=null!==(t=Iue.exec(e))&&void 0!==t?t:[];return null==n?Rue.NaN:new Rue(parseFloat(n),null!==r&&void 0!==r?r:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,x1(e)&&(this.unit=""),""===t||Tue.test(t)||(this.num=NaN,this.unit=""),function(e){return Oue.includes(e)}(t)&&(this.num=function(e,t){return e*Aue[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Rue(NaN,""):new Rue(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Rue(NaN,""):new Rue(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Rue(NaN,""):new Rue(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Rue(NaN,""):new Rue(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return x1(this.num)}}function Pue(e){if(null==e||e.includes(_ue))return _ue;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,a,i]=null!==(n=Cue.exec(t))&&void 0!==n?n:[],s=Rue.parse(null!==r&&void 0!==r?r:""),o=Rue.parse(null!==i&&void 0!==i?i:""),l="*"===a?s.multiply(o):s.divide(o);if(l.isNaN())return _ue;t=t.replace(Cue,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=Eue.exec(t))&&void 0!==c?c:[],p=Rue.parse(null!==u&&void 0!==u?u:""),f=Rue.parse(null!==h&&void 0!==h?h:""),m="+"===d?p.add(f):p.subtract(f);if(m.isNaN())return _ue;t=t.replace(Eue,m.toString())}return t}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Rue,"NaN",new Rue(NaN,""));var Mue=/\(([^()]*)\)/;function Due(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=Mue.exec(n));){var[,r]=t;n=n.replace(Mue,Pue(r))}return n}(t),t=Pue(t)}function Fue(e){var t=function(e){try{return Due(e)}catch($je){return _ue}}(e.slice(5,-1));return t===_ue?"":t}var Lue=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],zue=["dx","dy","angle","className","breakAll"];function Bue(){return Bue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bue.apply(null,arguments)}function Uue(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Wue=/[ \f\n\r\t\v\u2028\u2029]+/,Vue=e=>{var{children:t,breakAll:n,style:r}=e;try{var a=[];return E1(t)||(a=n?t.toString().split(""):t.toString().split(Wue)),{wordsWithComputedWidth:a.map(e=>({word:e,width:jue(e,r).width})),spaceWidth:n?0:jue("\xa0",r).width}}catch($je){return null}};function Hue(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var Gue=(e,t,n,r)=>e.reduce((e,a)=>{var{word:i,width:s}=a,o=e[e.length-1];if(o&&null!=s&&(null==t||r||o.width+s+n<Number(t)))o.words.push(i),o.width+=s+n;else{var l={words:[i],width:s};e.push(l)}return e},[]),Kue=e=>e.reduce((e,t)=>e.width>t.width?e:t),que=(e,t,n,r,a,i,s,o)=>{var l=e.slice(0,t),c=Vue({breakAll:n,style:r,children:l+"\u2026"});if(!c)return[!1,[]];var u=Gue(c.wordsWithComputedWidth,i,s,o);return[u.length>a||Kue(u).width>Number(i),u]},Xue=e=>[{words:E1(e)?[]:e.toString().split(Wue),width:void 0}],Yue=e=>{var{width:t,scaleToFit:n,children:r,style:a,breakAll:i,maxLines:s}=e;if((t||n)&&!Ble){var o=Vue({breakAll:i,children:r,style:a});if(!o)return Xue(r);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,n,r,a)=>{var{maxLines:i,children:s,style:o,breakAll:l}=e,c=y1(i),u=String(s),d=Gue(t,r,n,a);if(!c||a)return d;if(!(d.length>i||Kue(d).width>Number(r)))return d;for(var h,p=0,f=u.length-1,m=0;p<=f&&m<=u.length-1;){var g=Math.floor((p+f)/2),x=g-1,[v,y]=que(u,x,l,o,i,r,n,a),[b]=que(u,g,l,o,i,r,n,a);if(v||b||(p=g+1),v&&b&&(f=g-1),!v&&b){h=y;break}m++}return h||d})({breakAll:i,children:r,maxLines:s,style:a},l,c,t,Boolean(n))}return Xue(r)},$ue="#808080",Que={angle:0,breakAll:!1,capHeight:"0.71em",fill:$ue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Jue=(0,o.forwardRef)((e,t)=>{var n=oue(e,Que),{x:r,y:a,lineHeight:i,capHeight:s,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=n,h=Uue(n,Lue),p=(0,o.useMemo)(()=>Yue({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:f,dy:m,angle:g,className:x,breakAll:v}=h,y=Uue(h,zue);if(!b1(r)||!b1(a)||0===p.length)return null;var b,w=Number(r)+(y1(f)?f:0),k=Number(a)+(y1(m)?m:0);if(!L1(w)||!L1(k))return null;switch(d){case"start":b=Fue("calc(".concat(s,")"));break;case"middle":b=Fue("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:b=Fue("calc(".concat(p.length-1," * -").concat(i,")"))}var N=[];if(c){var S=p[0].width,{width:j}=h;N.push("scale(".concat(y1(j)&&y1(S)?j/S:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(w,", ").concat(k,")")),N.length&&(y.transform=N.join(" ")),o.createElement("text",Bue({},fce(y),{ref:t,x:w,y:k,className:Gm("recharts-text",x),textAnchor:u,fill:l.includes("url")?$ue:l}),p.map((e,t)=>{var n=e.words.join(v?"":" ");return o.createElement("tspan",{x:w,dy:0===t?b:i,key:"".concat(n,"-").concat(t)},n)}))});Jue.displayName="Text";var Zue=n(7950);function ede(e){var{zIndex:t,children:n}=e,r=void 0!==s8()&&void 0!==t&&0!==t,a=Z6(),i=s6();(0,o.useLayoutEffect)(()=>r?(i(qle({zIndex:t})),()=>{i(Xle({zIndex:t}))}):A1,[i,t,r]);var s=u6(e=>vce(e,t,a));return r?s?(0,Zue.createPortal)(n,s):null:n}var tde=["labelRef"],nde=["content"];function rde(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ade(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ide(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ade(Object(n),!0).forEach(function(t){sde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ade(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ode(){return ode=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ode.apply(null,arguments)}var lde=(0,o.createContext)(null),cde=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:a,width:i,height:s,children:l}=e,c=(0,o.useMemo)(()=>({x:t,y:n,upperWidth:r,lowerWidth:a,width:i,height:s}),[t,n,r,a,i,s]);return o.createElement(lde.Provider,{value:c},l)},ude=()=>{var e=(0,o.useContext)(lde),t=r8();return e||n8(t)},dde=(0,o.createContext)(null),hde=()=>{var e=(0,o.useContext)(dde),t=u6(Ore);return e||t},pde=e=>null!=e&&"function"===typeof e,fde=(e,t,n,r,a)=>{var i,s,{offset:l,className:c}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:f,endAngle:m,clockWise:g}=a,x=(h+p)/2,v=((e,t)=>g1(t-e)*Math.min(Math.abs(t-e),360))(f,m),y=v>=0?1:-1;switch(t){case"insideStart":i=f+y*l,s=g;break;case"insideEnd":i=m-y*l,s=!g;break;case"end":i=m+y*l,s=g;break;default:throw new Error("Unsupported position ".concat(t))}s=v<=0?s:!s;var b=Zne(u,d,x,i),w=Zne(u,d,x,i+359*(s?1:-1)),k="M".concat(b.x,",").concat(b.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(s?0:1,",\n    ").concat(w.x,",").concat(w.y),N=E1(e.id)?k1("recharts-radial-line-"):e.id;return o.createElement("text",ode({},r,{dominantBaseline:"central",className:Gm("recharts-radial-bar-label",c)}),o.createElement("defs",null,o.createElement("path",{id:N,d:k})),o.createElement("textPath",{xlinkHref:"#".concat(N)},n))},mde=e=>"cx"in e&&y1(e.cx),gde={angle:0,offset:5,zIndex:are.label,position:"middle",textBreakAll:!1};function xde(e){var t,n,r,a=oue(e,gde),{viewBox:i,position:s,value:l,children:c,content:u,className:d="",textBreakAll:h,labelRef:p}=a,f=hde(),m=ude();if(!(t=null==i?"center"===s?m:null!==f&&void 0!==f?f:m:mde(i)?i:n8(i))||E1(l)&&E1(c)&&!(0,o.isValidElement)(u)&&"function"!==typeof u)return null;var g=ide(ide({},a),{},{viewBox:t});if((0,o.isValidElement)(u)){var{labelRef:x}=g,v=rde(g,tde);return(0,o.cloneElement)(u,v)}if("function"===typeof u){var{content:y}=g,b=rde(g,nde);if(n=(0,o.createElement)(u,b),(0,o.isValidElement)(n))return n}else n=(e=>{var{value:t,formatter:n}=e,r=E1(e.children)?t:e.children;return"function"===typeof n?n(r):r})(a);var w=fce(a);if(mde(t)){if("insideStart"===s||"insideEnd"===s||"end"===s)return fde(a,s,n,w,t);r=((e,t,n)=>{var{cx:r,cy:a,innerRadius:i,outerRadius:s,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===n){var{x:u,y:d}=Zne(r,a,s+t,c);return{x:u,y:d,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:r,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:r,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:r,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+s)/2,{x:p,y:f}=Zne(r,a,h,c);return{x:p,y:f,textAnchor:"middle",verticalAnchor:"middle"}})(t,a.offset,a.position)}else r=((e,t)=>{var n,{parentViewBox:r,offset:a,position:i}=e;null==r||mde(r)||(n=r);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u}=t,d=s,h=s+(l-c)/2,p=(d+h)/2,f=(l+c)/2,m=d+l/2,g=u>=0?1:-1,x=g*a,v=g>0?"end":"start",y=g>0?"start":"end",b=l>=0?1:-1,w=b*a,k=b>0?"end":"start",N=b>0?"start":"end";if("top"===i)return ide(ide({},{x:d+l/2,y:o-x,textAnchor:"middle",verticalAnchor:v}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===i)return ide(ide({},{x:h+c/2,y:o+u+x,textAnchor:"middle",verticalAnchor:y}),n?{height:Math.max(n.y+n.height-(o+u),0),width:c}:{});if("left"===i){var S={x:p-w,y:o+u/2,textAnchor:k,verticalAnchor:"middle"};return ide(ide({},S),n?{width:Math.max(S.x-n.x,0),height:u}:{})}if("right"===i){var j={x:p+f+w,y:o+u/2,textAnchor:N,verticalAnchor:"middle"};return ide(ide({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:u}:{})}var C=n?{width:f,height:u}:{};return"insideLeft"===i?ide({x:p+w,y:o+u/2,textAnchor:N,verticalAnchor:"middle"},C):"insideRight"===i?ide({x:p+f-w,y:o+u/2,textAnchor:k,verticalAnchor:"middle"},C):"insideTop"===i?ide({x:d+l/2,y:o+x,textAnchor:"middle",verticalAnchor:y},C):"insideBottom"===i?ide({x:h+c/2,y:o+u-x,textAnchor:"middle",verticalAnchor:v},C):"insideTopLeft"===i?ide({x:d+w,y:o+x,textAnchor:N,verticalAnchor:y},C):"insideTopRight"===i?ide({x:d+l-w,y:o+x,textAnchor:k,verticalAnchor:y},C):"insideBottomLeft"===i?ide({x:h+w,y:o+u-x,textAnchor:N,verticalAnchor:v},C):"insideBottomRight"===i?ide({x:h+c-w,y:o+u-x,textAnchor:k,verticalAnchor:v},C):i&&"object"===typeof i&&(y1(i.x)||v1(i.x))&&(y1(i.y)||v1(i.y))?ide({x:s+N1(i.x,f),y:o+N1(i.y,u),textAnchor:"end",verticalAnchor:"end"},C):ide({x:m,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)})(a,t);return o.createElement(ede,{zIndex:a.zIndex},o.createElement(Jue,ode({ref:p,className:Gm("recharts-label",d)},w,r,{textAnchor:Hue(w.textAnchor)?w.textAnchor:r.textAnchor,breakAll:h}),n))}xde.displayName="Label";var vde=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return!0===e?o.createElement(xde,ode({key:"label-implicit"},r)):b1(e)?o.createElement(xde,ode({key:"label-implicit",value:e},r)):(0,o.isValidElement)(e)?e.type===xde?(0,o.cloneElement)(e,ide({key:"label-implicit"},r)):o.createElement(xde,ode({key:"label-implicit",content:e},r)):pde(e)?o.createElement(xde,ode({key:"label-implicit",content:e},r)):e&&"object"===typeof e?o.createElement(xde,ode({},e,{key:"label-implicit"},r)):null};function yde(e){var{label:t,labelRef:n}=e,r=ude();return vde(t,r,n)||null}var bde=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,wde=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,o.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var r={};return Object.keys(n).forEach(e=>{lce(e)&&(r[e]=t||(t=>n[e](n,t)))}),r},kde=(e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var r=null;return Object.keys(e).forEach(a=>{var i=e[a];lce(a)&&"function"===typeof i&&(r||(r={}),r[a]=((e,t,n)=>r=>(e(t,n,r),null))(i,t,n))}),r};function Nde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sde{static create(e){return new Sde(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}Nde(Sde,"EPS",1e-4);function jde(e,t){if(t<1)return[];if(1===t)return e;for(var n=[],r=0;r<e.length;r+=t){var a=e[r];void 0!==a&&n.push(a)}return n}function Cde(e,t,n){return function(e){var{width:t,height:n}=e,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}function Ede(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function Tde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ide(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tde(Object(n),!0).forEach(function(t){Ade(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ade(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ode(e,t,n){var r,{tick:a,ticks:i,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!i||!i.length||!a)return[];if(y1(c)||Ble)return null!==(r=function(e,t){return jde(e,t+1)}(i,y1(c)?c:0))&&void 0!==r?r:[];var p=[],f="top"===l||"bottom"===l?"width":"height",m=d&&"width"===f?jue(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(e,r)=>{var a="function"===typeof u?u(e.value,r):e.value;return"width"===f?Cde(jue(a,{fontSize:t,letterSpacing:n}),m,h):jue(a,{fontSize:t,letterSpacing:n})[f]},x=i.length>=2?g1(i[1].coordinate-i[0].coordinate):1,v=function(e,t,n){var r="width"===n,{x:a,y:i,width:s,height:o}=e;return 1===t?{start:r?a:i,end:r?a+s:i+o}:{start:r?a+s:i+o,end:r?a:i}}(s,x,f);return"equidistantPreserveStart"===c?function(e,t,n,r,a){for(var i,s=(r||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:jde(r,u)};var i,s=c,h=()=>(void 0===i&&(i=n(t,s)),i),p=t.coordinate,f=0===c||Ede(e,p,h,d,l);f||(c=0,d=o,u+=1),f&&(d=p+e*(h()/2+a),c+=u)};u<=s.length;)if(i=h())return i.v;return[]}(x,v,g,i,o):"equidistantPreserveEnd"===c?function(e,t,n,r,a){var i=(r||[]).slice().length;if(0===i)return[];for(var{start:s,end:o}=t,l=1;l<=i;l++){for(var c=(i-1)%l,u=s,d=!0,h=function(){var t,i=r[p],s=p,l=()=>(void 0===t&&(t=n(i,s)),t),h=i.coordinate,f=p===c||Ede(e,h,l,u,o);if(!f)return d=!1,1;f&&(u=h+e*(l()/2+a))},p=c;p<i&&!h();p+=l);if(d){for(var f=[],m=c;m<i;m+=l)f.push(r[m]);return f}}return[]}(x,v,g,i,o):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,n,r,a,i){var s=(r||[]).slice(),o=s.length,{start:l,end:c}=t;if(i){var u=r[o-1],d=n(u,o-1),h=e*(u.coordinate+e*d/2-c);s[o-1]=u=Ide(Ide({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),null!=u.tickCoord&&Ede(e,u.tickCoord,()=>d,l,c)&&(c=u.tickCoord-e*(d/2+a),s[o-1]=Ide(Ide({},u),{},{isShow:!0}))}for(var p=i?o-1:o,f=function(t){var r,i=s[t],o=()=>(void 0===r&&(r=n(i,t)),r);if(0===t){var u=e*(i.coordinate-e*o()/2-l);s[t]=i=Ide(Ide({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else s[t]=i=Ide(Ide({},i),{},{tickCoord:i.coordinate});null!=i.tickCoord&&Ede(e,i.tickCoord,o,l,c)&&(l=i.tickCoord+e*(o()/2+a),s[t]=Ide(Ide({},i),{},{isShow:!0}))},m=0;m<p;m++)f(m);return s}(x,v,g,i,o,"preserveStartEnd"===c):function(e,t,n,r,a){for(var i=(r||[]).slice(),s=i.length,{start:o}=t,{end:l}=t,c=function(t){var r,c=i[t],u=()=>(void 0===r&&(r=n(c,t)),r);if(t===s-1){var d=e*(c.coordinate+e*u()/2-l);i[t]=c=Ide(Ide({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else i[t]=c=Ide(Ide({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&Ede(e,c.tickCoord,u,o,l)&&(l=c.tickCoord-e*(u()/2+a),i[t]=Ide(Ide({},c),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return i}(x,v,g,i,o),p.filter(e=>e.isShow))}var _de=["axisLine","width","height","className","hide","ticks","axisType"];function Rde(){return Rde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rde.apply(null,arguments)}function Pde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pde(Object(n),!0).forEach(function(t){Dde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fde={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:are.axis};function Lde(e){var{x:t,y:n,width:r,height:a,orientation:i,mirror:s,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=Mde(Mde(Mde({},c),hce(l)),{},{fill:"none"});if("top"===i||"bottom"===i){var d=+("top"===i&&!s||"bottom"===i&&s);u=Mde(Mde({},u),{},{x1:t,y1:n+d*a,x2:t+r,y2:n+d*a})}else{var h=+("left"===i&&!s||"right"===i&&s);u=Mde(Mde({},u),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+a})}return o.createElement("line",Rde({},u,{className:Gm("recharts-cartesian-axis-line",p1()(l,"className"))}))}function zde(e){var t,{option:n,tickProps:r,value:a}=e,i=Gm(r.className,"recharts-cartesian-axis-tick-value");if(o.isValidElement(n))t=o.cloneElement(n,Mde(Mde({},r),{},{className:i}));else if("function"===typeof n)t=n(Mde(Mde({},r),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";"boolean"!==typeof n&&(s=Gm(s,null===n||void 0===n?void 0:n.className)),t=o.createElement(Jue,Rde({},r,{className:s}),a)}return t}var Bde=(0,o.forwardRef)((e,t)=>{var{ticks:n=[],tick:r,tickLine:a,stroke:i,tickFormatter:s,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:p,y:f,width:m,height:g,tickSize:x,tickMargin:v,fontSize:y,letterSpacing:b,getTicksConfig:w,events:k,axisType:N}=e,S=Ode(Mde(Mde({},w),{},{ticks:n}),y,b),j=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(d,h),C=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(d,h),E=hce(w),T=pce(r),I={};"object"===typeof a&&(I=a);var A=Mde(Mde({},E),{},{fill:"none"},I),O=S.map(e=>Mde({entry:e},function(e,t,n,r,a,i,s,o,l){var c,u,d,h,p,f,m=o?-1:1,g=e.tickSize||s,x=y1(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":c=u=e.coordinate,f=(d=(h=n+ +!o*a)-m*g)-m*l,p=x;break;case"left":d=h=e.coordinate,p=(c=(u=t+ +!o*r)-m*g)-m*l,f=x;break;case"right":d=h=e.coordinate,p=(c=(u=t+ +o*r)+m*g)+m*l,f=x;break;default:c=u=e.coordinate,f=(d=(h=n+ +o*a)+m*g)+m*l,p=x}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:p,y:f}}}(e,p,f,m,g,d,x,h,v))),_=O.map(e=>{var{entry:t,line:n}=e;return o.createElement(mue,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},a&&o.createElement("line",Rde({},A,n,{className:Gm("recharts-cartesian-axis-tick-line",p1()(a,"className"))})))}),R=O.map((e,t)=>{var{entry:n,tick:a}=e,d=Mde(Mde(Mde(Mde({textAnchor:j,verticalAnchor:C},E),{},{stroke:"none",fill:i},T),a),{},{index:t,payload:n,visibleTicksCount:S.length,tickFormatter:s,padding:c},u);return o.createElement(mue,Rde({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(n.value,"-").concat(n.coordinate,"-").concat(n.tickCoord)},kde(k,n,t)),r&&o.createElement(zde,{option:r,tickProps:d,value:"".concat("function"===typeof s?s(n.value,t):n.value).concat(l||"")}))});return o.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},R.length>0&&o.createElement(ede,{zIndex:are.label},o.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},R)),_.length>0&&o.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},_))}),Ude=(0,o.forwardRef)((e,t)=>{var{axisLine:n,width:r,height:a,className:i,hide:s,ticks:l,axisType:c}=e,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,_de),[d,h]=(0,o.useState)(""),[p,f]=(0,o.useState)(""),m=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:i=0}=e,s=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>s&&(s=t.width)}});var o=n?n.getBoundingClientRect().width:0,l=s+(a+i)+o+(n?r:0);return Math.round(l)}return 0})({ticks:m.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,o.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=t;var n=t[0];if(n){var r=window.getComputedStyle(n),a=r.fontSize,i=r.letterSpacing;a===d&&i===p||(h(a),f(i))}}},[d,p]);return s||null!=r&&r<=0||null!=a&&a<=0?null:o.createElement(ede,{zIndex:e.zIndex},o.createElement(mue,{className:Gm("recharts-cartesian-axis",i)},o.createElement(Lde,{x:e.x,y:e.y,width:r,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:hce(e)}),o.createElement(Bde,{ref:g,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),o.createElement(cde,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},o.createElement(yde,{label:e.label,labelRef:e.labelRef}),e.children)))}),Wde=o.forwardRef((e,t)=>{var n=oue(e,Fde);return o.createElement(Ude,Rde({},n,{ref:t}))});Wde.displayName="CartesianAxis";var Vde=["domain","range"],Hde=["domain","range"];function Gde(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Kde(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function qde(e,t){if(e===t)return!0;var{domain:n,range:r}=e,a=Gde(e,Vde),{domain:i,range:s}=t,o=Gde(t,Hde);return!!Kde(n,i)&&(!!Kde(r,s)&&nce(a,o))}var Xde=["dangerouslySetInnerHTML","ticks","scale"],Yde=["id","scale"];function $de(){return $de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$de.apply(null,arguments)}function Qde(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Jde(e){var t=s6(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(Toe(e)):n.current!==e&&t(Ioe({prev:n.current,next:e})),n.current=e},[e,t]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(Aoe(n.current)),n.current=null)},[t]),null}var Zde=e=>{var{xAxisId:t,className:n}=e,r=u6(Q6),a=Z6(),i="xAxis",s=u6(e=>Pie(e,i,t,a)),l=u6(e=>Nie(e,t)),c=u6(e=>Cie(e,t)),u=u6(e=>Kre(e,t));if(null==l||null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:p}=e,f=Qde(e,Xde),{id:m,scale:g}=u,x=Qde(u,Yde);return o.createElement(Wde,$de({},f,x,{x:c.x,y:c.y,width:l.width,height:l.height,className:Gm("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:s,axisType:i}))},ehe={allowDataOverflow:Gre.allowDataOverflow,allowDecimals:Gre.allowDecimals,allowDuplicatedCategory:Gre.allowDuplicatedCategory,angle:Gre.angle,axisLine:Fde.axisLine,height:Gre.height,hide:!1,includeHidden:Gre.includeHidden,interval:Gre.interval,minTickGap:Gre.minTickGap,mirror:Gre.mirror,orientation:Gre.orientation,padding:Gre.padding,reversed:Gre.reversed,scale:Gre.scale,tick:Gre.tick,tickCount:Gre.tickCount,tickLine:Fde.tickLine,tickSize:Fde.tickSize,type:Gre.type,xAxisId:0},the=e=>{var t=oue(e,ehe);return o.createElement(o.Fragment,null,o.createElement(Jde,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),o.createElement(Zde,t))},nhe=o.memo(the,qde);nhe.displayName="XAxis";var rhe=["dangerouslySetInnerHTML","ticks","scale"],ahe=["id","scale"];function ihe(){return ihe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ihe.apply(null,arguments)}function she(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ohe(e){var t=s6(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(Ooe(e)):n.current!==e&&t(_oe({prev:n.current,next:e})),n.current=e},[e,t]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(Roe(n.current)),n.current=null)},[t]),null}var lhe=e=>{var{yAxisId:t,className:n,width:r,label:a}=e,i=(0,o.useRef)(null),s=(0,o.useRef)(null),l=u6(Q6),c=Z6(),u=s6(),d="yAxis",h=u6(e=>Tie(e,t)),p=u6(e=>Eie(e,t)),f=u6(e=>Pie(e,d,t,c)),m=u6(e=>Yre(e,t));if((0,o.useLayoutEffect)(()=>{if("auto"===r&&h&&!pde(a)&&!(0,o.isValidElement)(a)&&null!=m){var e=i.current;if(e){var n=e.getCalculatedWidth();Math.round(h.width)!==Math.round(n)&&u(Foe({id:t,width:n}))}}},[f,h,u,a,t,r,m]),null==h||null==p||null==m)return null;var{dangerouslySetInnerHTML:g,ticks:x,scale:v}=e,y=she(e,rhe),{id:b,scale:w}=m,k=she(m,ahe);return o.createElement(Wde,ihe({},y,k,{ref:i,labelRef:s,x:p.x,y:p.y,tickTextProps:"auto"===r?{width:void 0}:{width:r},width:h.width,height:h.height,className:Gm("recharts-".concat(d," ").concat(d),n),viewBox:l,ticks:f,axisType:d}))},che={allowDataOverflow:Xre.allowDataOverflow,allowDecimals:Xre.allowDecimals,allowDuplicatedCategory:Xre.allowDuplicatedCategory,angle:Xre.angle,axisLine:Fde.axisLine,hide:!1,includeHidden:Xre.includeHidden,interval:Xre.interval,minTickGap:Xre.minTickGap,mirror:Xre.mirror,orientation:Xre.orientation,padding:Xre.padding,reversed:Xre.reversed,scale:Xre.scale,tick:Xre.tick,tickCount:Xre.tickCount,tickLine:Fde.tickLine,tickSize:Fde.tickSize,type:Xre.type,width:Xre.width,yAxisId:0},uhe=e=>{var t=oue(e,che);return o.createElement(o.Fragment,null,o.createElement(ohe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),o.createElement(lhe,t))},dhe=o.memo(uhe,qde);function hhe(){return hhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hhe.apply(null,arguments)}function phe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?phe(Object(n),!0).forEach(function(t){mhe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):phe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mhe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ghe(e){return Array.isArray(e)&&b1(e[0])&&b1(e[1])?e.join(" ~ "):e}dhe.displayName="YAxis";var xhe=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:i,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=e,f=fhe({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=fhe({margin:0},a),g=!E1(d),x=g?d:"",v=Gm("recharts-default-tooltip",c),y=Gm("recharts-tooltip-label",u);g&&h&&void 0!==i&&null!==i&&(x=h(d,i));var b=p?{role:"status","aria-live":"assertive"}:{};return o.createElement("div",hhe({className:v,style:f},b),o.createElement("p",{className:y,style:m},o.isValidElement(x)?x:"".concat(x)),(()=>{if(i&&i.length){var e=(l?h6()(i,l):i).map((e,n)=>{if("none"===e.type)return null;var a=e.formatter||s||ghe,{value:l,name:c}=e,u=l,d=c;if(a){var h=a(l,c,e,n,i);if(Array.isArray(h))[u,d]=h;else{if(null==h)return null;u=h}}var p=fhe({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},r);return o.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},b1(d)?o.createElement("span",{className:"recharts-tooltip-item-name"},d):null,b1(d)?o.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,o.createElement("span",{className:"recharts-tooltip-item-value"},u),o.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return o.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},vhe="recharts-tooltip-wrapper",yhe={visibility:"hidden"};function bhe(e){var{coordinate:t,translateX:n,translateY:r}=e;return Gm(vhe,{["".concat(vhe,"-right")]:y1(n)&&t&&y1(t.x)&&n>=t.x,["".concat(vhe,"-left")]:y1(n)&&t&&y1(t.x)&&n<t.x,["".concat(vhe,"-bottom")]:y1(r)&&t&&y1(t.y)&&r>=t.y,["".concat(vhe,"-top")]:y1(r)&&t&&y1(t.y)&&r<t.y})}function whe(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(i&&y1(i[r]))return i[r];var u=n[r]-o-(a>0?a:0),d=n[r]+a;if(t[r])return s[r]?u:d;var h=l[r];return null==h?0:s[r]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+o>h+c?Math.max(u,h):Math.max(d,h)}function khe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?khe(Object(n),!0).forEach(function(t){She(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):khe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function She(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jhe extends o.PureComponent{constructor(){super(...arguments),She(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),She(this,"handleKeyDown",e=>{var t,n,r,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(r=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==r?r:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:r,children:a,coordinate:i,hasPayload:s,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:p,wrapperStyle:f,lastBoundingBox:m,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:v,cssProperties:y}=function(e){var t,n,r,{allowEscapeViewBox:a,coordinate:i,offsetTopLeft:s,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=e;return t=c.height>0&&c.width>0&&i?function(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=whe({allowEscapeViewBox:a,coordinate:i,key:"x",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=whe({allowEscapeViewBox:a,coordinate:i,key:"y",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:u}):yhe,{cssProperties:t,cssClasses:bhe({translateX:n,translateY:r,coordinate:i})}}({allowEscapeViewBox:t,coordinate:i,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:p}),b=x?{}:Nhe(Nhe({transition:l&&e?"transform ".concat(n,"ms ").concat(r):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),w=Nhe(Nhe({},b),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},f);return o.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:w,ref:g},a)}}var Che=n(4332),Ehe=n.n(Che);var The,Ihe,Ahe,Ohe,_he,Rhe,Phe,Mhe,Dhe,Fhe,Lhe,zhe,Bhe,Uhe;function Whe(){}function Vhe(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Hhe(e){this._context=e}function Ghe(e){this._context=e}function Khe(e){this._context=e}Hhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vhe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vhe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ghe.prototype={areaStart:Whe,areaEnd:Whe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vhe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Khe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Vhe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class qhe{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function Xhe(e){this._context=e}function Yhe(e){this._context=e}function $he(e){return new Yhe(e)}function Qhe(e){return e<0?-1:1}function Jhe(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),s=(n-e._y1)/(a||r<0&&-0),o=(i*a+s*r)/(r+a);return(Qhe(i)+Qhe(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function Zhe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function epe(e,t,n){var r=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-r)/3;e._context.bezierCurveTo(r+o,a+o*t,i-o,s-o*n,i,s)}function tpe(e){this._context=e}function npe(e){this._context=new rpe(e)}function rpe(e){this._context=e}function ape(e){this._context=e}function ipe(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function spe(e,t){this._context=e,this._t=t}function ope(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Xhe.prototype={areaStart:Whe,areaEnd:Whe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Yhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},tpe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:epe(this,this._t0,Zhe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,epe(this,Zhe(this,n=Jhe(this,e,t)),n);break;default:epe(this,this._t0,n=Jhe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(npe.prototype=Object.create(tpe.prototype)).point=function(e,t){tpe.prototype.point.call(this,t,e)},rpe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},ape.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=ipe(e),a=ipe(t),i=0,s=1;s<n;++i,++s)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},spe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const lpe=Math.PI,cpe=2*lpe,upe=1e-6,dpe=cpe-upe;function hpe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class ppe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?hpe:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return hpe;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(The||(The=ope(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Ihe||(Ihe=ope(["Z"]))))}lineTo(e,t){this._append(Ahe||(Ahe=ope(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(Ohe||(Ohe=ope(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,a,i){this._append(_he||(_he=ope(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+i)}arcTo(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));let i=this._x1,s=this._y1,o=n-e,l=r-t,c=i-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append(Rhe||(Rhe=ope(["M",",",""])),this._x1=e,this._y1=t);else if(d>upe)if(Math.abs(u*o-l*c)>upe&&a){let h=n-i,p=r-s,f=o*o+l*l,m=h*h+p*p,g=Math.sqrt(f),x=Math.sqrt(d),v=a*Math.tan((lpe-Math.acos((f+d-m)/(2*g*x)))/2),y=v/x,b=v/g;Math.abs(y-1)>upe&&this._append(Mhe||(Mhe=ope(["L",",",""])),e+y*c,t+y*u),this._append(Dhe||(Dhe=ope(["A",",",",0,0,",",",",",""])),a,a,+(u*h>c*p),this._x1=e+b*o,this._y1=t+b*l)}else this._append(Phe||(Phe=ope(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,a,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));let s=n*Math.cos(r),o=n*Math.sin(r),l=e+s,c=t+o,u=1^i,d=i?r-a:a-r;null===this._x1?this._append(Fhe||(Fhe=ope(["M",",",""])),l,c):(Math.abs(this._x1-l)>upe||Math.abs(this._y1-c)>upe)&&this._append(Lhe||(Lhe=ope(["L",",",""])),l,c),n&&(d<0&&(d=d%cpe+cpe),d>dpe?this._append(zhe||(zhe=ope(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-s,t-o,n,n,u,this._x1=l,this._y1=c):d>upe&&this._append(Bhe||(Bhe=ope(["A",",",",0,",",",",",",",""])),n,n,+(d>=lpe),u,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}rect(e,t,n,r){this._append(Uhe||(Uhe=ope(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function fpe(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new ppe(t)}function mpe(e){return e[0]}function gpe(e){return e[1]}function xpe(e,t){var n=g6(!0),r=null,a=$he,i=null,s=fpe(o);function o(o){var l,c,u,d=(o=m6(o)).length,h=!1;for(null==r&&(i=a(u=s())),l=0;l<=d;++l)!(l<d&&n(c=o[l],l,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,o),+t(c,l,o));if(u)return i=null,u+""||null}return e="function"===typeof e?e:void 0===e?mpe:g6(e),t="function"===typeof t?t:void 0===t?gpe:g6(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:g6(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:g6(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:g6(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o}function vpe(e,t,n){var r=null,a=g6(!0),i=null,s=$he,o=null,l=fpe(c);function c(c){var u,d,h,p,f,m=(c=m6(c)).length,g=!1,x=new Array(m),v=new Array(m);for(null==i&&(o=s(f=l())),u=0;u<=m;++u){if(!(u<m&&a(p=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(x[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(x[u]=+e(p,u,c),v[u]=+t(p,u,c),o.point(r?+r(p,u,c):x[u],n?+n(p,u,c):v[u]))}if(f)return o=null,f+""||null}function u(){return xpe().defined(a).curve(s).context(i)}return e="function"===typeof e?e:void 0===e?mpe:g6(+e),t="function"===typeof t?t:g6(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?gpe:g6(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:g6(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:g6(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:g6(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:g6(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:g6(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:g6(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:g6(!!e),c):a},c.curve=function(e){return arguments.length?(s=e,null!=i&&(o=s(i)),c):s},c.context=function(e){return arguments.length?(null==e?i=o=null:o=s(i=e),c):i},c}function ype(){return ype=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ype.apply(null,arguments)}function bpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wpe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bpe(Object(n),!0).forEach(function(t){kpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bpe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Npe={curveBasisClosed:function(e){return new Ghe(e)},curveBasisOpen:function(e){return new Khe(e)},curveBasis:function(e){return new Hhe(e)},curveBumpX:function(e){return new qhe(e,!0)},curveBumpY:function(e){return new qhe(e,!1)},curveLinearClosed:function(e){return new Xhe(e)},curveLinear:$he,curveMonotoneX:function(e){return new tpe(e)},curveMonotoneY:function(e){return new npe(e)},curveNatural:function(e){return new ape(e)},curveStep:function(e){return new spe(e,.5)},curveStepAfter:function(e){return new spe(e,1)},curveStepBefore:function(e){return new spe(e,0)}},Spe=e=>L1(e.x)&&L1(e.y),jpe=e=>null!=e.base&&Spe(e.base)&&Spe(e),Cpe=e=>e.x,Epe=e=>e.y,Tpe=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:a,connectNulls:i=!1}=e,s=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(T1(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Npe[n]||$he:Npe["".concat(n).concat("vertical"===t?"Y":"X")]})(t,a),o=i?n.filter(Spe):n;if(Array.isArray(r)){var l=n.map((e,t)=>wpe(wpe({},e),{},{base:r[t]}));return("vertical"===a?vpe().y(Epe).x1(Cpe).x0(e=>e.base.x):vpe().x(Cpe).y1(Epe).y0(e=>e.base.y)).defined(jpe).curve(s)(i?l.filter(jpe):l)}return("vertical"===a&&y1(r)?vpe().y(Epe).x1(Cpe).x0(r):y1(r)?vpe().x(Cpe).y1(Epe).y0(r):xpe().x(Cpe).y(Epe)).defined(Spe).curve(s)(o)},Ipe=e=>{var{className:t,points:n,path:r,pathRef:a}=e,i=s8();if((!n||!n.length)&&!r)return null;var s={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=n&&n.length?Tpe(s):r;return o.createElement("path",ype({},hce(e),wde(e),{className:Gm("recharts-curve",t),d:null===l?void 0:l,ref:a}))},Ape=["x","y","top","left","width","height","className"];function Ope(){return Ope=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ope.apply(null,arguments)}function _pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ppe=(e,t,n,r,a,i)=>"M".concat(e,",").concat(a,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n),Mpe=e=>{var{x:t=0,y:n=0,top:r=0,left:a=0,width:i=0,height:s=0,className:l}=e,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Ape),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_pe(Object(n),!0).forEach(function(t){Rpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_pe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:r,left:a,width:i,height:s},c);return y1(t)&&y1(n)&&y1(i)&&y1(s)&&y1(r)&&y1(a)?o.createElement("path",Ope({},fce(u),{className:Gm("recharts-cross",l),d:Ppe(t,n,i,s,r,a)})):null};function Dpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fpe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dpe(Object(n),!0).forEach(function(t){Lpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dpe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zpe=(e,t,n)=>e.map(e=>{return"".concat((r=e,r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var r}).join(","),Bpe=(e,t)=>Object.keys(t).reduce((n,r)=>Fpe(Fpe({},n),{},{[r]:e(r,t[r])}),{});function Upe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wpe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Upe(Object(n),!0).forEach(function(t){Vpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Upe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vpe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hpe=(e,t,n)=>e+(t-e)*n,Gpe=e=>{var{from:t,to:n}=e;return t!==n},Kpe=(e,t,n)=>{var r=Bpe((t,n)=>{if(Gpe(n)){var[r,a]=e(n.from,n.to,n.velocity);return Wpe(Wpe({},n),{},{from:r,velocity:a})}return n},t);return n<1?Bpe((e,t)=>Gpe(t)&&null!=r[e]?Wpe(Wpe({},t),{},{velocity:Hpe(t.velocity,r[e].velocity,n),from:Hpe(t.from,r[e].from,n)}):t,t):Kpe(e,r,n-1)};function qpe(e,t,n,r,a,i){var s,o=r.reduce((n,r)=>Wpe(Wpe({},n),{},{[r]:{from:e[r],velocity:0,to:t[r]}}),{}),l=null,c=r=>{s||(s=r);var u=(r-s)/n.dt;o=Kpe(n,o,u),a(Wpe(Wpe(Wpe({},e),t),Bpe((e,t)=>t.from,o))),s=r,Object.values(o).filter(Gpe).length&&(l=i.setTimeout(c))};return()=>(l=i.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}const Xpe=(e,t,n,r,a,i)=>{var s,o,l=(s=e,o=t,[Object.keys(s),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==n?()=>(a(Wpe(Wpe({},e),t)),()=>{}):!0===n.isStepper?qpe(e,t,n,l,a,i):function(e,t,n,r,a,i,s){var o,l=null,c=a.reduce((n,r)=>{var a=e[r],i=t[r];return null==a||null==i?n:Wpe(Wpe({},n),{},{[r]:[a,i]})},{}),u=a=>{o||(o=a);var d=(a-o)/r,h=Bpe((e,t)=>Hpe(...t,n(d)),c);if(i(Wpe(Wpe(Wpe({},e),t),h)),d<1)l=s.setTimeout(u);else{var p=Bpe((e,t)=>Hpe(...t,n(1)),c);i(Wpe(Wpe(Wpe({},e),t),p))}};return()=>(l=s.setTimeout(u),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,n,r,l,a,i)};var Ype=1e-4,$pe=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Qpe=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),Jpe=(e,t)=>n=>{var r=$pe(e,t);return Qpe(r,n)},Zpe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var r=(e=>{var t,n=e.split("(");if(2!==n.length||"cubic-bezier"!==n[0])return null;var r=null===(t=n[1])||void 0===t||null===(t=t.split(")")[0])||void 0===t?void 0:t.split(",");if(null==r||4!==r.length)return null;var a=r.map(e=>parseFloat(e));return[a[0],a[1],a[2],a[3]]})(t[0]);if(r)return r}return 4===t.length?t:[0,0,1,1]},efe=(e,t,n,r)=>{var a,i,s=Jpe(e,n),o=Jpe(t,r),l=(a=e,i=n,e=>{var t=[...$pe(a,i).map((e,t)=>e*t).slice(1),0];return Qpe(t,e)}),c=e=>e>1?1:e<0?0:e,u=e=>{for(var t=e>1?1:e,n=t,r=0;r<8;++r){var a=s(n)-t,i=l(n);if(Math.abs(a-t)<Ype||i<Ype)return o(n);n=c(n-a/i)}return o(n)};return u.isStepper=!1,u},tfe=function(){return efe(...Zpe(...arguments))},nfe=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tfe(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:r=17}=e,a=(e,a,i)=>{var s=i+(-(e-a)*t-i*n)*r/1e3,o=i*r/1e3+e;return Math.abs(o-a)<Ype&&Math.abs(s)<Ype?[a,0]:[o,s]};return a.isStepper=!0,a.dt=r,a}();default:if("cubic-bezier"===e.split("(")[0])return tfe(e)}return"function"===typeof e?e:null};class rfe{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),r=null,a=i=>{i-n>=t?e(i):"function"===typeof requestAnimationFrame&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{null!=r&&cancelAnimationFrame(r)}}}function afe(){return function(e){var t=()=>null,n=!1,r=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var s=i,[o,...l]=s;return"number"===typeof o?void(r=e.setTimeout(a.bind(null,l),o)):(a(o),void(r=e.setTimeout(a.bind(null,l))))}"string"===typeof i&&t(i),"object"===typeof i&&t(i),"function"===typeof i&&i()}};return{stop:()=>{n=!0},start:e=>{n=!1,r&&(r(),r=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new rfe)}var ife=(0,o.createContext)(afe);var sfe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},ofe={t:0},lfe={t:1};function cfe(e){var t=oue(e,sfe),{isActive:n,canBegin:r,duration:a,easing:i,begin:s,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d="auto"===n?!Ble:n,h=function(e,t){var n=(0,o.useContext)(ife);return(0,o.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}(t.animationId,t.animationManager),[p,f]=(0,o.useState)(d?ofe:lfe),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{d||f(lfe)},[d]),(0,o.useEffect)(()=>{if(!d||!r)return A1;var e=Xpe(ofe,lfe,nfe(i),a,f,h.getTimeoutController());return h.start([c,s,()=>{m.current=e()},a,l]),()=>{h.stop(),m.current&&m.current(),l()}},[d,r,a,i,s,c,l,h]),u(p.t)}function ufe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,o.useRef)(k1(t)),r=(0,o.useRef)(e);return r.current!==e&&(n.current=k1(t),r.current=e),n.current}var dfe,hfe,pfe,ffe,mfe,gfe,xfe,vfe,yfe,bfe,wfe=["radius"],kfe=["radius"];function Nfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nfe(Object(n),!0).forEach(function(t){jfe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nfe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jfe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cfe(){return Cfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cfe.apply(null,arguments)}function Efe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Tfe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ife,Afe,Ofe,_fe,Rfe,Pfe,Mfe,Dfe=(e,t,n,r,a)=>{var i,s=f1(n),o=f1(r),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],p=0;p<4;p++)h[p]=a[p]>l?l:a[p];i=m1(dfe||(dfe=Tfe(["M",",",""])),e,t+c*h[0]),h[0]>0&&(i+=m1(hfe||(hfe=Tfe(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,e+u*h[0],t)),i+=m1(pfe||(pfe=Tfe(["L ",",",""])),e+n-u*h[1],t),h[1]>0&&(i+=m1(ffe||(ffe=Tfe(["A ",",",",0,0,",",\n        ",",",""])),h[1],h[1],d,e+n,t+c*h[1])),i+=m1(mfe||(mfe=Tfe(["L ",",",""])),e+n,t+r-c*h[2]),h[2]>0&&(i+=m1(gfe||(gfe=Tfe(["A ",",",",0,0,",",\n        ",",",""])),h[2],h[2],d,e+n-u*h[2],t+r)),i+=m1(xfe||(xfe=Tfe(["L ",",",""])),e+u*h[3],t+r),h[3]>0&&(i+=m1(vfe||(vfe=Tfe(["A ",",",",0,0,",",\n        ",",",""])),h[3],h[3],d,e,t+r-c*h[3])),i+="Z"}else if(l>0&&a===+a&&a>0){var f=Math.min(l,a);i=m1(yfe||(yfe=Tfe(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+c*f,f,f,d,e+u*f,t,e+n-u*f,t,f,f,d,e+n,t+c*f,e+n,t+r-c*f,f,f,d,e+n-u*f,t+r,e+u*f,t+r,f,f,d,e,t+r-c*f)}else i=m1(bfe||(bfe=Tfe(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return i},Ffe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lfe=e=>{var t=oue(e,Ffe),n=(0,o.useRef)(null),[r,a]=(0,o.useState)(-1);(0,o.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch($je){}},[]);var{x:i,y:s,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:g}=t,x=(0,o.useRef)(l),v=(0,o.useRef)(c),y=(0,o.useRef)(i),b=(0,o.useRef)(s),w=ufe((0,o.useMemo)(()=>({x:i,y:s,width:l,height:c,radius:u}),[i,s,l,c,u]),"rectangle-");if(i!==+i||s!==+s||l!==+l||c!==+c||0===l||0===c)return null;var k=Gm("recharts-rectangle",d);if(!g){var N=fce(t),{radius:S}=N,j=Efe(N,wfe);return o.createElement("path",Cfe({},j,{x:f1(i),y:f1(s),width:f1(l),height:f1(c),radius:"number"===typeof u?u:void 0,className:k,d:Dfe(i,s,l,c,u)}))}var C=x.current,E=v.current,T=y.current,I=b.current,A="0px ".concat(-1===r?1:r,"px"),O="".concat(r,"px 0px"),_=zpe(["strokeDasharray"],p,"string"===typeof h?h:Ffe.animationEasing);return o.createElement(cfe,{animationId:w,key:w,canBegin:r>0,duration:p,easing:h,isActive:g,begin:f},e=>{var r,a=j1(C,l,e),d=j1(E,c,e),h=j1(T,i,e),p=j1(I,s,e);n.current&&(x.current=a,v.current=d,y.current=h,b.current=p),r=m?e>0?{transition:_,strokeDasharray:O}:{strokeDasharray:A}:{strokeDasharray:O};var f=fce(t),{radius:g}=f,w=Efe(f,kfe);return o.createElement("path",Cfe({},w,{radius:"number"===typeof u?u:void 0,className:k,d:Dfe(h,p,a,d,u),ref:n,style:Sfe(Sfe({},r),t.style)}))})};function zfe(e){var{cx:t,cy:n,radius:r,startAngle:a,endAngle:i}=e;return{points:[Zne(t,n,r,a),Zne(t,n,r,i)],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function Bfe(){return Bfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bfe.apply(null,arguments)}function Ufe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Wfe=e=>{var{cx:t,cy:n,radius:r,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+r,u=Math.asin(o/c)/Qne,d=l?a:a+i*u,h=l?a-i*u:a;return{center:Zne(t,n,c,d),circleTangency:Zne(t,n,r,d),lineTangency:Zne(t,n,c*Math.cos(u*Qne),h),theta:u}},Vfe=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:i,endAngle:s}=e,o=((e,t)=>g1(t-e)*Math.min(Math.abs(t-e),359.999))(i,s),l=i+o,c=Zne(t,n,a,i),u=Zne(t,n,a,l),d=m1(Ife||(Ife=Ufe(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,a,a,+(Math.abs(o)>180),+(i>l),u.x,u.y);if(r>0){var h=Zne(t,n,r,i),p=Zne(t,n,r,l);d+=m1(Afe||(Afe=Ufe(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),p.x,p.y,r,r,+(Math.abs(o)>180),+(i<=l),h.x,h.y)}else d+=m1(Ofe||(Ofe=Ufe(["L ",","," Z"])),t,n);return d},Hfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Gfe=e=>{var t=oue(e,Hfe),{cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(i<a||u===d)return null;var p,f=Gm("recharts-sector",h),m=i-a,g=N1(s,m,0,!0);return p=g>0&&Math.abs(u-d)<360?(e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,u=g1(c-l),{circleTangency:d,lineTangency:h,theta:p}=Wfe({cx:t,cy:n,radius:a,angle:l,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:f,lineTangency:m,theta:g}=Wfe({cx:t,cy:n,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:o}),x=o?Math.abs(l-c):Math.abs(l-c)-p-g;if(x<0)return s?m1(_fe||(_fe=Ufe(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),h.x,h.y,i,i,2*i,i,i,2*-i):Vfe({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var v=m1(Rfe||(Rfe=Ufe(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),h.x,h.y,i,i,+(u<0),d.x,d.y,a,a,+(x>180),+(u<0),f.x,f.y,i,i,+(u<0),m.x,m.y);if(r>0){var{circleTangency:y,lineTangency:b,theta:w}=Wfe({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:k,lineTangency:N,theta:S}=Wfe({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),j=o?Math.abs(l-c):Math.abs(l-c)-w-S;if(j<0&&0===i)return"".concat(v,"L").concat(t,",").concat(n,"Z");v+=m1(Pfe||(Pfe=Ufe(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),N.x,N.y,i,i,+(u<0),k.x,k.y,r,r,+(j>180),+(u>0),y.x,y.y,i,i,+(u<0),b.x,b.y)}else v+=m1(Mfe||(Mfe=Ufe(["L",",","Z"])),t,n);return v})({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):Vfe({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),o.createElement("path",Bfe({},fce(t),{className:f,d:p}))};function Kfe(e,t,n){if("horizontal"===e)return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if("vertical"===e)return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(bde(t)){if("centric"===e){var{cx:r,cy:a,innerRadius:i,outerRadius:s,angle:o}=t,l=Zne(r,a,i,o),c=Zne(r,a,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return zfe(t)}}function qfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qfe(Object(n),!0).forEach(function(t){Yfe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qfe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yfe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $fe=()=>{var e=u6(bae),t=u6(Fse),n=u6(Pse);return M6(e&&n?Xfe(Xfe({},e),{},{scale:n}):void 0,t)};function Qfe(){return Qfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qfe.apply(null,arguments)}function Jfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jfe(Object(n),!0).forEach(function(t){eme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jfe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eme(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tme(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return(0,o.isValidElement)(t)?(0,o.cloneElement)(t,r):(0,o.createElement)(n,r)}function nme(e){var t,n,r,a,{coordinate:i,payload:s,index:l,offset:c,tooltipAxisBandSize:u,layout:d,cursor:h,tooltipEventType:p,chartName:f}=e,m=i,g=s,x=l;if(!h||!m||"ScatterChart"!==f&&"axis"!==p)return null;if("ScatterChart"===f)n=m,r=Mpe,a=are.cursorLine;else if("BarChart"===f)n=function(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(d,m,c,u),r=Lfe,a=are.cursorRectangle;else if("radial"===d&&bde(m)){var{cx:v,cy:y,radius:b,startAngle:w,endAngle:k}=zfe(m);n={cx:v,cy:y,startAngle:w,endAngle:k,innerRadius:b,outerRadius:b},r=Gfe,a=are.cursorLine}else n={points:Kfe(d,m,c)},r=Ipe,a=are.cursorLine;var N="object"===typeof h&&"className"in h?h.className:void 0,S=Zfe(Zfe(Zfe(Zfe({stroke:"#ccc",pointerEvents:"none"},c),n),pce(h)),{},{payload:g,payloadIndex:x,className:Gm("recharts-tooltip-cursor",N)});return o.createElement(ede,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:a},o.createElement(tme,{cursor:h,cursorComp:r,cursorProps:S}))}function rme(e){var t=$fe(),n=(()=>{var e;return null!==(e=u6(Y6))&&void 0!==e?e:a8})(),r=s8(),a=noe();return null==t||null==n||null==r||null==a?null:o.createElement(nme,Qfe({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:a}))}function ame(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ime(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ame(Object(n),!0).forEach(function(t){sme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ame(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sme(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ome(e){return e.dataKey}var lme=[],cme={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ume(e){var t,n,r=oue(e,cme),{active:a,allowEscapeViewBox:i,animationDuration:s,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:f,reverseDirection:m,useTranslate3d:g,wrapperStyle:x,cursor:v,shared:y,trigger:b,defaultIndex:w,portal:k,axisId:N}=r,S=s6(),j="number"===typeof w?String(w):w;(0,o.useEffect)(()=>{S(E5({shared:y,trigger:b,axisId:N,active:a,defaultIndex:j}))},[S,y,b,N,a,j]);var C=r8(),E=sce(),T=function(e){return u6(t=>Wie(t,e))}(y),{activeIndex:I,isActive:A}=null!==(t=u6(e=>foe(e,T,b,j)))&&void 0!==t?t:{},O=u6(e=>poe(e,T,b,j)),_=u6(e=>hoe(e,T,b,j)),R=u6(e=>doe(e,T,b,j)),P=O,M=(0,o.useContext)(zce),D=null!==(n=null!==a&&void 0!==a?a:A)&&void 0!==n&&n,[F,L]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,o.useState)({height:0,left:0,top:0,width:0}),r=(0,o.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),a={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}([P,D]),z="axis"===T?_:void 0;Lce(T,b,R,z,I,D);var B=null!==k&&void 0!==k?k:M;if(null==B||null==C||null==T)return null;var U=null!==P&&void 0!==P?P:lme;D||(U=lme),u&&U.length&&(U=function(e,t,n){return!0===t?Ehe()(e,n):"function"===typeof t?Ehe()(e,t):e}(U.filter(e=>null!=e.value&&(!0!==e.hide||r.includeHidden)),p,ome));var W=U.length>0,V=o.createElement(jhe,{allowEscapeViewBox:i,animationDuration:s,animationEasing:l,isAnimationActive:d,active:D,coordinate:R,hasPayload:W,offset:h,position:f,reverseDirection:m,useTranslate3d:g,viewBox:C,wrapperStyle:x,lastBoundingBox:F,innerRef:L,hasPortalFromProps:Boolean(k)},function(e,t){return o.isValidElement(e)?o.cloneElement(e,t):"function"===typeof e?o.createElement(e,t):o.createElement(xhe,t)}(c,ime(ime({},r),{},{payload:U,label:z,active:D,activeIndex:I,coordinate:R,accessibilityLayer:E})));return o.createElement(o.Fragment,null,(0,Zue.createPortal)(V,B),D&&o.createElement(rme,{cursor:v,tooltipEventType:T,coordinate:R,payload:U,index:I}))}var dme=e=>null;dme.displayName="Cell";var hme=n(356),pme=n.n(hme),fme=["valueAccessor"],mme=["dataKey","clockWise","id","textBreakAll","zIndex"];function gme(){return gme=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gme.apply(null,arguments)}function xme(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var vme=e=>Array.isArray(e.value)?pme()(e.value):e.value,yme=(0,o.createContext)(void 0),bme=yme.Provider,wme=(0,o.createContext)(void 0),kme=wme.Provider;function Nme(e){var{valueAccessor:t=vme}=e,n=xme(e,fme),{dataKey:r,clockWise:a,id:i,textBreakAll:s,zIndex:l}=n,c=xme(n,mme),u=(0,o.useContext)(yme),d=(0,o.useContext)(wme),h=u||d;return h&&h.length?o.createElement(ede,{zIndex:null!==l&&void 0!==l?l:are.label},o.createElement(mue,{className:"recharts-label-list"},h.map((e,a)=>{var l,u=E1(r)?t(e,a):S6(e&&e.payload,r),d=E1(i)?{}:{id:"".concat(i,"-").concat(a)};return o.createElement(xde,gme({key:"label-".concat(a)},fce(e),c,d,{fill:null!==(l=n.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:u,textBreakAll:s,viewBox:e.viewBox,index:a,zIndex:0}))}))):null}function Sme(e){var{label:t}=e;return t?!0===t?o.createElement(Nme,{key:"labelList-implicit"}):o.isValidElement(t)||pde(t)?o.createElement(Nme,{key:"labelList-implicit",content:t}):"object"===typeof t?o.createElement(Nme,gme({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}Nme.displayName="LabelList";var jme=n(2086),Cme=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",Eme=null,Tme=null,Ime=e=>{if(e===Eme&&Array.isArray(Tme))return Tme;var t=[];return o.Children.forEach(e,e=>{E1(e)||((0,jme.isFragment)(e)?t=t.concat(Ime(e.props.children)):t.push(e))}),Tme=t,Eme=e,t};function Ame(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(e=>Cme(e)):[Cme(t)],Ime(e).forEach(e=>{var t=p1()(e,"type.displayName")||p1()(e,"type.name");t&&-1!==r.indexOf(t)&&n.push(e)}),n}var Ome=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),_me="Invariant failed";var Rme,Pme,Mme,Dme,Fme,Lme=n(9397),zme=n.n(Lme);function Bme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ume(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bme(Object(n),!0).forEach(function(t){Wme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bme(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wme(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vme(){return Vme=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vme.apply(null,arguments)}function Hme(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gme=(e,t,n,r,a)=>{var i,s=n-r;return i=m1(Rme||(Rme=Hme(["M ",",",""])),e,t),i+=m1(Pme||(Pme=Hme(["L ",",",""])),e+n,t),i+=m1(Mme||(Mme=Hme(["L ",",",""])),e+n-s/2,t+a),i+=m1(Dme||(Dme=Hme(["L ",",",""])),e+n-s/2-r,t+a),i+=m1(Fme||(Fme=Hme(["L ",","," Z"])),e,t)},Kme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qme=e=>{var t=oue(e,Kme),{x:n,y:r,upperWidth:a,lowerWidth:i,height:s,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,p=(0,o.useRef)(null),[f,m]=(0,o.useState)(-1),g=(0,o.useRef)(a),x=(0,o.useRef)(i),v=(0,o.useRef)(s),y=(0,o.useRef)(n),b=(0,o.useRef)(r),w=ufe(e,"trapezoid-");if((0,o.useEffect)(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&m(e)}catch($je){}},[]),n!==+n||r!==+r||a!==+a||i!==+i||s!==+s||0===a&&0===i||0===s)return null;var k=Gm("recharts-trapezoid",l);if(!h)return o.createElement("g",null,o.createElement("path",Vme({},fce(t),{className:k,d:Gme(n,r,a,i,s)})));var N=g.current,S=x.current,j=v.current,C=y.current,E=b.current,T="0px ".concat(-1===f?1:f,"px"),I="".concat(f,"px 0px"),A=zpe(["strokeDasharray"],u,c);return o.createElement(cfe,{animationId:w,key:w,canBegin:f>0,duration:u,easing:c,isActive:h,begin:d},e=>{var l=j1(N,a,e),c=j1(S,i,e),u=j1(j,s,e),d=j1(C,n,e),h=j1(E,r,e);p.current&&(g.current=l,x.current=c,v.current=u,y.current=d,b.current=h);var f=e>0?{transition:A,strokeDasharray:I}:{strokeDasharray:T};return o.createElement("path",Vme({},fce(t),{className:k,d:Gme(d,h,l,c,u),ref:p,style:Ume(Ume({},f),t.style)}))})};Math.abs,Math.atan2;const Xme=Math.cos,Yme=(Math.max,Math.min,Math.sin),$me=Math.sqrt,Qme=Math.PI,Jme=2*Qme;const Zme={draw(e,t){const n=$me(t/Qme);e.moveTo(n,0),e.arc(0,0,n,0,Jme)}},ege={draw(e,t){const n=$me(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},tge=$me(1/3),nge=2*tge,rge={draw(e,t){const n=$me(t/nge),r=n*tge;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},age={draw(e,t){const n=$me(t),r=-n/2;e.rect(r,r,n,n)}},ige=Yme(Qme/10)/Yme(7*Qme/10),sge=Yme(Jme/10)*ige,oge=-Xme(Jme/10)*ige,lge={draw(e,t){const n=$me(.8908130915292852*t),r=sge*n,a=oge*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const t=Jme*i/5,s=Xme(t),o=Yme(t);e.lineTo(o*n,-s*n),e.lineTo(s*r-o*a,o*r+s*a)}e.closePath()}},cge=$me(3),uge={draw(e,t){const n=-$me(t/(3*cge));e.moveTo(0,2*n),e.lineTo(-cge*n,-n),e.lineTo(cge*n,-n),e.closePath()}},dge=-.5,hge=$me(3)/2,pge=1/$me(12),fge=3*(pge/2+1),mge={draw(e,t){const n=$me(t/fge),r=n/2,a=n*pge,i=r,s=n*pge+n,o=-i,l=s;e.moveTo(r,a),e.lineTo(i,s),e.lineTo(o,l),e.lineTo(dge*r-hge*a,hge*r+dge*a),e.lineTo(dge*i-hge*s,hge*i+dge*s),e.lineTo(dge*o-hge*l,hge*o+dge*l),e.lineTo(dge*r+hge*a,dge*a-hge*r),e.lineTo(dge*i+hge*s,dge*s-hge*i),e.lineTo(dge*o+hge*l,dge*l-hge*o),e.closePath()}};$me(3),$me(3);var gge=["type","size","sizeType"];function xge(){return xge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xge.apply(null,arguments)}function vge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vge(Object(n),!0).forEach(function(t){bge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wge={symbolCircle:Zme,symbolCross:ege,symbolDiamond:rge,symbolSquare:age,symbolStar:lge,symbolTriangle:uge,symbolWye:mge},kge=Math.PI/180,Nge=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,gge),i=yge(yge({},a),{},{type:t,size:n,sizeType:r}),s="circle";"string"===typeof t&&(s=t);var{className:l,cx:c,cy:u}=i,d=fce(i);return y1(c)&&y1(u)&&y1(n)?o.createElement("path",xge({},d,{className:Gm("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:(()=>{var e=(e=>{var t="symbol".concat(T1(e));return wge[t]||Zme})(s),t=function(e,t){let n=null,r=fpe(a);function a(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"===typeof e?e:g6(e||Zme),t="function"===typeof t?t:g6(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:g6(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:g6(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type(e).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*kge;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.tan(r)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,r,s)),a=t();if(null!==a)return a})()})):null};Nge.registerSymbol=(e,t)=>{wge["symbol".concat(T1(e))]=t};var Sge=["option","shapeType","activeClassName"];function jge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jge(Object(n),!0).forEach(function(t){Ege(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ege(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tge(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return o.createElement(Lfe,n);case"trapezoid":return o.createElement(qme,n);case"sector":return o.createElement(Gfe,n);case"symbols":if(function(e){return"symbols"===e}(t))return o.createElement(Nge,n);break;case"curve":return o.createElement(Ipe,n);default:return null}}function Ige(e){var t,{option:n,shapeType:r,activeClassName:a="recharts-active-shape"}=e,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Sge);if((0,o.isValidElement)(n))t=(0,o.cloneElement)(n,Cge(Cge({},i),function(e){return(0,o.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)t=n(i,i.index);else if(zme()(n)&&"boolean"!==typeof n){var s=function(e,t){return Cge(Cge({},t),e)}(n,i);t=o.createElement(Tge,{shapeType:r,elementProps:s})}else{var l=i;t=o.createElement(Tge,{shapeType:r,elementProps:l})}return i.isActive?o.createElement(mue,{className:a},t):t}function Age(){return Age=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Age.apply(null,arguments)}function Oge(e){return o.createElement(Ige,Age({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var _ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n,r)=>{if(y1(e))return e;var a=y1(n)||E1(n);return a?e(n,r):(a||function(e){if(!e)throw new Error(_me)}(!1,"minPointSize callback function received a value with type of ".concat(typeof n,". Currently only numbers or null/undefined are supported.")),t)}},Rge=(e,t,n)=>{var r=s6();return(a,i)=>s=>{null===e||void 0===e||e(a,i,s),r(T5({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}},Pge=e=>{var t=s6();return(n,r)=>a=>{null===e||void 0===e||e(n,r,a),t(I5())}},Mge=(e,t,n)=>{var r=s6();return(a,i)=>s=>{null===e||void 0===e||e(a,i,s),r(O5({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}};function Dge(e){var{tooltipEntrySettings:t}=e,n=s6(),r=Z6(),a=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{r||(null===a.current?n(S5(t)):a.current!==t&&n(j5({prev:a.current,next:t})),a.current=t)},[t,n,r]),(0,o.useLayoutEffect)(()=>()=>{a.current&&(n(C5(a.current)),a.current=null)},[n]),null}var Fge=["children"];var Lge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},zge=(0,o.createContext)(Lge);function Bge(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Fge);return o.createElement(zge.Provider,{value:n},t)}function Uge(e,t){var n,r,a=u6(t=>qre(t,e)),i=u6(e=>$re(e,t)),s=null!==(n=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==n?n:Gre.allowDataOverflow,o=null!==(r=null===i||void 0===i?void 0:i.allowDataOverflow)&&void 0!==r?r:Xre.allowDataOverflow;return{needClip:s||o,needClipX:s,needClipY:o}}function Wge(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,a=eue(),{needClipX:i,needClipY:s,needClip:l}=Uge(t,n);if(!l||!a)return null;var{x:c,y:u,width:d,height:h}=a;return o.createElement("clipPath",{id:"clipPath-".concat(r)},o.createElement("rect",{x:i?c:c-d/2,y:s?u:u-h/2,width:i?d:2*d,height:s?h:2*h}))}var Vge=(e,t,n)=>{var r=null!==n&&void 0!==n?n:e;if(!E1(r))return N1(r,t,0)};function Hge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hge(Object(n),!0).forEach(function(t){Kge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qge(e,t){var n,r;return null!==(n=null===(r=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===r?void 0:r.xAxisId)&&void 0!==n?n:0}function Xge(e,t){var n,r;return null!==(n=null===(r=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===r?void 0:r.yAxisId)&&void 0!==n?n:0}var Yge,$ge=t6([rae,(e,t)=>t],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),Qge=t6([$ge],e=>null===e||void 0===e?void 0:e.maxBarSize),Jge=t6([i8,rae,qge,Xge,(e,t,n)=>n],(e,t,n,r,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===n:t.yAxisId===r).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),Zge=t6([Jge,e=>e.rootProps.barSize,(e,t)=>{var n=i8(e),r=qge(e,t),a=Xge(e,t);if(null!=r&&null!=a)return"horizontal"===n?Iie(e,"xAxis",r):Iie(e,"yAxis",a)}],(e,t,n)=>{var r=e.filter(Dre),a=e.filter(e=>null==e.stackId),i=r.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{}),s=Object.entries(i).map(e=>{var[r,a]=e;return{stackId:r,dataKeys:a.map(e=>e.dataKey),barSize:Vge(t,n,a[0].barSize)}});return[...s,...a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:Vge(t,n,e.barSize)}))]}),exe=(e,t,n)=>{var r,a,i=i8(e),s=qge(e,t),o=Xge(e,t);if(null!=s&&null!=o)return"horizontal"===i?(r=Die(e,"xAxis",s,n),a=Mie(e,"xAxis",s,n)):(r=Die(e,"yAxis",o,n),a=Mie(e,"yAxis",o,n)),M6(r,a)},txe=t6([Zge,Bne,e=>e.rootProps.barGap,Une,(e,t,n)=>{var r,a,i=$ge(e,t);if(null!=i){var s=qge(e,t),o=Xge(e,t);if(null!=s&&null!=o){var l,c,u=i8(e),d=Bne(e),{maxBarSize:h}=i,p=E1(h)?d:h;return"horizontal"===u?(l=Die(e,"xAxis",s,n),c=Mie(e,"xAxis",s,n)):(l=Die(e,"yAxis",o,n),c=Mie(e,"yAxis",o,n)),null!==(r=null!==(a=M6(l,c,!0))&&void 0!==a?a:p)&&void 0!==r?r:0}}},exe,Qge],(e,t,n,r,a,i,s)=>{var o=E1(s)?t:s,l=function(e,t,n,r,a){var i=r.length;if(!(i<1)){var s,o=N1(e,n,0,!0),l=[];if(L1(r[0].barSize)){var c=!1,u=n/i,d=r.reduce((e,t)=>e+(t.barSize||0),0);(d+=(i-1)*o)>=n&&(d-=(i-1)*o,o=0),d>=n&&u>0&&(c=!0,d=i*(u*=.9));var h={offset:((n-d)/2|0)-o,size:0};s=r.reduce((e,t)=>{var n,r=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?u:null!==(n=t.barSize)&&void 0!==n?n:0}}];return h=r[r.length-1].position,r},l)}else{var p=N1(t,n,0,!0);n-2*p-(i-1)*o<=0&&(o=0);var f=(n-2*p-(i-1)*o)/i;f>1&&(f>>=0);var m=L1(a)?Math.min(f,a):f;s=r.reduce((e,t,n)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(f+o)*n+(f-m)/2,size:m}}],l)}return s}}(n,r,a!==i?a:i,e,o);return a!==i&&null!=l&&(l=l.map(e=>Gge(Gge({},e),{},{position:Gge(Gge({},e.position),{},{offset:e.position.offset-a/2})}))),l}),nxe=t6([txe,$ge],(e,t)=>{if(null!=e&&null!=t){var n=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=n)return n.position}}),rxe=t6([(e,t,n)=>{var r=i8(e),a=qge(e,t),i=Xge(e,t);if(null!=a&&null!=i)return"horizontal"===r?Sae(e,"yAxis",i,n):Sae(e,"xAxis",a,n)},$ge],(e,t)=>{var n=Pre(t);if(e&&null!=n&&null!=t){var{stackId:r}=t;if(null!=r){var a=e[r];if(a){var{stackedData:i}=a;if(i)return i.find(e=>e.key===n)}}}}),axe=t6([Y6,Q6,(e,t,n)=>{var r=qge(e,t);if(null!=r)return Die(e,"xAxis",r,n)},(e,t,n)=>{var r=Xge(e,t);if(null!=r)return Die(e,"yAxis",r,n)},(e,t,n)=>{var r=qge(e,t);if(null!=r)return Mie(e,"xAxis",r,n)},(e,t,n)=>{var r=Xge(e,t);if(null!=r)return Mie(e,"yAxis",r,n)},nxe,i8,wne,exe,rxe,$ge,(e,t,n,r)=>r],(e,t,n,r,a,i,s,o,l,c,u,d,h)=>{var{chartData:p,dataStartIndex:f,dataEndIndex:m}=l;if(null!=d&&null!=s&&null!=t&&("horizontal"===o||"vertical"===o)&&null!=n&&null!=r&&null!=a&&null!=i&&null!=c){var g,{data:x}=d;if(null!=(g=null!=x&&x.length>0?x:null===p||void 0===p?void 0:p.slice(f,m+1)))return function(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:p,parentViewBox:f,dataStartIndex:m}=e,g="horizontal"===t?o:s,x=u?g.scale.domain():null,v=(e=>{var{numericAxis:t}=e,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]})({numericAxis:g}),y=g.scale(v);return d.map((e,d)=>{var g,b,w,k,N,S;if(u){var j=u[d+m];if(null==j)return null;g=((e,t)=>{if(!t||2!==t.length||!y1(t[0])||!y1(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!y1(e[0])||e[0]<n)&&(a[0]=n),(!y1(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a})(j,x)}else g=S6(e,n),Array.isArray(g)||(g=[v,g]);var C=_ge(r,Fxe)(g[1],d);if("horizontal"===t){var E,[T,I]=[o.scale(g[0]),o.scale(g[1])];b=O6({axis:s,ticks:l,bandSize:i,offset:a.offset,entry:e,index:d}),w=null!==(E=null!==I&&void 0!==I?I:T)&&void 0!==E?E:void 0,k=a.size;var A=T-I;if(N=x1(A)?0:A,S={x:b,y:h.top,width:k,height:h.height},Math.abs(C)>0&&Math.abs(N)<Math.abs(C)){var O=g1(N||C)*(Math.abs(C)-Math.abs(N));w-=O,N+=O}}else{var[_,R]=[s.scale(g[0]),s.scale(g[1])];if(b=_,w=O6({axis:o,ticks:c,bandSize:i,offset:a.offset,entry:e,index:d}),k=R-_,N=a.size,S={x:h.left,y:w,width:h.width,height:N},Math.abs(C)>0&&Math.abs(k)<Math.abs(C))k+=g1(k||C)*(Math.abs(C)-Math.abs(k))}return null==b||null==w||null==k||null==N?null:jxe(jxe({},e),{},{stackedBarStart:y,x:b,y:w,width:k,height:N,value:u?g:g[1],payload:e,background:S,tooltipPosition:{x:b+k/2,y:w+N/2},parentViewBox:f},p&&p[d]&&p[d].props)}).filter(Boolean)}({layout:o,barSettings:d,pos:s,parentViewBox:t,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:i,stackedData:u,displayedData:g,offset:e,cells:h,dataStartIndex:f})}});function ixe(e){var{legendPayload:t}=e,n=s6(),r=Z6(),a=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{r||(null===a.current?n(ole(t)):a.current!==t&&n(lle({prev:a.current,next:t})),a.current=t)},[n,r,t]),(0,o.useLayoutEffect)(()=>()=>{a.current&&(n(cle(a.current)),a.current=null)},[n]),null}function sxe(e){var{legendPayload:t}=e,n=s6(),r=u6(i8),a=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{"centric"!==r&&"radial"!==r||(null===a.current?n(ole(t)):a.current!==t&&n(lle({prev:a.current,next:t})),a.current=t)},[n,r,t]),(0,o.useLayoutEffect)(()=>()=>{a.current&&(n(cle(a.current)),a.current=null)},[n]),null}var oxe=null!==(Yge=l["useId".toString()])&&void 0!==Yge?Yge:()=>{var[e]=o.useState(()=>k1("uid-"));return e};var lxe=(0,o.createContext)(void 0),cxe=e=>{var{id:t,type:n,children:r}=e,a=function(e,t){var n=oxe();return t||(e?"".concat(e,"-").concat(n):n)}("recharts-".concat(n),t);return o.createElement(lxe.Provider,{value:a},r(a))};var uxe=e=>{var t=s6(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(Boe(e)):n.current!==e&&t(Uoe({prev:n.current,next:e})),n.current=e},[t,e]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(Woe(n.current)),n.current=null)},[t]),null},dxe=(0,o.memo)(uxe);function hxe(e){var t=s6();return(0,o.useLayoutEffect)(()=>(t(Voe(e)),()=>{t(Hoe(e))}),[t,e]),null}function pxe(e,t){return e&&"object"===typeof e&&"zIndex"in e&&"number"===typeof e.zIndex&&L1(e.zIndex)?e.zIndex:t}var fxe=["index"];function mxe(){return mxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mxe.apply(null,arguments)}var gxe=(0,o.createContext)(void 0),xxe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),vxe=e=>{var{index:t}=e,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,fxe),r=(e=>{var t=(0,o.useContext)(gxe);if(null!=t){var{stackId:n}=t;return"url(#".concat(xxe(n,e),")")}})(t);return o.createElement(mue,mxe({className:"recharts-bar-stack-layer",clipPath:r},n))},yxe=["onMouseEnter","onMouseLeave","onClick"],bxe=["value","background","tooltipPosition"],wxe=["id"],kxe=["onMouseEnter","onClick","onMouseLeave"];function Nxe(){return Nxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nxe.apply(null,arguments)}function Sxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sxe(Object(n),!0).forEach(function(t){Cxe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cxe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Exe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Txe=e=>{var{dataKey:t,name:n,fill:r,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:r,value:F6(n,t),payload:e}]},Ixe=o.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:r,fill:a,name:i,hide:s,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:a,dataKey:t,nameKey:void 0,name:F6(i,t),hide:s,type:c,color:a,unit:l,graphicalItemId:u}};return o.createElement(Dge,{tooltipEntrySettings:d})});function Axe(e){var t=u6(Wse),{data:n,dataKey:r,background:a,allOtherBarProps:i}=e,{onMouseEnter:s,onMouseLeave:l,onClick:c}=i,u=Exe(i,yxe),d=Rge(s,r,i.id),h=Pge(l),p=Mge(c,r,i.id);if(!a||null==n)return null;var f=pce(a);return o.createElement(ede,{zIndex:pxe(a,are.barBackground)},n.map((e,n)=>{var{value:i,background:s,tooltipPosition:l}=e,c=Exe(e,bxe);if(!s)return null;var m=d(e,n),g=h(e,n),x=p(e,n),v=jxe(jxe(jxe(jxe(jxe({option:a,isActive:String(n)===t},c),{},{fill:"#eee"},s),f),kde(u,e,n)),{},{onMouseEnter:m,onMouseLeave:g,onClick:x,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return o.createElement(Oge,Nxe({key:"background-bar-".concat(n)},v))}))}function Oxe(e){var{showLabels:t,children:n,rects:r}=e,a=null===r||void 0===r?void 0:r.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return jxe(jxe({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return o.createElement(bme,{value:t?a:void 0},n)}function _xe(e){var{shape:t,activeBar:n,baseProps:r,entry:a,index:i,dataKey:s}=e,l=u6(Wse),c=u6(Hse),u=n&&String(i)===l&&(null==c||s===c),d=u?n:t;return u?o.createElement(ede,{zIndex:are.activeBar},o.createElement(Oge,Nxe({},r,{name:String(r.name)},a,{isActive:u,option:d,index:i,dataKey:s}))):o.createElement(Oge,Nxe({},r,{name:String(r.name)},a,{isActive:u,option:d,index:i,dataKey:s}))}function Rxe(e){var{shape:t,baseProps:n,entry:r,index:a,dataKey:i}=e;return o.createElement(Oge,Nxe({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:a,dataKey:i}))}function Pxe(e){var t,{data:n,props:r}=e,a=null!==(t=hce(r))&&void 0!==t?t:{},{id:i}=a,s=Exe(a,wxe),{shape:l,dataKey:c,activeBar:u}=r,{onMouseEnter:d,onClick:h,onMouseLeave:p}=r,f=Exe(r,kxe),m=Rge(d,c,i),g=Pge(p),x=Mge(h,c,i);return n?o.createElement(o.Fragment,null,n.map((e,t)=>o.createElement(vxe,Nxe({index:t,key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},kde(f,e,t),{onMouseEnter:m(e,t),onMouseLeave:g(e,t),onClick:x(e,t)}),u?o.createElement(_xe,{shape:l,activeBar:u,baseProps:s,entry:e,index:t,dataKey:c}):o.createElement(Rxe,{shape:l,baseProps:s,entry:e,index:t,dataKey:c})))):null}function Mxe(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:a,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=n.current,p=ufe(t,"recharts-bar-"),[f,m]=(0,o.useState)(!1),g=!f,x=(0,o.useCallback)(()=>{"function"===typeof u&&u(),m(!1)},[u]),v=(0,o.useCallback)(()=>{"function"===typeof d&&d(),m(!0)},[d]);return o.createElement(Oxe,{showLabels:g,rects:r},o.createElement(cfe,{animationId:p,begin:s,duration:l,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:v,key:p},e=>{var i=1===e?r:null===r||void 0===r?void 0:r.map((t,n)=>{var r=h&&h[n];if(r)return jxe(jxe({},t),{},{x:j1(r.x,t.x,e),y:j1(r.y,t.y,e),width:j1(r.width,t.width,e),height:j1(r.height,t.height,e)});if("horizontal"===a){var i=j1(0,t.height,e),s=j1(t.stackedBarStart,t.y,e);return jxe(jxe({},t),{},{y:s,height:i})}var o=j1(0,t.width,e),l=j1(t.stackedBarStart,t.x,e);return jxe(jxe({},t),{},{width:o,x:l})});return e>0&&(n.current=null!==i&&void 0!==i?i:null),null==i?null:o.createElement(mue,null,o.createElement(Pxe,{props:t,data:i}))}),o.createElement(Sme,{label:t.label}),t.children)}function Dxe(e){var t=(0,o.useRef)(null);return o.createElement(Mxe,{previousRectanglesRef:t,props:e})}var Fxe=0,Lxe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:S6(e,t)}};class zxe extends o.PureComponent{render(){var{hide:e,data:t,dataKey:n,className:r,xAxisId:a,yAxisId:i,needClip:s,background:l,id:c}=this.props;if(e||null==t)return null;var u=Gm("recharts-bar",r),d=c;return o.createElement(mue,{className:u,id:c},s&&o.createElement("defs",null,o.createElement(Wge,{clipPathId:d,xAxisId:a,yAxisId:i})),o.createElement(mue,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(d,")"):void 0},o.createElement(Axe,{data:t,dataKey:n,background:l,allOtherBarProps:this.props}),o.createElement(Dxe,this.props)))}}var Bxe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Fxe,xAxisId:0,yAxisId:0,zIndex:are.bar};function Uxe(e){var t,{xAxisId:n,yAxisId:r,hide:a,legendType:i,minPointSize:s,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=e,{needClip:p}=Uge(n,r),f=s8(),m=Z6(),g=Ame(e.children,dme),x=u6(t=>axe(t,e.id,m,g));if("vertical"!==f&&"horizontal"!==f)return null;var v=null===x||void 0===x?void 0:x[0];return t=null==v||null==v.height||null==v.width?0:"vertical"===f?v.height/2:v.width/2,o.createElement(Bge,{xAxisId:n,yAxisId:r,data:x,dataPointFormatter:Lxe,errorBarOffset:t},o.createElement(zxe,Nxe({},e,{layout:f,needClip:p,data:x,xAxisId:n,yAxisId:r,hide:a,legendType:i,minPointSize:s,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function Wxe(e){var t=oue(e,Bxe),n=(e=>{var t=(0,o.useContext)(gxe);return null!=t?t.stackId:null!=e?I6(e):void 0})(t.stackId),r=Z6();return o.createElement(cxe,{id:t.id,type:"bar"},e=>o.createElement(o.Fragment,null,o.createElement(ixe,{legendPayload:Txe(t)}),o.createElement(Ixe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(dxe,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),o.createElement(ede,{zIndex:t.zIndex},o.createElement(Uxe,Nxe({},t,{id:e})))))}var Vxe=o.memo(Wxe,nce);function Hxe(){return Hxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hxe.apply(null,arguments)}Vxe.displayName="Bar";var Gxe=e=>{var{cx:t,cy:n,r:r,className:a}=e,i=Gm("recharts-dot",a);return y1(t)&&y1(n)&&y1(r)?o.createElement("circle",Hxe({},hce(e),wde(e),{className:i,cx:t,cy:n,r:r})):null},Kxe=["points"];function qxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qxe(Object(n),!0).forEach(function(t){Yxe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yxe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $xe(){return $xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$xe.apply(null,arguments)}function Qxe(e){var{option:t,dotProps:n,className:r}=e;if((0,o.isValidElement)(t))return(0,o.cloneElement)(t,n);if("function"===typeof t)return t(n);var a=Gm(r,"boolean"!==typeof t?t.className:""),i=null!==n&&void 0!==n?n:{},{points:s}=i,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(i,Kxe);return o.createElement(Gxe,$xe({},l,{className:a}))}function Jxe(e){var{points:t,dot:n,className:r,dotClassName:a,dataKey:i,baseProps:s,needClip:l,clipPathId:c,zIndex:u=are.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var d=Ome(n),h=function(e){return null==e?null:(0,o.isValidElement)(e)?fce(e.props):"object"!==typeof e||Array.isArray(e)?null:fce(e)}(n),p=t.map((e,r)=>{var l,c,u=Xxe(Xxe(Xxe({r:3},s),h),{},{index:r,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:i,value:e.value,payload:e.payload,points:t});return o.createElement(Qxe,{key:"dot-".concat(r),option:n,dotProps:u,className:a})}),f={};return l&&null!=c&&(f.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),o.createElement(ede,{zIndex:u},o.createElement(mue,$xe({className:r},f),p))}function Zxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zxe(Object(n),!0).forEach(function(t){tve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nve=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:a,dataKey:i,clipPath:s}=e;if(!1===a||null==t.x||null==t.y)return null;var l,c=eve(eve(eve({},{index:n,dataKey:i,cx:t.x,cy:t.y,r:4,fill:null!==r&&void 0!==r?r:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),pce(a)),wde(a));return l=(0,o.isValidElement)(a)?(0,o.cloneElement)(a,c):"function"===typeof a?a(c):o.createElement(Gxe,c),o.createElement(mue,{className:"recharts-active-dot",clipPath:s},l)};function rve(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:a,clipPath:i,zIndex:s=are.activeDot}=e,l=u6(Wse),c=u6(Qse);if(null==t||null==c)return null;var u=t.find(e=>c.includes(e.payload));return E1(u)?null:o.createElement(ede,{zIndex:s},o.createElement(nve,{point:u,childIndex:Number(l),mainColor:n,dataKey:a,activeDot:r,clipPath:i}))}var ave=(e,t,n,r)=>Die(e,"xAxis",t,r),ive=(e,t,n,r)=>Mie(e,"xAxis",t,r),sve=(e,t,n,r)=>Die(e,"yAxis",n,r),ove=(e,t,n,r)=>Mie(e,"yAxis",n,r),lve=t6([i8,ave,sve,ive,ove],(e,t,n,r,a)=>j6(e,"xAxis")?M6(t,r,!1):M6(n,a,!1));function cve(e){return"line"===e.type}var uve=t6([rae,(e,t,n,r,a)=>a],(e,t)=>e.filter(cve).find(e=>e.id===t)),dve=t6([i8,ave,sve,ive,ove,uve,lve,bne],(e,t,n,r,a,i,s,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(null!=i&&null!=t&&null!=n&&null!=r&&null!=a&&0!==r.length&&0!==a.length&&null!=s&&("horizontal"===e||"vertical"===e)){var d,{dataKey:h,data:p}=i;if(null!=(d=null!=p&&p.length>0?p:null===l||void 0===l?void 0:l.slice(c,u+1)))return function(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:i,dataKey:s,bandSize:o,displayedData:l}=e;return l.map((e,l)=>{var c=S6(e,s);if("horizontal"===t)return{x:A6({axis:n,ticks:a,bandSize:o,entry:e,index:l}),y:E1(c)?null:r.scale(c),value:c,payload:e};var u=E1(c)?null:n.scale(c),d=A6({axis:r,ticks:i,bandSize:o,entry:e,index:l});return null==u||null==d?null:{x:u,y:d,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataKey:h,bandSize:s,displayedData:d})}});function hve(e){var t=pce(e);if(null!=t){var{r:n,strokeWidth:r}=t,a=Number(n),i=Number(r);return(Number.isNaN(a)||a<0)&&(a=3),(Number.isNaN(i)||i<0)&&(i=2),{r:a,strokeWidth:i}}return{r:3,strokeWidth:2}}var pve=["id"],fve=["type","layout","connectNulls","needClip","shape"],mve=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function gve(){return gve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gve.apply(null,arguments)}function xve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xve(Object(n),!0).forEach(function(t){yve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bve(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wve=e=>{var{dataKey:t,name:n,stroke:r,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:r,value:F6(n,t),payload:e}]},kve=o.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:a,fill:i,name:s,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:F6(s,t),hide:l,type:u,color:r,unit:c,graphicalItemId:d}};return o.createElement(Dge,{tooltipEntrySettings:h})}),Nve=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Sve(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],a=0;a<t;++a)r=[...r,...n];return r}function jve(e){var{clipPathId:t,points:n,props:r}=e,{dot:a,dataKey:i,needClip:s}=r,{id:l}=r,c=hce(bve(r,pve));return o.createElement(Jxe,{points:n,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:c,needClip:s,clipPathId:t})}function Cve(e){var{showLabels:t,children:n,points:r}=e,a=(0,o.useMemo)(()=>null===r||void 0===r?void 0:r.map(e=>{var t,n,r={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return vve(vve({},r),{},{value:e.value,payload:e.payload,viewBox:r,parentViewBox:void 0,fill:void 0})}),[r]);return o.createElement(bme,{value:t?a:void 0},n)}function Eve(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:a,props:i}=e,{type:s,layout:l,connectNulls:c,needClip:u,shape:d}=i,h=vve(vve({},fce(bve(i,fve))),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:r,type:s,layout:l,connectNulls:c,strokeDasharray:null!==a&&void 0!==a?a:i.strokeDasharray});return o.createElement(o.Fragment,null,(null===r||void 0===r?void 0:r.length)>1&&o.createElement(Ige,gve({shapeType:"curve",option:d},h,{pathRef:n})),o.createElement(jve,{points:r,clipPathId:t,props:i}))}function Tve(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:f,height:m,onAnimationEnd:g,onAnimationStart:x}=n,v=a.current,y=ufe(s,"recharts-line-"),b=(0,o.useRef)(y),[w,k]=(0,o.useState)(!1),N=!w,S=(0,o.useCallback)(()=>{"function"===typeof g&&g(),k(!1)},[g]),j=(0,o.useCallback)(()=>{"function"===typeof x&&x(),k(!0)},[x]),C=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch($je){return 0}}(r.current),E=(0,o.useRef)(0);b.current!==y&&(E.current=i.current,b.current=y);var T=E.current;return o.createElement(Cve,{points:s,showLabels:N},n.children,o.createElement(cfe,{animationId:y,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:S,onAnimationStart:j,key:y},e=>{var u,d=j1(T,C+T,e),h=Math.min(d,C);if(c)if(l){var g="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));u=((e,t,n)=>{var r=n.reduce((e,t)=>e+t);if(!r)return Nve(t,e);for(var a=Math.floor(e/r),i=e%r,s=t-e,o=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>i){o=[...n.slice(0,l),i-c];break}var u=o.length%2===0?[0,s]:[s];return[...Sve(n,a),...o,...u].map(e=>"".concat(e,"px")).join(", ")})(h,C,g)}else u=Nve(C,h);else u=null==l?void 0:String(l);if(e>0&&C>0&&(a.current=s,i.current=Math.max(i.current,h)),v){var x=v.length/s.length,y=1===e?s:s.map((t,n)=>{var r=Math.floor(n*x);if(v[r]){var a=v[r];return vve(vve({},t),{},{x:j1(a.x,t.x,e),y:j1(a.y,t.y,e)})}return vve(vve({},t),{},p?{x:j1(2*f,t.x,e),y:j1(m/2,t.y,e)}:{x:t.x,y:t.y})});return a.current=y,o.createElement(Eve,{props:n,points:y,clipPathId:t,pathRef:r,strokeDasharray:u})}return o.createElement(Eve,{props:n,points:s,clipPathId:t,pathRef:r,strokeDasharray:u})}),o.createElement(Sme,{label:n.label}))}function Ive(e){var{clipPathId:t,props:n}=e,r=(0,o.useRef)(null),a=(0,o.useRef)(0),i=(0,o.useRef)(null);return o.createElement(Tve,{props:n,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:a,pathRef:i})}var Ave=(e,t)=>{var n,r;return{x:null!==(n=e.x)&&void 0!==n?n:void 0,y:null!==(r=e.y)&&void 0!==r?r:void 0,value:e.value,errorVal:S6(e.payload,t)}};class Ove extends o.Component{render(){var{hide:e,dot:t,points:n,className:r,xAxisId:a,yAxisId:i,top:s,left:l,width:c,height:u,id:d,needClip:h,zIndex:p}=this.props;if(e)return null;var f=Gm("recharts-line",r),m=d,{r:g,strokeWidth:x}=hve(t),v=Ome(t),y=2*g+x,b=h?"url(#clipPath-".concat(v?"":"dots-").concat(m,")"):void 0;return o.createElement(ede,{zIndex:p},o.createElement(mue,{className:f},h&&o.createElement("defs",null,o.createElement(Wge,{clipPathId:m,xAxisId:a,yAxisId:i}),!v&&o.createElement("clipPath",{id:"clipPath-dots-".concat(m)},o.createElement("rect",{x:l-y/2,y:s-y/2,width:c+y,height:u+y}))),o.createElement(Bge,{xAxisId:a,yAxisId:i,data:n,dataPointFormatter:Ave,errorBarOffset:0},o.createElement(Ive,{props:this.props,clipPathId:m}))),o.createElement(rve,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:b}))}}var _ve={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:are.line,type:"linear"};function Rve(e){var t=oue(e,_ve),{activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:f,yAxisId:m,id:g}=t,x=bve(t,mve),{needClip:v}=Uge(f,m),y=eue(),b=s8(),w=Z6(),k=u6(e=>dve(e,f,m,w,g));if("horizontal"!==b&&"vertical"!==b||null==k||null==y)return null;var{height:N,width:S,x:j,y:C}=y;return o.createElement(Ove,gve({},x,{id:g,connectNulls:l,dot:c,activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:i,animationEasing:s,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:f,yAxisId:m,points:k,layout:b,height:N,width:S,left:j,top:C,needClip:v}))}function Pve(e){var t=oue(e,_ve),n=Z6();return o.createElement(cxe,{id:t.id,type:"line"},e=>o.createElement(o.Fragment,null,o.createElement(ixe,{legendPayload:wve(t)}),o.createElement(kve,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(dxe,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),o.createElement(Rve,gve({},t,{id:e}))))}var Mve=o.memo(Pve,nce);Mve.displayName="Line";const Dve="".concat("https://srv1304213.hstgr.cloud/api","/api"),Fve=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.02;const r=[];let a=.95*e;for(let i=0;i<t;i++){const e=a,s=a*(1+(Math.random()-.5)*n*2),o=Math.max(e,s)*(1+.01*Math.random()),l=Math.min(e,s)*(1-.01*Math.random()),c=1e6*Math.random()+5e5,u=Math.abs(s-e),d=o-Math.max(e,s),h=Math.min(e,s)-l;r.push({time:i,date:new Date(Date.now()-36e5*(t-i)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),open:Math.round(100*e)/100,high:Math.round(100*o)/100,low:Math.round(100*l)/100,close:Math.round(100*s)/100,volume:Math.round(c),bullish:s>e,bodySize:u,upperWick:d,lowerWick:h}),a=s}for(let i=0;i<r.length;i++){if(i>=6){const e=r.slice(i-6,i+1).reduce((e,t)=>e+t.close,0);r[i].sma7=Math.round(e/7*100)/100}if(i>=20){const e=r.slice(i-20,i+1).reduce((e,t)=>e+t.close,0);r[i].sma21=Math.round(e/21*100)/100}if(i>=14){const e=[],t=[];for(let o=i-13;o<=i;o++){const n=r[o].close-r[o].open;n>0?e.push(n):t.push(Math.abs(n))}const n=e.length?e.reduce((e,t)=>e+t,0)/14:0,a=t.length?t.reduce((e,t)=>e+t,0)/14:0,s=0===a?100:n/a;r[i].rsi=Math.round(100-100/(1+s))}}return r},Lve=e=>{const{x:t,y:n,width:r,height:a,payload:i}=e;if(!i)return null;const{open:s,close:o,high:l,low:c,bullish:u}=i,d=u?"#10b981":"#f43f5e",h=Math.max(.6*r,4),p=l-c,f=e=>0===p?n:n+a-(e-c)/p*a,m=f(Math.max(s,o)),g=f(Math.min(s,o)),x=Math.max(g-m,1);return(0,zt.jsxs)("g",{children:[(0,zt.jsx)("line",{x1:t+r/2,y1:f(l),x2:t+r/2,y2:f(c),stroke:d,strokeWidth:1}),(0,zt.jsx)("rect",{x:t+(r-h)/2,y:m,width:h,height:x,fill:d,stroke:d,strokeWidth:1,rx:1})]})},zve=e=>{var t,n;let{symbol:r="BTC",title:a="Bitcoin / USD"}=e;const[i,s]=(0,o.useState)([]),[l,c]=(0,o.useState)(!0),[u,d]=(0,o.useState)(0),[h,p]=(0,o.useState)(0),[f,g]=(0,o.useState)({sma7:!0,sma21:!0,volume:!0}),[x,v]=(0,o.useState)("1H");(0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(Dve,"/market/").concat(r)),t=e.data.price;d(t),p(e.data.change_percent);const n=Fve(t,50,"BTC"===r?.015:.02);s(n)}catch(e){console.error("Error fetching chart data:",e);const t=Fve("BTC"===r?9e4:3e3,50);s(t),d("BTC"===r?9e4:3e3)}c(!1)};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[r]);const y=h>=0,b=(null===(t=i[i.length-1])||void 0===t?void 0:t.rsi)||50,w=b>70?"Overbought":b<30?"Oversold":"Neutral",k=e=>{let{active:t,payload:n}=e;if(t&&n&&n.length&&n[0].payload){var r,a,i,s;const e=n[0].payload;return(0,zt.jsxs)("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg px-4 py-3 text-xs font-mono",children:[(0,zt.jsx)("p",{className:"text-slate-400 mb-2",children:e.date}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Open:"}),(0,zt.jsxs)("span",{className:"text-white",children:["$",null===(r=e.open)||void 0===r?void 0:r.toLocaleString()]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"High:"}),(0,zt.jsxs)("span",{className:"text-emerald-400",children:["$",null===(a=e.high)||void 0===a?void 0:a.toLocaleString()]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"Low:"}),(0,zt.jsxs)("span",{className:"text-rose-400",children:["$",null===(i=e.low)||void 0===i?void 0:i.toLocaleString()]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"Close:"}),(0,zt.jsxs)("span",{className:e.bullish?"text-emerald-400":"text-rose-400",children:["$",null===(s=e.close)||void 0===s?void 0:s.toLocaleString()]}),e.rsi&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"RSI:"}),(0,zt.jsx)("span",{className:e.rsi>70?"text-rose-400":e.rsi<30?"text-emerald-400":"text-white",children:e.rsi})]})]})]})}return null};return(0,zt.jsx)("div",{"data-testid":"candlestick-chart",children:(0,zt.jsxs)(cx,{className:"h-full",accent:y?"teal":"rose",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h3",{className:"font-heading text-xl font-bold uppercase text-white",children:r}),(0,zt.jsxs)(yx,{variant:y?"success":"danger",children:[y?(0,zt.jsx)(mx,{size:12}):(0,zt.jsx)(kx,{size:12}),y?"+":"",h.toFixed(2),"%"]})]}),(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:a})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold text-white tabular-nums",children:["$",u.toLocaleString("en-US",{minimumFractionDigits:2})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2 justify-end mt-1",children:(0,zt.jsxs)(yx,{variant:b>70?"danger":b<30?"success":"default",children:["RSI: ",b," (",w,")"]})})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsx)("div",{className:"flex gap-1",children:["1H","4H","1D","1W"].map(e=>(0,zt.jsx)("button",{onClick:()=>v(e),className:"px-2 py-1 rounded text-xs font-mono transition-all ".concat(x===e?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"text-slate-500 hover:text-white"),children:e},e))}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)("button",{onClick:()=>g(e=>m(m({},e),{},{sma7:!e.sma7})),className:"px-2 py-1 rounded text-xs font-mono ".concat(f.sma7?"text-teal-400":"text-slate-600"),children:"SMA7"}),(0,zt.jsx)("button",{onClick:()=>g(e=>m(m({},e),{},{sma21:!e.sma21})),className:"px-2 py-1 rounded text-xs font-mono ".concat(f.sma21?"text-amber-400":"text-slate-600"),children:"SMA21"})]})]}),(0,zt.jsx)("div",{className:"h-[280px] w-full",children:l?(0,zt.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,zt.jsx)("div",{className:"animate-pulse text-slate-500 font-mono",children:"Loading chart..."})}):(0,zt.jsx)(X1,{width:"100%",height:"100%",children:(0,zt.jsxs)(hue,{data:i,margin:{top:10,right:10,left:0,bottom:0},children:[(0,zt.jsx)(nhe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},interval:"preserveStartEnd"}),(0,zt.jsx)(dhe,{domain:["auto","auto"],axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k"),width:50,orientation:"right"}),(0,zt.jsx)(ume,{content:(0,zt.jsx)(k,{})}),f.volume&&(0,zt.jsx)(Vxe,{dataKey:"volume",fill:"rgba(99, 102, 241, 0.2)",yAxisId:"volume"}),(0,zt.jsx)(Vxe,{dataKey:"high",shape:(0,zt.jsx)(Lve,{}),isAnimationActive:!1}),f.sma7&&(0,zt.jsx)(Mve,{type:"monotone",dataKey:"sma7",stroke:"#14b8a6",strokeWidth:1.5,dot:!1,connectNulls:!0}),f.sma21&&(0,zt.jsx)(Mve,{type:"monotone",dataKey:"sma21",stroke:"#f59e0b",strokeWidth:1.5,dot:!1,connectNulls:!0})]})})}),(0,zt.jsx)("div",{className:"mt-3 pt-3 border-t border-white/5",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500",children:"Detected Patterns:"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[i.length>0&&(null===(n=i[i.length-1])||void 0===n?void 0:n.bullish)&&(0,zt.jsx)(yx,{variant:"success",children:"Bullish Engulfing"}),b>70&&(0,zt.jsx)(yx,{variant:"warning",children:"RSI Overbought"}),b<30&&(0,zt.jsx)(yx,{variant:"success",children:"RSI Oversold"})]})]})})]})})},Bve=km("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),Uve=e=>{let{voiceActive:t,gestureReady:n,mood:r,riskLevel:a="LOW"}=e;return(0,zt.jsxs)(uu.div,{className:"flex items-center justify-center gap-4 flex-wrap",initial:{opacity:0,y:20},animate:{opacity:1,y:0},"data-testid":"status-bar",children:[(0,zt.jsxs)(yx,{variant:t?"active":"default",pulse:t,"data-testid":"voice-status",children:[(0,zt.jsx)(Tx,{size:14}),"Voice: ",t?"Active":"Inactive"]}),(0,zt.jsxs)(yx,{variant:n?"active":"default","data-testid":"gesture-status",children:[(0,zt.jsx)(Bve,{size:14}),"Gesture Ready"]}),(0,zt.jsxs)(yx,{variant:"FOCUSED"===r||"CONFIDENT"===r?"active":"STRESSED"===r?"danger":"FATIGUED"===r?"warning":"default","data-testid":"mood-status",children:[(0,zt.jsx)(Nm,{size:14}),"Mood: ",r||"FOCUSED"]}),(0,zt.jsxs)(yx,{variant:"LOW"===a?"success":"MODERATE"===a?"warning":"danger","data-testid":"risk-status",children:[(0,zt.jsx)(Im,{size:14}),"Risk: ",a]})]})},Wve=km("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Vve=km("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Hve=km("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Gve=e=>{let{onVoice:t,onGesture:n,onMood:r,onOracle:a,onMessage:i,voiceActive:s}=e;const[l,c]=(0,o.useState)(!0),u=[{id:"voice",icon:Tx,label:"Voice",onClick:t,variant:"teal"},{id:"gesture",icon:Bve,label:"Gesture",onClick:n,variant:"indigo"},{id:"mood",icon:Wve,label:"Mood",onClick:r,variant:"white"},{id:"oracle",icon:i1,label:"Oracle",onClick:a,variant:"indigo"},{id:"message",icon:Dm,label:"Message",onClick:i,variant:"teal"}];return(0,zt.jsxs)(uu.div,{className:"fixed bottom-0 left-0 right-0 z-50",initial:{y:100},animate:{y:0},transition:{delay:.3,type:"spring",stiffness:100},"data-testid":"control-panel",children:[(0,zt.jsx)("div",{className:"flex justify-center mb-1",children:(0,zt.jsx)("button",{onClick:()=>c(!l),className:"px-4 py-1 rounded-t-lg bg-black/60 backdrop-blur-xl border border-b-0 border-white/10 text-slate-400 hover:text-white transition-colors","data-testid":"control-panel-toggle",children:l?(0,zt.jsx)(Vve,{size:16}):(0,zt.jsx)(Hve,{size:16})})}),(0,zt.jsx)(rn,{children:l&&(0,zt.jsx)(uu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"bg-black/80 backdrop-blur-2xl border-t border-white/10",children:(0,zt.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0 pr-3 border-r border-white/10",children:[(0,zt.jsx)("span",{className:"h-2 w-2 rounded-full flex-shrink-0 ".concat(s?"bg-emerald-400 animate-pulse":"bg-slate-600")}),(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500 whitespace-nowrap",children:s?"Active":"Standby"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.map(e=>(0,zt.jsxs)("button",{onClick:e.onClick,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-mono transition-all whitespace-nowrap ".concat("teal"===e.variant?"bg-teal-500/10 text-teal-400 border border-teal-500/30 hover:bg-teal-500/20":"indigo"===e.variant?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/30 hover:bg-indigo-500/20":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10 hover:text-white"),"data-testid":"ctrl-".concat(e.id,"-btn"),children:[(0,zt.jsx)(e.icon,{size:14}),(0,zt.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id))}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0 pl-3 border-l border-white/10",children:[(0,zt.jsx)(Em,{size:14,className:"text-emerald-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-emerald-400 whitespace-nowrap",children:"Online"})]})]})})})}),!l&&(0,zt.jsx)("div",{className:"h-1 bg-gradient-to-r from-teal-500/50 via-indigo-500/50 to-teal-500/50"})]})},Kve=km("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qve=km("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Xve=km("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yve=km("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$ve=()=>{const{user:e,logout:t,isAuthenticated:n}=Lh();return n&&e?(0,zt.jsxs)("div",{className:"relative group",children:[(0,zt.jsxs)(uu.button,{className:"flex items-center gap-3 px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:border-teal-500/30 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":"user-menu-btn",children:[e.picture?(0,zt.jsx)("img",{src:e.picture,alt:e.name,className:"w-8 h-8 rounded-full border border-white/20"}):(0,zt.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-500/20 flex items-center justify-center",children:(0,zt.jsx)(Kve,{size:16,className:"text-teal-400"})}),(0,zt.jsxs)("div",{className:"text-left hidden md:block",children:[(0,zt.jsx)("p",{className:"text-sm font-medium text-white truncate max-w-[120px]",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono truncate max-w-[120px]",children:e.email})]})]}),(0,zt.jsx)("div",{className:"absolute right-0 top-full mt-2 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,zt.jsxs)("div",{className:"bg-black/90 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden shadow-2xl",children:[(0,zt.jsxs)("div",{className:"px-4 py-3 border-b border-white/5",children:[(0,zt.jsx)("p",{className:"text-sm font-medium text-white",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:e.email})]}),(0,zt.jsxs)("div",{className:"py-2",children:[(0,zt.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-slate-400 hover:text-white hover:bg-white/5 transition-colors",children:[(0,zt.jsx)(Kve,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Profile"})]}),(0,zt.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-slate-400 hover:text-white hover:bg-white/5 transition-colors",children:[(0,zt.jsx)(qve,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Portfolio"})]}),(0,zt.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-slate-400 hover:text-white hover:bg-white/5 transition-colors",children:[(0,zt.jsx)(Xve,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Settings"})]})]}),(0,zt.jsx)("div",{className:"border-t border-white/5 py-2",children:(0,zt.jsxs)("button",{onClick:t,className:"w-full flex items-center gap-3 px-4 py-2 text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 transition-colors","data-testid":"logout-btn",children:[(0,zt.jsx)(Yve,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:"Sign Out"})]})})]})})]}):null},Qve=km("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Jve=km("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Zve=km("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),eye=("".concat("https://srv1304213.hstgr.cloud/api","/api"),[{id:"trader_1",name:"CryptoWhale",avatar:"\ud83d\udc0b",winRate:78.5,totalPnL:145230,followers:12543,riskLevel:"MODERATE",monthlyReturn:24.5,trades:156,speciality:"Crypto Swing Trading",verified:!0},{id:"trader_2",name:"TechBull",avatar:"\ud83d\udc02",winRate:72.3,totalPnL:89450,followers:8921,riskLevel:"LOW",monthlyReturn:18.2,trades:243,speciality:"Tech Stocks",verified:!0},{id:"trader_3",name:"QuantMaster",avatar:"\ud83e\udd16",winRate:81.2,totalPnL:234500,followers:15678,riskLevel:"HIGH",monthlyReturn:32.8,trades:89,speciality:"Algorithmic Trading",verified:!0},{id:"trader_4",name:"SteadyEddie",avatar:"\ud83c\udfaf",winRate:68.9,totalPnL:56780,followers:5432,riskLevel:"LOW",monthlyReturn:12.4,trades:312,speciality:"Value Investing",verified:!1}]),tye=e=>{let{trader:t,onCopy:n,isCopying:r}=e;return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:(0,zt.jsxs)(cx,{accent:"white",className:"hover:border-teal-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500/20 to-indigo-500/20 flex items-center justify-center text-2xl border border-white/10",children:t.avatar}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white",children:t.name}),t.verified&&(0,zt.jsx)(Im,{size:14,className:"text-teal-400"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:t.speciality})]})]}),(0,zt.jsx)(yx,{variant:"LOW"===t.riskLevel?"success":"HIGH"===t.riskLevel?"danger":"warning",children:t.riskLevel})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,zt.jsxs)("div",{className:"text-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold text-emerald-400",children:[t.winRate,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Monthly"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold ".concat(t.monthlyReturn>=0?"text-emerald-400":"text-rose-400"),children:["+",t.monthlyReturn,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Total P&L"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold text-white",children:["$",(t.totalPnL/1e3).toFixed(0),"k"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-slate-500 text-xs font-mono",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(Tm,{size:12}),t.followers.toLocaleString()]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(mx,{size:12}),t.trades," trades"]})]}),(0,zt.jsxs)(fx,{onClick:()=>n(t),variant:r?"teal":"white",size:"sm","data-testid":"copy-trader-".concat(t.id),children:[r?(0,zt.jsx)(Qve,{size:14}):(0,zt.jsx)(Jve,{size:14}),r?"Copying":"Copy"]})]})]})})},nye=e=>{let{onClose:t}=e;const[n,r]=(0,o.useState)(eye),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)("all"),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(1e3),p=e=>{a.includes(e.id)?i(t=>t.filter(t=>t!==e.id)):u(e)},f=n.filter(e=>"all"===s||("low-risk"===s?"LOW"===e.riskLevel:"high-return"===s?e.monthlyReturn>20:"verified"!==s||e.verified));return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"social-trading-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Tm,{className:"text-teal-400"}),"Social Trading"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Copy top traders and mirror their strategies"})]}),t&&(0,zt.jsx)(fx,{onClick:t,variant:"ghost",size:"sm",children:(0,zt.jsx)(Um,{size:16})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,zt.jsxs)(cx,{accent:"teal",className:"text-center",children:[(0,zt.jsx)(Cm,{className:"text-teal-400 mx-auto mb-2",size:24}),(0,zt.jsx)("p",{className:"text-2xl font-mono font-bold text-white",children:n.length}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Top Traders"})]}),(0,zt.jsxs)(cx,{accent:"white",className:"text-center",children:[(0,zt.jsx)(Tm,{className:"text-indigo-400 mx-auto mb-2",size:24}),(0,zt.jsx)("p",{className:"text-2xl font-mono font-bold text-white",children:n.reduce((e,t)=>e+t.followers,0).toLocaleString()}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Total Followers"})]}),(0,zt.jsxs)(cx,{accent:"white",className:"text-center",children:[(0,zt.jsx)(mx,{className:"text-emerald-400 mx-auto mb-2",size:24}),(0,zt.jsxs)("p",{className:"text-2xl font-mono font-bold text-emerald-400",children:[(n.reduce((e,t)=>e+t.monthlyReturn,0)/n.length).toFixed(1),"%"]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Avg Monthly Return"})]}),(0,zt.jsxs)(cx,{accent:"white",className:"text-center",children:[(0,zt.jsx)(Jve,{className:"text-amber-400 mx-auto mb-2",size:24}),(0,zt.jsx)("p",{className:"text-2xl font-mono font-bold text-white",children:a.length}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono",children:"Traders Copied"})]})]}),(0,zt.jsx)("div",{className:"flex gap-2",children:["all","low-risk","high-return","verified"].map(e=>(0,zt.jsx)(fx,{onClick:()=>l(e),variant:s===e?"teal":"ghost",size:"sm",children:"all"===e?"All Traders":"low-risk"===e?"Low Risk":"high-return"===e?"High Return":"Verified"},e))}),(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(e=>(0,zt.jsx)(tye,{trader:e,onCopy:p,isCopying:a.includes(e.id)},e.id))}),(0,zt.jsx)(rn,{children:c&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>u(null),children:(0,zt.jsx)(uu.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(cx,{accent:"teal",children:[(0,zt.jsxs)("h3",{className:"font-heading text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Zve,{className:"text-teal-400"}),"Copy ",c.name]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Amount to Allocate (USD)"}),(0,zt.jsx)("input",{type:"number",value:d,onChange:e=>h(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white font-mono focus:border-teal-500/50 focus:outline-none",min:100,step:100})]}),(0,zt.jsx)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/30",children:(0,zt.jsx)("p",{className:"text-xs text-amber-400 font-mono",children:"\u26a0\ufe0f Copy trading involves risk. Past performance is not indicative of future results."})}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsx)(fx,{onClick:()=>u(null),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(fx,{onClick:()=>{c&&(i(e=>[...e,c.id]),u(null))},variant:"teal",className:"flex-1","data-testid":"confirm-copy-btn",children:[(0,zt.jsx)(Qve,{size:16}),"Start Copying"]})]})]})]})})})})]})};var rye=["axis"],aye=(0,o.forwardRef)((e,t)=>o.createElement(uue,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rye,tooltipPayloadSearcher:g3,categoricalChartProps:e,ref:t})),iye=(e,t,n)=>Die(e,"xAxis",qge(e,t),n),sye=(e,t,n)=>Mie(e,"xAxis",qge(e,t),n),oye=(e,t,n)=>Die(e,"yAxis",Xge(e,t),n),lye=(e,t,n)=>Mie(e,"yAxis",Xge(e,t),n),cye=t6([i8,iye,oye,sye,lye],(e,t,n,r,a)=>j6(e,"xAxis")?M6(t,r,!1):M6(n,a,!1)),uye=t6([rae,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),dye=e=>{var t=i8(e);return j6(t,"xAxis")?"yAxis":"xAxis"},hye=t6([uye,(e,t,n)=>Sae(e,dye(e),((e,t)=>"yAxis"===dye(e)?Xge(e,t):qge(e,t))(e,t),n)],(e,t)=>{var n;if(null!=e&&null!=t){var{stackId:r}=e,a=Pre(e);if(null!=r&&null!=a){var i=null===(n=t[r])||void 0===n?void 0:n.stackedData,s=null===i||void 0===i?void 0:i.find(e=>e.key===a);if(null!=s)return s.map(e=>[e[0],e[1]])}}}),pye=t6([i8,iye,oye,sye,lye,hye,wne,cye,uye,e=>e.rootProps.baseValue],(e,t,n,r,a,i,s,o,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=s;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=r&&null!=a&&0!==r.length&&0!==a.length&&null!=o){var p,{data:f}=l;if(null!=(p=f&&f.length>0?f:null===u||void 0===u?void 0:u.slice(d,h+1)))return function(e){var t,{areaSettings:{connectNulls:n,baseValue:r,dataKey:a},stackedData:i,layout:s,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:p,bandSize:f}=e,m=i&&i.length,g=Mye(s,o,r,l,c),x="horizontal"===s,v=!1,y=u.map((e,t)=>{var r,s,o;if(m)o=i[d+t];else{var u=S6(e,a);Array.isArray(u)?(o=u,v=!0):o=[g,u]}var y=null!==(r=null===(s=o)||void 0===s?void 0:s[1])&&void 0!==r?r:null,b=null==y||m&&!n&&null==S6(e,a);return x?{x:A6({axis:l,ticks:h,bandSize:f,entry:e,index:t}),y:b?null:c.scale(y),value:o,payload:e}:{x:b?null:l.scale(y),y:A6({axis:c,ticks:p,bandSize:f,entry:e,index:t}),value:o,payload:e}});t=m||v?y.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return x?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):x?c.scale(g):l.scale(g);return{points:y,baseLine:t,isRange:v}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataStartIndex:d,areaSettings:l,stackedData:i,displayedData:p,chartBaseValue:c,bandSize:o})}}),fye=["id"],mye=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function gye(){return gye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gye.apply(null,arguments)}function xye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function vye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vye(Object(n),!0).forEach(function(t){bye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wye(e,t){return e&&"none"!==e?e:t}var kye=e=>{var{dataKey:t,name:n,stroke:r,fill:a,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:wye(r,a),value:F6(n,t),payload:e}]},Nye=o.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:a,fill:i,name:s,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:F6(s,t),hide:l,type:u,color:wye(r,i),unit:c,graphicalItemId:d}};return o.createElement(Dge,{tooltipEntrySettings:h})});function Sye(e){var{clipPathId:t,points:n,props:r}=e,{needClip:a,dot:i,dataKey:s}=r,l=hce(r);return o.createElement(Jxe,{points:n,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:l,needClip:a,clipPathId:t})}function jye(e){var{showLabels:t,children:n,points:r}=e,a=r.map(e=>{var t,n,r={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return yye(yye({},r),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:r,fill:void 0})});return o.createElement(bme,{value:t?a:void 0},n)}function Cye(e){var{points:t,baseLine:n,needClip:r,clipPathId:a,props:i}=e,{layout:s,type:l,stroke:c,connectNulls:u,isRange:d}=i,{id:h}=i,p=xye(i,fye),f=hce(p),m=fce(p);return o.createElement(o.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&o.createElement(mue,{clipPath:r?"url(#clipPath-".concat(a,")"):void 0},o.createElement(Ipe,gye({},m,{id:h,points:t,connectNulls:u,type:l,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==c&&o.createElement(Ipe,gye({},f,{className:"recharts-area-curve",layout:s,type:l,connectNulls:u,fill:"none",points:t})),"none"!==c&&d&&o.createElement(Ipe,gye({},f,{className:"recharts-area-curve",layout:s,type:l,connectNulls:u,fill:"none",points:n}))),o.createElement(Sye,{points:t,props:p,clipPathId:a}))}function Eye(e){var t,n,{alpha:r,baseLine:a,points:i,strokeWidth:s}=e,l=null===(t=i[0])||void 0===t?void 0:t.y,c=null===(n=i[i.length-1])||void 0===n?void 0:n.y;if(!L1(l)||!L1(c))return null;var u=r*Math.abs(l-c),d=Math.max(...i.map(e=>e.x||0));return y1(a)?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(...a.map(e=>e.x||0),d)),y1(d)?o.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}function Tye(e){var t,n,{alpha:r,baseLine:a,points:i,strokeWidth:s}=e,l=null===(t=i[0])||void 0===t?void 0:t.x,c=null===(n=i[i.length-1])||void 0===n?void 0:n.x;if(!L1(l)||!L1(c))return null;var u=r*Math.abs(l-c),d=Math.max(...i.map(e=>e.y||0));return y1(a)?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(...a.map(e=>e.y||0),d)),y1(d)?o.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}function Iye(e){var{alpha:t,layout:n,points:r,baseLine:a,strokeWidth:i}=e;return"vertical"===n?o.createElement(Eye,{alpha:t,points:r,baseLine:a,strokeWidth:i}):o.createElement(Tye,{alpha:t,points:r,baseLine:a,strokeWidth:i})}function Aye(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i}=e,{points:s,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:p,onAnimationEnd:f}=r,m=ufe((0,o.useMemo)(()=>({points:s,baseLine:l}),[s,l]),"recharts-area-"),g=(()=>{var e=s8();if("horizontal"===e||"vertical"===e)return e})(),[x,v]=(0,o.useState)(!1),y=!x,b=(0,o.useCallback)(()=>{"function"===typeof f&&f(),v(!1)},[f]),w=(0,o.useCallback)(()=>{"function"===typeof p&&p(),v(!0)},[p]);if(null==g)return null;var k=a.current,N=i.current;return o.createElement(jye,{showLabels:y,points:s},r.children,o.createElement(cfe,{animationId:m,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:b,onAnimationStart:w,key:m},e=>{if(k){var u,d=k.length/s.length,h=1===e?s:s.map((t,n)=>{var r=Math.floor(n*d);if(k[r]){var a=k[r];return yye(yye({},t),{},{x:j1(a.x,t.x,e),y:j1(a.y,t.y,e)})}return t});return u=y1(l)?j1(N,l,e):E1(l)||x1(l)?j1(N,0,e):l.map((t,n)=>{var r=Math.floor(n*d);if(Array.isArray(N)&&N[r]){var a=N[r];return yye(yye({},t),{},{x:j1(a.x,t.x,e),y:j1(a.y,t.y,e)})}return t}),e>0&&(a.current=h,i.current=u),o.createElement(Cye,{points:h,baseLine:u,needClip:t,clipPathId:n,props:r})}return e>0&&(a.current=s,i.current=l),o.createElement(mue,null,c&&o.createElement("defs",null,o.createElement("clipPath",{id:"animationClipPath-".concat(n)},o.createElement(Iye,{alpha:e,points:s,baseLine:l,layout:g,strokeWidth:r.strokeWidth}))),o.createElement(mue,{clipPath:"url(#animationClipPath-".concat(n,")")},o.createElement(Cye,{points:s,baseLine:l,needClip:t,clipPathId:n,props:r})))}),o.createElement(Sme,{label:r.label}))}function Oye(e){var{needClip:t,clipPathId:n,props:r}=e,a=(0,o.useRef)(null),i=(0,o.useRef)();return o.createElement(Aye,{needClip:t,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i})}class _ye extends o.PureComponent{render(){var{hide:e,dot:t,points:n,className:r,top:a,left:i,needClip:s,xAxisId:l,yAxisId:c,width:u,height:d,id:h,baseLine:p,zIndex:f}=this.props;if(e)return null;var m=Gm("recharts-area",r),g=h,{r:x,strokeWidth:v}=hve(t),y=Ome(t),b=2*x+v,w=s?"url(#clipPath-".concat(y?"":"dots-").concat(g,")"):void 0;return o.createElement(ede,{zIndex:f},o.createElement(mue,{className:m},s&&o.createElement("defs",null,o.createElement(Wge,{clipPathId:g,xAxisId:l,yAxisId:c}),!y&&o.createElement("clipPath",{id:"clipPath-dots-".concat(g)},o.createElement("rect",{x:i-b/2,y:a-b/2,width:u+b,height:d+b}))),o.createElement(Oye,{needClip:s,clipPathId:g,props:this.props})),o.createElement(rve,{points:n,mainColor:wye(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:w}),this.props.isRange&&Array.isArray(p)&&o.createElement(rve,{points:p,mainColor:wye(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:w}))}}var Rye={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:are.area};function Pye(e){var t,n=oue(e,Rye),{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:p,legendType:f,stroke:m,xAxisId:g,yAxisId:x}=n,v=xye(n,mye),y=s8(),b=noe(),{needClip:w}=Uge(g,x),k=Z6(),{points:N,isRange:S,baseLine:j}=null!==(t=u6(t=>pye(t,e.id,k)))&&void 0!==t?t:{},C=eue();if("horizontal"!==y&&"vertical"!==y||null==C)return null;if("AreaChart"!==b&&"ComposedChart"!==b)return null;var{height:E,width:T,x:I,y:A}=C;return N&&N.length?o.createElement(_ye,gye({},v,{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:s,baseLine:j,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:E,hide:h,layout:y,isAnimationActive:"auto"===p?!Ble:p,isRange:S,legendType:f,needClip:w,points:N,stroke:m,width:T,left:I,top:A,xAxisId:g,yAxisId:x})):null}var Mye=(e,t,n,r,a)=>{var i=null!==n&&void 0!==n?n:t;if(y1(i))return i;var s="horizontal"===e?a:r,o=s.scale.domain();if("number"===s.type){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return"dataMin"===i?c:"dataMax"===i||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return"dataMin"===i?o[0]:"dataMax"===i?o[1]:o[0]};function Dye(e){var t=oue(e,Rye),n=Z6();return o.createElement(cxe,{id:t.id,type:"area"},e=>o.createElement(o.Fragment,null,o.createElement(ixe,{legendPayload:kye(t)}),o.createElement(Nye,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(dxe,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:I6(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),o.createElement(Pye,gye({},t,{id:e}))))}var Fye=o.memo(Dye,nce);function Lye(e){var t=s6();return(0,o.useEffect)(()=>{t(kle(e))},[t,e]),null}Fye.displayName="Area";var zye=["layout"];function Bye(){return Bye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bye.apply(null,arguments)}var Uye={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Wye=(0,o.forwardRef)(function(e,t){var n,r=oue(e.categoricalChartProps,Uye),{layout:a}=r,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(r,zye),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,d={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return o.createElement(Jle,{preloadedState:{options:d},reduxStoreName:null!==(n=r.id)&&void 0!==n?n:s},o.createElement(Zle,{chartData:r.data}),o.createElement(ace,{layout:a,margin:r.margin}),o.createElement(ice,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),o.createElement(Lye,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),o.createElement(aue,Bye({},i,{ref:t})))});function Vye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vye(Object(n),!0).forEach(function(t){Gye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kye=["item"],qye=Hye(Hye({},Uye),{},{layout:"centric",startAngle:0,endAngle:360}),Xye=(0,o.forwardRef)((e,t)=>{var n=oue(e,qye);return o.createElement(Wye,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Kye,tooltipPayloadSearcher:g3,categoricalChartProps:n,ref:t})}),Yye=e=>e.graphicalItems.polarItems,$ye=t6([_re,Rre],nae),Qye=t6([Yye,Zre,$ye],iae),Jye=t6([Qye],uae),Zye=t6([Jye,yne],hae),ebe=t6([Zye,Zre,Qye],fae),tbe=(t6([Zye,Zre,Qye],(e,t,n)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var r;return{value:S6(e,null!==(r=t.dataKey)&&void 0!==r?r:n.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:S6(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),()=>{}),nbe=t6([Zye,Zre,Qye,Oae,_re],Rae),rbe=t6([Zre,Tae,Iae,tbe,nbe,tbe,i8,_re],$ae),abe=t6([Zre,i8,Zye,ebe,Wne,_re,rbe],Zae),ibe=t6([abe,Zre,nie],aie);t6([Zre,abe,ibe,_re],sie);function sbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function obe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sbe(Object(n),!0).forEach(function(t){lbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sbe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lbe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cbe=t6([Yye,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),ube=[],dbe=(e,t,n)=>0===(null===n||void 0===n?void 0:n.length)?ube:n,hbe=t6([yne,cbe,dbe],(e,t,n)=>{var r,{chartData:a}=e;if(null!=t&&((r=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:a)&&r.length||null==n||(r=n.map(e=>obe(obe({},t.presentationProps),e.props))),null!=r))return r}),pbe=t6([hbe,cbe,dbe],(e,t,n)=>{if(null!=e&&null!=t)return e.map((e,r)=>{var a,i,s=S6(e,t.nameKey,t.name);return i=null!==n&&void 0!==n&&null!==(a=n[r])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?n[r].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:F6(s,t.dataKey),color:i,payload:e,type:t.legendType}})}),fbe=t6([hbe,cbe,dbe,Y6],(e,t,n,r)=>{if(null!=t&&null!=e)return function(e){var t,n,r,{pieSettings:a,displayedData:i,cells:s,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:u,dataKey:d,nameKey:h,tooltipType:p}=a,f=Math.abs(a.minAngle),m=Tbe(c,u),g=Math.abs(m),x=i.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,v=i.filter(e=>0!==S6(e,d,0)).length,y=g-v*f-(g>=360?v:v-1)*x,b=i.reduce((e,t)=>{var n=S6(t,d,0);return e+(y1(n)?n:0)},0);b>0&&(n=i.map((e,t)=>{var n,i=S6(e,d,0),u=S6(e,h,t),g=Ebe(a,o,e),v=(y1(i)?i:0)/b,w=bbe(bbe({},e),s&&s[t]&&s[t].props),k=(n=t?r.endAngle+g1(m)*x*(0!==i?1:0):c)+g1(m)*((0!==i?f:0)+v*y),N=(n+k)/2,S=(g.innerRadius+g.outerRadius)/2,j=[{name:u,value:i,payload:w,dataKey:d,type:p,graphicalItemId:a.id}],C=Zne(g.cx,g.cy,S,N);return r=bbe(bbe(bbe(bbe({},a.presentationProps),{},{percent:v,cornerRadius:"string"===typeof l?parseFloat(l):l,name:u,tooltipPayload:j,midAngle:N,middleRadius:S,tooltipPosition:C},w),g),{},{value:i,dataKey:d,startAngle:n,endAngle:k,payload:w,paddingAngle:g1(m)*x})}));return n}({offset:r,pieSettings:t,displayedData:e,cells:n})}),mbe=["key"],gbe=["onMouseEnter","onClick","onMouseLeave"],xbe=["id"],vbe=["id"];function ybe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ybe(Object(n),!0).forEach(function(t){wbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ybe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wbe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kbe(){return kbe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kbe.apply(null,arguments)}function Nbe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Sbe(e){var t=(0,o.useMemo)(()=>Ame(e.children,dme),[e.children]),n=u6(n=>pbe(n,e.id,t));return null==n?null:o.createElement(sxe,{legendPayload:n})}var jbe=o.memo(e=>{var{dataKey:t,nameKey:n,sectors:r,stroke:a,strokeWidth:i,fill:s,name:l,hide:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:r.map(e=>e.tooltipPayload),positions:r.map(e=>e.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:s,dataKey:t,nameKey:n,name:F6(l,t),hide:c,type:u,color:s,unit:"",graphicalItemId:d}};return o.createElement(Dge,{tooltipEntrySettings:h})}),Cbe=(e,t)=>e>t?"start":e<t?"end":"middle",Ebe=(e,t,n)=>{var{top:r,left:a,width:i,height:s}=t,o=ere(i,s),l=a+N1(e.cx,i,i/2),c=r+N1(e.cy,s,s/2),u=N1(e.innerRadius,o,0),d=((e,t,n)=>N1("function"===typeof t?t(e):t,n,.8*n))(n,e.outerRadius,o);return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:e.maxRadius||Math.sqrt(i*i+s*s)/2}},Tbe=(e,t)=>g1(t-e)*Math.min(Math.abs(t-e),360);function Ibe(e){var{sectors:t,props:n,showLabels:r}=e,{label:a,labelLine:i,dataKey:s}=n;if(!r||!a||!t)return null;var l=hce(n),c=pce(a),u=pce(i),d="object"===typeof a&&"offsetRadius"in a&&"number"===typeof a.offsetRadius&&a.offsetRadius||20,h=t.map((e,t)=>{var n=(e.startAngle+e.endAngle)/2,r=Zne(e.cx,e.cy,e.outerRadius+d,n),h=bbe(bbe(bbe(bbe({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:Cbe(r.x,e.cx)},r),p=bbe(bbe(bbe(bbe({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:t,points:[Zne(e.cx,e.cy,e.outerRadius,n),r],key:"line"});return o.createElement(ede,{zIndex:are.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},o.createElement(mue,null,i&&((e,t)=>{if(o.isValidElement(e))return o.cloneElement(e,t);if("function"===typeof e)return e(t);var n=Gm("recharts-pie-label-line","boolean"!==typeof e?e.className:""),{key:r}=t,a=Nbe(t,mbe);return o.createElement(Ipe,kbe({},a,{type:"linear",className:n}))})(i,p),((e,t,n)=>{if(o.isValidElement(e))return o.cloneElement(e,t);var r=n;if("function"===typeof e&&(r=e(t),o.isValidElement(r)))return r;var a,i=Gm("recharts-pie-label-text",(a=e)&&"object"===typeof a&&"className"in a&&"string"===typeof a.className?a.className:"");return o.createElement(Jue,kbe({},t,{alignmentBaseline:"middle",className:i}),r)})(a,h,S6(e,s))))});return o.createElement(mue,{className:"recharts-pie-labels"},h)}function Abe(e){var{sectors:t,props:n,showLabels:r}=e,{label:a}=n;return"object"===typeof a&&null!=a&&"position"in a?o.createElement(Sme,{label:a}):o.createElement(Ibe,{sectors:t,props:n,showLabels:r})}function Obe(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:a,shape:i,id:s}=e,l=u6(Wse),c=u6(Hse),u=u6(Gse),{onMouseEnter:d,onClick:h,onMouseLeave:p}=a,f=Nbe(a,gbe),m=Rge(d,a.dataKey,s),g=Pge(p),x=Mge(h,a.dataKey,s);return null==t||0===t.length?null:o.createElement(o.Fragment,null,t.map((e,d)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==t.length)return null;var h=null==u||u===s,p=String(d)===l&&(null==c||a.dataKey===c)&&h,v=n&&p?n:l?r:null,y=bbe(bbe({},e),{},{stroke:e.stroke,tabIndex:-1,[H6]:d,[G6]:s});return o.createElement(mue,kbe({key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(d),tabIndex:-1,className:"recharts-pie-sector"},kde(f,e,d),{onMouseEnter:m(e,d),onMouseLeave:g(e,d),onClick:x(e,d)}),o.createElement(Ige,kbe({option:null!==i&&void 0!==i?i:v,index:d,shapeType:"sector",isActive:p},y)))}))}function _be(e){var{showLabels:t,sectors:n,children:r}=e,a=(0,o.useMemo)(()=>t&&n?n.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[n,t]);return o.createElement(kme,{value:t?a:void 0},r)}function Rbe(e){var{props:t,previousSectorsRef:n,id:r}=e,{sectors:a,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=t,f=ufe(t,"recharts-pie-"),m=n.current,[g,x]=(0,o.useState)(!1),v=(0,o.useCallback)(()=>{"function"===typeof p&&p(),x(!1)},[p]),y=(0,o.useCallback)(()=>{"function"===typeof h&&h(),x(!0)},[h]);return o.createElement(_be,{showLabels:!g,sectors:a},o.createElement(cfe,{animationId:f,begin:s,duration:l,isActive:i,easing:c,onAnimationStart:y,onAnimationEnd:v,key:f},e=>{var i=[],s=a&&a[0],l=null===s||void 0===s?void 0:s.startAngle;return null===a||void 0===a||a.forEach((t,n)=>{var r=m&&m[n],a=n>0?p1()(t,"paddingAngle",0):0;if(r){var s=j1(r.endAngle-r.startAngle,t.endAngle-t.startAngle,e),o=bbe(bbe({},t),{},{startAngle:l+a,endAngle:l+s+a});i.push(o),l=o.endAngle}else{var{endAngle:c,startAngle:u}=t,d=j1(0,c-u,e),h=bbe(bbe({},t),{},{startAngle:l+a,endAngle:l+d+a});i.push(h),l=h.endAngle}}),n.current=i,o.createElement(mue,null,o.createElement(Obe,{sectors:i,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:r}))}),o.createElement(Abe,{showLabels:!g,sectors:a,props:t}),t.children)}var Pbe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:are.area};function Mbe(e){var{id:t}=e,n=Nbe(e,xbe),{hide:r,className:a,rootTabIndex:i}=e,s=(0,o.useMemo)(()=>Ame(e.children,dme),[e.children]),l=u6(e=>fbe(e,t,s)),c=(0,o.useRef)(null),u=Gm("recharts-pie",a);return r||null==l?(c.current=null,o.createElement(mue,{tabIndex:i,className:u})):o.createElement(ede,{zIndex:e.zIndex},o.createElement(jbe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),o.createElement(mue,{tabIndex:i,className:u},o.createElement(Rbe,{props:bbe(bbe({},n),{},{sectors:l}),previousSectorsRef:c,id:t})))}function Dbe(e){var t=oue(e,Pbe),{id:n}=t,r=Nbe(t,vbe),a=hce(r);return o.createElement(cxe,{id:n,type:"pie"},e=>o.createElement(o.Fragment,null,o.createElement(hxe,{type:"pie",id:e,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),o.createElement(Sbe,kbe({},r,{id:e})),o.createElement(Mbe,kbe({},r,{id:e}))))}Dbe.displayName="Pie";const Fbe=km("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Lbe=km("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),zbe=km("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Bbe="".concat("https://srv1304213.hstgr.cloud/api","/api"),Ube=["#14b8a6","#6366f1","#f59e0b","#f43f5e","#8b5cf6","#ec4899"],Wbe=e=>{let{isPaperTrading:t=!1}=e;const[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)(!0),[s,l]=(0,o.useState)("1M"),[c,u]=(0,o.useState)([]);if((0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(Bbe,"/portfolio/summary"),{withCredentials:!0});r(e.data);const t=[];let n=.85*e.data.total_value;for(let r=30;r>=0;r--){n*=1+.03*(Math.random()-.45),t.push({day:r,date:new Date(Date.now()-24*r*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Math.round(n),pnl:100*Math.round((n-.85*e.data.total_value)/100)})}u(t)}catch(e){console.error("Error fetching portfolio:",e),r({total_value:t?1e5:345678,daily_pnl:t?2340:8945,daily_pnl_percent:t?2.34:2.65,positions:[{symbol:"BTC",quantity:2.5,value:223500,price:89400},{symbol:"ETH",quantity:25,value:74750,price:2990},{symbol:"AAPL",quantity:500,value:124e3,price:248},{symbol:"NVDA",quantity:200,value:29e3,price:145}],cash_balance:t?5e4:75e3})}i(!1)};e();const n=setInterval(e,3e4);return()=>clearInterval(n)},[t]),a||!n)return(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-teal-500 border-t-transparent"})});const d=n.positions.reduce((e,t)=>e+t.value,0),h=n.positions.map(e=>({name:e.symbol,value:e.value,percent:(e.value/d*100).toFixed(1)}));h.push({name:"Cash",value:n.cash_balance,percent:(n.cash_balance/n.total_value*100).toFixed(1)});const p=e=>{let{active:t,payload:n}=e;var r;return t&&n&&n.length?(0,zt.jsxs)("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg px-3 py-2",children:[(0,zt.jsxs)("p",{className:"text-white font-mono text-sm",children:["$",null===(r=n[0].value)||void 0===r?void 0:r.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-slate-500 font-mono text-xs",children:n[0].payload.date})]}):null};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"portfolio-analytics",children:[(0,zt.jsx)("div",{className:"flex items-center justify-between",children:(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Fm,{className:"text-teal-400"}),"Portfolio Analytics",t&&(0,zt.jsx)(yx,{variant:"warning",children:"PAPER TRADING"})]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Track your performance and allocation"})]})}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,zt.jsxs)(cx,{accent:"teal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)(Wm,{className:"text-teal-400",size:20}),(0,zt.jsx)(yx,{variant:"active",children:"LIVE"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold text-white",children:["$",n.total_value.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"Total Value"})]}),(0,zt.jsxs)(cx,{accent:n.daily_pnl>=0?"teal":"rose",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[n.daily_pnl>=0?(0,zt.jsx)(Fbe,{className:"text-emerald-400",size:20}):(0,zt.jsx)(Lbe,{className:"text-rose-400",size:20}),(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500",children:"24H"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold ".concat(n.daily_pnl>=0?"text-emerald-400":"text-rose-400"),children:[n.daily_pnl>=0?"+":"","$",n.daily_pnl.toLocaleString()]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["Daily P&L (",n.daily_pnl_percent>=0?"+":"",n.daily_pnl_percent.toFixed(2),"%)"]})]}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)(jm,{className:"text-indigo-400",size:20}),(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-500",children:n.positions.length})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold text-white",children:["$",d.toLocaleString()]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"Invested"})]}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)(Fm,{className:"text-amber-400",size:20}),(0,zt.jsx)(zbe,{size:14,className:"text-slate-500"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-mono font-bold text-white",children:["$",n.cash_balance.toLocaleString()]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["Cash (",(n.cash_balance/n.total_value*100).toFixed(1),"%)"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,zt.jsx)("div",{className:"col-span-2",children:(0,zt.jsxs)(cx,{accent:"teal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold text-white",children:"Performance"}),(0,zt.jsx)("div",{className:"flex gap-1",children:["1W","1M","3M","1Y"].map(e=>(0,zt.jsx)("button",{onClick:()=>l(e),className:"px-2 py-1 rounded text-xs font-mono ".concat(s===e?"bg-teal-500/20 text-teal-400":"text-slate-500 hover:text-white"),children:e},e))})]}),(0,zt.jsx)("div",{className:"h-[200px]",children:(0,zt.jsx)(X1,{width:"100%",height:"100%",children:(0,zt.jsxs)(aye,{data:c,children:[(0,zt.jsx)("defs",{children:(0,zt.jsxs)("linearGradient",{id:"portfolioGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,zt.jsx)("stop",{offset:"0%",stopColor:"#14b8a6",stopOpacity:.3}),(0,zt.jsx)("stop",{offset:"100%",stopColor:"#14b8a6",stopOpacity:0})]})}),(0,zt.jsx)(nhe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},interval:"preserveStartEnd"}),(0,zt.jsx)(dhe,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k"),width:50}),(0,zt.jsx)(ume,{content:(0,zt.jsx)(p,{})}),(0,zt.jsx)(Fye,{type:"monotone",dataKey:"value",stroke:"#14b8a6",strokeWidth:2,fill:"url(#portfolioGradient)"})]})})})]})}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Mm,{size:18,className:"text-indigo-400"}),"Allocation"]}),(0,zt.jsx)("div",{className:"h-[180px]",children:(0,zt.jsx)(X1,{width:"100%",height:"100%",children:(0,zt.jsxs)(Xye,{children:[(0,zt.jsx)(Dbe,{data:h,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:h.map((e,t)=>(0,zt.jsx)(dme,{fill:Ube[t%Ube.length]},e.name))}),(0,zt.jsx)(ume,{formatter:e=>"$".concat(e.toLocaleString()),contentStyle:{background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"}})]})})}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:h.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,zt.jsx)("div",{className:"w-2 h-2 rounded-full",style:{background:Ube[t%Ube.length]}}),(0,zt.jsx)("span",{className:"text-slate-400 font-mono",children:e.name}),(0,zt.jsxs)("span",{className:"text-white font-mono ml-auto",children:[e.percent,"%"]})]},e.name))})]})]}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsx)("h3",{className:"font-heading text-lg font-semibold text-white mb-4",children:"Open Positions"}),(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("th",{className:"text-left text-xs font-mono text-slate-500 pb-3",children:"Asset"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Quantity"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Price"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Value"}),(0,zt.jsx)("th",{className:"text-right text-xs font-mono text-slate-500 pb-3",children:"Allocation"})]})}),(0,zt.jsx)("tbody",{children:n.positions.map((e,t)=>(0,zt.jsxs)(uu.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,zt.jsx)("td",{className:"py-3",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold",style:{background:Ube[t%Ube.length]+"20",color:Ube[t%Ube.length]},children:e.symbol.slice(0,2)}),(0,zt.jsx)("span",{className:"font-mono font-semibold text-white",children:e.symbol})]})}),(0,zt.jsx)("td",{className:"text-right font-mono text-white",children:e.quantity}),(0,zt.jsxs)("td",{className:"text-right font-mono text-slate-400",children:["$",e.price.toLocaleString()]}),(0,zt.jsxs)("td",{className:"text-right font-mono font-semibold text-white",children:["$",e.value.toLocaleString()]}),(0,zt.jsx)("td",{className:"text-right",children:(0,zt.jsxs)(yx,{variant:"default",children:[(e.value/n.total_value*100).toFixed(1),"%"]})})]},e.symbol))})]})})]})]})},Vbe=(0,o.createContext)(null),Hbe=e=>{let{children:t,initialBalance:n=1e5}=e;const[r,a]=(0,o.useState)(!0),[i,s]=(0,o.useState)(n),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)(0);(0,o.useEffect)(()=>{const e=localStorage.getItem("paperTrading");if(e){const t=JSON.parse(e);s(t.balance||n),c(t.positions||[]),d(t.trades||[]),p(t.totalPnL||0)}},[n]),(0,o.useEffect)(()=>{localStorage.setItem("paperTrading",JSON.stringify({balance:i,positions:l,trades:u,totalPnL:h}))},[i,l,u,h]);const f={isPaperMode:r,setIsPaperMode:a,balance:i,positions:l,trades:u,totalPnL:h,executeTrade:(e,t,n,r)=>{const a=n*r,o={id:Date.now(),action:e,symbol:t,quantity:n,price:r,cost:a,timestamp:(new Date).toISOString()};if("BUY"===e){if(a>i)return{success:!1,error:"Insufficient funds"};s(e=>e-a),c(e=>{const i=e.find(e=>e.symbol===t);if(i){const a=i.quantity+n,s=(i.avgPrice*i.quantity+r*n)/a;return e.map(e=>e.symbol===t?m(m({},e),{},{quantity:a,avgPrice:s,value:a*r}):e)}return[...e,{symbol:t,quantity:n,avgPrice:r,value:a}]})}else if("SELL"===e){const e=l.find(e=>e.symbol===t);if(!e||e.quantity<n)return{success:!1,error:"Insufficient position"};const i=(r-e.avgPrice)*n;s(e=>e+a),p(e=>e+i),c(a=>{const i=e.quantity-n;return 0===i?a.filter(e=>e.symbol!==t):a.map(e=>e.symbol===t?m(m({},e),{},{quantity:i,value:i*r}):e)}),o.pnl=i}return d(e=>[o,...e].slice(0,50)),{success:!0,trade:o}},resetAccount:()=>{s(n),c([]),d([]),p(0),localStorage.removeItem("paperTrading")}};return(0,zt.jsx)(Vbe.Provider,{value:f,children:t})},Gbe=km("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Kbe=km("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),qbe=km("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Xbe=km("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ybe=km("bell-ring",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]),$be=km("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Qbe=e=>{let{currentPrices:t={}}=e;const[n,r]=(0,o.useState)([]),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!0),[d,h]=(0,o.useState)({symbol:"BTC",condition:"above",price:1e5,enabled:!0});(0,o.useEffect)(()=>{const e=localStorage.getItem("priceAlerts");e&&r(JSON.parse(e))},[]),(0,o.useEffect)(()=>{localStorage.setItem("priceAlerts",JSON.stringify(n))},[n]),(0,o.useEffect)(()=>{n.forEach(e=>{if(!e.enabled)return;const n=t[e.symbol];if(!n)return;if(("above"===e.condition?n>=e.price:n<=e.price)&&!a.includes(e.id)){if(i(t=>[...t,e.id]),c){new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleWwsLGOb5+vhSwoOTIzf").play().catch(()=>{})}"Notification"in window&&"granted"===Notification.permission&&new Notification("Price Alert: ".concat(e.symbol),{body:"".concat(e.symbol," is now ").concat(e.condition," $").concat(e.price.toLocaleString()),icon:"/favicon.ico"})}})},[t,n,a,c]),(0,o.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"price-alerts-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Gbe,{className:"text-amber-400",size:20}),"Price Alerts"]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>u(!c),className:"p-2 rounded-lg transition-colors ".concat(c?"text-teal-400 bg-teal-500/10":"text-slate-500 bg-white/5"),"data-testid":"toggle-alert-sound",children:c?(0,zt.jsx)(Kbe,{size:16}):(0,zt.jsx)(qbe,{size:16})}),(0,zt.jsxs)(fx,{onClick:()=>l(!0),variant:"teal",size:"sm","data-testid":"add-alert-btn",children:[(0,zt.jsx)(Xbe,{size:14}),"Add Alert"]})]})]}),(0,zt.jsx)(rn,{children:n.filter(e=>a.includes(e.id)).map(e=>(0,zt.jsx)(uu.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/30",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(Ybe,{className:"text-amber-400 animate-pulse",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"font-mono font-semibold text-amber-400",children:[e.symbol," Alert Triggered!"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-400",children:["Price ",e.condition," $",e.price.toLocaleString()]})]})]}),(0,zt.jsx)("button",{onClick:()=>(e=>{i(t=>t.filter(t=>t!==e))})(e.id),className:"p-2 text-slate-500 hover:text-white transition-colors",children:(0,zt.jsx)(Um,{size:16})})]})},"triggered-".concat(e.id)))}),(0,zt.jsx)(cx,{accent:"white",children:0===n.length?(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,zt.jsx)(Gbe,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,zt.jsx)("p",{className:"text-sm font-mono",children:"No alerts set"}),(0,zt.jsx)("p",{className:"text-xs",children:'Click "Add Alert" to create one'})]}):(0,zt.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors ".concat(e.enabled?"bg-white/5":"bg-white/2 opacity-50"," ").concat(a.includes(e.id)?"ring-1 ring-amber-500/50":""),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("button",{onClick:()=>(e=>{r(t=>t.map(t=>t.id===e?m(m({},t),{},{enabled:!t.enabled}):t))})(e.id),className:"w-8 h-8 rounded-lg flex items-center justify-center transition-colors ".concat(e.enabled?"bg-teal-500/20 text-teal-400":"bg-white/5 text-slate-600"),children:e.enabled?(0,zt.jsx)(Qve,{size:14}):(0,zt.jsx)(Um,{size:14})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"font-mono font-semibold text-white",children:e.symbol}),(0,zt.jsxs)(yx,{variant:"above"===e.condition?"success":"danger",children:["above"===e.condition?(0,zt.jsx)(mx,{size:10}):(0,zt.jsx)(kx,{size:10}),e.condition]})]}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500",children:["$",e.price.toLocaleString(),t[e.symbol]&&(0,zt.jsxs)("span",{className:"ml-2 text-slate-600",children:["(now: $",t[e.symbol].toLocaleString(),")"]})]})]})]}),(0,zt.jsx)("button",{onClick:()=>(e=>{r(t=>t.filter(t=>t.id!==e)),i(t=>t.filter(t=>t!==e))})(e.id),className:"p-2 text-slate-500 hover:text-rose-400 transition-colors","data-testid":"delete-alert-".concat(e.id),children:(0,zt.jsx)($be,{size:14})})]},e.id))})}),(0,zt.jsx)(rn,{children:s&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>l(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(cx,{accent:"teal",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Xbe,{className:"text-teal-400"}),"New Price Alert"]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex gap-2 flex-wrap",children:["BTC","ETH","SOL","AAPL","NVDA","SPY"].map(e=>(0,zt.jsx)("button",{onClick:()=>h(t=>m(m({},t),{},{symbol:e})),className:"px-3 py-2 rounded-lg text-xs font-mono transition-all ".concat(d.symbol===e?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:e},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Condition"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)("button",{onClick:()=>h(e=>m(m({},e),{},{condition:"above"})),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-mono transition-all ".concat("above"===d.condition?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:[(0,zt.jsx)(mx,{size:14}),"Above"]}),(0,zt.jsxs)("button",{onClick:()=>h(e=>m(m({},e),{},{condition:"below"})),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-mono transition-all ".concat("below"===d.condition?"bg-rose-500/20 text-rose-400 border border-rose-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:[(0,zt.jsx)(kx,{size:14}),"Below"]})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Target Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:d.price,onChange:e=>h(t=>m(m({},t),{},{price:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white font-mono focus:border-teal-500/50 focus:outline-none",min:0,step:"BTC"===d.symbol?1e3:"ETH"===d.symbol?100:1})]}),(0,zt.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,zt.jsx)(fx,{onClick:()=>l(!1),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(fx,{onClick:()=>{const e=m(m({},d),{},{id:Date.now(),createdAt:(new Date).toISOString()});r(t=>[...t,e]),l(!1),h({symbol:"BTC",condition:"above",price:1e5,enabled:!0})},variant:"teal",className:"flex-1","data-testid":"confirm-add-alert",children:[(0,zt.jsx)(Qve,{size:16}),"Create Alert"]})]})]})]})})})})]})},Jbe=km("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Zbe=km("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),ewe=km("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),twe=e=>{let{currentPrices:t={},onExecuteOrder:n}=e;const[r,a]=(0,o.useState)("limit"),[i,s]=(0,o.useState)("BUY"),[l,c]=(0,o.useState)("BTC"),[u,d]=(0,o.useState)(.1),[h,p]=(0,o.useState)(0),[f,m]=(0,o.useState)(0),[g,x]=(0,o.useState)(0),[v,y]=(0,o.useState)(5),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)([]),S=t[l]||0,j=[{id:"limit",label:"Limit",icon:Jbe,desc:"Execute at specific price"},{id:"stop-loss",label:"Stop Loss",icon:s1,desc:"Sell when price drops to"},{id:"take-profit",label:"Take Profit",icon:mx,desc:"Sell when price rises to"},{id:"trailing-stop",label:"Trailing Stop",icon:zbe,desc:"Dynamic stop loss"}];o.useEffect(()=>{S>0&&(p(Math.round(S*("BUY"===i?.98:1.02))),m(Math.round(.95*S)),x(Math.round(1.1*S)))},[S,l,i]);const C=()=>u*("limit"===r?h:S);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"advanced-orders-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Zbe,{className:"text-indigo-400",size:20}),"Advanced Orders"]}),(0,zt.jsxs)(yx,{variant:"info",children:[(0,zt.jsx)(ewe,{size:10}),k.length," pending"]})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:j.map(e=>(0,zt.jsxs)("button",{onClick:()=>a(e.id),className:"p-3 rounded-xl text-left transition-all ".concat(r===e.id?"bg-indigo-500/20 border border-indigo-500/30 text-indigo-400":"bg-white/5 border border-white/10 text-slate-400 hover:border-white/20"),"data-testid":"order-type-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:18,className:"mb-1"}),(0,zt.jsx)("p",{className:"font-mono text-sm font-semibold",children:e.label}),(0,zt.jsx)("p",{className:"text-xs opacity-60",children:e.desc})]},e.id))}),(0,zt.jsx)(cx,{accent:"indigo",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)(fx,{onClick:()=>s("BUY"),variant:"BUY"===i?"teal":"ghost",className:"flex-1",children:[(0,zt.jsx)(mx,{size:16}),"BUY"]}),(0,zt.jsxs)(fx,{onClick:()=>s("SELL"),variant:"SELL"===i?"rose":"ghost",className:"flex-1",children:[(0,zt.jsx)(kx,{size:16}),"SELL"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex gap-2 flex-wrap",children:["BTC","ETH","AAPL","NVDA","SPY"].map(e=>(0,zt.jsx)("button",{onClick:()=>c(e),className:"px-3 py-2 rounded-lg text-xs font-mono transition-all ".concat(l===e?"bg-indigo-500/20 text-indigo-400 border border-indigo-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:e},e))}),S>0&&(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500 mt-1",children:["Current: $",S.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Quantity"}),(0,zt.jsx)("input",{type:"number",value:u,onChange:e=>d(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",step:"BTC"===l?.01:"ETH"===l?.1:1,min:0})]}),"limit"===r&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Limit Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:h,onChange:e=>p(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",min:0}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-600 mt-1",children:["BUY"===i?"Order executes when price drops to":"Order executes when price rises to"," this level"]})]}),"stop-loss"===r&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Stop Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:f,onChange:e=>m(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",min:0}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-rose-400/60 mt-1",children:["\u26a0\ufe0f Position will be sold if price drops to $",f.toLocaleString()]})]}),"take-profit"===r&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Take Profit Price (USD)"}),(0,zt.jsx)("input",{type:"number",value:g,onChange:e=>x(Number(e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono focus:border-indigo-500/50 focus:outline-none",min:0}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-emerald-400/60 mt-1",children:["\u2713 Position will be sold if price rises to $",g.toLocaleString()]})]}),"trailing-stop"===r&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Trailing Stop (%)"}),(0,zt.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,zt.jsx)("input",{type:"range",value:v,onChange:e=>y(Number(e.target.value)),className:"flex-1",min:1,max:20,step:.5}),(0,zt.jsxs)("span",{className:"font-mono text-white w-16 text-right",children:[v,"%"]})]}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-amber-400/60 mt-1",children:["Stop price will trail ",v,"% below highest price"]})]}),(0,zt.jsx)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Order Value:"}),(0,zt.jsxs)("span",{className:"font-mono font-semibold text-white",children:["$",C().toLocaleString(void 0,{maximumFractionDigits:2})]})]})}),(0,zt.jsxs)(fx,{onClick:()=>w(!0),variant:"BUY"===i?"teal":"rose",className:"w-full","data-testid":"place-order-btn",children:[(0,zt.jsx)(Zbe,{size:16}),"Place ",r.replace("-"," ").toUpperCase()," Order"]})]})}),k.length>0&&(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white mb-3",children:"Pending Orders"}),(0,zt.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(yx,{variant:"BUY"===e.side?"success":"danger",children:e.side}),(0,zt.jsx)("span",{className:"font-mono font-semibold text-white",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["x",e.quantity]})]}),(0,zt.jsxs)("p",{className:"text-xs font-mono text-slate-500 mt-1",children:[e.type,": ",e.limitPrice&&"@ $".concat(e.limitPrice.toLocaleString()),e.stopPrice&&"Stop @ $".concat(e.stopPrice.toLocaleString()),e.takeProfitPrice&&"TP @ $".concat(e.takeProfitPrice.toLocaleString()),e.trailingPercent&&"Trailing ".concat(e.trailingPercent,"%")]})]}),(0,zt.jsx)("button",{onClick:()=>(e=>{N(t=>t.filter(t=>t.id!==e))})(e.id),className:"p-2 text-slate-500 hover:text-rose-400 transition-colors",children:(0,zt.jsx)(Um,{size:16})})]},e.id))})]}),(0,zt.jsx)(rn,{children:b&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>w(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(cx,{accent:"BUY"===i?"teal":"rose",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4",children:["Confirm ",r.replace("-"," ")," Order"]}),(0,zt.jsxs)("div",{className:"space-y-2 mb-4 font-mono text-sm",children:[(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Side:"}),(0,zt.jsx)("span",{className:"BUY"===i?"text-emerald-400":"text-rose-400",children:i})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Symbol:"}),(0,zt.jsx)("span",{className:"text-white",children:l})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Quantity:"}),(0,zt.jsx)("span",{className:"text-white",children:u})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Type:"}),(0,zt.jsx)("span",{className:"text-white",children:r})]}),(0,zt.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Est. Value:"}),(0,zt.jsxs)("span",{className:"text-white",children:["$",C().toLocaleString()]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsx)(fx,{onClick:()=>w(!1),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(fx,{onClick:()=>{const e={id:Date.now(),type:r,side:i,symbol:l,quantity:u,limitPrice:"limit"===r?h:null,stopPrice:["stop-loss","trailing-stop"].includes(r)?f:null,takeProfitPrice:"take-profit"===r?g:null,trailingPercent:"trailing-stop"===r?v:null,status:"pending",createdAt:(new Date).toISOString(),currentPrice:S};N(t=>[...t,e]),w(!1),n&&n(e)},variant:"BUY"===i?"teal":"rose",className:"flex-1",children:[(0,zt.jsx)(Qve,{size:16}),"Confirm"]})]})]})})})})]})},nwe=km("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),rwe=km("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),awe=km("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),iwe=km("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),swe=km("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),owe=[{id:1,title:"Bitcoin Surges Past $90,000 Amid Institutional Buying",source:"CryptoNews",time:"2 min ago",sentiment:"bullish",category:"crypto",impact:"high",symbols:["BTC"]},{id:2,title:"Federal Reserve Signals Potential Rate Cut in Q1 2025",source:"MarketWatch",time:"15 min ago",sentiment:"bullish",category:"macro",impact:"high",symbols:["SPY","BTC","ETH"]},{id:3,title:"Ethereum 2.0 Staking Reaches New All-Time High",source:"DeFi Pulse",time:"32 min ago",sentiment:"bullish",category:"crypto",impact:"medium",symbols:["ETH"]},{id:4,title:"Apple Reports Record Q4 Revenue, Stock Up 3%",source:"CNBC",time:"1 hour ago",sentiment:"bullish",category:"stocks",impact:"medium",symbols:["AAPL"]},{id:5,title:"SEC Delays Decision on Spot ETF Applications",source:"Reuters",time:"2 hours ago",sentiment:"bearish",category:"regulatory",impact:"medium",symbols:["BTC","ETH"]},{id:6,title:"NVIDIA Unveils Next-Gen AI Chips, Shares Rally",source:"TechCrunch",time:"3 hours ago",sentiment:"bullish",category:"stocks",impact:"high",symbols:["NVDA"]},{id:7,title:"DeFi Protocol Reports Security Vulnerability",source:"The Block",time:"4 hours ago",sentiment:"bearish",category:"crypto",impact:"low",symbols:["ETH"]},{id:8,title:"Global Markets Rally on Positive Economic Data",source:"Bloomberg",time:"5 hours ago",sentiment:"bullish",category:"macro",impact:"medium",symbols:["SPY"]}],lwe=e=>{let{filterSymbol:t=null}=e;const[n,r]=(0,o.useState)(owe),[a,i]=(0,o.useState)("all"),[s,l]=(0,o.useState)(!1),c=n.filter(e=>!(t&&!e.symbols.includes(t))&&("all"===a||("bullish"===a?"bullish"===e.sentiment:"bearish"===a?"bearish"===e.sentiment:"high-impact"!==a||"high"===e.impact)));return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"news-feed-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(rwe,{className:"text-amber-400",size:20}),"Live News Feed"]}),(0,zt.jsxs)(fx,{onClick:()=>{l(!0),setTimeout(()=>{const e=[...owe].sort(()=>Math.random()-.5).map((e,t)=>m(m({},e),{},{id:Date.now()+t,time:0===t?"Just now":"".concat(5*(t+1)," min ago")}));r(e),l(!1)},1e3)},variant:"ghost",size:"sm",disabled:s,"data-testid":"refresh-news-btn",children:[(0,zt.jsx)(awe,{size:14,className:s?"animate-spin":""}),"Refresh"]})]}),(0,zt.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:["all","bullish","bearish","high-impact"].map(e=>(0,zt.jsx)("button",{onClick:()=>i(e),className:"px-3 py-1.5 rounded-lg text-xs font-mono whitespace-nowrap transition-all ".concat(a===e?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-white/5 text-slate-500 border border-white/10 hover:text-white"),children:"all"===e?"All News":"bullish"===e?"\ud83d\udcc8 Bullish":"bearish"===e?"\ud83d\udcc9 Bearish":"\ud83d\udd25 High Impact"},e))}),(0,zt.jsxs)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:[(0,zt.jsx)(rn,{children:c.map((e,t)=>{return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},children:(0,zt.jsx)(cx,{accent:"bullish"===e.sentiment?"teal":"bearish"===e.sentiment?"rose":"white",className:"hover:border-white/20 transition-all cursor-pointer group",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("h4",{className:"font-medium text-white group-hover:text-teal-400 transition-colors flex items-start gap-2",children:[(r=e.sentiment,"bullish"===r?(0,zt.jsx)(mx,{size:12,className:"text-emerald-400"}):"bearish"===r?(0,zt.jsx)(kx,{size:12,className:"text-rose-400"}):null),(0,zt.jsx)("span",{className:"flex-1",children:e.title}),(0,zt.jsx)(iwe,{size:14,className:"text-slate-600 group-hover:text-teal-400 flex-shrink-0 mt-1"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(swe,{size:10}),e.source]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(ewe,{size:10}),e.time]})]}),(n=e.impact,"high"===n?(0,zt.jsxs)(yx,{variant:"danger",children:[(0,zt.jsx)(nwe,{size:10}),"High"]}):"medium"===n?(0,zt.jsx)(yx,{variant:"warning",children:"Medium"}):(0,zt.jsx)(yx,{variant:"default",children:"Low"}))]}),(0,zt.jsx)("div",{className:"flex gap-1",children:e.symbols.map(e=>(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-mono bg-white/5 text-slate-400",children:e},e))})]})})},e.id);var n,r})}),0===c.length&&(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,zt.jsx)(rwe,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,zt.jsx)("p",{className:"text-sm font-mono",children:"No news matching filters"})]})]}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white mb-3 text-sm",children:"Market Sentiment"}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 w-32",children:(0,zt.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 h-2 rounded-full transition-all",style:{width:"".concat(n.filter(e=>"bullish"===e.sentiment).length/n.length*100,"%")}})})}),(0,zt.jsxs)("div",{className:"flex gap-4 text-xs font-mono",children:[(0,zt.jsxs)("span",{className:"text-emerald-400",children:[Math.round(n.filter(e=>"bullish"===e.sentiment).length/n.length*100),"% Bullish"]}),(0,zt.jsxs)("span",{className:"text-rose-400",children:[Math.round(n.filter(e=>"bearish"===e.sentiment).length/n.length*100),"% Bearish"]})]})]})]})]})},cwe=e=>{let{currentPrices:t={},onTrade:n}=e;const[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)([{id:"momentum",name:"Momentum Strategy",description:"Buy when RSI < 30, Sell when RSI > 70",enabled:!1,symbols:["BTC","ETH"],riskLevel:"medium",maxPositionSize:.5,trades:0,pnl:0},{id:"mean-reversion",name:"Mean Reversion",description:"Trade price deviations from moving average",enabled:!1,symbols:["AAPL","NVDA"],riskLevel:"low",maxPositionSize:1e3,trades:0,pnl:0},{id:"breakout",name:"Breakout Trader",description:"Enter on price breakouts from range",enabled:!1,symbols:["BTC","ETH","SOL"],riskLevel:"high",maxPositionSize:.25,trades:0,pnl:0},{id:"dca",name:"Dollar Cost Average",description:"Regular interval buying regardless of price",enabled:!1,symbols:["BTC"],riskLevel:"low",maxPositionSize:.01,interval:"1h",trades:0,pnl:0}]),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)({maxDailyTrades:10,maxDailyLoss:500,paperMode:!0,notifications:!0}),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)({trades:0,pnl:0,wins:0,losses:0});(0,o.useEffect)(()=>{if(!r)return;const e=setInterval(()=>{const e=i.filter(e=>e.enabled);if(0!==e.length&&!(f.trades>=u.maxDailyTrades))if(f.pnl<=-u.maxDailyLoss)a(!1);else if(Math.random()>.7){const r=e[Math.floor(Math.random()*e.length)],a=r.symbols[Math.floor(Math.random()*r.symbols.length)],i=Math.random()>.5?"BUY":"SELL",o=t[a]||1e3,l=r.maxPositionSize,u=(Math.random()-.4)*o*l*.02,d={id:Date.now(),strategy:r.name,symbol:a,side:i,quantity:l,price:o,pnl:Math.round(100*u)/100,timestamp:(new Date).toISOString()};c(e=>[d,...e].slice(0,20)),g(e=>({trades:e.trades+1,pnl:e.pnl+d.pnl,wins:d.pnl>0?e.wins+1:e.wins,losses:d.pnl<0?e.losses+1:e.losses})),s(e=>e.map(e=>e.id===r.id?m(m({},e),{},{trades:e.trades+1,pnl:e.pnl+d.pnl}):e)),n&&n(d)}},5e3);return()=>clearInterval(e)},[r,i,t,f,u,n]);return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"auto-trading-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Sm,{className:"text-indigo-400",size:20}),"Auto Trading",u.paperMode&&(0,zt.jsx)(yx,{variant:"warning",children:"PAPER"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(fx,{onClick:()=>p(!0),variant:"ghost",size:"sm",children:(0,zt.jsx)(Xve,{size:14})}),(0,zt.jsxs)(fx,{onClick:()=>a(!r),variant:r?"rose":"teal",size:"sm","data-testid":"toggle-auto-trading",children:[r?(0,zt.jsx)(Bm,{size:14}):(0,zt.jsx)(Rm,{size:14}),r?"Stop":"Start"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,zt.jsxs)(cx,{accent:"white",className:"text-center py-3",children:[(0,zt.jsx)(Em,{size:16,className:"text-indigo-400 mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-white",children:f.trades}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Trades"})]}),(0,zt.jsxs)(cx,{accent:f.pnl>=0?"teal":"rose",className:"text-center py-3",children:[(0,zt.jsx)(Om,{size:16,className:f.pnl>=0?"text-emerald-400":"text-rose-400"}),(0,zt.jsxs)("p",{className:"text-lg font-mono font-bold ".concat(f.pnl>=0?"text-emerald-400":"text-rose-400"),children:[f.pnl>=0?"+":"","$",f.pnl.toFixed(2)]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"P&L"})]}),(0,zt.jsxs)(cx,{accent:"white",className:"text-center py-3",children:[(0,zt.jsx)(mx,{size:16,className:"text-emerald-400 mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-emerald-400",children:f.wins}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Wins"})]}),(0,zt.jsxs)(cx,{accent:"white",className:"text-center py-3",children:[(0,zt.jsx)(kx,{size:16,className:"text-rose-400 mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-rose-400",children:f.losses}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Losses"})]})]}),(0,zt.jsxs)(cx,{accent:"indigo",children:[(0,zt.jsxs)("h4",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Jbe,{size:16,className:"text-indigo-400"}),"Trading Strategies"]}),(0,zt.jsx)("div",{className:"space-y-3",children:i.map(e=>{return(0,zt.jsxs)("div",{className:"p-3 rounded-lg transition-all ".concat(e.enabled?"bg-indigo-500/10 border border-indigo-500/30":"bg-white/5 border border-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>(e=>{s(t=>t.map(t=>t.id===e?m(m({},t),{},{enabled:!t.enabled}):t))})(e.id),className:"w-8 h-8 rounded-lg flex items-center justify-center transition-colors ".concat(e.enabled?"bg-indigo-500/30 text-indigo-400":"bg-white/5 text-slate-600"),"data-testid":"toggle-strategy-".concat(e.id),children:e.enabled?(0,zt.jsx)(Qve,{size:14}):(0,zt.jsx)(Um,{size:14})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-mono font-semibold text-white text-sm",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono text-sm ".concat(e.pnl>=0?"text-emerald-400":"text-rose-400"),children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.trades," trades"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsx)("div",{className:"flex gap-1",children:e.symbols.map(e=>(0,zt.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-white/5 text-slate-400",children:e},e))}),(0,zt.jsxs)("span",{className:"flex items-center gap-1 ".concat((t=e.riskLevel,"low"===t?"text-emerald-400":"medium"===t?"text-amber-400":"text-rose-400")),children:[(0,zt.jsx)(Im,{size:10}),e.riskLevel," risk"]})]})]},e.id);var t})})]}),l.length>0&&(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsx)("h4",{className:"font-heading font-semibold text-white mb-3",children:"Recent Auto Trades"}),(0,zt.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:l.slice(0,5).map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 text-sm",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(yx,{variant:"BUY"===e.side?"success":"danger",children:e.side}),(0,zt.jsx)("span",{className:"font-mono text-white",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["x",e.quantity]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono ".concat(e.pnl>=0?"text-emerald-400":"text-rose-400"),children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),(0,zt.jsx)("p",{className:"text-xs text-slate-600",children:e.strategy})]})]},e.id))})]}),(0,zt.jsx)(rn,{children:h&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>p(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(cx,{accent:"indigo",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Xve,{className:"text-indigo-400"}),"Auto Trading Settings"]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Max Daily Trades"}),(0,zt.jsx)("input",{type:"number",value:u.maxDailyTrades,onChange:e=>d(t=>m(m({},t),{},{maxDailyTrades:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono",min:1,max:100})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Max Daily Loss ($)"}),(0,zt.jsx)("input",{type:"number",value:u.maxDailyLoss,onChange:e=>d(t=>m(m({},t),{},{maxDailyLoss:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono",min:0})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("span",{className:"text-sm text-white",children:"Paper Trading Mode"}),(0,zt.jsx)("button",{onClick:()=>d(e=>m(m({},e),{},{paperMode:!e.paperMode})),className:"w-12 h-6 rounded-full transition-colors ".concat(u.paperMode?"bg-amber-500":"bg-slate-600"),children:(0,zt.jsx)("div",{className:"w-5 h-5 rounded-full bg-white transition-transform ".concat(u.paperMode?"translate-x-6":"translate-x-0.5")})})]}),(0,zt.jsxs)(fx,{onClick:()=>p(!1),variant:"indigo",className:"w-full",children:[(0,zt.jsx)(Qve,{size:16}),"Save Settings"]})]})]})})})}),!u.paperMode&&(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/30 flex items-start gap-2",children:[(0,zt.jsx)(s1,{size:16,className:"text-rose-400 flex-shrink-0 mt-0.5"}),(0,zt.jsxs)("p",{className:"text-xs text-rose-400",children:[(0,zt.jsx)("strong",{children:"Live Trading Active"})," - Real funds will be used. Enable Paper Mode for risk-free testing."]})]})]})},uwe=km("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),dwe=km("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),hwe=km("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),pwe=km("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),fwe=e=>{let{currentPrices:t={}}=e;const[n,r]=(0,o.useState)({address:"0x742d35Cc6634C0532925a3b844Bc9e7595f2bD08",totalBalance:0,holdings:[{symbol:"BTC",balance:2.5,network:"Bitcoin"},{symbol:"ETH",balance:15.75,network:"Ethereum"},{symbol:"SOL",balance:100,network:"Solana"},{symbol:"USDT",balance:25e3,network:"Ethereum",isStable:!0}],transactions:[{id:1,type:"receive",symbol:"ETH",amount:2.5,from:"0x1234...5678",timestamp:"2 hours ago"},{id:2,type:"send",symbol:"BTC",amount:.5,to:"0x8765...4321",timestamp:"1 day ago"},{id:3,type:"receive",symbol:"USDT",amount:5e3,from:"0xabcd...efgh",timestamp:"3 days ago"}]}),[a,i]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)({symbol:"ETH",amount:0,address:""});(0,o.useEffect)(()=>{const e=n.holdings.reduce((e,n)=>{const r=n.isStable?1:t[n.symbol]||0;return e+n.balance*r},0);r(t=>m(m({},t),{},{totalBalance:e}))},[t,n.holdings]);const p=()=>{navigator.clipboard.writeText(n.address),u(!0),setTimeout(()=>u(!1),2e3)};return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"user-wallet-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Fm,{className:"text-teal-400",size:20}),"My Wallet"]}),(0,zt.jsx)(yx,{variant:"active",pulse:!0,children:"Connected"})]}),(0,zt.jsxs)(cx,{accent:"teal",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500 mb-1",children:"Total Balance"}),(0,zt.jsxs)("p",{className:"text-4xl font-mono font-bold text-white",children:["$",n.totalBalance.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-3 p-2 rounded-lg bg-white/5 cursor-pointer hover:bg-white/10 transition-colors",onClick:p,children:[(0,zt.jsx)("span",{className:"text-xs font-mono text-slate-400 truncate max-w-[200px]",children:n.address}),c?(0,zt.jsx)(Qve,{size:14,className:"text-emerald-400"}):(0,zt.jsx)(Jve,{size:14,className:"text-slate-500"})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,zt.jsxs)(fx,{onClick:()=>i(!0),variant:"white",className:"flex-1","data-testid":"send-btn",children:[(0,zt.jsx)(Fbe,{size:16}),"Send"]}),(0,zt.jsxs)(fx,{onClick:()=>l(!0),variant:"teal",className:"flex-1","data-testid":"receive-btn",children:[(0,zt.jsx)(uwe,{size:16}),"Receive"]})]})]}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsxs)("h4",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Xbe,{size:16,className:"text-indigo-400"}),"Holdings"]}),(0,zt.jsx)("div",{className:"space-y-2",children:n.holdings.map(e=>{const n=e.isStable?1:t[e.symbol]||0,r=e.balance*n;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500/20 to-indigo-500/20 flex items-center justify-center font-mono font-bold text-teal-400",children:e.symbol.slice(0,2)}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"font-mono font-semibold text-white",children:e.symbol}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.network})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"font-mono font-semibold text-white",children:e.balance}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["$",r.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]},e.symbol)})})]}),(0,zt.jsxs)(cx,{accent:"white",children:[(0,zt.jsxs)("h4",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(dwe,{size:16,className:"text-amber-400"}),"Recent Transactions"]}),(0,zt.jsx)("div",{className:"space-y-2",children:n.transactions.map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat("receive"===e.type?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"),children:"receive"===e.type?(0,zt.jsx)(uwe,{size:16}):(0,zt.jsx)(Fbe,{size:16})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"text-sm text-white",children:["receive"===e.type?"Received":"Sent"," ",e.symbol]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"receive"===e.type?"From: ".concat(e.from):"To: ".concat(e.to)})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono ".concat("receive"===e.type?"text-emerald-400":"text-rose-400"),children:["receive"===e.type?"+":"-",e.amount," ",e.symbol]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.timestamp})]})]},e.id))})]}),a&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>i(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(cx,{accent:"rose",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(Fbe,{className:"text-rose-400"}),"Send Crypto"]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Asset"}),(0,zt.jsx)("div",{className:"flex gap-2 flex-wrap",children:n.holdings.map(e=>(0,zt.jsx)("button",{onClick:()=>h(t=>m(m({},t),{},{symbol:e.symbol})),className:"px-3 py-2 rounded-lg text-xs font-mono ".concat(d.symbol===e.symbol?"bg-rose-500/20 text-rose-400 border border-rose-500/30":"bg-white/5 text-slate-400 border border-white/10"),children:e.symbol},e.symbol))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Amount"}),(0,zt.jsx)("input",{type:"number",value:d.amount,onChange:e=>h(t=>m(m({},t),{},{amount:Number(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono",placeholder:"0.00",min:0})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs font-mono text-slate-500 block mb-2",children:"Recipient Address"}),(0,zt.jsx)("input",{type:"text",value:d.address,onChange:e=>h(t=>m(m({},t),{},{address:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white font-mono text-sm",placeholder:"0x..."})]}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsx)(fx,{onClick:()=>i(!1),variant:"ghost",className:"flex-1",children:"Cancel"}),(0,zt.jsxs)(fx,{onClick:()=>{r(e=>m(m({},e),{},{holdings:e.holdings.map(e=>e.symbol===d.symbol?m(m({},e),{},{balance:e.balance-d.amount}):e),transactions:[{id:Date.now(),type:"send",symbol:d.symbol,amount:d.amount,to:d.address.slice(0,6)+"..."+d.address.slice(-4),timestamp:"Just now"},...e.transactions]})),i(!1),h({symbol:"ETH",amount:0,address:""})},variant:"rose",className:"flex-1","data-testid":"confirm-send-btn",children:[(0,zt.jsx)(hwe,{size:16}),"Send"]})]})]})]})})}),s&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>l(!1),children:(0,zt.jsx)(uu.div,{initial:{scale:.9},animate:{scale:1},className:"w-full max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:(0,zt.jsxs)(cx,{accent:"teal",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zt.jsx)(uwe,{className:"text-teal-400"}),"Receive Crypto"]}),(0,zt.jsxs)("div",{className:"text-center space-y-4",children:[(0,zt.jsx)("div",{className:"w-48 h-48 mx-auto bg-white rounded-xl p-3",children:(0,zt.jsx)("div",{className:"w-full h-full bg-black/90 rounded-lg flex items-center justify-center",children:(0,zt.jsx)(pwe,{size:80,className:"text-white"})})}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 cursor-pointer hover:bg-white/10 transition-colors",onClick:p,children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Your Address"}),(0,zt.jsx)("p",{className:"text-sm font-mono text-white break-all",children:n.address})]}),(0,zt.jsxs)(fx,{onClick:p,variant:"teal",className:"w-full",children:[c?(0,zt.jsx)(Qve,{size:16}):(0,zt.jsx)(Jve,{size:16}),c?"Copied!":"Copy Address"]})]})]})})})]})},mwe=km("radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]),gwe=km("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),xwe=km("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),vwe=km("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),ywe="".concat("https://srv1304213.hstgr.cloud/api","/api"),bwe=()=>{const{t:e}=af(),[t,n]=(0,o.useState)([]),[r,a]=(0,o.useState)("all"),[i,s]=(0,o.useState)(!0),[l,c]=(0,o.useState)(!1),u=(0,o.useRef)(null),d=(0,o.useRef)(null);(0,o.useEffect)(()=>{d.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleWCKmJuXh3FXRkJKTmp+jZqek4d3aF5XTklKUVximqe2ta6fj4V9d3NwbmppamtsbnR8g46XoKetr7Cwra2sqKeimpeWlJSTk5WXmaGnrbK3u77Awb+9u7m4t7a2tbW0tbW2t7m7vcDDxsjKy8rJyMbEwb67ubm5urq7vL2+wMLDxcbHyMnJycnJyMjHxsTCwL68uri3tre3t7i5ury+wcPFx8nKy8zMzMvLycjGxMLAvry6ubm4uLi4uLm6u73AwsPGx8rLzM3Nzc3MzMrJx8XDwb+9u7q5ubm5ubi5uru9v8LFx8nLzc7Oz8/OzcvJx8XDwb+9u7q5uLi4uLi5uru9wMPGycvNz9DR0dDPzsrIxsTCwL68uri4uLi4uLm6u73Aw8bJy83Pz9DQ0M/OzMrIxcPBv727ubm5ubm5uru9wMPGysvOz9HQ0dDQz87MysfFw8C+u7m4uLi4uLq7vb/Cxcj")},[]),(0,o.useEffect)(()=>{const e=()=>{const t="https://srv1304213.hstgr.cloud/api".replace("https://","wss://").replace("http://","ws://");u.current=new WebSocket("".concat(t,"/ws/crawler")),u.current.onopen=()=>{c(!0),console.log("Crawler WebSocket connected")},u.current.onmessage=e=>{const t=JSON.parse(e.data);var r;"crawler_signal"===t.type&&(n(e=>[t.data,...e].slice(0,50)),!i||"critical"!==t.data.urgency&&"high"!==t.data.urgency||null===(r=d.current)||void 0===r||r.play().catch(()=>{}))},u.current.onclose=()=>{c(!1),setTimeout(e,5e3)},u.current.onerror=()=>{c(!1)}};return e(),()=>{u.current&&u.current.close()}},[i]),(0,o.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(ywe,"/crawler/signals?limit=30"));if(e.ok){const t=await e.json();n(t)}}catch(e){console.error("Error fetching signals:",e)}})()},[]);const h=t.filter(e=>"all"===r||e.signal_type===r),p=e=>{switch(e){case"whale":return"\ud83d\udc0b";case"news":return"\ud83d\udcf0";case"social":return"\ud83d\udcf1";case"orderbook":return"\ud83d\udcca";default:return"\ud83d\udce1"}},f=e=>{switch(e){case"critical":return"text-red-400 bg-red-500/20 border-red-500/30";case"high":return"text-orange-400 bg-orange-500/20 border-orange-500/30";case"medium":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";default:return"text-slate-400 bg-slate-500/20 border-slate-500/30"}},m=e=>{const t=new Date(e),n=new Date,r=Math.floor((n-t)/1e3);return r<60?"".concat(r,"s ago"):r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):t.toLocaleDateString()};return(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"trade-crawler-panel",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("h3",{className:"font-heading text-lg font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(mwe,{className:"text-teal-400",size:20}),e("crawler.title")]}),(0,zt.jsx)(yx,{variant:l?"active":"danger",pulse:l,children:e(l?"status.live":"status.offline")})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>s(!i),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors","data-testid":"crawler-sound-toggle",children:i?(0,zt.jsx)(Kbe,{size:16}):(0,zt.jsx)(qbe,{size:16})}),(0,zt.jsx)(fx,{onClick:()=>window.location.reload(),variant:"white",size:"sm",children:(0,zt.jsx)(awe,{size:14})})]})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[{id:"all",label:"All",icon:gwe},{id:"whale",label:e("crawler.whales"),icon:null,emoji:"\ud83d\udc0b"},{id:"news",label:e("crawler.news"),icon:null,emoji:"\ud83d\udcf0"},{id:"social",label:e("crawler.social"),icon:xwe},{id:"orderbook",label:e("crawler.orderbook"),icon:vwe}].map(e=>(0,zt.jsxs)("button",{onClick:()=>a(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-mono whitespace-nowrap transition-all ".concat(r===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"),"data-testid":"filter-".concat(e.id),children:[e.emoji?(0,zt.jsx)("span",{children:e.emoji}):e.icon&&(0,zt.jsx)(e.icon,{size:12}),e.label]},e.id))}),(0,zt.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto pr-1",children:(0,zt.jsx)(rn,{mode:"popLayout",children:0===h.length?(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,zt.jsx)(mwe,{className:"mx-auto mb-2 opacity-50",size:32}),(0,zt.jsx)("p",{className:"text-sm",children:e("crawler.noSignals")})]}):h.map((e,t)=>{var n,r,a,i,s,o;return(0,zt.jsx)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"p-3 rounded-xl bg-black/40 backdrop-blur-sm border border-white/10 hover:border-teal-500/30 transition-all",children:(0,zt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zt.jsx)("div",{className:"text-2xl",children:p(e.signal_type)}),(0,zt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-mono uppercase border ".concat(f(e.urgency)),children:e.urgency}),(0,zt.jsx)("span",{className:"text-xs font-mono text-teal-400",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[(0,zt.jsx)(ewe,{size:10}),m(e.timestamp)]})]}),(0,zt.jsx)("p",{className:"text-sm text-white/90 break-words",children:e.message}),e.action_suggested&&(0,zt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,zt.jsx)(Om,{size:12,className:"text-yellow-400"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-yellow-400",children:e.action_suggested})]})]}),(0,zt.jsx)("div",{className:"flex-shrink-0",children:"bullish"===(null===(n=e.data)||void 0===n?void 0:n.sentiment)||null!==(r=e.action_suggested)&&void 0!==r&&r.includes("LONG")||null!==(a=e.action_suggested)&&void 0!==a&&a.includes("ACCUMULATION")?(0,zt.jsx)(mx,{className:"text-emerald-400",size:18}):"bearish"===(null===(i=e.data)||void 0===i?void 0:i.sentiment)||null!==(s=e.action_suggested)&&void 0!==s&&s.includes("SHORT")||null!==(o=e.action_suggested)&&void 0!==o&&o.includes("SELL")?(0,zt.jsx)(kx,{className:"text-red-400",size:18}):(0,zt.jsx)(s1,{className:"text-yellow-400",size:18})})]})},e.id||t)})})})]})},wwe=e=>{let{variant:t="default"}=e;const{i18n:n}=af(),[r,a]=(0,o.useState)(!1),i=Ef.find(e=>e.code===n.language)||Ef[0];return(0,zt.jsxs)("div",{className:"relative","data-testid":"language-selector",children:[(0,zt.jsxs)("button",{onClick:()=>a(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-all ".concat("compact"===t?"bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white":"bg-white/5 hover:bg-white/10 border border-white/10 text-slate-300"),children:[(0,zt.jsx)(swe,{size:14}),(0,zt.jsx)("span",{className:"text-sm font-mono",children:i.flag}),"compact"!==t&&(0,zt.jsx)("span",{className:"text-xs font-mono hidden sm:inline",children:i.code.toUpperCase()}),(0,zt.jsx)(Vve,{size:12,className:"transition-transform ".concat(r?"rotate-180":"")})]}),(0,zt.jsx)(rn,{children:r&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 z-50 min-w-[160px] py-2 rounded-xl bg-black/90 backdrop-blur-xl border border-white/10 shadow-2xl",children:Ef.map(e=>(0,zt.jsxs)("button",{onClick:()=>{return t=e.code,n.changeLanguage(t),void a(!1);var t},className:"w-full flex items-center gap-3 px-4 py-2 text-left transition-colors ".concat(n.language===e.code?"bg-teal-500/20 text-teal-400":"text-slate-300 hover:bg-white/5 hover:text-white"),"data-testid":"lang-".concat(e.code),children:[(0,zt.jsx)("span",{className:"text-lg",children:e.flag}),(0,zt.jsx)("span",{className:"text-sm font-mono flex-1",children:e.name}),n.language===e.code&&(0,zt.jsx)(Qve,{size:14,className:"text-teal-400"})]},e.code))})]})})]})},kwe=km("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Nwe=km("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),Swe="".concat("https://srv1304213.hstgr.cloud/api","/api"),jwe=()=>{const{t:e}=af(),[t,n]=(0,o.useState)(null),[r,a]=(0,o.useState)(null),i=async(e,t)=>{n("".concat(e,"-").concat(t)),a(null);try{const n="csv"===t?"".concat(Swe,"/export/").concat(e,"/csv"):"".concat(Swe,"/export/").concat(e,"/pdf"),r=await fetch(n,{credentials:"include"});if(!r.ok)throw new Error("Export failed");const i=await r.blob(),s=window.URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download="".concat(e,"_").concat((new Date).toISOString().split("T")[0],".").concat(t),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(s),document.body.removeChild(o),a({type:"success",message:"".concat(t.toUpperCase()," downloaded!")})}catch(r){a({type:"error",message:r.message})}finally{n(null)}},s=[{id:"trades",title:e("export.downloadHistory"),icon:dwe,description:"All executed trades with P&L",formats:["csv","pdf"]},{id:"alerts",title:e("alerts.title"),icon:kwe,description:"All price alerts history",formats:["csv"]}];return(0,zt.jsx)(cx,{title:e("common.export"),icon:"\ud83d\udce5",accent:"teal","data-testid":"export-panel",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[s.map(n=>(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/30 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-teal-500/20",children:(0,zt.jsx)(n.icon,{className:"text-teal-400",size:18})}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsx)("h4",{className:"text-sm font-semibold text-white",children:n.title}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:n.description})]})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[n.formats.includes("csv")&&(0,zt.jsxs)(fx,{onClick:()=>i(n.id,"csv"),variant:"white",size:"sm",disabled:null!==t,"data-testid":"export-".concat(n.id,"-csv"),children:[t==="".concat(n.id,"-csv")?(0,zt.jsx)(Z0,{size:14,className:"animate-spin"}):(0,zt.jsx)(Nwe,{size:14}),e("export.exportCSV")]}),n.formats.includes("pdf")&&(0,zt.jsxs)(fx,{onClick:()=>i(n.id,"pdf"),variant:"teal",size:"sm",disabled:null!==t,"data-testid":"export-".concat(n.id,"-pdf"),children:[t==="".concat(n.id,"-pdf")?(0,zt.jsx)(Z0,{size:14,className:"animate-spin"}):(0,zt.jsx)(kwe,{size:14}),e("export.exportPDF")]})]})]},n.id)),r&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 rounded-lg ".concat("success"===r.type?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:["success"===r.type?(0,zt.jsx)(e1,{size:16}):(0,zt.jsx)(t1,{size:16}),(0,zt.jsx)("span",{className:"text-sm",children:r.message})]})]})})},Cwe=km("minimize-2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Ewe=km("maximize-2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Twe=km("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Iwe=km("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Awe={leftEyeOpen:1,rightEyeOpen:1,mouthOpen:0,smileAmount:0,eyebrowRaise:0,headTiltX:0,headTiltY:0,lookX:0,lookY:0,emotion:"neutral",confidence:0},Owe=e=>{let{onFaceData:t,className:r=""}=e;const a=(0,o.useRef)(null),i=(0,o.useRef)(null),s=(0,o.useRef)(null),l=(0,o.useRef)(null),c=(0,o.useRef)(null),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(Awe),k=(0,o.useCallback)(async()=>{p(!0),m(null);try{const{FaceMesh:e}=await n.e(87).then(n.t.bind(n,7087,23)),{Camera:t}=await n.e(943).then(n.t.bind(n,1943,23)),r=new e({locateFile:e=>"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/".concat(e)});r.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),r.onResults(N),l.current=r;const i=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});if(a.current){a.current.srcObject=i;const e=new t(a.current,{onFrame:async()=>{l.current&&a.current&&await l.current.send({image:a.current})},width:640,height:480});await e.start(),c.current=e,d(!0)}}catch(Qje){console.error("FaceMesh init error:",Qje),m(Qje.message||"Failed to initialize face tracking")}finally{p(!1)}},[]),N=(0,o.useCallback)(e=>{if(!e.multiFaceLandmarks||0===e.multiFaceLandmarks.length)return void y(!1);y(!0);const n=e.multiFaceLandmarks[0],r=n[159],a=n[145],s=n[386],o=n[374],l=100*Math.abs(r.y-a.y),c=100*Math.abs(s.y-o.y),u=n[13],d=n[14],h=100*Math.abs(u.y-d.y),p=n[61],f=n[291],m=100*Math.abs(f.x-p.x),x=Math.max(0,(m-15)/10),v=n[107],b=n[336],k=n[159],N=n[386],S=(v.y-k.y+(b.y-N.y))/2*-50,j=n[4],C=n[168],E=30*(j.x-.5),T=50*(j.y-C.y-.05),I=n[468],A=(n[473],I?50*(I.x-n[33].x):0),O=I?50*(I.y-n[159].y):0;let _="neutral",R=.7;x>2&&l>3&&c>3?(_="happy",R=Math.min(.95,.7+.05*x)):h>5&&S>2?(_="excited",R=.8):S<-1&&x<1?(_="concerned",R=.75):(l<2||c<2)&&(_="focused",R=.7);const P={leftEyeOpen:Math.min(1,l/5),rightEyeOpen:Math.min(1,c/5),mouthOpen:Math.min(1,h/10),smileAmount:Math.min(1,x/5),eyebrowRaise:Math.max(-1,Math.min(1,S/5)),headTiltX:E,headTiltY:T,lookX:A,lookY:O,emotion:_,confidence:R};if(w(P),t&&t(P),i.current&&g){const e=i.current.getContext("2d");e.clearRect(0,0,i.current.width,i.current.height),e.strokeStyle="rgba(20, 184, 166, 0.5)",e.lineWidth=.5;[159,145,386,374,61,291,13,14,107,336,4,168].forEach(t=>{const r=n[t];e.beginPath(),e.arc(640*r.x,480*r.y,3,0,2*Math.PI),e.fillStyle="rgba(20, 184, 166, 0.8)",e.fill()})}},[t,g]),S=(0,o.useCallback)(()=>{var e;c.current&&(c.current.stop(),c.current=null),l.current&&(l.current.close(),l.current=null),null!==(e=a.current)&&void 0!==e&&e.srcObject&&(a.current.srcObject.getTracks().forEach(e=>e.stop()),a.current.srcObject=null),s.current&&cancelAnimationFrame(s.current),d(!1),y(!1),w(Awe)},[]),j=(0,o.useCallback)(()=>{u?S():k()},[u,k,S]);return(0,o.useEffect)(()=>()=>{S()},[S]),(0,zt.jsxs)("div",{className:"relative ".concat(r),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)(fx,{onClick:j,variant:u?"danger":"cyan",size:"sm",disabled:h,children:[h?(0,zt.jsx)(awe,{size:16,className:"animate-spin"}):u?(0,zt.jsx)(Rx,{size:16}):(0,zt.jsx)(Px,{size:16}),u?"Stop":"Start"," Face Tracking"]}),u&&(0,zt.jsxs)(fx,{onClick:()=>x(!g),variant:"white",size:"sm",children:[g?(0,zt.jsx)(Twe,{size:16}):(0,zt.jsx)(Iwe,{size:16}),g?"Hide":"Show"," Camera"]})]}),(0,zt.jsx)("div",{className:"flex items-center gap-2",children:u&&(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-mono ".concat(v?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"),children:[v?(0,zt.jsx)(Qve,{size:12}):(0,zt.jsx)(Mx,{size:12}),v?"Face Detected":"No Face"]})})]}),(0,zt.jsx)(rn,{children:f&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-3 p-3 rounded-lg bg-red-500/20 border border-red-500/30 text-red-400 text-sm",children:[(0,zt.jsx)(Mx,{size:14,className:"inline mr-2"}),f]})}),(0,zt.jsx)(rn,{children:g&&u&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"relative overflow-hidden rounded-xl border border-white/10 mb-4",children:[(0,zt.jsx)("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto transform scale-x-[-1]",style:{maxHeight:"200px",objectFit:"cover"}}),(0,zt.jsx)("canvas",{ref:i,width:640,height:480,className:"absolute inset-0 w-full h-full transform scale-x-[-1] pointer-events-none"}),(0,zt.jsx)("div",{className:"absolute bottom-2 left-2 right-2 flex gap-2 flex-wrap",children:v&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-teal-400 font-mono",children:["\ud83d\ude0a ",(100*b.smileAmount).toFixed(0),"%"]}),(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-blue-400 font-mono",children:["\ud83d\udc41\ufe0f ",(100*b.leftEyeOpen).toFixed(0),"%"]}),(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-purple-400 font-mono",children:["\ud83d\udc44 ",(100*b.mouthOpen).toFixed(0),"%"]}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded bg-black/60 text-xs text-amber-400 font-mono",children:b.emotion})]})})]})}),!g&&u&&(0,zt.jsx)("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"hidden"}),u&&v&&(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-4 gap-2 text-center",children:[(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Eyes"}),(0,zt.jsxs)("div",{className:"text-sm font-mono text-teal-400",children:[((b.leftEyeOpen+b.rightEyeOpen)/2*100).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Smile"}),(0,zt.jsxs)("div",{className:"text-sm font-mono text-green-400",children:[(100*b.smileAmount).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Brows"}),(0,zt.jsxs)("div",{className:"text-sm font-mono text-amber-400",children:[b.eyebrowRaise>0?"+":"",(100*b.eyebrowRaise).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Emotion"}),(0,zt.jsx)("div",{className:"text-sm font-mono text-purple-400 capitalize",children:b.emotion})]})]})]})},_we="".concat("https://srv1304213.hstgr.cloud/api","/api"),Rwe=e=>{let{emotion:t,speaking:n,confidence:r,webcamFace:a=null}=e;const[i,s]=(0,o.useState)(0);(0,o.useEffect)(()=>{const e=setInterval(()=>{s(e=>e+1)},50);return()=>clearInterval(e)},[]);const l={excited:"#22c55e",happy:"#10b981",concerned:"#f59e0b",neutral:"#14b8a6",focused:"#3b82f6"},c=l[(null===a||void 0===a?void 0:a.emotion)||t]||l.neutral,u=.05*i,d=Math.sin(2.5*u),h=a?a.leftEyeOpen<.3||a.rightEyeOpen<.3:d>.97,p=.02*Math.sin(.8*u),f=a?a.headTiltX:2*Math.sin(.3*u),m=a?Math.max(1,6*a.leftEyeOpen):h?1:"excited"===t?6:"concerned"===t?3:5,g=a?8*a.mouthOpen:n?4+3*Math.sin(12*u):0,x=a?-12*a.smileAmount:"happy"===t||"excited"===t?-8:"concerned"===t?4:0,v=a?-5*a.eyebrowRaise:"excited"===t?-2:"concerned"===t?3:0,y=a?.5*a.lookX:2*Math.sin(.5*u),b=a?.5*a.lookY:0;(0,o.useMemo)(()=>(()=>{const e=[];for(let t=0;t<=8;t++)for(let n=0;n<=6;n++){const r=20+n/6*60,a=15+t/8*90,i=Math.sqrt(Math.pow(r-50,2)+Math.pow(a-55,2)),s=Math.max(0,1-i/50);s>.1&&e.push({x:r,y:a,opacity:s})}return e})(),[]);return(0,zt.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:[(0,zt.jsx)("div",{className:"absolute inset-0 opacity-30",style:{background:"radial-gradient(ellipse at center, ".concat(c,"40 0%, transparent 60%)")}}),(0,zt.jsx)("div",{className:"absolute top-6 left-6 font-mono font-bold text-5xl",style:{color:c,textShadow:"0 0 20px ".concat(c,"80")},children:r}),(0,zt.jsxs)("svg",{viewBox:"0 0 100 120",className:"w-full h-full max-w-[400px] max-h-[450px]",style:{transform:"rotate(".concat(f,"deg) scale(").concat(1+p,")")},children:[(0,zt.jsxs)("defs",{children:[(0,zt.jsxs)("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,zt.jsx)("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),(0,zt.jsxs)("feMerge",{children:[(0,zt.jsx)("feMergeNode",{in:"coloredBlur"}),(0,zt.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,zt.jsxs)("filter",{id:"pointGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,zt.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,zt.jsxs)("feMerge",{children:[(0,zt.jsx)("feMergeNode",{in:"coloredBlur"}),(0,zt.jsx)("feMergeNode",{in:"coloredBlur"}),(0,zt.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.3",children:[[20,35,50,65,80,95].map((e,t)=>(0,zt.jsx)("path",{d:"M 15 ".concat(e," Q 50 ").concat(e+2*Math.sin(u+t)," 85 ").concat(e),fill:"none",stroke:c,strokeWidth:"0.5"},"h".concat(t))),[25,37.5,50,62.5,75].map((e,t)=>(0,zt.jsx)("path",{d:"M ".concat(e," 15 Q ").concat(e+2*Math.sin(u+t)," 55 ").concat(e," 100"),fill:"none",stroke:c,strokeWidth:"0.5"},"v".concat(t)))]}),(0,zt.jsx)("ellipse",{cx:"50",cy:"55",rx:"32",ry:"42",fill:"none",stroke:c,strokeWidth:"1.5",filter:"url(#glow)",opacity:"0.9"}),(0,zt.jsx)("ellipse",{cx:"50",cy:"55",rx:"28",ry:"38",fill:"none",stroke:c,strokeWidth:"0.8",filter:"url(#glow)",opacity:"0.5"}),(0,zt.jsx)("path",{d:"M 25 30 Q 50 ".concat(25+2*Math.sin(u)," 75 30"),fill:"none",stroke:c,strokeWidth:"0.8",filter:"url(#glow)",opacity:"0.6"}),(0,zt.jsx)("g",{filter:"url(#glow)",children:(0,zt.jsx)("path",{d:"M 28 ".concat(38+v," Q 35 ").concat(33+v," 44 ").concat(36+v),fill:"none",stroke:c,strokeWidth:"2",strokeLinecap:"round"})}),(0,zt.jsx)("g",{filter:"url(#glow)",children:(0,zt.jsx)("path",{d:"M 56 ".concat(36+v," Q 65 ").concat(33+v," 72 ").concat(38+v),fill:"none",stroke:c,strokeWidth:"2",strokeLinecap:"round"})}),(0,zt.jsxs)("g",{filter:"url(#glow)",children:[(0,zt.jsx)("ellipse",{cx:"36",cy:"48",rx:"8",ry:m,fill:"none",stroke:c,strokeWidth:"1.5"}),(0,zt.jsx)("circle",{cx:36+y,cy:48+b,r:"2.5",fill:c}),(0,zt.jsx)("circle",{cx:"34",cy:"46",r:"1",fill:"white",opacity:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",children:[(0,zt.jsx)("ellipse",{cx:"64",cy:"48",rx:"8",ry:m,fill:"none",stroke:c,strokeWidth:"1.5"}),(0,zt.jsx)("circle",{cx:64+y,cy:48+b,r:"2.5",fill:c}),(0,zt.jsx)("circle",{cx:"62",cy:"46",r:"1",fill:"white",opacity:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.8",children:[(0,zt.jsx)("path",{d:"M 50 42 L 50 60",fill:"none",stroke:c,strokeWidth:"1"}),(0,zt.jsx)("path",{d:"M 44 63 Q 47 67 50 65 Q 53 67 56 63",fill:"none",stroke:c,strokeWidth:"1"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",children:[(0,zt.jsx)("path",{d:"M 38 ".concat(78+x," Q 44 ").concat(75+x-g," 50 ").concat(76+x-g," Q 56 ").concat(75+x-g," 62 ").concat(78+x),fill:"none",stroke:c,strokeWidth:"1.5"}),(0,zt.jsx)("path",{d:"M 38 ".concat(78+x," Q 50 ").concat(82+x+g," 62 ").concat(78+x),fill:"none",stroke:c,strokeWidth:"1.5"}),n&&(0,zt.jsx)("ellipse",{cx:"50",cy:78+x,rx:"8",ry:.8*g,fill:"".concat(c,"20"),stroke:c,strokeWidth:"0.5"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.5",children:[(0,zt.jsx)("path",{d:"M 22 55 Q 28 60 30 70",fill:"none",stroke:c,strokeWidth:"0.8"}),(0,zt.jsx)("path",{d:"M 78 55 Q 72 60 70 70",fill:"none",stroke:c,strokeWidth:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.6",children:[(0,zt.jsx)("path",{d:"M 25 70 Q 35 90 50 95",fill:"none",stroke:c,strokeWidth:"0.8"}),(0,zt.jsx)("path",{d:"M 75 70 Q 65 90 50 95",fill:"none",stroke:c,strokeWidth:"0.8"})]}),(0,zt.jsxs)("g",{filter:"url(#pointGlow)",children:[[[50,13],[30,18],[70,18],[20,35],[80,35],[18,55],[82,55],[20,75],[80,75],[30,90],[70,90],[50,97]].map((e,t)=>{let[n,r]=e;return(0,zt.jsx)("circle",{cx:n,cy:r,r:"2",fill:c},"fc".concat(t))}),[[28,48],[36,43],[44,48],[36,53],[56,48],[64,43],[72,48],[64,53]].map((e,t)=>{let[n,r]=e;return(0,zt.jsx)("circle",{cx:n,cy:r,r:"1.5",fill:c},"ep".concat(t))}),[[50,42],[50,52],[50,60],[44,63],[56,63]].map((e,t)=>{let[n,r]=e;return(0,zt.jsx)("circle",{cx:n,cy:r,r:"1.5",fill:c},"np".concat(t))}),[[38,78+x],[44,76+x],[50,76+x],[56,76+x],[62,78+x],[50,82+x]].map((e,t)=>{let[n,r]=e;return(0,zt.jsx)("circle",{cx:n,cy:r,r:"1.5",fill:c},"mp".concat(t))}),[[28,38+v],[36,34+v],[44,36+v],[56,36+v],[64,34+v],[72,38+v]].map((e,t)=>{let[n,r]=e;return(0,zt.jsx)("circle",{cx:n,cy:r,r:"1.5",fill:c},"eb".concat(t))})]}),(0,zt.jsxs)("g",{filter:"url(#glow)",opacity:"0.4",children:[(0,zt.jsx)("line",{x1:"50",y1:"13",x2:"50",y2:"42",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"30",y1:"18",x2:"36",y2:"43",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"70",y1:"18",x2:"64",y2:"43",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"36",y1:"53",x2:"44",y2:"63",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"64",y1:"53",x2:"56",y2:"63",stroke:c,strokeWidth:"0.5"}),(0,zt.jsx)("line",{x1:"50",y1:"65",x2:"50",y2:76+x,stroke:c,strokeWidth:"0.5"})]})]}),(0,zt.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((e,t)=>(0,zt.jsx)("div",{className:"absolute w-1 h-1 rounded-full",style:{backgroundColor:c,boxShadow:"0 0 6px ".concat(c),left:"".concat(30+20*Math.sin(u+.8*t)+5*t,"%"),top:"".concat(40+15*Math.cos(u+.5*t)+3*t,"%"),opacity:.3+.2*Math.sin(2*u+t)}},t))})]})},Pwe=e=>{let{marketData:t={},onInsight:n,onTradeCommand:r}=e;const{t:a}=af(),[i,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)("neutral"),[g,x]=(0,o.useState)(""),[v,y]=(0,o.useState)(68),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)(null),[S,j]=(0,o.useState)(!1),C=(0,o.useRef)(null),E=(0,o.useCallback)(async e=>{try{const t=await fetch("".concat(_we,"/avatar/announce-trade"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();x(e.message),m(e.emotion),e.audio&&!l&&C.current&&(C.current.src="data:audio/mp3;base64,".concat(e.audio),p(!0),C.current.play().catch(console.error),C.current.onended=()=>p(!1))}}catch(t){console.error("Trade announcement error:",t)}},[l]);(0,o.useEffect)(()=>{n&&n({announceTrade:E})},[E,n]),(0,o.useEffect)(()=>{const e=t.btc_change||0;e>3?(m("excited"),y(Math.min(95,Math.round(68+3*Math.abs(e))))):e<-3?(m("concerned"),y(Math.max(40,Math.round(68-3*Math.abs(e))))):e>0?(m("happy"),y(Math.round(68+2*e))):(m("neutral"),y(68))},[t]);const T=(0,o.useCallback)(async()=>{if(!b){w(!0);try{const e=await fetch("".concat(_we,"/avatar/insight"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"",emotion:f,market_context:t})});if(!e.ok)throw new Error("Failed to generate insight");const r=await e.json();if(x(r.message),m(r.emotion),r.audio&&!l){const e="data:audio/mp3;base64,".concat(r.audio);C.current&&(C.current.src=e,p(!0),C.current.play().catch(console.error),C.current.onended=()=>p(!1))}n&&n(r)}catch(e){console.error("Insight error:",e),x("Unable to generate insight at this time.")}finally{w(!1)}}},[f,t,l,b,n]),I=(0,o.useCallback)(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void x("Voice recognition not supported in this browser.");if(u)return void d(!1);const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onstart=()=>{d(!0),x('Listening... Say a command like "Buy 1 BTC"')},e.onend=()=>d(!1),e.onresult=async e=>{const n=e.results[0][0].transcript;x('Processing: "'.concat(n,'"'));try{const e=await fetch("".concat(_we,"/voice/command"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:n,context:t})});if(e.ok){const t=await e.json();x(t.response),t.audio&&!l&&C.current&&(C.current.src="data:audio/mp3;base64,".concat(t.audio),p(!0),C.current.play().catch(console.error),C.current.onended=()=>p(!1)),t.action_data&&r&&r(t.action_data)}}catch(a){console.error("Voice command error:",a),x("Sorry, I had trouble processing that command.")}},e.onerror=e=>{console.error("Speech recognition error:",e.error),d(!1),"no-speech"===e.error?x("I didn't hear anything. Try again!"):x("Voice recognition error. Please try again.")},e.start()},[u,t,l,r]),A={excited:(0,zt.jsx)(mx,{className:"text-emerald-400",size:16}),happy:(0,zt.jsx)(mx,{className:"text-emerald-400",size:16}),concerned:(0,zt.jsx)(kx,{className:"text-amber-400",size:16}),neutral:(0,zt.jsx)(Em,{className:"text-teal-400",size:16}),focused:(0,zt.jsx)(Nm,{className:"text-blue-400",size:16})};return(0,zt.jsxs)("div",{className:"".concat(i?"fixed inset-4 z-50":"relative"),"data-testid":"trading-avatar",children:[(0,zt.jsx)("audio",{ref:C,className:"hidden"}),(0,zt.jsxs)("div",{className:"h-full min-h-[450px] rounded-2xl overflow-hidden bg-black/95 backdrop-blur-xl border-2 shadow-lg ".concat({excited:"border-emerald-500/50 shadow-emerald-500/20",happy:"border-emerald-500/50 shadow-emerald-500/20",concerned:"border-amber-500/50 shadow-amber-500/20",neutral:"border-teal-500/50 shadow-teal-500/20",focused:"border-blue-500/50 shadow-blue-500/20"}[f]," transition-all duration-500"),children:[(0,zt.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:[(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsxs)(yx,{variant:h?"active":"default",pulse:h,children:[A[f],(0,zt.jsx)("span",{className:"text-xs font-mono uppercase",children:f})]})}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>j(!S),className:"p-2 rounded-lg transition-colors ".concat(S?"bg-teal-500/20 text-teal-400":"bg-white/10 text-white hover:bg-white/20"),"data-testid":"avatar-webcam-btn",title:"Face Mirror Mode",children:(0,zt.jsx)(Px,{size:16})}),(0,zt.jsx)("button",{onClick:()=>c(!l),className:"p-2 rounded-lg transition-colors ".concat(l?"bg-red-500/20 text-red-400":"bg-white/10 text-white hover:bg-white/20"),"data-testid":"avatar-mute-btn",children:l?(0,zt.jsx)(qbe,{size:16}):(0,zt.jsx)(Kbe,{size:16})}),(0,zt.jsx)("button",{onClick:()=>s(!i),className:"p-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors","data-testid":"avatar-expand-btn",children:i?(0,zt.jsx)(Cwe,{size:16}):(0,zt.jsx)(Ewe,{size:16})})]})]}),(0,zt.jsx)("div",{className:"w-full h-full pt-16 pb-32",children:(0,zt.jsx)(Rwe,{emotion:f,speaking:h,confidence:v,webcamFace:k})}),(0,zt.jsx)(rn,{children:S&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"absolute top-16 right-4 w-72 z-20 p-4 rounded-xl bg-black/80 backdrop-blur-lg border border-white/10",children:[(0,zt.jsxs)("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Px,{size:16,className:"text-teal-400"}),"Face Mirror Mode"]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:"Your facial expressions will be mirrored onto the avatar in real-time."}),(0,zt.jsx)(Owe,{onFaceData:N})]})}),(0,zt.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 p-4 bg-gradient-to-t from-black/90 to-transparent",children:[(0,zt.jsx)(rn,{mode:"wait",children:g&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-xl bg-black/60 backdrop-blur-sm border border-white/10 text-sm text-white/90 text-center",children:g})}),(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,zt.jsx)(fx,{onClick:I,variant:u?"teal":"white",size:"sm","data-testid":"avatar-mic-btn",children:u?(0,zt.jsx)(Tx,{size:18,className:"animate-pulse"}):(0,zt.jsx)(Ix,{size:18})}),(0,zt.jsxs)(fx,{onClick:T,variant:"teal",disabled:b,"data-testid":"avatar-speak-btn",children:[b?(0,zt.jsx)(Z0,{size:18,className:"animate-spin"}):(0,zt.jsx)(Nm,{size:18}),(0,zt.jsx)("span",{className:"ml-2",children:b?"Thinking...":"Get Insight"})]})]})]})]})]})},Mwe=km("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Dwe=km("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Fwe=km("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Lwe=e=>{let{variant:t="default"}=e;const{theme:n,currentTheme:r,setTheme:a,toggleTheme:i}=(()=>{const e=(0,o.useContext)(Bh);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e})(),[s,l]=(0,o.useState)(!1),c={dark:Mwe,light:Dwe,matrix:Fwe},u=c[n]||Mwe;return"simple"===t?(0,zt.jsx)("button",{onClick:i,className:"flex items-center gap-2 p-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-all","data-testid":"theme-toggle-simple",children:(0,zt.jsx)(u,{size:14})}):(0,zt.jsxs)("div",{className:"relative","data-testid":"theme-toggle",children:[(0,zt.jsxs)("button",{onClick:()=>l(!s),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 text-slate-300 transition-all",children:[(0,zt.jsx)(u,{size:14}),(0,zt.jsx)("span",{className:"text-xs font-mono hidden sm:inline",children:r.name}),(0,zt.jsx)(Vve,{size:12,className:"transition-transform ".concat(s?"rotate-180":"")})]}),(0,zt.jsx)(rn,{children:s&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 z-50 min-w-[140px] py-2 rounded-xl bg-black/90 backdrop-blur-xl border border-white/10 shadow-2xl",children:Object.values(Uh).map(e=>{const t=c[e.id];return(0,zt.jsxs)("button",{onClick:()=>{a(e.id),l(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-left transition-colors ".concat(n===e.id?"bg-teal-500/20 text-teal-400":"text-slate-300 hover:bg-white/5 hover:text-white"),"data-testid":"theme-".concat(e.id),children:[(0,zt.jsx)(t,{size:14}),(0,zt.jsx)("span",{className:"text-sm font-mono flex-1",children:e.name}),n===e.id&&(0,zt.jsx)(Qve,{size:14,className:"text-teal-400"})]},e.id)})})]})})]})},zwe=km("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),Bwe=km("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Uwe=()=>{const{t:e}=af(),[t,n]=(0,o.useState)("default"),[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(null),[l,c]=(0,o.useState)({priceAlerts:!0,whaleAlerts:!0,newsAlerts:!1,soundEnabled:!0});(0,o.useEffect)(()=>{const e="Notification"in window&&"serviceWorker"in navigator;a(e),e&&(n(Notification.permission),navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered:",e),s(e)}).catch(e=>{console.error("Service Worker registration failed:",e)}))},[]);const u=(0,o.useCallback)(async()=>{if(r)try{const e=await Notification.requestPermission();n(e),"granted"===e&&new Notification("OracleIQTrader",{body:"Push notifications enabled! You will receive trading alerts.",icon:"/logo192.png",tag:"welcome"})}catch(e){console.error("Permission request failed:",e)}},[r]),d=(0,o.useCallback)(function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("granted"!==t)return;const a=new Notification(e,m({body:n,icon:"/logo192.png",badge:"/logo192.png",tag:r.tag||"alert",requireInteraction:r.requireInteraction||!1},r));return a.onclick=()=>{window.focus(),a.close()},a},[t]),h={granted:{color:"text-emerald-400",bg:"bg-emerald-500/20",icon:Qve,label:"Enabled"},denied:{color:"text-red-400",bg:"bg-red-500/20",icon:Um,label:"Blocked"},default:{color:"text-amber-400",bg:"bg-amber-500/20",icon:s1,label:"Not Set"}}[t];return r?(0,zt.jsxs)("div",{className:"space-y-4","data-testid":"notification-manager",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/30 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(h.bg),children:(0,zt.jsx)(Gbe,{className:h.color,size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-sm font-semibold text-white",children:"Push Notifications"}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,zt.jsx)(h.icon,{size:12,className:h.color}),(0,zt.jsx)("span",{className:"text-xs font-mono ".concat(h.color),children:h.label})]})]})]}),"granted"!==t&&(0,zt.jsx)(fx,{onClick:u,variant:"teal",size:"sm",disabled:"denied"===t,"data-testid":"enable-notifications-btn",children:"denied"===t?"Blocked in Browser":"Enable"})]}),"denied"===t&&(0,zt.jsx)("div",{className:"mt-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-xs text-red-400",children:(0,zt.jsx)("p",{children:"Notifications are blocked. To enable, click the lock icon in your browser's address bar and allow notifications."})})]}),"granted"===t&&(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[(0,zt.jsx)(Xve,{size:14}),"Notification Preferences"]}),[{key:"priceAlerts",label:"Price Alerts",desc:"When target prices are hit",icon:"\ud83d\udcb0"},{key:"whaleAlerts",label:"Whale Alerts",desc:"Large transactions detected",icon:"\ud83d\udc0b"},{key:"newsAlerts",label:"Breaking News",desc:"High-impact market news",icon:"\ud83d\udcf0"},{key:"soundEnabled",label:"Sound",desc:"Play sound with alerts",icon:"\ud83d\udd0a"}].map(e=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-lg",children:e.icon}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:e.label}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.desc})]})]}),(0,zt.jsx)("button",{onClick:()=>{return t=e.key,void c(e=>m(m({},e),{},{[t]:!e[t]}));var t},className:"relative w-10 h-5 rounded-full transition-colors ".concat(l[e.key]?"bg-teal-500":"bg-slate-600"),"data-testid":"toggle-".concat(e.key),children:(0,zt.jsx)(uu.div,{className:"absolute top-0.5 w-4 h-4 rounded-full bg-white shadow",animate:{left:l[e.key]?"22px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]},e.key)),(0,zt.jsx)("div",{className:"pt-3",children:(0,zt.jsxs)(fx,{onClick:()=>{d("\ud83d\ude80 BTC Alert!","Bitcoin just crossed $95,000! Your target price was hit.",{tag:"test-alert",requireInteraction:!0})},variant:"white",size:"sm",className:"w-full","data-testid":"test-notification-btn",children:[(0,zt.jsx)(Bwe,{size:14}),"Send Test Notification"]})})]})]}):(0,zt.jsx)(cx,{title:"Push Notifications",icon:"\ud83d\udd14",accent:"amber",children:(0,zt.jsxs)("div",{className:"text-center py-6 text-slate-500",children:[(0,zt.jsx)(zwe,{className:"mx-auto mb-2 opacity-50",size:32}),(0,zt.jsx)("p",{className:"text-sm",children:"Push notifications are not supported in this browser."})]})})},Wwe=km("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Vwe=km("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Hwe="".concat("https://srv1304213.hstgr.cloud/api","/api"),Gwe=()=>{var e,t,n,r,a;const{t:i}=af(),[s,l]=(0,o.useState)((new Date).toISOString().split("T")[0]),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)("daily"),[y,b]=(0,o.useState)(""),w=o.useRef(null),k=(0,o.useCallback)(async()=>{g(!0);try{const e="".concat(Hwe,"/journal/daily-summary?date=").concat(s),t=await fetch(e,{method:"GET",headers:{Accept:"application/json"}});if(t.ok){const e=await t.json();u(e)}else console.error("Response not OK:",t.status,t.statusText),u(null)}catch(e){console.error("Error fetching daily summary:",e),u(null)}finally{g(!1)}},[s]),N=(0,o.useCallback)(async()=>{g(!0);try{const e=await fetch("".concat(Hwe,"/journal/weekly-summary"));if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching weekly summary:",e)}finally{g(!1)}},[]);(0,o.useEffect)(()=>{"daily"===x?k():N()},[x,k,N]);const S=e=>{const t=new Date(s);t.setDate(t.getDate()+e),l(t.toISOString().split("T")[0])};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"trading-journal",children:[(0,zt.jsx)("audio",{ref:w,className:"hidden"}),(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(vwe,{className:"text-amber-400"}),"Trading Journal"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Track your performance and learn from every trade"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>v("daily"),className:"px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat("daily"===x?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400"),children:"Daily"}),(0,zt.jsx)("button",{onClick:()=>v("weekly"),className:"px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat("weekly"===x?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400"),children:"Weekly"})]})]}),"daily"===x?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,zt.jsx)("button",{onClick:()=>S(-1),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors",children:(0,zt.jsx)(Wwe,{size:20})}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsx)(Vwe,{size:16,className:"text-teal-400"}),(0,zt.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),className:"bg-transparent text-white font-mono text-sm outline-none"})]}),(0,zt.jsx)("button",{onClick:()=>S(1),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors",disabled:s>=(new Date).toISOString().split("T")[0],children:(0,zt.jsx)(Vm,{size:20})})]}),m&&(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-teal-500 border-t-transparent rounded-full"}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading journal data..."})]}),!m&&c&&(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Jbe,{size:16,className:"text-teal-400"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"TRADES"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:c.trades_count}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[c.wins,"W / ",c.losses,"L"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(zbe,{size:16,className:"text-blue-400"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"WIN RATE"})]}),(0,zt.jsxs)("p",{className:"text-2xl font-bold text-white",children:[c.win_rate,"%"]}),(0,zt.jsx)("div",{className:"w-full h-1 rounded-full bg-slate-700 mt-2",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-teal-500 to-emerald-500",style:{width:"".concat(c.win_rate,"%")}})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10 col-span-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Wm,{size:16,className:c.total_pnl>=0?"text-emerald-400":"text-red-400"}),(0,zt.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:"TOTAL P&L"})]}),(0,zt.jsxs)("p",{className:"text-3xl font-bold ".concat(c.total_pnl>=0?"text-emerald-400":"text-red-400"),children:[c.total_pnl>=0?"+":"","$",c.total_pnl.toLocaleString()]})]})]}),(0,zt.jsxs)(cx,{title:"AI Insights",icon:"\ud83e\udde0",accent:"purple",children:[(0,zt.jsx)("div",{className:"p-4 rounded-xl ".concat({excited:"text-emerald-400 bg-emerald-500/20",happy:"text-emerald-400 bg-emerald-500/20",concerned:"text-amber-400 bg-amber-500/20",neutral:"text-slate-400 bg-slate-500/20"}[c.emotion]," mb-4"),children:(0,zt.jsx)("p",{className:"text-sm",children:c.ai_insights})}),c.audio&&(0,zt.jsxs)(fx,{onClick:async()=>{var e;if(p)return null===(e=w.current)||void 0===e||e.pause(),void f(!1);try{const e=await fetch("".concat(Hwe,"/journal/daily-summary?date=").concat(s,"&include_audio=true"));if(e.ok){const t=await e.json();t.audio&&w.current&&(w.current.src="data:audio/mp3;base64,".concat(t.audio),w.current.play(),f(!0),w.current.onended=()=>f(!1))}}catch(t){console.error("Error playing audio summary:",t)}},variant:"teal",className:"w-full",disabled:p,children:[p?(0,zt.jsx)(Bm,{size:16}):(0,zt.jsx)(Rm,{size:16}),p?"Playing...":"Play Audio Summary"]})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[c.best_trade&&(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Cm,{className:"text-emerald-400",size:18}),(0,zt.jsx)("span",{className:"text-sm font-semibold text-emerald-400",children:"Best Trade"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(e=c.best_trade.action)||void 0===e?void 0:e.toUpperCase()," ",c.best_trade.symbol]}),(0,zt.jsxs)("span",{className:"text-emerald-400 font-bold",children:["+$",null===(t=c.best_trade.profit_loss)||void 0===t?void 0:t.toLocaleString()]})]})]}),c.worst_trade&&c.worst_trade.profit_loss<0&&(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(s1,{className:"text-red-400",size:18}),(0,zt.jsx)("span",{className:"text-sm font-semibold text-red-400",children:"Worst Trade"})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(n=c.worst_trade.action)||void 0===n?void 0:n.toUpperCase()," ",c.worst_trade.symbol]}),(0,zt.jsxs)("span",{className:"text-red-400 font-bold",children:["$",null===(r=c.worst_trade.profit_loss)||void 0===r?void 0:r.toLocaleString()]})]})]})]}),(0,zt.jsxs)(cx,{title:"Journal Note",icon:"\ud83d\udcdd",accent:"amber",children:[(0,zt.jsx)("textarea",{value:y,onChange:e=>b(e.target.value),placeholder:"Add your thoughts about today's trading...",className:"w-full h-24 p-3 rounded-lg bg-black/40 border border-white/10 text-white text-sm resize-none outline-none focus:border-teal-500/50"}),(0,zt.jsxs)(fx,{onClick:async()=>{if(y.trim())try{await fetch("".concat(Hwe,"/journal/add-note?date=").concat(s,"&note=").concat(encodeURIComponent(y)),{method:"POST"}),b("")}catch(e){console.error("Error saving note:",e)}},variant:"white",size:"sm",className:"mt-3",children:[(0,zt.jsx)(kwe,{size:14}),"Save Note"]})]})]}),!m&&!c&&(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[(0,zt.jsx)(vwe,{size:48,className:"mb-4 opacity-50"}),(0,zt.jsx)("p",{className:"text-lg",children:"No trading data for this date"}),(0,zt.jsx)("p",{className:"text-sm mt-2",children:"Select a date with trading activity"})]})]}):d&&(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"TOTAL P&L"}),(0,zt.jsxs)("p",{className:"text-2xl font-bold ".concat(d.total_pnl>=0?"text-emerald-400":"text-red-400"),children:[d.total_pnl>=0?"+":"","$",d.total_pnl.toLocaleString()]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"TOTAL TRADES"}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:d.total_trades})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"WIN RATE"}),(0,zt.jsxs)("p",{className:"text-2xl font-bold text-white",children:[d.overall_win_rate,"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 font-mono mb-1",children:"AI INSIGHT"}),(0,zt.jsx)("p",{className:"text-xs text-slate-300",children:d.ai_insights})]})]}),(0,zt.jsx)(cx,{title:"7-Day Performance",icon:"\ud83d\udcca",accent:"blue",children:(0,zt.jsx)("div",{className:"flex items-end justify-between h-40 gap-2",children:null===(a=d.daily_summaries)||void 0===a?void 0:a.slice().reverse().map((e,t)=>{const n=Math.max(...d.daily_summaries.map(e=>Math.abs(e.pnl))),r=n>0?Math.abs(e.pnl)/n*100:0,a=e.pnl>=0;return(0,zt.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,zt.jsx)("div",{className:"w-full flex flex-col items-center justify-end h-28",children:(0,zt.jsx)(uu.div,{initial:{height:0},animate:{height:"".concat(Math.max(r,5),"%")},className:"w-full rounded-t ".concat(a?"bg-emerald-500":"bg-red-500")})}),(0,zt.jsx)("span",{className:"text-[10px] text-slate-500 font-mono",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})}),(0,zt.jsxs)("span",{className:"text-xs font-mono ".concat(a?"text-emerald-400":"text-red-400"),children:[a?"+":"","$",e.pnl.toFixed(0)]})]},t)})})})]})]})},Kwe=km("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),qwe=km("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Xwe=km("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ywe="".concat("https://srv1304213.hstgr.cloud/api","/api"),$we=()=>{var e,t,n;const{t:r}=af(),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)(null),[c,u]=(0,o.useState)("total_value"),[d,h]=(0,o.useState)(!0),[p,f]=(0,o.useState)("");(0,o.useEffect)(()=>{g()},[c]);const g=async()=>{h(!0);try{const e=await fetch("".concat(Ywe,"/portfolios/public?sort_by=").concat(c));if(e.ok){const t=await e.json();i(t.portfolios)}}catch(e){console.error("Error fetching portfolios:",e)}finally{h(!1)}},x=async e=>{try{await fetch("".concat(Ywe,"/portfolios/follow/").concat(e),{method:"POST"}),i(t=>t.map(t=>t.id===e?m(m({},t),{},{followers:t.followers+1}):t))}catch(t){console.error("Error following portfolio:",t)}},v=a.filter(e=>e.username.toLowerCase().includes(p.toLowerCase()));return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"portfolio-leaderboard",children:[(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(zm,{className:"text-yellow-400"}),"Leaderboard"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Top traders and their portfolios"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)(o1,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),(0,zt.jsx)("input",{type:"text",placeholder:"Search traders...",value:p,onChange:e=>f(e.target.value),className:"pl-9 pr-4 py-2 rounded-lg bg-black/40 border border-white/10 text-sm text-white outline-none focus:border-teal-500/50"})]}),(0,zt.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-3 py-2 rounded-lg bg-black/40 border border-white/10 text-sm text-white outline-none",children:[(0,zt.jsx)("option",{value:"total_value",children:"Total Value"}),(0,zt.jsx)("option",{value:"daily_pnl",children:"Daily P&L"}),(0,zt.jsx)("option",{value:"win_rate",children:"Win Rate"}),(0,zt.jsx)("option",{value:"followers",children:"Followers"})]})]})]}),d?(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-teal-500 border-t-transparent rounded-full"}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading leaderboard..."})]}):(0,zt.jsx)("div",{className:"overflow-hidden rounded-2xl bg-black/40 border border-white/10",children:(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"border-b border-white/10",children:[(0,zt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-mono text-slate-500",children:"RANK"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-mono text-slate-500",children:"TRADER"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"VALUE"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"DAILY P&L"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"WIN RATE"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-right text-xs font-mono text-slate-500",children:"FOLLOWERS"}),(0,zt.jsx)("th",{className:"px-4 py-3 text-center text-xs font-mono text-slate-500",children:"ACTIONS"})]})}),(0,zt.jsx)("tbody",{children:0===v.length?(0,zt.jsx)("tr",{children:(0,zt.jsxs)("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-400",children:[(0,zt.jsx)(zm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No traders found"})]})}):v.map((e,t)=>{var n,r;return(0,zt.jsxs)(uu.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,zt.jsx)("td",{className:"px-4 py-4",children:(0,zt.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-white/5",children:(r=e.rank,1===r?(0,zt.jsx)(Kwe,{className:"text-yellow-400",size:20}):2===r?(0,zt.jsx)(qwe,{className:"text-slate-300",size:20}):3===r?(0,zt.jsx)(qwe,{className:"text-amber-600",size:20}):(0,zt.jsxs)("span",{className:"text-slate-500 font-mono text-sm",children:["#",r]}))})}),(0,zt.jsx)("td",{className:"px-4 py-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center text-white font-bold",children:e.username[0]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-white font-semibold",children:e.username}),e.verified&&(0,zt.jsx)(Xwe,{className:"text-yellow-400 fill-yellow-400",size:14})]}),(0,zt.jsx)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:null===(n=e.top_holdings)||void 0===n?void 0:n.slice(0,3).join(" \u2022 ")})]})]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("span",{className:"text-white font-mono",children:["$",e.total_value.toLocaleString()]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("div",{className:"flex items-center justify-end gap-1 ".concat(e.daily_pnl>=0?"text-emerald-400":"text-red-400"),children:[e.daily_pnl>=0?(0,zt.jsx)(Fbe,{size:14}):(0,zt.jsx)(Lbe,{size:14}),(0,zt.jsxs)("span",{className:"font-mono",children:[e.daily_pnl>=0?"+":"","$",Math.abs(e.daily_pnl).toLocaleString()]}),(0,zt.jsxs)("span",{className:"text-xs",children:["(",e.daily_pnl_percent,"%)"]})]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,zt.jsxs)("span",{className:"text-white font-mono",children:[e.win_rate,"%"]}),(0,zt.jsx)("div",{className:"w-12 h-1.5 rounded-full bg-slate-700",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-teal-500",style:{width:"".concat(e.win_rate,"%")}})})]})}),(0,zt.jsx)("td",{className:"px-4 py-4 text-right",children:(0,zt.jsxs)("div",{className:"flex items-center justify-end gap-1 text-slate-400",children:[(0,zt.jsx)(Tm,{size:14}),(0,zt.jsx)("span",{className:"font-mono",children:e.followers.toLocaleString()})]})}),(0,zt.jsx)("td",{className:"px-4 py-4",children:(0,zt.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,zt.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("".concat(Ywe,"/portfolios/").concat(e));if(t.ok){const e=await t.json();l(e)}}catch(t){console.error("Error fetching portfolio:",t)}})(e.id),className:"p-2 rounded-lg bg-white/5 text-slate-400 hover:text-white transition-colors",title:"View Portfolio",children:(0,zt.jsx)(Iwe,{size:16})}),(0,zt.jsx)("button",{onClick:()=>x(e.id),className:"p-2 rounded-lg bg-teal-500/20 text-teal-400 hover:bg-teal-500/30 transition-colors",title:"Follow",children:(0,zt.jsx)(Zve,{size:16})})]})})]},e.id)})})]})})}),(0,zt.jsx)(rn,{children:s&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>l(null),children:(0,zt.jsxs)(uu.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto rounded-2xl bg-black/90 border border-white/10 p-6",onClick:e=>e.stopPropagation(),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold",children:s.username[0]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h3",{className:"text-xl font-bold text-white",children:s.username}),s.verified&&(0,zt.jsx)(Xwe,{className:"text-yellow-400 fill-yellow-400",size:18})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-500",children:s.bio}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[(0,zt.jsxs)("span",{children:[null===(e=s.followers)||void 0===e?void 0:e.toLocaleString()," followers"]}),(0,zt.jsxs)("span",{children:[s.following," following"]}),(0,zt.jsxs)("span",{children:["Joined ",s.joined_date]})]})]})]}),(0,zt.jsxs)(fx,{onClick:()=>x(s.id),variant:"teal",size:"sm",children:[(0,zt.jsx)(Zve,{size:14}),"Follow"]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Total Value"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:["$",null===(t=s.total_value)||void 0===t?void 0:t.toLocaleString()]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"All-Time Return"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:["+",s.all_time_return,"%"]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:[s.win_rate,"%"]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-xl bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Risk/Reward"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:[s.risk_reward_ratio,":1"]})]})]}),(0,zt.jsxs)("div",{className:"mb-6",children:[(0,zt.jsx)("h4",{className:"text-sm font-semibold text-white mb-3",children:"Holdings"}),(0,zt.jsx)("div",{className:"space-y-2",children:null===(n=s.holdings)||void 0===n?void 0:n.map((e,t)=>{var n,r;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"font-mono text-teal-400",children:e.symbol}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:[e.allocation,"%"]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-sm text-white",children:["$",null===(n=e.value)||void 0===n?void 0:n.toLocaleString()]}),(0,zt.jsxs)("p",{className:"text-xs ".concat(e.pnl>=0?"text-emerald-400":"text-red-400"),children:[e.pnl>=0?"+":"","$",null===(r=e.pnl)||void 0===r?void 0:r.toLocaleString()]})]})]},t)})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-teal-500/10 border border-teal-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)(Jve,{className:"text-teal-400",size:18}),(0,zt.jsx)("span",{className:"font-semibold text-teal-400",children:"Copy Trading"})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Automatically copy this trader's positions proportionally to your portfolio size."}),(0,zt.jsx)(fx,{variant:"teal",className:"w-full",children:"Enable Copy Trading"})]})]})})})]})},Qwe=km("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Jwe=km("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Zwe="".concat("https://srv1304213.hstgr.cloud/api","/api"),eke=()=>{var e,t,n,r,a,i,s,l,c;const{t:u}=af(),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)("BTC"),[m,g]=(0,o.useState)(null),[x,v]=(0,o.useState)(!0);(0,o.useEffect)(()=>{y(),b(p)},[p]);const y=async()=>{try{const e=await fetch("".concat(Zwe,"/social/trending"));if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching trending:",e)}finally{v(!1)}},b=async e=>{try{const t=await fetch("".concat(Zwe,"/social/sentiment/").concat(e));if(t.ok){const e=await t.json();g(e)}}catch(t){console.error("Error fetching sentiment:",t)}},w=e=>e>=.7?"text-emerald-400":e>=.55?"text-teal-400":e>=.45?"text-slate-400":e>=.3?"text-amber-400":"text-red-400",k=e=>e>=75?"text-emerald-400":e>=55?"text-teal-400":e>=45?"text-slate-400":e>=25?"text-amber-400":"text-red-400";return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"social-signals",children:[(0,zt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Lm,{className:"text-blue-400"}),"Social Signals"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Real-time social media sentiment analysis"})]}),(0,zt.jsxs)(fx,{onClick:y,variant:"white",size:"sm",children:[(0,zt.jsx)(awe,{size:14}),"Refresh"]})]}),x&&(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-blue-500 border-t-transparent rounded-full"}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading social signals..."})]}),!x&&(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d&&(0,zt.jsx)(cx,{title:"Fear & Greed Index",icon:"\ud83c\udfad",accent:"purple",children:(0,zt.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,zt.jsxs)("div",{className:"relative w-32 h-32",children:[(0,zt.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 100 100",children:[(0,zt.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),(0,zt.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"url(#fearGreedGradient)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:"".concat(2.51*d.fear_greed_index," 251")}),(0,zt.jsx)("defs",{children:(0,zt.jsxs)("linearGradient",{id:"fearGreedGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,zt.jsx)("stop",{offset:"0%",stopColor:"#ef4444"}),(0,zt.jsx)("stop",{offset:"50%",stopColor:"#f59e0b"}),(0,zt.jsx)("stop",{offset:"100%",stopColor:"#22c55e"})]})})]}),(0,zt.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,zt.jsx)("span",{className:"text-3xl font-bold ".concat(k(d.fear_greed_index)),children:d.fear_greed_index})})]}),(0,zt.jsx)("span",{className:"mt-2 text-lg font-semibold ".concat(k(d.fear_greed_index)),children:d.fear_greed_label}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 mt-1",children:["Updated ",new Date(d.updated_at).toLocaleTimeString()]})]})}),(0,zt.jsx)("div",{className:"lg:col-span-2",children:(0,zt.jsx)(cx,{title:"Trending Topics",icon:"\ud83d\udd25",accent:"orange",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===d||void 0===d||null===(e=d.trending)||void 0===e?void 0:e.map((e,t)=>{var n,r;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-3 rounded-xl border ".concat((r=e.sentiment_score,r>=.7?"bg-emerald-500/20 border-emerald-500/30":r>=.55?"bg-teal-500/20 border-teal-500/30":r>=.45?"bg-slate-500/20 border-slate-500/30":r>=.3?"bg-amber-500/20 border-amber-500/30":"bg-red-500/20 border-red-500/30")," cursor-pointer hover:scale-[1.02] transition-transform"),onClick:()=>{const t=e.topic.replace("#","").toUpperCase();["BTC","BITCOIN","ETH","ETHEREUM","SOL","SOLANA"].includes(t)&&f("BITCOIN"===t?"BTC":"ETHEREUM"===t?"ETH":"SOLANA"===t?"SOL":t)},children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(Qwe,{size:16,className:"text-slate-500"}),(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.topic}),"bullish"===e.sentiment?(0,zt.jsx)(mx,{size:14,className:"text-emerald-400"}):"bearish"===e.sentiment?(0,zt.jsx)(kx,{size:14,className:"text-red-400"}):null]}),(0,zt.jsx)("div",{className:"flex items-center gap-2",children:(0,zt.jsxs)("span",{className:"text-xs font-mono ".concat(e.change_24h>=0?"text-emerald-400":"text-red-400"),children:[e.change_24h>=0?"+":"",e.change_24h,"%"]})})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,zt.jsxs)("span",{children:[e.mentions.toLocaleString()," mentions"]}),(0,zt.jsx)("div",{className:"flex items-center gap-1",children:(0,zt.jsxs)("span",{className:w(e.sentiment_score),children:[(100*e.sentiment_score).toFixed(0),"% sentiment"]})})]}),(0,zt.jsx)("div",{className:"mt-2 space-y-1",children:null===(n=e.sample_tweets)||void 0===n?void 0:n.slice(0,1).map((e,t)=>(0,zt.jsxs)("p",{className:"text-xs text-slate-400 truncate",children:['"',e,'"']},t))})]},e.topic)})})})})]}),m&&(0,zt.jsxs)(cx,{title:"".concat(m.symbol," Sentiment Analysis"),icon:"\ud83d\udcca",accent:"blue",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,zt.jsxs)("div",{className:"flex flex-col items-center p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"text-4xl font-bold ".concat(w(m.sentiment_score)),children:[(100*m.sentiment_score).toFixed(0),"%"]}),(0,zt.jsx)("span",{className:"text-sm font-semibold mt-1 ".concat(w(m.sentiment_score)),children:m.sentiment_label}),(0,zt.jsx)("div",{className:"w-full h-2 rounded-full bg-slate-700 mt-3",children:(0,zt.jsx)("div",{className:"h-full rounded-full transition-all ".concat(m.sentiment_score>=.5?"bg-emerald-500":"bg-red-500"),style:{width:"".concat(100*m.sentiment_score,"%")}})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)(Em,{size:16,className:"text-teal-400"}),(0,zt.jsx)("span",{className:"text-sm text-slate-500",children:"24h Mentions"})]}),(0,zt.jsx)("div",{className:"text-2xl font-bold text-white mb-1",children:null===(t=m.mentions_24h)||void 0===t?void 0:t.toLocaleString()}),(0,zt.jsxs)("div",{className:"text-xs ".concat(m.mentions_change>=0?"text-emerald-400":"text-red-400"),children:[m.mentions_change>=0?"+":"",m.mentions_change,"% from yesterday"]}),(0,zt.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-slate-400",children:[(0,zt.jsx)(Jwe,{size:12})," Twitter"]}),(0,zt.jsx)("span",{className:"text-white",children:null===(n=m.sources)||void 0===n||null===(r=n.twitter)||void 0===r?void 0:r.toLocaleString()})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-slate-400",children:[(0,zt.jsx)(Lm,{size:12})," Reddit"]}),(0,zt.jsx)("span",{className:"text-white",children:null===(a=m.sources)||void 0===a||null===(i=a.reddit)||void 0===i?void 0:i.toLocaleString()})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-slate-400",children:[(0,zt.jsx)(Tm,{size:12})," Telegram"]}),(0,zt.jsx)("span",{className:"text-white",children:null===(s=m.sources)||void 0===s||null===(l=s.telegram)||void 0===l?void 0:l.toLocaleString()})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)(Tm,{size:16,className:"text-purple-400"}),(0,zt.jsx)("span",{className:"text-sm text-slate-500",children:"Key Influencers"})]}),(0,zt.jsx)("div",{className:"space-y-3",children:null===(c=m.key_influencers)||void 0===c?void 0:c.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("span",{className:"text-sm text-white",children:e.name}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:[(e.followers/1e3).toFixed(0),"K"]})]}),"bullish"===e.sentiment?(0,zt.jsx)($0,{size:14,className:"text-emerald-400"}):"bearish"===e.sentiment?(0,zt.jsx)(Q0,{size:14,className:"text-red-400"}):(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:"Neutral"})]},t))})]})]}),(0,zt.jsx)("div",{className:"mt-4 flex items-center gap-2 justify-center",children:["BTC","ETH","SOL","AAPL","NVDA"].map(e=>(0,zt.jsx)("button",{onClick:()=>f(e),className:"px-4 py-2 rounded-lg text-sm font-mono transition-all ".concat(p===e?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]})]})},tke=km("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),nke=km("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),rke=km("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),ake="https://srv1304213.hstgr.cloud/api/api",ike=()=>{var e,t;const{t:n}=af(),[r,a]=(0,o.useState)(null),[i,s]=(0,o.useState)(!0),[l,c]=(0,o.useState)({symbol:"BTC",side:"buy",quantity:.01,orderType:"market",stopLoss:"",takeProfit:""}),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(null),f=(0,o.useCallback)(async()=>{s(!0);try{const e=await fetch("".concat(ake,"/playground/account"),{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();a(t)}}catch(e){console.error("Error fetching account:",e)}finally{s(!1)}},[]),g=async()=>{if(null!==r&&void 0!==r&&r.id)try{const e=await fetch("".concat(ake,"/playground/account/").concat(r.id));if(e.ok){const t=await e.json();a(t)}}catch(e){console.error("Error refreshing account:",e)}};(0,o.useEffect)(()=>{f()},[f]),(0,o.useEffect)(()=>{const e=setInterval(g,3e4);return()=>clearInterval(e)},[null===r||void 0===r?void 0:r.id]);const x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e||0),v=e=>"".concat(e>=0?"+":"").concat((e||0).toFixed(2),"%");return i?(0,zt.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,zt.jsx)(awe,{className:"animate-spin text-teal-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading playground..."})]}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"trading-playground",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Trading Playground"}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Practice trading with $100,000 virtual money"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)(fx,{onClick:g,variant:"white",size:"sm",children:[(0,zt.jsx)(awe,{size:16}),"Refresh"]}),(0,zt.jsxs)(fx,{onClick:async()=>{if(null!==r&&void 0!==r&&r.id&&window.confirm("Reset account to $100,000? All positions will be closed."))try{const e=await fetch("".concat(ake,"/playground/reset/").concat(r.id,"?initial_balance=100000"),{method:"POST"});if(e.ok){const t=await e.json();a(t.account),p({type:"success",text:"Account reset successfully!"})}}catch(e){p({type:"error",text:"Failed to reset account"})}},variant:"danger",size:"sm",children:[(0,zt.jsx)(tke,{size:16}),"Reset Account"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(cx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-teal-500/20",children:(0,zt.jsx)(Fm,{size:20,className:"text-teal-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Cash Balance"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-white",children:x(null===r||void 0===r?void 0:r.current_balance)})]})]})}),(0,zt.jsx)(cx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/20",children:(0,zt.jsx)(Mm,{size:20,className:"text-blue-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Equity"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold text-white",children:x(null===r||void 0===r?void 0:r.total_equity)})]})]})}),(0,zt.jsx)(cx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat((null===r||void 0===r?void 0:r.total_pnl)>=0?"bg-green-500/20":"bg-red-500/20"),children:(null===r||void 0===r?void 0:r.total_pnl)>=0?(0,zt.jsx)(mx,{size:20,className:"text-green-400"}):(0,zt.jsx)(kx,{size:20,className:"text-red-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total P&L"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold ".concat((null===r||void 0===r?void 0:r.total_pnl)>=0?"text-green-400":"text-red-400"),children:x(null===r||void 0===r?void 0:r.total_pnl)})]})]})}),(0,zt.jsx)(cx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat((null===r||void 0===r?void 0:r.total_pnl_percent)>=0?"bg-green-500/20":"bg-red-500/20"),children:(0,zt.jsx)(Wm,{size:20,className:(null===r||void 0===r?void 0:r.total_pnl_percent)>=0?"text-green-400":"text-red-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Return"}),(0,zt.jsx)("p",{className:"text-lg font-mono font-bold ".concat((null===r||void 0===r?void 0:r.total_pnl_percent)>=0?"text-green-400":"text-red-400"),children:v(null===r||void 0===r?void 0:r.total_pnl_percent)})]})]})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,zt.jsx)(cx,{title:"Place Order",icon:"\ud83d\udcca",accent:"cyan",className:"lg:col-span-1",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:["BTC","ETH","SOL","XRP","ADA","DOGE","AVAX","LINK"].map(e=>(0,zt.jsx)("button",{onClick:()=>c(t=>m(m({},t),{},{symbol:e})),className:"px-3 py-1.5 rounded-lg text-sm font-mono transition-colors ".concat(l.symbol===e?"bg-teal-500/30 text-teal-400 border border-teal-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Side"}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)("button",{onClick:()=>c(e=>m(m({},e),{},{side:"buy"})),className:"flex-1 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ".concat("buy"===l.side?"bg-green-500/30 text-green-400 border border-green-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(nke,{size:18}),"BUY"]}),(0,zt.jsxs)("button",{onClick:()=>c(e=>m(m({},e),{},{side:"sell"})),className:"flex-1 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ".concat("sell"===l.side?"bg-red-500/30 text-red-400 border border-red-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(rke,{size:18}),"SELL"]})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Quantity"}),(0,zt.jsx)("input",{type:"number",value:l.quantity,onChange:e=>c(t=>m(m({},t),{},{quantity:parseFloat(e.target.value)||0})),className:"w-full px-4 py-3 rounded-lg bg-black/40 border border-white/10 text-white font-mono outline-none focus:border-teal-500/50",step:"0.01",min:"0.001"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("label",{className:"text-xs text-slate-500 mb-1 block flex items-center gap-1",children:[(0,zt.jsx)(Im,{size:12}),"Stop Loss (optional)"]}),(0,zt.jsx)("input",{type:"number",value:l.stopLoss,onChange:e=>c(t=>m(m({},t),{},{stopLoss:e.target.value})),placeholder:"Price to cut losses",className:"w-full px-4 py-2 rounded-lg bg-black/40 border border-white/10 text-white font-mono text-sm outline-none focus:border-red-500/50"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("label",{className:"text-xs text-slate-500 mb-1 block flex items-center gap-1",children:[(0,zt.jsx)(Jbe,{size:12}),"Take Profit (optional)"]}),(0,zt.jsx)("input",{type:"number",value:l.takeProfit,onChange:e=>c(t=>m(m({},t),{},{takeProfit:e.target.value})),placeholder:"Price to take profit",className:"w-full px-4 py-2 rounded-lg bg-black/40 border border-white/10 text-white font-mono text-sm outline-none focus:border-green-500/50"})]}),(0,zt.jsx)(rn,{children:h&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"p-3 rounded-lg text-sm ".concat("success"===h.type?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:h.text})}),(0,zt.jsx)(fx,{onClick:async()=>{if(null!==r&&void 0!==r&&r.id){d(!0),p(null);try{const t=new URLSearchParams({account_id:r.id,symbol:l.symbol,side:l.side,order_type:l.orderType,quantity:l.quantity.toString()});l.stopLoss&&t.append("stop_loss",l.stopLoss),l.takeProfit&&t.append("take_profit",l.takeProfit);const n=await fetch("".concat(ake,"/playground/order?").concat(t),{method:"POST"}),a=await n.json();var e;if(a.success)p({type:"success",text:"Order ".concat((null===(e=a.order)||void 0===e?void 0:e.status)||"placed","!")}),await g();else p({type:"error",text:a.error||"Order failed"})}catch(t){p({type:"error",text:"Failed to place order"})}finally{d(!1)}}},variant:"buy"===l.side?"cyan":"danger",size:"lg",className:"w-full",disabled:u,children:u?(0,zt.jsx)(awe,{size:18,className:"animate-spin"}):(0,zt.jsxs)(zt.Fragment,{children:["buy"===l.side?(0,zt.jsx)(nke,{size:18}):(0,zt.jsx)(rke,{size:18}),l.side.toUpperCase()," ",l.quantity," ",l.symbol]})})]})}),(0,zt.jsx)(cx,{title:"Open Positions",icon:"\ud83d\udcc8",accent:"green",className:"lg:col-span-2",children:(null===r||void 0===r||null===(e=r.positions)||void 0===e?void 0:e.length)>0?(0,zt.jsx)("div",{className:"space-y-3",children:r.positions.map((e,t)=>{var n,r,a;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("long"===e.side?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:null===(n=e.side)||void 0===n?void 0:n.toUpperCase()}),(0,zt.jsx)("span",{className:"text-white font-bold",children:e.symbol}),(0,zt.jsx)("span",{className:"text-slate-400 text-sm font-mono",children:e.quantity})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"font-mono font-bold ".concat(e.unrealized_pnl>=0?"text-green-400":"text-red-400"),children:x(e.unrealized_pnl)}),(0,zt.jsx)("p",{className:"text-xs font-mono ".concat(e.unrealized_pnl_percent>=0?"text-green-400":"text-red-400"),children:v(e.unrealized_pnl_percent)})]})]}),(0,zt.jsxs)("div",{className:"mt-2 flex gap-4 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{children:["Entry: $",null===(r=e.entry_price)||void 0===r?void 0:r.toFixed(2)]}),(0,zt.jsxs)("span",{children:["Current: $",null===(a=e.current_price)||void 0===a?void 0:a.toFixed(2)]}),e.stop_loss&&(0,zt.jsxs)("span",{className:"text-red-400",children:["SL: $",e.stop_loss]}),e.take_profit&&(0,zt.jsxs)("span",{className:"text-green-400",children:["TP: $",e.take_profit]})]})]},e.id||t)})}):(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[(0,zt.jsx)(Mm,{size:48,className:"mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No open positions"}),(0,zt.jsx)("p",{className:"text-sm mt-1",children:"Place your first trade!"})]})})]}),(0,zt.jsx)(cx,{title:"Recent Trades",icon:"\ud83d\udcdc",accent:"purple",children:(null===r||void 0===r||null===(t=r.trade_history)||void 0===t?void 0:t.length)>0?(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"text-left text-xs text-slate-500 border-b border-white/10",children:[(0,zt.jsx)("th",{className:"pb-2",children:"Symbol"}),(0,zt.jsx)("th",{className:"pb-2",children:"Side"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Quantity"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Price"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Value"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Fees"}),(0,zt.jsx)("th",{className:"pb-2 text-right",children:"Time"})]})}),(0,zt.jsx)("tbody",{children:r.trade_history.slice(-10).reverse().map((e,t)=>{var n,r,a,i;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-2 font-mono text-white",children:e.symbol}),(0,zt.jsx)("td",{className:"py-2",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("buy"===e.side?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:null===(n=e.side)||void 0===n?void 0:n.toUpperCase()})}),(0,zt.jsx)("td",{className:"py-2 text-right font-mono text-slate-300",children:e.quantity}),(0,zt.jsxs)("td",{className:"py-2 text-right font-mono text-slate-300",children:["$",null===(r=e.price)||void 0===r?void 0:r.toFixed(2)]}),(0,zt.jsxs)("td",{className:"py-2 text-right font-mono text-slate-300",children:["$",null===(a=e.value)||void 0===a?void 0:a.toFixed(2)]}),(0,zt.jsxs)("td",{className:"py-2 text-right font-mono text-slate-500",children:["$",null===(i=e.fees)||void 0===i?void 0:i.toFixed(4)]}),(0,zt.jsx)("td",{className:"py-2 text-right text-xs text-slate-500",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id||t)})})]})}):(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[(0,zt.jsx)(dwe,{size:32,className:"mb-2 opacity-50"}),(0,zt.jsx)("p",{className:"text-sm",children:"No trades yet"})]})})]})},ske="https://srv1304213.hstgr.cloud/api/api",oke=e=>{var t,n,r,a,i,s;let{accountId:l}=e;const[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)([]),[g,x]=(0,o.useState)(null),[v,y]=(0,o.useState)(!0),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)({strategy:"moderate",tradingPairs:["BTC","ETH","SOL"]}),S=(0,o.useCallback)(async()=>{try{const t=await fetch("".concat(ske,"/bot/user/bots"));if(t.ok){var e;const n=await t.json();h(n.bots||[]),(null===(e=n.bots)||void 0===e?void 0:e.length)>0&&!c&&u(n.bots[0])}}catch(t){console.error("Error fetching bots:",t)}finally{y(!1)}},[c]),j=async e=>{try{const t=await fetch("".concat(ske,"/bot/").concat(e,"/performance"));if(t.ok){const e=await t.json();x(e)}}catch(t){console.error("Error fetching performance:",t)}},C=async e=>{try{const t=await fetch("".concat(ske,"/bot/").concat(e,"/signals"));if(t.ok){const e=await t.json();f(e.signals||[])}}catch(t){console.error("Error fetching signals:",t)}},E=async(e,t)=>{try{const n=await fetch("".concat(ske,"/bot/").concat(e,"/mode?mode=").concat(t),{method:"POST"});if(n.ok){await n.json();u(e=>e?m(m({},e),{},{mode:t,is_active:"paused"!==t}):null)}}catch(n){console.error("Error setting bot mode:",n)}};(0,o.useEffect)(()=>{S()},[S]),(0,o.useEffect)(()=>{if(c){j(c.id),C(c.id);const e=setInterval(()=>{j(c.id),C(c.id)},1e4);return()=>clearInterval(e)}},[null===c||void 0===c?void 0:c.id]);const T=e=>{switch(e){case"strong_buy":return"text-green-400 bg-green-500/20";case"buy":return"text-green-300 bg-green-500/10";case"strong_sell":return"text-red-400 bg-red-500/20";case"sell":return"text-red-300 bg-red-500/10";default:return"text-slate-400 bg-slate-500/20"}};return v?(0,zt.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,zt.jsx)(awe,{className:"animate-spin text-teal-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading bot..."})]}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"autonomous-bot",children:[(0,zt.jsx)("div",{className:"flex items-center justify-between",children:(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(Sm,{className:"text-teal-400"}),"AI Trading Bot"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Autonomous trading with AI-powered analysis"})]})}),c?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(cx,{className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Status"}),(0,zt.jsx)("p",{className:"font-semibold ".concat(c.is_active?"text-green-400":"text-slate-400"),children:c.is_active?"Active":"Paused"})]}),(0,zt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(c.is_active?"bg-green-400 animate-pulse":"bg-slate-500")})]})}),(0,zt.jsxs)(cx,{className:"p-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Mode"}),(0,zt.jsx)("p",{className:"px-2 py-0.5 rounded text-sm inline-block mt-1 ".concat((e=>{switch(e){case"full_auto":return"bg-green-500/20 text-green-400 border-green-500/50";case"semi_auto":return"bg-amber-500/20 text-amber-400 border-amber-500/50";default:return"bg-slate-500/20 text-slate-400 border-slate-500/50"}})(c.mode)),children:null===(t=c.mode)||void 0===t?void 0:t.replace("_"," ").toUpperCase()})]}),(0,zt.jsxs)(cx,{className:"p-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Trades"}),(0,zt.jsx)("p",{className:"text-xl font-mono font-bold text-white",children:(null===g||void 0===g?void 0:g.total_trades)||0})]}),(0,zt.jsxs)(cx,{className:"p-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-xl font-mono font-bold text-teal-400",children:[((null===g||void 0===g?void 0:g.win_rate)||0).toFixed(1),"%"]})]})]}),(0,zt.jsxs)(cx,{title:"Bot Controls",icon:"\u2699\ufe0f",accent:"purple",children:[(0,zt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,zt.jsxs)(fx,{onClick:()=>E(c.id,"full_auto"),variant:"full_auto"===c.mode?"cyan":"white",size:"sm",children:[(0,zt.jsx)(Om,{size:16}),"Full Auto"]}),(0,zt.jsxs)(fx,{onClick:()=>E(c.id,"semi_auto"),variant:"semi_auto"===c.mode?"cyan":"white",size:"sm",children:[(0,zt.jsx)(Nm,{size:16}),"Semi-Auto"]}),(0,zt.jsxs)(fx,{onClick:()=>E(c.id,"paused"),variant:"paused"===c.mode?"danger":"white",size:"sm",children:[(0,zt.jsx)(Bm,{size:16}),"Pause"]}),(0,zt.jsx)("div",{className:"flex-1"}),(0,zt.jsxs)(fx,{onClick:async()=>{if(c)try{const e=await fetch("".concat(ske,"/bot/").concat(c.id,"/analyze?symbol=BTC"),{method:"POST"});if(e.ok){const t=await e.json();t.signal&&f(e=>[t.signal,...e])}}catch(e){console.error("Error triggering analysis:",e)}},variant:"white",size:"sm",children:[(0,zt.jsx)(Em,{size:16}),"Analyze Now"]})]}),(0,zt.jsxs)("div",{className:"mt-4 p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Im,{size:14,className:"text-amber-400"}),"Risk Settings"]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Max Trade Size"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:[null===(n=c.risk_settings)||void 0===n?void 0:n.max_trade_size_percent,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Daily Loss Limit"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:[null===(r=c.risk_settings)||void 0===r?void 0:r.daily_loss_limit_percent,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Stop Loss"}),(0,zt.jsxs)("p",{className:"text-red-400 font-mono",children:[null===(a=c.risk_settings)||void 0===a?void 0:a.stop_loss_percent,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Take Profit"}),(0,zt.jsxs)("p",{className:"text-green-400 font-mono",children:[null===(i=c.risk_settings)||void 0===i?void 0:i.take_profit_percent,"%"]})]})]})]})]}),"semi_auto"===c.mode&&(0,zt.jsx)(cx,{title:"Pending Signals",icon:"\ud83d\udce1",accent:"amber",children:p.length>0?(0,zt.jsx)("div",{className:"space-y-3",children:p.map(e=>{var t,n,r,a,i,s;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-white font-bold",children:e.symbol}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-semibold ".concat(T(e.signal)),children:null===(t=e.signal)||void 0===t?void 0:t.replace("_"," ").toUpperCase()}),(0,zt.jsxs)("span",{className:"text-slate-400 text-sm",children:[(100*e.confidence).toFixed(0),"% confidence"]})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("".concat(ske,"/bot/signal/").concat(e,"/approve"),{method:"POST"})).ok&&(f(t=>t.filter(t=>t.id!==e)),c&&j(c.id))}catch(t){console.error("Error approving signal:",t)}})(e.id),className:"p-2 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30",children:(0,zt.jsx)(e1,{size:18})}),(0,zt.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("".concat(ske,"/bot/signal/").concat(e,"/reject"),{method:"POST"})).ok&&f(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Error rejecting signal:",t)}})(e.id),className:"p-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30",children:(0,zt.jsx)(t1,{size:18})})]})]}),(0,zt.jsx)("div",{className:"space-y-1",children:null===(n=e.reasoning)||void 0===n?void 0:n.slice(0,3).map((e,t)=>(0,zt.jsxs)("p",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,zt.jsx)("span",{className:"text-teal-400",children:"\u2022"})," ",e]},t))}),"hold"!==e.action&&(0,zt.jsxs)("div",{className:"mt-3 flex gap-4 text-xs",children:[(0,zt.jsxs)("span",{className:"text-slate-500",children:["Action: ",(0,zt.jsx)("span",{className:"buy"===e.action?"text-green-400":"text-red-400",children:null===(r=e.action)||void 0===r?void 0:r.toUpperCase()})]}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["Qty: ",(0,zt.jsx)("span",{className:"text-white",children:null===(a=e.quantity)||void 0===a?void 0:a.toFixed(4)})]}),e.stop_loss&&(0,zt.jsxs)("span",{className:"text-slate-500",children:["SL: ",(0,zt.jsxs)("span",{className:"text-red-400",children:["$",null===(i=e.stop_loss)||void 0===i?void 0:i.toFixed(0)]})]}),e.take_profit&&(0,zt.jsxs)("span",{className:"text-slate-500",children:["TP: ",(0,zt.jsxs)("span",{className:"text-green-400",children:["$",null===(s=e.take_profit)||void 0===s?void 0:s.toFixed(0)]})]})]})]},e.id)})}):(0,zt.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,zt.jsx)(Em,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,zt.jsx)("p",{children:"No pending signals"}),(0,zt.jsx)("p",{className:"text-sm mt-1",children:"Bot is analyzing the market..."})]})}),(0,zt.jsx)(cx,{title:"Recent Analysis",icon:"\ud83d\udcca",accent:"blue",children:(null===g||void 0===g||null===(s=g.recent_signals)||void 0===s?void 0:s.length)>0?(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full text-sm",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"text-left text-xs text-slate-500 border-b border-white/10",children:[(0,zt.jsx)("th",{className:"pb-2",children:"Symbol"}),(0,zt.jsx)("th",{className:"pb-2",children:"Signal"}),(0,zt.jsx)("th",{className:"pb-2",children:"Action"}),(0,zt.jsx)("th",{className:"pb-2",children:"Confidence"}),(0,zt.jsx)("th",{className:"pb-2",children:"Status"}),(0,zt.jsx)("th",{className:"pb-2",children:"Time"})]})}),(0,zt.jsx)("tbody",{children:g.recent_signals.map(e=>{var t;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-2 font-mono text-white",children:e.symbol}),(0,zt.jsx)("td",{className:"py-2",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(T(e.signal)),children:null===(t=e.signal)||void 0===t?void 0:t.replace("_"," ")})}),(0,zt.jsx)("td",{className:"py-2 capitalize text-slate-300",children:e.action}),(0,zt.jsxs)("td",{className:"py-2 font-mono text-teal-400",children:[(100*e.confidence).toFixed(0),"%"]}),(0,zt.jsx)("td",{className:"py-2",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("executed"===e.status?"bg-green-500/20 text-green-400":"rejected"===e.status?"bg-red-500/20 text-red-400":"bg-slate-500/20 text-slate-400"),children:e.status})}),(0,zt.jsx)("td",{className:"py-2 text-xs text-slate-500",children:new Date(e.created_at).toLocaleTimeString()})]},e.id)})})]})}):(0,zt.jsx)("p",{className:"text-center py-4 text-slate-400",children:"No recent signals"})})]}):(0,zt.jsx)(cx,{title:"Create Trading Bot",icon:"\ud83e\udd16",accent:"cyan",children:(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-sm text-slate-400 mb-2 block",children:"Trading Strategy"}),(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{id:"conservative",name:"Conservative",icon:Im,desc:"Low risk, steady gains"},{id:"moderate",name:"Moderate",icon:jm,desc:"Balanced approach"},{id:"aggressive",name:"Aggressive",icon:Om,desc:"Higher risk/reward"}].map(e=>(0,zt.jsxs)("button",{onClick:()=>N(t=>m(m({},t),{},{strategy:e.id})),className:"p-4 rounded-xl border transition-all ".concat(k.strategy===e.id?"border-teal-500/50 bg-teal-500/10":"border-white/10 bg-white/5 hover:bg-white/10"),children:[(0,zt.jsx)(e.icon,{className:"mx-auto mb-2 ".concat(k.strategy===e.id?"text-teal-400":"text-slate-400"),size:24}),(0,zt.jsx)("p",{className:"font-semibold ".concat(k.strategy===e.id?"text-white":"text-slate-300"),children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.desc})]},e.id))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-sm text-slate-400 mb-2 block",children:"Trading Pairs"}),(0,zt.jsx)("div",{className:"flex flex-wrap gap-2",children:["BTC","ETH","SOL","XRP","ADA","DOGE","AVAX","LINK"].map(e=>(0,zt.jsx)("button",{onClick:()=>{N(t=>m(m({},t),{},{tradingPairs:t.tradingPairs.includes(e)?t.tradingPairs.filter(t=>t!==e):[...t.tradingPairs,e]}))},className:"px-3 py-1.5 rounded-lg text-sm font-mono transition-colors ".concat(k.tradingPairs.includes(e)?"bg-teal-500/30 text-teal-400 border border-teal-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]}),(0,zt.jsx)(fx,{onClick:async()=>{if(l){w(!0);try{const e=new URLSearchParams({account_id:l,strategy:k.strategy});k.tradingPairs.forEach(t=>e.append("trading_pairs",t));const t=await fetch("".concat(ske,"/bot/create?").concat(e),{method:"POST"});if(t.ok){const e=await t.json();u(e),h(t=>[...t,e])}}catch(e){console.error("Error creating bot:",e)}finally{w(!1)}}else alert("Please create a playground account first")},variant:"cyan",size:"lg",className:"w-full",disabled:b,children:b?(0,zt.jsx)(awe,{className:"animate-spin",size:18}):(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(Sm,{size:18}),"Create Trading Bot"]})})]})})]})},lke=km("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),cke=km("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),uke="https://srv1304213.hstgr.cloud/api/api",dke=()=>{var e,t;const[n,r]=(0,o.useState)({tutorials:[],lessons:[],scenarios:[]}),[a,i]=(0,o.useState)(null),[s,l]=(0,o.useState)("tutorials"),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0),p=(0,o.useCallback)(async()=>{try{const e=await fetch("".concat(uke,"/training/content"));if(e.ok){const t=await e.json();r(t)}}catch(e){console.error("Error fetching content:",e)}},[]),f=(0,o.useCallback)(async()=>{try{const e=await fetch("".concat(uke,"/training/progress"));if(e.ok){const t=await e.json();i(t)}}catch(e){console.error("Error fetching progress:",e)}finally{h(!1)}},[]);(0,o.useEffect)(()=>{p(),f()},[p,f]);const m=(e,t)=>{var n,r,i;return!!a&&("tutorial"===e?null===(n=a.completed_tutorials)||void 0===n?void 0:n.includes(t):"lesson"===e?null===(r=a.completed_lessons)||void 0===r?void 0:r.includes(t):"scenario"===e&&(null===(i=a.completed_scenarios)||void 0===i?void 0:i.some(e=>e.scenario_id===t)))},g=e=>{switch(e){case"beginner":return"text-green-400 bg-green-500/20";case"intermediate":return"text-amber-400 bg-amber-500/20";case"advanced":return"text-red-400 bg-red-500/20";case"expert":return"text-purple-400 bg-purple-500/20";default:return"text-slate-400 bg-slate-500/20"}},x=e=>{switch(e){case"basics":return lke;case"technical_analysis":return jm;case"risk_management":return Jbe;case"psychology":return Om;default:return cke}};return d?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-teal-500 border-t-transparent rounded-full"})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"training-center",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(lke,{className:"text-teal-400"}),"Training Center"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Learn to trade like a pro"})]}),a&&(0,zt.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-black/40 border border-white/10",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center",children:(0,zt.jsx)("span",{className:"text-white font-bold",children:a.current_level})}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Level"})]}),(0,zt.jsxs)("div",{className:"flex-1 min-w-[120px]",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"XP"}),(0,zt.jsx)("span",{className:"text-teal-400",children:a.total_xp})]}),(0,zt.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-teal-500 to-cyan-400",style:{width:"".concat(Math.min(100,a.total_xp%500/5),"%")}})})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)(zm,{className:"text-amber-400 mx-auto",size:24}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[(null===(e=a.badges)||void 0===e?void 0:e.length)||0," Badges"]})]})]})]}),(null===a||void 0===a?void 0:a.skills)&&(0,zt.jsx)(cx,{title:"Your Skills",icon:"\ud83d\udcaa",accent:"cyan",children:(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(a.skills).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsxs)("div",{className:"relative w-16 h-16 mx-auto",children:[(0,zt.jsxs)("svg",{className:"w-full h-full -rotate-90",children:[(0,zt.jsx)("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4"}),(0,zt.jsx)("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"url(#skillGradient)",strokeWidth:"4",strokeDasharray:"".concat(1.76*n," 176"),strokeLinecap:"round"}),(0,zt.jsx)("defs",{children:(0,zt.jsxs)("linearGradient",{id:"skillGradient",children:[(0,zt.jsx)("stop",{offset:"0%",stopColor:"#14b8a6"}),(0,zt.jsx)("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),(0,zt.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-white font-mono text-sm",children:n})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mt-2 capitalize",children:t.replace("_"," ")})]},t)})})}),(0,zt.jsx)("div",{className:"flex gap-2 border-b border-white/10 pb-2",children:[{id:"tutorials",label:"Tutorials",icon:Rm},{id:"lessons",label:"Lessons",icon:cke},{id:"scenarios",label:"Scenarios",icon:Jbe}].map(e=>(0,zt.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(s===e.id?"bg-teal-500/20 text-teal-400":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))}),(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,zt.jsxs)(rn,{mode:"wait",children:["tutorials"===s&&n.tutorials.map((e,t)=>{var n;const r=m("tutorial",e.id),a=x(e.category);return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},children:(0,zt.jsxs)("div",{className:"p-4 rounded-xl border transition-all cursor-pointer ".concat(r?"bg-green-500/5 border-green-500/30":"bg-white/5 border-white/10 hover:border-teal-500/50"),onClick:()=>u({type:"tutorial",data:e}),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(r?"bg-green-500/20":"bg-teal-500/20"),children:r?(0,zt.jsx)(e1,{className:"text-green-400",size:20}):(0,zt.jsx)(a,{className:"text-teal-400",size:20})}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g(e.difficulty)),children:e.difficulty})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-amber-400",children:[(0,zt.jsx)(Xwe,{size:14}),(0,zt.jsxs)("span",{className:"text-xs",children:[(null===(n=e.rewards)||void 0===n?void 0:n.xp)||100," XP"]})]})]}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-3",children:e.description}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[(0,zt.jsx)(ewe,{size:12}),e.estimated_time_minutes," min"]}),(0,zt.jsx)(Vm,{className:"text-slate-500",size:16})]})]})},e.id)}),"lessons"===s&&n.lessons.map((e,t)=>{var n;const r=m("lesson",e.id),a=x(e.category);return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,zt.jsxs)("div",{className:"p-4 rounded-xl border transition-all cursor-pointer ".concat(r?"bg-green-500/5 border-green-500/30":"bg-white/5 border-white/10 hover:border-teal-500/50"),onClick:()=>u({type:"lesson",data:e}),children:[(0,zt.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(r?"bg-green-500/20":"bg-blue-500/20"),children:r?(0,zt.jsx)(e1,{className:"text-green-400",size:20}):(0,zt.jsx)(a,{className:"text-blue-400",size:20})}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g(e.difficulty)),children:e.difficulty})]})}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-3",children:e.description}),(null===(n=e.key_concepts)||void 0===n?void 0:n.length)>0&&(0,zt.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.key_concepts.slice(0,3).map(e=>(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs bg-white/10 text-slate-300",children:e},e))}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[(0,zt.jsx)(ewe,{size:12}),e.estimated_time_minutes," min"]}),(0,zt.jsx)(Vm,{className:"text-slate-500",size:16})]})]})},e.id)}),"scenarios"===s&&n.scenarios.map((e,t)=>{var n;const r=m("scenario",e.id),i=null===a||void 0===a||null===(n=a.completed_scenarios)||void 0===n?void 0:n.find(t=>t.scenario_id===e.id);return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,zt.jsxs)("div",{className:"p-4 rounded-xl border transition-all cursor-pointer ".concat(r?"bg-green-500/5 border-green-500/30":"bg-white/5 border-white/10 hover:border-teal-500/50"),onClick:()=>u({type:"scenario",data:e}),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(r?"bg-green-500/20":"bg-purple-500/20"),children:r?(0,zt.jsx)(e1,{className:"text-green-400",size:20}):(0,zt.jsx)(Jbe,{className:"text-purple-400",size:20})}),(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(g(e.difficulty)),children:e.difficulty})]}),i&&(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-amber-400",children:[(0,zt.jsx)(Cm,{size:14}),(0,zt.jsxs)("span",{className:"text-xs",children:[i.score,"/100"]})]})]}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1",children:e.title}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mb-3",children:e.description}),(0,zt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,zt.jsxs)("span",{className:"text-slate-500",children:["Target: ",(0,zt.jsxs)("span",{className:"text-green-400",children:["+",e.target_profit_percent,"%"]})]}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["Max DD: ",(0,zt.jsxs)("span",{className:"text-red-400",children:[e.max_drawdown_percent,"%"]})]})]})]})},e.id)})]})}),(0,zt.jsx)(rn,{children:c&&(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:()=>u(null),children:(0,zt.jsxs)(uu.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto rounded-2xl bg-slate-900 border border-white/10 p-6",onClick:e=>e.stopPropagation(),children:[(0,zt.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:c.data.title}),(0,zt.jsx)("p",{className:"text-slate-400 mb-4",children:c.data.description}),"lesson"===c.type&&c.data.content&&(0,zt.jsx)("div",{className:"prose prose-invert prose-sm max-w-none mb-4",children:(0,zt.jsx)("pre",{className:"whitespace-pre-wrap text-slate-300 text-sm bg-black/40 p-4 rounded-lg",children:c.data.content})}),"tutorial"===c.type&&c.data.steps&&(0,zt.jsx)("div",{className:"space-y-3 mb-4",children:c.data.steps.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-black/40 border border-white/10",children:[(0,zt.jsxs)("p",{className:"text-teal-400 text-sm font-semibold",children:["Step ",e.order,": ",e.title]}),(0,zt.jsx)("p",{className:"text-slate-300 text-sm mt-1",children:e.content})]},e.id))}),"scenario"===c.type&&(0,zt.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-black/40",children:[(0,zt.jsxs)("p",{className:"text-sm text-slate-400",children:["Starting Balance: ",(0,zt.jsxs)("span",{className:"text-white",children:["$",c.data.initial_balance]})]}),(0,zt.jsxs)("p",{className:"text-sm text-slate-400",children:["Time Limit: ",(0,zt.jsxs)("span",{className:"text-white",children:[c.data.time_limit_minutes," minutes"]})]})]}),(null===(t=c.data.hints)||void 0===t?void 0:t.length)>0&&(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,zt.jsx)("p",{className:"text-amber-400 text-sm font-semibold mb-2",children:"\ud83d\udca1 Hints"}),c.data.hints.map((e,t)=>(0,zt.jsxs)("p",{className:"text-slate-300 text-sm",children:["\u2022 ",e]},t))]})]}),(0,zt.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,zt.jsx)(fx,{onClick:()=>u(null),variant:"white",size:"sm",children:"Close"}),!m(c.type,c.data.id)&&(0,zt.jsxs)(fx,{onClick:async()=>{"tutorial"===c.type?await(async e=>{try{const t=await fetch("".concat(uke,"/training/tutorial/").concat(e,"/complete"),{method:"POST"});if(t.ok){const e=await t.json();return await f(),e}}catch(t){console.error("Error completing tutorial:",t)}})(c.data.id):"lesson"===c.type&&await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{(await fetch("".concat(uke,"/training/lesson/").concat(e,"/complete?quiz_score=").concat(t),{method:"POST"})).ok&&await f()}catch(n){console.error("Error completing lesson:",n)}}(c.data.id),u(null)},variant:"cyan",size:"sm",children:[(0,zt.jsx)(e1,{size:16}),"Mark Complete"]})]})]})})})]})},hke="https://srv1304213.hstgr.cloud/api/api",pke=()=>{var e,t,n,r,a,i,s,l,c,u,d,h,p,f,m,g,x,v,y,b,w,k,N,S,j,C,E,T,I,A,O,_,R,P,M,D,F,L,z;const[B,U]=(0,o.useState)("BTC"),[W,V]=(0,o.useState)("24h"),[H,G]=(0,o.useState)(null),[K,q]=(0,o.useState)(!1),[X,Y]=(0,o.useState)(null),$=(0,o.useCallback)(async()=>{q(!0);try{const e=await fetch("".concat(hke,"/ml/predict/comprehensive/").concat(B,"?horizon=").concat(W));if(e.ok){const t=await e.json();G(t)}}catch(e){console.error("Error fetching prediction:",e)}finally{q(!1)}},[B,W]);(0,o.useEffect)(()=>{$(),(async()=>{try{const e=await fetch("".concat(hke,"/ml/accuracy"));if(e.ok){const t=await e.json();Y(t)}}catch(e){console.error("Error fetching accuracy:",e)}})()},[$]);return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"ml-predictions",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(Nm,{className:"text-purple-400"}),"AI Market Predictions"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"ML-powered price, volatility, and trend analysis"})]}),(0,zt.jsxs)(fx,{onClick:$,variant:"white",size:"sm",disabled:K,children:[(0,zt.jsx)(awe,{size:16,className:K?"animate-spin":""}),"Refresh"]})]}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Symbol"}),(0,zt.jsx)("div",{className:"flex gap-2",children:["BTC","ETH","SOL","XRP","ADA","DOGE"].map(e=>(0,zt.jsx)("button",{onClick:()=>U(e),className:"px-3 py-1.5 rounded-lg text-sm font-mono transition-colors ".concat(B===e?"bg-purple-500/30 text-purple-400 border border-purple-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e},e))})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Time Horizon"}),(0,zt.jsx)("div",{className:"flex gap-2",children:[{id:"1h",label:"1 Hour"},{id:"4h",label:"4 Hours"},{id:"24h",label:"24 Hours"},{id:"1w",label:"1 Week"}].map(e=>(0,zt.jsx)("button",{onClick:()=>V(e.id),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat(W===e.id?"bg-blue-500/30 text-blue-400 border border-blue-500/50":"bg-white/5 text-slate-400 hover:bg-white/10"),children:e.label},e.id))})]})]}),K?(0,zt.jsxs)("div",{className:"flex items-center justify-center py-16",children:[(0,zt.jsx)(Nm,{className:"animate-pulse text-purple-400",size:48}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Analyzing market data..."})]}):H?(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,zt.jsxs)(cx,{className:"lg:col-span-2 p-6",children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"text-3xl font-bold text-white",children:B}),(0,zt.jsxs)("p",{className:"text-slate-400",children:[W," Forecast"]})]}),(0,zt.jsxs)("div",{className:"px-4 py-2 rounded-xl border ".concat((e=>{switch(e){case"strong_buy":return"bg-green-500/30 text-green-400 border-green-500/50";case"buy":return"bg-green-500/20 text-green-400 border-green-500/30";case"strong_sell":return"bg-red-500/30 text-red-400 border-red-500/50";case"sell":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}})(H.recommendation)),children:[(0,zt.jsx)("p",{className:"text-xs opacity-70",children:"Recommendation"}),(0,zt.jsx)("p",{className:"text-lg font-bold capitalize",children:null===(e=H.recommendation)||void 0===e?void 0:e.replace("_"," ")})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Sentiment"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat((e=>{switch(e){case"bullish":return"text-green-400";case"bearish":return"text-red-400";default:return"text-slate-400"}})(H.overall_sentiment)),children:H.overall_sentiment})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Confidence"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-white",children:[(100*H.overall_confidence).toFixed(1),"%"]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Risk Level"}),(0,zt.jsx)("p",{className:"text-xl font-bold capitalize ".concat((e=>{switch(e){case"low":return"text-green-400";case"medium":return"text-amber-400";case"high":return"text-red-400";default:return"text-slate-400"}})(H.risk_level)),children:H.risk_level})]})]}),H.entry_price&&(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-black/40 border border-white/10 mb-6",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,zt.jsx)(Jbe,{size:16,className:"text-teal-400"}),"Suggested Trade Setup"]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Entry"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:["$",null===(t=H.entry_price)||void 0===t?void 0:t.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Stop Loss"}),(0,zt.jsxs)("p",{className:"text-red-400 font-mono",children:["$",null===(n=H.stop_loss)||void 0===n?void 0:n.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Take Profit"}),(0,zt.jsxs)("p",{className:"text-green-400 font-mono",children:["$",null===(r=H.take_profit)||void 0===r?void 0:r.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Position Size"}),(0,zt.jsxs)("p",{className:"text-white font-mono",children:[H.position_size_suggestion,"%"]})]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20",children:[(0,zt.jsxs)("h4",{className:"text-sm font-semibold text-purple-400 mb-2 flex items-center gap-2",children:[(0,zt.jsx)(Nm,{size:16}),"AI Analysis"]}),(0,zt.jsx)("p",{className:"text-slate-300 text-sm",children:H.ai_analysis})]}),(null===(a=H.key_factors)||void 0===a?void 0:a.length)>0&&(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsx)("h4",{className:"text-xs text-slate-500 mb-2",children:"Key Factors"}),(0,zt.jsx)("div",{className:"space-y-1",children:H.key_factors.map((e,t)=>(0,zt.jsxs)("p",{className:"text-sm text-slate-400 flex items-center gap-2",children:[(0,zt.jsx)(Vm,{size:14,className:"text-teal-400"}),e]},t))})]}),(null===(i=H.risks)||void 0===i?void 0:i.length)>0&&(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsxs)("h4",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:[(0,zt.jsx)(s1,{size:12,className:"text-amber-400"}),"Risks"]}),(0,zt.jsx)("div",{className:"space-y-1",children:H.risks.map((e,t)=>(0,zt.jsxs)("p",{className:"text-sm text-amber-400/80 flex items-center gap-2",children:[(0,zt.jsx)("span",{children:"\u2022"})," ",e]},t))})]})]}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)(cx,{title:"Price Direction",icon:"\ud83d\udcc8",accent:"green",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zt.jsx)("span",{className:"text-2xl font-bold capitalize ".concat("up"===(null===(s=H.price_direction)||void 0===s?void 0:s.direction)?"text-green-400":"down"===(null===(l=H.price_direction)||void 0===l?void 0:l.direction)?"text-red-400":"text-slate-400"),children:"up"===(null===(c=H.price_direction)||void 0===c?void 0:c.direction)?(0,zt.jsx)(mx,{size:32}):"down"===(null===(u=H.price_direction)||void 0===u?void 0:u.direction)?(0,zt.jsx)(kx,{size:32}):(0,zt.jsx)(Em,{size:32})}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Expected Change"}),(0,zt.jsxs)("p",{className:"text-xl font-mono ".concat((null===(d=H.price_direction)||void 0===d?void 0:d.predicted_change_percent)>0?"text-green-400":"text-red-400"),children:[(null===(h=H.price_direction)||void 0===h?void 0:h.predicted_change_percent)>0?"+":"",null===(p=H.price_direction)||void 0===p||null===(f=p.predicted_change_percent)||void 0===f?void 0:f.toFixed(1),"%"]})]})]}),(0,zt.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,zt.jsx)("div",{className:"h-full rounded-full ".concat("up"===(null===(m=H.price_direction)||void 0===m?void 0:m.direction)?"bg-green-500":"down"===(null===(g=H.price_direction)||void 0===g?void 0:g.direction)?"bg-red-500":"bg-slate-500"),style:{width:"".concat(100*((null===(x=H.price_direction)||void 0===x?void 0:x.confidence)||0),"%")}})}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[(100*((null===(v=H.price_direction)||void 0===v?void 0:v.confidence)||0)).toFixed(0),"% confidence"]})]}),(0,zt.jsxs)(cx,{title:"Volatility Forecast",icon:"\ud83d\udcca",accent:"amber",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)("span",{className:"text-lg font-bold capitalize ".concat("extreme"===(null===(y=H.volatility)||void 0===y?void 0:y.level)||"high"===(null===(b=H.volatility)||void 0===b?void 0:b.level)?"text-red-400":"moderate"===(null===(w=H.volatility)||void 0===w?void 0:w.level)?"text-amber-400":"text-green-400"),children:null===(k=H.volatility)||void 0===k||null===(N=k.level)||void 0===N?void 0:N.replace("_"," ")}),(0,zt.jsxs)("span",{className:"text-sm text-slate-400",children:["\xb1",null===(S=H.volatility)||void 0===S||null===(j=S.expected_range_percent)||void 0===j?void 0:j.toFixed(1),"%"]})]}),null===(C=H.volatility)||void 0===C||null===(E=C.factors)||void 0===E?void 0:E.map((e,t)=>(0,zt.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["\u2022 ",e]},t))]}),(0,zt.jsxs)(cx,{title:"Trend Analysis",icon:"\ud83d\udcc9",accent:"blue",className:"p-4",children:[(0,zt.jsx)("p",{className:"text-lg font-bold capitalize ".concat(null!==(T=H.trend)&&void 0!==T&&null!==(I=T.direction)&&void 0!==I&&I.includes("bullish")?"text-green-400":null!==(A=H.trend)&&void 0!==A&&null!==(O=A.direction)&&void 0!==O&&O.includes("bearish")?"text-red-400":"text-slate-400"),children:null===(_=H.trend)||void 0===_||null===(R=_.direction)||void 0===R?void 0:R.replace("_"," ")}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:"Strength:"}),(0,zt.jsx)("div",{className:"flex-1 h-2 rounded-full bg-white/10",children:(0,zt.jsx)("div",{className:"h-full rounded-full bg-blue-500",style:{width:"".concat(100*((null===(P=H.trend)||void 0===P?void 0:P.strength)||0),"%")}})}),(0,zt.jsxs)("span",{className:"text-xs text-slate-400",children:[(100*((null===(M=H.trend)||void 0===M?void 0:M.strength)||0)).toFixed(0),"%"]})]})]}),X&&(0,zt.jsx)(cx,{title:"Model Accuracy",icon:"\ud83c\udfaf",accent:"purple",className:"p-4",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Price Direction"}),(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(D=X.price_direction)||void 0===D?void 0:D.accuracy,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Volatility"}),(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(F=X.volatility)||void 0===F?void 0:F.accuracy,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Trend"}),(0,zt.jsxs)("span",{className:"text-white font-mono",children:[null===(L=X.trend)||void 0===L?void 0:L.accuracy,"%"]})]}),(0,zt.jsxs)("div",{className:"pt-2 border-t border-white/10 flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400 font-semibold",children:"Overall"}),(0,zt.jsxs)("span",{className:"text-teal-400 font-mono font-bold",children:[null===(z=X.overall)||void 0===z?void 0:z.accuracy,"%"]})]})]})})]})]}):null,(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20 text-sm text-amber-400/80",children:[(0,zt.jsx)(s1,{size:16,className:"inline mr-2"}),(0,zt.jsx)("strong",{children:"Disclaimer:"})," AI predictions are for informational purposes only and should not be considered financial advice. Past performance does not guarantee future results. Always do your own research."]})]})},fke="https://srv1304213.hstgr.cloud/api/api",mke=()=>{var e;const[t,n]=(0,o.useState)([]),[r,a]=(0,o.useState)(null),[i,s]=(0,o.useState)([]),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)("active"),[f,m]=(0,o.useState)(!0),[g,x]=(0,o.useState)(!1),v=(0,o.useCallback)(async()=>{m(!0);try{const e=await fetch("".concat(fke,"/competition/active"));if(e.ok){const t=await e.json();n(t.competitions||[])}}catch(e){console.error("Error fetching competitions:",e)}finally{m(!1)}},[]),y=async e=>{try{const t=await fetch("".concat(fke,"/competition/").concat(e,"/leaderboard"));if(t.ok){const e=await t.json();s(e.leaderboard||[])}}catch(t){console.error("Error fetching leaderboard:",t)}},b=async e=>{try{await fetch("".concat(fke,"/competition/create/themed?theme=").concat(e),{method:"POST"}),await v()}catch(t){console.error("Error:",t)}};(0,o.useEffect)(()=>{v(),(async()=>{try{const e=await fetch("".concat(fke,"/competition/user/stats"));if(e.ok){const t=await e.json();c(t)}}catch(e){console.error("Error fetching user stats:",e)}})(),(async()=>{try{const e=await fetch("".concat(fke,"/competition/global/leaderboard?limit=20"));if(e.ok){const t=await e.json();d(t.leaderboard||[])}}catch(e){console.error("Error:",e)}})()},[v]),(0,o.useEffect)(()=>{r&&y(r.id)},[null===r||void 0===r?void 0:r.id]);const w=e=>{switch(e){case"daily":return(0,zt.jsx)(nwe,{className:"text-orange-400",size:20});case"weekly":return(0,zt.jsx)(zm,{className:"text-amber-400",size:20});case"themed":return(0,zt.jsx)(Xwe,{className:"text-purple-400",size:20});default:return(0,zt.jsx)(Cm,{className:"text-teal-400",size:20})}},k=e=>{switch(e){case"diamond":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/50";case"platinum":return"bg-slate-300/20 text-slate-300 border-slate-300/50";case"gold":return"bg-amber-500/20 text-amber-400 border-amber-500/50";case"silver":return"bg-slate-400/20 text-slate-400 border-slate-400/50";default:return"bg-orange-700/20 text-orange-400 border-orange-700/50"}},N=e=>1===e?(0,zt.jsx)(Kwe,{className:"text-amber-400",size:20}):2===e?(0,zt.jsx)(qwe,{className:"text-slate-300",size:20}):3===e?(0,zt.jsx)(qwe,{className:"text-orange-400",size:20}):(0,zt.jsx)("span",{className:"text-slate-400 font-mono",children:e}),S=e=>{const t=new Date(e)-new Date;if(t<=0)return"Ended";const n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);if(n>24){const e=Math.floor(n/24);return"".concat(e,"d ").concat(n%24,"h")}return"".concat(n,"h ").concat(r,"m")};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"trading-competitions",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(zm,{className:"text-amber-400"}),"Trading Competitions"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:"Compete with traders worldwide"})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsxs)(fx,{onClick:async()=>{try{await fetch("".concat(fke,"/competition/create/daily"),{method:"POST"}),await v()}catch(e){console.error("Error:",e)}},variant:"white",size:"sm",children:[(0,zt.jsx)(nwe,{size:16}),"New Daily"]}),(0,zt.jsxs)(fx,{onClick:()=>b("moon_mission"),variant:"cyan",size:"sm",children:[(0,zt.jsx)(Om,{size:16}),"Moon Mission"]})]})]}),l&&(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"px-3 py-1.5 rounded-lg border ".concat(k(l.tier)),children:(0,zt.jsx)("span",{className:"text-xs uppercase font-bold",children:l.tier})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"text-white font-semibold",children:[l.tier_points," Points"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-400",children:[l.competitions_won," wins \u2022 ",l.total_podium_finishes," podiums"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:l.competitions_entered}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Entered"})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:(null===(e=l.badges_earned)||void 0===e?void 0:e.length)||0}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Badges"})]})]})]})}),(0,zt.jsx)("div",{className:"flex gap-2 border-b border-white/10 pb-2",children:[{id:"active",label:"Active Competitions",icon:Rm},{id:"global",label:"Global Leaderboard",icon:zm}].map(e=>(0,zt.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(h===e.id?"bg-teal-500/20 text-teal-400":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))}),"active"===h?(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,zt.jsx)("div",{className:"lg:col-span-2 space-y-4",children:f?(0,zt.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,zt.jsx)(awe,{className:"animate-spin text-teal-400",size:32})}):t.length>0?t.map(e=>{var t,n;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl border transition-all cursor-pointer ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-teal-500/10 border-teal-500/50":"bg-white/5 border-white/10 hover:border-white/20"),onClick:()=>a(e),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[w(e.type),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"text-white font-semibold",children:e.name}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm",children:e.description})]})]}),(0,zt.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat("active"===e.status?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"),children:e.status})]}),(0,zt.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,zt.jsxs)("span",{className:"text-slate-400 flex items-center gap-1",children:[(0,zt.jsx)(Tm,{size:14}),e.participant_count," traders"]}),(0,zt.jsxs)("span",{className:"text-slate-400 flex items-center gap-1",children:[(0,zt.jsx)(ewe,{size:14}),S(e.end_time)]}),(0,zt.jsxs)("span",{className:"text-green-400 flex items-center gap-1",children:["$",null===(t=e.starting_balance)||void 0===t?void 0:t.toLocaleString()]})]}),(0,zt.jsxs)(fx,{onClick:t=>{t.stopPropagation(),(async e=>{x(!0);try{(await fetch("".concat(fke,"/competition/").concat(e,"/join"),{method:"POST"})).ok&&(await v(),await y(e))}catch(t){console.error("Error joining:",t)}finally{x(!1)}})(e.id)},variant:"cyan",size:"sm",disabled:g,children:[g?(0,zt.jsx)(awe,{size:14,className:"animate-spin"}):(0,zt.jsx)(Rm,{size:14}),"Join"]})]}),(null===(n=e.prizes)||void 0===n?void 0:n.length)>0&&(0,zt.jsx)("div",{className:"mt-3 pt-3 border-t border-white/10 flex gap-3",children:e.prizes.slice(0,3).map((e,t)=>(0,zt.jsxs)("span",{className:"text-xs text-slate-400",children:[0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":"\ud83e\udd49"," ",e.xp_reward," XP"]},t))})]},e.id)}):(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,zt.jsx)(zm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No active competitions"}),(0,zt.jsx)("p",{className:"text-sm mt-1",children:"Create a new challenge to get started!"})]})}),(0,zt.jsx)(cx,{title:"Leaderboard",icon:"\ud83c\udfc6",accent:"amber",children:r?(0,zt.jsx)("div",{className:"space-y-2",children:i.length>0?i.slice(0,10).map((e,t)=>{var n;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg ".concat(t<3?"bg-gradient-to-r from-amber-500/10 to-transparent":"bg-white/5"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-8 flex justify-center",children:N(e.rank)}),(0,zt.jsx)("span",{className:"text-white text-sm font-medium",children:e.username})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-sm font-mono ".concat(e.pnl_percent>=0?"text-green-400":"text-red-400"),children:[e.pnl_percent>=0?"+":"",null===(n=e.pnl_percent)||void 0===n?void 0:n.toFixed(2),"%"]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.total_trades," trades"]})]})]},e.user_id)}):(0,zt.jsx)("p",{className:"text-center py-8 text-slate-400 text-sm",children:"No entries yet"})}):(0,zt.jsx)("p",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a competition"})})]}):(0,zt.jsx)(cx,{title:"Global Rankings",icon:"\ud83c\udf0d",accent:"purple",children:(0,zt.jsx)("div",{className:"overflow-x-auto",children:(0,zt.jsxs)("table",{className:"w-full",children:[(0,zt.jsx)("thead",{children:(0,zt.jsxs)("tr",{className:"text-left text-xs text-slate-500 border-b border-white/10",children:[(0,zt.jsx)("th",{className:"pb-3 w-12",children:"Rank"}),(0,zt.jsx)("th",{className:"pb-3",children:"Trader"}),(0,zt.jsx)("th",{className:"pb-3 text-center",children:"Tier"}),(0,zt.jsx)("th",{className:"pb-3 text-right",children:"Points"}),(0,zt.jsx)("th",{className:"pb-3 text-right",children:"Wins"}),(0,zt.jsx)("th",{className:"pb-3 text-right",children:"Podiums"})]})}),(0,zt.jsx)("tbody",{children:u.map(e=>{var t,n;return(0,zt.jsxs)("tr",{className:"border-b border-white/5",children:[(0,zt.jsx)("td",{className:"py-3",children:(0,zt.jsx)("div",{className:"flex justify-center",children:N(e.rank)})}),(0,zt.jsxs)("td",{className:"py-3 text-white font-medium",children:["Trader #",null===(t=e.user_id)||void 0===t?void 0:t.slice(-6)]}),(0,zt.jsx)("td",{className:"py-3 text-center",children:(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs border ".concat(k(e.tier)),children:null===(n=e.tier)||void 0===n?void 0:n.toUpperCase()})}),(0,zt.jsx)("td",{className:"py-3 text-right font-mono text-teal-400",children:e.tier_points}),(0,zt.jsx)("td",{className:"py-3 text-right font-mono text-amber-400",children:e.competitions_won}),(0,zt.jsx)("td",{className:"py-3 text-right font-mono text-slate-400",children:e.podium_finishes})]},e.user_id)})})]})})}),(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{theme:"bear_market",icon:"\ud83d\udc3b",name:"Bear Market Survival",desc:"Lowest drawdown wins"},{theme:"moon_mission",icon:"\ud83d\ude80",name:"Moon Mission",desc:"Maximum returns"},{theme:"steady_hands",icon:"\u270b",name:"Steady Hands",desc:"Best Sharpe ratio"},{theme:"speed_trader",icon:"\u26a1",name:"Speed Trader",desc:"4-hour blitz"}].map(e=>(0,zt.jsxs)("button",{onClick:()=>b(e.theme),className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-purple-500/50 transition-all text-left group",children:[(0,zt.jsx)("span",{className:"text-2xl",children:e.icon}),(0,zt.jsx)("h4",{className:"text-white font-semibold mt-2 group-hover:text-purple-400 transition-colors",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.desc})]},e.theme))})]})},gke=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[a,i]=(0,o.useState)("all"),[s,l]=(0,o.useState)(!0),[c,u]=(0,o.useState)(!0),[d,h]=(0,o.useState)(null),p=(0,o.useCallback)(async()=>{l(!0);try{const e=[{title:"Breaking: Bitcoin ETF Sees Record Inflows",symbol:"BTC",sentiment:"bullish",impact:"high",category:"ETF"},{title:"Federal Reserve Signals Potential Rate Pause",symbol:"MARKET",sentiment:"bullish",impact:"high",category:"Macro"},{title:"Ethereum Staking Reaches New Milestone",symbol:"ETH",sentiment:"bullish",impact:"medium",category:"Network"},{title:"SEC Announces New Crypto Compliance Guidelines",symbol:"CRYPTO",sentiment:"bearish",impact:"high",category:"Regulatory"},{title:"Major Tech Company Adds Bitcoin to Balance Sheet",symbol:"BTC",sentiment:"bullish",impact:"high",category:"Adoption"},{title:"Solana Network Processes Record Transactions",symbol:"SOL",sentiment:"bullish",impact:"medium",category:"Network"},{title:"Crypto Exchange Reports Quarterly Earnings Beat",symbol:"MARKET",sentiment:"bullish",impact:"medium",category:"Earnings"},{title:"DeFi Protocol Suffers Flash Loan Attack",symbol:"ETH",sentiment:"bearish",impact:"medium",category:"Security"},{title:"Central Bank Digital Currency Pilot Launches",symbol:"MARKET",sentiment:"neutral",impact:"medium",category:"CBDC"},{title:"Mining Difficulty Hits All-Time High",symbol:"BTC",sentiment:"bullish",impact:"low",category:"Mining"},{title:"Layer 2 Solutions See Surge in Adoption",symbol:"ETH",sentiment:"bullish",impact:"medium",category:"Technology"},{title:"Whale Alert: Large BTC Transfer to Exchange",symbol:"BTC",sentiment:"bearish",impact:"medium",category:"Whale"}].map((e,t)=>m(m({id:"news-".concat(Date.now(),"-").concat(t)},e),{},{timestamp:new Date(Date.now()-1e3*t*60*Math.floor(60*Math.random())).toISOString(),source:"Benzinga",url:"#",summary:"This is a developing story affecting ".concat(e.symbol," markets. Stay tuned for updates.")}));t(e);const a=e.filter(e=>"high"===e.impact&&c);if(a.length>n.length){const e=a.slice(0,3);r(e)}h(new Date)}catch(e){console.error("Error fetching news:",e)}finally{l(!1)}},[c,n.length]);(0,o.useEffect)(()=>{p();const e=setInterval(p,3e4);return()=>clearInterval(e)},[p]);const f=e=>{switch(e){case"bullish":return"text-green-400 bg-green-500/20 border-green-500/30";case"bearish":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-slate-400 bg-slate-500/20 border-slate-500/30"}},g=e=>{switch(e){case"high":return"text-red-400";case"medium":return"text-amber-400";default:return"text-slate-400"}},x="all"===a?e:e.filter(e=>e.sentiment===a||e.impact===a),v=e=>{const t=new Date(e),n=new Date-t;return n<6e4?"Just now":n<36e5?"".concat(Math.floor(n/6e4),"m ago"):n<864e5?"".concat(Math.floor(n/36e5),"h ago"):t.toLocaleDateString()};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"benzinga-news",children:[(0,zt.jsx)(rn,{children:n.length>0&&c&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-2",children:n.map(e=>(0,zt.jsx)(uu.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},className:"p-4 rounded-xl border backdrop-blur-xl ".concat("bullish"===e.sentiment?"bg-green-500/10 border-green-500/30":"bearish"===e.sentiment?"bg-red-500/10 border-red-500/30":"bg-amber-500/10 border-amber-500/30"),children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-black/30",children:(0,zt.jsx)(Gbe,{className:"".concat("bullish"===e.sentiment?"text-green-400":"bearish"===e.sentiment?"text-red-400":"text-amber-400"," animate-pulse"),size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-red-500/30 text-red-400 font-semibold",children:"BREAKING"}),(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:e.symbol})]}),(0,zt.jsx)("h4",{className:"text-white font-semibold",children:e.title})]})]}),(0,zt.jsx)("button",{onClick:()=>{return t=e.id,void r(e=>e.filter(e=>e.id!==t));var t},className:"text-slate-400 hover:text-white transition-colors",children:"\xd7"})]})},e.id))})}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(rwe,{className:"text-orange-400"}),"Market News & Alerts"]}),(0,zt.jsxs)("p",{className:"text-slate-400 text-sm flex items-center gap-2",children:["Real-time news powered by Benzinga",(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-amber-500/20 text-amber-400",children:"PLACEHOLDER"})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("button",{onClick:()=>u(!c),className:"p-2 rounded-lg transition-colors ".concat(c?"bg-teal-500/20 text-teal-400":"bg-white/5 text-slate-400"),title:c?"Disable alerts":"Enable alerts",children:(0,zt.jsx)(Kbe,{size:20})}),(0,zt.jsxs)(fx,{onClick:p,variant:"white",size:"sm",disabled:s,children:[(0,zt.jsx)(awe,{size:16,className:s?"animate-spin":""}),"Refresh"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-green-500/10 to-transparent border border-green-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(mx,{className:"text-green-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-green-400",children:"Bullish"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"bullish"===e.sentiment).length})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-red-500/10 to-transparent border border-red-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(kx,{className:"text-red-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-red-400",children:"Bearish"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"bearish"===e.sentiment).length})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-transparent border border-amber-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(s1,{className:"text-amber-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-amber-400",children:"High Impact"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"high"===e.impact).length})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-slate-500/10 to-transparent border border-slate-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)(ewe,{className:"text-slate-400",size:16}),(0,zt.jsx)("span",{className:"text-xs text-slate-400",children:"Last Update"})]}),(0,zt.jsx)("p",{className:"text-lg font-mono text-white",children:d?v(d.toISOString()):"-"})]})]}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,zt.jsx)("button",{onClick:()=>i("all"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("all"===a?"bg-teal-500/30 text-teal-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:"All"}),(0,zt.jsxs)("button",{onClick:()=>i("bullish"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("bullish"===a?"bg-green-500/30 text-green-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(mx,{size:14,className:"inline mr-1"})," Bullish"]}),(0,zt.jsxs)("button",{onClick:()=>i("bearish"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("bearish"===a?"bg-red-500/30 text-red-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(kx,{size:14,className:"inline mr-1"})," Bearish"]}),(0,zt.jsxs)("button",{onClick:()=>i("high"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors ".concat("high"===a?"bg-amber-500/30 text-amber-400":"bg-white/5 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)(Om,{size:14,className:"inline mr-1"})," High Impact"]})]}),(0,zt.jsx)("div",{className:"space-y-3",children:s?(0,zt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,zt.jsx)(awe,{className:"animate-spin text-orange-400",size:32}),(0,zt.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading news..."})]}):x.length>0?x.map((e,t)=>{return(0,zt.jsx)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all",children:(0,zt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat((n=e.category,{ETF:"bg-blue-500/20 text-blue-400",Macro:"bg-purple-500/20 text-purple-400",Regulatory:"bg-red-500/20 text-red-400",Network:"bg-teal-500/20 text-teal-400",Adoption:"bg-green-500/20 text-green-400",Security:"bg-orange-500/20 text-orange-400",CBDC:"bg-cyan-500/20 text-cyan-400",Mining:"bg-amber-500/20 text-amber-400",Technology:"bg-indigo-500/20 text-indigo-400",Whale:"bg-pink-500/20 text-pink-400",Earnings:"bg-emerald-500/20 text-emerald-400"}[n]||"bg-slate-500/20 text-slate-400")),children:e.category}),(0,zt.jsxs)("span",{className:"px-2 py-0.5 rounded text-xs border ".concat(f(e.sentiment)),children:["bullish"===e.sentiment&&(0,zt.jsx)(mx,{size:12,className:"inline mr-1"}),"bearish"===e.sentiment&&(0,zt.jsx)(kx,{size:12,className:"inline mr-1"}),e.sentiment]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:e.symbol})]}),(0,zt.jsx)("h3",{className:"text-white font-semibold mb-1 hover:text-teal-400 cursor-pointer transition-colors",children:e.title}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:e.summary}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(rwe,{size:12}),e.source]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(ewe,{size:12}),v(e.timestamp)]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1 ".concat(g(e.impact)),children:[(0,zt.jsx)(s1,{size:12}),e.impact," impact"]})]})]}),(0,zt.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:(0,zt.jsx)(iwe,{size:16})})]})},e.id);var n}):(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,zt.jsx)(rwe,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No news matching filters"})]})}),(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20",children:(0,zt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zt.jsx)(s1,{className:"text-amber-400 shrink-0",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-amber-400 font-semibold",children:"Benzinga API Integration Pending"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"This component displays simulated news data. To enable real Benzinga news feeds, please provide your Benzinga API key. The integration structure is ready for immediate activation once credentials are configured."})]})]})})]})},xke=km("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),vke=km("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),yke=km("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bke=()=>{const[e,t]=(0,o.useState)({binance:{apiKey:"",secretKey:"",connected:!1,testnet:!0},coinbase:{apiKey:"",secretKey:"",connected:!1,testnet:!0},kraken:{apiKey:"",secretKey:"",connected:!1,testnet:!0}}),[n,r]=(0,o.useState)({}),[a,i]=(0,o.useState)({}),[s,l]=(0,o.useState)({}),[c,u]=(0,o.useState)("binance"),[d,h]=(0,o.useState)(!0),p=[{id:"binance",name:"Binance",logo:"\ud83d\udfe1",color:"#F0B90B",description:"Largest crypto exchange by volume",docsUrl:"https://binance-docs.github.io/apidocs/",keyTypes:[{id:"hmac",name:"HMAC (System Generated)",recommended:!0},{id:"ed25519",name:"Ed25519 (Self Generated)",recommended:!1}]},{id:"coinbase",name:"Coinbase",logo:"\ud83d\udd35",color:"#0052FF",description:"US-based regulated exchange",docsUrl:"https://docs.cdp.coinbase.com/",keyTypes:[{id:"api",name:"API Key + Secret",recommended:!0}]},{id:"kraken",name:"Kraken",logo:"\ud83d\udfe3",color:"#5741D9",description:"Security-focused exchange",docsUrl:"https://docs.kraken.com/rest/",keyTypes:[{id:"api",name:"API Key + Private Key",recommended:!0}]}],f=(e,n,r)=>{t(t=>m(m({},t),{},{[e]:m(m({},t[e]),{},{[n]:r})}))};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"exchange-settings",children:[(0,zt.jsx)("div",{className:"flex items-center justify-between",children:(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(xke,{className:"text-amber-400"}),"Exchange API Keys"]}),(0,zt.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"Connect your exchange accounts for live trading"})]})}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-transparent border border-amber-500/20",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg bg-amber-500/20",children:(0,zt.jsx)(vke,{className:"text-amber-400",size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h3",{className:"text-white font-semibold",children:"Network Mode"}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:d?"Using Testnet (Paper Trading)":"Using Mainnet (Real Funds)"})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-sm ".concat(d?"text-slate-500":"text-white"),children:"Mainnet"}),(0,zt.jsx)("button",{onClick:()=>h(!d),className:"relative w-14 h-7 rounded-full transition-colors ".concat(d?"bg-teal-500":"bg-red-500"),children:(0,zt.jsx)(uu.div,{className:"absolute top-1 w-5 h-5 rounded-full bg-white shadow-md",animate:{left:d?"4px":"32px"},transition:{type:"spring",stiffness:500,damping:30}})}),(0,zt.jsx)("span",{className:"text-sm ".concat(d?"text-white":"text-slate-500"),children:"Testnet"})]})]}),!d&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-2",children:[(0,zt.jsx)(s1,{className:"text-red-400 shrink-0",size:18}),(0,zt.jsxs)("p",{className:"text-sm text-red-300",children:[(0,zt.jsx)("strong",{children:"Warning:"})," Mainnet mode uses real funds. All trades will execute on live markets. Make sure you understand the risks before trading."]})]})]}),(0,zt.jsx)("div",{className:"space-y-4",children:p.map(t=>{const o=e[t.id],h=c===t.id;return(0,zt.jsxs)(uu.div,{className:"rounded-xl border overflow-hidden",style:{borderColor:o.connected?"".concat(t.color,"40"):"rgba(255,255,255,0.1)",backgroundColor:"rgba(255,255,255,0.02)"},children:[(0,zt.jsxs)("button",{onClick:()=>u(h?null:t.id),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{backgroundColor:"".concat(t.color,"20")},children:t.logo}),(0,zt.jsxs)("div",{className:"text-left",children:[(0,zt.jsxs)("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[t.name,o.connected&&(0,zt.jsxs)("span",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-green-500/20 text-green-400",children:[(0,zt.jsx)(bx,{size:12})," Connected"]})]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm",children:t.description})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"".concat(t.color,"20"),color:t.color},children:d?"TESTNET":"MAINNET"}),h?(0,zt.jsx)(Hve,{className:"text-slate-400",size:20}):(0,zt.jsx)(Vve,{className:"text-slate-400",size:20})]})]}),(0,zt.jsx)(rn,{children:h&&(0,zt.jsx)(uu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,zt.jsxs)("div",{className:"p-4 pt-0 space-y-4 border-t border-white/5",children:[t.keyTypes.length>1&&(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Key Type"}),(0,zt.jsx)("div",{className:"flex gap-2",children:t.keyTypes.map(e=>(0,zt.jsxs)("button",{className:"flex-1 p-3 rounded-lg border text-left transition-colors ".concat(e.recommended?"bg-teal-500/10 border-teal-500/30 text-teal-400":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10"),children:[(0,zt.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.recommended&&(0,zt.jsx)("div",{className:"text-xs text-teal-400/70 mt-1",children:"Recommended"})]},e.id))})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("label",{className:"text-xs text-slate-400 uppercase tracking-wider flex items-center justify-between",children:["API Key",(0,zt.jsxs)("a",{href:t.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-teal-400 hover:text-teal-300 flex items-center gap-1",children:["Get API Key ",(0,zt.jsx)(iwe,{size:12})]})]}),(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("input",{type:"text",value:o.apiKey,onChange:e=>f(t.id,"apiKey",e.target.value),placeholder:"Enter your API key",className:"w-full p-3 pr-20 rounded-lg bg-black/30 border border-white/10 text-white font-mono text-sm focus:border-teal-500/50 focus:outline-none"}),(0,zt.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:o.apiKey&&(0,zt.jsx)("button",{onClick:()=>{return e=o.apiKey,void navigator.clipboard.writeText(e);var e},className:"p-1.5 rounded hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:"Copy",children:(0,zt.jsx)(Jve,{size:14})})})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Secret Key"}),(0,zt.jsxs)("div",{className:"relative",children:[(0,zt.jsx)("input",{type:n[t.id]?"text":"password",value:o.secretKey,onChange:e=>f(t.id,"secretKey",e.target.value),placeholder:"Enter your secret key",className:"w-full p-3 pr-20 rounded-lg bg-black/30 border border-white/10 text-white font-mono text-sm focus:border-teal-500/50 focus:outline-none"}),(0,zt.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:(0,zt.jsx)("button",{onClick:()=>{return e=t.id,void r(t=>m(m({},t),{},{[e]:!t[e]}));var e},className:"p-1.5 rounded hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:n[t.id]?"Hide":"Show",children:n[t.id]?(0,zt.jsx)(Twe,{size:14}):(0,zt.jsx)(Iwe,{size:14})})})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,zt.jsx)(fx,{onClick:()=>(async t=>{i(e=>m(m({},e),{},{[t]:!0}));try{await new Promise(e=>setTimeout(e,2e3));const n=e[t];n.apiKey&&n.secretKey?f(t,"connected",!0):f(t,"connected",!1)}catch(n){console.error("Connection test failed:",n),f(t,"connected",!1)}finally{i(e=>m(m({},e),{},{[t]:!1}))}})(t.id),variant:"white",size:"sm",disabled:a[t.id]||!o.apiKey||!o.secretKey,children:a[t.id]?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(awe,{size:14,className:"animate-spin"})," Testing..."]}):(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(bx,{size:14})," Test Connection"]})}),(0,zt.jsx)(fx,{onClick:()=>(async e=>{l(t=>m(m({},t),{},{[e]:!0}));try{await new Promise(e=>setTimeout(e,1e3))}catch(t){console.error("Failed to save credentials:",t)}finally{l(t=>m(m({},t),{},{[e]:!1}))}})(t.id),variant:"teal",size:"sm",disabled:s[t.id]||!o.apiKey||!o.secretKey,children:s[t.id]?(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(awe,{size:14,className:"animate-spin"})," Saving..."]}):(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(yke,{size:14})," Save Securely"]})}),(o.apiKey||o.secretKey)&&(0,zt.jsx)("button",{onClick:()=>{return e=t.id,void(window.confirm("Are you sure you want to remove ".concat(e," credentials?"))&&(f(e,"apiKey",""),f(e,"secretKey",""),f(e,"connected",!1)));var e},className:"p-2 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",title:"Remove credentials",children:(0,zt.jsx)($be,{size:16})})]}),o.connected&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-green-500/10 border border-green-500/30 flex items-center gap-2",children:[(0,zt.jsx)(e1,{className:"text-green-400",size:18}),(0,zt.jsxs)("span",{className:"text-green-400 text-sm font-medium",children:["Successfully connected to ",t.name," ",d?"Testnet":"Mainnet"]})]})]})})})]},t.id)})}),(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-teal-500/10 border border-teal-500/20",children:(0,zt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zt.jsx)(Im,{className:"text-teal-400 shrink-0 mt-0.5",size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-teal-400 font-semibold",children:"Security Information"}),(0,zt.jsxs)("ul",{className:"text-sm text-slate-400 mt-2 space-y-1 list-disc list-inside",children:[(0,zt.jsx)("li",{children:"API keys are encrypted and stored securely on your device"}),(0,zt.jsx)("li",{children:"We never transmit or store your secret keys on external servers"}),(0,zt.jsx)("li",{children:"For maximum security, enable IP whitelist and withdrawal restrictions on your exchange"}),(0,zt.jsx)("li",{children:'Use "Read Only" or "Trade Only" permissions when possible'})]})]})]})}),(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-4",children:p.map(e=>(0,zt.jsxs)("a",{href:e.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-colors text-center group",children:[(0,zt.jsx)("div",{className:"text-2xl mb-2",children:e.logo}),(0,zt.jsxs)("div",{className:"text-white font-medium text-sm",children:[e.name," Docs"]}),(0,zt.jsxs)("div",{className:"text-slate-500 text-xs flex items-center justify-center gap-1 mt-1 group-hover:text-teal-400 transition-colors",children:["View Documentation ",(0,zt.jsx)(iwe,{size:10})]})]},e.id))})]})},wke=km("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),kke=km("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Nke=km("radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Ske="https://srv1304213.hstgr.cloud/api".replace("https://","wss://").replace("http://","ws://"),jke=e=>{let{tournamentId:t,onClose:n}=e;const[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(0),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[h,p]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!1),g=(0,o.useRef)(null),x=(0,o.useRef)(null);(0,o.useEffect)(()=>(v(),()=>{g.current&&g.current.close()}),[t]),(0,o.useEffect)(()=>{x.current&&!f&&x.current.scrollIntoView({behavior:"smooth"})},[l,f]);const v=()=>{try{const e=new WebSocket("".concat(Ske,"/ws/tournament/").concat(t));e.onopen=()=>{a(!0),console.log("Spectator WebSocket connected")},e.onmessage=e=>{const t=JSON.parse(e.data);y(t)},e.onclose=()=>{a(!1),setTimeout(v,3e3)},e.onerror=e=>{console.error("WebSocket error:",e)},g.current=e}catch(e){console.error("WebSocket connection error:",e)}},y=e=>{switch(e.type){case"welcome":s(e.spectators),e.recent_trades&&c(e.recent_trades);break;case"spectator_update":s(e.count);break;case"trade":f||(c(t=>[...t.slice(-49),e.data]),h&&b(e.data.side))}},b=e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value="buy"===e?800:400,n.type="sine",r.gain.value=.1,n.start(),n.stop(t.currentTime+.1)},w=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,zt.jsxs)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-[#050505]/95 backdrop-blur-xl overflow-hidden",children:[(0,zt.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-black/80 backdrop-blur-xl border-b border-white/5 z-10",children:(0,zt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/20 border border-red-500/30",children:[(0,zt.jsx)(Nke,{size:14,className:"text-red-400 animate-pulse"}),(0,zt.jsx)("span",{className:"text-xs font-mono text-red-400",children:"LIVE"})]}),(0,zt.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,zt.jsx)(Iwe,{size:20,className:"text-teal-400"}),"Spectator Mode"]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,zt.jsx)(Tm,{size:16}),(0,zt.jsxs)("span",{className:"text-sm",children:[i," watching"]})]}),(0,zt.jsx)("button",{onClick:()=>m(!f),className:"p-2 rounded-lg transition-colors ".concat(f?"bg-amber-500/20 text-amber-400":"bg-white/5 text-white"),children:f?(0,zt.jsx)(Rm,{size:18}):(0,zt.jsx)(Bm,{size:18})}),(0,zt.jsx)("button",{onClick:()=>p(!h),className:"p-2 rounded-lg transition-colors ".concat(h?"bg-teal-500/20 text-teal-400":"bg-white/5 text-slate-400"),children:h?(0,zt.jsx)(Kbe,{size:18}):(0,zt.jsx)(qbe,{size:18})}),(0,zt.jsx)("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-white/10 text-white text-sm hover:bg-white/20 transition-colors",children:"Exit"})]})]})}),(0,zt.jsxs)("div",{className:"pt-16 h-full overflow-hidden flex",children:[(0,zt.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,zt.jsxs)(cx,{title:"Live Trades",icon:(0,zt.jsx)(Em,{className:"text-teal-400"}),accent:"teal",className:"h-full flex flex-col",children:[(0,zt.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:[(0,zt.jsx)(rn,{initial:!1,children:l.map((e,t)=>(0,zt.jsx)(uu.div,{initial:{opacity:0,x:-50,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50},transition:{type:"spring",stiffness:500,damping:30},className:"p-3 rounded-lg border ".concat("buy"===e.side?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"),children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("buy"===e.side?"bg-emerald-500/20":"bg-red-500/20"),children:"buy"===e.side?(0,zt.jsx)(mx,{className:"text-emerald-400",size:20}):(0,zt.jsx)(kx,{className:"text-red-400",size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.trader_name}),e.trader_rank<=3&&(0,zt.jsx)(Kwe,{size:14,className:"text-amber-400"}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["#",e.trader_rank]})]}),(0,zt.jsxs)("p",{className:"text-sm text-slate-400",children:[(0,zt.jsx)("span",{className:"buy"===e.side?"text-emerald-400":"text-red-400",children:e.side.toUpperCase()})," ",e.quantity," ",e.symbol," @ ",w(e.price)]})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-mono font-semibold ".concat(e.pnl>=0?"text-emerald-400":"text-red-400"),children:[e.pnl>=0?"+":"",w(e.pnl)]}),(0,zt.jsxs)("p",{className:"text-xs ".concat(e.pnl_percent>=0?"text-emerald-400":"text-red-400"),children:[e.pnl_percent>=0?"+":"",e.pnl_percent.toFixed(2),"%"]})]})]})},e.id||t))}),(0,zt.jsx)("div",{ref:x})]}),f&&(0,zt.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,zt.jsx)("div",{className:"px-6 py-3 rounded-xl bg-amber-500/20 border border-amber-500/30 text-amber-400 font-semibold",children:"Feed Paused"})})]})}),(0,zt.jsxs)("div",{className:"w-80 p-4 space-y-4 overflow-y-auto",children:[(0,zt.jsx)(cx,{accent:r?"teal":"red",className:"p-4",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(r?"bg-teal-400 animate-pulse":"bg-red-400")}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:r?"Connected":"Reconnecting..."})]})}),(0,zt.jsx)(cx,{title:"Session Stats",accent:"purple",className:"p-4",children:(0,zt.jsxs)("div",{className:"space-y-3",children:[(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Trades Seen"}),(0,zt.jsx)("span",{className:"text-white font-mono",children:l.length})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Buy Orders"}),(0,zt.jsx)("span",{className:"text-emerald-400 font-mono",children:l.filter(e=>"buy"===e.side).length})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Sell Orders"}),(0,zt.jsx)("span",{className:"text-red-400 font-mono",children:l.filter(e=>"sell"===e.side).length})]})]})}),(0,zt.jsx)(cx,{title:"Most Active",accent:"amber",className:"p-4",children:(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(l.reduce((e,t)=>(e[t.trader_name]=(e[t.trader_name]||0)+1,e),{})).sort((e,t)=>t[1]-e[1]).slice(0,5).map((e,t)=>{let[n,r]=e;return(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:t+1}),(0,zt.jsx)("span",{className:"text-white text-sm",children:n})]}),(0,zt.jsxs)("span",{className:"text-amber-400 text-sm",children:[r," trades"]})]},n)})})}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 text-xs text-slate-500",children:[(0,zt.jsx)("p",{className:"mb-2 font-semibold text-slate-400",children:"Legend"}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)("div",{className:"w-3 h-3 rounded bg-emerald-500/50"}),(0,zt.jsx)("span",{children:"Buy Order"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"w-3 h-3 rounded bg-red-500/50"}),(0,zt.jsx)("span",{children:"Sell Order"})]})]})]})]})]})},Cke="".concat("https://srv1304213.hstgr.cloud/api","/api"),Eke=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)(!0),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await fetch("".concat(Cke,"/tournament/active")),n=await e.json();t(n),n.length>0&&(r(n[0]),f(n[0].id)),l(!1)}catch(e){console.error("Error fetching tournaments:",e),l(!1)}},f=async e=>{try{const t=await fetch("".concat(Cke,"/tournament/").concat(e,"/leaderboard?limit=50")),n=await t.json();i(n)}catch(t){console.error("Error fetching leaderboard:",t)}},m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),g=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%");return s?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"tournament-center",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(zm,{className:"text-amber-400",size:28}),"Trading Tournament"]}),(0,zt.jsx)("p",{className:"text-slate-400 mt-1",children:"Compete with traders worldwide for prizes"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[n&&(0,zt.jsxs)("button",{onClick:()=>h(!0),className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 text-purple-400 font-semibold hover:bg-purple-500/30 transition-all flex items-center gap-2","data-testid":"spectator-mode-btn",children:[(0,zt.jsx)(Iwe,{size:18}),(0,zt.jsx)("span",{className:"hidden sm:inline",children:"Watch Live"}),(0,zt.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]}),!c&&n&&(0,zt.jsxs)("button",{onClick:()=>u(!0),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold hover:shadow-lg hover:shadow-amber-500/25 transition-all flex items-center gap-2","data-testid":"join-tournament-btn",children:[(0,zt.jsx)(Om,{size:18}),"Join Tournament"]})]})]}),n&&(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)(cx,{accent:"amber",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Wm,{className:"text-amber-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Prize Pool"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:m(n.total_prize_pool||175)}),(0,zt.jsx)("p",{className:"text-xs text-amber-400 mt-1",children:"Pro Credits"})]}),(0,zt.jsxs)(cx,{accent:"blue",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Tm,{className:"text-blue-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Participants"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:n.participant_count||0}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["/ ",n.max_participants||1e3," max"]})]}),(0,zt.jsxs)(cx,{accent:"teal",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(Jbe,{className:"text-teal-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Starting Balance"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white",children:m(n.starting_balance||1e5)}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Virtual money"})]}),(0,zt.jsxs)(cx,{accent:"purple",className:"p-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,zt.jsx)(ewe,{className:"text-purple-400",size:20}),(0,zt.jsx)("span",{className:"text-sm text-slate-400",children:"Status"})]}),(0,zt.jsx)("p",{className:"text-2xl font-bold text-white capitalize",children:n.status}),(0,zt.jsx)("p",{className:"text-xs text-purple-400 mt-1",children:"Weekly challenge"})]})]}),(0,zt.jsx)(cx,{title:"\ud83c\udfc6 Prizes",accent:"amber",children:(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-500/20 to-amber-500/5 border border-amber-500/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center",children:(0,zt.jsx)(Kwe,{className:"text-black",size:20})}),(0,zt.jsx)("span",{className:"font-bold text-amber-400",children:"1st Place"})]}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-white",children:[(0,zt.jsx)(Xwe,{size:14,className:"text-amber-400"})," 100 Pro Credits"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(Cm,{size:14,className:"text-amber-400"})," Champion Badge"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(zm,{size:14,className:"text-amber-400"}),' "Weekly Champion" Title']})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-slate-400/20 to-slate-400/5 border border-slate-400/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-400 flex items-center justify-center",children:(0,zt.jsx)(qwe,{className:"text-black",size:20})}),(0,zt.jsx)("span",{className:"font-bold text-slate-300",children:"2nd Place"})]}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-white",children:[(0,zt.jsx)(Xwe,{size:14,className:"text-slate-400"})," 50 Pro Credits"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(Cm,{size:14,className:"text-slate-400"})," Runner Up Badge"]})]})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-700/20 to-amber-700/5 border border-amber-700/30",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-700 flex items-center justify-center",children:(0,zt.jsx)(Cm,{className:"text-white",size:20})}),(0,zt.jsx)("span",{className:"font-bold text-amber-600",children:"3rd Place"})]}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-white",children:[(0,zt.jsx)(Xwe,{size:14,className:"text-amber-700"})," 25 Pro Credits"]}),(0,zt.jsxs)("li",{className:"flex items-center gap-2 text-slate-300",children:[(0,zt.jsx)(Cm,{size:14,className:"text-amber-700"})," Third Place Badge"]})]})]})]})}),(0,zt.jsx)(cx,{title:"\ud83d\udcca Leaderboard",icon:(0,zt.jsx)(jm,{className:"text-teal-400"}),accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-4 py-2 text-xs font-mono text-slate-500 border-b border-white/5",children:[(0,zt.jsx)("div",{className:"col-span-1",children:"Rank"}),(0,zt.jsx)("div",{className:"col-span-4",children:"Trader"}),(0,zt.jsx)("div",{className:"col-span-2 text-right",children:"P&L %"}),(0,zt.jsx)("div",{className:"col-span-2 text-right",children:"Balance"}),(0,zt.jsx)("div",{className:"col-span-2 text-right",children:"Trades"}),(0,zt.jsx)("div",{className:"col-span-1 text-right",children:"Win %"})]}),a.map((e,t)=>{var n;const r=1===(a=e.rank)?{icon:Kwe,color:"text-amber-400",bg:"bg-amber-500/20"}:2===a?{icon:qwe,color:"text-slate-300",bg:"bg-slate-400/20"}:3===a?{icon:Cm,color:"text-amber-700",bg:"bg-amber-700/20"}:{icon:null,color:"text-slate-500",bg:"bg-slate-700/50"};var a;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"grid grid-cols-12 gap-2 px-4 py-3 rounded-lg ".concat(e.rank<=3?r.bg:"bg-white/5 hover:bg-white/10"," transition-colors"),children:[(0,zt.jsx)("div",{className:"col-span-1 flex items-center gap-2",children:r.icon?(0,zt.jsx)(r.icon,{size:16,className:r.color}):(0,zt.jsx)("span",{className:"text-slate-500 font-mono text-sm",children:e.rank})}),(0,zt.jsxs)("div",{className:"col-span-4 flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"font-semibold text-white",children:e.username}),e.rank_change>0&&(0,zt.jsxs)("span",{className:"flex items-center text-xs text-emerald-400",children:[(0,zt.jsx)(wke,{size:12})," ",e.rank_change]}),e.rank_change<0&&(0,zt.jsxs)("span",{className:"flex items-center text-xs text-red-400",children:[(0,zt.jsx)(kke,{size:12})," ",Math.abs(e.rank_change)]})]}),(0,zt.jsx)("div",{className:"col-span-2 text-right font-mono font-semibold ".concat(e.pnl_percent>=0?"text-emerald-400":"text-red-400"),children:g(e.pnl_percent)}),(0,zt.jsx)("div",{className:"col-span-2 text-right font-mono text-white",children:m(e.current_balance)}),(0,zt.jsx)("div",{className:"col-span-2 text-right text-slate-400",children:e.total_trades}),(0,zt.jsxs)("div",{className:"col-span-1 text-right text-slate-400",children:[null===(n=e.win_rate)||void 0===n?void 0:n.toFixed(0),"%"]})]},t)})]})}),(0,zt.jsx)(cx,{title:"\ud83d\udccb Rules",accent:"blue",children:(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Trading Rules"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{children:"\u2022 Start with $100,000 virtual balance"}),(0,zt.jsx)("li",{children:"\u2022 Trade BTC, ETH, SOL, XRP, ADA, DOGE"}),(0,zt.jsx)("li",{children:"\u2022 Maximum 25% of portfolio in single position"}),(0,zt.jsx)("li",{children:"\u2022 Minimum 3 trades required to qualify"}),(0,zt.jsx)("li",{children:"\u2022 No leverage (1x only)"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Scoring"}),(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{children:"\u2022 Ranked by total return percentage"}),(0,zt.jsx)("li",{children:"\u2022 Ties broken by number of winning trades"}),(0,zt.jsx)("li",{children:"\u2022 Results finalized 1 hour after end"}),(0,zt.jsx)("li",{children:"\u2022 Prizes distributed within 24 hours"})]})]})]})}),(0,zt.jsx)(rn,{children:d&&n&&(0,zt.jsx)(jke,{tournamentId:n.id,onClose:()=>h(!1)})})]})},Tke=km("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),Ike=km("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Ake=km("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);"undefined"===typeof window||!window.document||window.document.createElement;function Oke(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}const _ke=["scope","children"];function Rke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const r=()=>{const t=n.map(e=>o.createContext(e));return function(n){const r=(null===n||void 0===n?void 0:n[e])||t;return o.useMemo(()=>({["__scope".concat(e)]:m(m({},n),{},{[e]:r})}),[n,r])}};return r.scopeName=e,[function(t,r){const a=o.createContext(r),i=n.length;n=[...n,r];const s=t=>{var n;const{scope:r,children:s}=t,l=u(t,_ke),c=(null===r||void 0===r||null===(n=r[e])||void 0===n?void 0:n[i])||a,d=o.useMemo(()=>l,Object.values(l));return(0,zt.jsx)(c.Provider,{value:d,children:s})};return s.displayName=t+"Provider",[s,function(n,s){var l;const c=(null===s||void 0===s||null===(l=s[e])||void 0===l?void 0:l[i])||a,u=o.useContext(c);if(u)return u;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},Pke(r,...t)]}function Pke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0];if(1===t.length)return r;const a=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const n=e.reduce((e,n)=>{let{useScope:r,scopeName:a}=n;const i=r(t)["__scope".concat(a)];return m(m({},e),i)},{});return o.useMemo(()=>({["__scope".concat(r.scopeName)]:n}),[n])}};return a.scopeName=r.scopeName,a}function Mke(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Dke(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Fke(e,t){return e.get(Dke(e,t))}function Lke(e,t,n){return e.set(Dke(e,t),n),n}function zke(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Bke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=zke(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():zke(t[e],null)}}}}function Uke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useCallback(Bke(...t),t)}const Wke=["children"],Vke=["children"];function Hke(e){const t=Gke(e),n=o.forwardRef((e,n)=>{const{children:r}=e,a=u(e,Wke),i=o.Children.toArray(r),s=i.find(Xke);if(s){const e=s.props.children,r=i.map(t=>t===s?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return(0,zt.jsx)(t,m(m({},a),{},{ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null}))}return(0,zt.jsx)(t,m(m({},a),{},{ref:n,children:r}))});return n.displayName="".concat(e,".Slot"),n}function Gke(e){const t=o.forwardRef((e,t)=>{const{children:n}=e,r=u(e,Vke);if(o.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n=m({},t);for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=function(){const e=i(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=m(m({},a),i):"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return m(m({},e),n)}(r,n.props);return n.type!==o.Fragment&&(a.ref=t?Bke(t,e):e),o.cloneElement(n,a)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Kke=Symbol("radix.slottable");var qke;function Xke(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Kke}const Yke=["scope","children"];var $ke=new WeakMap;qke=new WeakMap,Map;function Qke(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=Jke(t),a=r>=0?r:n+r;return a<0||a>=n?-1:a}(e,t);return-1===n?void 0:e[n]}function Jke(e){return e!==e||0===e?0:Math.trunc(e)}var Zke=null!==globalThis&&void 0!==globalThis&&globalThis.document?o.useLayoutEffect:()=>{},eNe=l[" useId ".trim().toString()]||(()=>{}),tNe=0;function nNe(e){const[t,n]=o.useState(eNe());return Zke(()=>{e||n(e=>null!==e&&void 0!==e?e:String(tNe++))},[e]),e||(t?"radix-".concat(t):"")}const rNe=["children"],aNe=["children"];function iNe(e){const t=sNe(e),n=o.forwardRef((e,n)=>{const{children:r}=e,a=u(e,rNe),i=o.Children.toArray(r),s=i.find(lNe);if(s){const e=s.props.children,r=i.map(t=>t===s?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return(0,zt.jsx)(t,m(m({},a),{},{ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null}))}return(0,zt.jsx)(t,m(m({},a),{},{ref:n,children:r}))});return n.displayName="".concat(e,".Slot"),n}function sNe(e){const t=o.forwardRef((e,t)=>{const{children:n}=e,r=u(e,aNe);if(o.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n=m({},t);for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=function(){const e=i(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=m(m({},a),i):"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return m(m({},e),n)}(r,n.props);return n.type!==o.Fragment&&(a.ref=t?Bke(t,e):e),o.cloneElement(n,a)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var oNe=Symbol("radix.slottable");function lNe(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===oNe}const cNe=["asChild"];var uNe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=iNe("Primitive.".concat(t)),r=o.forwardRef((e,r)=>{const{asChild:a}=e,i=u(e,cNe),s=a?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,zt.jsx)(s,m(m({},i),{},{ref:r}))});return r.displayName="Primitive.".concat(t),m(m({},e),{},{[t]:r})},{});var dNe=l[" useInsertionEffect ".trim().toString()]||Zke;function hNe(e){let{prop:t,defaultProp:n,onChange:r=()=>{},caller:a}=e;const[i,s,l]=function(e){let{defaultProp:t,onChange:n}=e;const[r,a]=o.useState(t),i=o.useRef(r),s=o.useRef(n);return dNe(()=>{s.current=n},[n]),o.useEffect(()=>{var e;i.current!==r&&(null===(e=s.current)||void 0===e||e.call(s,r),i.current=r)},[r,i]),[r,a,s]}({defaultProp:n,onChange:r}),c=void 0!==t,u=c?t:i;{const e=o.useRef(void 0!==t);o.useEffect(()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(a," is changing from ").concat(e," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=c},[c,a])}const d=o.useCallback(e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(t):e;var n;if(r!==t)null===(n=l.current)||void 0===n||n.call(l,r)}else s(e)},[c,t,s,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var pNe=o.createContext(void 0);function fNe(e){const t=o.useContext(pNe);return e||t||"ltr"}const mNe=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],gNe=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var xNe="rovingFocusGroup.onEntryFocus",vNe={bubbles:!1,cancelable:!0},yNe="RovingFocusGroup",[bNe,wNe,kNe]=function(e){const t=e+"CollectionProvider",[n,r]=Rke(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=e=>{const{scope:t,children:n}=e,r=o.useRef(null),i=o.useRef(new Map).current;return(0,zt.jsx)(a,{scope:t,itemMap:i,collectionRef:r,children:n})};s.displayName=t;const l=e+"CollectionSlot",c=Hke(l),d=o.forwardRef((e,t)=>{const{scope:n,children:r}=e,a=Uke(t,i(l,n).collectionRef);return(0,zt.jsx)(c,{ref:a,children:r})});d.displayName=l;const h=e+"CollectionItemSlot",p="data-radix-collection-item",f=Hke(h),g=o.forwardRef((e,t)=>{const{scope:n,children:r}=e,a=u(e,Yke),s=o.useRef(null),l=Uke(t,s),c=i(h,n);return o.useEffect(()=>(c.itemMap.set(s,m({ref:s},a)),()=>{c.itemMap.delete(s)})),(0,zt.jsx)(f,m(m({},{[p]:""}),{},{ref:l,children:r}))});return g.displayName=h,[{Provider:s,Slot:d,ItemSlot:g},function(t){const n=i(e+"CollectionConsumer",t),r=o.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}(yNe),[NNe,SNe]=Rke(yNe,[kNe]),[jNe,CNe]=NNe(yNe),ENe=o.forwardRef((e,t)=>(0,zt.jsx)(bNe.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,zt.jsx)(bNe.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,zt.jsx)(TNe,m(m({},e),{},{ref:t}))})}));ENe.displayName=yNe;var TNe=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1}=e,p=u(e,mNe),f=o.useRef(null),g=Uke(t,f),x=fNe(i),[v,y]=hNe({prop:s,defaultProp:null!==l&&void 0!==l?l:null,onChange:c,caller:yNe}),[b,w]=o.useState(!1),k=function(e){const t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call(t,...r)},[])}(d),N=wNe(n),S=o.useRef(!1),[j,C]=o.useState(0);return o.useEffect(()=>{const e=f.current;if(e)return e.addEventListener(xNe,k),()=>e.removeEventListener(xNe,k)},[k]),(0,zt.jsx)(jNe,{scope:n,orientation:r,dir:x,loop:a,currentTabStopId:v,onItemFocus:o.useCallback(e=>y(e),[y]),onItemShiftTab:o.useCallback(()=>w(!0),[]),onFocusableItemAdd:o.useCallback(()=>C(e=>e+1),[]),onFocusableItemRemove:o.useCallback(()=>C(e=>e-1),[]),children:(0,zt.jsx)(uNe.div,m(m({tabIndex:b||0===j?-1:0,"data-orientation":r},p),{},{ref:g,style:m({outline:"none"},e.style),onMouseDown:Oke(e.onMouseDown,()=>{S.current=!0}),onFocus:Oke(e.onFocus,e=>{const t=!S.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(xNe,vNe);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=N().filter(e=>e.focusable);_Ne([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),h)}}S.current=!1}),onBlur:Oke(e.onBlur,()=>w(!1))}))})}),INe="RovingFocusGroupItem",ANe=o.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s}=e,l=u(e,gNe),c=nNe(),d=i||c,h=CNe(INe,n),p=h.currentTabStopId===d,f=wNe(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:v}=h;return o.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),(0,zt.jsx)(bNe.ItemSlot,{scope:n,id:d,focusable:r,active:a,children:(0,zt.jsx)(uNe.span,m(m({tabIndex:p?0:-1,"data-orientation":h.orientation},l),{},{ref:t,onMouseDown:Oke(e.onMouseDown,e=>{r?h.onItemFocus(d):e.preventDefault()}),onFocus:Oke(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:Oke(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:ONe[r]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const r=n.indexOf(e.currentTarget);n=h.loop?function(e,t){return e.map((n,r)=>e[(t+r)%e.length])}(n,r+1):n.slice(r+1)}setTimeout(()=>_Ne(n))}}),children:"function"===typeof s?s({isCurrentTabStop:p,hasTabStop:null!=v}):s}))})});ANe.displayName=INe;var ONe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _Ne(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var RNe=ENe,PNe=ANe;var MNe=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=o.useState(),r=o.useRef(null),a=o.useRef(e),i=o.useRef("none"),s=e?"mounted":"unmounted",[l,c]=function(e,t){return o.useReducer((e,n)=>{const r=t[e][n];return null!==r&&void 0!==r?r:e},e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const e=DNe(r.current);i.current="mounted"===l?e:"none"},[l]),Zke(()=>{const t=r.current,n=a.current;if(n!==e){const r=i.current,s=DNe(t);if(e)c("MOUNT");else if("none"===s||"none"===(null===t||void 0===t?void 0:t.display))c("UNMOUNT");else{c(n&&r!==s?"ANIMATION_OUT":"UNMOUNT")}a.current=e}},[e,c]),Zke(()=>{if(t){var e;let n;const s=null!==(e=t.ownerDocument.defaultView)&&void 0!==e?e:window,o=e=>{const i=DNe(r.current).includes(CSS.escape(e.animationName));if(e.target===t&&i&&(c("ANIMATION_END"),!a.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",n=s.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},l=e=>{e.target===t&&(i.current=DNe(r.current))};return t.addEventListener("animationstart",l),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{s.clearTimeout(n),t.removeEventListener("animationstart",l),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),a="function"===typeof n?n({present:r.isPresent}):o.Children.only(n),i=Uke(r.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(a));return"function"===typeof n||r.isPresent?o.cloneElement(a,{ref:i}):null};function DNe(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}MNe.displayName="Presence";const FNe=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],LNe=["__scopeTabs","loop"],zNe=["__scopeTabs","value","disabled"],BNe=["__scopeTabs","value","forceMount","children"];var UNe="Tabs",[WNe,VNe]=Rke(UNe,[SNe]),HNe=SNe(),[GNe,KNe]=WNe(UNe),qNe=o.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic"}=e,c=u(e,FNe),d=fNe(o),[h,p]=hNe({prop:r,onChange:a,defaultProp:null!==i&&void 0!==i?i:"",caller:UNe});return(0,zt.jsx)(GNe,{scope:n,baseId:nNe(),value:h,onValueChange:p,orientation:s,dir:d,activationMode:l,children:(0,zt.jsx)(uNe.div,m(m({dir:d,"data-orientation":s},c),{},{ref:t}))})});qNe.displayName=UNe;var XNe="TabsList",YNe=o.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0}=e,a=u(e,LNe),i=KNe(XNe,n),s=HNe(n);return(0,zt.jsx)(RNe,m(m({asChild:!0},s),{},{orientation:i.orientation,dir:i.dir,loop:r,children:(0,zt.jsx)(uNe.div,m(m({role:"tablist","aria-orientation":i.orientation},a),{},{ref:t}))}))});YNe.displayName=XNe;var $Ne="TabsTrigger",QNe=o.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1}=e,i=u(e,zNe),s=KNe($Ne,n),o=HNe(n),l=eSe(s.baseId,r),c=tSe(s.baseId,r),d=r===s.value;return(0,zt.jsx)(PNe,m(m({asChild:!0},o),{},{focusable:!a,active:d,children:(0,zt.jsx)(uNe.button,m(m({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l},i),{},{ref:t,onMouseDown:Oke(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():s.onValueChange(r)}),onKeyDown:Oke(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&s.onValueChange(r)}),onFocus:Oke(e.onFocus,()=>{const e="manual"!==s.activationMode;d||a||!e||s.onValueChange(r)})}))}))});QNe.displayName=$Ne;var JNe="TabsContent",ZNe=o.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i}=e,s=u(e,BNe),l=KNe(JNe,n),c=eSe(l.baseId,r),d=tSe(l.baseId,r),h=r===l.value,p=o.useRef(h);return o.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,zt.jsx)(MNe,{present:a||h,children:n=>{let{present:r}=n;return(0,zt.jsx)(uNe.div,m(m({"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:d,tabIndex:0},s),{},{ref:t,style:m(m({},e.style),{},{animationDuration:p.current?"0s":void 0}),children:r&&i}))}})});function eSe(e,t){return"".concat(e,"-trigger-").concat(t)}function tSe(e,t){return"".concat(e,"-content-").concat(t)}ZNe.displayName=JNe;var nSe=YNe,rSe=QNe,aSe=ZNe;const iSe=["className"],sSe=["className"],oSe=["className"],lSe=qNe,cSe=o.forwardRef((e,t)=>{let{className:n}=e,r=u(e,iSe);return(0,zt.jsx)(nSe,m({ref:t,className:ox("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},r))});cSe.displayName=nSe.displayName;const uSe=o.forwardRef((e,t)=>{let{className:n}=e,r=u(e,sSe);return(0,zt.jsx)(rSe,m({ref:t,className:ox("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},r))});uSe.displayName=rSe.displayName;const dSe=o.forwardRef((e,t)=>{let{className:n}=e,r=u(e,oSe);return(0,zt.jsx)(aSe,m({ref:t,className:ox("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},r))});dSe.displayName=aSe.displayName;const hSe=["scope","children"];function pSe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0];if(1===t.length)return r;const a=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const n=e.reduce((e,n)=>{let{useScope:r,scopeName:a}=n;const i=r(t)["__scope".concat(a)];return m(m({},e),i)},{});return o.useMemo(()=>({["__scope".concat(r.scopeName)]:n}),[n])}};return a.scopeName=r.scopeName,a}const fSe=["children"],mSe=["children"];var gSe=Symbol.for("react.lazy"),xSe=l[" use ".trim().toString()];function vSe(e){return null!=e&&"object"===typeof e&&"$$typeof"in e&&e.$$typeof===gSe&&"_payload"in e&&function(e){return"object"===typeof e&&null!==e&&"then"in e}(e._payload)}function ySe(e){const t=wSe(e),n=o.forwardRef((e,n)=>{let{children:r}=e,a=u(e,fSe);vSe(r)&&"function"===typeof xSe&&(r=xSe(r._payload));const i=o.Children.toArray(r),s=i.find(NSe);if(s){const e=s.props.children,r=i.map(t=>t===s?o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null:t);return(0,zt.jsx)(t,m(m({},a),{},{ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null}))}return(0,zt.jsx)(t,m(m({},a),{},{ref:n,children:r}))});return n.displayName="".concat(e,".Slot"),n}var bSe=ySe("Slot");function wSe(e){const t=o.forwardRef((e,t)=>{let{children:n}=e,r=u(e,mSe);if(vSe(n)&&"function"===typeof xSe&&(n=xSe(n._payload)),o.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n=m({},t);for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=function(){const e=i(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=m(m({},a),i):"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return m(m({},e),n)}(r,n.props);return n.type!==o.Fragment&&(a.ref=t?Bke(t,e):e),o.cloneElement(n,a)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var kSe=Symbol("radix.slottable");function NSe(e){return o.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===kSe}const SSe=["asChild"];var jSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=ySe("Primitive.".concat(t)),r=o.forwardRef((e,r)=>{const{asChild:a}=e,i=u(e,SSe),s=a?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,zt.jsx)(s,m(m({},i),{},{ref:r}))});return r.displayName="Primitive.".concat(t),m(m({},e),{},{[t]:r})},{});const CSe=["__scopeProgress","value","max","getValueLabel"],ESe=["__scopeProgress"];var TSe="Progress",ISe=100,[ASe,OSe]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const r=()=>{const t=n.map(e=>o.createContext(e));return function(n){const r=(null===n||void 0===n?void 0:n[e])||t;return o.useMemo(()=>({["__scope".concat(e)]:m(m({},n),{},{[e]:r})}),[n,r])}};return r.scopeName=e,[function(t,r){const a=o.createContext(r);a.displayName=t+"Context";const i=n.length;n=[...n,r];const s=t=>{var n;const{scope:r,children:s}=t,l=u(t,hSe),c=(null===r||void 0===r||null===(n=r[e])||void 0===n?void 0:n[i])||a,d=o.useMemo(()=>l,Object.values(l));return(0,zt.jsx)(c.Provider,{value:d,children:s})};return s.displayName=t+"Provider",[s,function(n,s){var l;const c=(null===s||void 0===s||null===(l=s[e])||void 0===l?void 0:l[i])||a,u=o.useContext(c);if(u)return u;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},pSe(r,...t)]}(TSe),[_Se,RSe]=ASe(TSe),PSe=o.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=FSe}=e,s=u(e,CSe);var o,l;!a&&0!==a||BSe(a)||console.error((o="".concat(a),l="Progress","Invalid prop `max` of value `".concat(o,"` supplied to `").concat(l,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(ISe,"`.")));const c=BSe(a)?a:ISe;null===r||USe(r,c)||console.error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(ISe," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")}("".concat(r),"Progress"));const d=USe(r,c)?r:null,h=zSe(d)?i(d,c):void 0;return(0,zt.jsx)(_Se,{scope:n,value:d,max:c,children:(0,zt.jsx)(jSe.div,m(m({"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":zSe(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":LSe(d,c),"data-value":null!==d&&void 0!==d?d:void 0,"data-max":c},s),{},{ref:t}))})});PSe.displayName=TSe;var MSe="ProgressIndicator",DSe=o.forwardRef((e,t)=>{var n;const{__scopeProgress:r}=e,a=u(e,ESe),i=RSe(MSe,r);return(0,zt.jsx)(jSe.div,m(m({"data-state":LSe(i.value,i.max),"data-value":null!==(n=i.value)&&void 0!==n?n:void 0,"data-max":i.max},a),{},{ref:t}))});function FSe(e,t){return"".concat(Math.round(e/t*100),"%")}function LSe(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function zSe(e){return"number"===typeof e}function BSe(e){return zSe(e)&&!isNaN(e)&&e>0}function USe(e,t){return zSe(e)&&!isNaN(e)&&e<=t&&e>=0}DSe.displayName=MSe;var WSe=PSe,VSe=DSe;const HSe=["className","value"],GSe=o.forwardRef((e,t)=>{let{className:n,value:r}=e,a=u(e,HSe);return(0,zt.jsx)(WSe,m(m({ref:t,className:ox("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n)},a),{},{children:(0,zt.jsx)(VSe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})}))});GSe.displayName=WSe.displayName;const KSe="".concat("https://srv1304213.hstgr.cloud/api","/api"),qSe=e=>{var t,n;let{data:r}=e;if(!r)return(0,zt.jsx)(ZSe,{message:"Macro data unavailable"});const a=r.economic_machine_position||{},i=r.debt_cycle||{},s=r.liquidity_conditions||{},o=r.principles_applied||[];return(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6","data-testid":"macro-panel",children:[(0,zt.jsx)(cx,{title:"Economic Machine Position",icon:"\ud83c\udf0d",accent:"teal",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-teal-500/10 border border-teal-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Current Phase"}),(0,zt.jsx)("p",{className:"text-lg font-bold text-teal-400 uppercase",children:(null===(t=a.current_phase)||void 0===t?void 0:t.replace(/_/g," "))||"N/A"})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:a.phase_description}),a.recommended_allocation&&(0,zt.jsxs)("div",{className:"mt-4",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Recommended Allocation"}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(a.recommended_allocation).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5",children:[(0,zt.jsx)("span",{className:"text-xs text-slate-400 capitalize",children:t}),(0,zt.jsxs)("span",{className:"text-sm font-mono text-white",children:[n,"%"]})]},t)})})]})]})}),(0,zt.jsx)(cx,{title:"Debt Cycle Analysis",icon:"\ud83d\udcca",accent:"amber",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Debt/GDP"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-amber-400",children:[i.debt_to_gdp,"%"]})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Credit Growth"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-blue-400",children:[i.credit_growth,"%"]})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Deleveraging Risk"}),(0,zt.jsxs)("span",{className:"text-amber-400",children:[(100*i.deleveraging_risk).toFixed(0),"%"]})]}),(0,zt.jsx)(GSe,{value:100*i.deleveraging_risk,className:"h-2 bg-white/10"})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Bubble Indicator"}),(0,zt.jsxs)("span",{className:"text-red-400",children:[(100*i.bubble_indicator).toFixed(0),"%"]})]}),(0,zt.jsx)(GSe,{value:100*i.bubble_indicator,className:"h-2 bg-white/10"})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:i.projection})]})}),(0,zt.jsx)(cx,{title:"Global Liquidity Conditions",icon:"\ud83d\udca7",accent:"blue",children:(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Score"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-blue-400",children:s.liquidity_score})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Trend"}),(0,zt.jsx)("p",{className:"text-sm font-medium text-white capitalize",children:s.trend})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Risk Appetite"}),(0,zt.jsx)("p",{className:"text-sm font-medium capitalize ".concat("risk-on"===s.risk_appetite?"text-emerald-400":"risk-off"===s.risk_appetite?"text-red-400":"text-slate-400"),children:null===(n=s.risk_appetite)||void 0===n?void 0:n.replace("-"," ")})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"CB Assets"}),(0,zt.jsxs)("p",{className:"font-mono text-white",children:["$",s.total_central_bank_assets,"T"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"M2 Growth"}),(0,zt.jsxs)("p",{className:"font-mono text-white",children:[s.m2_growth_global,"%"]})]})]})]})}),(0,zt.jsxs)(cx,{title:"Ray Dalio's Principles Applied",icon:"\ud83d\udcd6",accent:"purple",children:[(0,zt.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border-l-2 border-purple-500",children:[(0,zt.jsx)("p",{className:"text-sm font-medium text-purple-400",children:e.principle}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:e.application})]},t))}),r.overall_assessment&&(0,zt.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Overall Assessment"}),(0,zt.jsx)("p",{className:"text-sm text-white",children:r.overall_assessment})]})]})]})},XSe=e=>{var t,n,r,a;let{data:i}=e;const[s,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{(async()=>{h(!0);try{const[e,t]=await Promise.all([fetch("".concat(KSe,"/quant/inefficiency/signals")).then(e=>e.json()),fetch("".concat(KSe,"/quant/inefficiency/pairs")).then(e=>e.json())]);l(e||[]),u(t||[])}catch(Yje){console.error(Yje)}h(!1)})()},[]),!i)return(0,zt.jsx)(ZSe,{message:"Inefficiency data unavailable"});const p=e=>"strong"===e?"text-emerald-400 bg-emerald-500/20":"moderate"===e?"text-amber-400 bg-amber-500/20":"text-slate-400 bg-slate-500/20";return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"inefficiency-panel",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(JSe,{label:"Total Signals",value:i.total_signals,icon:Jbe,color:"purple"}),(0,zt.jsx)(JSe,{label:"Strong Signals",value:i.strong_signals,icon:Om,color:"emerald"}),(0,zt.jsx)(JSe,{label:"Avg Confidence",value:"".concat((100*i.average_confidence).toFixed(0),"%"),icon:jm,color:"blue"}),(0,zt.jsx)(JSe,{label:"Avg Expected Return",value:"".concat(null===(t=i.average_expected_return)||void 0===t?void 0:t.toFixed(1),"%"),icon:mx,color:"teal"})]}),i.best_opportunity&&(0,zt.jsx)(cx,{title:"Best Opportunity",icon:"\u2b50",accent:"amber",children:(0,zt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,zt.jsx)("div",{className:"p-3 rounded-lg ".concat(p(i.best_opportunity.strength)),children:(0,zt.jsx)(Om,{size:24})}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)("span",{className:"text-lg font-bold text-white",children:null===(n=i.best_opportunity.assets)||void 0===n?void 0:n.join(" / ")}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(p(i.best_opportunity.strength)),children:i.best_opportunity.strength})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:i.best_opportunity.rationale}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Direction"}),(0,zt.jsx)("p",{className:"text-sm font-medium ".concat(null!==(r=i.best_opportunity.direction)&&void 0!==r&&r.includes("long")?"text-emerald-400":"text-red-400"),children:null===(a=i.best_opportunity.direction)||void 0===a?void 0:a.toUpperCase()})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Expected Return"}),(0,zt.jsxs)("p",{className:"text-sm font-medium text-teal-400",children:[i.best_opportunity.expected_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Risk/Reward"}),(0,zt.jsxs)("p",{className:"text-sm font-medium text-blue-400",children:[i.best_opportunity.risk_reward,"x"]})]})]})]})]})}),(0,zt.jsx)(cx,{title:"Active Signals",icon:"\ud83d\udce1",accent:"purple",children:d?(0,zt.jsx)("div",{className:"text-center py-4 text-slate-500",children:"Loading signals..."}):(0,zt.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map((e,t)=>{var n,r,a,i;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-sm font-medium text-white",children:null===(n=e.assets)||void 0===n?void 0:n.join(" / ")}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(p(e.strength)),children:e.strength})]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:null===(r=e.signal_type)||void 0===r?void 0:r.replace(/_/g," ")})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:e.rationale}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,zt.jsx)("span",{className:null!==(a=e.direction)&&void 0!==a&&a.includes("long")?"text-emerald-400":"text-red-400",children:null===(i=e.direction)||void 0===i?void 0:i.toUpperCase()}),(0,zt.jsxs)("span",{className:"text-slate-500",children:["Conf: ",(100*e.confidence).toFixed(0),"%"]}),(0,zt.jsxs)("span",{className:"text-teal-400",children:["+",e.expected_return,"%"]}),(0,zt.jsx)("span",{className:"text-slate-500",children:e.holding_period})]})]},e.id||t)})})}),c.length>0&&(0,zt.jsx)(cx,{title:"Pairs Trading Opportunities",icon:"\ud83d\udd04",accent:"blue",children:(0,zt.jsx)("div",{className:"space-y-3",children:c.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)("span",{className:"text-emerald-400 text-sm",children:["Long ",e.asset_long]}),(0,zt.jsx)("span",{className:"text-slate-500",children:"/"}),(0,zt.jsxs)("span",{className:"text-red-400 text-sm",children:["Short ",e.asset_short]})]}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500 ml-auto",children:["Correlation: ",(100*e.correlation).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Z-Score"}),(0,zt.jsx)("p",{className:"text-white",children:e.spread_zscore})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Half-Life"}),(0,zt.jsxs)("p",{className:"text-white",children:[e.half_life,"d"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Confidence"}),(0,zt.jsxs)("p",{className:"text-teal-400",children:[(100*e.confidence).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Cointegration"}),(0,zt.jsxs)("p",{className:e.cointegration_pvalue<.05?"text-emerald-400":"text-amber-400",children:["p=",e.cointegration_pvalue]})]})]})]},t))})})]})},YSe=e=>{var t,n,r,a,i;let{data:s}=e;const[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(null);if((0,o.useEffect)(()=>{(async()=>{try{const[e,t,n]=await Promise.all([fetch("".concat(KSe,"/quant/portfolio/strategies")).then(e=>e.json()),fetch("".concat(KSe,"/quant/portfolio/risk-parity")).then(e=>e.json()),fetch("".concat(KSe,"/quant/portfolio/pure-alpha")).then(e=>e.json())]);c((null===e||void 0===e?void 0:e.strategies)||[]),d(t),p(n)}catch(Yje){console.error(Yje)}})()},[]),!s)return(0,zt.jsx)(ZSe,{message:"Portfolio data unavailable"});const f=s.weights||{};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"portfolio-panel",children:[(0,zt.jsxs)(cx,{title:s.strategy||"All Weather Portfolio",icon:"\ud83c\udf24\ufe0f",accent:"blue",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:s.description}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Expected Return"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-emerald-400",children:[s.expected_annual_return,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Volatility"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-amber-400",children:[s.expected_volatility,"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Sharpe Ratio"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-blue-400",children:s.sharpe_ratio})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Max Drawdown"}),(0,zt.jsxs)("p",{className:"text-xl font-bold text-red-400",children:[s.max_historical_drawdown,"%"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:"Asset Allocation"}),(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(f).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"w-24 text-xs text-slate-400 capitalize",children:t.replace(/_/g," ")}),(0,zt.jsx)("div",{className:"flex-1",children:(0,zt.jsx)(GSe,{value:100*n,className:"h-3 bg-white/10"})}),(0,zt.jsxs)("div",{className:"w-12 text-right text-sm font-mono text-white",children:[(100*n).toFixed(1),"%"]})]},t)})})]}),s.assets_mapping&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:"ETF Mapping"}),(0,zt.jsx)("div",{className:"space-y-2",children:Object.entries(s.assets_mapping).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,zt.jsx)("span",{className:"text-slate-400 capitalize w-24",children:t.replace(/_/g," ")}),(0,zt.jsx)("span",{className:"text-teal-400",children:n.join(", ")})]},t)})})]})]})]}),l.length>0&&(0,zt.jsx)(cx,{title:"Strategy Comparison",icon:"\ud83d\udcc8",accent:"purple",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.map(e=>(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsx)("h4",{className:"text-white font-medium mb-2",children:e.name}),(0,zt.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Risk Level"}),(0,zt.jsx)("span",{className:"capitalize ".concat("low"===e.risk_level?"text-emerald-400":"medium"===e.risk_level?"text-amber-400":"text-red-400"),children:e.risk_level})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Expected Return"}),(0,zt.jsxs)("span",{className:"text-teal-400",children:[e.expected_return,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Volatility"}),(0,zt.jsxs)("span",{className:"text-amber-400",children:[e.expected_volatility,"%"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Sharpe"}),(0,zt.jsx)("span",{className:"text-blue-400",children:e.sharpe})]})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-3",children:e.suitable_for})]},e.type))})}),h&&(0,zt.jsxs)(cx,{title:"Pure Alpha Strategy",icon:"\u26a1",accent:"amber",children:[(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:h.description}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Gross Exposure"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-white",children:[(100*(null===(t=h.exposure)||void 0===t?void 0:t.gross)).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Net Exposure"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:[(100*(null===(n=h.exposure)||void 0===n?void 0:n.net)).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Long"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:[(100*(null===(r=h.exposure)||void 0===r?void 0:r.long)).toFixed(0),"%"]})]}),(0,zt.jsxs)("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Short"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-red-400",children:[(100*(null===(a=h.exposure)||void 0===a?void 0:a.short)).toFixed(0),"%"]})]})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Current Positions"}),(0,zt.jsx)("div",{className:"space-y-2",children:null===(i=h.signals)||void 0===i?void 0:i.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"long"===e.signal?"text-emerald-400":"text-red-400",children:"long"===e.signal?(0,zt.jsx)(Fbe,{size:14}):(0,zt.jsx)(Lbe,{size:14})}),(0,zt.jsx)("span",{className:"text-white text-sm",children:e.asset})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:e.alpha_source}),(0,zt.jsxs)("span",{className:e.weight>=0?"text-emerald-400":"text-red-400",children:[e.weight>=0?"+":"",(100*e.weight).toFixed(0),"%"]})]})]},t))})]})]})},$Se=e=>{var t,n;let{data:r}=e;const[a,i]=(0,o.useState)(null),[s,l]=(0,o.useState)("hedge_fund"),[c,u]=(0,o.useState)(!1),d=[{id:"central_bank",label:"Central Bank",icon:Ike},{id:"hedge_fund",label:"Hedge Fund",icon:jm},{id:"sovereign_wealth",label:"Sovereign Wealth",icon:swe},{id:"government",label:"Government",icon:Ake},{id:"bank",label:"Commercial Bank",icon:Wm}];if((0,o.useEffect)(()=>{(async()=>{u(!0);try{const e=await fetch("".concat(KSe,"/quant/institutional/advisory/").concat(s)),t=await e.json();i(t)}catch(Yje){console.error(Yje)}u(!1)})()},[s]),!r)return(0,zt.jsx)(ZSe,{message:"Institutional data unavailable"});const h=e=>({low:"border-emerald-500 bg-emerald-500/10",moderate:"border-amber-500 bg-amber-500/10",elevated:"border-orange-500 bg-orange-500/10",high:"border-red-500 bg-red-500/10",critical:"border-red-600 bg-red-600/20"}[e]||"border-slate-500 bg-slate-500/10");return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"institutional-panel",children:[(0,zt.jsxs)(cx,{title:"Systemic Risk Dashboard",icon:"\ud83d\udee1\ufe0f",accent:"amber",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("div",{className:"p-4 rounded-xl ".concat(h(r.overall_risk_level)," border-2"),children:(0,zt.jsx)(Im,{size:32,className:"low"===r.overall_risk_level?"text-emerald-400":"moderate"===r.overall_risk_level?"text-amber-400":"elevated"===r.overall_risk_level?"text-orange-400":"text-red-400"})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Overall Risk Level"}),(0,zt.jsx)("p",{className:"text-2xl font-bold uppercase ".concat("low"===r.overall_risk_level?"text-emerald-400":"moderate"===r.overall_risk_level?"text-amber-400":"elevated"===r.overall_risk_level?"text-orange-400":"text-red-400"),children:r.overall_risk_level})]})]}),(0,zt.jsxs)("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Aggregate Risk Score"}),(0,zt.jsx)("p",{className:"text-3xl font-bold text-white",children:r.aggregate_risk_score}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"out of 100"})]})]}),(0,zt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:null===(t=r.indicators)||void 0===t?void 0:t.slice(0,8).map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg border ".concat(h(e.status)),children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.name}),(0,zt.jsx)("p",{className:"text-lg font-bold text-white",children:e.current_value}),(0,zt.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:["rising"===e.trend&&(0,zt.jsx)(Fbe,{size:12,className:"text-red-400"}),"falling"===e.trend&&(0,zt.jsx)(Lbe,{size:12,className:"text-emerald-400"}),"stable"===e.trend&&(0,zt.jsx)(Em,{size:12,className:"text-slate-400"}),(0,zt.jsx)("span",{className:"text-slate-500 capitalize",children:e.trend})]})]},t))}),(null===(n=r.key_concerns)||void 0===n?void 0:n.length)>0&&(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,zt.jsxs)("p",{className:"text-xs text-amber-400 mb-2 flex items-center gap-2",children:[(0,zt.jsx)(s1,{size:14})," Key Concerns"]}),(0,zt.jsx)("ul",{className:"space-y-1",children:r.key_concerns.map((e,t)=>(0,zt.jsxs)("li",{className:"text-sm text-slate-400",children:["\u2022 ",e]},t))})]}),(0,zt.jsx)("div",{className:"mt-4 p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,zt.jsx)("p",{className:"text-sm text-white",children:r.recommendation})})]}),(0,zt.jsxs)(cx,{title:"Institutional Advisory",icon:"\ud83d\udccb",accent:"purple",children:[(0,zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:d.map(e=>(0,zt.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all ".concat(s===e.id?"bg-purple-500/20 border border-purple-500/30 text-purple-400":"bg-white/5 border border-white/10 text-slate-400 hover:bg-white/10"),"data-testid":"client-type-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:16}),e.label]},e.id))}),c?(0,zt.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Loading advisory..."}):a?(0,zt.jsx)(QSe,{data:a,clientType:s}):(0,zt.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Select a client type"})]})]})},QSe=e=>{let{data:t,clientType:n}=e;return!t||t.error?(0,zt.jsx)("div",{className:"text-slate-500",children:"Advisory unavailable"}):"hedge_fund"===n&&t.market_regime?(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Market Regime"}),(0,zt.jsx)("p",{className:"text-lg font-medium text-white",children:t.market_regime.current}),(0,zt.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:Object.entries(t.market_regime.regime_indicators||{}).map(e=>{let[t,n]=e;return(0,zt.jsxs)("div",{className:"flex justify-between",children:[(0,zt.jsx)("span",{className:"text-slate-500 capitalize",children:t.replace(/_/g," ")}),(0,zt.jsx)("span",{className:"text-white",children:n})]},t)})})]}),t.alpha_opportunities&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Alpha Opportunities"}),(0,zt.jsx)("div",{className:"space-y-2",children:t.alpha_opportunities.map((e,t)=>(0,zt.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5",children:[(0,zt.jsx)("span",{className:"text-white text-sm",children:e.opportunity}),(0,zt.jsxs)("span",{className:"text-teal-400 text-xs",children:["Sharpe: ",e.expected_sharpe]})]},t))})]})]}):"central_bank"===n&&t.executive_briefing?(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("h4",{className:"text-white font-medium mb-2",children:t.executive_briefing.title}),(0,zt.jsx)("p",{className:"text-sm text-slate-400",children:t.executive_briefing.summary})]}),t.policy_recommendations&&(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Policy Recommendations"}),(0,zt.jsx)("div",{className:"space-y-2",children:t.policy_recommendations.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded bg-white/5 border-l-2 border-teal-500",children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:e.recommendation}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.rationale})]},t))})]})]}):(0,zt.jsx)("div",{className:"space-y-4",children:(0,zt.jsx)("pre",{className:"text-xs text-slate-400 overflow-auto max-h-96 p-4 rounded bg-white/5",children:JSON.stringify(t,null,2)})})},JSe=e=>{let{label:t,value:n,icon:r,color:a}=e;const i={teal:"bg-teal-500/20 text-teal-400 border-teal-500/30",purple:"bg-purple-500/20 text-purple-400 border-purple-500/30",blue:"bg-blue-500/20 text-blue-400 border-blue-500/30",emerald:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",amber:"bg-amber-500/20 text-amber-400 border-amber-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30"};return(0,zt.jsx)("div",{className:"p-4 rounded-xl border ".concat(i[a]||i.teal),children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,zt.jsx)(r,{size:20}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:t}),(0,zt.jsx)("p",{className:"text-xl font-bold",children:n})]})]})})},ZSe=e=>{let{message:t}=e;return(0,zt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-500",children:[(0,zt.jsx)(s1,{size:32,className:"mb-4"}),(0,zt.jsx)("p",{children:t})]})},eje=()=>{var e;const[t,n]=(0,o.useState)("macro"),[r,a]=(0,o.useState)(!0),[i,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)(null),[f,m]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{a(!0);try{const[e,t,n,r,a]=await Promise.all([fetch("".concat(KSe,"/quant/macro/dalio-principles")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/inefficiency/summary")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/portfolio/all-weather")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/ai/status")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/institutional/systemic-risk")).then(e=>e.json()).catch(()=>null)]);s(e),c(t),d(n),p(r),m(a)}catch(e){console.error("Error fetching quant data:",e)}a(!1)})()},[]);return r?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"quant-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"quantitative-center",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Tke,{className:"text-teal-400"}),"Bridgewater Quantitative Research"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Ray Dalio's Principles-based Institutional Analysis"})]}),(0,zt.jsxs)("button",{onClick:async()=>{x(!0),a(!0);try{const[e,t,n,r,a]=await Promise.all([fetch("".concat(KSe,"/quant/macro/dalio-principles")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/inefficiency/summary")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/portfolio/all-weather")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/ai/status")).then(e=>e.json()).catch(()=>null),fetch("".concat(KSe,"/quant/institutional/systemic-risk")).then(e=>e.json()).catch(()=>null)]);s(e),c(t),d(n),p(r),m(a)}catch(e){console.error("Error fetching quant data:",e)}a(!1),x(!1)},disabled:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-teal-500/20 border border-teal-500/30 text-teal-400 hover:bg-teal-500/30 transition-all disabled:opacity-50","data-testid":"refresh-quant-btn",children:[(0,zt.jsx)(awe,{size:16,className:g?"animate-spin":""}),"Refresh Data"]})]}),h&&(0,zt.jsx)("div",{className:"p-3 rounded-lg border ".concat(h.ai_enabled?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"),children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(Nm,{size:20,className:h.ai_enabled?"text-emerald-400":"text-amber-400"}),(0,zt.jsxs)("div",{className:"flex-1",children:[(0,zt.jsxs)("p",{className:"text-sm text-white font-medium",children:["AI Research Analyst: ",(0,zt.jsx)("span",{className:h.ai_enabled?"text-emerald-400":"text-amber-400",children:null===(e=h.status)||void 0===e?void 0:e.toUpperCase()})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["Provider: ",h.provider]})]})]})}),(0,zt.jsxs)(lSe,{value:t,onValueChange:n,className:"w-full",children:[(0,zt.jsxs)(cSe,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(uSe,{value:"macro",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400","data-testid":"tab-macro",children:[(0,zt.jsx)(swe,{size:14,className:"mr-1"})," Macro Engine"]}),(0,zt.jsxs)(uSe,{value:"inefficiency",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400","data-testid":"tab-inefficiency",children:[(0,zt.jsx)(Jbe,{size:14,className:"mr-1"})," Inefficiencies"]}),(0,zt.jsxs)(uSe,{value:"portfolio",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400","data-testid":"tab-portfolio",children:[(0,zt.jsx)(Mm,{size:14,className:"mr-1"})," Portfolio"]}),(0,zt.jsxs)(uSe,{value:"institutional",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-institutional",children:[(0,zt.jsx)(Ike,{size:14,className:"mr-1"})," Institutional"]})]}),(0,zt.jsx)(dSe,{value:"macro",className:"mt-6",children:(0,zt.jsx)(qSe,{data:i})}),(0,zt.jsx)(dSe,{value:"inefficiency",className:"mt-6",children:(0,zt.jsx)(XSe,{data:l})}),(0,zt.jsx)(dSe,{value:"portfolio",className:"mt-6",children:(0,zt.jsx)(YSe,{data:u})}),(0,zt.jsx)(dSe,{value:"institutional",className:"mt-6",children:(0,zt.jsx)($Se,{data:f})})]})]})},tje=km("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),nje=km("vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]),rje=km("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),aje=["className","type"],ije=o.forwardRef((e,t)=>{let{className:n,type:r}=e,a=u(e,aje);return(0,zt.jsx)("input",m({type:r,className:ox("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},a))});ije.displayName="Input";const sje=["class","className"],oje=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,lje=Gm,cje=["className","variant","size","asChild"],uje=(dje="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",hje={variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if(null==(null===hje||void 0===hje?void 0:hje.variants))return lje(dje,null===e||void 0===e?void 0:e.class,null===e||void 0===e?void 0:e.className);const{variants:n,defaultVariants:r}=hje,a=Object.keys(n).map(t=>{const a=null===e||void 0===e?void 0:e[t],i=null===r||void 0===r?void 0:r[t];if(null===a)return null;const s=oje(a)||oje(i);return n[t][s]}),i=e&&Object.entries(e).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),s=null===hje||void 0===hje||null===(t=hje.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:n,className:a}=t,s=u(t,sje);return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(m(m({},r),i)[t]):m(m({},r),i)[t]===n})?[...e,n,a]:e},[]);return lje(dje,a,s,null===e||void 0===e?void 0:e.class,null===e||void 0===e?void 0:e.className)});var dje,hje;const pje=o.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:i=!1}=e,s=u(e,cje);const o=i?bSe:"button";return(0,zt.jsx)(o,m({className:ox(uje({variant:r,size:a,className:n})),ref:t},s))});pje.displayName="Button";const fje="".concat("https://srv1304213.hstgr.cloud/api","/api"),mje=e=>{let{market:t,onSelect:n,showLeague:r}=e;const a=t.yes_price||.5,i=t.no_price||.5,s=(o=t.category,{sports:{icon:tje,color:"text-emerald-400 bg-emerald-500/20"},politics:{icon:nje,color:"text-blue-400 bg-blue-500/20"},crypto:{icon:rje,color:"text-amber-400 bg-amber-500/20"},economics:{icon:Ike,color:"text-purple-400 bg-purple-500/20"}}[o]||{icon:swe,color:"text-slate-400 bg-slate-500/20"});var o;const l=s.icon;return(0,zt.jsxs)(uu.div,{whileHover:{scale:1.02},className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-teal-500/30 cursor-pointer transition-all",onClick:n,"data-testid":"market-".concat(t.market_id),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat(s.color),children:(0,zt.jsx)(l,{size:16})}),r&&t.league&&(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-slate-400",children:t.league})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Volume"}),(0,zt.jsxs)("p",{className:"text-sm font-mono text-white",children:["$",(t.total_volume||0).toLocaleString()]})]})]}),(0,zt.jsx)("h3",{className:"text-white font-medium mb-3 line-clamp-2",children:t.title}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,zt.jsxs)("span",{className:"text-emerald-400",children:["YES ",(100*a).toFixed(0),"\xa2"]}),(0,zt.jsxs)("span",{className:"text-red-400",children:["NO ",(100*i).toFixed(0),"\xa2"]})]}),(0,zt.jsx)("div",{className:"h-2 rounded-full bg-red-500/30 overflow-hidden",children:(0,zt.jsx)("div",{className:"h-full bg-emerald-500 transition-all",style:{width:"".concat(100*a,"%")}})}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 text-center",children:[t.implied_probability," implied probability"]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(ewe,{size:12}),t.time_to_resolution||"TBD"]}),(0,zt.jsx)(Vm,{size:14})]})]})},gje=e=>{let{market:t,tradeSide:n,setTradeSide:r,tradeAmount:a,setTradeAmount:i,userBalance:s,onTrade:o,onClose:l}=e;const c="yes"===n?t.yes_price:t.no_price,u=a?parseFloat(a)/c:0,d=1*u,h=d-parseFloat(a||0);return(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:l,children:(0,zt.jsxs)(uu.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),"data-testid":"trade-modal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("h3",{className:"text-lg font-bold text-white",children:"Trade"}),(0,zt.jsx)("button",{onClick:l,className:"text-slate-500 hover:text-white",children:(0,zt.jsx)(Um,{size:20})})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:t.title}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[(0,zt.jsxs)("button",{onClick:()=>r("yes"),className:"p-3 rounded-lg border transition-all ".concat("yes"===n?"bg-emerald-500/20 border-emerald-500 text-emerald-400":"bg-white/5 border-white/10 text-slate-400"),"data-testid":"trade-yes",children:[(0,zt.jsx)(Qve,{size:16,className:"mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-sm font-medium",children:"YES"}),(0,zt.jsxs)("p",{className:"text-xs",children:[(100*t.yes_price).toFixed(0),"\xa2"]})]}),(0,zt.jsxs)("button",{onClick:()=>r("no"),className:"p-3 rounded-lg border transition-all ".concat("no"===n?"bg-red-500/20 border-red-500 text-red-400":"bg-white/5 border-white/10 text-slate-400"),"data-testid":"trade-no",children:[(0,zt.jsx)(Um,{size:16,className:"mx-auto mb-1"}),(0,zt.jsx)("p",{className:"text-sm font-medium",children:"NO"}),(0,zt.jsxs)("p",{className:"text-xs",children:[(100*t.no_price).toFixed(0),"\xa2"]})]})]}),(0,zt.jsxs)("div",{className:"mb-4",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Amount ($)"}),(0,zt.jsx)(ije,{type:"number",value:a,onChange:e=>i(e.target.value),placeholder:"Enter amount",className:"bg-white/5 border-white/10 text-white","data-testid":"trade-amount"}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[(0,zt.jsxs)("span",{children:["Balance: $",s.toFixed(2)]}),(0,zt.jsx)("button",{onClick:()=>i(s.toString()),className:"text-teal-400 hover:underline",children:"Max"})]})]}),a&&parseFloat(a)>0&&(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 mb-4 space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Shares"}),(0,zt.jsx)("span",{className:"text-white",children:u.toFixed(2)})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Max Payout"}),(0,zt.jsxs)("span",{className:"text-white",children:["$",d.toFixed(2)]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Potential Profit"}),(0,zt.jsxs)("span",{className:"text-emerald-400",children:["+$",h.toFixed(2)]})]})]}),(0,zt.jsxs)(pje,{onClick:o,disabled:!a||parseFloat(a)<=0||parseFloat(a)>s,className:"w-full ".concat("yes"===n?"bg-emerald-500 hover:bg-emerald-600":"bg-red-500 hover:bg-red-600"),"data-testid":"confirm-trade",children:["Buy ",n.toUpperCase()," @ ",(100*c).toFixed(0),"\xa2"]})]})})},xje=e=>{let{positions:t}=e;return 0===t.length?(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-500",children:[(0,zt.jsx)(jm,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No positions yet. Start trading to see your portfolio here."})]}):(0,zt.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>{var n,r,a,i;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("h4",{className:"text-white font-medium mb-2",children:e.market_title}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"YES Shares"}),(0,zt.jsx)("p",{className:"text-emerald-400",children:(null===(n=e.yes_shares)||void 0===n?void 0:n.toFixed(2))||0})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"NO Shares"}),(0,zt.jsx)("p",{className:"text-red-400",children:(null===(r=e.no_shares)||void 0===r?void 0:r.toFixed(2))||0})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Total Value"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",(null===(a=e.total_value)||void 0===a?void 0:a.toFixed(2))||0]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Unrealized P&L"}),(0,zt.jsxs)("p",{className:e.unrealized_pnl>=0?"text-emerald-400":"text-red-400",children:[e.unrealized_pnl>=0?"+":"","$",(null===(i=e.unrealized_pnl)||void 0===i?void 0:i.toFixed(2))||0]})]})]})]},t)})})},vje=e=>{let{leaderboard:t}=e;return(0,zt.jsx)(cx,{title:"Top Predictors",icon:"\ud83c\udfc6",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-2",children:t.slice(0,20).map((e,t)=>{return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(t<3?"bg-amber-500/10 border border-amber-500/20":"bg-white/5"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-xl w-8",children:(n=e.rank,1===n?"\ud83e\udd47":2===n?"\ud83e\udd48":3===n?"\ud83e\udd49":n)}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white font-medium",children:e.user_id}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[e.positions_count," positions"]})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"font-bold ".concat(e.total_pnl>=0?"text-emerald-400":"text-red-400"),children:[e.total_pnl>=0?"+":"","$",e.total_pnl.toFixed(2)]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["Win rate: ",(100*e.win_rate).toFixed(0),"%"]})]})]},t);var n})})})},yje=()=>{const[e,t]=(0,o.useState)("trending"),[n,r]=(0,o.useState)([]),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)([]),[m,g]=(0,o.useState)(1e4),[x,v]=(0,o.useState)(!0),[y,b]=(0,o.useState)(""),[w,k]=(0,o.useState)([]),[N,S]=(0,o.useState)(null),[j,C]=(0,o.useState)(""),[E,T]=(0,o.useState)("yes"),I="demo_user";(0,o.useEffect)(()=>{(async()=>{v(!0);try{const[e,t,n,a,s,o,c]=await Promise.all([fetch("".concat(fje,"/predictions/trending")).then(e=>e.json()),fetch("".concat(fje,"/predictions/sports")).then(e=>e.json()),fetch("".concat(fje,"/predictions/politics")).then(e=>e.json()),fetch("".concat(fje,"/predictions/crypto")).then(e=>e.json()),fetch("".concat(fje,"/predictions/leaderboard")).then(e=>e.json()),fetch("".concat(fje,"/predictions/positions/").concat(I)).then(e=>e.json()),fetch("".concat(fje,"/predictions/balance/").concat(I)).then(e=>e.json())]);r(e||[]),i(t||[]),l(n||[]),u(a||[]),h(s||[]),f(o||[]),g((null===c||void 0===c?void 0:c.balance)||1e4)}catch(e){console.error("Error fetching prediction data:",e)}v(!1)})()},[]);const A=async()=>{if(y.trim())try{const e=await fetch("".concat(fje,"/predictions/search?q=").concat(encodeURIComponent(y))),t=await e.json();k(t||[])}catch(Yje){console.error(Yje)}};return x?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"prediction-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"prediction-hub",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Jbe,{className:"text-teal-400"}),"Prediction Markets"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Sports \u2022 Politics \u2022 Crypto \u2022 Events"})]}),(0,zt.jsx)("div",{className:"flex items-center gap-4",children:(0,zt.jsxs)("div",{className:"px-4 py-2 rounded-lg bg-teal-500/20 border border-teal-500/30",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Balance"}),(0,zt.jsxs)("p",{className:"text-lg font-bold text-teal-400",children:["$",m.toLocaleString()]})]})})]}),(0,zt.jsxs)("div",{className:"flex gap-2",children:[(0,zt.jsx)(ije,{value:y,onChange:e=>b(e.target.value),placeholder:"Search markets (e.g., 'Bitcoin', 'Super Bowl', 'Fed')",className:"bg-white/5 border-white/10 text-white",onKeyPress:e=>"Enter"===e.key&&A(),"data-testid":"search-input"}),(0,zt.jsx)(pje,{onClick:A,variant:"outline",className:"border-teal-500/30 text-teal-400",children:(0,zt.jsx)(o1,{size:18})})]}),w.length>0&&(0,zt.jsx)(cx,{title:"Search Results",icon:"\ud83d\udd0d",accent:"blue",children:(0,zt.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,zt.jsx)(mje,{market:e,onSelect:()=>S(e)},e.market_id))})}),(0,zt.jsxs)(lSe,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(cSe,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(uSe,{value:"trending",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400","data-testid":"tab-trending",children:[(0,zt.jsx)(Om,{size:14,className:"mr-1"})," Trending"]}),(0,zt.jsxs)(uSe,{value:"sports",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400","data-testid":"tab-sports",children:[(0,zt.jsx)(tje,{size:14,className:"mr-1"})," Sports"]}),(0,zt.jsxs)(uSe,{value:"politics",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400","data-testid":"tab-politics",children:[(0,zt.jsx)(nje,{size:14,className:"mr-1"})," Politics"]}),(0,zt.jsxs)(uSe,{value:"crypto",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-crypto",children:[(0,zt.jsx)(rje,{size:14,className:"mr-1"})," Crypto"]}),(0,zt.jsxs)(uSe,{value:"positions",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400","data-testid":"tab-positions",children:[(0,zt.jsx)(jm,{size:14,className:"mr-1"})," My Positions"]}),(0,zt.jsxs)(uSe,{value:"leaderboard",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-leaderboard",children:[(0,zt.jsx)(zm,{size:14,className:"mr-1"})," Leaderboard"]})]}),(0,zt.jsx)(dSe,{value:"trending",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(e=>(0,zt.jsx)(mje,{market:e,onSelect:()=>S(e)},e.market_id))})}),(0,zt.jsx)(dSe,{value:"sports",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(e=>(0,zt.jsx)(mje,{market:e,onSelect:()=>S(e),showLeague:!0},e.market_id))})}),(0,zt.jsx)(dSe,{value:"politics",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(e=>(0,zt.jsx)(mje,{market:e,onSelect:()=>S(e)},e.market_id))})}),(0,zt.jsx)(dSe,{value:"crypto",className:"mt-6",children:(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(e=>(0,zt.jsx)(mje,{market:e,onSelect:()=>S(e)},e.market_id))})}),(0,zt.jsx)(dSe,{value:"positions",className:"mt-6",children:(0,zt.jsx)(xje,{positions:p})}),(0,zt.jsx)(dSe,{value:"leaderboard",className:"mt-6",children:(0,zt.jsx)(vje,{leaderboard:d})})]}),(0,zt.jsx)(rn,{children:N&&(0,zt.jsx)(gje,{market:N,tradeSide:E,setTradeSide:T,tradeAmount:j,setTradeAmount:C,userBalance:m,onTrade:async()=>{if(N&&j)try{const e=await fetch("".concat(fje,"/predictions/buy"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:I,market_id:N.market_id,side:E,amount:parseFloat(j)})}),t=await e.json();t.success&&(g(t.new_balance),C(""),S(null),(async()=>{v(!0);try{const[e,t,n,a,s,o,c]=await Promise.all([fetch("".concat(fje,"/predictions/trending")).then(e=>e.json()),fetch("".concat(fje,"/predictions/sports")).then(e=>e.json()),fetch("".concat(fje,"/predictions/politics")).then(e=>e.json()),fetch("".concat(fje,"/predictions/crypto")).then(e=>e.json()),fetch("".concat(fje,"/predictions/leaderboard")).then(e=>e.json()),fetch("".concat(fje,"/predictions/positions/").concat(I)).then(e=>e.json()),fetch("".concat(fje,"/predictions/balance/").concat(I)).then(e=>e.json())]);r(e||[]),i(t||[]),l(n||[]),u(a||[]),h(s||[]),f(o||[]),g((null===c||void 0===c?void 0:c.balance)||1e4)}catch(e){console.error("Error fetching prediction data:",e)}v(!1)})())}catch(Yje){console.error(Yje)}},onClose:()=>S(null)})})]})};var bje;const wje="".concat("https://srv1304213.hstgr.cloud/api","/api"),kje=null===(bje="https://srv1304213.hstgr.cloud/api")?void 0:bje.replace("https://","wss://").replace("http://","ws://"),Nje=e=>{let{label:t,value:n,color:r="white"}=e;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:t}),(0,zt.jsx)("p",{className:"text-lg font-bold ".concat({white:"text-white",emerald:"text-emerald-400",red:"text-red-400",amber:"text-amber-400"}[r]),children:n})]})},Sje=e=>{var t,n,r,a,i,s,o,l,c,u,d,h,p,f,m,g,x,v;let{trader:y,onCopy:b,getVerificationBadge:w,getRiskBadge:k}=e;const N=w(y.verification),S=k(null===(t=y.strategy)||void 0===t?void 0:t.risk_level),j=S.icon;return(0,zt.jsxs)(uu.div,{whileHover:{scale:1.01},className:"p-5 rounded-xl bg-white/5 border border-white/10 hover:border-teal-500/30 transition-all","data-testid":"trader-".concat(y.trader_id),children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,zt.jsx)("h3",{className:"text-white font-semibold",children:y.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded border ".concat(N.color),children:N.label})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(S.color," flex items-center gap-1"),children:[(0,zt.jsx)(j,{size:10}),null===(n=y.strategy)||void 0===n||null===(r=n.risk_level)||void 0===r?void 0:r.replace("_"," ")]}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:null===(a=y.strategy)||void 0===a||null===(i=a.type)||void 0===i?void 0:i.replace("_"," ")})]})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Followers"}),(0,zt.jsx)("p",{className:"text-white font-semibold",children:null===(s=y.social)||void 0===s||null===(o=s.followers_count)||void 0===o?void 0:o.toLocaleString()})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Return"}),(0,zt.jsxs)("p",{className:"text-sm font-bold ".concat((null===(l=y.performance)||void 0===l?void 0:l.total_return)>=0?"text-emerald-400":"text-red-400"),children:[(null===(c=y.performance)||void 0===c?void 0:c.total_return)>=0?"+":"",null===(u=y.performance)||void 0===u?void 0:u.total_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Monthly"}),(0,zt.jsxs)("p",{className:"text-sm font-bold ".concat((null===(d=y.performance)||void 0===d?void 0:d.monthly_return)>=0?"text-emerald-400":"text-red-400"),children:[(null===(h=y.performance)||void 0===h?void 0:h.monthly_return)>=0?"+":"",null===(p=y.performance)||void 0===p?void 0:p.monthly_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-sm font-bold text-white",children:[null===(f=y.performance)||void 0===f?void 0:f.win_rate,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Sharpe"}),(0,zt.jsx)("p",{className:"text-sm font-bold text-blue-400",children:null===(m=y.performance)||void 0===m?void 0:m.sharpe_ratio})]})]}),(0,zt.jsx)("p",{className:"text-xs text-slate-400 mb-4 line-clamp-2",children:null===(g=y.strategy)||void 0===g?void 0:g.description}),(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"text-xs text-slate-500",children:["Min: $",null===(x=y.fees)||void 0===x?void 0:x.min_investment," \u2022 ",null===(v=y.fees)||void 0===v?void 0:v.performance_fee,"% perf fee"]}),(0,zt.jsxs)(pje,{onClick:b,size:"sm",className:"bg-teal-500 hover:bg-teal-600",children:[(0,zt.jsx)(Jve,{size:14,className:"mr-1"})," Copy"]})]})]})},jje=e=>{var t,n,r,a,i;let{trader:s,rank:o,onCopy:l,getVerificationBadge:c}=e;const u=c(s.verification);return(0,zt.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl ".concat(o<=3?"bg-amber-500/10 border border-amber-500/20":"bg-white/5 border border-white/10"),children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)("span",{className:"text-2xl w-10 text-center",children:(e=>1===e?"\ud83e\udd47":2===e?"\ud83e\udd48":3===e?"\ud83e\udd49":e)(o)}),(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:s.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded border ".concat(u.color),children:u.label})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[null===(t=s.social)||void 0===t||null===(n=t.followers_count)||void 0===n?void 0:n.toLocaleString()," followers \u2022 $",((null===(r=s.social)||void 0===r?void 0:r.total_aum)/1e6).toFixed(1),"M AUM"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-6",children:[(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Total Return"}),(0,zt.jsxs)("p",{className:"text-lg font-bold ".concat((null===(a=s.performance)||void 0===a?void 0:a.total_return)>=0?"text-emerald-400":"text-red-400"),children:["+",null===(i=s.performance)||void 0===i?void 0:i.total_return,"%"]})]}),(0,zt.jsx)(pje,{onClick:l,size:"sm",variant:"outline",className:"border-teal-500/30 text-teal-400",children:"Copy"})]})]})},Cje=e=>{var t,n,r,a,i,s,o,l,c;let{copy:u,onStop:d}=e;const h=(null===(t=u.performance)||void 0===t?void 0:t.total_pnl)>=0?"text-emerald-400":"text-red-400";return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:u.trader_name}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:["Started: ",new Date(u.created_at).toLocaleDateString()]})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[u.paused&&(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-400",children:"Paused"}),u.is_active?(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-400",children:"Active"}):(0,zt.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-slate-500/20 text-slate-400",children:"Stopped"})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Allocated"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(n=u.allocated_amount)||void 0===n?void 0:n.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Current Value"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(r=u.performance)||void 0===r||null===(a=r.current_value)||void 0===a?void 0:a.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"P&L"}),(0,zt.jsxs)("p",{className:h,children:[(null===(i=u.performance)||void 0===i?void 0:i.total_pnl)>=0?"+":"","$",null===(s=u.performance)||void 0===s||null===(o=s.total_pnl)||void 0===o?void 0:o.toFixed(2)]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Return"}),(0,zt.jsxs)("p",{className:h,children:[null===(l=u.performance)||void 0===l?void 0:l.pnl_pct,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Trades Copied"}),(0,zt.jsx)("p",{className:"text-white",children:null===(c=u.performance)||void 0===c?void 0:c.trades_copied})]})]}),u.is_active&&(0,zt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,zt.jsxs)(pje,{variant:"outline",size:"sm",className:"border-white/10",children:[(0,zt.jsx)(Xve,{size:14,className:"mr-1"})," Settings"]}),(0,zt.jsxs)(pje,{variant:"outline",size:"sm",className:"border-red-500/30 text-red-400",onClick:d,children:[(0,zt.jsx)(Um,{size:14,className:"mr-1"})," Stop"]})]})]})},Eje=e=>{var t,n,r,a,i,s,o;let{trader:l,copyAmount:c,setCopyAmount:u,onCopy:d,onClose:h,getVerificationBadge:p,getRiskBadge:f}=e;const m=p(l.verification),g=(null===(t=l.fees)||void 0===t?void 0:t.min_investment)||100;return(0,zt.jsx)(uu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:h,children:(0,zt.jsxs)(uu.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),"data-testid":"copy-modal",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsx)("h3",{className:"text-lg font-bold text-white",children:"Start Copying"}),(0,zt.jsx)("button",{onClick:h,className:"text-slate-500 hover:text-white",children:(0,zt.jsx)(Um,{size:20})})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 mb-4",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:l.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded border ".concat(m.color),children:m.label})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"Return"}),(0,zt.jsxs)("p",{className:"text-emerald-400",children:["+",null===(n=l.performance)||void 0===n?void 0:n.total_return,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"Win Rate"}),(0,zt.jsxs)("p",{className:"text-white",children:[null===(r=l.performance)||void 0===r?void 0:r.win_rate,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"Sharpe"}),(0,zt.jsx)("p",{className:"text-blue-400",children:null===(a=l.performance)||void 0===a?void 0:a.sharpe_ratio})]})]})]}),(0,zt.jsxs)("div",{className:"mb-4",children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 mb-1 block",children:"Investment Amount ($)"}),(0,zt.jsx)(ije,{type:"number",value:c,onChange:e=>u(e.target.value),placeholder:"Min: $".concat(g),className:"bg-white/5 border-white/10 text-white","data-testid":"copy-amount-input"})]}),(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 mb-4",children:[(0,zt.jsx)("p",{className:"text-xs text-amber-400 mb-1",children:"Fee Structure"}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Performance Fee"}),(0,zt.jsxs)("span",{className:"text-white",children:[null===(i=l.fees)||void 0===i?void 0:i.performance_fee,"% of profits"]})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Management Fee"}),(0,zt.jsxs)("span",{className:"text-white",children:[null===(s=l.fees)||void 0===s?void 0:s.management_fee,"% annual"]})]})]}),(0,zt.jsxs)(pje,{onClick:d,disabled:!c||parseFloat(c)<g,className:"w-full bg-teal-500 hover:bg-teal-600","data-testid":"confirm-copy-btn",children:[(0,zt.jsx)(Jve,{size:16,className:"mr-2"}),"Start Copying ",null===(o=l.name)||void 0===o?void 0:o.split(" ")[0]]})]})})},Tje=()=>{const[e,t]=(0,o.useState)("discover"),[n,r]=(0,o.useState)([]),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)([]),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0),[p,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(""),[x,v]=(0,o.useState)("total_return"),[y,b]=(0,o.useState)(!1),[w,k]=(0,o.useState)([]),[N,S]=(0,o.useState)([]),j=(0,o.useRef)(null),C="demo_user";(0,o.useEffect)(()=>{const e=()=>{if(!kje)return;const t=new WebSocket("".concat(kje,"/ws/copy-trading/").concat(C));t.onopen=()=>{console.log("Copy trading WebSocket connected"),b(!0)},t.onmessage=e=>{try{const t=JSON.parse(e.data);"trade_copied"===t.type?(k(e=>[t,...e.slice(0,49)]),S(e=>[t.your_trade,...e.slice(0,99)]),"Notification"in window&&"granted"===Notification.permission&&new Notification("Trade Copied!",{body:t.message,icon:"/logo192.png"})):"master_activity"===t.type&&k(e=>[t,...e.slice(0,49)])}catch(Yje){console.error("WS message parse error:",Yje)}},t.onclose=()=>{console.log("Copy trading WebSocket disconnected"),b(!1),setTimeout(e,5e3)},t.onerror=e=>{console.error("WebSocket error:",e),b(!1)},j.current=t};return e(),()=>{j.current&&j.current.close()}},[]);const E=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j.current&&j.current.readyState===WebSocket.OPEN&&j.current.send(JSON.stringify({action:"subscribe",trader_id:e,settings:t}))},[]),T=(0,o.useCallback)(e=>{j.current&&j.current.readyState===WebSocket.OPEN&&j.current.send(JSON.stringify({action:"unsubscribe",trader_id:e}))},[]);(0,o.useEffect)(()=>{(async()=>{h(!0);try{const[e,t,n,a]=await Promise.all([fetch("".concat(wje,"/copy/traders?sort_by=").concat(x)).then(e=>e.json()),fetch("".concat(wje,"/copy/traders/top")).then(e=>e.json()),fetch("".concat(wje,"/copy/relationships/").concat(C)).then(e=>e.json()),fetch("".concat(wje,"/copy/portfolio/").concat(C)).then(e=>e.json())]);r(e||[]),i(t||[]),l(n||[]),u(a)}catch(e){console.error("Error fetching copy trading data:",e)}h(!1)})()},[x]);const I=e=>{const t={institutional:{color:"bg-purple-500/20 text-purple-400 border-purple-500/30",label:"Institutional"},professional:{color:"bg-blue-500/20 text-blue-400 border-blue-500/30",label:"Professional"},verified:{color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",label:"Verified"},unverified:{color:"bg-slate-500/20 text-slate-400 border-slate-500/30",label:"Unverified"}};return t[e]||t.unverified},A=e=>{const t={conservative:{color:"bg-emerald-500/20 text-emerald-400",icon:Im},moderate:{color:"bg-amber-500/20 text-amber-400",icon:jm},aggressive:{color:"bg-orange-500/20 text-orange-400",icon:Om},ultra_aggressive:{color:"bg-red-500/20 text-red-400",icon:s1}};return t[e]||t.moderate};return d?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"copy-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"copy-trading-hub",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Jve,{className:"text-teal-400"}),"Copy Trading"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Mirror Institutional Strategies \u2022 One-Click Follow"})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg ".concat(y?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:[y?(0,zt.jsx)(bx,{size:14}):(0,zt.jsx)(wx,{size:14}),(0,zt.jsx)("span",{className:"text-xs font-mono",children:y?"Live Connected":"Reconnecting..."}),y&&w.length>0&&(0,zt.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-emerald-500/30 text-xs animate-pulse",children:w.length})]})]}),c&&c.total_invested>0&&(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,zt.jsx)(Nje,{label:"Total Invested",value:"$".concat(c.total_invested.toLocaleString())}),(0,zt.jsx)(Nje,{label:"Current Value",value:"$".concat(c.current_value.toLocaleString())}),(0,zt.jsx)(Nje,{label:"Total P&L",value:"".concat(c.total_pnl>=0?"+":"","$").concat(c.total_pnl.toLocaleString()),color:c.total_pnl>=0?"emerald":"red"}),(0,zt.jsx)(Nje,{label:"Net Return",value:"".concat(c.total_pnl_pct,"%"),color:c.total_pnl_pct>=0?"emerald":"red"}),(0,zt.jsx)(Nje,{label:"Active Copies",value:c.active_copies})]}),(0,zt.jsxs)(lSe,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(cSe,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(uSe,{value:"discover",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400","data-testid":"tab-discover",children:[(0,zt.jsx)(Tm,{size:14,className:"mr-1"})," Discover Traders"]}),(0,zt.jsxs)(uSe,{value:"top",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400","data-testid":"tab-top",children:[(0,zt.jsx)(Cm,{size:14,className:"mr-1"})," Top Performers"]}),(0,zt.jsxs)(uSe,{value:"live-feed",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400","data-testid":"tab-live",children:[(0,zt.jsx)(Em,{size:14,className:"mr-1"})," Live Feed",w.length>0&&(0,zt.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-emerald-500/30 text-xs",children:w.length})]}),(0,zt.jsxs)(uSe,{value:"my-copies",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400","data-testid":"tab-copies",children:[(0,zt.jsx)(Jve,{size:14,className:"mr-1"})," My Copies (",s.length,")"]})]}),(0,zt.jsxs)(dSe,{value:"discover",className:"mt-6",children:[(0,zt.jsx)("div",{className:"flex gap-2 mb-4 flex-wrap",children:["total_return","monthly_return","sharpe","win_rate","followers"].map(e=>(0,zt.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded-lg text-xs transition-all ".concat(x===e?"bg-teal-500/20 border border-teal-500/30 text-teal-400":"bg-white/5 border border-white/10 text-slate-400 hover:bg-white/10"),children:e.replace("_"," ").toUpperCase()},e))}),(0,zt.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:n.map(e=>(0,zt.jsx)(Sje,{trader:e,onCopy:()=>f(e),getVerificationBadge:I,getRiskBadge:A},e.trader_id))})]}),(0,zt.jsxs)(dSe,{value:"live-feed",className:"mt-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(cx,{title:"Live Trade Stream",icon:"\ud83d\udce1",accent:"emerald",children:(0,zt.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===w.length?(0,zt.jsx)("p",{className:"text-slate-500 text-sm text-center py-8",children:y?"Waiting for trades from master traders...":"Connecting to live stream..."}):w.map((e,t)=>{var n,r,a,i,s,o,l,c,u,d;return(0,zt.jsxs)(uu.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 rounded-lg border ".concat("trade_copied"===e.type?"bg-emerald-500/10 border-emerald-500/30":"bg-blue-500/10 border-blue-500/30"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsx)("span",{className:"text-white text-sm font-medium",children:(null===(r=e.event)||void 0===r?void 0:r.master_name)||e.master_name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("buy"===(null===(a=e.event)||void 0===a?void 0:a.action)||"buy"===(null===(i=e.your_trade)||void 0===i?void 0:i.action)?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:((null===(s=e.event)||void 0===s?void 0:s.action)||(null===(o=e.your_trade)||void 0===o?void 0:o.action)||"").toUpperCase()})]}),(0,zt.jsx)("p",{className:"text-sm text-slate-300",children:e.message||"".concat(null===(l=e.event)||void 0===l?void 0:l.action," ").concat(null===(c=e.event)||void 0===c?void 0:c.quantity," ").concat(null===(u=e.event)||void 0===u?void 0:u.symbol)}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:new Date((null===(d=e.event)||void 0===d?void 0:d.timestamp)||e.timestamp).toLocaleTimeString()})]},(null===(n=e.event)||void 0===n?void 0:n.event_id)||t)})})}),(0,zt.jsx)(cx,{title:"Your Copied Trades",icon:"\ud83d\udccb",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===N.length?(0,zt.jsx)("p",{className:"text-slate-500 text-sm text-center py-8",children:"Your copied trades will appear here in real-time"}):N.map((e,t)=>{var n,r,a;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsx)("span",{className:"text-white text-sm",children:e.symbol}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("buy"===e.action?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:null===(n=e.action)||void 0===n?void 0:n.toUpperCase()})]}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs text-slate-400",children:[(0,zt.jsxs)("span",{children:["Qty: ",null===(r=e.copied_quantity)||void 0===r?void 0:r.toFixed(4)]}),(0,zt.jsxs)("span",{children:["@ $",null===(a=e.price)||void 0===a?void 0:a.toLocaleString()]})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Copy Ratio: ",e.copy_ratio,"x \u2022 ",e.status]})]},e.trade_id||t)})})})]}),(0,zt.jsx)("div",{className:"mt-4 flex justify-center",children:(0,zt.jsxs)(pje,{onClick:async()=>{try{await fetch("".concat(wje,"/copy-trading/ws/simulate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({master_trader_id:"MTR-001",master_name:"Bridgewater Alpha Fund",action:Math.random()>.5?"buy":"sell",symbol:["BTC","ETH","SOL"][Math.floor(3*Math.random())],quantity:(2*Math.random()).toFixed(4),price:45e3+5e3*Math.random()})})}catch(Yje){console.error(Yje)}},variant:"outline",className:"border-amber-500/30 text-amber-400","data-testid":"simulate-trade-btn",children:[(0,zt.jsx)(Om,{size:14,className:"mr-2"})," Simulate Master Trade (Demo)"]})})]}),(0,zt.jsx)(dSe,{value:"top",className:"mt-6",children:(0,zt.jsx)("div",{className:"space-y-4",children:a.map((e,t)=>(0,zt.jsx)(jje,{trader:e,rank:t+1,onCopy:()=>f(e),getVerificationBadge:I},e.trader_id))})}),(0,zt.jsx)(dSe,{value:"my-copies",className:"mt-6",children:0===s.length?(0,zt.jsxs)("div",{className:"text-center py-12 text-slate-500",children:[(0,zt.jsx)(Jve,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,zt.jsx)("p",{children:"No active copies. Start copying a trader to see your positions here."})]}):(0,zt.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,zt.jsx)(Cje,{copy:e,onStop:()=>(async(e,t)=>{try{await fetch("".concat(wje,"/copy/stop"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({follower_id:C,relationship_id:e})}),t&&T(t);const n=await fetch("".concat(wje,"/copy/relationships/").concat(C)).then(e=>e.json());l(n||[])}catch(Yje){console.error(Yje)}})(e.relationship_id)},e.relationship_id))})})]}),(0,zt.jsx)(rn,{children:p&&(0,zt.jsx)(Eje,{trader:p,copyAmount:m,setCopyAmount:g,onCopy:async()=>{if(p&&m)try{const e=await fetch("".concat(wje,"/copy/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({follower_id:C,master_trader_id:p.trader_id,amount:parseFloat(m)})});if((await e.json()).success){E(p.trader_id,{copy_ratio:1,max_trade_size:.1*parseFloat(m)}),g(""),f(null);const[e,t]=await Promise.all([fetch("".concat(wje,"/copy/relationships/").concat(C)).then(e=>e.json()),fetch("".concat(wje,"/copy/portfolio/").concat(C)).then(e=>e.json())]);l(e||[]),u(t)}}catch(Yje){console.error(Yje)}},onClose:()=>f(null),getVerificationBadge:I,getRiskBadge:A})})]})},Ije=km("ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]),Aje=km("factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),Oje=km("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),_je="".concat("https://srv1304213.hstgr.cloud/api","/api"),Rje=e=>{var t,n,r,a,i,s,o,l,c,u,d,h;let{data:p,getRiskColor:f,getRiskBg:m}=e;return p?(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(Lje,{icon:Aje,label:"Suppliers Monitored",value:null===(t=p.overview)||void 0===t?void 0:t.total_suppliers_monitored,color:"amber"}),(0,zt.jsx)(Lje,{icon:Ije,label:"Ports Tracked",value:null===(n=p.overview)||void 0===n?void 0:n.total_ports_tracked,color:"blue"}),(0,zt.jsx)(Lje,{icon:jm,label:"Active Markets",value:null===(r=p.overview)||void 0===r?void 0:r.active_markets,color:"purple"}),(0,zt.jsx)(Lje,{icon:Wm,label:"SCF Instruments",value:null===(a=p.overview)||void 0===a?void 0:a.scf_instruments,color:"emerald"})]}),(0,zt.jsx)(cx,{title:"Global Risk Assessment",icon:"\ud83c\udf0d",accent:"amber",children:(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Port Congestion"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-amber-400",children:null===(i=p.risk_summary)||void 0===i?void 0:i.avg_port_congestion})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"High Risk Suppliers"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-red-400",children:null===(s=p.risk_summary)||void 0===s?void 0:s.high_risk_suppliers})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Active Alerts"}),(0,zt.jsx)("p",{className:"text-xl font-bold text-orange-400",children:null===(o=p.risk_summary)||void 0===o?void 0:o.active_alerts})]}),(0,zt.jsxs)("div",{className:"p-4 rounded-lg border ".concat(m(null===(l=p.risk_summary)||void 0===l?void 0:l.global_risk_level)),children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Global Risk"}),(0,zt.jsx)("p",{className:"text-xl font-bold ".concat(f(null===(c=p.risk_summary)||void 0===c?void 0:c.global_risk_level)),children:null===(u=p.risk_summary)||void 0===u?void 0:u.global_risk_level})]})]})}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(cx,{title:"High Impact Events",icon:"\u26a0\ufe0f",accent:"red",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(d=p.top_risks)||void 0===d?void 0:d.slice(0,4).map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border-l-2 border-red-500",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["Impact: ",e.impact_score]}),(0,zt.jsx)("span",{className:"text-xs text-amber-400",children:e.implied_probability})]}),(0,zt.jsx)("p",{className:"text-sm text-white",children:e.title})]},t))})}),(0,zt.jsx)(cx,{title:"Congestion Hotspots",icon:"\ud83d\udea2",accent:"blue",children:(0,zt.jsx)("div",{className:"space-y-3",children:null===(h=p.congested_ports)||void 0===h?void 0:h.map((e,t)=>{var n,r,a,i,s,o;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsx)("span",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("Critical"===(null===(n=e.congestion)||void 0===n?void 0:n.status)?"bg-red-500/20 text-red-400":"High"===(null===(r=e.congestion)||void 0===r?void 0:r.status)?"bg-orange-500/20 text-orange-400":"bg-amber-500/20 text-amber-400"),children:null===(a=e.congestion)||void 0===a?void 0:a.status})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[(0,zt.jsxs)("span",{children:["Queue: ",null===(i=e.congestion)||void 0===i?void 0:i.vessel_queue," vessels"]}),(0,zt.jsxs)("span",{children:["Wait: ",null===(s=e.congestion)||void 0===s?void 0:s.avg_wait_days," days"]})]}),(0,zt.jsx)(GSe,{value:100*(null===(o=e.congestion)||void 0===o?void 0:o.level),className:"h-1.5 mt-2 bg-white/10"})]},t)})})})]})]}):null},Pje=e=>{let{markets:t}=e;return(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>{var t,n;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-purple-500/30 transition-all",children:[(0,zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("geopolitical"===e.event_type?"bg-red-500/20 text-red-400":"port_congestion"===e.event_type?"bg-blue-500/20 text-blue-400":"tariff_change"===e.event_type?"bg-purple-500/20 text-purple-400":"bg-amber-500/20 text-amber-400"),children:null===(t=e.event_type)||void 0===t?void 0:t.replace("_"," ")}),(0,zt.jsxs)("span",{className:"text-xs text-slate-500",children:["Impact: ",e.impact_score]})]}),(0,zt.jsx)("h4",{className:"text-white font-medium mb-2 line-clamp-2",children:e.title}),(0,zt.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,zt.jsxs)("span",{className:"text-emerald-400",children:["YES ",(100*e.yes_price).toFixed(0),"\xa2"]}),(0,zt.jsxs)("span",{className:"text-red-400",children:["NO ",(100*e.no_price).toFixed(0),"\xa2"]})]}),(0,zt.jsx)(GSe,{value:100*e.yes_price,className:"h-2 bg-red-500/30"}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs text-slate-500",children:[(0,zt.jsxs)("span",{children:["Vol: $",null===(n=e.volume)||void 0===n?void 0:n.toLocaleString()]}),(0,zt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,zt.jsx)(ewe,{size:10})," ",e.time_to_resolution]})]})]},e.market_id)})})},Mje=e=>{let{suppliers:t,getRiskColor:n}=e;return(0,zt.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t,n,r,a,i,s,o,l,c,u;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,zt.jsxs)("p",{className:"text-xs text-slate-500",children:[null===(t=e.region)||void 0===t?void 0:t.replace("_"," ")," \u2022 ",null===(n=e.commodities)||void 0===n?void 0:n.join(", ")]})]}),(0,zt.jsx)("div",{className:"px-3 py-1 rounded-lg ".concat("low"===e.risk_level?"bg-emerald-500/20 text-emerald-400":"moderate"===e.risk_level?"bg-amber-500/20 text-amber-400":"elevated"===e.risk_level?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"),children:(0,zt.jsxs)("p",{className:"text-xs",children:["Risk: ",e.risk_score]})})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Financial Health"}),(0,zt.jsx)(GSe,{value:null===(r=e.metrics)||void 0===r?void 0:r.financial_health,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(a=e.metrics)||void 0===a?void 0:a.financial_health,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Delivery"}),(0,zt.jsx)(GSe,{value:null===(i=e.metrics)||void 0===i?void 0:i.delivery_reliability,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(s=e.metrics)||void 0===s?void 0:s.delivery_reliability,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Quality"}),(0,zt.jsx)(GSe,{value:null===(o=e.metrics)||void 0===o?void 0:o.quality_score,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(l=e.metrics)||void 0===l?void 0:l.quality_score,"%"]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"ESG Score"}),(0,zt.jsx)(GSe,{value:null===(c=e.metrics)||void 0===c?void 0:c.esg_score,className:"h-1.5 mt-1 bg-white/10"}),(0,zt.jsxs)("p",{className:"text-xs text-right text-white mt-0.5",children:[null===(u=e.metrics)||void 0===u?void 0:u.esg_score,"%"]})]})]})]},e.supplier_id)})})},Dje=e=>{let{ports:t}=e;return(0,zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{var t,n,r,a,i,s,o;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,zt.jsx)(Ije,{size:20,className:"text-blue-400"}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.country})]})]}),(0,zt.jsxs)("div",{className:"space-y-2",children:[(0,zt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,zt.jsx)("span",{className:"text-slate-400",children:"Congestion"}),(0,zt.jsx)("span",{className:"Critical"===(null===(t=e.congestion)||void 0===t?void 0:t.status)?"text-red-400":"High"===(null===(n=e.congestion)||void 0===n?void 0:n.status)?"text-orange-400":"Moderate"===(null===(r=e.congestion)||void 0===r?void 0:r.status)?"text-amber-400":"text-emerald-400",children:null===(a=e.congestion)||void 0===a?void 0:a.level_pct})]}),(0,zt.jsx)(GSe,{value:100*(null===(i=e.congestion)||void 0===i?void 0:i.level),className:"h-2 bg-white/10"}),(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Vessel Queue"}),(0,zt.jsx)("p",{className:"text-white",children:null===(s=e.congestion)||void 0===s?void 0:s.vessel_queue})]}),(0,zt.jsxs)("div",{className:"p-2 rounded bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Avg Wait"}),(0,zt.jsxs)("p",{className:"text-white",children:[null===(o=e.congestion)||void 0===o?void 0:o.avg_wait_days," days"]})]})]}),(0,zt.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs",children:[(0,zt.jsx)("span",{className:"text-slate-500",children:"Trend"}),(0,zt.jsxs)("span",{className:"rising"===e.trend?"text-red-400":"falling"===e.trend?"text-emerald-400":"text-slate-400",children:[e.trend," ",e.week_over_week_change]})]})]})]},e.port_id)})})},Fje=e=>{let{instruments:t}=e;return(0,zt.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t,n,r,a,i,s,o,l,c;return(0,zt.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500 capitalize",children:e.commodity})]}),(0,zt.jsxs)("div",{className:"text-right",children:[(0,zt.jsxs)("p",{className:"text-xl font-bold text-white",children:["$",null===(t=e.pricing)||void 0===t?void 0:t.current_price]}),(0,zt.jsxs)("p",{className:(null===(n=e.pricing)||void 0===n?void 0:n.change_24h)>=0?"text-emerald-400 text-xs":"text-red-400 text-xs",children:[null===(r=e.pricing)||void 0===r?void 0:r.change_24h_pct," (24h)"]})]})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-xs",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Volatility"}),(0,zt.jsx)("p",{className:"text-amber-400",children:null===(a=e.risk)||void 0===a?void 0:a.volatility})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Risk Premium"}),(0,zt.jsx)("p",{className:"text-red-400",children:null===(i=e.risk)||void 0===i?void 0:i.supply_risk_premium})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Volume 24h"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(s=e.trading)||void 0===s||null===(o=s.volume_24h)||void 0===o?void 0:o.toLocaleString()]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-slate-500",children:"Open Interest"}),(0,zt.jsxs)("p",{className:"text-white",children:["$",null===(l=e.trading)||void 0===l||null===(c=l.open_interest)||void 0===c?void 0:c.toLocaleString()]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,zt.jsx)(pje,{size:"sm",className:"flex-1 bg-emerald-500 hover:bg-emerald-600",children:"Buy"}),(0,zt.jsx)(pje,{size:"sm",variant:"outline",className:"flex-1 border-red-500/30 text-red-400",children:"Sell"})]})]},e.instrument_id)})})},Lje=e=>{let{icon:t,label:n,value:r,color:a}=e;return(0,zt.jsx)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("div",{className:"p-2 rounded-lg ".concat({amber:"text-amber-400 bg-amber-500/20",blue:"text-blue-400 bg-blue-500/20",purple:"text-purple-400 bg-purple-500/20",emerald:"text-emerald-400 bg-emerald-500/20",red:"text-red-400 bg-red-500/20"}[a]),children:(0,zt.jsx)(t,{size:20})}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:n}),(0,zt.jsx)("p",{className:"text-xl font-bold text-white",children:r})]})]})})},zje=e=>{let{alerts:t,presets:n,history:r,stats:a,ports:i,suppliers:s,markets:o,showCreateAlert:l,setShowCreateAlert:c,newAlert:u,setNewAlert:d,onCreateAlert:h,onDeleteAlert:p,onToggleAlert:f,onQuickSetup:g,onCheckAlerts:x,refreshing:v}=e;const y=e=>{const t={low:"text-slate-400 bg-slate-500/20",medium:"text-amber-400 bg-amber-500/20",high:"text-orange-400 bg-orange-500/20",critical:"text-red-400 bg-red-500/20"};return t[e]||t.medium};return(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"alerts-panel",children:[a&&(0,zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,zt.jsx)(Lje,{icon:Gbe,label:"Active Alerts",value:a.enabled_alerts,color:"blue"}),(0,zt.jsx)(Lje,{icon:s1,label:"Triggered Today",value:a.triggered_today,color:"amber"}),(0,zt.jsx)(Lje,{icon:Qve,label:"Total History",value:a.total_triggered_history,color:"emerald"}),(0,zt.jsx)(Lje,{icon:Um,label:"Disabled",value:a.disabled_alerts,color:"red"})]}),(0,zt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,zt.jsxs)(pje,{onClick:()=>c(!0),className:"bg-teal-500 hover:bg-teal-600",children:[(0,zt.jsx)(Xbe,{size:16,className:"mr-2"})," Create Alert"]}),(0,zt.jsxs)(pje,{onClick:x,disabled:v,variant:"outline",className:"border-amber-500/30 text-amber-400",children:[(0,zt.jsx)(awe,{size:16,className:"mr-2 ".concat(v?"animate-spin":"")})," Check Now"]})]}),(0,zt.jsx)(rn,{children:l&&(0,zt.jsx)(uu.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:(0,zt.jsxs)(cx,{title:"Create New Alert",icon:"\ud83d\udd14",accent:"teal",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Alert Type"}),(0,zt.jsxs)("select",{value:u.alert_type,onChange:e=>d(m(m({},u),{},{alert_type:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"port_congestion",children:"Port Congestion"}),(0,zt.jsx)("option",{value:"supplier_risk",children:"Supplier Risk"}),(0,zt.jsx)("option",{value:"geopolitical_risk",children:"Geopolitical Risk"}),(0,zt.jsx)("option",{value:"commodity_price",children:"Commodity Price"}),(0,zt.jsx)("option",{value:"market_event",children:"Market Event"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Target Entity"}),(0,zt.jsxs)("select",{value:u.target_entity,onChange:e=>{const t=e.target.value;let n=t;var r;if("port_congestion"===u.alert_type)n=(null===(r=i.find(e=>e.port_id===t))||void 0===r?void 0:r.name)||t;else if("supplier_risk"===u.alert_type){var a;n=(null===(a=s.find(e=>e.supplier_id===t))||void 0===a?void 0:a.name)||t}d(m(m({},u),{},{target_entity:t,entity_name:n}))},className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"",children:"Select..."}),"port_congestion"===u.alert_type&&i.map(e=>(0,zt.jsx)("option",{value:e.port_id,children:e.name},e.port_id)),"supplier_risk"===u.alert_type&&s.map(e=>(0,zt.jsx)("option",{value:e.supplier_id,children:e.name},e.supplier_id)),"geopolitical_risk"===u.alert_type&&(0,zt.jsx)("option",{value:"global",children:"Global Risk Index"}),"market_event"===u.alert_type&&o.map(e=>{var t;return(0,zt.jsxs)("option",{value:e.market_id,children:[null===(t=e.title)||void 0===t?void 0:t.substring(0,40),"..."]},e.market_id)})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Condition"}),(0,zt.jsxs)("select",{value:u.condition,onChange:e=>d(m(m({},u),{},{condition:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"above",children:"Above"}),(0,zt.jsx)("option",{value:"below",children:"Below"})]})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Threshold"}),(0,zt.jsx)("input",{type:"number",value:u.threshold,onChange:e=>d(m(m({},u),{},{threshold:parseFloat(e.target.value)})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm"})]}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("label",{className:"text-xs text-slate-500 block mb-1",children:"Priority"}),(0,zt.jsxs)("select",{value:u.priority,onChange:e=>d(m(m({},u),{},{priority:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[(0,zt.jsx)("option",{value:"low",children:"Low"}),(0,zt.jsx)("option",{value:"medium",children:"Medium"}),(0,zt.jsx)("option",{value:"high",children:"High"}),(0,zt.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,zt.jsxs)(pje,{onClick:h,className:"bg-teal-500 hover:bg-teal-600",children:[(0,zt.jsx)(Qve,{size:16,className:"mr-2"})," Create Alert"]}),(0,zt.jsx)(pje,{onClick:()=>c(!1),variant:"outline",children:"Cancel"})]})]})})}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)(cx,{title:"Active Alerts",icon:"\ud83d\udd14",accent:"blue",children:0===t.length?(0,zt.jsx)("p",{className:"text-slate-500 text-sm text-center py-6",children:"No alerts configured. Create one or use a preset below."}):(0,zt.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.map(e=>{var t,n;const r=(a=e.alert_type,{port_congestion:Ije,supplier_risk:Aje,geopolitical_risk:swe,commodity_price:Wm,market_event:jm,delivery_delay:Oje}[a]||Gbe);var a;return(0,zt.jsxs)("div",{className:"p-3 rounded-lg border ".concat(e.enabled?"bg-white/5 border-white/10":"bg-white/2 border-white/5 opacity-60"),children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)(r,{size:16,className:"text-teal-400"}),(0,zt.jsx)("span",{className:"text-white text-sm font-medium",children:e.entity_name})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(y(e.priority)),children:e.priority}),(0,zt.jsx)("button",{onClick:()=>f(e.alert_id,e.enabled),className:"p-1 rounded ".concat(e.enabled?"text-emerald-400":"text-slate-500"),children:e.enabled?(0,zt.jsx)(Qve,{size:14}):(0,zt.jsx)(Um,{size:14})}),(0,zt.jsx)("button",{onClick:()=>p(e.alert_id),className:"p-1 text-red-400 hover:text-red-300",children:(0,zt.jsx)($be,{size:14})})]})]}),(0,zt.jsxs)("p",{className:"text-xs text-slate-400",children:[e.condition," ",e.threshold," \u2022 Type: ",null===(t=e.alert_type)||void 0===t?void 0:t.replace("_"," ")]}),null!==e.current_value&&(0,zt.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Current: ",null===(n=e.current_value)||void 0===n?void 0:n.toFixed(2)]})]},e.alert_id)})})}),(0,zt.jsx)(cx,{title:"Quick Setup",icon:"\u26a1",accent:"amber",children:(0,zt.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10 flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)("span",{className:"text-2xl",children:e.icon}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]}),(0,zt.jsx)(pje,{size:"sm",onClick:()=>g(e),className:"bg-amber-500/20 text-amber-400 hover:bg-amber-500/30",children:(0,zt.jsx)(Xbe,{size:14})})]},t))})})]}),r.length>0&&(0,zt.jsx)(cx,{title:"Recent Triggered Alerts",icon:"\ud83d\udcdc",accent:"purple",children:(0,zt.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.slice(0,10).map((e,t)=>(0,zt.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border-l-2 border-purple-500",children:[(0,zt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(y(e.priority)),children:e.priority}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:new Date(e.triggered_at).toLocaleString()})]}),(0,zt.jsx)("p",{className:"text-sm text-white",children:e.message})]},t))})})]})},Bje=()=>{const[e,t]=(0,o.useState)("control-tower"),[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[d,h]=(0,o.useState)([]),[p,f]=(0,o.useState)(null),[g,x]=(0,o.useState)(!0),[v,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)([]),[k,N]=(0,o.useState)([]),[S,j]=(0,o.useState)([]),[C,E]=(0,o.useState)(null),[T,I]=(0,o.useState)(!1),[A,O]=(0,o.useState)({alert_type:"port_congestion",target_entity:"",entity_name:"",condition:"above",threshold:80,priority:"medium"});(0,o.useEffect)(()=>{(async()=>{x(!0);try{const[e,t,n,a,s,o]=await Promise.all([fetch("".concat(_je,"/supply-chain/control-tower")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/markets")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/suppliers")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/ports")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/instruments")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/geopolitical-risk")).then(e=>e.json())]);r(e),i(t||[]),l(n||[]),u(a||[]),h(s||[]),f(o),await _()}catch(e){console.error("Error fetching supply chain data:",e)}x(!1)})()},[]);const _=async()=>{try{const[e,t,n,r]=await Promise.all([fetch("".concat(_je,"/supply-chain/alerts?user_id=demo_user")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/alerts/presets")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/alerts/history?user_id=demo_user")).then(e=>e.json()),fetch("".concat(_je,"/supply-chain/alerts/stats")).then(e=>e.json())]);w(e||[]),N(t||[]),j(n||[]),E(r)}catch(e){console.error("Error loading alert data:",e)}},R=e=>({low:"text-emerald-400",moderate:"text-amber-400",elevated:"text-orange-400",high:"text-red-400",critical:"text-red-600"}[null===e||void 0===e?void 0:e.toLowerCase()]||"text-slate-400"),P=e=>({low:"bg-emerald-500/20 border-emerald-500/30",moderate:"bg-amber-500/20 border-amber-500/30",elevated:"bg-orange-500/20 border-orange-500/30",high:"bg-red-500/20 border-red-500/30",critical:"bg-red-600/30 border-red-600/40"}[null===e||void 0===e?void 0:e.toLowerCase()]||"bg-slate-500/20 border-slate-500/30");return g?(0,zt.jsx)("div",{className:"flex items-center justify-center h-64","data-testid":"supply-chain-loading",children:(0,zt.jsx)(uu.div,{className:"w-12 h-12 border-4 border-teal-500/30 border-t-teal-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):(0,zt.jsxs)("div",{className:"space-y-6","data-testid":"supply-chain-hub",children:[(0,zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Ije,{className:"text-teal-400"}),"Supply Chain Command Center"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Trade \u2022 Monitor \u2022 Hedge Supply Chain Risk"})]}),(0,zt.jsxs)(pje,{onClick:async()=>{y(!0);const e=await fetch("".concat(_je,"/supply-chain/control-tower")).then(e=>e.json());r(e),y(!1)},disabled:v,variant:"outline",className:"border-teal-500/30 text-teal-400",children:[(0,zt.jsx)(awe,{size:16,className:v?"animate-spin mr-2":"mr-2"}),"Refresh"]})]}),p&&(0,zt.jsx)("div",{className:"p-4 rounded-xl border ".concat(P(p.level)),children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zt.jsx)(swe,{size:24,className:R(p.level)}),(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Geopolitical Risk Index"}),(0,zt.jsx)("p",{className:"text-2xl font-bold ".concat(R(p.level)),children:p.index})]})]}),(0,zt.jsx)("div",{className:"px-4 py-2 rounded-lg ".concat(P(p.level)),children:(0,zt.jsx)("p",{className:"text-lg font-bold ".concat(R(p.level)),children:p.level})})]})}),(0,zt.jsxs)(lSe,{value:e,onValueChange:t,className:"w-full",children:[(0,zt.jsxs)(cSe,{className:"bg-black/40 border border-white/10 p-1 rounded-lg flex flex-wrap gap-1",children:[(0,zt.jsxs)(uSe,{value:"control-tower",className:"data-[state=active]:bg-teal-500/20 data-[state=active]:text-teal-400",children:[(0,zt.jsx)(Em,{size:14,className:"mr-1"})," Control Tower"]}),(0,zt.jsxs)(uSe,{value:"alerts",className:"data-[state=active]:bg-red-500/20 data-[state=active]:text-red-400",children:[(0,zt.jsx)(Gbe,{size:14,className:"mr-1"})," Alerts ",b.length>0&&(0,zt.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-red-500/30 text-xs",children:b.length})]}),(0,zt.jsxs)(uSe,{value:"markets",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-400",children:[(0,zt.jsx)(jm,{size:14,className:"mr-1"})," Event Markets"]}),(0,zt.jsxs)(uSe,{value:"suppliers",className:"data-[state=active]:bg-amber-500/20 data-[state=active]:text-amber-400",children:[(0,zt.jsx)(Aje,{size:14,className:"mr-1"})," Suppliers"]}),(0,zt.jsxs)(uSe,{value:"ports",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400",children:[(0,zt.jsx)(Ije,{size:14,className:"mr-1"})," Ports"]}),(0,zt.jsxs)(uSe,{value:"derivatives",className:"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400",children:[(0,zt.jsx)(Wm,{size:14,className:"mr-1"})," SCF Derivatives"]})]}),(0,zt.jsx)(dSe,{value:"control-tower",className:"mt-6",children:(0,zt.jsx)(Rje,{data:n,getRiskColor:R,getRiskBg:P})}),(0,zt.jsx)(dSe,{value:"alerts",className:"mt-6",children:(0,zt.jsx)(zje,{alerts:b,presets:k,history:S,stats:C,ports:c,suppliers:s,markets:a,showCreateAlert:T,setShowCreateAlert:I,newAlert:A,setNewAlert:O,onCreateAlert:async()=>{try{const e=await fetch("".concat(_je,"/supply-chain/alerts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m(m({},A),{},{user_id:"demo_user"}))});(await e.json()).success&&(await _(),I(!1),O({alert_type:"port_congestion",target_entity:"",entity_name:"",condition:"above",threshold:80,priority:"medium"}))}catch(e){console.error("Error creating alert:",e)}},onDeleteAlert:async e=>{try{await fetch("".concat(_je,"/supply-chain/alerts/").concat(e),{method:"DELETE"}),await _()}catch(t){console.error("Error deleting alert:",t)}},onToggleAlert:async(e,t)=>{try{await fetch("".concat(_je,"/supply-chain/alerts/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!t})}),await _()}catch(n){console.error("Error toggling alert:",n)}},onQuickSetup:async e=>{let t="",n="";if("port_congestion"===e.alert_type&&c.length>0)t=c[0].port_id,n=c[0].name;else if("supplier_risk"===e.alert_type&&s.length>0)t=s[0].supplier_id,n=s[0].name;else if("geopolitical_risk"===e.alert_type)t="global",n="Global Risk Index";else if("market_event"===e.alert_type&&a.length>0){var r;t=a[0].market_id,n=(null===(r=a[0].title)||void 0===r?void 0:r.substring(0,30))+"..."}try{const r=await fetch("".concat(_je,"/supply-chain/alerts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"demo_user",alert_type:e.alert_type,target_entity:t,entity_name:n,condition:e.condition,threshold:e.threshold,priority:e.priority})});(await r.json()).success&&await _()}catch(i){console.error("Error creating preset alert:",i)}},onCheckAlerts:async()=>{try{y(!0);const e=await fetch("".concat(_je,"/supply-chain/alerts/check"),{method:"POST"}),t=await e.json();await _(),t.alerts_triggered>0&&alert("".concat(t.alerts_triggered," alert(s) triggered!"))}catch(e){console.error("Error checking alerts:",e)}y(!1)},refreshing:v})}),(0,zt.jsx)(dSe,{value:"markets",className:"mt-6",children:(0,zt.jsx)(Pje,{markets:a})}),(0,zt.jsx)(dSe,{value:"suppliers",className:"mt-6",children:(0,zt.jsx)(Mje,{suppliers:s,getRiskColor:R})}),(0,zt.jsx)(dSe,{value:"ports",className:"mt-6",children:(0,zt.jsx)(Dje,{ports:c})}),(0,zt.jsx)(dSe,{value:"derivatives",className:"mt-6",children:(0,zt.jsx)(Fje,{instruments:d})})]})]})},Uje=km("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Wje=km("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Vje=km("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),Hje="".concat("https://srv1304213.hstgr.cloud/api","/api"),Gje=[{id:"dashboard",label:"Trading",icon:Uje,labelKey:"nav.trading"},{id:"playground",label:"Playground",icon:Wje,labelKey:"Playground"},{id:"copy-trading",label:"Copy",icon:Jve,labelKey:"Copy Trading"},{id:"prediction-markets",label:"Predict",icon:Jbe,labelKey:"Prediction Markets"},{id:"supply-chain",label:"Supply",icon:Ije,labelKey:"Supply Chain"},{id:"quantitative",label:"Quant",icon:Tke,labelKey:"Quant Research"},{id:"bot",label:"AI Bot",icon:Sm,labelKey:"AI Bot"},{id:"training",label:"Training",icon:lke,labelKey:"Training"},{id:"ml-predictions",label:"ML Predict",icon:Dm,labelKey:"ML Predict"},{id:"tournament",label:"Tournament",icon:zm,labelKey:"Tournament"},{id:"competitions",label:"Compete",icon:qwe,labelKey:"Compete"},{id:"avatar",label:"Avatar",icon:Kve,labelKey:"Avatar"},{id:"crawler",label:"Signals",icon:mwe,labelKey:"crawler.title"},{id:"journal",label:"Journal",icon:vwe,labelKey:"Journal"},{id:"leaderboard",label:"Leaders",icon:Tm,labelKey:"Leaderboard"},{id:"sentiment",label:"Sentiment",icon:Lm,labelKey:"Sentiment"},{id:"benzinga",label:"Benzinga",icon:rwe,labelKey:"Benzinga"},{id:"orders",label:"Orders",icon:Zbe,labelKey:"nav.orders"},{id:"alerts",label:"Alerts",icon:Gbe,labelKey:"nav.alerts"},{id:"portfolio",label:"Portfolio",icon:Mm,labelKey:"nav.portfolio"},{id:"wallet",label:"Wallet",icon:Fm,labelKey:"nav.wallet"},{id:"settings",label:"Settings",icon:Xve,labelKey:"common.settings"}],Kje=()=>{var e,t,n,r,a;const{isAuthenticated:i,loginWithGoogle:s}=Lh(),{t:l}=af(),[c,u]=(0,o.useState)(!0),[d,h]=(0,o.useState)(!0),[p,f]=(0,o.useState)("dashboard"),[m,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!0),[y,b]=(0,o.useState)("FOCUSED"),[w,k]=(0,o.useState)(!0),[N,S]=(0,o.useState)([]),[j,C]=(0,o.useState)({}),[E,T]=(0,o.useState)(!1);(0,o.useEffect)(()=>{const e=async()=>{try{const e=await Mh.get("".concat(Hje,"/market/prices")),t={};e.data.forEach(e=>{t[e.symbol]=e.price}),C(t)}catch(e){console.error("Error fetching prices:",e)}};e();const t=setInterval(e,1e4);return()=>clearInterval(t)},[]);const I=(0,o.useCallback)(e=>b(e),[]),A=(0,o.useCallback)(e=>{O("AI Mood: ".concat(e.state," (").concat(e.confidence.toFixed(0),"%)"))},[]),O=e=>{const t={id:Date.now(),text:e,timestamp:new Date};S(e=>[...e,t]),setTimeout(()=>S(e=>e.filter(e=>e.id!==t.id)),5e3)},_=()=>{i||s(),h(!1)};return c?(0,zt.jsx)(rn,{children:(0,zt.jsx)(If,{onComplete:()=>u(!1)})}):!i&&d?(0,zt.jsx)(hx,{onGetStarted:_}):(0,zt.jsx)(Hbe,{initialBalance:1e5,children:(0,zt.jsxs)("div",{className:"min-h-screen bg-[#050505] overflow-x-hidden","data-testid":"main-dashboard",children:[(0,zt.jsx)(Tf,{}),(0,zt.jsxs)("div",{className:"relative z-10 min-h-screen pb-20 md:pb-16",children:[(0,zt.jsxs)("header",{className:"sticky top-0 z-40 border-b border-white/5 bg-black/60 backdrop-blur-2xl",children:[(0,zt.jsx)("div",{className:"max-w-[1920px] mx-auto px-3 md:px-6 py-2 md:py-3",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zt.jsxs)("div",{className:"flex items-center gap-3 md:gap-6",children:[(0,zt.jsx)("button",{onClick:()=>T(!E),className:"md:hidden p-2 text-slate-400 hover:text-white","data-testid":"mobile-menu-btn",children:E?(0,zt.jsx)(Um,{size:20}):(0,zt.jsx)(Vje,{size:20})}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,zt.jsx)("div",{className:"w-8 h-8 md:w-9 md:h-9 rounded-xl bg-gradient-to-br from-teal-500/20 to-transparent border border-teal-500/30 flex items-center justify-center",children:(0,zt.jsx)(Om,{className:"text-teal-400",size:16})}),(0,zt.jsxs)("div",{className:"hidden sm:block",children:[(0,zt.jsx)("h1",{className:"font-heading text-base md:text-lg font-bold uppercase tracking-wider text-white",children:"OracleIQTrader"}),(0,zt.jsx)("p",{className:"text-[10px] text-slate-500 font-mono hidden md:block",children:"AI Trading"})]})]}),(0,zt.jsx)("nav",{className:"hidden lg:flex items-center gap-1",children:Gje.map(e=>(0,zt.jsxs)("button",{onClick:()=>f(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-mono transition-all ".concat(p===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"text-slate-500 hover:text-white hover:bg-white/5"),"data-testid":"nav-".concat(e.id),children:[(0,zt.jsx)(e.icon,{size:14}),e.labelKey?l(e.labelKey):e.label]},e.id))})]}),(0,zt.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,zt.jsx)(Lwe,{variant:"simple"}),(0,zt.jsx)(wwe,{variant:"compact"}),(0,zt.jsxs)(yx,{variant:"active",pulse:!0,className:"hidden sm:flex",children:[(0,zt.jsx)(Em,{size:10}),l("status.live")]}),(0,zt.jsxs)(yx,{variant:"FOCUSED"===y?"active":"STRESSED"===y?"danger":"warning",className:"hidden md:flex",children:[(0,zt.jsx)(Nm,{size:10}),l("status.".concat(y.toLowerCase()))]}),i?(0,zt.jsx)($ve,{}):(0,zt.jsxs)(fx,{onClick:s,variant:"teal",size:"sm","data-testid":"header-login-btn",children:[(0,zt.jsx)(gx,{size:14}),(0,zt.jsx)("span",{className:"hidden sm:inline",children:"Sign In"})]})]})]})}),(0,zt.jsx)(rn,{children:E&&(0,zt.jsx)(uu.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"lg:hidden border-t border-white/5 bg-black/80",children:(0,zt.jsx)("div",{className:"grid grid-cols-3 gap-2 p-3",children:Gje.map(e=>(0,zt.jsxs)("button",{onClick:()=>{f(e.id),T(!1)},className:"flex flex-col items-center gap-1 p-3 rounded-lg text-xs font-mono transition-all ".concat(p===e.id?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-white/5 text-slate-500 border border-white/10"),children:[(0,zt.jsx)(e.icon,{size:18}),e.labelKey?l(e.labelKey):e.label]},e.id))})})})]}),(0,zt.jsx)("main",{className:"max-w-[1920px] mx-auto px-3 md:px-6 py-4 md:py-6",children:(0,zt.jsxs)(rn,{mode:"wait",children:["dashboard"===p&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6",children:[(0,zt.jsxs)("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,zt.jsx)(q0,{onMoodChange:I,onMoodDetected:A}),(0,zt.jsx)(Ox,{onCommand:e=>O("Voice: ".concat(e.action," ").concat(e.symbol||""))})]}),(0,zt.jsxs)("div",{className:"lg:col-span-6 space-y-4 md:space-y-6",children:[w&&(0,zt.jsx)(Ex,{onClose:()=>k(!1),symbols:["BTC","ETH","SPY"]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,zt.jsx)(zve,{symbol:"BTC",title:"Bitcoin / USD"}),(0,zt.jsx)(zve,{symbol:"ETH",title:"Ethereum / USD"})]}),(0,zt.jsx)(rn,{children:N.map(e=>(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},className:"glass-teal rounded-xl px-4 py-2",children:(0,zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zt.jsx)(Om,{size:14,className:"text-teal-400"}),(0,zt.jsx)("p",{className:"text-sm text-white font-mono flex-1",children:e.text}),(0,zt.jsx)("span",{className:"text-xs text-slate-500",children:e.timestamp.toLocaleTimeString()})]})},e.id))}),(0,zt.jsxs)(cx,{title:"Speed Trading",icon:"\u26a1",accent:"teal",children:[(0,zt.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Symbol"}),(0,zt.jsx)("p",{className:"text-lg md:text-xl font-heading font-bold text-white",children:"AAPL"})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Qty"}),(0,zt.jsx)("p",{className:"text-lg md:text-xl font-heading font-bold text-white",children:"1,000"})]}),(0,zt.jsxs)("div",{className:"text-center",children:[(0,zt.jsx)("p",{className:"text-xs font-mono text-slate-500",children:"Type"}),(0,zt.jsx)("p",{className:"text-lg md:text-xl font-heading font-bold text-teal-400",children:"MARKET"})]})]}),(0,zt.jsxs)("div",{className:"flex gap-3",children:[(0,zt.jsxs)(fx,{variant:"teal",className:"flex-1","data-testid":"quick-buy-btn",children:[(0,zt.jsx)(mx,{size:16}),"BUY"]}),(0,zt.jsxs)(fx,{variant:"rose",className:"flex-1","data-testid":"quick-sell-btn",children:[(0,zt.jsx)(kx,{size:16}),"SELL"]})]})]})]}),(0,zt.jsxs)("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,zt.jsx)(J0,{onGesture:e=>O("Gesture: ".concat(e.name))}),(0,zt.jsx)(a1,{tradeRequest:{action:"BUY",symbol:"AAPL",quantity:1e3,price:248.5}}),(0,zt.jsx)(c1,{symbol:"AAPL",action:"BUY"})]})]},"dashboard"),"orders"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(twe,{currentPrices:j})},"orders"),"alerts"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:(0,zt.jsx)(Qbe,{currentPrices:j})},"alerts"),"auto"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(cwe,{currentPrices:j,onTrade:e=>O("Auto: ".concat(e.side," ").concat(e.symbol))})},"auto"),"news"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(lwe,{})},"news"),"social"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,zt.jsx)(nye,{})},"social"),"portfolio"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,zt.jsx)(Wbe,{})},"portfolio"),"wallet"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:(0,zt.jsx)(fwe,{currentPrices:j})},"wallet"),"playground"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(ike,{})},"playground"),"bot"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto",children:(0,zt.jsx)(oke,{})},"bot"),"training"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(dke,{})},"training"),"ml-predictions"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(pke,{})},"predictions"),"tournament"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(Eke,{})},"tournament"),"quantitative"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-7xl mx-auto",children:(0,zt.jsx)(eje,{})},"quantitative"),"prediction-markets"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(yje,{})},"prediction-markets"),"copy-trading"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:(0,zt.jsx)(Tje,{})},"copy-trading"),"supply-chain"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-7xl mx-auto",children:(0,zt.jsx)(Bje,{})},"supply-chain"),"competitions"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(mke,{})},"competitions"),"crawler"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:(0,zt.jsx)(bwe,{})},"crawler"),"export"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:(0,zt.jsx)(jwe,{})},"export"),"avatar"===p&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:[(0,zt.jsxs)("div",{className:"mb-6",children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Kve,{className:"text-teal-400"}),"AI Trading Avatar"]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Interactive voice assistant with real-time market insights"})]}),(0,zt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zt.jsx)("div",{className:"aspect-square max-h-[400px]",children:(0,zt.jsx)(Pwe,{marketData:{btc_change:(null===(e=j.BTC)||void 0===e?void 0:e.change)||0}})}),(0,zt.jsxs)("div",{className:"space-y-4",children:[(0,zt.jsx)(cx,{title:"Avatar Features",icon:"\ud83e\udd16",accent:"teal",children:(0,zt.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 68-point facial mesh overlay"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Real-time emotional expressions"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Voice synthesis (OpenAI TTS)"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Market-responsive mood"}),(0,zt.jsx)("li",{className:"flex items-center gap-2",children:"\u2713 Voice command recognition"})]})}),(0,zt.jsx)(cx,{title:"Current Market Context",icon:"\ud83d\udcca",accent:"blue",children:(0,zt.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"BTC Change"}),(0,zt.jsxs)("p",{className:"font-mono ".concat(((null===(t=j.BTC)||void 0===t?void 0:t.change)||0)>=0?"text-emerald-400":"text-red-400"),children:[((null===(n=j.BTC)||void 0===n?void 0:n.change)||0).toFixed(2),"%"]})]}),(0,zt.jsxs)("div",{className:"p-2 rounded-lg bg-white/5",children:[(0,zt.jsx)("p",{className:"text-slate-500 text-xs",children:"ETH Change"}),(0,zt.jsxs)("p",{className:"font-mono ".concat(((null===(r=j.ETH)||void 0===r?void 0:r.change)||0)>=0?"text-emerald-400":"text-red-400"),children:[((null===(a=j.ETH)||void 0===a?void 0:a.change)||0).toFixed(2),"%"]})]})]})})]})]})]},"avatar"),"settings"===p&&(0,zt.jsxs)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-2xl mx-auto",children:[(0,zt.jsxs)("div",{className:"mb-6",children:[(0,zt.jsxs)("h2",{className:"font-heading text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:[(0,zt.jsx)(Xve,{className:"text-slate-400"}),l("common.settings")]}),(0,zt.jsx)("p",{className:"text-slate-500 text-sm font-mono mt-1",children:"Configure your trading experience"})]}),(0,zt.jsxs)("div",{className:"space-y-6",children:[(0,zt.jsx)(cx,{title:"Appearance",icon:"\ud83c\udfa8",accent:"purple",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:"Theme"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Choose your preferred color scheme"})]}),(0,zt.jsx)(Lwe,{})]})}),(0,zt.jsx)(cx,{title:"Notifications",icon:"\ud83d\udd14",accent:"amber",children:(0,zt.jsx)(Uwe,{})}),(0,zt.jsx)(cx,{title:"Language",icon:"\ud83c\udf0d",accent:"blue",children:(0,zt.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"text-sm text-white",children:"Display Language"}),(0,zt.jsx)("p",{className:"text-xs text-slate-500",children:"Select your preferred language"})]}),(0,zt.jsx)(wwe,{})]})}),(0,zt.jsx)(bke,{})]})]},"settings"),"journal"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto",children:(0,zt.jsx)(Gwe,{})},"journal"),"leaderboard"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)($we,{})},"leaderboard"),"sentiment"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-5xl mx-auto",children:(0,zt.jsx)(eke,{})},"sentiment"),"benzinga"===p&&(0,zt.jsx)(uu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-4xl mx-auto",children:(0,zt.jsx)(gke,{})},"benzinga")]})}),(0,zt.jsx)("div",{className:"hidden md:block fixed bottom-14 left-0 right-0 z-30 px-6",children:(0,zt.jsx)(Uve,{voiceActive:m,gestureReady:x,mood:y,riskLevel:"LOW"})}),(0,zt.jsx)(Gve,{onVoice:()=>{g(!m),O(m?"Voice deactivated":"Voice activated")},onGesture:()=>O("Gesture recognition triggered"),onMood:()=>{const e=["FOCUSED","STRESSED","FATIGUED","CONFIDENT"],t=e[(e.indexOf(y)+1)%e.length];b(t),O("Mood: ".concat(t))},onOracle:()=>O("Querying oracle memory..."),onMessage:()=>{const e=["Market volatility increasing","Bullish signal on NVDA","Risk parameters updated"];O(e[Math.floor(Math.random()*e.length)])},voiceActive:m})]})]})})},qje=()=>{var e;return null!==(e=Ce().hash)&&void 0!==e&&e.includes("session_id=")?(0,zt.jsx)(vx,{}):(0,zt.jsxs)($e,{children:[(0,zt.jsx)(Xe,{path:"/login",element:(0,zt.jsx)(xx,{})}),(0,zt.jsx)(Xe,{path:"/auth/callback",element:(0,zt.jsx)(vx,{})}),(0,zt.jsx)(Xe,{path:"/*",element:(0,zt.jsx)(Kje,{})})]})};const Xje=function(){return(0,zt.jsx)(It,{children:(0,zt.jsx)(Wh,{children:(0,zt.jsx)(zh,{children:(0,zt.jsx)("div",{className:"App",children:(0,zt.jsx)(qje,{})})})})})};c.createRoot(document.getElementById("root")).render((0,zt.jsx)(o.StrictMode,{children:(0,zt.jsx)(Xje,{})}))})()})();
//# sourceMappingURL=main.d8fe1fa9.js.map